var $e=Object.defineProperty;var Oe=(d,m,g)=>m in d?$e(d,m,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[m]=g;var De=(d,m)=>()=>(m||d((m={exports:{}}).exports,m),m.exports);var fe=(d,m,g)=>Oe(d,typeof m!="symbol"?m+"":m,g);var ze=De((exports,module)=>{(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const I of document.querySelectorAll('link[rel="modulepreload"]'))w(I);new MutationObserver(I=>{for(const P of I)if(P.type==="childList")for(const F of P.addedNodes)F.tagName==="LINK"&&F.rel==="modulepreload"&&w(F)}).observe(document,{childList:!0,subtree:!0});function g(I){const P={};return I.integrity&&(P.integrity=I.integrity),I.referrerPolicy&&(P.referrerPolicy=I.referrerPolicy),I.crossOrigin==="use-credentials"?P.credentials="include":I.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function w(I){if(I.ep)return;I.ep=!0;const P=g(I);fetch(I.href,P)}})();const DEV=!1;var is_array=Array.isArray,index_of=Array.prototype.indexOf,array_from=Array.from,define_property=Object.defineProperty,get_descriptor=Object.getOwnPropertyDescriptor,get_descriptors=Object.getOwnPropertyDescriptors,object_prototype=Object.prototype,array_prototype=Array.prototype,get_prototype_of=Object.getPrototypeOf;const noop$1=()=>{};function run_all(d){for(var m=0;m<d.length;m++)d[m]()}const DERIVED=2,EFFECT=4,RENDER_EFFECT=8,BLOCK_EFFECT=16,BRANCH_EFFECT=32,ROOT_EFFECT=64,BOUNDARY_EFFECT=128,UNOWNED=256,DISCONNECTED=512,CLEAN=1024,DIRTY$1=2048,MAYBE_DIRTY=4096,INERT=8192,DESTROYED=16384,EFFECT_RAN=32768,EFFECT_TRANSPARENT=65536,HEAD_EFFECT=1<<19,EFFECT_HAS_DERIVED=1<<20,STATE_SYMBOL=Symbol("$state"),LEGACY_PROPS=Symbol("legacy props"),LOADING_ATTR_SYMBOL=Symbol("");function equals(d){return d===this.v}function safe_not_equal(d,m){return d!=d?m==m:d!==m||d!==null&&typeof d=="object"||typeof d=="function"}function safe_equals(d){return!safe_not_equal(d,this.v)}function effect_in_teardown(d){throw new Error("https://svelte.dev/e/effect_in_teardown")}function effect_in_unowned_derived(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function effect_orphan(d){throw new Error("https://svelte.dev/e/effect_orphan")}function effect_update_depth_exceeded(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function props_invalid_value(d){throw new Error("https://svelte.dev/e/props_invalid_value")}function state_descriptors_fixed(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function state_prototype_fixed(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function state_unsafe_local_read(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function state_unsafe_mutation(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let tracing_mode_flag=!1;const EACH_ITEM_REACTIVE=1,EACH_INDEX_REACTIVE=2,EACH_IS_CONTROLLED=4,EACH_IS_ANIMATED=8,EACH_ITEM_IMMUTABLE=16,PROPS_IS_IMMUTABLE=1,PROPS_IS_UPDATED=4,PROPS_IS_BINDABLE=8,PROPS_IS_LAZY_INITIAL=16,TEMPLATE_FRAGMENT=1,TEMPLATE_USE_IMPORT_NODE=2,UNINITIALIZED=Symbol();function source(d,m){var g={f:0,v:d,reactions:null,equals,rv:0,wv:0};return g}function state(d){return push_derived_source(source(d))}function mutable_source(d,m=!1){const g=source(d);return m||(g.equals=safe_equals),g}function push_derived_source(d){return active_reaction!==null&&active_reaction.f&DERIVED&&(derived_sources===null?set_derived_sources([d]):derived_sources.push(d)),d}function set(d,m){return active_reaction!==null&&is_runes()&&active_reaction.f&(DERIVED|BLOCK_EFFECT)&&(derived_sources===null||!derived_sources.includes(d))&&state_unsafe_mutation(),internal_set(d,m)}function internal_set(d,m){return d.equals(m)||(d.v,d.v=m,d.wv=increment_write_version(),mark_reactions(d,DIRTY$1),active_effect!==null&&active_effect.f&CLEAN&&!(active_effect.f&(BRANCH_EFFECT|ROOT_EFFECT))&&(untracked_writes===null?set_untracked_writes([d]):untracked_writes.push(d))),m}function mark_reactions(d,m){var g=d.reactions;if(g!==null)for(var w=g.length,I=0;I<w;I++){var P=g[I],F=P.f;F&DIRTY$1||(set_signal_status(P,m),F&(CLEAN|UNOWNED)&&(F&DERIVED?mark_reactions(P,MAYBE_DIRTY):schedule_effect(P)))}}let hydrating=!1;function proxy(d,m=null,g){if(typeof d!="object"||d===null||STATE_SYMBOL in d)return d;const w=get_prototype_of(d);if(w!==object_prototype&&w!==array_prototype)return d;var I=new Map,P=is_array(d),F=source(0);P&&I.set("length",source(d.length));var $;return new Proxy(d,{defineProperty(D,U,j){(!("value"in j)||j.configurable===!1||j.enumerable===!1||j.writable===!1)&&state_descriptors_fixed();var Z=I.get(U);return Z===void 0?(Z=source(j.value),I.set(U,Z)):set(Z,proxy(j.value,$)),!0},deleteProperty(D,U){var j=I.get(U);if(j===void 0)U in D&&I.set(U,source(UNINITIALIZED));else{if(P&&typeof U=="string"){var Z=I.get("length"),G=Number(U);Number.isInteger(G)&&G<Z.v&&set(Z,G)}set(j,UNINITIALIZED),update_version(F)}return!0},get(D,U,j){var q;if(U===STATE_SYMBOL)return d;var Z=I.get(U),G=U in D;if(Z===void 0&&(!G||(q=get_descriptor(D,U))!=null&&q.writable)&&(Z=source(proxy(G?D[U]:UNINITIALIZED,$)),I.set(U,Z)),Z!==void 0){var H=get(Z);return H===UNINITIALIZED?void 0:H}return Reflect.get(D,U,j)},getOwnPropertyDescriptor(D,U){var j=Reflect.getOwnPropertyDescriptor(D,U);if(j&&"value"in j){var Z=I.get(U);Z&&(j.value=get(Z))}else if(j===void 0){var G=I.get(U),H=G==null?void 0:G.v;if(G!==void 0&&H!==UNINITIALIZED)return{enumerable:!0,configurable:!0,value:H,writable:!0}}return j},has(D,U){var H;if(U===STATE_SYMBOL)return!0;var j=I.get(U),Z=j!==void 0&&j.v!==UNINITIALIZED||Reflect.has(D,U);if(j!==void 0||active_effect!==null&&(!Z||(H=get_descriptor(D,U))!=null&&H.writable)){j===void 0&&(j=source(Z?proxy(D[U],$):UNINITIALIZED),I.set(U,j));var G=get(j);if(G===UNINITIALIZED)return!1}return Z},set(D,U,j,Z){var V;var G=I.get(U),H=U in D;if(P&&U==="length")for(var q=j;q<G.v;q+=1){var W=I.get(q+"");W!==void 0?set(W,UNINITIALIZED):q in D&&(W=source(UNINITIALIZED),I.set(q+"",W))}G===void 0?(!H||(V=get_descriptor(D,U))!=null&&V.writable)&&(G=source(void 0),set(G,proxy(j,$)),I.set(U,G)):(H=G.v!==UNINITIALIZED,set(G,proxy(j,$)));var Q=Reflect.getOwnPropertyDescriptor(D,U);if(Q!=null&&Q.set&&Q.set.call(Z,j),!H){if(P&&typeof U=="string"){var J=I.get("length"),K=Number(U);Number.isInteger(K)&&K>=J.v&&set(J,K+1)}update_version(F)}return!0},ownKeys(D){get(F);var U=Reflect.ownKeys(D).filter(G=>{var H=I.get(G);return H===void 0||H.v!==UNINITIALIZED});for(var[j,Z]of I)Z.v!==UNINITIALIZED&&!(j in D)&&U.push(j);return U},setPrototypeOf(){state_prototype_fixed()}})}function update_version(d,m=1){set(d,d.v+m)}var $window,first_child_getter,next_sibling_getter;function init_operations(){if($window===void 0){$window=window;var d=Element.prototype,m=Node.prototype;first_child_getter=get_descriptor(m,"firstChild").get,next_sibling_getter=get_descriptor(m,"nextSibling").get,d.__click=void 0,d.__className="",d.__attributes=null,d.__styles=null,d.__e=void 0,Text.prototype.__t=void 0}}function create_text(d=""){return document.createTextNode(d)}function get_first_child(d){return first_child_getter.call(d)}function get_next_sibling(d){return next_sibling_getter.call(d)}function child(d,m){return get_first_child(d)}function first_child(d,m){{var g=get_first_child(d);return g instanceof Comment&&g.data===""?get_next_sibling(g):g}}function sibling(d,m=1,g=!1){let w=d;for(;m--;)w=get_next_sibling(w);return w}function clear_text_content(d){d.textContent=""}function derived(d){var m=DERIVED|DIRTY$1;active_effect===null?m|=UNOWNED:active_effect.f|=EFFECT_HAS_DERIVED;var g=active_reaction!==null&&active_reaction.f&DERIVED?active_reaction:null;const w={children:null,ctx:component_context,deps:null,equals,f:m,fn:d,reactions:null,rv:0,v:null,wv:0,parent:g??active_effect};return g!==null&&(g.children??(g.children=[])).push(w),w}function derived_safe_equal(d){const m=derived(d);return m.equals=safe_equals,m}function destroy_derived_children(d){var m=d.children;if(m!==null){d.children=null;for(var g=0;g<m.length;g+=1){var w=m[g];w.f&DERIVED?destroy_derived(w):destroy_effect(w)}}}function get_derived_parent_effect(d){for(var m=d.parent;m!==null;){if(!(m.f&DERIVED))return m;m=m.parent}return null}function execute_derived(d){var m,g=active_effect;set_active_effect(get_derived_parent_effect(d));try{destroy_derived_children(d),m=update_reaction(d)}finally{set_active_effect(g)}return m}function update_derived(d){var m=execute_derived(d),g=(skip_reaction||d.f&UNOWNED)&&d.deps!==null?MAYBE_DIRTY:CLEAN;set_signal_status(d,g),d.equals(m)||(d.v=m,d.wv=increment_write_version())}function destroy_derived(d){destroy_derived_children(d),remove_reactions(d,0),set_signal_status(d,DESTROYED),d.v=d.children=d.deps=d.ctx=d.reactions=null}function validate_effect(d){active_effect===null&&active_reaction===null&&effect_orphan(),active_reaction!==null&&active_reaction.f&UNOWNED&&effect_in_unowned_derived(),is_destroying_effect&&effect_in_teardown()}function push_effect(d,m){var g=m.last;g===null?m.last=m.first=d:(g.next=d,d.prev=g,m.last=d)}function create_effect(d,m,g,w=!0){var I=(d&ROOT_EFFECT)!==0,P=active_effect,F={ctx:component_context,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:d|DIRTY$1,first:null,fn:m,last:null,next:null,parent:I?null:P,prev:null,teardown:null,transitions:null,wv:0};if(g){var $=is_flushing_effect;try{set_is_flushing_effect(!0),update_effect(F),F.f|=EFFECT_RAN}catch(j){throw destroy_effect(F),j}finally{set_is_flushing_effect($)}}else m!==null&&schedule_effect(F);var D=g&&F.deps===null&&F.first===null&&F.nodes_start===null&&F.teardown===null&&(F.f&(EFFECT_HAS_DERIVED|BOUNDARY_EFFECT))===0;if(!D&&!I&&w&&(P!==null&&push_effect(F,P),active_reaction!==null&&active_reaction.f&DERIVED)){var U=active_reaction;(U.children??(U.children=[])).push(F)}return F}function user_effect(d){validate_effect();var m=active_effect!==null&&(active_effect.f&BRANCH_EFFECT)!==0&&component_context!==null&&!component_context.m;if(m){var g=component_context;(g.e??(g.e=[])).push({fn:d,effect:active_effect,reaction:active_reaction})}else{var w=effect(d);return w}}function component_root(d){const m=create_effect(ROOT_EFFECT,d,!0);return(g={})=>new Promise(w=>{g.outro?pause_effect(m,()=>{destroy_effect(m),w(void 0)}):(destroy_effect(m),w(void 0))})}function effect(d){return create_effect(EFFECT,d,!1)}function render_effect(d){return create_effect(RENDER_EFFECT,d,!0)}function template_effect(d){return block(d)}function block(d,m=0){return create_effect(RENDER_EFFECT|BLOCK_EFFECT|m,d,!0)}function branch(d,m=!0){return create_effect(RENDER_EFFECT|BRANCH_EFFECT,d,!0,m)}function execute_effect_teardown(d){var m=d.teardown;if(m!==null){const g=is_destroying_effect,w=active_reaction;set_is_destroying_effect(!0),set_active_reaction(null);try{m.call(null)}finally{set_is_destroying_effect(g),set_active_reaction(w)}}}function destroy_effect_deriveds(d){var m=d.deriveds;if(m!==null){d.deriveds=null;for(var g=0;g<m.length;g+=1)destroy_derived(m[g])}}function destroy_effect_children(d,m=!1){var g=d.first;for(d.first=d.last=null;g!==null;){var w=g.next;destroy_effect(g,m),g=w}}function destroy_block_effect_children(d){for(var m=d.first;m!==null;){var g=m.next;m.f&BRANCH_EFFECT||destroy_effect(m),m=g}}function destroy_effect(d,m=!0){var g=!1;if((m||d.f&HEAD_EFFECT)&&d.nodes_start!==null){for(var w=d.nodes_start,I=d.nodes_end;w!==null;){var P=w===I?null:get_next_sibling(w);w.remove(),w=P}g=!0}destroy_effect_children(d,m&&!g),destroy_effect_deriveds(d),remove_reactions(d,0),set_signal_status(d,DESTROYED);var F=d.transitions;if(F!==null)for(const D of F)D.stop();execute_effect_teardown(d);var $=d.parent;$!==null&&$.first!==null&&unlink_effect(d),d.next=d.prev=d.teardown=d.ctx=d.deps=d.fn=d.nodes_start=d.nodes_end=null}function unlink_effect(d){var m=d.parent,g=d.prev,w=d.next;g!==null&&(g.next=w),w!==null&&(w.prev=g),m!==null&&(m.first===d&&(m.first=w),m.last===d&&(m.last=g))}function pause_effect(d,m){var g=[];pause_children(d,g,!0),run_out_transitions(g,()=>{destroy_effect(d),m&&m()})}function run_out_transitions(d,m){var g=d.length;if(g>0){var w=()=>--g||m();for(var I of d)I.out(w)}else m()}function pause_children(d,m,g){if(!(d.f&INERT)){if(d.f^=INERT,d.transitions!==null)for(const F of d.transitions)(F.is_global||g)&&m.push(F);for(var w=d.first;w!==null;){var I=w.next,P=(w.f&EFFECT_TRANSPARENT)!==0||(w.f&BRANCH_EFFECT)!==0;pause_children(w,m,P?g:!1),w=I}}}function resume_effect(d){resume_children(d,!0)}function resume_children(d,m){if(d.f&INERT){d.f^=INERT,d.f&CLEAN||(d.f^=CLEAN),check_dirtiness(d)&&(set_signal_status(d,DIRTY$1),schedule_effect(d));for(var g=d.first;g!==null;){var w=g.next,I=(g.f&EFFECT_TRANSPARENT)!==0||(g.f&BRANCH_EFFECT)!==0;resume_children(g,I?m:!1),g=w}if(d.transitions!==null)for(const P of d.transitions)(P.is_global||m)&&P.in()}}let is_micro_task_queued$1=!1,current_queued_micro_tasks=[];function process_micro_tasks(){is_micro_task_queued$1=!1;const d=current_queued_micro_tasks.slice();current_queued_micro_tasks=[],run_all(d)}function queue_micro_task(d){is_micro_task_queued$1||(is_micro_task_queued$1=!0,queueMicrotask(process_micro_tasks)),current_queued_micro_tasks.push(d)}function lifecycle_outside_component(d){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let is_throwing_error=!1,is_micro_task_queued=!1,last_scheduled_effect=null,is_flushing_effect=!1,is_destroying_effect=!1;function set_is_flushing_effect(d){is_flushing_effect=d}function set_is_destroying_effect(d){is_destroying_effect=d}let queued_root_effects=[],flush_count=0,dev_effect_stack=[],active_reaction=null;function set_active_reaction(d){active_reaction=d}let active_effect=null;function set_active_effect(d){active_effect=d}let derived_sources=null;function set_derived_sources(d){derived_sources=d}let new_deps=null,skipped_deps=0,untracked_writes=null;function set_untracked_writes(d){untracked_writes=d}let write_version=1,read_version=0,skip_reaction=!1,component_context=null;function increment_write_version(){return++write_version}function is_runes(){return!0}function check_dirtiness(d){var U;var m=d.f;if(m&DIRTY$1)return!0;if(m&MAYBE_DIRTY){var g=d.deps,w=(m&UNOWNED)!==0;if(g!==null){var I,P,F=(m&DISCONNECTED)!==0,$=w&&active_effect!==null&&!skip_reaction,D=g.length;if(F||$){for(I=0;I<D;I++)P=g[I],(F||!((U=P==null?void 0:P.reactions)!=null&&U.includes(d)))&&(P.reactions??(P.reactions=[])).push(d);F&&(d.f^=DISCONNECTED)}for(I=0;I<D;I++)if(P=g[I],check_dirtiness(P)&&update_derived(P),P.wv>d.wv)return!0}(!w||active_effect!==null&&!skip_reaction)&&set_signal_status(d,CLEAN)}return!1}function propagate_error(d,m){for(var g=m;g!==null;){if(g.f&BOUNDARY_EFFECT)try{g.fn(d);return}catch{g.f^=BOUNDARY_EFFECT}g=g.parent}throw is_throwing_error=!1,d}function should_rethrow_error(d){return(d.f&DESTROYED)===0&&(d.parent===null||(d.parent.f&BOUNDARY_EFFECT)===0)}function handle_error(d,m,g,w){if(is_throwing_error){if(g===null&&(is_throwing_error=!1),should_rethrow_error(m))throw d;return}g!==null&&(is_throwing_error=!0);{propagate_error(d,m);return}}function schedule_possible_effect_self_invalidation(d,m,g=0){var w=d.reactions;if(w!==null)for(var I=0;I<w.length;I++){var P=w[I];P.f&DERIVED?schedule_possible_effect_self_invalidation(P,m,g+1):m===P&&(g===0?set_signal_status(P,DIRTY$1):P.f&CLEAN&&set_signal_status(P,MAYBE_DIRTY),schedule_effect(P))}}function update_reaction(d){var G;var m=new_deps,g=skipped_deps,w=untracked_writes,I=active_reaction,P=skip_reaction,F=derived_sources,$=component_context,D=d.f;new_deps=null,skipped_deps=0,untracked_writes=null,active_reaction=D&(BRANCH_EFFECT|ROOT_EFFECT)?null:d,skip_reaction=!is_flushing_effect&&(D&UNOWNED)!==0,derived_sources=null,component_context=d.ctx,read_version++;try{var U=(0,d.fn)(),j=d.deps;if(new_deps!==null){var Z;if(remove_reactions(d,skipped_deps),j!==null&&skipped_deps>0)for(j.length=skipped_deps+new_deps.length,Z=0;Z<new_deps.length;Z++)j[skipped_deps+Z]=new_deps[Z];else d.deps=j=new_deps;if(!skip_reaction)for(Z=skipped_deps;Z<j.length;Z++)((G=j[Z]).reactions??(G.reactions=[])).push(d)}else j!==null&&skipped_deps<j.length&&(remove_reactions(d,skipped_deps),j.length=skipped_deps);if(is_runes()&&untracked_writes!==null&&!(d.f&(DERIVED|MAYBE_DIRTY|DIRTY$1)))for(Z=0;Z<untracked_writes.length;Z++)schedule_possible_effect_self_invalidation(untracked_writes[Z],d);return I!==null&&read_version++,U}finally{new_deps=m,skipped_deps=g,untracked_writes=w,active_reaction=I,skip_reaction=P,derived_sources=F,component_context=$}}function remove_reaction(d,m){let g=m.reactions;if(g!==null){var w=index_of.call(g,d);if(w!==-1){var I=g.length-1;I===0?g=m.reactions=null:(g[w]=g[I],g.pop())}}g===null&&m.f&DERIVED&&(new_deps===null||!new_deps.includes(m))&&(set_signal_status(m,MAYBE_DIRTY),m.f&(UNOWNED|DISCONNECTED)||(m.f^=DISCONNECTED),remove_reactions(m,0))}function remove_reactions(d,m){var g=d.deps;if(g!==null)for(var w=m;w<g.length;w++)remove_reaction(d,g[w])}function update_effect(d){var m=d.f;if(!(m&DESTROYED)){set_signal_status(d,CLEAN);var g=active_effect,w=component_context;active_effect=d;try{m&BLOCK_EFFECT?destroy_block_effect_children(d):destroy_effect_children(d),destroy_effect_deriveds(d),execute_effect_teardown(d);var I=update_reaction(d);d.teardown=typeof I=="function"?I:null,d.wv=write_version;var P=d.deps,F;DEV&&tracing_mode_flag&&d.f&DIRTY$1}catch($){handle_error($,d,g,w||d.ctx)}finally{active_effect=g}}}function infinite_loop_guard(){if(flush_count>1e3){flush_count=0;try{effect_update_depth_exceeded()}catch(d){if(last_scheduled_effect!==null)handle_error(d,last_scheduled_effect,null);else throw d}}flush_count++}function flush_queued_root_effects(d){var m=d.length;if(m!==0){infinite_loop_guard();var g=is_flushing_effect;is_flushing_effect=!0;try{for(var w=0;w<m;w++){var I=d[w];I.f&CLEAN||(I.f^=CLEAN);var P=[];process_effects(I,P),flush_queued_effects(P)}}finally{is_flushing_effect=g}}}function flush_queued_effects(d){var m=d.length;if(m!==0)for(var g=0;g<m;g++){var w=d[g];if(!(w.f&(DESTROYED|INERT)))try{check_dirtiness(w)&&(update_effect(w),w.deps===null&&w.first===null&&w.nodes_start===null&&(w.teardown===null?unlink_effect(w):w.fn=null))}catch(I){handle_error(I,w,null,w.ctx)}}}function process_deferred(){if(is_micro_task_queued=!1,flush_count>1001)return;const d=queued_root_effects;queued_root_effects=[],flush_queued_root_effects(d),is_micro_task_queued||(flush_count=0,last_scheduled_effect=null)}function schedule_effect(d){is_micro_task_queued||(is_micro_task_queued=!0,queueMicrotask(process_deferred)),last_scheduled_effect=d;for(var m=d;m.parent!==null;){m=m.parent;var g=m.f;if(g&(ROOT_EFFECT|BRANCH_EFFECT)){if(!(g&CLEAN))return;m.f^=CLEAN}}queued_root_effects.push(m)}function process_effects(d,m){var g=d.first,w=[];t:for(;g!==null;){var I=g.f,P=(I&BRANCH_EFFECT)!==0,F=P&&(I&CLEAN)!==0,$=g.next;if(!F&&!(I&INERT))if(I&RENDER_EFFECT){if(P)g.f^=CLEAN;else try{check_dirtiness(g)&&update_effect(g)}catch(Z){handle_error(Z,g,null,g.ctx)}var D=g.first;if(D!==null){g=D;continue}}else I&EFFECT&&w.push(g);if($===null){let Z=g.parent;for(;Z!==null;){if(d===Z)break t;var U=Z.next;if(U!==null){g=U;continue t}Z=Z.parent}}g=$}for(var j=0;j<w.length;j++)D=w[j],m.push(D),process_effects(D,m)}function get(d){var j;var m=d.f,g=(m&DERIVED)!==0;if(g&&m&DESTROYED){var w=execute_derived(d);return destroy_derived(d),w}if(active_reaction!==null){derived_sources!==null&&derived_sources.includes(d)&&state_unsafe_local_read();var I=active_reaction.deps;d.rv<read_version&&(d.rv=read_version,new_deps===null&&I!==null&&I[skipped_deps]===d?skipped_deps++:new_deps===null?new_deps=[d]:new_deps.push(d))}else if(g&&d.deps===null)for(var P=d,F=P.parent,$=P;F!==null;)if(F.f&DERIVED){var D=F;$=D,F=D.parent}else{var U=F;(j=U.deriveds)!=null&&j.includes($)||(U.deriveds??(U.deriveds=[])).push($);break}return g&&(P=d,check_dirtiness(P)&&update_derived(P)),d.v}function untrack(d){const m=active_reaction;try{return active_reaction=null,d()}finally{active_reaction=m}}const STATUS_MASK=-7169;function set_signal_status(d,m){d.f=d.f&STATUS_MASK|m}function push(d,m=!1,g){component_context={p:component_context,c:null,e:null,m:!1,s:d,x:null,l:null}}function pop(d){const m=component_context;if(m!==null){const F=m.e;if(F!==null){var g=active_effect,w=active_reaction;m.e=null;try{for(var I=0;I<F.length;I++){var P=F[I];set_active_effect(P.effect),set_active_reaction(P.reaction),effect(P.fn)}}finally{set_active_effect(g),set_active_reaction(w)}}component_context=m.p,m.m=!0}return{}}const PASSIVE_EVENTS=["touchstart","touchmove"];function is_passive_event(d){return PASSIVE_EVENTS.includes(d)}let listening_to_form_reset=!1;function add_form_reset_listener(){listening_to_form_reset||(listening_to_form_reset=!0,document.addEventListener("reset",d=>{Promise.resolve().then(()=>{var m;if(!d.defaultPrevented)for(const g of d.target.elements)(m=g.__on_r)==null||m.call(g)})},{capture:!0}))}function without_reactive_context(d){var m=active_reaction,g=active_effect;set_active_reaction(null),set_active_effect(null);try{return d()}finally{set_active_reaction(m),set_active_effect(g)}}function listen_to_event_and_reset_event(d,m,g,w=g){d.addEventListener(m,()=>without_reactive_context(g));const I=d.__on_r;I?d.__on_r=()=>{I(),w(!0)}:d.__on_r=()=>w(!0),add_form_reset_listener()}const all_registered_events=new Set,root_event_handles=new Set;function delegate(d){for(var m=0;m<d.length;m++)all_registered_events.add(d[m]);for(var g of root_event_handles)g(d)}function handle_event_propagation(d){var K;var m=this,g=m.ownerDocument,w=d.type,I=((K=d.composedPath)==null?void 0:K.call(d))||[],P=I[0]||d.target,F=0,$=d.__root;if($){var D=I.indexOf($);if(D!==-1&&(m===document||m===window)){d.__root=m;return}var U=I.indexOf(m);if(U===-1)return;D<=U&&(F=D)}if(P=I[F]||d.target,P!==m){define_property(d,"currentTarget",{configurable:!0,get(){return P||g}});var j=active_reaction,Z=active_effect;set_active_reaction(null),set_active_effect(null);try{for(var G,H=[];P!==null;){var q=P.assignedSlot||P.parentNode||P.host||null;try{var W=P["__"+w];if(W!==void 0&&!P.disabled)if(is_array(W)){var[Q,...J]=W;Q.apply(P,[d,...J])}else W.call(P,d)}catch(V){G?H.push(V):G=V}if(d.cancelBubble||q===m||q===null)break;P=q}if(G){for(let V of H)queueMicrotask(()=>{throw V});throw G}}finally{d.__root=m,delete d.currentTarget,set_active_reaction(j),set_active_effect(Z)}}}function create_fragment_from_html(d){var m=document.createElement("template");return m.innerHTML=d,m.content}function assign_nodes(d,m){var g=active_effect;g.nodes_start===null&&(g.nodes_start=d,g.nodes_end=m)}function template(d,m){var g=(m&TEMPLATE_FRAGMENT)!==0,w=(m&TEMPLATE_USE_IMPORT_NODE)!==0,I,P=!d.startsWith("<!>");return()=>{I===void 0&&(I=create_fragment_from_html(P?d:"<!>"+d),g||(I=get_first_child(I)));var F=w?document.importNode(I,!0):I.cloneNode(!0);if(g){var $=get_first_child(F),D=F.lastChild;assign_nodes($,D)}else assign_nodes(F,F);return F}}function text(d=""){{var m=create_text(d+"");return assign_nodes(m,m),m}}function comment(){var d=document.createDocumentFragment(),m=document.createComment(""),g=create_text();return d.append(m,g),assign_nodes(m,g),d}function append(d,m){d!==null&&d.before(m)}function set_text(d,m){var g=m==null?"":typeof m=="object"?m+"":m;g!==(d.__t??(d.__t=d.nodeValue))&&(d.__t=g,d.nodeValue=g==null?"":g+"")}function mount(d,m){return _mount(d,m)}const document_listeners=new Map;function _mount(d,{target:m,anchor:g,props:w={},events:I,context:P,intro:F=!0}){init_operations();var $=new Set,D=Z=>{for(var G=0;G<Z.length;G++){var H=Z[G];if(!$.has(H)){$.add(H);var q=is_passive_event(H);m.addEventListener(H,handle_event_propagation,{passive:q});var W=document_listeners.get(H);W===void 0?(document.addEventListener(H,handle_event_propagation,{passive:q}),document_listeners.set(H,1)):document_listeners.set(H,W+1)}}};D(array_from(all_registered_events)),root_event_handles.add(D);var U=void 0,j=component_root(()=>{var Z=g??m.appendChild(create_text());return branch(()=>{if(P){push({});var G=component_context;G.c=P}I&&(w.$$events=I),U=d(Z,w)||{},P&&pop()}),()=>{var q;for(var G of $){m.removeEventListener(G,handle_event_propagation);var H=document_listeners.get(G);--H===0?(document.removeEventListener(G,handle_event_propagation),document_listeners.delete(G)):document_listeners.set(G,H)}root_event_handles.delete(D),Z!==g&&((q=Z.parentNode)==null||q.removeChild(Z))}});return mounted_components.set(U,j),U}let mounted_components=new WeakMap;function if_block(d,m,g=!1){var w=d,I=null,P=null,F=UNINITIALIZED,$=g?EFFECT_TRANSPARENT:0,D=!1;const U=(Z,G=!0)=>{D=!0,j(G,Z)},j=(Z,G)=>{F!==(F=Z)&&(F?(I?resume_effect(I):G&&(I=branch(()=>G(w))),P&&pause_effect(P,()=>{P=null})):(P?resume_effect(P):G&&(P=branch(()=>G(w))),I&&pause_effect(I,()=>{I=null})))};block(()=>{D=!1,m(U),D||j(null,null)},$)}function index(d,m){return m}function pause_effects(d,m,g,w){for(var I=[],P=m.length,F=0;F<P;F++)pause_children(m[F].e,I,!0);var $=P>0&&I.length===0&&g!==null;if($){var D=g.parentNode;clear_text_content(D),D.append(g),w.clear(),link(d,m[0].prev,m[P-1].next)}run_out_transitions(I,()=>{for(var U=0;U<P;U++){var j=m[U];$||(w.delete(j.k),link(d,j.prev,j.next)),destroy_effect(j.e,!$)}})}function each(d,m,g,w,I,P=null){var F=d,$={flags:m,items:new Map,first:null},D=(m&EACH_IS_CONTROLLED)!==0;if(D){var U=d;F=U.appendChild(create_text())}var j=null,Z=!1,G=derived_safe_equal(()=>{var H=g();return is_array(H)?H:H==null?[]:array_from(H)});block(()=>{var H=get(G),q=H.length;if(!(Z&&q===0)){Z=q===0;{var W=active_reaction;reconcile(H,$,F,I,m,(W.f&INERT)!==0,w)}P!==null&&(q===0?j?resume_effect(j):j=branch(()=>P(F)):j!==null&&pause_effect(j,()=>{j=null})),get(G)}})}function reconcile(d,m,g,w,I,P,F,$){var dt,yt,Nt,Bt;var D=(I&EACH_IS_ANIMATED)!==0,U=(I&(EACH_ITEM_REACTIVE|EACH_INDEX_REACTIVE))!==0,j=d.length,Z=m.items,G=m.first,H=G,q,W=null,Q,J=[],K=[],V,tt,X,ot;if(D)for(ot=0;ot<j;ot+=1)V=d[ot],tt=F(V,ot),X=Z.get(tt),X!==void 0&&((dt=X.a)==null||dt.measure(),(Q??(Q=new Set)).add(X));for(ot=0;ot<j;ot+=1){if(V=d[ot],tt=F(V,ot),X=Z.get(tt),X===void 0){var it=H?H.e.nodes_start:g;W=create_item(it,m,W,W===null?m.first:W.next,V,tt,ot,w,I),Z.set(tt,W),J=[],K=[],H=W.next;continue}if(U&&update_item(X,V,ot,I),X.e.f&INERT&&(resume_effect(X.e),D&&((yt=X.a)==null||yt.unfix(),(Q??(Q=new Set)).delete(X))),X!==H){if(q!==void 0&&q.has(X)){if(J.length<K.length){var lt=K[0],at;W=lt.prev;var ht=J[0],et=J[J.length-1];for(at=0;at<J.length;at+=1)move(J[at],lt,g);for(at=0;at<K.length;at+=1)q.delete(K[at]);link(m,ht.prev,et.next),link(m,W,ht),link(m,et,lt),H=lt,W=et,ot-=1,J=[],K=[]}else q.delete(X),move(X,H,g),link(m,X.prev,X.next),link(m,X,W===null?m.first:W.next),link(m,W,X),W=X;continue}for(J=[],K=[];H!==null&&H.k!==tt;)(P||!(H.e.f&INERT))&&(q??(q=new Set)).add(H),K.push(H),H=H.next;if(H===null)continue;X=H}J.push(X),W=X,H=X.next}if(H!==null||q!==void 0){for(var ut=q===void 0?[]:array_from(q);H!==null;)(P||!(H.e.f&INERT))&&ut.push(H),H=H.next;var Et=ut.length;if(Et>0){var gt=I&EACH_IS_CONTROLLED&&j===0?g:null;if(D){for(ot=0;ot<Et;ot+=1)(Nt=ut[ot].a)==null||Nt.measure();for(ot=0;ot<Et;ot+=1)(Bt=ut[ot].a)==null||Bt.fix()}pause_effects(m,ut,gt,Z)}}D&&queue_micro_task(()=>{var St;if(Q!==void 0)for(X of Q)(St=X.a)==null||St.apply()}),active_effect.first=m.first&&m.first.e,active_effect.last=W&&W.e}function update_item(d,m,g,w){w&EACH_ITEM_REACTIVE&&internal_set(d.v,m),w&EACH_INDEX_REACTIVE?internal_set(d.i,g):d.i=g}function create_item(d,m,g,w,I,P,F,$,D,U){var j=(D&EACH_ITEM_REACTIVE)!==0,Z=(D&EACH_ITEM_IMMUTABLE)===0,G=j?Z?mutable_source(I):source(I):I,H=D&EACH_INDEX_REACTIVE?source(F):F,q={i:H,v:G,k:P,a:null,e:null,prev:g,next:w};try{return q.e=branch(()=>$(d,G,H),hydrating),q.e.prev=g&&g.e,q.e.next=w&&w.e,g===null?m.first=q:(g.next=q,g.e.next=q.e),w!==null&&(w.prev=q,w.e.prev=q.e),q}finally{}}function move(d,m,g){for(var w=d.next?d.next.e.nodes_start:g,I=m?m.e.nodes_start:g,P=d.e.nodes_start;P!==w;){var F=get_next_sibling(P);I.before(P),P=F}}function link(d,m,g){m===null?d.first=g:(m.next=g,m.e.next=g&&g.e),g!==null&&(g.prev=m,g.e.prev=m&&m.e)}function set_attribute(d,m,g,w){var I=d.__attributes??(d.__attributes={});I[m]!==(I[m]=g)&&(m==="style"&&"__styles"in d&&(d.__styles={}),m==="loading"&&(d[LOADING_ATTR_SYMBOL]=g),g==null?d.removeAttribute(m):typeof g!="string"&&get_setters(d).includes(m)?d[m]=g:d.setAttribute(m,g))}var setters_cache=new Map;function get_setters(d){var m=setters_cache.get(d.nodeName);if(m)return m;setters_cache.set(d.nodeName,m=[]);for(var g,w=d,I=Element.prototype;I!==w;){g=get_descriptors(w);for(var P in g)g[P].set&&m.push(P);w=get_prototype_of(w)}return m}function set_class(d,m,g){var w=d.__className,I=to_class(m);(w!==I||hydrating)&&(m==null?d.removeAttribute("class"):d.className=I,d.__className=I)}function to_class(d,m){return(d??"")+""}function bind_value(d,m,g=m){listen_to_event_and_reset_event(d,"input",w=>{var I=w?d.defaultValue:d.value;if(I=is_numberlike_input(d)?to_number(I):I,g(I),I!==(I=m())){var P=d.selectionStart,F=d.selectionEnd;d.value=I??"",F!==null&&(d.selectionStart=P,d.selectionEnd=Math.min(F,d.value.length))}}),untrack(m)==null&&d.value&&g(is_numberlike_input(d)?to_number(d.value):d.value),render_effect(()=>{var w=m();is_numberlike_input(d)&&w===to_number(d.value)||d.type==="date"&&!w&&!d.value||w!==d.value&&(d.value=w??"")})}function is_numberlike_input(d){var m=d.type;return m==="number"||m==="range"}function to_number(d){return d===""?null:+d}const subscriber_queue=[];function writable(d,m=noop$1){let g=null;const w=new Set;function I($){if(safe_not_equal(d,$)&&(d=$,g)){const D=!subscriber_queue.length;for(const U of w)U[1](),subscriber_queue.push(U,d);if(D){for(let U=0;U<subscriber_queue.length;U+=2)subscriber_queue[U][0](subscriber_queue[U+1]);subscriber_queue.length=0}}}function P($){I($(d))}function F($,D=noop$1){const U=[$,D];return w.add(U),w.size===1&&(g=m(I,P)||noop$1),$(d),()=>{w.delete(U),w.size===0&&g&&(g(),g=null)}}return{set:I,update:P,subscribe:F}}let is_store_binding=!1;function capture_store_binding(d){var m=is_store_binding;try{return is_store_binding=!1,[d(),is_store_binding]}finally{is_store_binding=m}}function with_parent_branch(d){for(var m=active_effect,g=active_effect;m!==null&&!(m.f&(BRANCH_EFFECT|ROOT_EFFECT));)m=m.parent;try{return set_active_effect(m),d()}finally{set_active_effect(g)}}function prop(d,m,g,w){var ot;var I=(g&PROPS_IS_IMMUTABLE)!==0,P=!0,F=(g&PROPS_IS_BINDABLE)!==0,$=(g&PROPS_IS_LAZY_INITIAL)!==0,D=!1,U;F?[U,D]=capture_store_binding(()=>d[m]):U=d[m];var j=STATE_SYMBOL in d||LEGACY_PROPS in d,Z=F&&(((ot=get_descriptor(d,m))==null?void 0:ot.set)??(j&&m in d&&(it=>d[m]=it)))||void 0,G=w,H=!0,q=!1,W=()=>(q=!0,H&&(H=!1,$?G=untrack(w):G=w),G);U===void 0&&w!==void 0&&(Z&&P&&props_invalid_value(),U=W(),Z&&Z(U));var Q;if(Q=()=>{var it=d[m];return it===void 0?W():(H=!0,q=!1,it)},!(g&PROPS_IS_UPDATED))return Q;if(Z){var J=d.$$legacy;return function(it,lt){return arguments.length>0?((!lt||J||D)&&Z(lt?Q():it),it):Q()}}var K=!1,V=!1,tt=mutable_source(U),X=with_parent_branch(()=>derived(()=>{var it=Q(),lt=get(tt);return K?(K=!1,V=!0,lt):(V=!1,tt.v=it)}));return I||(X.equals=safe_equals),function(it,lt){if(arguments.length>0){const at=lt?get(X):F?proxy(it):it;return X.equals(at)||(K=!0,set(tt,at),q&&G!==void 0&&(G=at),untrack(()=>get(X))),it}return get(X)}}function onMount(d){component_context===null&&lifecycle_outside_component(),user_effect(()=>{const m=untrack(d);if(typeof m=="function")return m})}function onDestroy(d){component_context===null&&lifecycle_outside_component(),onMount(()=>()=>untrack(d))}const PUBLIC_VERSION="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(PUBLIC_VERSION);var root_1$6=template('<li class="nav-item" style=""><div class="spinner-border text-warning"></div></li>'),root$a=template('<div><nav class="navbar navbar-expand-sm bg-dark navbar-dark custom-nav svelte-1p9kxs2"><div class="container-fluid"><ul class="navbar-nav mr-auto"><li class="nav-item"><button type="button" title="Read from Link Analyzer"><i class="fa-solid fa-upload"></i></button></li> <li class="nav-item" style="padding-left: 10px;"><button type="button" title="Write to Link Analyzer"><i class="fa-solid fa-download"></i></button></li> <li class="nav-item" style="padding-left: 10px;"><button type="button" class="btn btn-warning" title="Load Navi from file"><i class="fa-solid fa-folder-open"></i></button></li> <li class="nav-item" style="padding-left: 10px;"><button type="button" title="Save Navi to file"><i class="fa-solid fa-floppy-disk"></i></button></li></ul> <ul class="navbar-nav ml-auto"><!></ul></div></nav></div>');function NaviEditorTopBar(d,m){const g=prop(m,"port",3,!1);var w=root$a(),I=child(w),P=child(I),F=child(P),$=child(F),D=child($);D.__click=function(...K){var V;(V=m.loadNavi)==null||V.apply(this,K)};var U=sibling($,2),j=child(U);j.__click=function(...K){var V;(V=m.writeNavi)==null||V.apply(this,K)};var Z=sibling(U,2),G=child(Z);G.__click=function(...K){var V;(V=m.openNavi)==null||V.apply(this,K)};var H=sibling(Z,2),q=child(H);q.__click=function(...K){var V;(V=m.saveNavi)==null||V.apply(this,K)};var W=sibling(F,2),Q=child(W);{var J=K=>{var V=root_1$6();append(K,V)};if_block(Q,K=>{m.loading&&K(J)})}template_effect(()=>{set_class(D,`btn btn-warning ${(g()?"":"disabled")??""}`),set_class(j,`btn btn-warning ${(m.hasNavi?"":"disabled")??""} ${(g()?"":"disabled")??""}`),set_class(q,`btn btn-warning ${(m.hasNavi?"":"disabled")??""}`)}),append(d,w)}delegate(["click"]);function bind(d,m){return function(){return d.apply(m,arguments)}}const{toString:toString$1}=Object.prototype,{getPrototypeOf}=Object,kindOf=(d=>m=>{const g=toString$1.call(m);return d[g]||(d[g]=g.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=d=>(d=d.toLowerCase(),m=>kindOf(m)===d),typeOfTest=d=>m=>typeof m===d,{isArray:isArray$1}=Array,isUndefined=typeOfTest("undefined");function isBuffer$1(d){return d!==null&&!isUndefined(d)&&d.constructor!==null&&!isUndefined(d.constructor)&&isFunction(d.constructor.isBuffer)&&d.constructor.isBuffer(d)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(d){let m;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?m=ArrayBuffer.isView(d):m=d&&d.buffer&&isArrayBuffer(d.buffer),m}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=d=>d!==null&&typeof d=="object",isBoolean=d=>d===!0||d===!1,isPlainObject=d=>{if(kindOf(d)!=="object")return!1;const m=getPrototypeOf(d);return(m===null||m===Object.prototype||Object.getPrototypeOf(m)===null)&&!(Symbol.toStringTag in d)&&!(Symbol.iterator in d)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=d=>isObject(d)&&isFunction(d.pipe),isFormData=d=>{let m;return d&&(typeof FormData=="function"&&d instanceof FormData||isFunction(d.append)&&((m=kindOf(d))==="formdata"||m==="object"&&isFunction(d.toString)&&d.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=d=>d.trim?d.trim():d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(d,m,{allOwnKeys:g=!1}={}){if(d===null||typeof d>"u")return;let w,I;if(typeof d!="object"&&(d=[d]),isArray$1(d))for(w=0,I=d.length;w<I;w++)m.call(null,d[w],w,d);else{const P=g?Object.getOwnPropertyNames(d):Object.keys(d),F=P.length;let $;for(w=0;w<F;w++)$=P[w],m.call(null,d[$],$,d)}}function findKey(d,m){m=m.toLowerCase();const g=Object.keys(d);let w=g.length,I;for(;w-- >0;)if(I=g[w],m===I.toLowerCase())return I;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=d=>!isUndefined(d)&&d!==_global;function merge(){const{caseless:d}=isContextDefined(this)&&this||{},m={},g=(w,I)=>{const P=d&&findKey(m,I)||I;isPlainObject(m[P])&&isPlainObject(w)?m[P]=merge(m[P],w):isPlainObject(w)?m[P]=merge({},w):isArray$1(w)?m[P]=w.slice():m[P]=w};for(let w=0,I=arguments.length;w<I;w++)arguments[w]&&forEach(arguments[w],g);return m}const extend=(d,m,g,{allOwnKeys:w}={})=>(forEach(m,(I,P)=>{g&&isFunction(I)?d[P]=bind(I,g):d[P]=I},{allOwnKeys:w}),d),stripBOM=d=>(d.charCodeAt(0)===65279&&(d=d.slice(1)),d),inherits=(d,m,g,w)=>{d.prototype=Object.create(m.prototype,w),d.prototype.constructor=d,Object.defineProperty(d,"super",{value:m.prototype}),g&&Object.assign(d.prototype,g)},toFlatObject=(d,m,g,w)=>{let I,P,F;const $={};if(m=m||{},d==null)return m;do{for(I=Object.getOwnPropertyNames(d),P=I.length;P-- >0;)F=I[P],(!w||w(F,d,m))&&!$[F]&&(m[F]=d[F],$[F]=!0);d=g!==!1&&getPrototypeOf(d)}while(d&&(!g||g(d,m))&&d!==Object.prototype);return m},endsWith=(d,m,g)=>{d=String(d),(g===void 0||g>d.length)&&(g=d.length),g-=m.length;const w=d.indexOf(m,g);return w!==-1&&w===g},toArray=d=>{if(!d)return null;if(isArray$1(d))return d;let m=d.length;if(!isNumber(m))return null;const g=new Array(m);for(;m-- >0;)g[m]=d[m];return g},isTypedArray=(d=>m=>d&&m instanceof d)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(d,m)=>{const w=(d&&d[Symbol.iterator]).call(d);let I;for(;(I=w.next())&&!I.done;){const P=I.value;m.call(d,P[0],P[1])}},matchAll=(d,m)=>{let g;const w=[];for(;(g=d.exec(m))!==null;)w.push(g);return w},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=d=>d.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(g,w,I){return w.toUpperCase()+I}),hasOwnProperty=(({hasOwnProperty:d})=>(m,g)=>d.call(m,g))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(d,m)=>{const g=Object.getOwnPropertyDescriptors(d),w={};forEach(g,(I,P)=>{let F;(F=m(I,P,d))!==!1&&(w[P]=F||I)}),Object.defineProperties(d,w)},freezeMethods=d=>{reduceDescriptors(d,(m,g)=>{if(isFunction(d)&&["arguments","caller","callee"].indexOf(g)!==-1)return!1;const w=d[g];if(isFunction(w)){if(m.enumerable=!1,"writable"in m){m.writable=!1;return}m.set||(m.set=()=>{throw Error("Can not rewrite read-only method '"+g+"'")})}})},toObjectSet=(d,m)=>{const g={},w=I=>{I.forEach(P=>{g[P]=!0})};return isArray$1(d)?w(d):w(String(d).split(m)),g},noop=()=>{},toFiniteNumber=(d,m)=>d!=null&&Number.isFinite(d=+d)?d:m,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(d=16,m=ALPHABET.ALPHA_DIGIT)=>{let g="";const{length:w}=m;for(;d--;)g+=m[Math.random()*w|0];return g};function isSpecCompliantForm(d){return!!(d&&isFunction(d.append)&&d[Symbol.toStringTag]==="FormData"&&d[Symbol.iterator])}const toJSONObject=d=>{const m=new Array(10),g=(w,I)=>{if(isObject(w)){if(m.indexOf(w)>=0)return;if(!("toJSON"in w)){m[I]=w;const P=isArray$1(w)?[]:{};return forEach(w,(F,$)=>{const D=g(F,I+1);!isUndefined(D)&&(P[$]=D)}),m[I]=void 0,P}}return w};return g(d,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=d=>d&&(isObject(d)||isFunction(d))&&isFunction(d.then)&&isFunction(d.catch),_setImmediate=((d,m)=>d?setImmediate:m?((g,w)=>(_global.addEventListener("message",({source:I,data:P})=>{I===_global&&P===g&&w.length&&w.shift()()},!1),I=>{w.push(I),_global.postMessage(g,"*")}))(`axios@${Math.random()}`,[]):g=>setTimeout(g))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray:isArray$1,isArrayBuffer,isBuffer:isBuffer$1,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(d,m,g,w,I){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=d,this.name="AxiosError",m&&(this.code=m),g&&(this.config=g),w&&(this.request=w),I&&(this.response=I,this.status=I.status?I.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(d=>{descriptors[d]={value:d}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(d,m,g,w,I,P)=>{const F=Object.create(prototype$1);return utils$1.toFlatObject(d,F,function(D){return D!==Error.prototype},$=>$!=="isAxiosError"),AxiosError.call(F,d.message,m,g,w,I),F.cause=d,F.name=d.name,P&&Object.assign(F,P),F};const httpAdapter=null;function isVisitable(d){return utils$1.isPlainObject(d)||utils$1.isArray(d)}function removeBrackets(d){return utils$1.endsWith(d,"[]")?d.slice(0,-2):d}function renderKey(d,m,g){return d?d.concat(m).map(function(I,P){return I=removeBrackets(I),!g&&P?"["+I+"]":I}).join(g?".":""):m}function isFlatArray(d){return utils$1.isArray(d)&&!d.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(m){return/^is[A-Z]/.test(m)});function toFormData(d,m,g){if(!utils$1.isObject(d))throw new TypeError("target must be an object");m=m||new FormData,g=utils$1.toFlatObject(g,{metaTokens:!0,dots:!1,indexes:!1},!1,function(W,Q){return!utils$1.isUndefined(Q[W])});const w=g.metaTokens,I=g.visitor||j,P=g.dots,F=g.indexes,D=(g.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(m);if(!utils$1.isFunction(I))throw new TypeError("visitor must be a function");function U(q){if(q===null)return"";if(utils$1.isDate(q))return q.toISOString();if(!D&&utils$1.isBlob(q))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(q)||utils$1.isTypedArray(q)?D&&typeof Blob=="function"?new Blob([q]):Buffer.from(q):q}function j(q,W,Q){let J=q;if(q&&!Q&&typeof q=="object"){if(utils$1.endsWith(W,"{}"))W=w?W:W.slice(0,-2),q=JSON.stringify(q);else if(utils$1.isArray(q)&&isFlatArray(q)||(utils$1.isFileList(q)||utils$1.endsWith(W,"[]"))&&(J=utils$1.toArray(q)))return W=removeBrackets(W),J.forEach(function(V,tt){!(utils$1.isUndefined(V)||V===null)&&m.append(F===!0?renderKey([W],tt,P):F===null?W:W+"[]",U(V))}),!1}return isVisitable(q)?!0:(m.append(renderKey(Q,W,P),U(q)),!1)}const Z=[],G=Object.assign(predicates,{defaultVisitor:j,convertValue:U,isVisitable});function H(q,W){if(!utils$1.isUndefined(q)){if(Z.indexOf(q)!==-1)throw Error("Circular reference detected in "+W.join("."));Z.push(q),utils$1.forEach(q,function(J,K){(!(utils$1.isUndefined(J)||J===null)&&I.call(m,J,utils$1.isString(K)?K.trim():K,W,G))===!0&&H(J,W?W.concat(K):[K])}),Z.pop()}}if(!utils$1.isObject(d))throw new TypeError("data must be an object");return H(d),m}function encode$4(d){const m={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(d).replace(/[!'()~]|%20|%00/g,function(w){return m[w]})}function AxiosURLSearchParams(d,m){this._pairs=[],d&&toFormData(d,this,m)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(m,g){this._pairs.push([m,g])};prototype.toString=function(m){const g=m?function(w){return m.call(this,w,encode$4)}:encode$4;return this._pairs.map(function(I){return g(I[0])+"="+g(I[1])},"").join("&")};function encode$3(d){return encodeURIComponent(d).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(d,m,g){if(!m)return d;const w=g&&g.encode||encode$3;utils$1.isFunction(g)&&(g={serialize:g});const I=g&&g.serialize;let P;if(I?P=I(m,g):P=utils$1.isURLSearchParams(m)?m.toString():new AxiosURLSearchParams(m,g).toString(w),P){const F=d.indexOf("#");F!==-1&&(d=d.slice(0,F)),d+=(d.indexOf("?")===-1?"?":"&")+P}return d}class InterceptorManager{constructor(){this.handlers=[]}use(m,g,w){return this.handlers.push({fulfilled:m,rejected:g,synchronous:w?w.synchronous:!1,runWhen:w?w.runWhen:null}),this.handlers.length-1}eject(m){this.handlers[m]&&(this.handlers[m]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(m){utils$1.forEach(this.handlers,function(w){w!==null&&m(w)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(d,m){return toFormData(d,new platform.classes.URLSearchParams,Object.assign({visitor:function(g,w,I,P){return platform.isNode&&utils$1.isBuffer(g)?(this.append(w,g.toString("base64")),!1):P.defaultVisitor.apply(this,arguments)}},m))}function parsePropPath(d){return utils$1.matchAll(/\w+|\[(\w*)]/g,d).map(m=>m[0]==="[]"?"":m[1]||m[0])}function arrayToObject(d){const m={},g=Object.keys(d);let w;const I=g.length;let P;for(w=0;w<I;w++)P=g[w],m[P]=d[P];return m}function formDataToJSON(d){function m(g,w,I,P){let F=g[P++];if(F==="__proto__")return!0;const $=Number.isFinite(+F),D=P>=g.length;return F=!F&&utils$1.isArray(I)?I.length:F,D?(utils$1.hasOwnProp(I,F)?I[F]=[I[F],w]:I[F]=w,!$):((!I[F]||!utils$1.isObject(I[F]))&&(I[F]=[]),m(g,w,I[F],P)&&utils$1.isArray(I[F])&&(I[F]=arrayToObject(I[F])),!$)}if(utils$1.isFormData(d)&&utils$1.isFunction(d.entries)){const g={};return utils$1.forEachEntry(d,(w,I)=>{m(parsePropPath(w),I,g,0)}),g}return null}function stringifySafely(d,m,g){if(utils$1.isString(d))try{return(m||JSON.parse)(d),utils$1.trim(d)}catch(w){if(w.name!=="SyntaxError")throw w}return(0,JSON.stringify)(d)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(m,g){const w=g.getContentType()||"",I=w.indexOf("application/json")>-1,P=utils$1.isObject(m);if(P&&utils$1.isHTMLForm(m)&&(m=new FormData(m)),utils$1.isFormData(m))return I?JSON.stringify(formDataToJSON(m)):m;if(utils$1.isArrayBuffer(m)||utils$1.isBuffer(m)||utils$1.isStream(m)||utils$1.isFile(m)||utils$1.isBlob(m)||utils$1.isReadableStream(m))return m;if(utils$1.isArrayBufferView(m))return m.buffer;if(utils$1.isURLSearchParams(m))return g.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),m.toString();let $;if(P){if(w.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(m,this.formSerializer).toString();if(($=utils$1.isFileList(m))||w.indexOf("multipart/form-data")>-1){const D=this.env&&this.env.FormData;return toFormData($?{"files[]":m}:m,D&&new D,this.formSerializer)}}return P||I?(g.setContentType("application/json",!1),stringifySafely(m)):m}],transformResponse:[function(m){const g=this.transitional||defaults.transitional,w=g&&g.forcedJSONParsing,I=this.responseType==="json";if(utils$1.isResponse(m)||utils$1.isReadableStream(m))return m;if(m&&utils$1.isString(m)&&(w&&!this.responseType||I)){const F=!(g&&g.silentJSONParsing)&&I;try{return JSON.parse(m)}catch($){if(F)throw $.name==="SyntaxError"?AxiosError.from($,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):$}}return m}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(m){return m>=200&&m<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],d=>{defaults.headers[d]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=d=>{const m={};let g,w,I;return d&&d.split(`
`).forEach(function(F){I=F.indexOf(":"),g=F.substring(0,I).trim().toLowerCase(),w=F.substring(I+1).trim(),!(!g||m[g]&&ignoreDuplicateOf[g])&&(g==="set-cookie"?m[g]?m[g].push(w):m[g]=[w]:m[g]=m[g]?m[g]+", "+w:w)}),m},$internals=Symbol("internals");function normalizeHeader(d){return d&&String(d).trim().toLowerCase()}function normalizeValue$1(d){return d===!1||d==null?d:utils$1.isArray(d)?d.map(normalizeValue$1):String(d)}function parseTokens(d){const m=Object.create(null),g=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let w;for(;w=g.exec(d);)m[w[1]]=w[2];return m}const isValidHeaderName=d=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(d.trim());function matchHeaderValue(d,m,g,w,I){if(utils$1.isFunction(w))return w.call(this,m,g);if(I&&(m=g),!!utils$1.isString(m)){if(utils$1.isString(w))return m.indexOf(w)!==-1;if(utils$1.isRegExp(w))return w.test(m)}}function formatHeader(d){return d.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(m,g,w)=>g.toUpperCase()+w)}function buildAccessors(d,m){const g=utils$1.toCamelCase(" "+m);["get","set","has"].forEach(w=>{Object.defineProperty(d,w+g,{value:function(I,P,F){return this[w].call(this,m,I,P,F)},configurable:!0})})}class AxiosHeaders{constructor(m){m&&this.set(m)}set(m,g,w){const I=this;function P($,D,U){const j=normalizeHeader(D);if(!j)throw new Error("header name must be a non-empty string");const Z=utils$1.findKey(I,j);(!Z||I[Z]===void 0||U===!0||U===void 0&&I[Z]!==!1)&&(I[Z||D]=normalizeValue$1($))}const F=($,D)=>utils$1.forEach($,(U,j)=>P(U,j,D));if(utils$1.isPlainObject(m)||m instanceof this.constructor)F(m,g);else if(utils$1.isString(m)&&(m=m.trim())&&!isValidHeaderName(m))F(parseHeaders(m),g);else if(utils$1.isHeaders(m))for(const[$,D]of m.entries())P(D,$,w);else m!=null&&P(g,m,w);return this}get(m,g){if(m=normalizeHeader(m),m){const w=utils$1.findKey(this,m);if(w){const I=this[w];if(!g)return I;if(g===!0)return parseTokens(I);if(utils$1.isFunction(g))return g.call(this,I,w);if(utils$1.isRegExp(g))return g.exec(I);throw new TypeError("parser must be boolean|regexp|function")}}}has(m,g){if(m=normalizeHeader(m),m){const w=utils$1.findKey(this,m);return!!(w&&this[w]!==void 0&&(!g||matchHeaderValue(this,this[w],w,g)))}return!1}delete(m,g){const w=this;let I=!1;function P(F){if(F=normalizeHeader(F),F){const $=utils$1.findKey(w,F);$&&(!g||matchHeaderValue(w,w[$],$,g))&&(delete w[$],I=!0)}}return utils$1.isArray(m)?m.forEach(P):P(m),I}clear(m){const g=Object.keys(this);let w=g.length,I=!1;for(;w--;){const P=g[w];(!m||matchHeaderValue(this,this[P],P,m,!0))&&(delete this[P],I=!0)}return I}normalize(m){const g=this,w={};return utils$1.forEach(this,(I,P)=>{const F=utils$1.findKey(w,P);if(F){g[F]=normalizeValue$1(I),delete g[P];return}const $=m?formatHeader(P):String(P).trim();$!==P&&delete g[P],g[$]=normalizeValue$1(I),w[$]=!0}),this}concat(...m){return this.constructor.concat(this,...m)}toJSON(m){const g=Object.create(null);return utils$1.forEach(this,(w,I)=>{w!=null&&w!==!1&&(g[I]=m&&utils$1.isArray(w)?w.join(", "):w)}),g}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([m,g])=>m+": "+g).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(m){return m instanceof this?m:new this(m)}static concat(m,...g){const w=new this(m);return g.forEach(I=>w.set(I)),w}static accessor(m){const w=(this[$internals]=this[$internals]={accessors:{}}).accessors,I=this.prototype;function P(F){const $=normalizeHeader(F);w[$]||(buildAccessors(I,F),w[$]=!0)}return utils$1.isArray(m)?m.forEach(P):P(m),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:d},m)=>{let g=m[0].toUpperCase()+m.slice(1);return{get:()=>d,set(w){this[g]=w}}});utils$1.freezeMethods(AxiosHeaders);function transformData(d,m){const g=this||defaults,w=m||g,I=AxiosHeaders.from(w.headers);let P=w.data;return utils$1.forEach(d,function($){P=$.call(g,P,I.normalize(),m?m.status:void 0)}),I.normalize(),P}function isCancel(d){return!!(d&&d.__CANCEL__)}function CanceledError(d,m,g){AxiosError.call(this,d??"canceled",AxiosError.ERR_CANCELED,m,g),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(d,m,g){const w=g.config.validateStatus;!g.status||!w||w(g.status)?d(g):m(new AxiosError("Request failed with status code "+g.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(g.status/100)-4],g.config,g.request,g))}function parseProtocol(d){const m=/^([-+\w]{1,25})(:?\/\/|:)/.exec(d);return m&&m[1]||""}function speedometer(d,m){d=d||10;const g=new Array(d),w=new Array(d);let I=0,P=0,F;return m=m!==void 0?m:1e3,function(D){const U=Date.now(),j=w[P];F||(F=U),g[I]=D,w[I]=U;let Z=P,G=0;for(;Z!==I;)G+=g[Z++],Z=Z%d;if(I=(I+1)%d,I===P&&(P=(P+1)%d),U-F<m)return;const H=j&&U-j;return H?Math.round(G*1e3/H):void 0}}function throttle(d,m){let g=0,w=1e3/m,I,P;const F=(U,j=Date.now())=>{g=j,I=null,P&&(clearTimeout(P),P=null),d.apply(null,U)};return[(...U)=>{const j=Date.now(),Z=j-g;Z>=w?F(U,j):(I=U,P||(P=setTimeout(()=>{P=null,F(I)},w-Z)))},()=>I&&F(I)]}const progressEventReducer=(d,m,g=3)=>{let w=0;const I=speedometer(50,250);return throttle(P=>{const F=P.loaded,$=P.lengthComputable?P.total:void 0,D=F-w,U=I(D),j=F<=$;w=F;const Z={loaded:F,total:$,progress:$?F/$:void 0,bytes:D,rate:U||void 0,estimated:U&&$&&j?($-F)/U:void 0,event:P,lengthComputable:$!=null,[m?"download":"upload"]:!0};d(Z)},g)},progressEventDecorator=(d,m)=>{const g=d!=null;return[w=>m[0]({lengthComputable:g,total:d,loaded:w}),m[1]]},asyncDecorator=d=>(...m)=>utils$1.asap(()=>d(...m)),isURLSameOrigin=platform.hasStandardBrowserEnv?((d,m)=>g=>(g=new URL(g,platform.origin),d.protocol===g.protocol&&d.host===g.host&&(m||d.port===g.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(d,m,g,w,I,P){const F=[d+"="+encodeURIComponent(m)];utils$1.isNumber(g)&&F.push("expires="+new Date(g).toGMTString()),utils$1.isString(w)&&F.push("path="+w),utils$1.isString(I)&&F.push("domain="+I),P===!0&&F.push("secure"),document.cookie=F.join("; ")},read(d){const m=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return m?decodeURIComponent(m[3]):null},remove(d){this.write(d,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(d){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(d)}function combineURLs(d,m){return m?d.replace(/\/?\/$/,"")+"/"+m.replace(/^\/+/,""):d}function buildFullPath(d,m){return d&&!isAbsoluteURL(m)?combineURLs(d,m):m}const headersToObject=d=>d instanceof AxiosHeaders?{...d}:d;function mergeConfig(d,m){m=m||{};const g={};function w(U,j,Z,G){return utils$1.isPlainObject(U)&&utils$1.isPlainObject(j)?utils$1.merge.call({caseless:G},U,j):utils$1.isPlainObject(j)?utils$1.merge({},j):utils$1.isArray(j)?j.slice():j}function I(U,j,Z,G){if(utils$1.isUndefined(j)){if(!utils$1.isUndefined(U))return w(void 0,U,Z,G)}else return w(U,j,Z,G)}function P(U,j){if(!utils$1.isUndefined(j))return w(void 0,j)}function F(U,j){if(utils$1.isUndefined(j)){if(!utils$1.isUndefined(U))return w(void 0,U)}else return w(void 0,j)}function $(U,j,Z){if(Z in m)return w(U,j);if(Z in d)return w(void 0,U)}const D={url:P,method:P,data:P,baseURL:F,transformRequest:F,transformResponse:F,paramsSerializer:F,timeout:F,timeoutMessage:F,withCredentials:F,withXSRFToken:F,adapter:F,responseType:F,xsrfCookieName:F,xsrfHeaderName:F,onUploadProgress:F,onDownloadProgress:F,decompress:F,maxContentLength:F,maxBodyLength:F,beforeRedirect:F,transport:F,httpAgent:F,httpsAgent:F,cancelToken:F,socketPath:F,responseEncoding:F,validateStatus:$,headers:(U,j,Z)=>I(headersToObject(U),headersToObject(j),Z,!0)};return utils$1.forEach(Object.keys(Object.assign({},d,m)),function(j){const Z=D[j]||I,G=Z(d[j],m[j],j);utils$1.isUndefined(G)&&Z!==$||(g[j]=G)}),g}const resolveConfig=d=>{const m=mergeConfig({},d);let{data:g,withXSRFToken:w,xsrfHeaderName:I,xsrfCookieName:P,headers:F,auth:$}=m;m.headers=F=AxiosHeaders.from(F),m.url=buildURL(buildFullPath(m.baseURL,m.url),d.params,d.paramsSerializer),$&&F.set("Authorization","Basic "+btoa(($.username||"")+":"+($.password?unescape(encodeURIComponent($.password)):"")));let D;if(utils$1.isFormData(g)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)F.setContentType(void 0);else if((D=F.getContentType())!==!1){const[U,...j]=D?D.split(";").map(Z=>Z.trim()).filter(Boolean):[];F.setContentType([U||"multipart/form-data",...j].join("; "))}}if(platform.hasStandardBrowserEnv&&(w&&utils$1.isFunction(w)&&(w=w(m)),w||w!==!1&&isURLSameOrigin(m.url))){const U=I&&P&&cookies.read(P);U&&F.set(I,U)}return m},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(d){return new Promise(function(g,w){const I=resolveConfig(d);let P=I.data;const F=AxiosHeaders.from(I.headers).normalize();let{responseType:$,onUploadProgress:D,onDownloadProgress:U}=I,j,Z,G,H,q;function W(){H&&H(),q&&q(),I.cancelToken&&I.cancelToken.unsubscribe(j),I.signal&&I.signal.removeEventListener("abort",j)}let Q=new XMLHttpRequest;Q.open(I.method.toUpperCase(),I.url,!0),Q.timeout=I.timeout;function J(){if(!Q)return;const V=AxiosHeaders.from("getAllResponseHeaders"in Q&&Q.getAllResponseHeaders()),X={data:!$||$==="text"||$==="json"?Q.responseText:Q.response,status:Q.status,statusText:Q.statusText,headers:V,config:d,request:Q};settle(function(it){g(it),W()},function(it){w(it),W()},X),Q=null}"onloadend"in Q?Q.onloadend=J:Q.onreadystatechange=function(){!Q||Q.readyState!==4||Q.status===0&&!(Q.responseURL&&Q.responseURL.indexOf("file:")===0)||setTimeout(J)},Q.onabort=function(){Q&&(w(new AxiosError("Request aborted",AxiosError.ECONNABORTED,d,Q)),Q=null)},Q.onerror=function(){w(new AxiosError("Network Error",AxiosError.ERR_NETWORK,d,Q)),Q=null},Q.ontimeout=function(){let tt=I.timeout?"timeout of "+I.timeout+"ms exceeded":"timeout exceeded";const X=I.transitional||transitionalDefaults;I.timeoutErrorMessage&&(tt=I.timeoutErrorMessage),w(new AxiosError(tt,X.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,d,Q)),Q=null},P===void 0&&F.setContentType(null),"setRequestHeader"in Q&&utils$1.forEach(F.toJSON(),function(tt,X){Q.setRequestHeader(X,tt)}),utils$1.isUndefined(I.withCredentials)||(Q.withCredentials=!!I.withCredentials),$&&$!=="json"&&(Q.responseType=I.responseType),U&&([G,q]=progressEventReducer(U,!0),Q.addEventListener("progress",G)),D&&Q.upload&&([Z,H]=progressEventReducer(D),Q.upload.addEventListener("progress",Z),Q.upload.addEventListener("loadend",H)),(I.cancelToken||I.signal)&&(j=V=>{Q&&(w(!V||V.type?new CanceledError(null,d,Q):V),Q.abort(),Q=null)},I.cancelToken&&I.cancelToken.subscribe(j),I.signal&&(I.signal.aborted?j():I.signal.addEventListener("abort",j)));const K=parseProtocol(I.url);if(K&&platform.protocols.indexOf(K)===-1){w(new AxiosError("Unsupported protocol "+K+":",AxiosError.ERR_BAD_REQUEST,d));return}Q.send(P||null)})},composeSignals=(d,m)=>{const{length:g}=d=d?d.filter(Boolean):[];if(m||g){let w=new AbortController,I;const P=function(U){if(!I){I=!0,$();const j=U instanceof Error?U:this.reason;w.abort(j instanceof AxiosError?j:new CanceledError(j instanceof Error?j.message:j))}};let F=m&&setTimeout(()=>{F=null,P(new AxiosError(`timeout ${m} of ms exceeded`,AxiosError.ETIMEDOUT))},m);const $=()=>{d&&(F&&clearTimeout(F),F=null,d.forEach(U=>{U.unsubscribe?U.unsubscribe(P):U.removeEventListener("abort",P)}),d=null)};d.forEach(U=>U.addEventListener("abort",P));const{signal:D}=w;return D.unsubscribe=()=>utils$1.asap($),D}},streamChunk=function*(d,m){let g=d.byteLength;if(g<m){yield d;return}let w=0,I;for(;w<g;)I=w+m,yield d.slice(w,I),w=I},readBytes=async function*(d,m){for await(const g of readStream(d))yield*streamChunk(g,m)},readStream=async function*(d){if(d[Symbol.asyncIterator]){yield*d;return}const m=d.getReader();try{for(;;){const{done:g,value:w}=await m.read();if(g)break;yield w}}finally{await m.cancel()}},trackStream=(d,m,g,w)=>{const I=readBytes(d,m);let P=0,F,$=D=>{F||(F=!0,w&&w(D))};return new ReadableStream({async pull(D){try{const{done:U,value:j}=await I.next();if(U){$(),D.close();return}let Z=j.byteLength;if(g){let G=P+=Z;g(G)}D.enqueue(new Uint8Array(j))}catch(U){throw $(U),U}},cancel(D){return $(D),I.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(d=>m=>d.encode(m))(new TextEncoder):async d=>new Uint8Array(await new Response(d).arrayBuffer())),test=(d,...m)=>{try{return!!d(...m)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let d=!1;const m=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return d=!0,"half"}}).headers.has("Content-Type");return d&&!m}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(d=>d.body)};isFetchSupported&&(d=>{["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!resolvers[m]&&(resolvers[m]=utils$1.isFunction(d[m])?g=>g[m]():(g,w)=>{throw new AxiosError(`Response type '${m}' is not supported`,AxiosError.ERR_NOT_SUPPORT,w)})})})(new Response);const getBodyLength=async d=>{if(d==null)return 0;if(utils$1.isBlob(d))return d.size;if(utils$1.isSpecCompliantForm(d))return(await new Request(platform.origin,{method:"POST",body:d}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(d)||utils$1.isArrayBuffer(d))return d.byteLength;if(utils$1.isURLSearchParams(d)&&(d=d+""),utils$1.isString(d))return(await encodeText(d)).byteLength},resolveBodyLength=async(d,m)=>{const g=utils$1.toFiniteNumber(d.getContentLength());return g??getBodyLength(m)},fetchAdapter=isFetchSupported&&(async d=>{let{url:m,method:g,data:w,signal:I,cancelToken:P,timeout:F,onDownloadProgress:$,onUploadProgress:D,responseType:U,headers:j,withCredentials:Z="same-origin",fetchOptions:G}=resolveConfig(d);U=U?(U+"").toLowerCase():"text";let H=composeSignals([I,P&&P.toAbortSignal()],F),q;const W=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let Q;try{if(D&&supportsRequestStream&&g!=="get"&&g!=="head"&&(Q=await resolveBodyLength(j,w))!==0){let X=new Request(m,{method:"POST",body:w,duplex:"half"}),ot;if(utils$1.isFormData(w)&&(ot=X.headers.get("content-type"))&&j.setContentType(ot),X.body){const[it,lt]=progressEventDecorator(Q,progressEventReducer(asyncDecorator(D)));w=trackStream(X.body,DEFAULT_CHUNK_SIZE,it,lt)}}utils$1.isString(Z)||(Z=Z?"include":"omit");const J="credentials"in Request.prototype;q=new Request(m,{...G,signal:H,method:g.toUpperCase(),headers:j.normalize().toJSON(),body:w,duplex:"half",credentials:J?Z:void 0});let K=await fetch(q);const V=supportsResponseStream&&(U==="stream"||U==="response");if(supportsResponseStream&&($||V&&W)){const X={};["status","statusText","headers"].forEach(at=>{X[at]=K[at]});const ot=utils$1.toFiniteNumber(K.headers.get("content-length")),[it,lt]=$&&progressEventDecorator(ot,progressEventReducer(asyncDecorator($),!0))||[];K=new Response(trackStream(K.body,DEFAULT_CHUNK_SIZE,it,()=>{lt&&lt(),W&&W()}),X)}U=U||"text";let tt=await resolvers[utils$1.findKey(resolvers,U)||"text"](K,d);return!V&&W&&W(),await new Promise((X,ot)=>{settle(X,ot,{data:tt,headers:AxiosHeaders.from(K.headers),status:K.status,statusText:K.statusText,config:d,request:q})})}catch(J){throw W&&W(),J&&J.name==="TypeError"&&/fetch/i.test(J.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,d,q),{cause:J.cause||J}):AxiosError.from(J,J&&J.code,d,q)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(d,m)=>{if(d){try{Object.defineProperty(d,"name",{value:m})}catch{}Object.defineProperty(d,"adapterName",{value:m})}});const renderReason=d=>`- ${d}`,isResolvedHandle=d=>utils$1.isFunction(d)||d===null||d===!1,adapters={getAdapter:d=>{d=utils$1.isArray(d)?d:[d];const{length:m}=d;let g,w;const I={};for(let P=0;P<m;P++){g=d[P];let F;if(w=g,!isResolvedHandle(g)&&(w=knownAdapters[(F=String(g)).toLowerCase()],w===void 0))throw new AxiosError(`Unknown adapter '${F}'`);if(w)break;I[F||"#"+P]=w}if(!w){const P=Object.entries(I).map(([$,D])=>`adapter ${$} `+(D===!1?"is not supported by the environment":"is not available in the build"));let F=m?P.length>1?`since :
`+P.map(renderReason).join(`
`):" "+renderReason(P[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+F,"ERR_NOT_SUPPORT")}return w},adapters:knownAdapters};function throwIfCancellationRequested(d){if(d.cancelToken&&d.cancelToken.throwIfRequested(),d.signal&&d.signal.aborted)throw new CanceledError(null,d)}function dispatchRequest(d){return throwIfCancellationRequested(d),d.headers=AxiosHeaders.from(d.headers),d.data=transformData.call(d,d.transformRequest),["post","put","patch"].indexOf(d.method)!==-1&&d.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(d.adapter||defaults.adapter)(d).then(function(w){return throwIfCancellationRequested(d),w.data=transformData.call(d,d.transformResponse,w),w.headers=AxiosHeaders.from(w.headers),w},function(w){return isCancel(w)||(throwIfCancellationRequested(d),w&&w.response&&(w.response.data=transformData.call(d,d.transformResponse,w.response),w.response.headers=AxiosHeaders.from(w.response.headers))),Promise.reject(w)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((d,m)=>{validators$1[d]=function(w){return typeof w===d||"a"+(m<1?"n ":" ")+d}});const deprecatedWarnings={};validators$1.transitional=function(m,g,w){function I(P,F){return"[Axios v"+VERSION+"] Transitional option '"+P+"'"+F+(w?". "+w:"")}return(P,F,$)=>{if(m===!1)throw new AxiosError(I(F," has been removed"+(g?" in "+g:"")),AxiosError.ERR_DEPRECATED);return g&&!deprecatedWarnings[F]&&(deprecatedWarnings[F]=!0,console.warn(I(F," has been deprecated since v"+g+" and will be removed in the near future"))),m?m(P,F,$):!0}};validators$1.spelling=function(m){return(g,w)=>(console.warn(`${w} is likely a misspelling of ${m}`),!0)};function assertOptions(d,m,g){if(typeof d!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const w=Object.keys(d);let I=w.length;for(;I-- >0;){const P=w[I],F=m[P];if(F){const $=d[P],D=$===void 0||F($,P,d);if(D!==!0)throw new AxiosError("option "+P+" must be "+D,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(g!==!0)throw new AxiosError("Unknown option "+P,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(m){this.defaults=m,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(m,g){try{return await this._request(m,g)}catch(w){if(w instanceof Error){let I={};Error.captureStackTrace?Error.captureStackTrace(I):I=new Error;const P=I.stack?I.stack.replace(/^.+\n/,""):"";try{w.stack?P&&!String(w.stack).endsWith(P.replace(/^.+\n.+\n/,""))&&(w.stack+=`
`+P):w.stack=P}catch{}}throw w}}_request(m,g){typeof m=="string"?(g=g||{},g.url=m):g=m||{},g=mergeConfig(this.defaults,g);const{transitional:w,paramsSerializer:I,headers:P}=g;w!==void 0&&validator.assertOptions(w,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),I!=null&&(utils$1.isFunction(I)?g.paramsSerializer={serialize:I}:validator.assertOptions(I,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(g,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),g.method=(g.method||this.defaults.method||"get").toLowerCase();let F=P&&utils$1.merge(P.common,P[g.method]);P&&utils$1.forEach(["delete","get","head","post","put","patch","common"],q=>{delete P[q]}),g.headers=AxiosHeaders.concat(F,P);const $=[];let D=!0;this.interceptors.request.forEach(function(W){typeof W.runWhen=="function"&&W.runWhen(g)===!1||(D=D&&W.synchronous,$.unshift(W.fulfilled,W.rejected))});const U=[];this.interceptors.response.forEach(function(W){U.push(W.fulfilled,W.rejected)});let j,Z=0,G;if(!D){const q=[dispatchRequest.bind(this),void 0];for(q.unshift.apply(q,$),q.push.apply(q,U),G=q.length,j=Promise.resolve(g);Z<G;)j=j.then(q[Z++],q[Z++]);return j}G=$.length;let H=g;for(Z=0;Z<G;){const q=$[Z++],W=$[Z++];try{H=q(H)}catch(Q){W.call(this,Q);break}}try{j=dispatchRequest.call(this,H)}catch(q){return Promise.reject(q)}for(Z=0,G=U.length;Z<G;)j=j.then(U[Z++],U[Z++]);return j}getUri(m){m=mergeConfig(this.defaults,m);const g=buildFullPath(m.baseURL,m.url);return buildURL(g,m.params,m.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(m){Axios.prototype[m]=function(g,w){return this.request(mergeConfig(w||{},{method:m,url:g,data:(w||{}).data}))}});utils$1.forEach(["post","put","patch"],function(m){function g(w){return function(P,F,$){return this.request(mergeConfig($||{},{method:m,headers:w?{"Content-Type":"multipart/form-data"}:{},url:P,data:F}))}}Axios.prototype[m]=g(),Axios.prototype[m+"Form"]=g(!0)});class CancelToken{constructor(m){if(typeof m!="function")throw new TypeError("executor must be a function.");let g;this.promise=new Promise(function(P){g=P});const w=this;this.promise.then(I=>{if(!w._listeners)return;let P=w._listeners.length;for(;P-- >0;)w._listeners[P](I);w._listeners=null}),this.promise.then=I=>{let P;const F=new Promise($=>{w.subscribe($),P=$}).then(I);return F.cancel=function(){w.unsubscribe(P)},F},m(function(P,F,$){w.reason||(w.reason=new CanceledError(P,F,$),g(w.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(m){if(this.reason){m(this.reason);return}this._listeners?this._listeners.push(m):this._listeners=[m]}unsubscribe(m){if(!this._listeners)return;const g=this._listeners.indexOf(m);g!==-1&&this._listeners.splice(g,1)}toAbortSignal(){const m=new AbortController,g=w=>{m.abort(w)};return this.subscribe(g),m.signal.unsubscribe=()=>this.unsubscribe(g),m.signal}static source(){let m;return{token:new CancelToken(function(I){m=I}),cancel:m}}}function spread(d){return function(g){return d.apply(null,g)}}function isAxiosError(d){return utils$1.isObject(d)&&d.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([d,m])=>{HttpStatusCode[m]=d});function createInstance(d){const m=new Axios(d),g=bind(Axios.prototype.request,m);return utils$1.extend(g,Axios.prototype,m,{allOwnKeys:!0}),utils$1.extend(g,m,null,{allOwnKeys:!0}),g.create=function(I){return createInstance(mergeConfig(d,I))},g}const axios=createInstance(defaults);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(m){return Promise.all(m)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=d=>formDataToJSON(utils$1.isHTMLForm(d)?new FormData(d):d);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;async function connect(){const d=await navigator.serial.requestPort();return await d.open({baudRate:9600}),d}async function write$1(d,m){const g=d.writable.getWriter();await g.write(new TextEncoder().encode(m+`
`)),g.releaseLock()}async function writeSync(d,m){return await this.write(d,m),await this.read(d,3e4)}async function read$1(d,m){const g=d.readable.getReader();let w="";const I=setTimeout(()=>{throw new Error(`Timed out reading for ${m/1e3}s`)},m);for(;;){const{value:P}=await g.read();if(w+=new TextDecoder().decode(P),w.includes(`
`))break}return clearTimeout(I),g.releaseLock(),w.replace(/(\r\n|\n|\r)/gm,"")}const LinkAnalyzer={write:write$1,writeSync,read:read$1,connect};function openFirmware(){window.open("https://github.com/zarcha/Link-Analyzer-Firmware/releases","_blank").focus()}function openGuide(){window.open("https://github.com/zarcha/Link-Analyzer-Firmware#flashingupdating","_blank").focus()}var root_1$5=template('<div style="padding-bottom: 10px;"><div class="card"><div class="card-body" style="text-align: center;"><p class="h3 text-danger">Your Link Analyzer is not up to date!</p> <p> </p> <p> </p> <p class="text-warning">Your Link Analyzer may not work with this app without updating!</p> <div><button type="button" class="btn btn-warning">Download Firmware</button> <button type="button" class="btn btn-warning">Update Guide</button></div></div></div></div>');function VersionUpdate(d,m){push(m,!0);let g=state(void 0),w=state("");function I(){F(),P()}async function P(){const j=await axios.get("https://api.github.com/repos/zarcha/Link-Analyzer-Firmware/tags");set(g,proxy(j.data[0].name))}async function F(){m.port&&set(w,proxy(await LinkAnalyzer.writeSync(m.port,"v")))}user_effect(I);var $=comment(),D=first_child($);{var U=j=>{var Z=root_1$5(),G=child(Z),H=child(G),q=sibling(child(H),2),W=child(q),Q=sibling(q,2),J=child(Q),K=sibling(Q,4),V=child(K);V.__click=[openFirmware];var tt=sibling(V,2);tt.__click=[openGuide],template_effect(()=>{set_text(W,`Link Analyzer Version: ${get(w)??""}`),set_text(J,`Current Version: ${get(g)??""}`)}),append(j,Z)};if_block(D,j=>{get(g)&&get(w)!=get(g)&&j(U)})}append(d,$),pop()}delegate(["click"]);var root$9=template('<div style="padding-bottom: 10px;"><div class="input-group"><span class="input-group-text" style="width: 120px"> </span> <input type="number"></div></div>');function NumberField(d,m){push(m,!0);let g=prop(m,"value",15),w=state(!0);function I(){set(w,proxy(g()<=m.maxValue&&g()>=0))}onMount(()=>{I()});var P=root$9(),F=child(P),$=child(F),D=child($),U=sibling($,2);U.__input=I,template_effect(()=>{set_text(D,m.name),set_class(U,`form-control ${(get(w)?"":"is-invalid")??""}`)}),bind_value(U,g),append(d,P),pop()}delegate(["input"]);var root_1$4=template('<li class="pointer svelte-3unfp"><a href="#" class="dropdown-item navi-size align-center svelte-3unfp"> </a></li>'),root$8=template('<div class="align-center pad-bottom svelte-3unfp"><div class="dropdown"><button type="button" class="btn btn-warning dropdown-toggle navi-size svelte-3unfp" data-bs-toggle="dropdown"> </button> <ul class="dropdown-menu"></ul></div></div>');function NaviField(d,m){let g=prop(m,"value",15);const w=["HeatMan","ElecMan","SlashMan","EraseMan","ChargeMan","SpoutMan/AquaMan","TomahawkMan","TenguMan","GroundMan","DustMan","MegaMan","ProtoMan","Dark ProtoMan","Colonel","Forte/Bass","Dark MegaMan"];var I=root$8(),P=child(I),F=child(P),$=child(F),D=sibling(F,2);each(D,21,()=>w,index,(U,j,Z)=>{var G=root_1$4(),H=child(G);H.__click=()=>g(Z+1);var q=child(H);template_effect(()=>set_text(q,get(j))),append(U,G)}),template_effect(()=>set_text($,w[g()-1])),append(d,I)}delegate(["click"]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function getAugmentedNamespace(d){if(d.__esModule)return d;var m=d.default;if(typeof m=="function"){var g=function w(){return this instanceof w?Reflect.construct(m,arguments,this.constructor):m.apply(this,arguments)};g.prototype=m.prototype}else g={};return Object.defineProperty(g,"__esModule",{value:!0}),Object.keys(d).forEach(function(w){var I=Object.getOwnPropertyDescriptor(d,w);Object.defineProperty(g,w,I.get?I:{enumerable:!0,get:function(){return d[w]}})}),g}typeof self>"u"&&typeof commonjsGlobal=="object"&&(commonjsGlobal.self=commonjsGlobal);var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=0;m<64;++m)lookup[m]=d[m],revLookup[d.charCodeAt(m)]=m;revLookup[45]=62,revLookup[95]=63}function toByteArray(d){var m,g,w,I,P,F;inited||init();var $=d.length;if($%4>0)throw new Error("Invalid string. Length must be a multiple of 4");P=d[$-2]==="="?2:d[$-1]==="="?1:0,F=new Arr(3*$/4-P),w=P>0?$-4:$;var D=0;for(m=0,g=0;m<w;m+=4,g+=3)I=revLookup[d.charCodeAt(m)]<<18|revLookup[d.charCodeAt(m+1)]<<12|revLookup[d.charCodeAt(m+2)]<<6|revLookup[d.charCodeAt(m+3)],F[D++]=I>>16&255,F[D++]=I>>8&255,F[D++]=255&I;return P===2?(I=revLookup[d.charCodeAt(m)]<<2|revLookup[d.charCodeAt(m+1)]>>4,F[D++]=255&I):P===1&&(I=revLookup[d.charCodeAt(m)]<<10|revLookup[d.charCodeAt(m+1)]<<4|revLookup[d.charCodeAt(m+2)]>>2,F[D++]=I>>8&255,F[D++]=255&I),F}function tripletToBase64(d){return lookup[d>>18&63]+lookup[d>>12&63]+lookup[d>>6&63]+lookup[63&d]}function encodeChunk(d,m,g){for(var w,I=[],P=m;P<g;P+=3)w=(d[P]<<16)+(d[P+1]<<8)+d[P+2],I.push(tripletToBase64(w));return I.join("")}function fromByteArray(d){var m;inited||init();for(var g=d.length,w=g%3,I="",P=[],F=16383,$=0,D=g-w;$<D;$+=F)P.push(encodeChunk(d,$,$+F>D?D:$+F));return w===1?(m=d[g-1],I+=lookup[m>>2],I+=lookup[m<<4&63],I+="=="):w===2&&(m=(d[g-2]<<8)+d[g-1],I+=lookup[m>>10],I+=lookup[m>>4&63],I+=lookup[m<<2&63],I+="="),P.push(I),P.join("")}function read(d,m,g,w,I){var P,F,$=8*I-w-1,D=(1<<$)-1,U=D>>1,j=-7,Z=g?I-1:0,G=g?-1:1,H=d[m+Z];for(Z+=G,P=H&(1<<-j)-1,H>>=-j,j+=$;j>0;P=256*P+d[m+Z],Z+=G,j-=8);for(F=P&(1<<-j)-1,P>>=-j,j+=w;j>0;F=256*F+d[m+Z],Z+=G,j-=8);if(P===0)P=1-U;else{if(P===D)return F?NaN:1/0*(H?-1:1);F+=Math.pow(2,w),P-=U}return(H?-1:1)*F*Math.pow(2,P-w)}function write(d,m,g,w,I,P){var F,$,D,U=8*P-I-1,j=(1<<U)-1,Z=j>>1,G=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=w?0:P-1,q=w?1:-1,W=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?($=isNaN(m)?1:0,F=j):(F=Math.floor(Math.log(m)/Math.LN2),m*(D=Math.pow(2,-F))<1&&(F--,D*=2),(m+=F+Z>=1?G/D:G*Math.pow(2,1-Z))*D>=2&&(F++,D/=2),F+Z>=j?($=0,F=j):F+Z>=1?($=(m*D-1)*Math.pow(2,I),F+=Z):($=m*Math.pow(2,Z-1)*Math.pow(2,I),F=0));I>=8;d[g+H]=255&$,H+=q,$/=256,I-=8);for(F=F<<I|$,U+=I;U>0;d[g+H]=255&F,H+=q,F/=256,U-=8);d[g+H-q]|=128*W}var toString={}.toString,isArray=Array.isArray||function(d){return toString.call(d)=="[object Array]"},INSPECT_MAX_BYTES=50;function kMaxLength(){return Buffer$1.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(d,m){if(kMaxLength()<m)throw new RangeError("Invalid typed array length");return Buffer$1.TYPED_ARRAY_SUPPORT?(d=new Uint8Array(m)).__proto__=Buffer$1.prototype:(d===null&&(d=new Buffer$1(m)),d.length=m),d}function Buffer$1(d,m,g){if(!(Buffer$1.TYPED_ARRAY_SUPPORT||this instanceof Buffer$1))return new Buffer$1(d,m,g);if(typeof d=="number"){if(typeof m=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,d)}return from(this,d,m,g)}function from(d,m,g,w){if(typeof m=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&m instanceof ArrayBuffer?fromArrayBuffer(d,m,g,w):typeof m=="string"?fromString(d,m,g):fromObject(d,m)}function assertSize(d){if(typeof d!="number")throw new TypeError('"size" argument must be a number');if(d<0)throw new RangeError('"size" argument must not be negative')}function alloc(d,m,g,w){return assertSize(m),m<=0?createBuffer(d,m):g!==void 0?typeof w=="string"?createBuffer(d,m).fill(g,w):createBuffer(d,m).fill(g):createBuffer(d,m)}function allocUnsafe(d,m){if(assertSize(m),d=createBuffer(d,m<0?0:0|checked(m)),!Buffer$1.TYPED_ARRAY_SUPPORT)for(var g=0;g<m;++g)d[g]=0;return d}function fromString(d,m,g){if(typeof g=="string"&&g!==""||(g="utf8"),!Buffer$1.isEncoding(g))throw new TypeError('"encoding" must be a valid string encoding');var w=0|byteLength(m,g),I=(d=createBuffer(d,w)).write(m,g);return I!==w&&(d=d.slice(0,I)),d}function fromArrayLike(d,m){var g=m.length<0?0:0|checked(m.length);d=createBuffer(d,g);for(var w=0;w<g;w+=1)d[w]=255&m[w];return d}function fromArrayBuffer(d,m,g,w){if(m.byteLength,g<0||m.byteLength<g)throw new RangeError("'offset' is out of bounds");if(m.byteLength<g+(w||0))throw new RangeError("'length' is out of bounds");return m=g===void 0&&w===void 0?new Uint8Array(m):w===void 0?new Uint8Array(m,g):new Uint8Array(m,g,w),Buffer$1.TYPED_ARRAY_SUPPORT?(d=m).__proto__=Buffer$1.prototype:d=fromArrayLike(d,m),d}function fromObject(d,m){if(internalIsBuffer(m)){var g=0|checked(m.length);return(d=createBuffer(d,g)).length===0||m.copy(d,0,0,g),d}if(m){if(typeof ArrayBuffer<"u"&&m.buffer instanceof ArrayBuffer||"length"in m)return typeof m.length!="number"||isnan(m.length)?createBuffer(d,0):fromArrayLike(d,m);if(m.type==="Buffer"&&isArray(m.data))return fromArrayLike(d,m.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(d){if(d>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|d}function internalIsBuffer(d){return!(d==null||!d._isBuffer)}function byteLength(d,m){if(internalIsBuffer(d))return d.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(d)||d instanceof ArrayBuffer))return d.byteLength;typeof d!="string"&&(d=""+d);var g=d.length;if(g===0)return 0;for(var w=!1;;)switch(m){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":case void 0:return utf8ToBytes(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*g;case"hex":return g>>>1;case"base64":return base64ToBytes(d).length;default:if(w)return utf8ToBytes(d).length;m=(""+m).toLowerCase(),w=!0}}function slowToString(d,m,g){var w=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0)<=(m>>>=0))return"";for(d||(d="utf8");;)switch(d){case"hex":return hexSlice(this,m,g);case"utf8":case"utf-8":return utf8Slice(this,m,g);case"ascii":return asciiSlice(this,m,g);case"latin1":case"binary":return latin1Slice(this,m,g);case"base64":return base64Slice(this,m,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,m,g);default:if(w)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),w=!0}}function swap(d,m,g){var w=d[m];d[m]=d[g],d[g]=w}function bidirectionalIndexOf(d,m,g,w,I){if(d.length===0)return-1;if(typeof g=="string"?(w=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,isNaN(g)&&(g=I?0:d.length-1),g<0&&(g=d.length+g),g>=d.length){if(I)return-1;g=d.length-1}else if(g<0){if(!I)return-1;g=0}if(typeof m=="string"&&(m=Buffer$1.from(m,w)),internalIsBuffer(m))return m.length===0?-1:arrayIndexOf(d,m,g,w,I);if(typeof m=="number")return m&=255,Buffer$1.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(d,m,g):Uint8Array.prototype.lastIndexOf.call(d,m,g):arrayIndexOf(d,[m],g,w,I);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(d,m,g,w,I){var P,F=1,$=d.length,D=m.length;if(w!==void 0&&((w=String(w).toLowerCase())==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(d.length<2||m.length<2)return-1;F=2,$/=2,D/=2,g/=2}function U(H,q){return F===1?H[q]:H.readUInt16BE(q*F)}if(I){var j=-1;for(P=g;P<$;P++)if(U(d,P)===U(m,j===-1?0:P-j)){if(j===-1&&(j=P),P-j+1===D)return j*F}else j!==-1&&(P-=P-j),j=-1}else for(g+D>$&&(g=$-D),P=g;P>=0;P--){for(var Z=!0,G=0;G<D;G++)if(U(d,P+G)!==U(m,G)){Z=!1;break}if(Z)return P}return-1}function hexWrite(d,m,g,w){g=Number(g)||0;var I=d.length-g;w?(w=Number(w))>I&&(w=I):w=I;var P=m.length;if(P%2!=0)throw new TypeError("Invalid hex string");w>P/2&&(w=P/2);for(var F=0;F<w;++F){var $=parseInt(m.substr(2*F,2),16);if(isNaN($))return F;d[g+F]=$}return F}function utf8Write(d,m,g,w){return blitBuffer(utf8ToBytes(m,d.length-g),d,g,w)}function asciiWrite(d,m,g,w){return blitBuffer(asciiToBytes(m),d,g,w)}function latin1Write(d,m,g,w){return asciiWrite(d,m,g,w)}function base64Write(d,m,g,w){return blitBuffer(base64ToBytes(m),d,g,w)}function ucs2Write(d,m,g,w){return blitBuffer(utf16leToBytes(m,d.length-g),d,g,w)}function base64Slice(d,m,g){return m===0&&g===d.length?fromByteArray(d):fromByteArray(d.slice(m,g))}function utf8Slice(d,m,g){g=Math.min(d.length,g);for(var w=[],I=m;I<g;){var P,F,$,D,U=d[I],j=null,Z=U>239?4:U>223?3:U>191?2:1;if(I+Z<=g)switch(Z){case 1:U<128&&(j=U);break;case 2:(192&(P=d[I+1]))==128&&(D=(31&U)<<6|63&P)>127&&(j=D);break;case 3:P=d[I+1],F=d[I+2],(192&P)==128&&(192&F)==128&&(D=(15&U)<<12|(63&P)<<6|63&F)>2047&&(D<55296||D>57343)&&(j=D);break;case 4:P=d[I+1],F=d[I+2],$=d[I+3],(192&P)==128&&(192&F)==128&&(192&$)==128&&(D=(15&U)<<18|(63&P)<<12|(63&F)<<6|63&$)>65535&&D<1114112&&(j=D)}j===null?(j=65533,Z=1):j>65535&&(j-=65536,w.push(j>>>10&1023|55296),j=56320|1023&j),w.push(j),I+=Z}return decodeCodePointsArray(w)}Buffer$1.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT===void 0||global$1.TYPED_ARRAY_SUPPORT,kMaxLength(),Buffer$1.poolSize=8192,Buffer$1._augment=function(d){return d.__proto__=Buffer$1.prototype,d},Buffer$1.from=function(d,m,g){return from(null,d,m,g)},Buffer$1.TYPED_ARRAY_SUPPORT&&(Buffer$1.prototype.__proto__=Uint8Array.prototype,Buffer$1.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer$1[Symbol.species]),Buffer$1.alloc=function(d,m,g){return alloc(null,d,m,g)},Buffer$1.allocUnsafe=function(d){return allocUnsafe(null,d)},Buffer$1.allocUnsafeSlow=function(d){return allocUnsafe(null,d)},Buffer$1.isBuffer=isBuffer,Buffer$1.compare=function(d,m){if(!internalIsBuffer(d)||!internalIsBuffer(m))throw new TypeError("Arguments must be Buffers");if(d===m)return 0;for(var g=d.length,w=m.length,I=0,P=Math.min(g,w);I<P;++I)if(d[I]!==m[I]){g=d[I],w=m[I];break}return g<w?-1:w<g?1:0},Buffer$1.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer$1.concat=function(d,m){if(!isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return Buffer$1.alloc(0);var g;if(m===void 0)for(m=0,g=0;g<d.length;++g)m+=d[g].length;var w=Buffer$1.allocUnsafe(m),I=0;for(g=0;g<d.length;++g){var P=d[g];if(!internalIsBuffer(P))throw new TypeError('"list" argument must be an Array of Buffers');P.copy(w,I),I+=P.length}return w},Buffer$1.byteLength=byteLength,Buffer$1.prototype._isBuffer=!0,Buffer$1.prototype.swap16=function(){var d=this.length;if(d%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<d;m+=2)swap(this,m,m+1);return this},Buffer$1.prototype.swap32=function(){var d=this.length;if(d%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<d;m+=4)swap(this,m,m+3),swap(this,m+1,m+2);return this},Buffer$1.prototype.swap64=function(){var d=this.length;if(d%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<d;m+=8)swap(this,m,m+7),swap(this,m+1,m+6),swap(this,m+2,m+5),swap(this,m+3,m+4);return this},Buffer$1.prototype.toString=function(){var d=0|this.length;return d===0?"":arguments.length===0?utf8Slice(this,0,d):slowToString.apply(this,arguments)},Buffer$1.prototype.equals=function(d){if(!internalIsBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d||Buffer$1.compare(this,d)===0},Buffer$1.prototype.inspect=function(){var d="",m=INSPECT_MAX_BYTES;return this.length>0&&(d=this.toString("hex",0,m).match(/.{2}/g).join(" "),this.length>m&&(d+=" ... ")),"<Buffer "+d+">"},Buffer$1.prototype.compare=function(d,m,g,w,I){if(!internalIsBuffer(d))throw new TypeError("Argument must be a Buffer");if(m===void 0&&(m=0),g===void 0&&(g=d?d.length:0),w===void 0&&(w=0),I===void 0&&(I=this.length),m<0||g>d.length||w<0||I>this.length)throw new RangeError("out of range index");if(w>=I&&m>=g)return 0;if(w>=I)return-1;if(m>=g)return 1;if(this===d)return 0;for(var P=(I>>>=0)-(w>>>=0),F=(g>>>=0)-(m>>>=0),$=Math.min(P,F),D=this.slice(w,I),U=d.slice(m,g),j=0;j<$;++j)if(D[j]!==U[j]){P=D[j],F=U[j];break}return P<F?-1:F<P?1:0},Buffer$1.prototype.includes=function(d,m,g){return this.indexOf(d,m,g)!==-1},Buffer$1.prototype.indexOf=function(d,m,g){return bidirectionalIndexOf(this,d,m,g,!0)},Buffer$1.prototype.lastIndexOf=function(d,m,g){return bidirectionalIndexOf(this,d,m,g,!1)},Buffer$1.prototype.write=function(d,m,g,w){if(m===void 0)w="utf8",g=this.length,m=0;else if(g===void 0&&typeof m=="string")w=m,g=this.length,m=0;else{if(!isFinite(m))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");m|=0,isFinite(g)?(g|=0,w===void 0&&(w="utf8")):(w=g,g=void 0)}var I=this.length-m;if((g===void 0||g>I)&&(g=I),d.length>0&&(g<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");for(var P=!1;;)switch(w){case"hex":return hexWrite(this,d,m,g);case"utf8":case"utf-8":return utf8Write(this,d,m,g);case"ascii":return asciiWrite(this,d,m,g);case"latin1":case"binary":return latin1Write(this,d,m,g);case"base64":return base64Write(this,d,m,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,d,m,g);default:if(P)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),P=!0}},Buffer$1.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(d){var m=d.length;if(m<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,d);for(var g="",w=0;w<m;)g+=String.fromCharCode.apply(String,d.slice(w,w+=MAX_ARGUMENTS_LENGTH));return g}function asciiSlice(d,m,g){var w="";g=Math.min(d.length,g);for(var I=m;I<g;++I)w+=String.fromCharCode(127&d[I]);return w}function latin1Slice(d,m,g){var w="";g=Math.min(d.length,g);for(var I=m;I<g;++I)w+=String.fromCharCode(d[I]);return w}function hexSlice(d,m,g){var w=d.length;(!m||m<0)&&(m=0),(!g||g<0||g>w)&&(g=w);for(var I="",P=m;P<g;++P)I+=toHex(d[P]);return I}function utf16leSlice(d,m,g){for(var w=d.slice(m,g),I="",P=0;P<w.length;P+=2)I+=String.fromCharCode(w[P]+256*w[P+1]);return I}function checkOffset(d,m,g){if(d%1!=0||d<0)throw new RangeError("offset is not uint");if(d+m>g)throw new RangeError("Trying to access beyond buffer length")}function checkInt(d,m,g,w,I,P){if(!internalIsBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>I||m<P)throw new RangeError('"value" argument is out of bounds');if(g+w>d.length)throw new RangeError("Index out of range")}function objectWriteUInt16(d,m,g,w){m<0&&(m=65535+m+1);for(var I=0,P=Math.min(d.length-g,2);I<P;++I)d[g+I]=(m&255<<8*(w?I:1-I))>>>8*(w?I:1-I)}function objectWriteUInt32(d,m,g,w){m<0&&(m=4294967295+m+1);for(var I=0,P=Math.min(d.length-g,4);I<P;++I)d[g+I]=m>>>8*(w?I:3-I)&255}function checkIEEE754(d,m,g,w,I,P){if(g+w>d.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function writeFloat(d,m,g,w,I){return I||checkIEEE754(d,m,g,4),write(d,m,g,w,23,4),g+4}function writeDouble(d,m,g,w,I){return I||checkIEEE754(d,m,g,8),write(d,m,g,w,52,8),g+8}Buffer$1.prototype.slice=function(d,m){var g,w=this.length;if((d=~~d)<0?(d+=w)<0&&(d=0):d>w&&(d=w),(m=m===void 0?w:~~m)<0?(m+=w)<0&&(m=0):m>w&&(m=w),m<d&&(m=d),Buffer$1.TYPED_ARRAY_SUPPORT)(g=this.subarray(d,m)).__proto__=Buffer$1.prototype;else{var I=m-d;g=new Buffer$1(I,void 0);for(var P=0;P<I;++P)g[P]=this[P+d]}return g},Buffer$1.prototype.readUIntLE=function(d,m,g){d|=0,m|=0,g||checkOffset(d,m,this.length);for(var w=this[d],I=1,P=0;++P<m&&(I*=256);)w+=this[d+P]*I;return w},Buffer$1.prototype.readUIntBE=function(d,m,g){d|=0,m|=0,g||checkOffset(d,m,this.length);for(var w=this[d+--m],I=1;m>0&&(I*=256);)w+=this[d+--m]*I;return w},Buffer$1.prototype.readUInt8=function(d,m){return m||checkOffset(d,1,this.length),this[d]},Buffer$1.prototype.readUInt16LE=function(d,m){return m||checkOffset(d,2,this.length),this[d]|this[d+1]<<8},Buffer$1.prototype.readUInt16BE=function(d,m){return m||checkOffset(d,2,this.length),this[d]<<8|this[d+1]},Buffer$1.prototype.readUInt32LE=function(d,m){return m||checkOffset(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+16777216*this[d+3]},Buffer$1.prototype.readUInt32BE=function(d,m){return m||checkOffset(d,4,this.length),16777216*this[d]+(this[d+1]<<16|this[d+2]<<8|this[d+3])},Buffer$1.prototype.readIntLE=function(d,m,g){d|=0,m|=0,g||checkOffset(d,m,this.length);for(var w=this[d],I=1,P=0;++P<m&&(I*=256);)w+=this[d+P]*I;return w>=(I*=128)&&(w-=Math.pow(2,8*m)),w},Buffer$1.prototype.readIntBE=function(d,m,g){d|=0,m|=0,g||checkOffset(d,m,this.length);for(var w=m,I=1,P=this[d+--w];w>0&&(I*=256);)P+=this[d+--w]*I;return P>=(I*=128)&&(P-=Math.pow(2,8*m)),P},Buffer$1.prototype.readInt8=function(d,m){return m||checkOffset(d,1,this.length),128&this[d]?-1*(255-this[d]+1):this[d]},Buffer$1.prototype.readInt16LE=function(d,m){m||checkOffset(d,2,this.length);var g=this[d]|this[d+1]<<8;return 32768&g?4294901760|g:g},Buffer$1.prototype.readInt16BE=function(d,m){m||checkOffset(d,2,this.length);var g=this[d+1]|this[d]<<8;return 32768&g?4294901760|g:g},Buffer$1.prototype.readInt32LE=function(d,m){return m||checkOffset(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},Buffer$1.prototype.readInt32BE=function(d,m){return m||checkOffset(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},Buffer$1.prototype.readFloatLE=function(d,m){return m||checkOffset(d,4,this.length),read(this,d,!0,23,4)},Buffer$1.prototype.readFloatBE=function(d,m){return m||checkOffset(d,4,this.length),read(this,d,!1,23,4)},Buffer$1.prototype.readDoubleLE=function(d,m){return m||checkOffset(d,8,this.length),read(this,d,!0,52,8)},Buffer$1.prototype.readDoubleBE=function(d,m){return m||checkOffset(d,8,this.length),read(this,d,!1,52,8)},Buffer$1.prototype.writeUIntLE=function(d,m,g,w){d=+d,m|=0,g|=0,w||checkInt(this,d,m,g,Math.pow(2,8*g)-1,0);var I=1,P=0;for(this[m]=255&d;++P<g&&(I*=256);)this[m+P]=d/I&255;return m+g},Buffer$1.prototype.writeUIntBE=function(d,m,g,w){d=+d,m|=0,g|=0,w||checkInt(this,d,m,g,Math.pow(2,8*g)-1,0);var I=g-1,P=1;for(this[m+I]=255&d;--I>=0&&(P*=256);)this[m+I]=d/P&255;return m+g},Buffer$1.prototype.writeUInt8=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,1,255,0),Buffer$1.TYPED_ARRAY_SUPPORT||(d=Math.floor(d)),this[m]=255&d,m+1},Buffer$1.prototype.writeUInt16LE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=255&d,this[m+1]=d>>>8):objectWriteUInt16(this,d,m,!0),m+2},Buffer$1.prototype.writeUInt16BE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=d>>>8,this[m+1]=255&d):objectWriteUInt16(this,d,m,!1),m+2},Buffer$1.prototype.writeUInt32LE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m+3]=d>>>24,this[m+2]=d>>>16,this[m+1]=d>>>8,this[m]=255&d):objectWriteUInt32(this,d,m,!0),m+4},Buffer$1.prototype.writeUInt32BE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=d>>>24,this[m+1]=d>>>16,this[m+2]=d>>>8,this[m+3]=255&d):objectWriteUInt32(this,d,m,!1),m+4},Buffer$1.prototype.writeIntLE=function(d,m,g,w){if(d=+d,m|=0,!w){var I=Math.pow(2,8*g-1);checkInt(this,d,m,g,I-1,-I)}var P=0,F=1,$=0;for(this[m]=255&d;++P<g&&(F*=256);)d<0&&$===0&&this[m+P-1]!==0&&($=1),this[m+P]=(d/F|0)-$&255;return m+g},Buffer$1.prototype.writeIntBE=function(d,m,g,w){if(d=+d,m|=0,!w){var I=Math.pow(2,8*g-1);checkInt(this,d,m,g,I-1,-I)}var P=g-1,F=1,$=0;for(this[m+P]=255&d;--P>=0&&(F*=256);)d<0&&$===0&&this[m+P+1]!==0&&($=1),this[m+P]=(d/F|0)-$&255;return m+g},Buffer$1.prototype.writeInt8=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,1,127,-128),Buffer$1.TYPED_ARRAY_SUPPORT||(d=Math.floor(d)),d<0&&(d=255+d+1),this[m]=255&d,m+1},Buffer$1.prototype.writeInt16LE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=255&d,this[m+1]=d>>>8):objectWriteUInt16(this,d,m,!0),m+2},Buffer$1.prototype.writeInt16BE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=d>>>8,this[m+1]=255&d):objectWriteUInt16(this,d,m,!1),m+2},Buffer$1.prototype.writeInt32LE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,4,2147483647,-2147483648),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=255&d,this[m+1]=d>>>8,this[m+2]=d>>>16,this[m+3]=d>>>24):objectWriteUInt32(this,d,m,!0),m+4},Buffer$1.prototype.writeInt32BE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=d>>>24,this[m+1]=d>>>16,this[m+2]=d>>>8,this[m+3]=255&d):objectWriteUInt32(this,d,m,!1),m+4},Buffer$1.prototype.writeFloatLE=function(d,m,g){return writeFloat(this,d,m,!0,g)},Buffer$1.prototype.writeFloatBE=function(d,m,g){return writeFloat(this,d,m,!1,g)},Buffer$1.prototype.writeDoubleLE=function(d,m,g){return writeDouble(this,d,m,!0,g)},Buffer$1.prototype.writeDoubleBE=function(d,m,g){return writeDouble(this,d,m,!1,g)},Buffer$1.prototype.copy=function(d,m,g,w){if(g||(g=0),w||w===0||(w=this.length),m>=d.length&&(m=d.length),m||(m=0),w>0&&w<g&&(w=g),w===g||d.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("sourceStart out of bounds");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),d.length-m<w-g&&(w=d.length-m+g);var I,P=w-g;if(this===d&&g<m&&m<w)for(I=P-1;I>=0;--I)d[I+m]=this[I+g];else if(P<1e3||!Buffer$1.TYPED_ARRAY_SUPPORT)for(I=0;I<P;++I)d[I+m]=this[I+g];else Uint8Array.prototype.set.call(d,this.subarray(g,g+P),m);return P},Buffer$1.prototype.fill=function(d,m,g,w){if(typeof d=="string"){if(typeof m=="string"?(w=m,m=0,g=this.length):typeof g=="string"&&(w=g,g=this.length),d.length===1){var I=d.charCodeAt(0);I<256&&(d=I)}if(w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!Buffer$1.isEncoding(w))throw new TypeError("Unknown encoding: "+w)}else typeof d=="number"&&(d&=255);if(m<0||this.length<m||this.length<g)throw new RangeError("Out of range index");if(g<=m)return this;var P;if(m>>>=0,g=g===void 0?this.length:g>>>0,d||(d=0),typeof d=="number")for(P=m;P<g;++P)this[P]=d;else{var F=internalIsBuffer(d)?d:utf8ToBytes(new Buffer$1(d,w).toString()),$=F.length;for(P=0;P<g-m;++P)this[P+m]=F[P%$]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g,HeaderTypes;function base64clean(d){if((d=stringtrim(d).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;d.length%4!=0;)d+="=";return d}function stringtrim(d){return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")}function toHex(d){return d<16?"0"+d.toString(16):d.toString(16)}function utf8ToBytes(d,m){var g;m=m||1/0;for(var w=d.length,I=null,P=[],F=0;F<w;++F){if((g=d.charCodeAt(F))>55295&&g<57344){if(!I){if(g>56319){(m-=3)>-1&&P.push(239,191,189);continue}if(F+1===w){(m-=3)>-1&&P.push(239,191,189);continue}I=g;continue}if(g<56320){(m-=3)>-1&&P.push(239,191,189),I=g;continue}g=65536+(I-55296<<10|g-56320)}else I&&(m-=3)>-1&&P.push(239,191,189);if(I=null,g<128){if((m-=1)<0)break;P.push(g)}else if(g<2048){if((m-=2)<0)break;P.push(g>>6|192,63&g|128)}else if(g<65536){if((m-=3)<0)break;P.push(g>>12|224,g>>6&63|128,63&g|128)}else{if(!(g<1114112))throw new Error("Invalid code point");if((m-=4)<0)break;P.push(g>>18|240,g>>12&63|128,g>>6&63|128,63&g|128)}}return P}function asciiToBytes(d){for(var m=[],g=0;g<d.length;++g)m.push(255&d.charCodeAt(g));return m}function utf16leToBytes(d,m){for(var g,w,I,P=[],F=0;F<d.length&&!((m-=2)<0);++F)w=(g=d.charCodeAt(F))>>8,I=g%256,P.push(I),P.push(w);return P}function base64ToBytes(d){return toByteArray(base64clean(d))}function blitBuffer(d,m,g,w){for(var I=0;I<w&&!(I+g>=m.length||I>=d.length);++I)m[I+g]=d[I];return I}function isnan(d){return d!=d}function isBuffer(d){return d!=null&&(!!d._isBuffer||isFastBuffer(d)||isSlowBuffer(d))}function isFastBuffer(d){return!!d.constructor&&typeof d.constructor.isBuffer=="function"&&d.constructor.isBuffer(d)}function isSlowBuffer(d){return typeof d.readFloatLE=="function"&&typeof d.slice=="function"&&isFastBuffer(d.slice(0,0))}(function(d){d[d.BITMAP_INFO_HEADER=40]="BITMAP_INFO_HEADER",d[d.BITMAP_V2_INFO_HEADER=52]="BITMAP_V2_INFO_HEADER",d[d.BITMAP_V3_INFO_HEADER=56]="BITMAP_V3_INFO_HEADER",d[d.BITMAP_V4_HEADER=108]="BITMAP_V4_HEADER",d[d.BITMAP_V5_HEADER=124]="BITMAP_V5_HEADER"})(HeaderTypes||(HeaderTypes={}));var HeaderTypes$1=HeaderTypes,BmpCompression;function maskColor(d,m,g,w){const I=1+~d&d,P=1+~m&m,F=1+~g&g,$=1+~w&w,D=d/I+1,U=m/P+1,j=g/F+1,Z=w/$+1;return{shiftRed:G=>(G&d)/I*256/D,shiftGreen:G=>(G&m)/P*256/U,shiftBlue:G=>(G&g)/F*256/j,shiftAlpha:w!==0?G=>(G&w)/$*256/Z:()=>255}}(function(d){d[d.NONE=0]="NONE",d[d.BI_RLE8=1]="BI_RLE8",d[d.BI_RLE4=2]="BI_RLE4",d[d.BI_BIT_FIELDS=3]="BI_BIT_FIELDS",d[d.BI_ALPHA_BIT_FIELDS=6]="BI_ALPHA_BIT_FIELDS"})(BmpCompression||(BmpCompression={}));class BmpDecoder{constructor(m,{toRGBA:g}={toRGBA:!1}){fe(this,"flag");fe(this,"fileSize");fe(this,"reserved1");fe(this,"reserved2");fe(this,"offset");fe(this,"headerSize");fe(this,"width");fe(this,"height");fe(this,"planes");fe(this,"bitPP");fe(this,"compression");fe(this,"rawSize");fe(this,"hr");fe(this,"vr");fe(this,"colors");fe(this,"importantColors");fe(this,"palette");fe(this,"data");fe(this,"maskRed");fe(this,"maskGreen");fe(this,"maskBlue");fe(this,"maskAlpha");fe(this,"toRGBA");fe(this,"pos");fe(this,"bottomUp");fe(this,"buffer");fe(this,"locRed");fe(this,"locGreen");fe(this,"locBlue");fe(this,"locAlpha");fe(this,"shiftRed");fe(this,"shiftGreen");fe(this,"shiftBlue");fe(this,"shiftAlpha");if(this.buffer=m,this.toRGBA=!!g,this.pos=0,this.bottomUp=!0,this.flag=this.buffer.toString("utf-8",0,this.pos+=2),this.flag!=="BM")throw new Error("Invalid BMP File");this.locRed=this.toRGBA?0:3,this.locGreen=this.toRGBA?1:2,this.locBlue=this.toRGBA?2:1,this.locAlpha=this.toRGBA?3:0,this.parseHeader(),this.parseRGBA()}parseHeader(){if(this.fileSize=this.readUInt32LE(),this.reserved1=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.reserved2=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.offset=this.readUInt32LE(),this.headerSize=this.readUInt32LE(),!(this.headerSize in HeaderTypes$1))throw new Error(`Unsupported BMP header size ${this.headerSize}`);if(this.width=this.readUInt32LE(),this.height=this.readUInt32LE(),this.height=this.height>2147483647?this.height-4294967296:this.height,this.planes=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.bitPP=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.compression=this.readUInt32LE(),this.rawSize=this.readUInt32LE(),this.hr=this.readUInt32LE(),this.vr=this.readUInt32LE(),this.colors=this.readUInt32LE(),this.importantColors=this.readUInt32LE(),this.bitPP===32?(this.maskAlpha=0,this.maskRed=16711680,this.maskGreen=65280,this.maskBlue=255):this.bitPP===16&&(this.maskAlpha=0,this.maskRed=31744,this.maskGreen=992,this.maskBlue=31),(this.headerSize>HeaderTypes$1.BITMAP_INFO_HEADER||this.compression===BmpCompression.BI_BIT_FIELDS||this.compression===BmpCompression.BI_ALPHA_BIT_FIELDS)&&(this.maskRed=this.readUInt32LE(),this.maskGreen=this.readUInt32LE(),this.maskBlue=this.readUInt32LE()),(this.headerSize>HeaderTypes$1.BITMAP_V2_INFO_HEADER||this.compression===BmpCompression.BI_ALPHA_BIT_FIELDS)&&(this.maskAlpha=this.readUInt32LE()),this.headerSize>HeaderTypes$1.BITMAP_V3_INFO_HEADER&&(this.pos+=HeaderTypes$1.BITMAP_V4_HEADER-HeaderTypes$1.BITMAP_V3_INFO_HEADER),this.headerSize>HeaderTypes$1.BITMAP_V4_HEADER&&(this.pos+=HeaderTypes$1.BITMAP_V5_HEADER-HeaderTypes$1.BITMAP_V4_HEADER),this.bitPP<=8||this.colors>0){const g=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(g);for(let w=0;w<g;w++){const I=this.buffer.readUInt8(this.pos++),P=this.buffer.readUInt8(this.pos++),F=this.buffer.readUInt8(this.pos++),$=this.buffer.readUInt8(this.pos++);this.palette[w]={red:F,green:P,blue:I,quad:$}}}this.height<0&&(this.height*=-1,this.bottomUp=!1);const m=maskColor(this.maskRed,this.maskGreen,this.maskBlue,this.maskAlpha);this.shiftRed=m.shiftRed,this.shiftGreen=m.shiftGreen,this.shiftBlue=m.shiftBlue,this.shiftAlpha=m.shiftAlpha}parseRGBA(){switch(this.data=Buffer$1.alloc(this.width*this.height*4),this.bitPP){case 1:this.bit1();break;case 4:this.bit4();break;case 8:this.bit8();break;case 16:this.bit16();break;case 24:this.bit24();break;default:this.bit32()}}bit1(){const m=Math.ceil(this.width/8),g=m%4,w=g!==0?4-g:0;this.scanImage(w,m,(I,P)=>{const F=this.buffer.readUInt8(this.pos++),$=P*this.width*4+8*I*4;for(let D=0;D<8&&8*I+D<this.width;D++){const U=this.palette[F>>7-D&1];this.data[$+D*this.locAlpha]=0,this.data[$+4*D+this.locBlue]=U.blue,this.data[$+4*D+this.locGreen]=U.green,this.data[$+4*D+this.locRed]=U.red}})}bit4(){if(this.compression===BmpCompression.BI_RLE4){this.data.fill(0);let m=!1,g=this.bottomUp?this.height-1:0,w=0;for(;w<this.data.length;){const I=this.buffer.readUInt8(this.pos++),P=this.buffer.readUInt8(this.pos++);if(I===0){if(P===0){g+=this.bottomUp?-1:1,w=g*this.width*4,m=!1;continue}if(P===1)break;if(P===2){const F=this.buffer.readUInt8(this.pos++),$=this.buffer.readUInt8(this.pos++);g+=this.bottomUp?-$:$,w+=$*this.width*4+4*F}else{let F=this.buffer.readUInt8(this.pos++);for(let $=0;$<P;$++)w=this.setPixelData(w,m?15&F:(240&F)>>4),1&$&&$+1<P&&(F=this.buffer.readUInt8(this.pos++)),m=!m;(P+1>>1&1)==1&&this.pos++}}else for(let F=0;F<I;F++)w=this.setPixelData(w,m?15&P:(240&P)>>4),m=!m}}else{const m=Math.ceil(this.width/2),g=m%4,w=g!==0?4-g:0;this.scanImage(w,m,(I,P)=>{const F=this.buffer.readUInt8(this.pos++),$=P*this.width*4+2*I*4,D=F>>4;let U=this.palette[D];if(this.data[$]=0,this.data[$+1]=U.blue,this.data[$+2]=U.green,this.data[$+3]=U.red,2*I+1>=this.width)return!1;const j=15&F;U=this.palette[j],this.data[$+4]=0,this.data[$+4+1]=U.blue,this.data[$+4+2]=U.green,this.data[$+4+3]=U.red})}}bit8(){if(this.compression===BmpCompression.BI_RLE8){this.data.fill(0);let m=this.bottomUp?this.height-1:0,g=0;for(;g<this.data.length;){const w=this.buffer.readUInt8(this.pos++),I=this.buffer.readUInt8(this.pos++);if(w===0){if(I===0){m+=this.bottomUp?-1:1,g=m*this.width*4;continue}if(I===1)break;if(I===2){const P=this.buffer.readUInt8(this.pos++),F=this.buffer.readUInt8(this.pos++);m+=this.bottomUp?-F:F,g+=F*this.width*4+4*P}else{for(let P=0;P<I;P++){const F=this.buffer.readUInt8(this.pos++);g=this.setPixelData(g,F)}!0&I&&this.pos++}}else for(let P=0;P<w;P++)g=this.setPixelData(g,I)}}else{const m=this.width%4,g=m!==0?4-m:0;this.scanImage(g,this.width,(w,I)=>{const P=this.buffer.readUInt8(this.pos++),F=I*this.width*4+4*w;if(P<this.palette.length){const $=this.palette[P];this.data[F]=0,this.data[F+1]=$.blue,this.data[F+2]=$.green,this.data[F+3]=$.red}else this.data[F]=0,this.data[F+1]=255,this.data[F+2]=255,this.data[F+3]=255})}}bit16(){const m=this.width%2*2;this.scanImage(m,this.width,(g,w)=>{const I=w*this.width*4+4*g,P=this.buffer.readUInt16LE(this.pos);this.pos+=2,this.data[I+this.locRed]=this.shiftRed(P),this.data[I+this.locGreen]=this.shiftGreen(P),this.data[I+this.locBlue]=this.shiftBlue(P),this.data[I+this.locAlpha]=this.shiftAlpha(P)})}bit24(){const m=this.width%4;this.scanImage(m,this.width,(g,w)=>{const I=w*this.width*4+4*g,P=this.buffer.readUInt8(this.pos++),F=this.buffer.readUInt8(this.pos++),$=this.buffer.readUInt8(this.pos++);this.data[I+this.locRed]=$,this.data[I+this.locGreen]=F,this.data[I+this.locBlue]=P,this.data[I+this.locAlpha]=0})}bit32(){this.scanImage(0,this.width,(m,g)=>{const w=g*this.width*4+4*m,I=this.readUInt32LE();this.data[w+this.locRed]=this.shiftRed(I),this.data[w+this.locGreen]=this.shiftGreen(I),this.data[w+this.locBlue]=this.shiftBlue(I),this.data[w+this.locAlpha]=this.shiftAlpha(I)})}scanImage(m=0,g=this.width,w){for(let I=this.height-1;I>=0;I--){const P=this.bottomUp?I:this.height-1-I;for(let F=0;F<g;F++)if(w.call(this,F,P)===!1)return;this.pos+=m}}readUInt32LE(){const m=this.buffer.readUInt32LE(this.pos);return this.pos+=4,m}setPixelData(m,g){const{blue:w,green:I,red:P}=this.palette[g];return this.data[m+this.locAlpha]=0,this.data[m+1+this.locBlue]=w,this.data[m+2+this.locGreen]=I,this.data[m+3+this.locRed]=P,m+4}}function createInteger(d){return d.reduce((m,g)=>m<<1|g,0)}function createColor(d){return d.quad<<24|d.red<<16|d.green<<8|d.blue}class BmpEncoder{constructor(m){fe(this,"fileSize");fe(this,"reserved1");fe(this,"reserved2");fe(this,"offset");fe(this,"width");fe(this,"flag");fe(this,"height");fe(this,"planes");fe(this,"bitPP");fe(this,"compress");fe(this,"hr");fe(this,"vr");fe(this,"colors");fe(this,"importantColors");fe(this,"rawSize");fe(this,"headerSize");fe(this,"data");fe(this,"palette");fe(this,"extraBytes");fe(this,"buffer");fe(this,"bytesInColor");fe(this,"pos");switch(this.buffer=m.data,this.width=m.width,this.height=m.height,this.headerSize=HeaderTypes$1.BITMAP_INFO_HEADER,this.flag="BM",this.bitPP=m.bitPP||24,this.offset=54,this.reserved1=m.reserved1||0,this.reserved2=m.reserved2||0,this.planes=1,this.compress=0,this.hr=m.hr||0,this.vr=m.vr||0,this.importantColors=m.importantColors||0,this.colors=Math.min(2**(this.bitPP-1||1),m.colors||1/0),this.palette=m.palette||[],this.colors&&this.bitPP<16?this.offset+=4*this.colors:this.colors=0,this.bitPP){case 32:this.bytesInColor=4;break;case 16:this.bytesInColor=2;break;case 8:this.bytesInColor=1;break;case 4:this.bytesInColor=.5;break;case 1:this.bytesInColor=1/8;break;default:this.bytesInColor=3,this.bitPP=24}const g=this.width*this.bitPP/32,w=Math.ceil(g);this.extraBytes=4*(w-g),this.rawSize=this.height*w*4+2,this.fileSize=this.rawSize+this.offset,this.data=Buffer$1.alloc(this.fileSize,1),this.pos=0,this.encode()}encode(){switch(this.pos=0,this.writeHeader(),this.bitPP){case 32:this.bit32();break;case 16:this.bit16();break;case 8:this.bit8();break;case 4:this.bit4();break;case 1:this.bit1();break;default:this.bit24()}}writeHeader(){this.data.write(this.flag,this.pos,2),this.pos+=2,this.writeUInt32LE(this.fileSize),this.writeUInt32LE(this.reserved1<<16|this.reserved2),this.writeUInt32LE(this.offset),this.writeUInt32LE(this.headerSize),this.writeUInt32LE(this.width),this.writeUInt32LE(this.height),this.data.writeUInt16LE(this.planes,this.pos),this.pos+=2,this.data.writeUInt16LE(this.bitPP,this.pos),this.pos+=2,this.writeUInt32LE(this.compress),this.writeUInt32LE(this.rawSize),this.writeUInt32LE(this.hr),this.writeUInt32LE(this.vr),this.writeUInt32LE(this.colors),this.writeUInt32LE(this.importantColors)}bit1(){this.palette.length&&this.colors===2?this.initColors(1):(this.writeUInt32LE(16777215),this.writeUInt32LE(0)),this.pos+=1;let m=[];this.writeImage((g,w,I)=>{let P=w;P++;const F=this.buffer[P++],$=this.buffer[P++],D=.2126*this.buffer[P++]+.7152*$+.0722*F;return m.push(D>127?0:1),(I+1)%8==0?(this.data[g-1]=createInteger(m),m=[]):I===this.width-1&&m.length>0&&(this.data[g-1]=createInteger(m)<<4,m=[]),P})}bit4(){const m=this.initColors(4);let g=[];this.writeImage((w,I,P)=>{let F=I;const $=createColor({quad:this.buffer[F++],blue:this.buffer[F++],green:this.buffer[F++],red:this.buffer[F++]}),D=m.findIndex(U=>U===$);return D!==-1?g.push(D):g.push(0),(P+1)%2==0&&(this.data[w]=g[0]<<4|g[1],g=[]),F})}bit8(){const m=this.initColors(8);this.writeImage((g,w)=>{let I=w;const P=createColor({quad:this.buffer[I++],blue:this.buffer[I++],green:this.buffer[I++],red:this.buffer[I++]}),F=m.findIndex($=>$===P);return this.data[g]=F!==-1?F:0,I})}bit16(){this.writeImage((m,g)=>{let w=g+1;const I=this.buffer[w++]/8,P=this.buffer[w++]/8,F=this.buffer[w++]/8<<10|P<<5|I;return this.data[m]=255&F,this.data[m+1]=(65280&F)>>8,w})}bit24(){this.writeImage((m,g)=>{let w=g+1;return this.data[m]=this.buffer[w++],this.data[m+1]=this.buffer[w++],this.data[m+2]=this.buffer[w++],w})}bit32(){this.writeImage((m,g)=>{let w=g;return this.data[m+3]=this.buffer[w++],this.data[m]=this.buffer[w++],this.data[m+1]=this.buffer[w++],this.data[m+2]=this.buffer[w++],w})}writeImage(m){const g=this.extraBytes+this.width*this.bytesInColor;let w=0;for(let I=0;I<this.height;I++)for(let P=0;P<this.width;P++){const F=Math.floor(this.pos+(this.height-1-I)*g+P*this.bytesInColor);w=m.call(this,F,w,P,I)}}initColors(m){const g=[];if(!this.palette.length)throw new Error(`To encode ${m}-bit BMPs a pallette is needed. Please choose up to ${this.colors} colors. Colors must be 32-bit integers.`);for(let w=0;w<this.colors;w++){const I=createColor(this.palette[w]);this.writeUInt32LE(I),g.push(I)}return g}writeUInt32LE(m){this.data.writeUInt32LE(m,this.pos),this.pos+=4}}function decode$2(d,m){return new BmpDecoder(d,m)}function encode$2(d){return new BmpEncoder(d)}function _typeof(d){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},_typeof(d)}var trimLeft=/^\s+/,trimRight=/\s+$/;function tinycolor(d,m){if(m=m||{},(d=d||"")instanceof tinycolor)return d;if(!(this instanceof tinycolor))return new tinycolor(d,m);var g=inputToRGB(d);this._originalInput=d,this._r=g.r,this._g=g.g,this._b=g.b,this._a=g.a,this._roundA=Math.round(100*this._a)/100,this._format=m.format||g.format,this._gradientType=m.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=g.ok}function inputToRGB(d){var m={r:0,g:0,b:0},g=1,w=null,I=null,P=null,F=!1,$=!1;return typeof d=="string"&&(d=stringInputToObject(d)),_typeof(d)=="object"&&(isValidCSSUnit(d.r)&&isValidCSSUnit(d.g)&&isValidCSSUnit(d.b)?(m=rgbToRgb(d.r,d.g,d.b),F=!0,$=String(d.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(d.h)&&isValidCSSUnit(d.s)&&isValidCSSUnit(d.v)?(w=convertToPercentage(d.s),I=convertToPercentage(d.v),m=hsvToRgb(d.h,w,I),F=!0,$="hsv"):isValidCSSUnit(d.h)&&isValidCSSUnit(d.s)&&isValidCSSUnit(d.l)&&(w=convertToPercentage(d.s),P=convertToPercentage(d.l),m=hslToRgb(d.h,w,P),F=!0,$="hsl"),d.hasOwnProperty("a")&&(g=d.a)),g=boundAlpha(g),{ok:F,format:d.format||$,r:Math.min(255,Math.max(m.r,0)),g:Math.min(255,Math.max(m.g,0)),b:Math.min(255,Math.max(m.b,0)),a:g}}function rgbToRgb(d,m,g){return{r:255*bound01(d,255),g:255*bound01(m,255),b:255*bound01(g,255)}}function rgbToHsl(d,m,g){d=bound01(d,255),m=bound01(m,255),g=bound01(g,255);var w,I,P=Math.max(d,m,g),F=Math.min(d,m,g),$=(P+F)/2;if(P==F)w=I=0;else{var D=P-F;switch(I=$>.5?D/(2-P-F):D/(P+F),P){case d:w=(m-g)/D+(m<g?6:0);break;case m:w=(g-d)/D+2;break;case g:w=(d-m)/D+4}w/=6}return{h:w,s:I,l:$}}function hslToRgb(d,m,g){var w,I,P;function F(U,j,Z){return Z<0&&(Z+=1),Z>1&&(Z-=1),Z<1/6?U+6*(j-U)*Z:Z<.5?j:Z<2/3?U+(j-U)*(2/3-Z)*6:U}if(d=bound01(d,360),m=bound01(m,100),g=bound01(g,100),m===0)w=I=P=g;else{var $=g<.5?g*(1+m):g+m-g*m,D=2*g-$;w=F(D,$,d+1/3),I=F(D,$,d),P=F(D,$,d-1/3)}return{r:255*w,g:255*I,b:255*P}}function rgbToHsv(d,m,g){d=bound01(d,255),m=bound01(m,255),g=bound01(g,255);var w,I,P=Math.max(d,m,g),F=Math.min(d,m,g),$=P,D=P-F;if(I=P===0?0:D/P,P==F)w=0;else{switch(P){case d:w=(m-g)/D+(m<g?6:0);break;case m:w=(g-d)/D+2;break;case g:w=(d-m)/D+4}w/=6}return{h:w,s:I,v:$}}function hsvToRgb(d,m,g){d=6*bound01(d,360),m=bound01(m,100),g=bound01(g,100);var w=Math.floor(d),I=d-w,P=g*(1-m),F=g*(1-I*m),$=g*(1-(1-I)*m),D=w%6;return{r:255*[g,F,P,P,$,g][D],g:255*[$,g,g,F,P,P][D],b:255*[P,P,$,g,g,F][D]}}function rgbToHex(d,m,g,w){var I=[pad2(Math.round(d).toString(16)),pad2(Math.round(m).toString(16)),pad2(Math.round(g).toString(16))];return w&&I[0].charAt(0)==I[0].charAt(1)&&I[1].charAt(0)==I[1].charAt(1)&&I[2].charAt(0)==I[2].charAt(1)?I[0].charAt(0)+I[1].charAt(0)+I[2].charAt(0):I.join("")}function rgbaToHex(d,m,g,w,I){var P=[pad2(Math.round(d).toString(16)),pad2(Math.round(m).toString(16)),pad2(Math.round(g).toString(16)),pad2(convertDecimalToHex(w))];return I&&P[0].charAt(0)==P[0].charAt(1)&&P[1].charAt(0)==P[1].charAt(1)&&P[2].charAt(0)==P[2].charAt(1)&&P[3].charAt(0)==P[3].charAt(1)?P[0].charAt(0)+P[1].charAt(0)+P[2].charAt(0)+P[3].charAt(0):P.join("")}function rgbaToArgbHex(d,m,g,w){return[pad2(convertDecimalToHex(w)),pad2(Math.round(d).toString(16)),pad2(Math.round(m).toString(16)),pad2(Math.round(g).toString(16))].join("")}function _desaturate(d,m){m=m===0?0:m||10;var g=tinycolor(d).toHsl();return g.s-=m/100,g.s=clamp01(g.s),tinycolor(g)}function _saturate(d,m){m=m===0?0:m||10;var g=tinycolor(d).toHsl();return g.s+=m/100,g.s=clamp01(g.s),tinycolor(g)}function _greyscale(d){return tinycolor(d).desaturate(100)}function _lighten(d,m){m=m===0?0:m||10;var g=tinycolor(d).toHsl();return g.l+=m/100,g.l=clamp01(g.l),tinycolor(g)}function _brighten(d,m){m=m===0?0:m||10;var g=tinycolor(d).toRgb();return g.r=Math.max(0,Math.min(255,g.r-Math.round(-m/100*255))),g.g=Math.max(0,Math.min(255,g.g-Math.round(-m/100*255))),g.b=Math.max(0,Math.min(255,g.b-Math.round(-m/100*255))),tinycolor(g)}function _darken(d,m){m=m===0?0:m||10;var g=tinycolor(d).toHsl();return g.l-=m/100,g.l=clamp01(g.l),tinycolor(g)}function _spin(d,m){var g=tinycolor(d).toHsl(),w=(g.h+m)%360;return g.h=w<0?360+w:w,tinycolor(g)}function _complement(d){var m=tinycolor(d).toHsl();return m.h=(m.h+180)%360,tinycolor(m)}function polyad(d,m){if(isNaN(m)||m<=0)throw new Error("Argument to polyad must be a positive number");for(var g=tinycolor(d).toHsl(),w=[tinycolor(d)],I=360/m,P=1;P<m;P++)w.push(tinycolor({h:(g.h+P*I)%360,s:g.s,l:g.l}));return w}function _splitcomplement(d){var m=tinycolor(d).toHsl(),g=m.h;return[tinycolor(d),tinycolor({h:(g+72)%360,s:m.s,l:m.l}),tinycolor({h:(g+216)%360,s:m.s,l:m.l})]}function _analogous(d,m,g){m=m||6,g=g||30;var w=tinycolor(d).toHsl(),I=360/g,P=[tinycolor(d)];for(w.h=(w.h-(I*m>>1)+720)%360;--m;)w.h=(w.h+I)%360,P.push(tinycolor(w));return P}function _monochromatic(d,m){m=m||6;for(var g=tinycolor(d).toHsv(),w=g.h,I=g.s,P=g.v,F=[],$=1/m;m--;)F.push(tinycolor({h:w,s:I,v:P})),P=(P+$)%1;return F}tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var d=this.toRgb();return(299*d.r+587*d.g+114*d.b)/1e3},getLuminance:function(){var d,m,g,w=this.toRgb();return d=w.r/255,m=w.g/255,g=w.b/255,.2126*(d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4))+.7152*(m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4))+.0722*(g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4))},setAlpha:function(d){return this._a=boundAlpha(d),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var d=rgbToHsv(this._r,this._g,this._b);return{h:360*d.h,s:d.s,v:d.v,a:this._a}},toHsvString:function(){var d=rgbToHsv(this._r,this._g,this._b),m=Math.round(360*d.h),g=Math.round(100*d.s),w=Math.round(100*d.v);return this._a==1?"hsv("+m+", "+g+"%, "+w+"%)":"hsva("+m+", "+g+"%, "+w+"%, "+this._roundA+")"},toHsl:function(){var d=rgbToHsl(this._r,this._g,this._b);return{h:360*d.h,s:d.s,l:d.l,a:this._a}},toHslString:function(){var d=rgbToHsl(this._r,this._g,this._b),m=Math.round(360*d.h),g=Math.round(100*d.s),w=Math.round(100*d.l);return this._a==1?"hsl("+m+", "+g+"%, "+w+"%)":"hsla("+m+", "+g+"%, "+w+"%, "+this._roundA+")"},toHex:function(d){return rgbToHex(this._r,this._g,this._b,d)},toHexString:function(d){return"#"+this.toHex(d)},toHex8:function(d){return rgbaToHex(this._r,this._g,this._b,this._a,d)},toHex8String:function(d){return"#"+this.toHex8(d)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*bound01(this._r,255))+"%",g:Math.round(100*bound01(this._g,255))+"%",b:Math.round(100*bound01(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(100*bound01(this._r,255))+"%, "+Math.round(100*bound01(this._g,255))+"%, "+Math.round(100*bound01(this._b,255))+"%)":"rgba("+Math.round(100*bound01(this._r,255))+"%, "+Math.round(100*bound01(this._g,255))+"%, "+Math.round(100*bound01(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1)},toFilter:function(d){var m="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),g=m,w=this._gradientType?"GradientType = 1, ":"";if(d){var I=tinycolor(d);g="#"+rgbaToArgbHex(I._r,I._g,I._b,I._a)}return"progid:DXImageTransform.Microsoft.gradient("+w+"startColorstr="+m+",endColorstr="+g+")"},toString:function(d){var m=!!d;d=d||this._format;var g=!1,w=this._a<1&&this._a>=0;return m||!w||d!=="hex"&&d!=="hex6"&&d!=="hex3"&&d!=="hex4"&&d!=="hex8"&&d!=="name"?(d==="rgb"&&(g=this.toRgbString()),d==="prgb"&&(g=this.toPercentageRgbString()),d!=="hex"&&d!=="hex6"||(g=this.toHexString()),d==="hex3"&&(g=this.toHexString(!0)),d==="hex4"&&(g=this.toHex8String(!0)),d==="hex8"&&(g=this.toHex8String()),d==="name"&&(g=this.toName()),d==="hsl"&&(g=this.toHslString()),d==="hsv"&&(g=this.toHsvString()),g||this.toHexString()):d==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return tinycolor(this.toString())},_applyModification:function(d,m){var g=d.apply(null,[this].concat([].slice.call(m)));return this._r=g._r,this._g=g._g,this._b=g._b,this.setAlpha(g._a),this},lighten:function(){return this._applyModification(_lighten,arguments)},brighten:function(){return this._applyModification(_brighten,arguments)},darken:function(){return this._applyModification(_darken,arguments)},desaturate:function(){return this._applyModification(_desaturate,arguments)},saturate:function(){return this._applyModification(_saturate,arguments)},greyscale:function(){return this._applyModification(_greyscale,arguments)},spin:function(){return this._applyModification(_spin,arguments)},_applyCombination:function(d,m){return d.apply(null,[this].concat([].slice.call(m)))},analogous:function(){return this._applyCombination(_analogous,arguments)},complement:function(){return this._applyCombination(_complement,arguments)},monochromatic:function(){return this._applyCombination(_monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(_splitcomplement,arguments)},triad:function(){return this._applyCombination(polyad,[3])},tetrad:function(){return this._applyCombination(polyad,[4])}},tinycolor.fromRatio=function(d,m){if(_typeof(d)=="object"){var g={};for(var w in d)d.hasOwnProperty(w)&&(g[w]=w==="a"?d[w]:convertToPercentage(d[w]));d=g}return tinycolor(d,m)},tinycolor.equals=function(d,m){return!(!d||!m)&&tinycolor(d).toRgbString()==tinycolor(m).toRgbString()},tinycolor.random=function(){return tinycolor.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},tinycolor.mix=function(d,m,g){g=g===0?0:g||50;var w=tinycolor(d).toRgb(),I=tinycolor(m).toRgb(),P=g/100;return tinycolor({r:(I.r-w.r)*P+w.r,g:(I.g-w.g)*P+w.g,b:(I.b-w.b)*P+w.b,a:(I.a-w.a)*P+w.a})},tinycolor.readability=function(d,m){var g=tinycolor(d),w=tinycolor(m);return(Math.max(g.getLuminance(),w.getLuminance())+.05)/(Math.min(g.getLuminance(),w.getLuminance())+.05)},tinycolor.isReadable=function(d,m,g){var w,I,P=tinycolor.readability(d,m);switch(I=!1,(w=validateWCAG2Parms(g)).level+w.size){case"AAsmall":case"AAAlarge":I=P>=4.5;break;case"AAlarge":I=P>=3;break;case"AAAsmall":I=P>=7}return I},tinycolor.mostReadable=function(d,m,g){var w,I,P,F,$=null,D=0;I=(g=g||{}).includeFallbackColors,P=g.level,F=g.size;for(var U=0;U<m.length;U++)(w=tinycolor.readability(d,m[U]))>D&&(D=w,$=tinycolor(m[U]));return tinycolor.isReadable(d,$,{level:P,size:F})||!I?$:(g.includeFallbackColors=!1,tinycolor.mostReadable(d,["#fff","#000"],g))};var names$1=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=flip(names$1);function flip(d){var m={};for(var g in d)d.hasOwnProperty(g)&&(m[d[g]]=g);return m}function boundAlpha(d){return d=parseFloat(d),(isNaN(d)||d<0||d>1)&&(d=1),d}function bound01(d,m){isOnePointZero(d)&&(d="100%");var g=isPercentage(d);return d=Math.min(m,Math.max(0,parseFloat(d))),g&&(d=parseInt(d*m,10)/100),Math.abs(d-m)<1e-6?1:d%m/parseFloat(m)}function clamp01(d){return Math.min(1,Math.max(0,d))}function parseIntFromHex(d){return parseInt(d,16)}function isOnePointZero(d){return typeof d=="string"&&d.indexOf(".")!=-1&&parseFloat(d)===1}function isPercentage(d){return typeof d=="string"&&d.indexOf("%")!=-1}function pad2(d){return d.length==1?"0"+d:""+d}function convertToPercentage(d){return d<=1&&(d=100*d+"%"),d}function convertDecimalToHex(d){return Math.round(255*parseFloat(d)).toString(16)}function convertHexToDecimal(d){return parseIntFromHex(d)/255}var matchers=(CSS_UNIT="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",PERMISSIVE_MATCH3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",{CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}),CSS_UNIT,PERMISSIVE_MATCH3,PERMISSIVE_MATCH4;function isValidCSSUnit(d){return!!matchers.CSS_UNIT.exec(d)}function stringInputToObject(d){d=d.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var m,g=!1;if(names$1[d])d=names$1[d],g=!0;else if(d=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(m=matchers.rgb.exec(d))?{r:m[1],g:m[2],b:m[3]}:(m=matchers.rgba.exec(d))?{r:m[1],g:m[2],b:m[3],a:m[4]}:(m=matchers.hsl.exec(d))?{h:m[1],s:m[2],l:m[3]}:(m=matchers.hsla.exec(d))?{h:m[1],s:m[2],l:m[3],a:m[4]}:(m=matchers.hsv.exec(d))?{h:m[1],s:m[2],v:m[3]}:(m=matchers.hsva.exec(d))?{h:m[1],s:m[2],v:m[3],a:m[4]}:(m=matchers.hex8.exec(d))?{r:parseIntFromHex(m[1]),g:parseIntFromHex(m[2]),b:parseIntFromHex(m[3]),a:convertHexToDecimal(m[4]),format:g?"name":"hex8"}:(m=matchers.hex6.exec(d))?{r:parseIntFromHex(m[1]),g:parseIntFromHex(m[2]),b:parseIntFromHex(m[3]),format:g?"name":"hex"}:(m=matchers.hex4.exec(d))?{r:parseIntFromHex(m[1]+""+m[1]),g:parseIntFromHex(m[2]+""+m[2]),b:parseIntFromHex(m[3]+""+m[3]),a:convertHexToDecimal(m[4]+""+m[4]),format:g?"name":"hex8"}:!!(m=matchers.hex3.exec(d))&&{r:parseIntFromHex(m[1]+""+m[1]),g:parseIntFromHex(m[2]+""+m[2]),b:parseIntFromHex(m[3]+""+m[3]),format:g?"name":"hex"}}function validateWCAG2Parms(d){var m,g;return(m=((d=d||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&m!=="AAA"&&(m="AA"),(g=(d.size||"small").toLowerCase())!=="small"&&g!=="large"&&(g="small"),{level:m,size:g}}function clone(d){const m={width:d.bitmap.width,height:d.bitmap.height,data:Buffer$1.from(d.bitmap.data)};return new d.constructor(m)}function scan(d,m,g,w,I,P){let F,$,D,U,j;if(typeof m=="function")j=m,F=0,$=0,D=d.bitmap.width,U=d.bitmap.height;else{if(F=m,typeof g!="number")throw new Error("y must be a number");if($=g,typeof w!="number")throw new Error("w must be a number");if(D=w,typeof I!="number")throw new Error("h must be a number");if(U=I,typeof P!="function")throw new Error("cb must be a function");j=P}F=Math.round(F),$=Math.round($),D=Math.round(D),U=Math.round(U);const Z=j.bind(d);for(let G=$;G<$+U;G++)for(let H=F;H<F+D;H++)Z(H,G,d.bitmap.width*G+H<<2);return d}function*scanIterator(d,m,g,w,I){m=Math.round(m),g=Math.round(g),w=Math.round(w),I=Math.round(I);for(let P=g;P<g+I;P++)for(let F=m;F<m+w;F++){const $=d.bitmap.width*P+F<<2;yield{x:F,y:P,idx:$,image:d}}}function intToRGBA$1(d){if(typeof d!="number")throw new Error("i must be a number");const m={r:0,g:0,b:0,a:0};return m.r=Math.floor(d/Math.pow(256,3)),m.g=Math.floor((d-m.r*Math.pow(256,3))/Math.pow(256,2)),m.b=Math.floor((d-m.r*Math.pow(256,3)-m.g*Math.pow(256,2))/Math.pow(256,1)),m.a=Math.floor((d-m.r*Math.pow(256,3)-m.g*Math.pow(256,2)-m.b*Math.pow(256,1))/Math.pow(256,0)),m}function colorDiff(d,m){const g=F=>Math.pow(F,2),{max:w}=Math,I="a"in d?d.a:255,P="a"in m?m.a:255;return(w(g(d.r-m.r),g(d.r-m.r-I+P))+w(g(d.g-m.g),g(d.g-m.g-I+P))+w(g(d.b-m.b),g(d.b-m.b-I+P)))/195075}function limit255(d){return d=Math.max(d,0),d=Math.min(d,255)}function cssColorToHex(d){return typeof d=="number"?d:parseInt(tinycolor(d).toHex8(),16)}function encode$1(d,m={}){return scan({bitmap:d},0,0,d.width,d.height,function(g,w,I){const P=d.data[I+0],F=d.data[I+1],$=d.data[I+2],D=d.data[I+3];d.data[I+0]=D,d.data[I+1]=$,d.data[I+2]=F,d.data[I+3]=P}),encode$2({...d,...m}).data}function decode$1(d,m){const g=decode$2(d,m);return scan({bitmap:g},0,0,g.width,g.height,function(w,I,P){const F=g.data[P+1],$=g.data[P+2],D=g.data[P+3];g.data[P+0]=D,g.data[P+1]=$,g.data[P+2]=F,g.data[P+3]=255}),g}function msBmp(){return{mime:"image/x-ms-bmp",encode:encode$1,decode:decode$1}}function bmp(){return{mime:"image/bmp",encode:encode$1,decode:decode$1}}var omggif={},GifReader_1,GifWriter_1;function GifWriter(d,m,g,w){var I=0,P=(w=w===void 0?{}:w).loop===void 0?null:w.loop,F=w.palette===void 0?null:w.palette;if(m<=0||g<=0||m>65535||g>65535)throw new Error("Width/Height invalid.");function $(W){var Q=W.length;if(Q<2||Q>256||Q&Q-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return Q}d[I++]=71,d[I++]=73,d[I++]=70,d[I++]=56,d[I++]=57,d[I++]=97;var D=0,U=0;if(F!==null){for(var j=$(F);j>>=1;)++D;if(j=1<<D,--D,w.background!==void 0){if((U=w.background)>=j)throw new Error("Background index out of range.");if(U===0)throw new Error("Background index explicitly passed as 0.")}}if(d[I++]=255&m,d[I++]=m>>8&255,d[I++]=255&g,d[I++]=g>>8&255,d[I++]=(F!==null?128:0)|D,d[I++]=U,d[I++]=0,F!==null)for(var Z=0,G=F.length;Z<G;++Z){var H=F[Z];d[I++]=H>>16&255,d[I++]=H>>8&255,d[I++]=255&H}if(P!==null){if(P<0||P>65535)throw new Error("Loop count invalid.");d[I++]=33,d[I++]=255,d[I++]=11,d[I++]=78,d[I++]=69,d[I++]=84,d[I++]=83,d[I++]=67,d[I++]=65,d[I++]=80,d[I++]=69,d[I++]=50,d[I++]=46,d[I++]=48,d[I++]=3,d[I++]=1,d[I++]=255&P,d[I++]=P>>8&255,d[I++]=0}var q=!1;this.addFrame=function(W,Q,J,K,V,tt){if(q===!0&&(--I,q=!1),tt=tt===void 0?{}:tt,W<0||Q<0||W>65535||Q>65535)throw new Error("x/y invalid.");if(J<=0||K<=0||J>65535||K>65535)throw new Error("Width/Height invalid.");if(V.length<J*K)throw new Error("Not enough pixels for the frame size.");var X=!0,ot=tt.palette;if(ot==null&&(X=!1,ot=F),ot==null)throw new Error("Must supply either a local or global palette.");for(var it=$(ot),lt=0;it>>=1;)++lt;it=1<<lt;var at=tt.delay===void 0?0:tt.delay,ht=tt.disposal===void 0?0:tt.disposal;if(ht<0||ht>3)throw new Error("Disposal out of range.");var et=!1,ut=0;if(tt.transparent!==void 0&&tt.transparent!==null&&(et=!0,(ut=tt.transparent)<0||ut>=it))throw new Error("Transparent color index.");if((ht!==0||et||at!==0)&&(d[I++]=33,d[I++]=249,d[I++]=4,d[I++]=ht<<2|(et===!0?1:0),d[I++]=255&at,d[I++]=at>>8&255,d[I++]=ut,d[I++]=0),d[I++]=44,d[I++]=255&W,d[I++]=W>>8&255,d[I++]=255&Q,d[I++]=Q>>8&255,d[I++]=255&J,d[I++]=J>>8&255,d[I++]=255&K,d[I++]=K>>8&255,d[I++]=X===!0?128|lt-1:0,X===!0)for(var Et=0,gt=ot.length;Et<gt;++Et){var dt=ot[Et];d[I++]=dt>>16&255,d[I++]=dt>>8&255,d[I++]=255&dt}return I=GifWriterOutputLZWCodeStream(d,I,lt<2?2:lt,V)},this.end=function(){return q===!1&&(d[I++]=59,q=!0),I},this.getOutputBuffer=function(){return d},this.setOutputBuffer=function(W){d=W},this.getOutputBufferPosition=function(){return I},this.setOutputBufferPosition=function(W){I=W}}function GifWriterOutputLZWCodeStream(d,m,g,w){d[m++]=g;var I=m++,P=1<<g,F=P-1,$=P+1,D=$+1,U=g+1,j=0,Z=0;function G(X){for(;j>=X;)d[m++]=255&Z,Z>>=8,j-=8,m===I+256&&(d[I]=255,I=m++)}function H(X){Z|=X<<j,j+=U,G(8)}var q=w[0]&F,W={};H(P);for(var Q=1,J=w.length;Q<J;++Q){var K=w[Q]&F,V=q<<8|K,tt=W[V];if(tt===void 0){for(Z|=q<<j,j+=U;j>=8;)d[m++]=255&Z,Z>>=8,j-=8,m===I+256&&(d[I]=255,I=m++);D===4096?(H(P),D=$+1,U=g+1,W={}):(D>=1<<U&&++U,W[V]=D++),q=K}else q=tt}return H(q),H($),G(1),I+1===m?d[I]=0:(d[I]=m-I-1,d[m++]=0),m}function GifReader(d){var m=0;if(d[m++]!==71||d[m++]!==73||d[m++]!==70||d[m++]!==56||(d[m++]+1&253)!=56||d[m++]!==97)throw new Error("Invalid GIF 87a/89a header.");var g=d[m++]|d[m++]<<8,w=d[m++]|d[m++]<<8,I=d[m++],P=I>>7,F=1<<(7&I)+1;d[m++],d[m++];var $=null,D=null;P&&($=m,D=F,m+=3*F);var U=!0,j=[],Z=0,G=null,H=0,q=null;for(this.width=g,this.height=w;U&&m<d.length;)switch(d[m++]){case 33:switch(d[m++]){case 255:if(d[m]!==11||d[m+1]==78&&d[m+2]==69&&d[m+3]==84&&d[m+4]==83&&d[m+5]==67&&d[m+6]==65&&d[m+7]==80&&d[m+8]==69&&d[m+9]==50&&d[m+10]==46&&d[m+11]==48&&d[m+12]==3&&d[m+13]==1&&d[m+16]==0)m+=14,q=d[m++]|d[m++]<<8,m++;else for(m+=12;;){if(!((et=d[m++])>=0))throw Error("Invalid block size");if(et===0)break;m+=et}break;case 249:if(d[m++]!==4||d[m+4]!==0)throw new Error("Invalid graphics extension block.");var W=d[m++];Z=d[m++]|d[m++]<<8,G=d[m++],1&W||(G=null),H=W>>2&7,m++;break;case 254:for(;;){if(!((et=d[m++])>=0))throw Error("Invalid block size");if(et===0)break;m+=et}break;default:throw new Error("Unknown graphic control label: 0x"+d[m-1].toString(16))}break;case 44:var Q=d[m++]|d[m++]<<8,J=d[m++]|d[m++]<<8,K=d[m++]|d[m++]<<8,V=d[m++]|d[m++]<<8,tt=d[m++],X=tt>>6&1,ot=1<<(7&tt)+1,it=$,lt=D,at=!1;tt>>7&&(at=!0,it=m,lt=ot,m+=3*ot);var ht=m;for(m++;;){var et;if(!((et=d[m++])>=0))throw Error("Invalid block size");if(et===0)break;m+=et}j.push({x:Q,y:J,width:K,height:V,has_local_palette:at,palette_offset:it,palette_size:lt,data_offset:ht,data_length:m-ht,transparent_index:G,interlaced:!!X,delay:Z,disposal:H});break;case 59:U=!1;break;default:throw new Error("Unknown gif block: 0x"+d[m-1].toString(16))}this.numFrames=function(){return j.length},this.loopCount=function(){return q},this.frameInfo=function(ut){if(ut<0||ut>=j.length)throw new Error("Frame index out of range.");return j[ut]},this.decodeAndBlitFrameBGRA=function(ut,Et){var gt=this.frameInfo(ut),dt=gt.width*gt.height,yt=new Uint8Array(dt);GifReaderLZWOutputIndexStream(d,gt.data_offset,yt,dt);var Nt=gt.palette_offset,Bt=gt.transparent_index;Bt===null&&(Bt=256);var St=gt.width,zt=g-St,kt=St,Ct=4*(gt.y*g+gt.x),Ut=4*((gt.y+gt.height)*g+gt.x),Dt=Ct,Tt=4*zt;gt.interlaced===!0&&(Tt+=4*g*7);for(var Rt=8,Lt=0,Ht=yt.length;Lt<Ht;++Lt){var Wt=yt[Lt];if(kt===0&&(kt=St,(Dt+=Tt)>=Ut&&(Tt=4*zt+4*g*(Rt-1),Dt=Ct+(St+zt)*(Rt<<1),Rt>>=1)),Wt===Bt)Dt+=4;else{var Pt=d[Nt+3*Wt],nt=d[Nt+3*Wt+1],Mt=d[Nt+3*Wt+2];Et[Dt++]=Mt,Et[Dt++]=nt,Et[Dt++]=Pt,Et[Dt++]=255}--kt}},this.decodeAndBlitFrameRGBA=function(ut,Et){var gt=this.frameInfo(ut),dt=gt.width*gt.height,yt=new Uint8Array(dt);GifReaderLZWOutputIndexStream(d,gt.data_offset,yt,dt);var Nt=gt.palette_offset,Bt=gt.transparent_index;Bt===null&&(Bt=256);var St=gt.width,zt=g-St,kt=St,Ct=4*(gt.y*g+gt.x),Ut=4*((gt.y+gt.height)*g+gt.x),Dt=Ct,Tt=4*zt;gt.interlaced===!0&&(Tt+=4*g*7);for(var Rt=8,Lt=0,Ht=yt.length;Lt<Ht;++Lt){var Wt=yt[Lt];if(kt===0&&(kt=St,(Dt+=Tt)>=Ut&&(Tt=4*zt+4*g*(Rt-1),Dt=Ct+(St+zt)*(Rt<<1),Rt>>=1)),Wt===Bt)Dt+=4;else{var Pt=d[Nt+3*Wt],nt=d[Nt+3*Wt+1],Mt=d[Nt+3*Wt+2];Et[Dt++]=Pt,Et[Dt++]=nt,Et[Dt++]=Mt,Et[Dt++]=255}--kt}}}function GifReaderLZWOutputIndexStream(d,m,g,w){for(var I=d[m++],P=1<<I,F=P+1,$=F+1,D=I+1,U=(1<<D)-1,j=0,Z=0,G=0,H=d[m++],q=new Int32Array(4096),W=null;;){for(;j<16&&H!==0;)Z|=d[m++]<<j,j+=8,H===1?H=d[m++]:--H;if(j<D)break;var Q=Z&U;if(Z>>=D,j-=D,Q!==P){if(Q===F)break;for(var J=Q<$?Q:W,K=0,V=J;V>P;)V=q[V]>>8,++K;var tt=V;if(G+K+(J!==Q?1:0)>w)return void console.log("Warning, gif stream longer than expected.");g[G++]=tt;var X=G+=K;for(J!==Q&&(g[G++]=tt),V=J;K--;)V=q[V],g[--X]=255&V,V>>=8;W!==null&&$<4096&&(q[$++]=W<<8|tt,$>=U+1&&D<12&&(++D,U=U<<1|1)),W=Q}else $=F+1,U=(1<<(D=I+1))-1,W=null}return G!==w&&console.log("Warning, gif stream shorter than expected."),g}try{GifWriter_1=omggif.GifWriter=GifWriter,GifReader_1=omggif.GifReader=GifReader}catch{}let BitmapImage$2=class Ie{constructor(...m){if(m.length===0)throw new Error("constructor requires parameters");const g=m[0];if(g!==null&&typeof g=="object")if(g instanceof Ie){const w=g.bitmap;this.bitmap={width:w.width,height:w.height,data:new Buffer$1(w.width*w.height*4)},w.data.copy(this.bitmap.data)}else{if(!(g.width&&g.height&&g.data))throw new Error("unrecognized constructor parameters");this.bitmap=g}else{if(typeof g!="number"||typeof m[1]!="number")throw new Error("unrecognized constructor parameters");{const w=g,I=m[1],P=m[2];this.bitmap={width:w,height:I},Buffer$1.isBuffer(P)?this.bitmap.data=P:(this.bitmap.data=new Buffer$1(w*I*4),typeof P=="number"&&this.fillRGBA(P))}}}blit(m,g,w,I,P,F,$){if(I+F>this.bitmap.width)throw new Error("copy exceeds width of source bitmap");if(g+F>m.bitmap.width)throw new Error("copy exceeds width of target bitmap");if(P+$>this.bitmap.height)throw new Error("copy exceeds height of source bitmap");if(w+$>m.bitmap.height)throw new Erro("copy exceeds height of target bitmap");const D=this.bitmap.data,U=m.bitmap.data,j=4*this.bitmap.width,Z=4*m.bitmap.width,G=4*F;let H=P*j+4*I,q=w*Z+4*g;for(;--$>=0;)D.copy(U,q,H,H+G),H+=j,q+=Z;return this}fillRGBA(m){const g=this.bitmap.data,w=4*this.bitmap.height;let I=0;for(;I<w;)g.writeUInt32BE(m,I),I+=4;for(;I<g.length;)g.copy(g,I,0,w),I+=w;return this}getRGBA(m,g){const w=4*(g*this.bitmap.width+m);return this.bitmap.data.readUInt32BE(w)}getRGBASet(){const m=new Set,g=this.bitmap.data;for(let w=0;w<g.length;w+=4)m.add(g.readUInt32BE(w,!0));return m}greyscale(){const m=this.bitmap.data;return this.scan(0,0,this.bitmap.width,this.bitmap.height,(g,w,I)=>{const P=Math.round(.299*m[I]+.587*m[I+1]+.114*m[I+2]);m[I]=P,m[I+1]=P,m[I+2]=P}),this}reframe(m,g,w,I,P){const F=m<0?0:m,$=g<0?0:g,D=w+F>this.bitmap.width?this.bitmap.width-F:w,U=I+$>this.bitmap.height?this.bitmap.height-$:I,j=m<0?-m:0,Z=g<0?-g:0;let G;if(P===void 0){if(F!==m||$!=g||D!==w||U!==I)throw new GifError("fillRGBA required for this reframing");G=new Ie(w,I)}else G=new Ie(w,I,P);return this.blit(G,j,Z,F,$,D,U),this.bitmap=G.bitmap,this}scale(m){if(m===1)return;if(!Number.isInteger(m)||m<1)throw new Error("the scale must be an integer >= 1");const g=this.bitmap.width,w=this.bitmap.height,I=g*m*4,P=this.bitmap.data,F=new Buffer$1(w*I*m);let $,D=0,U=0;for(let j=0;j<w;++j){$=U;for(let Z=0;Z<g;++Z){const G=P.readUInt32BE(D,!0);for(let H=0;H<m;++H)F.writeUInt32BE(G,U),U+=4;D+=4}for(let Z=1;Z<m;++Z)F.copy(F,U,$,U),U+=I,$+=I}return this.bitmap={width:g*m,height:w*m,data:F},this}scanAllCoords(m){const g=this.bitmap.width,w=this.bitmap.data.length;let I=0,P=0;for(let F=0;F<w;F+=4)m(I,P,F),++I===g&&(I=0,++P)}scanAllIndexes(m){const g=this.bitmap.data.length;for(let w=0;w<g;w+=4)m(w)}};var bitmapimage=BitmapImage$2,gif$1={};let Gif$1=class{constructor(d,m,g){this.width=g.width,this.height=g.height,this.loops=g.loops,this.usesTransparency=g.usesTransparency,this.colorScope=g.colorScope,this.frames=m,this.buffer=d}};Gif$1.GlobalColorsPreferred=0,Gif$1.GlobalColorsOnly=1,Gif$1.LocalColorsOnly=2;let GifError$2=class extends Error{constructor(d){super(d),d instanceof Error&&(this.stack="Gif"+d.stack)}};gif$1.Gif=Gif$1,gif$1.GifError=GifError$2;var gifcodec={},gifutil={},_polyfillNode_fs={},_polyfillNode_fs$1=Object.freeze({__proto__:null,default:_polyfillNode_fs}),require$$0=getAugmentedNamespace(_polyfillNode_fs$1),__defProp$3=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__defNormalProp$3=(d,m,g)=>m in d?__defProp$3(d,m,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[m]=g,__markAsModule=d=>__defProp$3(d,"__esModule",{value:!0}),__export$1=(d,m)=>{for(var g in m)__defProp$3(d,g,{get:m[g],enumerable:!0})},__reExport=(d,m,g,w)=>{if(m&&typeof m=="object"||typeof m=="function")for(let I of __getOwnPropNames(m))!__hasOwnProp.call(d,I)&&g&&__defProp$3(d,I,{get:()=>m[I],enumerable:!(w=__getOwnPropDesc(m,I))||w.enumerable});return d},__toCommonJS=(d=>(m,g)=>d&&d.get(m)||(g=__reExport(__markAsModule({}),m,1),d&&d.set(m,g),g))(typeof WeakMap<"u"?new WeakMap:0),__publicField$3=(d,m,g)=>(__defNormalProp$3(d,typeof m!="symbol"?m+"":m,g),g),src_exports={};__export$1(src_exports,{applyPalette:()=>applyPalette,applyPaletteSync:()=>applyPaletteSync$1,buildPalette:()=>buildPalette,buildPaletteSync:()=>buildPaletteSync$1,constants:()=>constants_exports$1,conversion:()=>conversion_exports$1,distance:()=>distance_exports$1,image:()=>image_exports$1,palette:()=>palette_exports$1,quality:()=>quality_exports$1,utils:()=>utils_exports$1});var constants_exports$1={};__export$1(constants_exports$1,{bt709:()=>bt709_exports$1});var bt709_exports$1={};__export$1(bt709_exports$1,{Y:()=>Y$1,x:()=>x$2,y:()=>y$2});var Y$1=(d=>(d[d.RED=.2126]="RED",d[d.GREEN=.7152]="GREEN",d[d.BLUE=.0722]="BLUE",d[d.WHITE=1]="WHITE",d))(Y$1||{}),x$2=(d=>(d[d.RED=.64]="RED",d[d.GREEN=.3]="GREEN",d[d.BLUE=.15]="BLUE",d[d.WHITE=.3127]="WHITE",d))(x$2||{}),y$2=(d=>(d[d.RED=.33]="RED",d[d.GREEN=.6]="GREEN",d[d.BLUE=.06]="BLUE",d[d.WHITE=.329]="WHITE",d))(y$2||{}),conversion_exports$1={};function correctGamma$1(d){return d>.04045?((d+.055)/1.055)**2.4:d/12.92}function rgb2xyz$1(d,m,g){return{x:.4124*(d=correctGamma$1(d/255))+.3576*(m=correctGamma$1(m/255))+.1805*(g=correctGamma$1(g/255)),y:.2126*d+.7152*m+.0722*g,z:.0193*d+.1192*m+.9505*g}}__export$1(conversion_exports$1,{lab2rgb:()=>lab2rgb$1,lab2xyz:()=>lab2xyz$1,rgb2hsl:()=>rgb2hsl$1,rgb2lab:()=>rgb2lab$1,rgb2xyz:()=>rgb2xyz$1,xyz2lab:()=>xyz2lab$1,xyz2rgb:()=>xyz2rgb$1});var arithmetic_exports$1={};function degrees2radians$1(d){return d*(Math.PI/180)}function max3$1(d,m,g){let w=d;return w<m&&(w=m),w<g&&(w=g),w}function min3$1(d,m,g){let w=d;return w>m&&(w=m),w>g&&(w=g),w}function intInRange$1(d,m,g){return d>g&&(d=g),d<m&&(d=m),0|d}function inRange0to255Rounded$1(d){return(d=Math.round(d))>255?d=255:d<0&&(d=0),d}function inRange0to255$1(d){return d>255?d=255:d<0&&(d=0),d}function stableSort$1(d,m){const g=typeof d[0];let w;if(g==="number"||g==="string"){const I=Object.create(null);for(let P=0,F=d.length;P<F;P++){const $=d[P];I[$]||I[$]===0||(I[$]=P)}w=d.sort((P,F)=>m(P,F)||I[P]-I[F])}else{const I=d.slice(0);w=d.sort((P,F)=>m(P,F)||I.indexOf(P)-I.indexOf(F))}return w}function rgb2hsl$1(d,m,g){const w=min3$1(d,m,g),I=max3$1(d,m,g),P=I-w,F=(w+I)/510;let $=0;F>0&&F<1&&($=P/(F<.5?I+w:510-I-w));let D=0;return P>0&&(D=I===d?(m-g)/P:I===m?2+(g-d)/P:4+(d-m)/P,D*=60,D<0&&(D+=360)),{h:D,s:$,l:F}}__export$1(arithmetic_exports$1,{degrees2radians:()=>degrees2radians$1,inRange0to255:()=>inRange0to255$1,inRange0to255Rounded:()=>inRange0to255Rounded$1,intInRange:()=>intInRange$1,max3:()=>max3$1,min3:()=>min3$1,stableSort:()=>stableSort$1});var refX$1=.95047,refY$1=1,refZ$1=1.08883;function pivot$1(d){return d>.008856?d**(1/3):7.787*d+16/116}function xyz2lab$1(d,m,g){if(d=pivot$1(d/refX$1),m=pivot$1(m/refY$1),g=pivot$1(g/refZ$1),116*m-16<0)throw new Error("xxx");return{L:Math.max(0,116*m-16),a:500*(d-m),b:200*(m-g)}}function rgb2lab$1(d,m,g){const w=rgb2xyz$1(d,m,g);return xyz2lab$1(w.x,w.y,w.z)}var refX2$1=.95047,refY2$1=1,refZ2$1=1.08883;function pivot2$1(d){return d>.206893034?d**3:(d-16/116)/7.787}function lab2xyz$1(d,m,g){const w=(d+16)/116,I=w-g/200;return{x:refX2$1*pivot2$1(m/500+w),y:refY2$1*pivot2$1(w),z:refZ2$1*pivot2$1(I)}}function correctGamma2$1(d){return d>.0031308?1.055*d**(1/2.4)-.055:12.92*d}function xyz2rgb$1(d,m,g){const w=correctGamma2$1(3.2406*d+-1.5372*m+-.4986*g),I=correctGamma2$1(-.9689*d+1.8758*m+.0415*g),P=correctGamma2$1(.0557*d+-.204*m+1.057*g);return{r:inRange0to255Rounded$1(255*w),g:inRange0to255Rounded$1(255*I),b:inRange0to255Rounded$1(255*P)}}function lab2rgb$1(d,m,g){const w=lab2xyz$1(d,m,g);return xyz2rgb$1(w.x,w.y,w.z)}var distance_exports$1={};__export$1(distance_exports$1,{AbstractDistanceCalculator:()=>AbstractDistanceCalculator$1,AbstractEuclidean:()=>AbstractEuclidean$1,AbstractManhattan:()=>AbstractManhattan$1,CIE94GraphicArts:()=>CIE94GraphicArts$1,CIE94Textiles:()=>CIE94Textiles$1,CIEDE2000:()=>CIEDE2000$1,CMetric:()=>CMetric$1,Euclidean:()=>Euclidean$1,EuclideanBT709:()=>EuclideanBT709$1,EuclideanBT709NoAlpha:()=>EuclideanBT709NoAlpha$1,Manhattan:()=>Manhattan$1,ManhattanBT709:()=>ManhattanBT709$1,ManhattanNommyde:()=>ManhattanNommyde$1,PNGQuant:()=>PNGQuant$1});var AbstractDistanceCalculator$1=class{constructor(){__publicField$3(this,"_maxDistance"),__publicField$3(this,"_whitePoint"),this._setDefaults(),this.setWhitePoint(255,255,255,255)}setWhitePoint(d,m,g,w){this._whitePoint={r:d>0?255/d:0,g:m>0?255/m:0,b:g>0?255/g:0,a:w>0?255/w:0},this._maxDistance=this.calculateRaw(d,m,g,w,0,0,0,0)}calculateNormalized(d,m){return this.calculateRaw(d.r,d.g,d.b,d.a,m.r,m.g,m.b,m.a)/this._maxDistance}},AbstractCIE94$1=class extends AbstractDistanceCalculator$1{calculateRaw(d,m,g,w,I,P,F,$){const D=rgb2lab$1(inRange0to255$1(d*this._whitePoint.r),inRange0to255$1(m*this._whitePoint.g),inRange0to255$1(g*this._whitePoint.b)),U=rgb2lab$1(inRange0to255$1(I*this._whitePoint.r),inRange0to255$1(P*this._whitePoint.g),inRange0to255$1(F*this._whitePoint.b)),j=D.L-U.L,Z=D.a-U.a,G=D.b-U.b,H=Math.sqrt(D.a*D.a+D.b*D.b),q=H-Math.sqrt(U.a*U.a+U.b*U.b);let W=Z*Z+G*G-q*q;W=W<0?0:Math.sqrt(W);const Q=($-w)*this._whitePoint.a*this._kA;return Math.sqrt((j/this._Kl)**2+(q/(1+this._K1*H))**2+(W/(1+this._K2*H))**2+Q**2)}},CIE94Textiles$1=class extends AbstractCIE94$1{_setDefaults(){this._Kl=2,this._K1=.048,this._K2=.014,this._kA=12.5/255}},CIE94GraphicArts$1=class extends AbstractCIE94$1{_setDefaults(){this._Kl=1,this._K1=.045,this._K2=.015,this._kA=25/255}},_CIEDE2000$1=class extends AbstractDistanceCalculator$1{_setDefaults(){}static _calculatehp(d,m){const g=Math.atan2(d,m);return g>=0?g:g+_CIEDE2000$1._deg360InRad}static _calculateRT(d,m){const g=m**7,w=2*Math.sqrt(g/(g+_CIEDE2000$1._pow25to7)),I=_CIEDE2000$1._deg30InRad*Math.exp(-(((d-_CIEDE2000$1._deg275InRad)/_CIEDE2000$1._deg25InRad)**2));return-Math.sin(2*I)*w}static _calculateT(d){return 1-.17*Math.cos(d-_CIEDE2000$1._deg30InRad)+.24*Math.cos(2*d)+.32*Math.cos(3*d+_CIEDE2000$1._deg6InRad)-.2*Math.cos(4*d-_CIEDE2000$1._deg63InRad)}static _calculate_ahp(d,m,g,w){const I=g+w;return d===0?I:m<=_CIEDE2000$1._deg180InRad?I/2:I<_CIEDE2000$1._deg360InRad?(I+_CIEDE2000$1._deg360InRad)/2:(I-_CIEDE2000$1._deg360InRad)/2}static _calculate_dHp(d,m,g,w){let I;return I=d===0?0:m<=_CIEDE2000$1._deg180InRad?g-w:g<=w?g-w+_CIEDE2000$1._deg360InRad:g-w-_CIEDE2000$1._deg360InRad,2*Math.sqrt(d)*Math.sin(I/2)}calculateRaw(d,m,g,w,I,P,F,$){const D=rgb2lab$1(inRange0to255$1(d*this._whitePoint.r),inRange0to255$1(m*this._whitePoint.g),inRange0to255$1(g*this._whitePoint.b)),U=rgb2lab$1(inRange0to255$1(I*this._whitePoint.r),inRange0to255$1(P*this._whitePoint.g),inRange0to255$1(F*this._whitePoint.b)),j=($-w)*this._whitePoint.a*_CIEDE2000$1._kA,Z=this.calculateRawInLab(D,U);return Math.sqrt(Z+j*j)}calculateRawInLab(d,m){const g=d.L,w=d.a,I=d.b,P=m.L,F=m.a,$=m.b,D=((Math.sqrt(w*w+I*I)+Math.sqrt(F*F+$*$))/2)**7,U=.5*(1-Math.sqrt(D/(D+_CIEDE2000$1._pow25to7))),j=(1+U)*w,Z=(1+U)*F,G=Math.sqrt(j*j+I*I),H=Math.sqrt(Z*Z+$*$),q=G*H,W=_CIEDE2000$1._calculatehp(I,j),Q=_CIEDE2000$1._calculatehp($,Z),J=Math.abs(W-Q),K=P-g,V=H-G,tt=_CIEDE2000$1._calculate_dHp(q,J,Q,W),X=_CIEDE2000$1._calculate_ahp(q,J,W,Q),ot=(G+H)/2,it=((g+P)/2-50)**2,lt=V/(1+.045*ot),at=tt/(1+.015*_CIEDE2000$1._calculateT(X)*ot);return(K/(1+.015*it/Math.sqrt(20+it)))**2+lt**2+at**2+_CIEDE2000$1._calculateRT(X,ot)*lt*at}},CIEDE2000$1=_CIEDE2000$1;__publicField$3(CIEDE2000$1,"_kA",25/255),__publicField$3(CIEDE2000$1,"_pow25to7",25**7),__publicField$3(CIEDE2000$1,"_deg360InRad",degrees2radians$1(360)),__publicField$3(CIEDE2000$1,"_deg180InRad",degrees2radians$1(180)),__publicField$3(CIEDE2000$1,"_deg30InRad",degrees2radians$1(30)),__publicField$3(CIEDE2000$1,"_deg6InRad",degrees2radians$1(6)),__publicField$3(CIEDE2000$1,"_deg63InRad",degrees2radians$1(63)),__publicField$3(CIEDE2000$1,"_deg275InRad",degrees2radians$1(275)),__publicField$3(CIEDE2000$1,"_deg25InRad",degrees2radians$1(25));var CMetric$1=class extends AbstractDistanceCalculator$1{calculateRaw(d,m,g,w,I,P,F,$){const D=(d+I)/2*this._whitePoint.r,U=(d-I)*this._whitePoint.r,j=(m-P)*this._whitePoint.g,Z=(g-F)*this._whitePoint.b,G=((512+D)*U*U>>8)+4*j*j+((767-D)*Z*Z>>8),H=($-w)*this._whitePoint.a;return Math.sqrt(G+H*H)}_setDefaults(){}},AbstractEuclidean$1=class extends AbstractDistanceCalculator$1{calculateRaw(d,m,g,w,I,P,F,$){const D=I-d,U=P-m,j=F-g,Z=$-w;return Math.sqrt(this._kR*D*D+this._kG*U*U+this._kB*j*j+this._kA*Z*Z)}},Euclidean$1=class extends AbstractEuclidean$1{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},EuclideanBT709$1=class extends AbstractEuclidean$1{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},EuclideanBT709NoAlpha$1=class extends AbstractEuclidean$1{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=0}},AbstractManhattan$1=class extends AbstractDistanceCalculator$1{calculateRaw(d,m,g,w,I,P,F,$){let D=I-d,U=P-m,j=F-g,Z=$-w;return D<0&&(D=0-D),U<0&&(U=0-U),j<0&&(j=0-j),Z<0&&(Z=0-Z),this._kR*D+this._kG*U+this._kB*j+this._kA*Z}},Manhattan$1=class extends AbstractManhattan$1{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},ManhattanNommyde$1=class extends AbstractManhattan$1{_setDefaults(){this._kR=.4984,this._kG=.8625,this._kB=.2979,this._kA=1}},ManhattanBT709$1=class extends AbstractManhattan$1{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},PNGQuant$1=class extends AbstractDistanceCalculator$1{calculateRaw(d,m,g,w,I,P,F,$){const D=($-w)*this._whitePoint.a;return this._colordifferenceCh(d*this._whitePoint.r,I*this._whitePoint.r,D)+this._colordifferenceCh(m*this._whitePoint.g,P*this._whitePoint.g,D)+this._colordifferenceCh(g*this._whitePoint.b,F*this._whitePoint.b,D)}_colordifferenceCh(d,m,g){const w=d-m,I=w+g;return w*w+I*I}_setDefaults(){}},palette_exports$1={};__export$1(palette_exports$1,{AbstractPaletteQuantizer:()=>AbstractPaletteQuantizer$1,ColorHistogram:()=>ColorHistogram$1,NeuQuant:()=>NeuQuant$1,NeuQuantFloat:()=>NeuQuantFloat$1,RGBQuant:()=>RGBQuant$1,WuColorCube:()=>WuColorCube$1,WuQuant:()=>WuQuant$1});var AbstractPaletteQuantizer$1=class{quantizeSync(){for(const d of this.quantize())if(d.palette)return d.palette;throw new Error("unreachable")}},Point$1=class{constructor(){__publicField$3(this,"r"),__publicField$3(this,"g"),__publicField$3(this,"b"),__publicField$3(this,"a"),__publicField$3(this,"uint32"),__publicField$3(this,"rgba"),this.uint32=-1>>>0,this.r=this.g=this.b=this.a=0,this.rgba=new Array(4),this.rgba[0]=0,this.rgba[1]=0,this.rgba[2]=0,this.rgba[3]=0}static createByQuadruplet(d){const m=new Point$1;return m.r=0|d[0],m.g=0|d[1],m.b=0|d[2],m.a=0|d[3],m._loadUINT32(),m._loadQuadruplet(),m}static createByRGBA(d,m,g,w){const I=new Point$1;return I.r=0|d,I.g=0|m,I.b=0|g,I.a=0|w,I._loadUINT32(),I._loadQuadruplet(),I}static createByUint32(d){const m=new Point$1;return m.uint32=d>>>0,m._loadRGBA(),m._loadQuadruplet(),m}from(d){this.r=d.r,this.g=d.g,this.b=d.b,this.a=d.a,this.uint32=d.uint32,this.rgba[0]=d.r,this.rgba[1]=d.g,this.rgba[2]=d.b,this.rgba[3]=d.a}getLuminosity(d){let m=this.r,g=this.g,w=this.b;return d&&(m=Math.min(255,255-this.a+this.a*m/255),g=Math.min(255,255-this.a+this.a*g/255),w=Math.min(255,255-this.a+this.a*w/255)),.2126*m+.7152*g+.0722*w}_loadUINT32(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0}_loadRGBA(){this.r=255&this.uint32,this.g=this.uint32>>>8&255,this.b=this.uint32>>>16&255,this.a=this.uint32>>>24&255}_loadQuadruplet(){this.rgba[0]=this.r,this.rgba[1]=this.g,this.rgba[2]=this.b,this.rgba[3]=this.a}},PointContainer$1=class{constructor(){__publicField$3(this,"_pointArray"),__publicField$3(this,"_width"),__publicField$3(this,"_height"),this._width=0,this._height=0,this._pointArray=[]}getWidth(){return this._width}getHeight(){return this._height}setWidth(d){this._width=d}setHeight(d){this._height=d}getPointArray(){return this._pointArray}clone(){const d=new PointContainer$1;d._width=this._width,d._height=this._height;for(let m=0,g=this._pointArray.length;m<g;m++)d._pointArray[m]=Point$1.createByUint32(0|this._pointArray[m].uint32);return d}toUint32Array(){const d=this._pointArray.length,m=new Uint32Array(d);for(let g=0;g<d;g++)m[g]=this._pointArray[g].uint32;return m}toUint8Array(){return new Uint8Array(this.toUint32Array().buffer)}static fromHTMLImageElement(d){const m=d.naturalWidth,g=d.naturalHeight,w=document.createElement("canvas");return w.width=m,w.height=g,w.getContext("2d").drawImage(d,0,0,m,g,0,0,m,g),PointContainer$1.fromHTMLCanvasElement(w)}static fromHTMLCanvasElement(d){const m=d.width,g=d.height,w=d.getContext("2d").getImageData(0,0,m,g);return PointContainer$1.fromImageData(w)}static fromImageData(d){const m=d.width,g=d.height;return PointContainer$1.fromUint8Array(d.data,m,g)}static fromUint8Array(d,m,g){switch(Object.prototype.toString.call(d)){case"[object Uint8ClampedArray]":case"[object Uint8Array]":break;default:d=new Uint8Array(d)}const w=new Uint32Array(d.buffer);return PointContainer$1.fromUint32Array(w,m,g)}static fromUint32Array(d,m,g){const w=new PointContainer$1;w._width=m,w._height=g;for(let I=0,P=d.length;I<P;I++)w._pointArray[I]=Point$1.createByUint32(0|d[I]);return w}static fromBuffer(d,m,g){const w=new Uint32Array(d.buffer,d.byteOffset,d.byteLength/Uint32Array.BYTES_PER_ELEMENT);return PointContainer$1.fromUint32Array(w,m,g)}},hueGroups$1=10;function hueGroup$1(d,m){const g=360/m;for(let w=1,I=g-g/2;w<m;w++,I+=g)if(d>=I&&d<I+g)return w;return 0}var Palette$1=class{constructor(){__publicField$3(this,"_pointContainer"),__publicField$3(this,"_pointArray",[]),__publicField$3(this,"_i32idx",{}),this._pointContainer=new PointContainer$1,this._pointContainer.setHeight(1),this._pointArray=this._pointContainer.getPointArray()}add(d){this._pointArray.push(d),this._pointContainer.setWidth(this._pointArray.length)}has(d){for(let m=this._pointArray.length-1;m>=0;m--)if(d.uint32===this._pointArray[m].uint32)return!0;return!1}getNearestColor(d,m){return this._pointArray[0|this._getNearestIndex(d,m)]}getPointContainer(){return this._pointContainer}_nearestPointFromCache(d){return typeof this._i32idx[d]=="number"?this._i32idx[d]:-1}_getNearestIndex(d,m){let g=this._nearestPointFromCache(""+m.uint32);if(g>=0)return g;let w=Number.MAX_VALUE;g=0;for(let I=0,P=this._pointArray.length;I<P;I++){const F=this._pointArray[I],$=d.calculateRaw(m.r,m.g,m.b,m.a,F.r,F.g,F.b,F.a);$<w&&(w=$,g=I)}return this._i32idx[m.uint32]=g,g}sort(){this._i32idx={},this._pointArray.sort((d,m)=>{const g=rgb2hsl$1(d.r,d.g,d.b),w=rgb2hsl$1(m.r,m.g,m.b),I=d.r===d.g&&d.g===d.b?0:1+hueGroup$1(g.h,hueGroups$1),P=(m.r===m.g&&m.g===m.b?0:1+hueGroup$1(w.h,hueGroups$1))-I;if(P)return-P;const F=d.getLuminosity(!0),$=m.getLuminosity(!0);if($-F!=0)return $-F;const D=(100*w.s|0)-(100*g.s|0);return D?-D:0})}},utils_exports$1={};__export$1(utils_exports$1,{HueStatistics:()=>HueStatistics$1,Palette:()=>Palette$1,Point:()=>Point$1,PointContainer:()=>PointContainer$1,ProgressTracker:()=>ProgressTracker$1,arithmetic:()=>arithmetic_exports$1});var HueGroup$1=class{constructor(){__publicField$3(this,"num",0),__publicField$3(this,"cols",[])}},HueStatistics$1=class{constructor(d,m){__publicField$3(this,"_numGroups"),__publicField$3(this,"_minCols"),__publicField$3(this,"_stats"),__publicField$3(this,"_groupsFull"),this._numGroups=d,this._minCols=m,this._stats=[];for(let g=0;g<=d;g++)this._stats[g]=new HueGroup$1;this._groupsFull=0}check(d){this._groupsFull===this._numGroups+1&&(this.check=()=>{});const m=255&d,g=d>>>8&255,w=d>>>16&255,I=m===g&&g===w?0:1+hueGroup$1(rgb2hsl$1(m,g,w).h,this._numGroups),P=this._stats[I],F=this._minCols;P.num++,P.num>F||(P.num===F&&this._groupsFull++,P.num<=F&&this._stats[I].cols.push(d))}injectIntoDictionary(d){for(let m=0;m<=this._numGroups;m++)this._stats[m].num<=this._minCols&&this._stats[m].cols.forEach(g=>{d[g]?d[g]++:d[g]=1})}injectIntoArray(d){for(let m=0;m<=this._numGroups;m++)this._stats[m].num<=this._minCols&&this._stats[m].cols.forEach(g=>{d.indexOf(g)===-1&&d.push(g)})}},_ProgressTracker$1=class{constructor(d,m){__publicField$3(this,"progress"),__publicField$3(this,"_step"),__publicField$3(this,"_range"),__publicField$3(this,"_last"),__publicField$3(this,"_progressRange"),this._range=d,this._progressRange=m,this._step=Math.max(1,this._range/(_ProgressTracker$1.steps+1)|0),this._last=-this._step,this.progress=0}shouldNotify(d){return d-this._last>=this._step&&(this._last=d,this.progress=Math.min(this._progressRange*this._last/this._range,this._progressRange),!0)}},ProgressTracker$1=_ProgressTracker$1;__publicField$3(ProgressTracker$1,"steps",100);var networkBiasShift$1=3,Neuron$1=class{constructor(d){__publicField$3(this,"r"),__publicField$3(this,"g"),__publicField$3(this,"b"),__publicField$3(this,"a"),this.r=this.g=this.b=this.a=d}toPoint(){return Point$1.createByRGBA(this.r>>networkBiasShift$1,this.g>>networkBiasShift$1,this.b>>networkBiasShift$1,this.a>>networkBiasShift$1)}subtract(d,m,g,w){this.r-=0|d,this.g-=0|m,this.b-=0|g,this.a-=0|w}},_NeuQuant$1=class extends AbstractPaletteQuantizer$1{constructor(d,m=256){super(),__publicField$3(this,"_pointArray"),__publicField$3(this,"_networkSize"),__publicField$3(this,"_network"),__publicField$3(this,"_sampleFactor"),__publicField$3(this,"_radPower"),__publicField$3(this,"_freq"),__publicField$3(this,"_bias"),__publicField$3(this,"_distance"),this._distance=d,this._pointArray=[],this._sampleFactor=1,this._networkSize=m,this._distance.setWhitePoint(255<<networkBiasShift$1,255<<networkBiasShift$1,255<<networkBiasShift$1,255<<networkBiasShift$1)}sample(d){this._pointArray=this._pointArray.concat(d.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let d=0;d<this._networkSize;d++)this._network[d]=new Neuron$1((d<<networkBiasShift$1+8)/this._networkSize|0),this._freq[d]=_NeuQuant$1._initialBias/this._networkSize|0,this._bias[d]=0}*_learn(){let d=this._sampleFactor;const m=this._pointArray.length;m<_NeuQuant$1._minpicturebytes&&(d=1);const g=30+(d-1)/3|0,w=m/d|0;let I,P=w/_NeuQuant$1._nCycles|0,F=_NeuQuant$1._initAlpha,$=(this._networkSize>>3)*_NeuQuant$1._radiusBias,D=$>>_NeuQuant$1._radiusBiasShift;D<=1&&(D=0);for(let j=0;j<D;j++)this._radPower[j]=F*((D*D-j*j)*_NeuQuant$1._radBias/(D*D))>>>0;I=m<_NeuQuant$1._minpicturebytes?1:m%_NeuQuant$1._prime1!=0?_NeuQuant$1._prime1:m%_NeuQuant$1._prime2!=0?_NeuQuant$1._prime2:m%_NeuQuant$1._prime3!=0?_NeuQuant$1._prime3:_NeuQuant$1._prime4;const U=new ProgressTracker$1(w,99);for(let j=0,Z=0;j<w;){U.shouldNotify(j)&&(yield{progress:U.progress});const G=this._pointArray[Z],H=G.b<<networkBiasShift$1,q=G.g<<networkBiasShift$1,W=G.r<<networkBiasShift$1,Q=G.a<<networkBiasShift$1,J=this._contest(H,q,W,Q);if(this._alterSingle(F,J,H,q,W,Q),D!==0&&this._alterNeighbour(D,J,H,q,W,Q),Z+=I,Z>=m&&(Z-=m),j++,P===0&&(P=1),j%P==0){F-=F/g|0,$-=$/_NeuQuant$1._radiusDecrease|0,D=$>>_NeuQuant$1._radiusBiasShift,D<=1&&(D=0);for(let K=0;K<D;K++)this._radPower[K]=F*((D*D-K*K)*_NeuQuant$1._radBias/(D*D))>>>0}}}_buildPalette(){const d=new Palette$1;return this._network.forEach(m=>{d.add(m.toPoint())}),d.sort(),d}_alterNeighbour(d,m,g,w,I,P){let F=m-d;F<-1&&(F=-1);let $=m+d;$>this._networkSize&&($=this._networkSize);let D=m+1,U=m-1,j=1;for(;D<$||U>F;){const Z=this._radPower[j++]/_NeuQuant$1._alphaRadBias;if(D<$){const G=this._network[D++];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}if(U>F){const G=this._network[U--];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}}}_alterSingle(d,m,g,w,I,P){d/=_NeuQuant$1._initAlpha;const F=this._network[m];F.subtract(d*(F.r-I),d*(F.g-w),d*(F.b-g),d*(F.a-P))}_contest(d,m,g,w){const I=1020<<networkBiasShift$1;let P=2147483647,F=P,$=-1,D=$;for(let U=0;U<this._networkSize;U++){const j=this._network[U],Z=this._distance.calculateNormalized(j,{r:g,g:m,b:d,a:w})*I|0;Z<P&&(P=Z,$=U);const G=Z-(this._bias[U]>>_NeuQuant$1._initialBiasShift-networkBiasShift$1);G<F&&(F=G,D=U);const H=this._freq[U]>>_NeuQuant$1._betaShift;this._freq[U]-=H,this._bias[U]+=H<<_NeuQuant$1._gammaShift}return this._freq[$]+=_NeuQuant$1._beta,this._bias[$]-=_NeuQuant$1._betaGamma,D}},NeuQuant$1=_NeuQuant$1;__publicField$3(NeuQuant$1,"_prime1",499),__publicField$3(NeuQuant$1,"_prime2",491),__publicField$3(NeuQuant$1,"_prime3",487),__publicField$3(NeuQuant$1,"_prime4",503),__publicField$3(NeuQuant$1,"_minpicturebytes",_NeuQuant$1._prime4),__publicField$3(NeuQuant$1,"_nCycles",100),__publicField$3(NeuQuant$1,"_initialBiasShift",16),__publicField$3(NeuQuant$1,"_initialBias",1<<_NeuQuant$1._initialBiasShift),__publicField$3(NeuQuant$1,"_gammaShift",10),__publicField$3(NeuQuant$1,"_betaShift",10),__publicField$3(NeuQuant$1,"_beta",_NeuQuant$1._initialBias>>_NeuQuant$1._betaShift),__publicField$3(NeuQuant$1,"_betaGamma",_NeuQuant$1._initialBias<<_NeuQuant$1._gammaShift-_NeuQuant$1._betaShift),__publicField$3(NeuQuant$1,"_radiusBiasShift",6),__publicField$3(NeuQuant$1,"_radiusBias",1<<_NeuQuant$1._radiusBiasShift),__publicField$3(NeuQuant$1,"_radiusDecrease",30),__publicField$3(NeuQuant$1,"_alphaBiasShift",10),__publicField$3(NeuQuant$1,"_initAlpha",1<<_NeuQuant$1._alphaBiasShift),__publicField$3(NeuQuant$1,"_radBiasShift",8),__publicField$3(NeuQuant$1,"_radBias",1<<_NeuQuant$1._radBiasShift),__publicField$3(NeuQuant$1,"_alphaRadBiasShift",_NeuQuant$1._alphaBiasShift+_NeuQuant$1._radBiasShift),__publicField$3(NeuQuant$1,"_alphaRadBias",1<<_NeuQuant$1._alphaRadBiasShift);var networkBiasShift2$1=3,NeuronFloat$1=class{constructor(d){__publicField$3(this,"r"),__publicField$3(this,"g"),__publicField$3(this,"b"),__publicField$3(this,"a"),this.r=this.g=this.b=this.a=d}toPoint(){return Point$1.createByRGBA(this.r>>networkBiasShift2$1,this.g>>networkBiasShift2$1,this.b>>networkBiasShift2$1,this.a>>networkBiasShift2$1)}subtract(d,m,g,w){this.r-=d,this.g-=m,this.b-=g,this.a-=w}},_NeuQuantFloat$1=class extends AbstractPaletteQuantizer$1{constructor(d,m=256){super(),__publicField$3(this,"_pointArray"),__publicField$3(this,"_networkSize"),__publicField$3(this,"_network"),__publicField$3(this,"_sampleFactor"),__publicField$3(this,"_radPower"),__publicField$3(this,"_freq"),__publicField$3(this,"_bias"),__publicField$3(this,"_distance"),this._distance=d,this._pointArray=[],this._sampleFactor=1,this._networkSize=m,this._distance.setWhitePoint(255<<networkBiasShift2$1,255<<networkBiasShift2$1,255<<networkBiasShift2$1,255<<networkBiasShift2$1)}sample(d){this._pointArray=this._pointArray.concat(d.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let d=0;d<this._networkSize;d++)this._network[d]=new NeuronFloat$1((d<<networkBiasShift2$1+8)/this._networkSize),this._freq[d]=_NeuQuantFloat$1._initialBias/this._networkSize,this._bias[d]=0}*_learn(){let d=this._sampleFactor;const m=this._pointArray.length;m<_NeuQuantFloat$1._minpicturebytes&&(d=1);const g=30+(d-1)/3,w=m/d;let I,P=w/_NeuQuantFloat$1._nCycles|0,F=_NeuQuantFloat$1._initAlpha,$=(this._networkSize>>3)*_NeuQuantFloat$1._radiusBias,D=$>>_NeuQuantFloat$1._radiusBiasShift;D<=1&&(D=0);for(let j=0;j<D;j++)this._radPower[j]=F*((D*D-j*j)*_NeuQuantFloat$1._radBias/(D*D));I=m<_NeuQuantFloat$1._minpicturebytes?1:m%_NeuQuantFloat$1._prime1!=0?_NeuQuantFloat$1._prime1:m%_NeuQuantFloat$1._prime2!=0?_NeuQuantFloat$1._prime2:m%_NeuQuantFloat$1._prime3!=0?_NeuQuantFloat$1._prime3:_NeuQuantFloat$1._prime4;const U=new ProgressTracker$1(w,99);for(let j=0,Z=0;j<w;){U.shouldNotify(j)&&(yield{progress:U.progress});const G=this._pointArray[Z],H=G.b<<networkBiasShift2$1,q=G.g<<networkBiasShift2$1,W=G.r<<networkBiasShift2$1,Q=G.a<<networkBiasShift2$1,J=this._contest(H,q,W,Q);if(this._alterSingle(F,J,H,q,W,Q),D!==0&&this._alterNeighbour(D,J,H,q,W,Q),Z+=I,Z>=m&&(Z-=m),j++,P===0&&(P=1),j%P==0){F-=F/g,$-=$/_NeuQuantFloat$1._radiusDecrease,D=$>>_NeuQuantFloat$1._radiusBiasShift,D<=1&&(D=0);for(let K=0;K<D;K++)this._radPower[K]=F*((D*D-K*K)*_NeuQuantFloat$1._radBias/(D*D))}}}_buildPalette(){const d=new Palette$1;return this._network.forEach(m=>{d.add(m.toPoint())}),d.sort(),d}_alterNeighbour(d,m,g,w,I,P){let F=m-d;F<-1&&(F=-1);let $=m+d;$>this._networkSize&&($=this._networkSize);let D=m+1,U=m-1,j=1;for(;D<$||U>F;){const Z=this._radPower[j++]/_NeuQuantFloat$1._alphaRadBias;if(D<$){const G=this._network[D++];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}if(U>F){const G=this._network[U--];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}}}_alterSingle(d,m,g,w,I,P){d/=_NeuQuantFloat$1._initAlpha;const F=this._network[m];F.subtract(d*(F.r-I),d*(F.g-w),d*(F.b-g),d*(F.a-P))}_contest(d,m,g,w){const I=1020<<networkBiasShift2$1;let P=2147483647,F=P,$=-1,D=$;for(let U=0;U<this._networkSize;U++){const j=this._network[U],Z=this._distance.calculateNormalized(j,{r:g,g:m,b:d,a:w})*I;Z<P&&(P=Z,$=U);const G=Z-(this._bias[U]>>_NeuQuantFloat$1._initialBiasShift-networkBiasShift2$1);G<F&&(F=G,D=U);const H=this._freq[U]>>_NeuQuantFloat$1._betaShift;this._freq[U]-=H,this._bias[U]+=H<<_NeuQuantFloat$1._gammaShift}return this._freq[$]+=_NeuQuantFloat$1._beta,this._bias[$]-=_NeuQuantFloat$1._betaGamma,D}},NeuQuantFloat$1=_NeuQuantFloat$1;__publicField$3(NeuQuantFloat$1,"_prime1",499),__publicField$3(NeuQuantFloat$1,"_prime2",491),__publicField$3(NeuQuantFloat$1,"_prime3",487),__publicField$3(NeuQuantFloat$1,"_prime4",503),__publicField$3(NeuQuantFloat$1,"_minpicturebytes",_NeuQuantFloat$1._prime4),__publicField$3(NeuQuantFloat$1,"_nCycles",100),__publicField$3(NeuQuantFloat$1,"_initialBiasShift",16),__publicField$3(NeuQuantFloat$1,"_initialBias",1<<_NeuQuantFloat$1._initialBiasShift),__publicField$3(NeuQuantFloat$1,"_gammaShift",10),__publicField$3(NeuQuantFloat$1,"_betaShift",10),__publicField$3(NeuQuantFloat$1,"_beta",_NeuQuantFloat$1._initialBias>>_NeuQuantFloat$1._betaShift),__publicField$3(NeuQuantFloat$1,"_betaGamma",_NeuQuantFloat$1._initialBias<<_NeuQuantFloat$1._gammaShift-_NeuQuantFloat$1._betaShift),__publicField$3(NeuQuantFloat$1,"_radiusBiasShift",6),__publicField$3(NeuQuantFloat$1,"_radiusBias",1<<_NeuQuantFloat$1._radiusBiasShift),__publicField$3(NeuQuantFloat$1,"_radiusDecrease",30),__publicField$3(NeuQuantFloat$1,"_alphaBiasShift",10),__publicField$3(NeuQuantFloat$1,"_initAlpha",1<<_NeuQuantFloat$1._alphaBiasShift),__publicField$3(NeuQuantFloat$1,"_radBiasShift",8),__publicField$3(NeuQuantFloat$1,"_radBias",1<<_NeuQuantFloat$1._radBiasShift),__publicField$3(NeuQuantFloat$1,"_alphaRadBiasShift",_NeuQuantFloat$1._alphaBiasShift+_NeuQuantFloat$1._radBiasShift),__publicField$3(NeuQuantFloat$1,"_alphaRadBias",1<<_NeuQuantFloat$1._alphaRadBiasShift);var _ColorHistogram$1=class{constructor(d,m){__publicField$3(this,"_method"),__publicField$3(this,"_hueStats"),__publicField$3(this,"_histogram"),__publicField$3(this,"_initColors"),__publicField$3(this,"_minHueCols"),this._method=d,this._minHueCols=m<<2,this._initColors=m<<2,this._hueStats=new HueStatistics$1(_ColorHistogram$1._hueGroups,this._minHueCols),this._histogram=Object.create(null)}sample(d){switch(this._method){case 1:this._colorStats1D(d);break;case 2:this._colorStats2D(d)}}getImportanceSortedColorsIDXI32(){const d=stableSort$1(Object.keys(this._histogram),(g,w)=>this._histogram[w]-this._histogram[g]);if(d.length===0)return[];let m;switch(this._method){case 1:const g=Math.min(d.length,this._initColors),w=d[g-1],I=this._histogram[w];m=d.slice(0,g);let P=g;const F=d.length;for(;P<F&&this._histogram[d[P]]===I;)m.push(d[P++]);this._hueStats.injectIntoArray(m);break;case 2:m=d;break;default:throw new Error("Incorrect method")}return m.map(g=>+g)}_colorStats1D(d){const m=this._histogram,g=d.getPointArray(),w=g.length;for(let I=0;I<w;I++){const P=g[I].uint32;this._hueStats.check(P),P in m?m[P]++:m[P]=1}}_colorStats2D(d){const m=d.getWidth(),g=d.getHeight(),w=d.getPointArray(),I=_ColorHistogram$1._boxSize[0],P=_ColorHistogram$1._boxSize[1],F=I*P,$=this._makeBoxes(m,g,I,P),D=this._histogram;$.forEach(U=>{let j=Math.round(U.w*U.h/F)*_ColorHistogram$1._boxPixels;j<2&&(j=2);const Z={};this._iterateBox(U,m,G=>{const H=w[G].uint32;this._hueStats.check(H),H in D?D[H]++:H in Z?++Z[H]>=j&&(D[H]=Z[H]):Z[H]=1})}),this._hueStats.injectIntoDictionary(D)}_iterateBox(d,m,g){const w=d,I=w.y*m+w.x,P=(w.y+w.h-1)*m+(w.x+w.w-1),F=m-w.w+1;let $=0,D=I;do g.call(this,D),D+=++$%w.w==0?F:1;while(D<=P)}_makeBoxes(d,m,g,w){const I=d%g,P=m%w,F=d-I,$=m-P,D=[];for(let U=0;U<m;U+=w)for(let j=0;j<d;j+=g)D.push({x:j,y:U,w:j===F?I:g,h:U===$?P:w});return D}},ColorHistogram$1=_ColorHistogram$1;__publicField$3(ColorHistogram$1,"_boxSize",[64,64]),__publicField$3(ColorHistogram$1,"_boxPixels",2),__publicField$3(ColorHistogram$1,"_hueGroups",10);var RemovedColor$1=class{constructor(d,m,g){__publicField$3(this,"index"),__publicField$3(this,"color"),__publicField$3(this,"distance"),this.index=d,this.color=m,this.distance=g}},RGBQuant$1=class extends AbstractPaletteQuantizer$1{constructor(d,m=256,g=2){super(),__publicField$3(this,"_colors"),__publicField$3(this,"_initialDistance"),__publicField$3(this,"_distanceIncrement"),__publicField$3(this,"_histogram"),__publicField$3(this,"_distance"),this._distance=d,this._colors=m,this._histogram=new ColorHistogram$1(g,m),this._initialDistance=.01,this._distanceIncrement=.005}sample(d){this._histogram.sample(d)}*quantize(){const d=this._histogram.getImportanceSortedColorsIDXI32();if(d.length===0)throw new Error("No colors in image");yield*this._buildPalette(d)}*_buildPalette(d){const m=new Palette$1,g=m.getPointContainer().getPointArray(),w=new Array(d.length);for(let j=0;j<d.length;j++)g.push(Point$1.createByUint32(d[j])),w[j]=1;const I=g.length,P=[];let F=I,$=this._initialDistance;const D=new ProgressTracker$1(F-this._colors,99);for(;F>this._colors;){P.length=0;for(let j=0;j<I;j++){if(D.shouldNotify(I-F)&&(yield{progress:D.progress}),w[j]===0)continue;const Z=g[j];for(let G=j+1;G<I;G++){if(w[G]===0)continue;const H=g[G],q=this._distance.calculateNormalized(Z,H);q<$&&(P.push(new RemovedColor$1(G,H,q)),w[G]=0,F--)}}$+=F>3*this._colors?this._initialDistance:this._distanceIncrement}if(F<this._colors){stableSort$1(P,(Z,G)=>G.distance-Z.distance);let j=0;for(;F<this._colors&&j<P.length;)w[P[j].index]=1,F++,j++}let U=g.length;for(let j=U-1;j>=0;j--)w[j]===0&&(j!==U-1&&(g[j]=g[U-1]),--U);g.length=U,m.sort(),yield{palette:m,progress:100}}};function createArray1D$1(d){const m=[];for(let g=0;g<d;g++)m[g]=0;return m}function createArray4D$1(d,m,g,w){const I=new Array(d);for(let P=0;P<d;P++){I[P]=new Array(m);for(let F=0;F<m;F++){I[P][F]=new Array(g);for(let $=0;$<g;$++){I[P][F][$]=new Array(w);for(let D=0;D<w;D++)I[P][F][$][D]=0}}}return I}function createArray3D$1(d,m,g){const w=new Array(d);for(let I=0;I<d;I++){w[I]=new Array(m);for(let P=0;P<m;P++){w[I][P]=new Array(g);for(let F=0;F<g;F++)w[I][P][F]=0}}return w}function fillArray3D$1(d,m,g,w,I){for(let P=0;P<m;P++){d[P]=[];for(let F=0;F<g;F++){d[P][F]=[];for(let $=0;$<w;$++)d[P][F][$]=I}}}function fillArray1D$1(d,m,g){for(let w=0;w<m;w++)d[w]=g}var WuColorCube$1=class{constructor(){__publicField$3(this,"redMinimum"),__publicField$3(this,"redMaximum"),__publicField$3(this,"greenMinimum"),__publicField$3(this,"greenMaximum"),__publicField$3(this,"blueMinimum"),__publicField$3(this,"blueMaximum"),__publicField$3(this,"volume"),__publicField$3(this,"alphaMinimum"),__publicField$3(this,"alphaMaximum")}},_WuQuant$1=class extends AbstractPaletteQuantizer$1{constructor(d,m=256,g=5){super(),__publicField$3(this,"_reds"),__publicField$3(this,"_greens"),__publicField$3(this,"_blues"),__publicField$3(this,"_alphas"),__publicField$3(this,"_sums"),__publicField$3(this,"_weights"),__publicField$3(this,"_momentsRed"),__publicField$3(this,"_momentsGreen"),__publicField$3(this,"_momentsBlue"),__publicField$3(this,"_momentsAlpha"),__publicField$3(this,"_moments"),__publicField$3(this,"_table"),__publicField$3(this,"_pixels"),__publicField$3(this,"_cubes"),__publicField$3(this,"_colors"),__publicField$3(this,"_significantBitsPerChannel"),__publicField$3(this,"_maxSideIndex"),__publicField$3(this,"_alphaMaxSideIndex"),__publicField$3(this,"_sideSize"),__publicField$3(this,"_alphaSideSize"),__publicField$3(this,"_distance"),this._distance=d,this._setQuality(g),this._initialize(m)}sample(d){const m=d.getPointArray();for(let g=0,w=m.length;g<w;g++)this._addColor(m[g]);this._pixels=this._pixels.concat(m)}*quantize(){yield*this._preparePalette();const d=new Palette$1;for(let m=0;m<this._colors;m++)if(this._sums[m]>0){const g=this._sums[m],w=this._reds[m]/g,I=this._greens[m]/g,P=this._blues[m]/g,F=this._alphas[m]/g,$=Point$1.createByRGBA(0|w,0|I,0|P,0|F);d.add($)}d.sort(),yield{palette:d,progress:100}}*_preparePalette(){yield*this._calculateMoments();let d=0;const m=createArray1D$1(this._colors);for(let F=1;F<this._colors;++F){this._cut(this._cubes[d],this._cubes[F])?(m[d]=this._cubes[d].volume>1?this._calculateVariance(this._cubes[d]):0,m[F]=this._cubes[F].volume>1?this._calculateVariance(this._cubes[F]):0):(m[d]=0,F--),d=0;let $=m[0];for(let D=1;D<=F;++D)m[D]>$&&($=m[D],d=D);if($<=0){this._colors=F+1;break}}const g=[],w=[],I=[],P=[];for(let F=0;F<this._colors;++F){const $=_WuQuant$1._volume(this._cubes[F],this._weights);$>0?(g[F]=_WuQuant$1._volume(this._cubes[F],this._momentsRed)/$|0,w[F]=_WuQuant$1._volume(this._cubes[F],this._momentsGreen)/$|0,I[F]=_WuQuant$1._volume(this._cubes[F],this._momentsBlue)/$|0,P[F]=_WuQuant$1._volume(this._cubes[F],this._momentsAlpha)/$|0):(g[F]=0,w[F]=0,I[F]=0,P[F]=0)}this._reds=createArray1D$1(this._colors+1),this._greens=createArray1D$1(this._colors+1),this._blues=createArray1D$1(this._colors+1),this._alphas=createArray1D$1(this._colors+1),this._sums=createArray1D$1(this._colors+1);for(let F=0,$=this._pixels.length;F<$;F++){const D=this._pixels[F];let U=-1,j=Number.MAX_VALUE;for(let Z=0;Z<this._colors;Z++){const G=g[Z],H=w[Z],q=I[Z],W=P[Z],Q=this._distance.calculateRaw(G,H,q,W,D.r,D.g,D.b,D.a);Q<j&&(j=Q,U=Z)}this._reds[U]+=D.r,this._greens[U]+=D.g,this._blues[U]+=D.b,this._alphas[U]+=D.a,this._sums[U]++}}_addColor(d){const m=8-this._significantBitsPerChannel,g=1+(d.r>>m),w=1+(d.g>>m),I=1+(d.b>>m),P=1+(d.a>>m);this._weights[P][g][w][I]++,this._momentsRed[P][g][w][I]+=d.r,this._momentsGreen[P][g][w][I]+=d.g,this._momentsBlue[P][g][w][I]+=d.b,this._momentsAlpha[P][g][w][I]+=d.a,this._moments[P][g][w][I]+=this._table[d.r]+this._table[d.g]+this._table[d.b]+this._table[d.a]}*_calculateMoments(){const d=[],m=[],g=[],w=[],I=[],P=[],F=createArray3D$1(this._sideSize,this._sideSize,this._sideSize),$=createArray3D$1(this._sideSize,this._sideSize,this._sideSize),D=createArray3D$1(this._sideSize,this._sideSize,this._sideSize),U=createArray3D$1(this._sideSize,this._sideSize,this._sideSize),j=createArray3D$1(this._sideSize,this._sideSize,this._sideSize),Z=createArray3D$1(this._sideSize,this._sideSize,this._sideSize);let G=0;const H=new ProgressTracker$1(this._alphaMaxSideIndex*this._maxSideIndex,99);for(let q=1;q<=this._alphaMaxSideIndex;++q){fillArray3D$1(F,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D$1($,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D$1(D,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D$1(U,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D$1(j,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D$1(Z,this._sideSize,this._sideSize,this._sideSize,0);for(let W=1;W<=this._maxSideIndex;++W,++G){H.shouldNotify(G)&&(yield{progress:H.progress}),fillArray1D$1(d,this._sideSize,0),fillArray1D$1(m,this._sideSize,0),fillArray1D$1(g,this._sideSize,0),fillArray1D$1(w,this._sideSize,0),fillArray1D$1(I,this._sideSize,0),fillArray1D$1(P,this._sideSize,0);for(let Q=1;Q<=this._maxSideIndex;++Q){let J=0,K=0,V=0,tt=0,X=0,ot=0;for(let it=1;it<=this._maxSideIndex;++it)J+=this._weights[q][W][Q][it],K+=this._momentsRed[q][W][Q][it],V+=this._momentsGreen[q][W][Q][it],tt+=this._momentsBlue[q][W][Q][it],X+=this._momentsAlpha[q][W][Q][it],ot+=this._moments[q][W][Q][it],d[it]+=J,m[it]+=K,g[it]+=V,w[it]+=tt,I[it]+=X,P[it]+=ot,F[W][Q][it]=F[W-1][Q][it]+d[it],$[W][Q][it]=$[W-1][Q][it]+m[it],D[W][Q][it]=D[W-1][Q][it]+g[it],U[W][Q][it]=U[W-1][Q][it]+w[it],j[W][Q][it]=j[W-1][Q][it]+I[it],Z[W][Q][it]=Z[W-1][Q][it]+P[it],this._weights[q][W][Q][it]=this._weights[q-1][W][Q][it]+F[W][Q][it],this._momentsRed[q][W][Q][it]=this._momentsRed[q-1][W][Q][it]+$[W][Q][it],this._momentsGreen[q][W][Q][it]=this._momentsGreen[q-1][W][Q][it]+D[W][Q][it],this._momentsBlue[q][W][Q][it]=this._momentsBlue[q-1][W][Q][it]+U[W][Q][it],this._momentsAlpha[q][W][Q][it]=this._momentsAlpha[q-1][W][Q][it]+j[W][Q][it],this._moments[q][W][Q][it]=this._moments[q-1][W][Q][it]+Z[W][Q][it]}}}}static _volumeFloat(d,m){return m[d.alphaMaximum][d.redMaximum][d.greenMaximum][d.blueMaximum]-m[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMaximum]-m[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMaximum]+m[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMaximum]-m[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMaximum]+m[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMaximum]+m[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMaximum]-m[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(m[d.alphaMaximum][d.redMaximum][d.greenMaximum][d.blueMinimum]-m[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMinimum]-m[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMinimum]+m[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]-m[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMinimum]+m[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]+m[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]-m[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum])}static _volume(d,m){return 0|_WuQuant$1._volumeFloat(d,m)}static _top(d,m,g,w){let I;switch(m){case _WuQuant$1._alpha:I=w[g][d.redMaximum][d.greenMaximum][d.blueMaximum]-w[g][d.redMaximum][d.greenMinimum][d.blueMaximum]-w[g][d.redMinimum][d.greenMaximum][d.blueMaximum]+w[g][d.redMinimum][d.greenMinimum][d.blueMaximum]-(w[g][d.redMaximum][d.greenMaximum][d.blueMinimum]-w[g][d.redMaximum][d.greenMinimum][d.blueMinimum]-w[g][d.redMinimum][d.greenMaximum][d.blueMinimum]+w[g][d.redMinimum][d.greenMinimum][d.blueMinimum]);break;case _WuQuant$1._red:I=w[d.alphaMaximum][g][d.greenMaximum][d.blueMaximum]-w[d.alphaMaximum][g][d.greenMinimum][d.blueMaximum]-w[d.alphaMinimum][g][d.greenMaximum][d.blueMaximum]+w[d.alphaMinimum][g][d.greenMinimum][d.blueMaximum]-(w[d.alphaMaximum][g][d.greenMaximum][d.blueMinimum]-w[d.alphaMaximum][g][d.greenMinimum][d.blueMinimum]-w[d.alphaMinimum][g][d.greenMaximum][d.blueMinimum]+w[d.alphaMinimum][g][d.greenMinimum][d.blueMinimum]);break;case _WuQuant$1._green:I=w[d.alphaMaximum][d.redMaximum][g][d.blueMaximum]-w[d.alphaMaximum][d.redMinimum][g][d.blueMaximum]-w[d.alphaMinimum][d.redMaximum][g][d.blueMaximum]+w[d.alphaMinimum][d.redMinimum][g][d.blueMaximum]-(w[d.alphaMaximum][d.redMaximum][g][d.blueMinimum]-w[d.alphaMaximum][d.redMinimum][g][d.blueMinimum]-w[d.alphaMinimum][d.redMaximum][g][d.blueMinimum]+w[d.alphaMinimum][d.redMinimum][g][d.blueMinimum]);break;case _WuQuant$1._blue:I=w[d.alphaMaximum][d.redMaximum][d.greenMaximum][g]-w[d.alphaMaximum][d.redMaximum][d.greenMinimum][g]-w[d.alphaMaximum][d.redMinimum][d.greenMaximum][g]+w[d.alphaMaximum][d.redMinimum][d.greenMinimum][g]-(w[d.alphaMinimum][d.redMaximum][d.greenMaximum][g]-w[d.alphaMinimum][d.redMaximum][d.greenMinimum][g]-w[d.alphaMinimum][d.redMinimum][d.greenMaximum][g]+w[d.alphaMinimum][d.redMinimum][d.greenMinimum][g]);break;default:throw new Error("impossible")}return 0|I}static _bottom(d,m,g){switch(m){case _WuQuant$1._alpha:return-g[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMaximum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMaximum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMaximum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(-g[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMinimum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);case _WuQuant$1._red:return-g[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMaximum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMaximum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMaximum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(-g[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMinimum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);case _WuQuant$1._green:return-g[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMaximum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMaximum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMaximum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(-g[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);case _WuQuant$1._blue:return-g[d.alphaMaximum][d.redMaximum][d.greenMaximum][d.blueMinimum]+g[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]-(-g[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMinimum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);default:return 0}}_calculateVariance(d){const m=_WuQuant$1._volume(d,this._momentsRed),g=_WuQuant$1._volume(d,this._momentsGreen),w=_WuQuant$1._volume(d,this._momentsBlue),I=_WuQuant$1._volume(d,this._momentsAlpha);return _WuQuant$1._volumeFloat(d,this._moments)-(m*m+g*g+w*w+I*I)/_WuQuant$1._volume(d,this._weights)}_maximize(d,m,g,w,I,P,F,$,D){const U=0|_WuQuant$1._bottom(d,m,this._momentsRed),j=0|_WuQuant$1._bottom(d,m,this._momentsGreen),Z=0|_WuQuant$1._bottom(d,m,this._momentsBlue),G=0|_WuQuant$1._bottom(d,m,this._momentsAlpha),H=0|_WuQuant$1._bottom(d,m,this._weights);let q=0,W=-1;for(let Q=g;Q<w;++Q){let J=U+_WuQuant$1._top(d,m,Q,this._momentsRed),K=j+_WuQuant$1._top(d,m,Q,this._momentsGreen),V=Z+_WuQuant$1._top(d,m,Q,this._momentsBlue),tt=G+_WuQuant$1._top(d,m,Q,this._momentsAlpha),X=H+_WuQuant$1._top(d,m,Q,this._weights);if(X!==0){let ot=J*J+K*K+V*V+tt*tt,it=ot/X;J=I-J,K=P-K,V=F-V,tt=$-tt,X=D-X,X!==0&&(ot=J*J+K*K+V*V+tt*tt,it+=ot/X,it>q&&(q=it,W=Q))}}return{max:q,position:W}}_cut(d,m){let g;const w=_WuQuant$1._volume(d,this._momentsRed),I=_WuQuant$1._volume(d,this._momentsGreen),P=_WuQuant$1._volume(d,this._momentsBlue),F=_WuQuant$1._volume(d,this._momentsAlpha),$=_WuQuant$1._volume(d,this._weights),D=this._maximize(d,_WuQuant$1._red,d.redMinimum+1,d.redMaximum,w,I,P,F,$),U=this._maximize(d,_WuQuant$1._green,d.greenMinimum+1,d.greenMaximum,w,I,P,F,$),j=this._maximize(d,_WuQuant$1._blue,d.blueMinimum+1,d.blueMaximum,w,I,P,F,$),Z=this._maximize(d,_WuQuant$1._alpha,d.alphaMinimum+1,d.alphaMaximum,w,I,P,F,$);if(Z.max>=D.max&&Z.max>=U.max&&Z.max>=j.max){if(g=_WuQuant$1._alpha,Z.position<0)return!1}else g=D.max>=Z.max&&D.max>=U.max&&D.max>=j.max?_WuQuant$1._red:U.max>=Z.max&&U.max>=D.max&&U.max>=j.max?_WuQuant$1._green:_WuQuant$1._blue;switch(m.redMaximum=d.redMaximum,m.greenMaximum=d.greenMaximum,m.blueMaximum=d.blueMaximum,m.alphaMaximum=d.alphaMaximum,g){case _WuQuant$1._red:m.redMinimum=d.redMaximum=D.position,m.greenMinimum=d.greenMinimum,m.blueMinimum=d.blueMinimum,m.alphaMinimum=d.alphaMinimum;break;case _WuQuant$1._green:m.greenMinimum=d.greenMaximum=U.position,m.redMinimum=d.redMinimum,m.blueMinimum=d.blueMinimum,m.alphaMinimum=d.alphaMinimum;break;case _WuQuant$1._blue:m.blueMinimum=d.blueMaximum=j.position,m.redMinimum=d.redMinimum,m.greenMinimum=d.greenMinimum,m.alphaMinimum=d.alphaMinimum;break;case _WuQuant$1._alpha:m.alphaMinimum=d.alphaMaximum=Z.position,m.blueMinimum=d.blueMinimum,m.redMinimum=d.redMinimum,m.greenMinimum=d.greenMinimum}return d.volume=(d.redMaximum-d.redMinimum)*(d.greenMaximum-d.greenMinimum)*(d.blueMaximum-d.blueMinimum)*(d.alphaMaximum-d.alphaMinimum),m.volume=(m.redMaximum-m.redMinimum)*(m.greenMaximum-m.greenMinimum)*(m.blueMaximum-m.blueMinimum)*(m.alphaMaximum-m.alphaMinimum),!0}_initialize(d){this._colors=d,this._cubes=[];for(let m=0;m<d;m++)this._cubes[m]=new WuColorCube$1;this._cubes[0].redMinimum=0,this._cubes[0].greenMinimum=0,this._cubes[0].blueMinimum=0,this._cubes[0].alphaMinimum=0,this._cubes[0].redMaximum=this._maxSideIndex,this._cubes[0].greenMaximum=this._maxSideIndex,this._cubes[0].blueMaximum=this._maxSideIndex,this._cubes[0].alphaMaximum=this._alphaMaxSideIndex,this._weights=createArray4D$1(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsRed=createArray4D$1(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsGreen=createArray4D$1(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsBlue=createArray4D$1(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsAlpha=createArray4D$1(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._moments=createArray4D$1(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._table=[];for(let m=0;m<256;++m)this._table[m]=m*m;this._pixels=[]}_setQuality(d=5){this._significantBitsPerChannel=d,this._maxSideIndex=1<<this._significantBitsPerChannel,this._alphaMaxSideIndex=this._maxSideIndex,this._sideSize=this._maxSideIndex+1,this._alphaSideSize=this._alphaMaxSideIndex+1}},WuQuant$1=_WuQuant$1;__publicField$3(WuQuant$1,"_alpha",3),__publicField$3(WuQuant$1,"_red",2),__publicField$3(WuQuant$1,"_green",1),__publicField$3(WuQuant$1,"_blue",0);var image_exports$1={};__export$1(image_exports$1,{AbstractImageQuantizer:()=>AbstractImageQuantizer$1,ErrorDiffusionArray:()=>ErrorDiffusionArray$1,ErrorDiffusionArrayKernel:()=>ErrorDiffusionArrayKernel$1,ErrorDiffusionRiemersma:()=>ErrorDiffusionRiemersma$1,NearestColor:()=>NearestColor$1});var AbstractImageQuantizer$1=class{quantizeSync(d,m){for(const g of this.quantize(d,m))if(g.pointContainer)return g.pointContainer;throw new Error("unreachable")}},NearestColor$1=class extends AbstractImageQuantizer$1{constructor(d){super(),__publicField$3(this,"_distance"),this._distance=d}*quantize(d,m){const g=d.getPointArray(),w=d.getWidth(),I=d.getHeight(),P=new ProgressTracker$1(I,99);for(let F=0;F<I;F++){P.shouldNotify(F)&&(yield{progress:P.progress});for(let $=0,D=F*w;$<w;$++,D++){const U=g[D];U.from(m.getNearestColor(this._distance,U))}}yield{pointContainer:d,progress:100}}},ErrorDiffusionArrayKernel$1=(d=>(d[d.FloydSteinberg=0]="FloydSteinberg",d[d.FalseFloydSteinberg=1]="FalseFloydSteinberg",d[d.Stucki=2]="Stucki",d[d.Atkinson=3]="Atkinson",d[d.Jarvis=4]="Jarvis",d[d.Burkes=5]="Burkes",d[d.Sierra=6]="Sierra",d[d.TwoSierra=7]="TwoSierra",d[d.SierraLite=8]="SierraLite",d))(ErrorDiffusionArrayKernel$1||{}),ErrorDiffusionArray$1=class extends AbstractImageQuantizer$1{constructor(d,m,g=!0,w=0,I=!1){super(),__publicField$3(this,"_minColorDistance"),__publicField$3(this,"_serpentine"),__publicField$3(this,"_kernel"),__publicField$3(this,"_calculateErrorLikeGIMP"),__publicField$3(this,"_distance"),this._setKernel(m),this._distance=d,this._minColorDistance=w,this._serpentine=g,this._calculateErrorLikeGIMP=I}*quantize(d,m){const g=d.getPointArray(),w=new Point$1,I=d.getWidth(),P=d.getHeight(),F=[];let $=1,D=1;for(const j of this._kernel){const Z=j[2]+1;D<Z&&(D=Z)}for(let j=0;j<D;j++)this._fillErrorLine(F[j]=[],I);const U=new ProgressTracker$1(P,99);for(let j=0;j<P;j++){U.shouldNotify(j)&&(yield{progress:U.progress}),this._serpentine&&($*=-1);const Z=j*I,G=$===1?0:I-1,H=$===1?I:-1;this._fillErrorLine(F[0],I),F.push(F.shift());const q=F[0];for(let W=G,Q=Z+G;W!==H;W+=$,Q+=$){const J=g[Q],K=q[W];w.from(J);const V=Point$1.createByRGBA(inRange0to255Rounded$1(J.r+K[0]),inRange0to255Rounded$1(J.g+K[1]),inRange0to255Rounded$1(J.b+K[2]),inRange0to255Rounded$1(J.a+K[3])),tt=m.getNearestColor(this._distance,V);if(J.from(tt),this._minColorDistance&&this._distance.calculateNormalized(w,tt)<this._minColorDistance)continue;let X,ot,it,lt;this._calculateErrorLikeGIMP?(X=V.r-tt.r,ot=V.g-tt.g,it=V.b-tt.b,lt=V.a-tt.a):(X=w.r-tt.r,ot=w.g-tt.g,it=w.b-tt.b,lt=w.a-tt.a);const at=$===1?0:this._kernel.length-1,ht=$===1?this._kernel.length:-1;for(let et=at;et!==ht;et+=$){const ut=this._kernel[et][1]*$,Et=this._kernel[et][2];if(ut+W>=0&&ut+W<I&&Et+j>=0&&Et+j<P){const gt=this._kernel[et][0],dt=F[Et][ut+W];dt[0]+=X*gt,dt[1]+=ot*gt,dt[2]+=it*gt,dt[3]+=lt*gt}}}}yield{pointContainer:d,progress:100}}_fillErrorLine(d,m){d.length>m&&(d.length=m);const g=d.length;for(let w=0;w<g;w++){const I=d[w];I[0]=I[1]=I[2]=I[3]=0}for(let w=g;w<m;w++)d[w]=[0,0,0,0]}_setKernel(d){switch(d){case 0:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case 1:this._kernel=[[3/8,1,0],[3/8,0,1],[2/8,1,1]];break;case 2:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case 3:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case 4:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case 5:this._kernel=[[.25,1,0],[4/32,2,0],[2/32,-2,1],[4/32,-1,1],[.25,0,1],[4/32,1,1],[2/32,2,1]];break;case 6:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[4/32,-1,1],[5/32,0,1],[4/32,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case 7:this._kernel=[[.25,1,0],[3/16,2,0],[1/16,-2,1],[2/16,-1,1],[3/16,0,1],[2/16,1,1],[1/16,2,1]];break;case 8:this._kernel=[[.5,1,0],[1/4,-1,1],[1/4,0,1]];break;default:throw new Error(`ErrorDiffusionArray: unknown kernel = ${d}`)}}};function*hilbertCurve$1(d,m,g){const w=Math.max(d,m),I={width:d,height:m,level:Math.floor(Math.log(w)/Math.log(2)+1),callback:g,tracker:new ProgressTracker$1(d*m,99),index:0,x:0,y:0};yield*walkHilbert$1(I,1),visit$1(I,0)}function*walkHilbert$1(d,m){if(!(d.level<1)){switch(d.tracker.shouldNotify(d.index)&&(yield{progress:d.tracker.progress}),d.level--,m){case 2:yield*walkHilbert$1(d,1),visit$1(d,3),yield*walkHilbert$1(d,2),visit$1(d,4),yield*walkHilbert$1(d,2),visit$1(d,2),yield*walkHilbert$1(d,4);break;case 3:yield*walkHilbert$1(d,4),visit$1(d,2),yield*walkHilbert$1(d,3),visit$1(d,1),yield*walkHilbert$1(d,3),visit$1(d,3),yield*walkHilbert$1(d,1);break;case 1:yield*walkHilbert$1(d,2),visit$1(d,4),yield*walkHilbert$1(d,1),visit$1(d,3),yield*walkHilbert$1(d,1),visit$1(d,1),yield*walkHilbert$1(d,3);break;case 4:yield*walkHilbert$1(d,3),visit$1(d,1),yield*walkHilbert$1(d,4),visit$1(d,2),yield*walkHilbert$1(d,4),visit$1(d,4),yield*walkHilbert$1(d,2)}d.level++}}function visit$1(d,m){switch(d.x>=0&&d.x<d.width&&d.y>=0&&d.y<d.height&&(d.callback(d.x,d.y),d.index++),m){case 2:d.x--;break;case 3:d.x++;break;case 1:d.y--;break;case 4:d.y++}}var ErrorDiffusionRiemersma$1=class extends AbstractImageQuantizer$1{constructor(d,m=16,g=1){super(),__publicField$3(this,"_distance"),__publicField$3(this,"_weights"),__publicField$3(this,"_errorQueueSize"),this._distance=d,this._errorQueueSize=m,this._weights=ErrorDiffusionRiemersma$1._createWeights(g,m)}*quantize(d,m){const g=d.getPointArray(),w=d.getWidth(),I=d.getHeight(),P=[];let F=0;for(let $=0;$<this._errorQueueSize;$++)P[$]={r:0,g:0,b:0,a:0};yield*hilbertCurve$1(w,I,($,D)=>{const U=g[$+D*w];let{r:j,g:Z,b:G,a:H}=U;for(let J=0;J<this._errorQueueSize;J++){const K=this._weights[J],V=P[(J+F)%this._errorQueueSize];j+=V.r*K,Z+=V.g*K,G+=V.b*K,H+=V.a*K}const q=Point$1.createByRGBA(inRange0to255Rounded$1(j),inRange0to255Rounded$1(Z),inRange0to255Rounded$1(G),inRange0to255Rounded$1(H)),W=m.getNearestColor(this._distance,q);F=(F+1)%this._errorQueueSize;const Q=(F+this._errorQueueSize-1)%this._errorQueueSize;P[Q].r=U.r-W.r,P[Q].g=U.g-W.g,P[Q].b=U.b-W.b,P[Q].a=U.a-W.a,U.from(W)}),yield{pointContainer:d,progress:100}}static _createWeights(d,m){const g=[],w=Math.exp(Math.log(m)/(m-1));for(let I=0,P=1;I<m;I++)g[I]=(P+.5|0)/m*d,P*=w;return g}},quality_exports$1={};__export$1(quality_exports$1,{ssim:()=>ssim$1});var K1$1=.01,K2$1=.03;function ssim$1(d,m){if(d.getHeight()!==m.getHeight()||d.getWidth()!==m.getWidth())throw new Error("Images have different sizes!");const g=(255*K1$1)**2,w=(255*K2$1)**2;let I=0,P=0;return iterate$1(d,m,(F,$,D,U)=>{let j=0,Z=0,G=0;for(let q=0;q<F.length;q++)Z+=(F[q]-D)**2,G+=($[q]-U)**2,j+=(F[q]-D)*($[q]-U);const H=F.length-1;Z/=H,G/=H,j/=H,P+=(2*D*U+g)*(2*j+w)/((D**2+U**2+g)*(Z+G+w)),I++}),P/I}function iterate$1(d,m,g){const w=d.getWidth(),I=d.getHeight();for(let P=0;P<I;P+=8)for(let F=0;F<w;F+=8){const $=Math.min(8,w-F),D=Math.min(8,I-P),U=calculateLumaValuesForWindow$1(d,F,P,$,D),j=calculateLumaValuesForWindow$1(m,F,P,$,D);g(U,j,calculateAverageLuma$1(U),calculateAverageLuma$1(j))}}function calculateLumaValuesForWindow$1(d,m,g,w,I){const P=d.getPointArray(),F=[];let $=0;for(let D=g;D<g+I;D++){const U=D*d.getWidth();for(let j=m;j<m+w;j++){const Z=P[U+j];F[$]=.2126*Z.r+.7152*Z.g+.0722*Z.b,$++}}return F}function calculateAverageLuma$1(d){let m=0;for(const g of d)m+=g;return m/d.length}var setImmediateImpl=typeof setImmediate=="function"?setImmediate:typeof process<"u"&&typeof(process==null?void 0:process.nextTick)=="function"?d=>process.nextTick(d):d=>setTimeout(d,0);function buildPaletteSync$1(d,{colorDistanceFormula:m,paletteQuantization:g,colors:w}={}){const I=paletteQuantizationToPaletteQuantizer$1(colorDistanceFormulaToColorDistance$1(m),g,w);return d.forEach(P=>I.sample(P)),I.quantizeSync()}async function buildPalette(d,{colorDistanceFormula:m,paletteQuantization:g,colors:w,onProgress:I}={}){return new Promise((P,F)=>{const $=paletteQuantizationToPaletteQuantizer$1(colorDistanceFormulaToColorDistance$1(m),g,w);let D;d.forEach(Z=>$.sample(Z));const U=$.quantize(),j=()=>{try{const Z=U.next();Z.done?P(D):(Z.value.palette&&(D=Z.value.palette),I&&I(Z.value.progress),setImmediateImpl(j))}catch(Z){F(Z)}};setImmediateImpl(j)})}function applyPaletteSync$1(d,m,{colorDistanceFormula:g,imageQuantization:w}={}){return imageQuantizationToImageQuantizer$1(colorDistanceFormulaToColorDistance$1(g),w).quantizeSync(d,m)}async function applyPalette(d,m,{colorDistanceFormula:g,imageQuantization:w,onProgress:I}={}){return new Promise((P,F)=>{let $;const D=imageQuantizationToImageQuantizer$1(colorDistanceFormulaToColorDistance$1(g),w).quantize(d,m),U=()=>{try{const j=D.next();j.done?P($):(j.value.pointContainer&&($=j.value.pointContainer),I&&I(j.value.progress),setImmediateImpl(U))}catch(j){F(j)}};setImmediateImpl(U)})}function colorDistanceFormulaToColorDistance$1(d="euclidean-bt709"){switch(d){case"cie94-graphic-arts":return new CIE94GraphicArts$1;case"cie94-textiles":return new CIE94Textiles$1;case"ciede2000":return new CIEDE2000$1;case"color-metric":return new CMetric$1;case"euclidean":return new Euclidean$1;case"euclidean-bt709":return new EuclideanBT709$1;case"euclidean-bt709-noalpha":return new EuclideanBT709NoAlpha$1;case"manhattan":return new Manhattan$1;case"manhattan-bt709":return new ManhattanBT709$1;case"manhattan-nommyde":return new ManhattanNommyde$1;case"pngquant":return new PNGQuant$1;default:throw new Error(`Unknown colorDistanceFormula ${d}`)}}function imageQuantizationToImageQuantizer$1(d,m="floyd-steinberg"){switch(m){case"nearest":return new NearestColor$1(d);case"riemersma":return new ErrorDiffusionRiemersma$1(d);case"floyd-steinberg":return new ErrorDiffusionArray$1(d,0);case"false-floyd-steinberg":return new ErrorDiffusionArray$1(d,1);case"stucki":return new ErrorDiffusionArray$1(d,2);case"atkinson":return new ErrorDiffusionArray$1(d,3);case"jarvis":return new ErrorDiffusionArray$1(d,4);case"burkes":return new ErrorDiffusionArray$1(d,5);case"sierra":return new ErrorDiffusionArray$1(d,6);case"two-sierra":return new ErrorDiffusionArray$1(d,7);case"sierra-lite":return new ErrorDiffusionArray$1(d,8);default:throw new Error(`Unknown imageQuantization ${m}`)}}function paletteQuantizationToPaletteQuantizer$1(d,m="wuquant",g=256){switch(m){case"neuquant":return new NeuQuant$1(d,g);case"rgbquant":return new RGBQuant$1(d,g);case"wuquant":return new WuQuant$1(d,g);case"neuquant-float":return new NeuQuantFloat$1(d,g);default:throw new Error(`Unknown paletteQuantization ${m}`)}}var imageQ=__toCommonJS(src_exports),gifframe={};const BitmapImage$1=bitmapimage;let GifFrame$1=class Te extends BitmapImage$1{constructor(...m){if(super(...m),m[0]instanceof Te){const g=m[0];this.xOffset=g.xOffset,this.yOffset=g.yOffset,this.disposalMethod=g.disposalMethod,this.delayCentisecs=g.delayCentisecs,this.interlaced=g.interlaced}else{const g=m[m.length-1];let w={};typeof g!="object"||g instanceof BitmapImage$1||(w=g),this.xOffset=w.xOffset||0,this.yOffset=w.yOffset||0,this.disposalMethod=w.disposalMethod!==void 0?w.disposalMethod:Te.DisposeToBackgroundColor,this.delayCentisecs=w.delayCentisecs||8,this.interlaced=w.interlaced||!1}}getPalette(){const m=new Set,g=this.bitmap.data;let w=0,I=!1;for(;w<g.length;){if(g[w+3]===0)I=!0;else{const D=g.readUInt32BE(w,!0)>>8&16777215;m.add(D)}w+=4}const P=new Array(m.size),F=m.values();for(w=0;w<P.length;++w)P[w]=F.next().value;P.sort((D,U)=>D-U);let $=P.length;return I&&++$,{colors:P,usesTransparency:I,indexCount:$}}};var hasRequiredGifutil,hasRequiredGifcodec;function requireGifutil(){return hasRequiredGifutil||(hasRequiredGifutil=1,function(d){const m=require$$0,g=imageQ,w=bitmapimage,{GifFrame:I}=gifframe,{GifError:P}=gif$1,{GifCodec:F}=requireGifcodec(),$=[".jpg",".jpeg",".png",".bmp"],D=new F;function U(j,Z,G,H,q){const W=Array.isArray(j)?j:[j];if(q){if(["FloydSteinberg","FalseFloydSteinberg","Stucki","Atkinson","Jarvis","Burkes","Sierra","TwoSierra","SierraLite"].indexOf(q.ditherAlgorithm)<0)throw new Error(`Invalid ditherAlgorithm '${q.ditherAlgorithm}'`);q.serpentine===void 0&&(q.serpentine=!0),q.minimumColorDistanceToDither===void 0&&(q.minimumColorDistanceToDither=0),q.calculateErrorLikeGIMP===void 0&&(q.calculateErrorLikeGIMP=!1)}const Q=new g.distance.Euclidean,J=new g.palette[Z](Q,G,H);let K;K=q?new g.image.ErrorDiffusionArray(Q,g.image.ErrorDiffusionArrayKernel[q.ditherAlgorithm],q.serpentine,q.minimumColorDistanceToDither,q.calculateErrorLikeGIMP):new g.image.NearestColor(Q);const V=[];W.forEach(X=>{const ot=X.bitmap.data,it=new ArrayBuffer(ot.length),lt=new Uint32Array(it);for(let ht=0,et=0;ht<ot.length;ht+=4,++et)lt[et]=ot.readUInt32LE(ht,!0);const at=g.utils.PointContainer.fromUint32Array(lt,X.bitmap.width,X.bitmap.height);J.sample(at),V.push(at)});const tt=J.quantizeSync();for(let X=0;X<W.length;++X){const ot=W[X].bitmap.data,it=K.quantizeSync(V[X],tt).toUint32Array();for(let lt=0,at=0;lt<ot.length;lt+=4,++at)ot.writeUInt32LE(it[at],lt)}}d.cloneFrames=function(j){let Z=[];return j.forEach(G=>{Z.push(new I(G))}),Z},d.getColorInfo=function(j,Z){let G=!1;const H=[];for(let K=0;K<j.length;++K){let V=j[K].getPalette();if(V.usesTransparency&&(G=!0),V.indexCount>256)throw new P(`Frame ${K} uses more than 256 color indexes`);H.push(V)}if(Z===0)return{usesTransparency:G,palettes:H};const q=new Set;H.forEach(K=>{K.colors.forEach(V=>{q.add(V)})});let W=q.size;if(G&&++W,Z&&W>Z)return{usesTransparency:G,palettes:H};const Q=new Array(q.size),J=q.values();for(let K=0;K<Q.length;++K)Q[K]=J.next().value;return Q.sort((K,V)=>K-V),{colors:Q,indexCount:W,usesTransparency:G,palettes:H}},d.copyAsJimp=function(j,Z){return d.shareAsJimp(j,new w(Z))},d.getMaxDimensions=function(j){let Z=0,G=0;return j.forEach(H=>{const q=H.xOffset+H.bitmap.width;q>Z&&(Z=q);const W=H.yOffset+H.bitmap.height;W>G&&(G=W)}),{maxWidth:Z,maxHeight:G}},d.quantizeDekker=function(j,Z,G){U(j,"NeuQuantFloat",Z=Z||256,0,G)},d.quantizeSorokin=function(j,Z,G,H){let q;switch(Z=Z||256,G=G||"min-pop"){case"min-pop":q=2;break;case"top-pop":q=1;break;default:throw new Error(`Invalid quantizeSorokin histogram '${G}'`)}U(j,"RGBQuant",Z,q,H)},d.quantizeWu=function(j,Z,G,H){if(Z=Z||256,(G=G||5)<1||G>8)throw new Error("Invalid quantization quality");U(j,"WuQuant",Z,G,H)},d.read=function(j,Z){return Z=Z||D,Buffer$1.isBuffer(j)?Z.decodeGif(j):function(G){return new Promise((H,q)=>{m.readFile(G,(W,Q)=>W?q(W):H(Q))})}(j).then(G=>Z.decodeGif(G))},d.shareAsJimp=function(j,Z){const G=new j(Z.bitmap.width,Z.bitmap.height,0);return G.bitmap.data=Z.bitmap.data,G},d.write=function(j,Z,G,H){H=H||D;const q=j.match(/\.[a-zA-Z]+$/);if(q!==null&&$.includes(q[0].toLowerCase()))throw new Error(`GIF '${j}' has an unexpected suffix`);return H.encodeGif(Z,G).then(W=>function(Q,J){return new Promise((K,V)=>{m.writeFile(Q,J,tt=>tt?V(tt):K())})}(j,W.buffer).then(()=>W))}}(gifutil)),gifutil}function requireGifcodec(){if(hasRequiredGifcodec)return gifcodec;hasRequiredGifcodec=1;const d=omggif,{Gif:m,GifError:g}=gif$1;function w(){const Z=requireGifutil();return w=function(){return Z},Z}const{GifFrame:I}=gifframe;function P(Z,G){const H=Z.indexOf(G);return H===-1?null:H}function F(Z,G){for(var H,q=0,W=Z.length-1;q<=W;)if(Z[H=Math.floor((q+W)/2)]>G)W=H-1;else{if(!(Z[H]<G))return H;q=H+1}return null}function $(Z){const G=Z.colors;Z.usesTransparency&&G.push(0);const H=G.length;let q=2;for(;H>q;)q<<=1;G.length=q,G.fill(0,H)}function D(Z,G){let H=Z.bitmap.width*Z.bitmap.height;return H=Math.ceil(H*G/8),H+=Math.ceil(H/255),100+H+768}function U(Z){let G=Z.indexCount,H=0;for(--G;G;)++H,G>>=1;return H>0?H:1}function j(Z,G,H,q,W){if(H.interlaced)throw new g("writing interlaced GIFs is not supported");const Q=function(K,V,tt){const X=tt.colors,ot=X.length<=8?P:F,it=V.bitmap.data,lt=new Buffer$1(it.length/4);let at=X.length,ht=0,et=0;for(;ht<it.length;){if(it[ht+3]!==0){const ut=it.readUInt32BE(ht,!0)>>8&16777215;lt[et]=ot(X,ut)}else lt[et]=at;ht+=4,++et}if(tt.usesTransparency){if(at===256)throw new g(`Frame ${K} already has 256 colorsand so can't use transparency`)}else at=null;return{buffer:lt,transparentIndex:at}}(G,H,q),J={delay:H.delayCentisecs,disposal:H.disposalMethod,transparent:Q.transparentIndex};W&&($(q),J.palette=q.colors);try{let K,V=Z.getOutputBuffer(),tt=Z.getOutputBufferPosition(),X=!0;for(;X;)if(K=Z.addFrame(H.xOffset,H.yOffset,H.bitmap.width,H.bitmap.height,Q.buffer,J),X=!1,K>=V.length-1){const ot=new Buffer$1(1.5*V.length);V.copy(ot),Z.setOutputBuffer(ot),Z.setOutputBufferPosition(tt),V=ot,X=!0}return V}catch(K){throw new g(K)}}return gifcodec.GifCodec=class{constructor(Z={}){this._transparentRGB=null,typeof Z.transparentRGB=="number"&&Z.transparentRGB!==0&&(this._transparentRGBA=256*Z.transparentRGB),this._testInitialBufferSize=0}decodeGif(Z){try{let G;try{G=new d.GifReader(Z)}catch(Q){throw new g(Q)}const H=G.numFrames(),q=[],W={width:G.width,height:G.height,loops:G.loopCount(),usesTransparency:!1};for(let Q=0;Q<H;++Q){const J=this._decodeFrame(G,Q,W.usesTransparency);q.push(J.frame),J.usesTransparency&&(W.usesTransparency=!0)}return Promise.resolve(new m(Z,q,W))}catch(G){return Promise.reject(G)}}encodeGif(Z,G={}){try{if(Z===null||Z.length===0)throw new g("there are no frames");const H=w().getMaxDimensions(Z);return(G=Object.assign({},G)).width=H.maxWidth,G.height=H.maxHeight,G.loops===void 0&&(G.loops=0),G.colorScope=G.colorScope||m.GlobalColorsPreferred,Promise.resolve(this._encodeGif(Z,G))}catch(H){return Promise.reject(H)}}_decodeFrame(Z,G,H){let q,W;try{if(q=Z.frameInfo(G),W=new Buffer$1(Z.width*Z.height*4),Z.decodeAndBlitFrameRGBA(G,W),q.width!==Z.width||q.height!==Z.height){if(q.y&&(W=W.slice(q.y*Z.width*4)),Z.width>q.width)for(let J=0;J<q.height;++J)W.copy(W,J*q.width*4,4*(q.x+J*Z.width),4*(q.x+J*Z.width)+4*q.width);W=W.slice(0,q.width*q.height*4)}}catch(J){throw new g(J)}let Q=!1;if(this._transparentRGBA===null){if(!H)for(let J=3;J<W.length;J+=4)W[J]===0&&(Q=!0,J=W.length)}else for(let J=3;J<W.length;J+=4)W[J]===0&&(W.writeUInt32BE(this._transparentRGBA,J-3),Q=!0);return{frame:new I(q.width,q.height,W,{xOffset:q.x,yOffset:q.y,disposalMethod:q.disposal,interlaced:q.interlaced,delayCentisecs:q.delay}),usesTransparency:Q}}_encodeGif(Z,G){let H;if(G.colorScope===m.LocalColorsOnly)H=w().getColorInfo(Z,0);else if(H=w().getColorInfo(Z,256),!H.colors){if(G.colorScope===m.GlobalColorsOnly)throw new g("Too many color indexes for global color table");G.colorScope=m.LocalColorsOnly}G.usesTransparency=H.usesTransparency;const q=H.palettes;return G.colorScope===m.LocalColorsOnly?function(W,Q,J,K){const V={loop:Q.loops};let tt,X=new Buffer$1(J);try{tt=new d.GifWriter(X,Q.width,Q.height,V)}catch(ot){throw new g(ot)}for(let ot=0;ot<W.length;++ot)X=j(tt,ot,W[ot],K[ot],!0);return new m(X.slice(0,tt.end()),W,Q)}(Z,G,2e3,q):function(W,Q,J,K){const V={colors:K.colors.slice(),usesTransparency:K.usesTransparency};$(V);const tt={palette:V.colors,loop:Q.loops};let X,ot=new Buffer$1(J);try{X=new d.GifWriter(ot,Q.width,Q.height,tt)}catch(it){throw new g(it)}for(let it=0;it<W.length;++it)ot=j(X,it,W[it],K,!1);return new m(ot.slice(0,X.end()),W,Q)}(Z,G,2e3,H)}_getSizeEstimateGlobal(Z,G){if(this._testInitialBufferSize>0)return this._testInitialBufferSize;let H=968;const q=U(Z);return G.forEach(W=>{H+=D(W,q)}),H}_getSizeEstimateLocal(Z,G){if(this._testInitialBufferSize>0)return this._testInitialBufferSize;let H=200;for(let q=0;q<G.length;++q){const W=U(Z[q]);H+=D(G[q],W)}return H}},gifcodec}GifFrame$1.DisposeToAnything=0,GifFrame$1.DisposeNothing=1,GifFrame$1.DisposeToBackgroundColor=2,GifFrame$1.DisposeToPrevious=3,gifframe.GifFrame=GifFrame$1;const BitmapImage=bitmapimage,{Gif,GifError:GifError$1}=gif$1,{GifCodec}=requireGifcodec(),{GifFrame}=gifframe,GifUtil=requireGifutil();var src={BitmapImage,Gif,GifCodec,GifFrame,GifUtil,GifError:GifError$1};function gif(){return{mime:"image/gif",encode:async d=>{const m=new src.BitmapImage(d);src.GifUtil.quantizeDekker(m,256);const g=new src.GifFrame(d);return(await new src.GifCodec().encodeGif([g],{})).buffer},decode:d=>{const m=new omggif.GifReader(d),g=Buffer$1.alloc(m.width*m.height*4);return m.decodeAndBlitFrameRGBA(0,g),{data:g,width:m.width,height:m.height}}}}var encoder={exports:{}};(function(d){function m(g){var w,I,P,F,$,D=Math.floor,U=new Array(64),j=new Array(64),Z=new Array(64),G=new Array(64),H=new Array(65535),q=new Array(65535),W=new Array(64),Q=new Array(64),J=[],K=0,V=7,tt=new Array(64),X=new Array(64),ot=new Array(64),it=new Array(256),lt=new Array(2048),at=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ht=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],et=[0,1,2,3,4,5,6,7,8,9,10,11],ut=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Et=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],gt=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],dt=[0,1,2,3,4,5,6,7,8,9,10,11],yt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Nt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Bt(Dt,Tt){for(var Rt=0,Lt=0,Ht=new Array,Wt=1;Wt<=16;Wt++){for(var Pt=1;Pt<=Dt[Wt];Pt++)Ht[Tt[Lt]]=[],Ht[Tt[Lt]][0]=Rt,Ht[Tt[Lt]][1]=Wt,Lt++,Rt++;Rt*=2}return Ht}function St(Dt){for(var Tt=Dt[0],Rt=Dt[1]-1;Rt>=0;)Tt&1<<Rt&&(K|=1<<V),Rt--,--V<0&&(K==255?(zt(255),zt(0)):zt(K),V=7,K=0)}function zt(Dt){J.push(Dt)}function kt(Dt){zt(Dt>>8&255),zt(255&Dt)}function Ct(Dt,Tt,Rt,Lt,Ht){for(var Wt,Pt=Ht[0],nt=Ht[240],Mt=function(vt,Gt){var Qt,ae,se,ie,At,st,mt,Ot,qt,Yt,Jt=0;for(qt=0;qt<8;++qt){Qt=vt[Jt],ae=vt[Jt+1],se=vt[Jt+2],ie=vt[Jt+3],At=vt[Jt+4],st=vt[Jt+5],mt=vt[Jt+6];var Ft=Qt+(Ot=vt[Jt+7]),re=Qt-Ot,jt=ae+mt,Kt=ae-mt,It=se+st,ne=se-st,ce=ie+At,pt=ie-At,ee=Ft+ce,Vt=Ft-ce,Zt=jt+It,Xt=jt-It;vt[Jt]=ee+Zt,vt[Jt+4]=ee-Zt;var te=.707106781*(Xt+Vt);vt[Jt+2]=Vt+te,vt[Jt+6]=Vt-te;var ue=.382683433*((ee=pt+ne)-(Xt=Kt+re)),oe=.5411961*ee+ue,le=1.306562965*Xt+ue,he=.707106781*(Zt=ne+Kt),xe=re+he,de=re-he;vt[Jt+5]=de+oe,vt[Jt+3]=de-oe,vt[Jt+1]=xe+le,vt[Jt+7]=xe-le,Jt+=8}for(Jt=0,qt=0;qt<8;++qt){Qt=vt[Jt],ae=vt[Jt+8],se=vt[Jt+16],ie=vt[Jt+24],At=vt[Jt+32],st=vt[Jt+40],mt=vt[Jt+48];var pe=Qt+(Ot=vt[Jt+56]),ge=Qt-Ot,be=ae+mt,ke=ae-mt,Ae=se+st,me=se-st,we=ie+At,Ee=ie-At,ve=pe+we,ye=pe-we,_e=be+Ae,Se=be-Ae;vt[Jt]=ve+_e,vt[Jt+32]=ve-_e;var Me=.707106781*(Se+ye);vt[Jt+16]=ye+Me,vt[Jt+48]=ye-Me;var Be=.382683433*((ve=Ee+me)-(Se=ke+ge)),Re=.5411961*ve+Be,Ce=1.306562965*Se+Be,Pe=.707106781*(_e=me+ke),Fe=ge+Pe,Ne=ge-Pe;vt[Jt+40]=Ne+Re,vt[Jt+24]=Ne-Re,vt[Jt+8]=Fe+Ce,vt[Jt+56]=Fe-Ce,Jt++}for(qt=0;qt<64;++qt)Yt=vt[qt]*Gt[qt],W[qt]=Yt>0?Yt+.5|0:Yt-.5|0;return W}(Dt,Tt),ct=0;ct<64;++ct)Q[at[ct]]=Mt[ct];var _t=Q[0]-Rt;Rt=Q[0],_t==0?St(Lt[0]):(St(Lt[q[Wt=32767+_t]]),St(H[Wt]));for(var bt=63;bt>0&&Q[bt]==0;bt--);if(bt==0)return St(Pt),Rt;for(var xt,$t=1;$t<=bt;){for(var rt=$t;Q[$t]==0&&$t<=bt;++$t);var ft=$t-rt;if(ft>=16){xt=ft>>4;for(var wt=1;wt<=xt;++wt)St(nt);ft&=15}Wt=32767+Q[$t],St(Ht[(ft<<4)+q[Wt]]),St(H[Wt]),$t++}return bt!=63&&St(Pt),Rt}function Ut(Dt){Dt<=0&&(Dt=1),Dt>100&&(Dt=100),$!=Dt&&(function(Tt){for(var Rt=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Lt=0;Lt<64;Lt++){var Ht=D((Rt[Lt]*Tt+50)/100);Ht<1?Ht=1:Ht>255&&(Ht=255),U[at[Lt]]=Ht}for(var Wt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Pt=0;Pt<64;Pt++){var nt=D((Wt[Pt]*Tt+50)/100);nt<1?nt=1:nt>255&&(nt=255),j[at[Pt]]=nt}for(var Mt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ct=0,_t=0;_t<8;_t++)for(var bt=0;bt<8;bt++)Z[ct]=1/(U[at[ct]]*Mt[_t]*Mt[bt]*8),G[ct]=1/(j[at[ct]]*Mt[_t]*Mt[bt]*8),ct++}(Dt<50?Math.floor(5e3/Dt):Math.floor(200-2*Dt)),$=Dt)}this.encode=function(Dt,Tt){var Rt;new Date().getTime(),Tt&&Ut(Tt),J=new Array,K=0,V=7,kt(65496),kt(65504),kt(16),zt(74),zt(70),zt(73),zt(70),zt(0),zt(1),zt(1),zt(0),kt(1),kt(1),zt(0),zt(0),(Rt=Dt.comments)!==void 0&&Rt.constructor===Array&&Rt.forEach(se=>{if(typeof se=="string"){kt(65534);var ie,At=se.length;for(kt(At+2),ie=0;ie<At;ie++)zt(se.charCodeAt(ie))}}),function(se){if(se){kt(65505),se[0]===69&&se[1]===120&&se[2]===105&&se[3]===102?kt(se.length+2):(kt(se.length+5+2),zt(69),zt(120),zt(105),zt(102),zt(0));for(var ie=0;ie<se.length;ie++)zt(se[ie])}}(Dt.exifBuffer),function(){kt(65499),kt(132),zt(0);for(var se=0;se<64;se++)zt(U[se]);zt(1);for(var ie=0;ie<64;ie++)zt(j[ie])}(),function(se,ie){kt(65472),kt(17),zt(8),kt(ie),kt(se),zt(3),zt(1),zt(17),zt(0),zt(2),zt(17),zt(1),zt(3),zt(17),zt(1)}(Dt.width,Dt.height),function(){kt(65476),kt(418),zt(0);for(var se=0;se<16;se++)zt(ht[se+1]);for(var ie=0;ie<=11;ie++)zt(et[ie]);zt(16);for(var At=0;At<16;At++)zt(ut[At+1]);for(var st=0;st<=161;st++)zt(Et[st]);zt(1);for(var mt=0;mt<16;mt++)zt(gt[mt+1]);for(var Ot=0;Ot<=11;Ot++)zt(dt[Ot]);zt(17);for(var qt=0;qt<16;qt++)zt(yt[qt+1]);for(var Yt=0;Yt<=161;Yt++)zt(Nt[Yt])}(),kt(65498),kt(12),zt(3),zt(1),zt(0),zt(2),zt(17),zt(3),zt(17),zt(0),zt(63),zt(0);var Lt=0,Ht=0,Wt=0;K=0,V=7,this.encode.displayName="_encode_";for(var Pt,nt,Mt,ct,_t,bt,xt,$t,rt,ft=Dt.data,wt=Dt.width,vt=Dt.height,Gt=4*wt,Qt=0;Qt<vt;){for(Pt=0;Pt<Gt;){for(bt=_t=Gt*Qt+Pt,xt=-1,$t=0,rt=0;rt<64;rt++)bt=_t+($t=rt>>3)*Gt+(xt=4*(7&rt)),Qt+$t>=vt&&(bt-=Gt*(Qt+1+$t-vt)),Pt+xt>=Gt&&(bt-=Pt+xt-Gt+4),nt=ft[bt++],Mt=ft[bt++],ct=ft[bt++],tt[rt]=(lt[nt]+lt[Mt+256|0]+lt[ct+512|0]>>16)-128,X[rt]=(lt[nt+768|0]+lt[Mt+1024|0]+lt[ct+1280|0]>>16)-128,ot[rt]=(lt[nt+1280|0]+lt[Mt+1536|0]+lt[ct+1792|0]>>16)-128;Lt=Ct(tt,Z,Lt,w,P),Ht=Ct(X,G,Ht,I,F),Wt=Ct(ot,G,Wt,I,F),Pt+=32}Qt+=8}if(V>=0){var ae=[];ae[1]=V+1,ae[0]=(1<<V+1)-1,St(ae)}return kt(65497),Buffer$1.from(J)},new Date().getTime(),g||(g=50),function(){for(var Dt=String.fromCharCode,Tt=0;Tt<256;Tt++)it[Tt]=Dt(Tt)}(),w=Bt(ht,et),I=Bt(gt,dt),P=Bt(ut,Et),F=Bt(yt,Nt),function(){for(var Dt=1,Tt=2,Rt=1;Rt<=15;Rt++){for(var Lt=Dt;Lt<Tt;Lt++)q[32767+Lt]=Rt,H[32767+Lt]=[],H[32767+Lt][1]=Rt,H[32767+Lt][0]=Lt;for(var Ht=-(Tt-1);Ht<=-Dt;Ht++)q[32767+Ht]=Rt,H[32767+Ht]=[],H[32767+Ht][1]=Rt,H[32767+Ht][0]=Tt-1+Ht;Dt<<=1,Tt<<=1}}(),function(){for(var Dt=0;Dt<256;Dt++)lt[Dt]=19595*Dt,lt[Dt+256|0]=38470*Dt,lt[Dt+512|0]=7471*Dt+32768,lt[Dt+768|0]=-11059*Dt,lt[Dt+1024|0]=-21709*Dt,lt[Dt+1280|0]=32768*Dt+8421375,lt[Dt+1536|0]=-27439*Dt,lt[Dt+1792|0]=-5329*Dt}(),Ut(g),new Date().getTime()}encoder.exports=function(g,w){w===void 0&&(w=50);var I=new m(w),P=I.encode(g,w);return{data:P,width:g.width,height:g.height}}})();var encoderExports=encoder.exports,decoder={exports:{}},module,JpegImage;module=decoder,JpegImage=function(){var d=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),m=4017,g=799,w=3406,I=2276,P=1567,F=3784,$=5793,D=2896;function U(){}function j(J,K){for(var V,tt,X=0,ot=[],it=16;it>0&&!J[it-1];)it--;ot.push({children:[],index:0});var lt,at=ot[0];for(V=0;V<it;V++){for(tt=0;tt<J[V];tt++){for((at=ot.pop()).children[at.index]=K[X];at.index>0;){if(ot.length===0)throw new Error("Could not recreate Huffman Table");at=ot.pop()}for(at.index++,ot.push(at);ot.length<=V;)ot.push(lt={children:[],index:0}),at.children[at.index]=lt.children,at=lt;X++}V+1<it&&(ot.push(lt={children:[],index:0}),at.children[at.index]=lt.children,at=lt)}return ot[0].children}function Z(J,K,V,tt,X,ot,it,lt,at,ht){V.precision,V.samplesPerLine,V.scanLines;var et=V.mcusPerLine,ut=V.progressive;V.maxH,V.maxV;var Et=K,gt=0,dt=0;function yt(){if(dt>0)return dt--,gt>>dt&1;if((gt=J[K++])==255){var $t=J[K++];if($t)throw new Error("unexpected marker: "+(gt<<8|$t).toString(16))}return dt=7,gt>>>7}function Nt($t){for(var rt,ft=$t;(rt=yt())!==null;){if(typeof(ft=ft[rt])=="number")return ft;if(typeof ft!="object")throw new Error("invalid huffman sequence")}return null}function Bt($t){for(var rt=0;$t>0;){var ft=yt();if(ft===null)return;rt=rt<<1|ft,$t--}return rt}function St($t){var rt=Bt($t);return rt>=1<<$t-1?rt:rt+(-1<<$t)+1}var zt,kt=0,Ct=0;function Ut($t,rt,ft,wt,vt){var Gt=ft%et,Qt=(ft/et|0)*$t.v+wt,ae=Gt*$t.h+vt;$t.blocks[Qt]===void 0&&ht.tolerantDecoding||rt($t,$t.blocks[Qt][ae])}function Dt($t,rt,ft){var wt=ft/$t.blocksPerLine|0,vt=ft%$t.blocksPerLine;$t.blocks[wt]===void 0&&ht.tolerantDecoding||rt($t,$t.blocks[wt][vt])}var Tt,Rt,Lt,Ht,Wt,Pt,nt=tt.length;Pt=ut?ot===0?lt===0?function($t,rt){var ft=Nt($t.huffmanTableDC),wt=ft===0?0:St(ft)<<at;rt[0]=$t.pred+=wt}:function($t,rt){rt[0]|=yt()<<at}:lt===0?function($t,rt){if(kt>0)kt--;else for(var ft=ot,wt=it;ft<=wt;){var vt=Nt($t.huffmanTableAC),Gt=15&vt,Qt=vt>>4;if(Gt!==0)rt[d[ft+=Qt]]=St(Gt)*(1<<at),ft++;else{if(Qt<15){kt=Bt(Qt)+(1<<Qt)-1;break}ft+=16}}}:function($t,rt){for(var ft=ot,wt=it,vt=0;ft<=wt;){var Gt=d[ft],Qt=rt[Gt]<0?-1:1;switch(Ct){case 0:var ae=Nt($t.huffmanTableAC),se=15&ae;if(vt=ae>>4,se===0)vt<15?(kt=Bt(vt)+(1<<vt),Ct=4):(vt=16,Ct=1);else{if(se!==1)throw new Error("invalid ACn encoding");zt=St(se),Ct=vt?2:3}continue;case 1:case 2:rt[Gt]?rt[Gt]+=(yt()<<at)*Qt:--vt==0&&(Ct=Ct==2?3:0);break;case 3:rt[Gt]?rt[Gt]+=(yt()<<at)*Qt:(rt[Gt]=zt<<at,Ct=0);break;case 4:rt[Gt]&&(rt[Gt]+=(yt()<<at)*Qt)}ft++}Ct===4&&--kt==0&&(Ct=0)}:function($t,rt){var ft=Nt($t.huffmanTableDC),wt=ft===0?0:St(ft);rt[0]=$t.pred+=wt;for(var vt=1;vt<64;){var Gt=Nt($t.huffmanTableAC),Qt=15&Gt,ae=Gt>>4;if(Qt!==0)rt[d[vt+=ae]]=St(Qt),vt++;else{if(ae<15)break;vt+=16}}};var Mt,ct,_t,bt,xt=0;for(ct=nt==1?tt[0].blocksPerLine*tt[0].blocksPerColumn:et*V.mcusPerColumn,X||(X=ct);xt<ct;){for(Rt=0;Rt<nt;Rt++)tt[Rt].pred=0;if(kt=0,nt==1)for(Tt=tt[0],Wt=0;Wt<X;Wt++)Dt(Tt,Pt,xt),xt++;else for(Wt=0;Wt<X;Wt++){for(Rt=0;Rt<nt;Rt++)for(_t=(Tt=tt[Rt]).h,bt=Tt.v,Lt=0;Lt<bt;Lt++)for(Ht=0;Ht<_t;Ht++)Ut(Tt,Pt,xt,Lt,Ht);if(++xt===ct)break}if(xt===ct)do{if(J[K]===255&&J[K+1]!==0)break;K+=1}while(K<J.length-2);if(dt=0,(Mt=J[K]<<8|J[K+1])<65280)throw new Error("marker was not found");if(!(Mt>=65488&&Mt<=65495))break;K+=2}return K-Et}function G(J,K){var V,tt,X=[],ot=K.blocksPerLine,it=K.blocksPerColumn,lt=ot<<3,at=new Int32Array(64),ht=new Uint8Array(64);function et(Bt,St,zt){var kt,Ct,Ut,Dt,Tt,Rt,Lt,Ht,Wt,Pt,nt=K.quantizationTable,Mt=zt;for(Pt=0;Pt<64;Pt++)Mt[Pt]=Bt[Pt]*nt[Pt];for(Pt=0;Pt<8;++Pt){var ct=8*Pt;Mt[1+ct]!=0||Mt[2+ct]!=0||Mt[3+ct]!=0||Mt[4+ct]!=0||Mt[5+ct]!=0||Mt[6+ct]!=0||Mt[7+ct]!=0?(kt=$*Mt[0+ct]+128>>8,Ct=$*Mt[4+ct]+128>>8,Ut=Mt[2+ct],Dt=Mt[6+ct],Tt=D*(Mt[1+ct]-Mt[7+ct])+128>>8,Ht=D*(Mt[1+ct]+Mt[7+ct])+128>>8,Rt=Mt[3+ct]<<4,Lt=Mt[5+ct]<<4,Wt=kt-Ct+1>>1,kt=kt+Ct+1>>1,Ct=Wt,Wt=Ut*F+Dt*P+128>>8,Ut=Ut*P-Dt*F+128>>8,Dt=Wt,Wt=Tt-Lt+1>>1,Tt=Tt+Lt+1>>1,Lt=Wt,Wt=Ht+Rt+1>>1,Rt=Ht-Rt+1>>1,Ht=Wt,Wt=kt-Dt+1>>1,kt=kt+Dt+1>>1,Dt=Wt,Wt=Ct-Ut+1>>1,Ct=Ct+Ut+1>>1,Ut=Wt,Wt=Tt*I+Ht*w+2048>>12,Tt=Tt*w-Ht*I+2048>>12,Ht=Wt,Wt=Rt*g+Lt*m+2048>>12,Rt=Rt*m-Lt*g+2048>>12,Lt=Wt,Mt[0+ct]=kt+Ht,Mt[7+ct]=kt-Ht,Mt[1+ct]=Ct+Lt,Mt[6+ct]=Ct-Lt,Mt[2+ct]=Ut+Rt,Mt[5+ct]=Ut-Rt,Mt[3+ct]=Dt+Tt,Mt[4+ct]=Dt-Tt):(Wt=$*Mt[0+ct]+512>>10,Mt[0+ct]=Wt,Mt[1+ct]=Wt,Mt[2+ct]=Wt,Mt[3+ct]=Wt,Mt[4+ct]=Wt,Mt[5+ct]=Wt,Mt[6+ct]=Wt,Mt[7+ct]=Wt)}for(Pt=0;Pt<8;++Pt){var _t=Pt;Mt[8+_t]!=0||Mt[16+_t]!=0||Mt[24+_t]!=0||Mt[32+_t]!=0||Mt[40+_t]!=0||Mt[48+_t]!=0||Mt[56+_t]!=0?(kt=$*Mt[0+_t]+2048>>12,Ct=$*Mt[32+_t]+2048>>12,Ut=Mt[16+_t],Dt=Mt[48+_t],Tt=D*(Mt[8+_t]-Mt[56+_t])+2048>>12,Ht=D*(Mt[8+_t]+Mt[56+_t])+2048>>12,Rt=Mt[24+_t],Lt=Mt[40+_t],Wt=kt-Ct+1>>1,kt=kt+Ct+1>>1,Ct=Wt,Wt=Ut*F+Dt*P+2048>>12,Ut=Ut*P-Dt*F+2048>>12,Dt=Wt,Wt=Tt-Lt+1>>1,Tt=Tt+Lt+1>>1,Lt=Wt,Wt=Ht+Rt+1>>1,Rt=Ht-Rt+1>>1,Ht=Wt,Wt=kt-Dt+1>>1,kt=kt+Dt+1>>1,Dt=Wt,Wt=Ct-Ut+1>>1,Ct=Ct+Ut+1>>1,Ut=Wt,Wt=Tt*I+Ht*w+2048>>12,Tt=Tt*w-Ht*I+2048>>12,Ht=Wt,Wt=Rt*g+Lt*m+2048>>12,Rt=Rt*m-Lt*g+2048>>12,Lt=Wt,Mt[0+_t]=kt+Ht,Mt[56+_t]=kt-Ht,Mt[8+_t]=Ct+Lt,Mt[48+_t]=Ct-Lt,Mt[16+_t]=Ut+Rt,Mt[40+_t]=Ut-Rt,Mt[24+_t]=Dt+Tt,Mt[32+_t]=Dt-Tt):(Wt=$*zt[Pt+0]+8192>>14,Mt[0+_t]=Wt,Mt[8+_t]=Wt,Mt[16+_t]=Wt,Mt[24+_t]=Wt,Mt[32+_t]=Wt,Mt[40+_t]=Wt,Mt[48+_t]=Wt,Mt[56+_t]=Wt)}for(Pt=0;Pt<64;++Pt){var bt=128+(Mt[Pt]+8>>4);St[Pt]=bt<0?0:bt>255?255:bt}}Q(lt*it*8);for(var ut=0;ut<it;ut++){var Et=ut<<3;for(V=0;V<8;V++)X.push(new Uint8Array(lt));for(var gt=0;gt<ot;gt++){et(K.blocks[ut][gt],ht,at);var dt=0,yt=gt<<3;for(tt=0;tt<8;tt++){var Nt=X[Et+tt];for(V=0;V<8;V++)Nt[yt+V]=ht[dt++]}}}return X}function H(J){return J<0?0:J>255?255:J}U.prototype={load:function(J){var K=new XMLHttpRequest;K.open("GET",J,!0),K.responseType="arraybuffer",K.onload=(function(){var V=new Uint8Array(K.response||K.mozResponseArrayBuffer);this.parse(V),this.onload&&this.onload()}).bind(this),K.send(null)},parse:function(J){var K=1e3*this.opts.maxResolutionInMP*1e3,V=0;function tt(){var ie=J[V]<<8|J[V+1];return V+=2,ie}function X(ie){var At,st,mt=1,Ot=1;for(st in ie.components)ie.components.hasOwnProperty(st)&&(mt<(At=ie.components[st]).h&&(mt=At.h),Ot<At.v&&(Ot=At.v));var qt=Math.ceil(ie.samplesPerLine/8/mt),Yt=Math.ceil(ie.scanLines/8/Ot);for(st in ie.components)if(ie.components.hasOwnProperty(st)){At=ie.components[st];var Jt=Math.ceil(Math.ceil(ie.samplesPerLine/8)*At.h/mt),Ft=Math.ceil(Math.ceil(ie.scanLines/8)*At.v/Ot),re=qt*At.h,jt=Yt*At.v,Kt=[];Q(jt*re*256);for(var It=0;It<jt;It++){for(var ne=[],ce=0;ce<re;ce++)ne.push(new Int32Array(64));Kt.push(ne)}At.blocksPerLine=Jt,At.blocksPerColumn=Ft,At.blocks=Kt}ie.maxH=mt,ie.maxV=Ot,ie.mcusPerLine=qt,ie.mcusPerColumn=Yt}J.length;var ot,it,lt,at,ht=null,et=null,ut=[],Et=[],gt=[],dt=[],yt=tt(),Nt=-1;if(this.comments=[],yt!=65496)throw new Error("SOI not found");for(yt=tt();yt!=65497;){switch(yt){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var Bt=(lt=void 0,at=void 0,lt=tt(),at=J.subarray(V,V+lt-2),V+=at.length,at);if(yt===65534){var St=String.fromCharCode.apply(null,Bt);this.comments.push(St)}yt===65504&&Bt[0]===74&&Bt[1]===70&&Bt[2]===73&&Bt[3]===70&&Bt[4]===0&&(ht={version:{major:Bt[5],minor:Bt[6]},densityUnits:Bt[7],xDensity:Bt[8]<<8|Bt[9],yDensity:Bt[10]<<8|Bt[11],thumbWidth:Bt[12],thumbHeight:Bt[13],thumbData:Bt.subarray(14,14+3*Bt[12]*Bt[13])}),yt===65505&&Bt[0]===69&&Bt[1]===120&&Bt[2]===105&&Bt[3]===102&&Bt[4]===0&&(this.exifBuffer=Bt.subarray(5,Bt.length)),yt===65518&&Bt[0]===65&&Bt[1]===100&&Bt[2]===111&&Bt[3]===98&&Bt[4]===101&&Bt[5]===0&&(et={version:Bt[6],flags0:Bt[7]<<8|Bt[8],flags1:Bt[9]<<8|Bt[10],transformCode:Bt[11]});break;case 65499:for(var zt=tt()+V-2;V<zt;){var kt=J[V++];Q(256);var Ct=new Int32Array(64);if(kt>>4){if(kt>>4!=1)throw new Error("DQT: invalid table spec");for(ae=0;ae<64;ae++)Ct[d[ae]]=tt()}else for(ae=0;ae<64;ae++)Ct[d[ae]]=J[V++];ut[15&kt]=Ct}break;case 65472:case 65473:case 65474:tt(),(ot={}).extended=yt===65473,ot.progressive=yt===65474,ot.precision=J[V++],ot.scanLines=tt(),ot.samplesPerLine=tt(),ot.components={},ot.componentsOrder=[];var Ut=ot.scanLines*ot.samplesPerLine;if(Ut>K){var Dt=Math.ceil((Ut-K)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${Dt}MP`)}var Tt,Rt=J[V++];for(Gt=0;Gt<Rt;Gt++){Tt=J[V];var Lt=J[V+1]>>4,Ht=15&J[V+1],Wt=J[V+2];if(Lt<=0||Ht<=0)throw new Error("Invalid sampling factor, expected values above 0");ot.componentsOrder.push(Tt),ot.components[Tt]={h:Lt,v:Ht,quantizationIdx:Wt},V+=3}X(ot),Et.push(ot);break;case 65476:var Pt=tt();for(Gt=2;Gt<Pt;){var nt=J[V++],Mt=new Uint8Array(16),ct=0;for(ae=0;ae<16;ae++,V++)ct+=Mt[ae]=J[V];Q(16+ct);var _t=new Uint8Array(ct);for(ae=0;ae<ct;ae++,V++)_t[ae]=J[V];Gt+=17+ct,(nt>>4?gt:dt)[15&nt]=j(Mt,_t)}break;case 65501:tt(),it=tt();break;case 65500:tt(),tt();break;case 65498:tt();var bt=J[V++],xt=[];for(Gt=0;Gt<bt;Gt++){se=ot.components[J[V++]];var $t=J[V++];se.huffmanTableDC=dt[$t>>4],se.huffmanTableAC=gt[15&$t],xt.push(se)}var rt=J[V++],ft=J[V++],wt=J[V++],vt=Z(J,V,ot,xt,it,rt,ft,wt>>4,15&wt,this.opts);V+=vt;break;case 65535:J[V]!==255&&V--;break;default:if(J[V-3]==255&&J[V-2]>=192&&J[V-2]<=254){V-=3;break}if(yt===224||yt==225){if(Nt!==-1)throw new Error(`first unknown JPEG marker at offset ${Nt.toString(16)}, second unknown JPEG marker ${yt.toString(16)} at offset ${(V-1).toString(16)}`);Nt=V-1;const ie=tt();if(J[V+ie-2]===255){V+=ie-2;break}}throw new Error("unknown JPEG marker "+yt.toString(16))}yt=tt()}if(Et.length!=1)throw new Error("only single frame JPEGs supported");for(var Gt=0;Gt<Et.length;Gt++){var Qt=Et[Gt].components;for(var ae in Qt)Qt[ae].quantizationTable=ut[Qt[ae].quantizationIdx],delete Qt[ae].quantizationIdx}for(this.width=ot.samplesPerLine,this.height=ot.scanLines,this.jfif=ht,this.adobe=et,this.components=[],Gt=0;Gt<ot.componentsOrder.length;Gt++){var se=ot.components[ot.componentsOrder[Gt]];this.components.push({lines:G(0,se),scaleX:se.h/ot.maxH,scaleY:se.v/ot.maxV})}},getData:function(J,K){var V,tt,X,ot,it,lt,at,ht,et,ut,Et,gt,dt,yt,Nt,Bt,St,zt,kt,Ct,Ut,Dt=this.width/J,Tt=this.height/K,Rt=0,Lt=J*K*this.components.length;Q(Lt);var Ht=new Uint8Array(Lt);switch(this.components.length){case 1:for(V=this.components[0],ut=0;ut<K;ut++)for(it=V.lines[0|ut*V.scaleY*Tt],et=0;et<J;et++)Et=it[0|et*V.scaleX*Dt],Ht[Rt++]=Et;break;case 2:for(V=this.components[0],tt=this.components[1],ut=0;ut<K;ut++)for(it=V.lines[0|ut*V.scaleY*Tt],lt=tt.lines[0|ut*tt.scaleY*Tt],et=0;et<J;et++)Et=it[0|et*V.scaleX*Dt],Ht[Rt++]=Et,Et=lt[0|et*tt.scaleX*Dt],Ht[Rt++]=Et;break;case 3:for(Ut=!0,this.adobe&&this.adobe.transformCode?Ut=!0:this.opts.colorTransform!==void 0&&(Ut=!!this.opts.colorTransform),V=this.components[0],tt=this.components[1],X=this.components[2],ut=0;ut<K;ut++)for(it=V.lines[0|ut*V.scaleY*Tt],lt=tt.lines[0|ut*tt.scaleY*Tt],at=X.lines[0|ut*X.scaleY*Tt],et=0;et<J;et++)Ut?(Et=it[0|et*V.scaleX*Dt],gt=lt[0|et*tt.scaleX*Dt],zt=H(Et+1.402*((dt=at[0|et*X.scaleX*Dt])-128)),kt=H(Et-.3441363*(gt-128)-.71413636*(dt-128)),Ct=H(Et+1.772*(gt-128))):(zt=it[0|et*V.scaleX*Dt],kt=lt[0|et*tt.scaleX*Dt],Ct=at[0|et*X.scaleX*Dt]),Ht[Rt++]=zt,Ht[Rt++]=kt,Ht[Rt++]=Ct;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(Ut=!1,this.adobe&&this.adobe.transformCode?Ut=!0:this.opts.colorTransform!==void 0&&(Ut=!!this.opts.colorTransform),V=this.components[0],tt=this.components[1],X=this.components[2],ot=this.components[3],ut=0;ut<K;ut++)for(it=V.lines[0|ut*V.scaleY*Tt],lt=tt.lines[0|ut*tt.scaleY*Tt],at=X.lines[0|ut*X.scaleY*Tt],ht=ot.lines[0|ut*ot.scaleY*Tt],et=0;et<J;et++)Ut?(Et=it[0|et*V.scaleX*Dt],gt=lt[0|et*tt.scaleX*Dt],dt=at[0|et*X.scaleX*Dt],yt=ht[0|et*ot.scaleX*Dt],Nt=255-H(Et+1.402*(dt-128)),Bt=255-H(Et-.3441363*(gt-128)-.71413636*(dt-128)),St=255-H(Et+1.772*(gt-128))):(Nt=it[0|et*V.scaleX*Dt],Bt=lt[0|et*tt.scaleX*Dt],St=at[0|et*X.scaleX*Dt],yt=ht[0|et*ot.scaleX*Dt]),Ht[Rt++]=255-Nt,Ht[Rt++]=255-Bt,Ht[Rt++]=255-St,Ht[Rt++]=255-yt;break;default:throw new Error("Unsupported color mode")}return Ht},copyToImageData:function(J,K){var V,tt,X,ot,it,lt,at,ht,et,ut=J.width,Et=J.height,gt=J.data,dt=this.getData(ut,Et),yt=0,Nt=0;switch(this.components.length){case 1:for(tt=0;tt<Et;tt++)for(V=0;V<ut;V++)X=dt[yt++],gt[Nt++]=X,gt[Nt++]=X,gt[Nt++]=X,K&&(gt[Nt++]=255);break;case 3:for(tt=0;tt<Et;tt++)for(V=0;V<ut;V++)at=dt[yt++],ht=dt[yt++],et=dt[yt++],gt[Nt++]=at,gt[Nt++]=ht,gt[Nt++]=et,K&&(gt[Nt++]=255);break;case 4:for(tt=0;tt<Et;tt++)for(V=0;V<ut;V++)it=dt[yt++],lt=dt[yt++],X=dt[yt++],at=255-H(it*(1-(ot=dt[yt++])/255)+ot),ht=255-H(lt*(1-ot/255)+ot),et=255-H(X*(1-ot/255)+ot),gt[Nt++]=at,gt[Nt++]=ht,gt[Nt++]=et,K&&(gt[Nt++]=255);break;default:throw new Error("Unsupported color mode")}}};var q=0,W=0;function Q(J=0){var K=q+J;if(K>W){var V=Math.ceil((K-W)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${V}MB`)}q=K}return U.resetMaxMemoryUsage=function(J){q=0,W=J},U.getBytesAllocated=function(){return q},U.requestMemoryAllocation=Q,U}(),module.exports=function(d,m={}){var g={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512,...m},w=new Uint8Array(d),I=new JpegImage;I.opts=g,JpegImage.resetMaxMemoryUsage(1024*g.maxMemoryUsageInMB*1024),I.parse(w);var P=g.formatAsRGBA?4:3,F=I.width*I.height*P;try{JpegImage.requestMemoryAllocation(F);var $={width:I.width,height:I.height,exifBuffer:I.exifBuffer,data:g.useTArray?new Uint8Array(F):Buffer$1.alloc(F)};I.comments.length>0&&($.comments=I.comments)}catch(D){throw D instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+F):D instanceof ReferenceError&&D.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):D}return I.copyToImageData($,g.formatAsRGBA),$};var decoderExports=decoder.exports,encode=encoderExports,decode=decoderExports,jpegJs={encode,decode},JPEG=getDefaultExportFromCjs(jpegJs);function jpeg$2(){return{mime:"image/jpeg",encode:(d,{quality:m=100}={})=>JPEG.encode(d,m).data,decode:(d,m)=>JPEG.decode(d,m)}}function commonjsRequire(d){throw new Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var browser$1={exports:{}};browser$1.exports=function(){function d(m,g,w){function I($,D){if(!g[$]){if(!m[$]){var U=typeof commonjsRequire=="function"&&commonjsRequire;if(!D&&U)return U($,!0);if(P)return P($,!0);var j=new Error("Cannot find module '"+$+"'");throw j.code="MODULE_NOT_FOUND",j}var Z=g[$]={exports:{}};m[$][0].call(Z.exports,function(G){return I(m[$][1][G]||G)},Z,Z.exports,d,m,g,w)}return g[$].exports}for(var P=typeof commonjsRequire=="function"&&commonjsRequire,F=0;F<w.length;F++)I(w[F]);return I}return d}()({1:[function(d,m,g){(function(w){(function(){let I=d("./interlace"),P=[function(){},function(j,Z,G,H){if(H===Z.length)throw new Error("Ran out of data");let q=Z[H];j[G]=q,j[G+1]=q,j[G+2]=q,j[G+3]=255},function(j,Z,G,H){if(H+1>=Z.length)throw new Error("Ran out of data");let q=Z[H];j[G]=q,j[G+1]=q,j[G+2]=q,j[G+3]=Z[H+1]},function(j,Z,G,H){if(H+2>=Z.length)throw new Error("Ran out of data");j[G]=Z[H],j[G+1]=Z[H+1],j[G+2]=Z[H+2],j[G+3]=255},function(j,Z,G,H){if(H+3>=Z.length)throw new Error("Ran out of data");j[G]=Z[H],j[G+1]=Z[H+1],j[G+2]=Z[H+2],j[G+3]=Z[H+3]}],F=[function(){},function(j,Z,G,H){let q=Z[0];j[G]=q,j[G+1]=q,j[G+2]=q,j[G+3]=H},function(j,Z,G){let H=Z[0];j[G]=H,j[G+1]=H,j[G+2]=H,j[G+3]=Z[1]},function(j,Z,G,H){j[G]=Z[0],j[G+1]=Z[1],j[G+2]=Z[2],j[G+3]=H},function(j,Z,G){j[G]=Z[0],j[G+1]=Z[1],j[G+2]=Z[2],j[G+3]=Z[3]}];function $(j,Z){let G=[],H=0;function q(){if(H===j.length)throw new Error("Ran out of data");let W,Q,J,K,V,tt,X,ot,it=j[H];switch(H++,Z){default:throw new Error("unrecognised depth");case 16:X=j[H],H++,G.push((it<<8)+X);break;case 4:X=15&it,ot=it>>4,G.push(ot,X);break;case 2:V=3&it,tt=it>>2&3,X=it>>4&3,ot=it>>6&3,G.push(ot,X,tt,V);break;case 1:W=1&it,Q=it>>1&1,J=it>>2&1,K=it>>3&1,V=it>>4&1,tt=it>>5&1,X=it>>6&1,ot=it>>7&1,G.push(ot,X,tt,V,K,J,Q,W)}}return{get:function(W){for(;G.length<W;)q();let Q=G.slice(0,W);return G=G.slice(W),Q},resetAfterLine:function(){G.length=0},end:function(){if(H!==j.length)throw new Error("extra data found")}}}function D(j,Z,G,H,q,W){let Q=j.width,J=j.height,K=j.index;for(let V=0;V<J;V++)for(let tt=0;tt<Q;tt++){let X=G(tt,V,K);P[H](Z,q,X,W),W+=H}return W}function U(j,Z,G,H,q,W){let Q=j.width,J=j.height,K=j.index;for(let V=0;V<J;V++){for(let tt=0;tt<Q;tt++){let X=q.get(H),ot=G(tt,V,K);F[H](Z,X,ot,W)}q.resetAfterLine()}}g.dataToBitMap=function(j,Z){let G,H,q=Z.width,W=Z.height,Q=Z.depth,J=Z.bpp,K=Z.interlace;Q!==8&&(G=$(j,Q)),H=Q<=8?w.alloc(q*W*4):new Uint16Array(q*W*4);let V,tt,X=Math.pow(2,Q)-1,ot=0;if(K)V=I.getImagePasses(q,W),tt=I.getInterlaceIterator(q,W);else{let it=0;tt=function(){let lt=it;return it+=4,lt},V=[{width:q,height:W}]}for(let it=0;it<V.length;it++)Q===8?ot=D(V[it],H,tt,J,j,ot):U(V[it],H,tt,J,G,X);if(Q===8){if(ot!==j.length)throw new Error("extra data found")}else G.end();return H}}).call(this)}).call(this,d("buffer").Buffer)},{"./interlace":11,buffer:32}],2:[function(d,m,g){(function(w){(function(){let I=d("./constants");m.exports=function(P,F,$,D){let U=[I.COLORTYPE_COLOR_ALPHA,I.COLORTYPE_ALPHA].indexOf(D.colorType)!==-1;if(D.colorType===D.inputColorType){let V=function(){let tt=new ArrayBuffer(2);return new DataView(tt).setInt16(0,256,!0),new Int16Array(tt)[0]!==256}();if(D.bitDepth===8||D.bitDepth===16&&V)return P}let j=D.bitDepth!==16?P:new Uint16Array(P.buffer),Z=255,G=I.COLORTYPE_TO_BPP_MAP[D.inputColorType];G!==4||D.inputHasAlpha||(G=3);let H=I.COLORTYPE_TO_BPP_MAP[D.colorType];D.bitDepth===16&&(Z=65535,H*=2);let q=w.alloc(F*$*H),W=0,Q=0,J=D.bgColor||{};function K(){let V,tt,X,ot=Z;switch(D.inputColorType){case I.COLORTYPE_COLOR_ALPHA:ot=j[W+3],V=j[W],tt=j[W+1],X=j[W+2];break;case I.COLORTYPE_COLOR:V=j[W],tt=j[W+1],X=j[W+2];break;case I.COLORTYPE_ALPHA:ot=j[W+1],V=j[W],tt=V,X=V;break;case I.COLORTYPE_GRAYSCALE:V=j[W],tt=V,X=V;break;default:throw new Error("input color type:"+D.inputColorType+" is not supported at present")}return D.inputHasAlpha&&(U||(ot/=Z,V=Math.min(Math.max(Math.round((1-ot)*J.red+ot*V),0),Z),tt=Math.min(Math.max(Math.round((1-ot)*J.green+ot*tt),0),Z),X=Math.min(Math.max(Math.round((1-ot)*J.blue+ot*X),0),Z))),{red:V,green:tt,blue:X,alpha:ot}}J.red===void 0&&(J.red=Z),J.green===void 0&&(J.green=Z),J.blue===void 0&&(J.blue=Z);for(let V=0;V<$;V++)for(let tt=0;tt<F;tt++){let X=K();switch(D.colorType){case I.COLORTYPE_COLOR_ALPHA:case I.COLORTYPE_COLOR:D.bitDepth===8?(q[Q]=X.red,q[Q+1]=X.green,q[Q+2]=X.blue,U&&(q[Q+3]=X.alpha)):(q.writeUInt16BE(X.red,Q),q.writeUInt16BE(X.green,Q+2),q.writeUInt16BE(X.blue,Q+4),U&&q.writeUInt16BE(X.alpha,Q+6));break;case I.COLORTYPE_ALPHA:case I.COLORTYPE_GRAYSCALE:{let ot=(X.red+X.green+X.blue)/3;D.bitDepth===8?(q[Q]=ot,U&&(q[Q+1]=X.alpha)):(q.writeUInt16BE(ot,Q),U&&q.writeUInt16BE(X.alpha,Q+2));break}default:throw new Error("unrecognised color Type "+D.colorType)}W+=G,Q+=H}return q}}).call(this)}).call(this,d("buffer").Buffer)},{"./constants":4,buffer:32}],3:[function(d,m,g){(function(w,I){(function(){let P=d("util"),F=d("stream"),$=m.exports=function(){F.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};P.inherits($,F),$.prototype.read=function(D,U){this._reads.push({length:Math.abs(D),allowLess:D<0,func:U}),w.nextTick((function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}).bind(this))},$.prototype.write=function(D,U){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let j;return j=I.isBuffer(D)?D:I.from(D,U||this._encoding),this._buffers.push(j),this._buffered+=j.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused},$.prototype.end=function(D,U){D&&this.write(D,U),this.writable=!1,this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))},$.prototype.destroySoon=$.prototype.end,$.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()},$.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},$.prototype._processReadAllowingLess=function(D){this._reads.shift();let U=this._buffers[0];U.length>D.length?(this._buffered-=D.length,this._buffers[0]=U.slice(D.length),D.func.call(this,U.slice(0,D.length))):(this._buffered-=U.length,this._buffers.shift(),D.func.call(this,U))},$.prototype._processRead=function(D){this._reads.shift();let U=0,j=0,Z=I.alloc(D.length);for(;U<D.length;){let G=this._buffers[j++],H=Math.min(G.length,D.length-U);G.copy(Z,U,0,H),U+=H,H!==G.length&&(this._buffers[--j]=G.slice(H))}j>0&&this._buffers.splice(0,j),this._buffered-=D.length,D.func.call(this,Z)},$.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let D=this._reads[0];if(D.allowLess)this._processReadAllowingLess(D);else{if(!(this._buffered>=D.length))break;this._processRead(D)}}this._buffers&&!this.writable&&this._end()}catch(D){this.emit("error",D)}}}).call(this)}).call(this,d("_process"),d("buffer").Buffer)},{_process:63,buffer:32,stream:65,util:84}],4:[function(d,m,g){m.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},{}],5:[function(d,m,g){let w=[];(function(){for(let P=0;P<256;P++){let F=P;for(let $=0;$<8;$++)1&F?F=3988292384^F>>>1:F>>>=1;w[P]=F}})();let I=m.exports=function(){this._crc=-1};I.prototype.write=function(P){for(let F=0;F<P.length;F++)this._crc=w[255&(this._crc^P[F])]^this._crc>>>8;return!0},I.prototype.crc32=function(){return~this._crc},I.crc32=function(P){let F=-1;for(let $=0;$<P.length;$++)F=w[255&(F^P[$])]^F>>>8;return~F}},{}],6:[function(d,m,g){(function(w){(function(){let I=d("./paeth-predictor");function P(J,K,V,tt,X){for(let ot=0;ot<V;ot++)tt[X+ot]=J[K+ot]}function F(J,K,V){let tt=0,X=K+V;for(let ot=K;ot<X;ot++)tt+=Math.abs(J[ot]);return tt}function $(J,K,V,tt,X,ot){for(let it=0;it<V;it++){let lt=it>=ot?J[K+it-ot]:0,at=J[K+it]-lt;tt[X+it]=at}}function D(J,K,V,tt){let X=0;for(let ot=0;ot<V;ot++){let it=ot>=tt?J[K+ot-tt]:0,lt=J[K+ot]-it;X+=Math.abs(lt)}return X}function U(J,K,V,tt,X){for(let ot=0;ot<V;ot++){let it=K>0?J[K+ot-V]:0,lt=J[K+ot]-it;tt[X+ot]=lt}}function j(J,K,V){let tt=0,X=K+V;for(let ot=K;ot<X;ot++){let it=K>0?J[ot-V]:0,lt=J[ot]-it;tt+=Math.abs(lt)}return tt}function Z(J,K,V,tt,X,ot){for(let it=0;it<V;it++){let lt=it>=ot?J[K+it-ot]:0,at=K>0?J[K+it-V]:0,ht=J[K+it]-(lt+at>>1);tt[X+it]=ht}}function G(J,K,V,tt){let X=0;for(let ot=0;ot<V;ot++){let it=ot>=tt?J[K+ot-tt]:0,lt=K>0?J[K+ot-V]:0,at=J[K+ot]-(it+lt>>1);X+=Math.abs(at)}return X}function H(J,K,V,tt,X,ot){for(let it=0;it<V;it++){let lt=it>=ot?J[K+it-ot]:0,at=K>0?J[K+it-V]:0,ht=K>0&&it>=ot?J[K+it-(V+ot)]:0,et=J[K+it]-I(lt,at,ht);tt[X+it]=et}}function q(J,K,V,tt){let X=0;for(let ot=0;ot<V;ot++){let it=ot>=tt?J[K+ot-tt]:0,lt=K>0?J[K+ot-V]:0,at=K>0&&ot>=tt?J[K+ot-(V+tt)]:0,ht=J[K+ot]-I(it,lt,at);X+=Math.abs(ht)}return X}let W={0:P,1:$,2:U,3:Z,4:H},Q={0:F,1:D,2:j,3:G,4:q};m.exports=function(J,K,V,tt,X){let ot;if("filterType"in tt&&tt.filterType!==-1){if(typeof tt.filterType!="number")throw new Error("unrecognised filter types");ot=[tt.filterType]}else ot=[0,1,2,3,4];tt.bitDepth===16&&(X*=2);let it=K*X,lt=0,at=0,ht=w.alloc((it+1)*V),et=ot[0];for(let ut=0;ut<V;ut++){if(ot.length>1){let Et=1/0;for(let gt=0;gt<ot.length;gt++){let dt=Q[ot[gt]](J,at,it,X);dt<Et&&(et=ot[gt],Et=dt)}}ht[lt]=et,lt++,W[et](J,at,it,ht,lt,X),lt+=it,at+=it}return ht}}).call(this)}).call(this,d("buffer").Buffer)},{"./paeth-predictor":15,buffer:32}],7:[function(d,m,g){(function(w){(function(){let I=d("util"),P=d("./chunkstream"),F=d("./filter-parse"),$=m.exports=function(D){P.call(this);let U=[],j=this;this._filter=new F(D,{read:this.read.bind(this),write:function(Z){U.push(Z)},complete:function(){j.emit("complete",w.concat(U))}}),this._filter.start()};I.inherits($,P)}).call(this)}).call(this,d("buffer").Buffer)},{"./chunkstream":3,"./filter-parse":9,buffer:32,util:84}],8:[function(d,m,g){(function(w){(function(){let I=d("./sync-reader"),P=d("./filter-parse");g.process=function(F,$){let D=[],U=new I(F);return new P($,{read:U.read.bind(U),write:function(j){D.push(j)},complete:function(){}}).start(),U.process(),w.concat(D)}}).call(this)}).call(this,d("buffer").Buffer)},{"./filter-parse":9,"./sync-reader":22,buffer:32}],9:[function(d,m,g){(function(w){(function(){let I=d("./interlace"),P=d("./paeth-predictor");function F(D,U,j){let Z=D*U;return j!==8&&(Z=Math.ceil(Z/(8/j))),Z}let $=m.exports=function(D,U){let j=D.width,Z=D.height,G=D.interlace,H=D.bpp,q=D.depth;if(this.read=U.read,this.write=U.write,this.complete=U.complete,this._imageIndex=0,this._images=[],G){let W=I.getImagePasses(j,Z);for(let Q=0;Q<W.length;Q++)this._images.push({byteWidth:F(W[Q].width,H,q),height:W[Q].height,lineIndex:0})}else this._images.push({byteWidth:F(j,H,q),height:Z,lineIndex:0});this._xComparison=q===8?H:q===16?2*H:1};$.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},$.prototype._unFilterType1=function(D,U,j){let Z=this._xComparison,G=Z-1;for(let H=0;H<j;H++){let q=D[1+H],W=H>G?U[H-Z]:0;U[H]=q+W}},$.prototype._unFilterType2=function(D,U,j){let Z=this._lastLine;for(let G=0;G<j;G++){let H=D[1+G],q=Z?Z[G]:0;U[G]=H+q}},$.prototype._unFilterType3=function(D,U,j){let Z=this._xComparison,G=Z-1,H=this._lastLine;for(let q=0;q<j;q++){let W=D[1+q],Q=H?H[q]:0,J=q>G?U[q-Z]:0,K=Math.floor((J+Q)/2);U[q]=W+K}},$.prototype._unFilterType4=function(D,U,j){let Z=this._xComparison,G=Z-1,H=this._lastLine;for(let q=0;q<j;q++){let W=D[1+q],Q=H?H[q]:0,J=q>G?U[q-Z]:0,K=q>G&&H?H[q-Z]:0,V=P(J,Q,K);U[q]=W+V}},$.prototype._reverseFilterLine=function(D){let U,j=D[0],Z=this._images[this._imageIndex],G=Z.byteWidth;if(j===0)U=D.slice(1,G+1);else switch(U=w.alloc(G),j){case 1:this._unFilterType1(D,U,G);break;case 2:this._unFilterType2(D,U,G);break;case 3:this._unFilterType3(D,U,G);break;case 4:this._unFilterType4(D,U,G);break;default:throw new Error("Unrecognised filter type - "+j)}this.write(U),Z.lineIndex++,Z.lineIndex>=Z.height?(this._lastLine=null,this._imageIndex++,Z=this._images[this._imageIndex]):this._lastLine=U,Z?this.read(Z.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}}).call(this)}).call(this,d("buffer").Buffer)},{"./interlace":11,"./paeth-predictor":15,buffer:32}],10:[function(d,m,g){(function(w){(function(){function I($,D,U,j,Z){let G=0;for(let H=0;H<j;H++)for(let q=0;q<U;q++){let W=Z[$[G]];if(!W)throw new Error("index "+$[G]+" not in palette");for(let Q=0;Q<4;Q++)D[G+Q]=W[Q];G+=4}}function P($,D,U,j,Z){let G=0;for(let H=0;H<j;H++)for(let q=0;q<U;q++){let W=!1;if(Z.length===1?Z[0]===$[G]&&(W=!0):Z[0]===$[G]&&Z[1]===$[G+1]&&Z[2]===$[G+2]&&(W=!0),W)for(let Q=0;Q<4;Q++)D[G+Q]=0;G+=4}}function F($,D,U,j,Z){let G=255,H=Math.pow(2,Z)-1,q=0;for(let W=0;W<j;W++)for(let Q=0;Q<U;Q++){for(let J=0;J<4;J++)D[q+J]=Math.floor($[q+J]*G/H+.5);q+=4}}m.exports=function($,D,U=!1){let j=D.depth,Z=D.width,G=D.height,H=D.colorType,q=D.transColor,W=D.palette,Q=$;return H===3?I($,Q,Z,G,W):(q&&P($,Q,Z,G,q),j===8||U||(j===16&&(Q=w.alloc(Z*G*4)),F($,Q,Z,G,j))),Q}}).call(this)}).call(this,d("buffer").Buffer)},{buffer:32}],11:[function(d,m,g){let w=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];g.getImagePasses=function(I,P){let F=[],$=I%8,D=P%8,U=(I-$)/8,j=(P-D)/8;for(let Z=0;Z<w.length;Z++){let G=w[Z],H=U*G.x.length,q=j*G.y.length;for(let W=0;W<G.x.length&&G.x[W]<$;W++)H++;for(let W=0;W<G.y.length&&G.y[W]<D;W++)q++;H>0&&q>0&&F.push({width:H,height:q,index:Z})}return F},g.getInterlaceIterator=function(I){return function(P,F,$){let D=P%w[$].x.length,U=(P-D)/w[$].x.length*8+w[$].x[D],j=F%w[$].y.length;return 4*U+((F-j)/w[$].y.length*8+w[$].y[j])*I*4}}},{}],12:[function(d,m,g){(function(w){(function(){let I=d("util"),P=d("stream"),F=d("./constants"),$=d("./packer"),D=m.exports=function(U){P.call(this);let j=U||{};this._packer=new $(j),this._deflate=this._packer.createDeflate(),this.readable=!0};I.inherits(D,P),D.prototype.pack=function(U,j,Z,G){this.emit("data",w.from(F.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(j,Z)),G&&this.emit("data",this._packer.packGAMA(G));let H=this._packer.filterData(U,j,Z);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",(function(q){this.emit("data",this._packer.packIDAT(q))}).bind(this)),this._deflate.on("end",(function(){this.emit("data",this._packer.packIEND()),this.emit("end")}).bind(this)),this._deflate.end(H)}}).call(this)}).call(this,d("buffer").Buffer)},{"./constants":4,"./packer":14,buffer:32,stream:65,util:84}],13:[function(d,m,g){(function(w){(function(){let I=!0,P=d("zlib");P.deflateSync||(I=!1);let F=d("./constants"),$=d("./packer");m.exports=function(D,U){if(!I)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let j=new $(U||{}),Z=[];Z.push(w.from(F.PNG_SIGNATURE)),Z.push(j.packIHDR(D.width,D.height)),D.gamma&&Z.push(j.packGAMA(D.gamma));let G=j.filterData(D.data,D.width,D.height),H=P.deflateSync(G,j.getDeflateOptions());if(G=null,!H||!H.length)throw new Error("bad png - invalid compressed data response");return Z.push(j.packIDAT(H)),Z.push(j.packIEND()),w.concat(Z)}}).call(this)}).call(this,d("buffer").Buffer)},{"./constants":4,"./packer":14,buffer:32,zlib:31}],14:[function(d,m,g){(function(w){(function(){let I=d("./constants"),P=d("./crc"),F=d("./bitpacker"),$=d("./filter-pack"),D=d("zlib"),U=m.exports=function(j){if(this._options=j,j.deflateChunkSize=j.deflateChunkSize||32768,j.deflateLevel=j.deflateLevel!=null?j.deflateLevel:9,j.deflateStrategy=j.deflateStrategy!=null?j.deflateStrategy:3,j.inputHasAlpha=j.inputHasAlpha==null||j.inputHasAlpha,j.deflateFactory=j.deflateFactory||D.createDeflate,j.bitDepth=j.bitDepth||8,j.colorType=typeof j.colorType=="number"?j.colorType:I.COLORTYPE_COLOR_ALPHA,j.inputColorType=typeof j.inputColorType=="number"?j.inputColorType:I.COLORTYPE_COLOR_ALPHA,[I.COLORTYPE_GRAYSCALE,I.COLORTYPE_COLOR,I.COLORTYPE_COLOR_ALPHA,I.COLORTYPE_ALPHA].indexOf(j.colorType)===-1)throw new Error("option color type:"+j.colorType+" is not supported at present");if([I.COLORTYPE_GRAYSCALE,I.COLORTYPE_COLOR,I.COLORTYPE_COLOR_ALPHA,I.COLORTYPE_ALPHA].indexOf(j.inputColorType)===-1)throw new Error("option input color type:"+j.inputColorType+" is not supported at present");if(j.bitDepth!==8&&j.bitDepth!==16)throw new Error("option bit depth:"+j.bitDepth+" is not supported at present")};U.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},U.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},U.prototype.filterData=function(j,Z,G){let H=F(j,Z,G,this._options),q=I.COLORTYPE_TO_BPP_MAP[this._options.colorType];return $(H,Z,G,this._options,q)},U.prototype._packChunk=function(j,Z){let G=Z?Z.length:0,H=w.alloc(G+12);return H.writeUInt32BE(G,0),H.writeUInt32BE(j,4),Z&&Z.copy(H,8),H.writeInt32BE(P.crc32(H.slice(4,H.length-4)),H.length-4),H},U.prototype.packGAMA=function(j){let Z=w.alloc(4);return Z.writeUInt32BE(Math.floor(j*I.GAMMA_DIVISION),0),this._packChunk(I.TYPE_gAMA,Z)},U.prototype.packIHDR=function(j,Z){let G=w.alloc(13);return G.writeUInt32BE(j,0),G.writeUInt32BE(Z,4),G[8]=this._options.bitDepth,G[9]=this._options.colorType,G[10]=0,G[11]=0,G[12]=0,this._packChunk(I.TYPE_IHDR,G)},U.prototype.packIDAT=function(j){return this._packChunk(I.TYPE_IDAT,j)},U.prototype.packIEND=function(){return this._packChunk(I.TYPE_IEND,null)}}).call(this)}).call(this,d("buffer").Buffer)},{"./bitpacker":2,"./constants":4,"./crc":5,"./filter-pack":6,buffer:32,zlib:31}],15:[function(d,m,g){m.exports=function(w,I,P){let F=w+I-P,$=Math.abs(F-w),D=Math.abs(F-I),U=Math.abs(F-P);return $<=D&&$<=U?w:D<=U?I:P}},{}],16:[function(d,m,g){let w=d("util"),I=d("zlib"),P=d("./chunkstream"),F=d("./filter-parse-async"),$=d("./parser"),D=d("./bitmapper"),U=d("./format-normaliser"),j=m.exports=function(Z){P.call(this),this._parser=new $(Z,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=Z,this.writable=!0,this._parser.start()};w.inherits(j,P),j.prototype._handleError=function(Z){this.emit("error",Z),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0},j.prototype._inflateData=function(Z){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=I.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let G=(1+(this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3))*this._bitmapInfo.height,H=Math.max(G,I.Z_MIN_CHUNK);this._inflate=I.createInflate({chunkSize:H});let q=G,W=this.emit.bind(this,"error");this._inflate.on("error",function(J){q&&W(J)}),this._filter.on("complete",this._complete.bind(this));let Q=this._filter.write.bind(this._filter);this._inflate.on("data",function(J){q&&(J.length>q&&(J=J.slice(0,q)),q-=J.length,Q(J))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(Z)},j.prototype._handleMetaData=function(Z){this._metaData=Z,this._bitmapInfo=Object.create(Z),this._filter=new F(this._bitmapInfo)},j.prototype._handleTransColor=function(Z){this._bitmapInfo.transColor=Z},j.prototype._handlePalette=function(Z){this._bitmapInfo.palette=Z},j.prototype._simpleTransparency=function(){this._metaData.alpha=!0},j.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},j.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))},j.prototype._complete=function(Z){if(this.errord)return;let G;try{let H=D.dataToBitMap(Z,this._bitmapInfo);G=U(H,this._bitmapInfo,this._options.skipRescale),H=null}catch(H){return void this._handleError(H)}this.emit("parsed",G)}},{"./bitmapper":1,"./chunkstream":3,"./filter-parse-async":7,"./format-normaliser":10,"./parser":18,util:84,zlib:31}],17:[function(d,m,g){(function(w){(function(){let I=!0,P=d("zlib"),F=d("./sync-inflate");P.deflateSync||(I=!1);let $=d("./sync-reader"),D=d("./filter-parse-sync"),U=d("./parser"),j=d("./bitmapper"),Z=d("./format-normaliser");m.exports=function(G,H){if(!I)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let q,W,Q;function J(dt){q=dt}function K(dt){W=dt}function V(dt){W.transColor=dt}function tt(dt){W.palette=dt}function X(){W.alpha=!0}function ot(dt){Q=dt}let it=[];function lt(dt){it.push(dt)}let at=new $(G);if(new U(H,{read:at.read.bind(at),error:J,metadata:K,gamma:ot,palette:tt,transColor:V,inflateData:lt,simpleTransparency:X}).start(),at.process(),q)throw q;let ht,et=w.concat(it);if(it.length=0,W.interlace)ht=P.inflateSync(et);else{let dt=(1+(W.width*W.bpp*W.depth+7>>3))*W.height;ht=F(et,{chunkSize:dt,maxLength:dt})}if(et=null,!ht||!ht.length)throw new Error("bad png - invalid inflate data response");let ut=D.process(ht,W);et=null;let Et=j.dataToBitMap(ut,W);ut=null;let gt=Z(Et,W,H.skipRescale);return W.data=gt,W.gamma=Q||0,W}}).call(this)}).call(this,d("buffer").Buffer)},{"./bitmapper":1,"./filter-parse-sync":8,"./format-normaliser":10,"./parser":18,"./sync-inflate":21,"./sync-reader":22,buffer:32,zlib:31}],18:[function(d,m,g){(function(w){(function(){let I=d("./constants"),P=d("./crc"),F=m.exports=function($,D){this._options=$,$.checkCRC=$.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[I.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[I.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[I.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[I.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[I.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[I.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=D.read,this.error=D.error,this.metadata=D.metadata,this.gamma=D.gamma,this.transColor=D.transColor,this.palette=D.palette,this.parsed=D.parsed,this.inflateData=D.inflateData,this.finished=D.finished,this.simpleTransparency=D.simpleTransparency,this.headersFinished=D.headersFinished||function(){}};F.prototype.start=function(){this.read(I.PNG_SIGNATURE.length,this._parseSignature.bind(this))},F.prototype._parseSignature=function($){let D=I.PNG_SIGNATURE;for(let U=0;U<D.length;U++)if($[U]!==D[U])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},F.prototype._parseChunkBegin=function($){let D=$.readUInt32BE(0),U=$.readUInt32BE(4),j="";for(let G=4;G<8;G++)j+=String.fromCharCode($[G]);let Z=!!(32&$[4]);if(this._hasIHDR||U===I.TYPE_IHDR){if(this._crc=new P,this._crc.write(w.from(j)),this._chunks[U])return this._chunks[U](D);Z?this.read(D+4,this._skipChunk.bind(this)):this.error(new Error("Unsupported critical chunk type "+j))}else this.error(new Error("Expected IHDR on beggining"))},F.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},F.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},F.prototype._parseChunkEnd=function($){let D=$.readInt32BE(0),U=this._crc.crc32();this._options.checkCRC&&U!==D?this.error(new Error("Crc error - "+D+" - "+U)):this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},F.prototype._handleIHDR=function($){this.read($,this._parseIHDR.bind(this))},F.prototype._parseIHDR=function($){this._crc.write($);let D=$.readUInt32BE(0),U=$.readUInt32BE(4),j=$[8],Z=$[9],G=$[10],H=$[11],q=$[12];if(j!==8&&j!==4&&j!==2&&j!==1&&j!==16)return void this.error(new Error("Unsupported bit depth "+j));if(!(Z in I.COLORTYPE_TO_BPP_MAP))return void this.error(new Error("Unsupported color type"));if(G!==0)return void this.error(new Error("Unsupported compression method"));if(H!==0)return void this.error(new Error("Unsupported filter method"));if(q!==0&&q!==1)return void this.error(new Error("Unsupported interlace method"));this._colorType=Z;let W=I.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:D,height:U,depth:j,interlace:!!q,palette:!!(Z&I.COLORTYPE_PALETTE),color:!!(Z&I.COLORTYPE_COLOR),alpha:!!(Z&I.COLORTYPE_ALPHA),bpp:W,colorType:Z}),this._handleChunkEnd()},F.prototype._handlePLTE=function($){this.read($,this._parsePLTE.bind(this))},F.prototype._parsePLTE=function($){this._crc.write($);let D=Math.floor($.length/3);for(let U=0;U<D;U++)this._palette.push([$[3*U],$[3*U+1],$[3*U+2],255]);this.palette(this._palette),this._handleChunkEnd()},F.prototype._handleTRNS=function($){this.simpleTransparency(),this.read($,this._parseTRNS.bind(this))},F.prototype._parseTRNS=function($){if(this._crc.write($),this._colorType===I.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0)return void this.error(new Error("Transparency chunk must be after palette"));if($.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(let D=0;D<$.length;D++)this._palette[D][3]=$[D];this.palette(this._palette)}this._colorType===I.COLORTYPE_GRAYSCALE&&this.transColor([$.readUInt16BE(0)]),this._colorType===I.COLORTYPE_COLOR&&this.transColor([$.readUInt16BE(0),$.readUInt16BE(2),$.readUInt16BE(4)]),this._handleChunkEnd()},F.prototype._handleGAMA=function($){this.read($,this._parseGAMA.bind(this))},F.prototype._parseGAMA=function($){this._crc.write($),this.gamma($.readUInt32BE(0)/I.GAMMA_DIVISION),this._handleChunkEnd()},F.prototype._handleIDAT=function($){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-$,this._parseIDAT.bind(this,$))},F.prototype._parseIDAT=function($,D){if(this._crc.write(D),this._colorType===I.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(D);let U=$-D.length;U>0?this._handleIDAT(U):this._handleChunkEnd()},F.prototype._handleIEND=function($){this.read($,this._parseIEND.bind(this))},F.prototype._parseIEND=function($){this._crc.write($),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}}).call(this)}).call(this,d("buffer").Buffer)},{"./constants":4,"./crc":5,buffer:32}],19:[function(d,m,g){let w=d("./parser-sync"),I=d("./packer-sync");g.read=function(P,F){return w(P,F||{})},g.write=function(P,F){return I(P,F)}},{"./packer-sync":13,"./parser-sync":17}],20:[function(d,m,g){(function(w,I){(function(){let P=d("util"),F=d("stream"),$=d("./parser-async"),D=d("./packer-async"),U=d("./png-sync"),j=g.PNG=function(Z){F.call(this),Z=Z||{},this.width=0|Z.width,this.height=0|Z.height,this.data=this.width>0&&this.height>0?I.alloc(4*this.width*this.height):null,Z.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new $(Z),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",(function(G){this.data=G,this.emit("parsed",G)}).bind(this)),this._packer=new D(Z),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};P.inherits(j,F),j.sync=U,j.prototype.pack=function(){return this.data&&this.data.length?(w.nextTick((function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}).bind(this)),this):(this.emit("error","No data provided"),this)},j.prototype.parse=function(Z,G){if(G){let H,q;H=(function(W){this.removeListener("error",q),this.data=W,G(null,this)}).bind(this),q=(function(W){this.removeListener("parsed",H),G(W,null)}).bind(this),this.once("parsed",H),this.once("error",q)}return this.end(Z),this},j.prototype.write=function(Z){return this._parser.write(Z),!0},j.prototype.end=function(Z){this._parser.end(Z)},j.prototype._metadata=function(Z){this.width=Z.width,this.height=Z.height,this.emit("metadata",Z)},j.prototype._gamma=function(Z){this.gamma=Z},j.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},j.bitblt=function(Z,G,H,q,W,Q,J,K){if(q|=0,W|=0,Q|=0,J|=0,K|=0,(H|=0)>Z.width||q>Z.height||H+W>Z.width||q+Q>Z.height)throw new Error("bitblt reading outside image");if(J>G.width||K>G.height||J+W>G.width||K+Q>G.height)throw new Error("bitblt writing outside image");for(let V=0;V<Q;V++)Z.data.copy(G.data,(K+V)*G.width+J<<2,(q+V)*Z.width+H<<2,(q+V)*Z.width+H+W<<2)},j.prototype.bitblt=function(Z,G,H,q,W,Q,J){return j.bitblt(this,Z,G,H,q,W,Q,J),this},j.adjustGamma=function(Z){if(Z.gamma){for(let G=0;G<Z.height;G++)for(let H=0;H<Z.width;H++){let q=Z.width*G+H<<2;for(let W=0;W<3;W++){let Q=Z.data[q+W]/255;Q=Math.pow(Q,1/2.2/Z.gamma),Z.data[q+W]=Math.round(255*Q)}}Z.gamma=0}},j.prototype.adjustGamma=function(){j.adjustGamma(this)}}).call(this)}).call(this,d("_process"),d("buffer").Buffer)},{"./packer-async":12,"./parser-async":16,"./png-sync":19,_process:63,buffer:32,stream:65,util:84}],21:[function(d,m,g){(function(w,I){(function(){let P=d("assert").ok,F=d("zlib"),$=d("util"),D=d("buffer").kMaxLength;function U(q){if(!(this instanceof U))return new U(q);q&&q.chunkSize<F.Z_MIN_CHUNK&&(q.chunkSize=F.Z_MIN_CHUNK),F.Inflate.call(this,q),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,q&&q.maxLength!=null&&(this._maxLength=q.maxLength)}function j(q){return new U(q)}function Z(q,W){q._handle&&(q._handle.close(),q._handle=null)}function G(q,W){if(typeof W=="string"&&(W=I.from(W)),!(W instanceof I))throw new TypeError("Not a string or buffer");let Q=q._finishFlushFlag;return Q==null&&(Q=F.Z_FINISH),q._processChunk(W,Q)}function H(q,W){return G(new U(W),q)}U.prototype._processChunk=function(q,W,Q){if(typeof Q=="function")return F.Inflate._processChunk.call(this,q,W,Q);let J,K,V=this,tt=q&&q.length,X=this._chunkSize-this._offset,ot=this._maxLength,it=0,lt=[],at=0;function ht(ut,Et){if(V._hadError)return;let gt=X-Et;if(P(gt>=0,"have should not go down"),gt>0){let dt=V._buffer.slice(V._offset,V._offset+gt);if(V._offset+=gt,dt.length>ot&&(dt=dt.slice(0,ot)),lt.push(dt),at+=dt.length,ot-=dt.length,ot===0)return!1}return(Et===0||V._offset>=V._chunkSize)&&(X=V._chunkSize,V._offset=0,V._buffer=I.allocUnsafe(V._chunkSize)),Et===0&&(it+=tt-ut,tt=ut,!0)}this.on("error",function(ut){J=ut}),P(this._handle,"zlib binding closed");do K=this._handle.writeSync(W,q,it,tt,this._buffer,this._offset,X),K=K||this._writeState;while(!this._hadError&&ht(K[0],K[1]));if(this._hadError)throw J;if(at>=D)throw Z(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+D.toString(16)+" bytes");let et=I.concat(lt,at);return Z(this),et},$.inherits(U,F.Inflate),m.exports=g=H,g.Inflate=U,g.createInflate=j,g.inflateSync=H}).call(this)}).call(this,d("_process"),d("buffer").Buffer)},{_process:63,assert:23,buffer:32,util:84,zlib:31}],22:[function(d,m,g){let w=m.exports=function(I){this._buffer=I,this._reads=[]};w.prototype.read=function(I,P){this._reads.push({length:Math.abs(I),allowLess:I<0,func:P})},w.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let I=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=I.length||I.allowLess))break;{this._reads.shift();let P=this._buffer;this._buffer=P.slice(I.length),I.func.call(this,P.slice(0,I.length))}}if(this._reads.length>0)throw new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)throw new Error("unrecognised content at end of stream")}},{}],23:[function(d,m,g){(function(w){(function(){var I=d("object-assign");/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */function P(gt,dt){if(gt===dt)return 0;for(var yt=gt.length,Nt=dt.length,Bt=0,St=Math.min(yt,Nt);Bt<St;++Bt)if(gt[Bt]!==dt[Bt]){yt=gt[Bt],Nt=dt[Bt];break}return yt<Nt?-1:Nt<yt?1:0}function F(gt){return w.Buffer&&typeof w.Buffer.isBuffer=="function"?w.Buffer.isBuffer(gt):!(gt==null||!gt._isBuffer)}var $=d("util/"),D=Object.prototype.hasOwnProperty,U=Array.prototype.slice,j=(function(){}).name==="foo";function Z(gt){return Object.prototype.toString.call(gt)}function G(gt){return!F(gt)&&typeof w.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(gt):!!gt&&(gt instanceof DataView||!!(gt.buffer&&gt.buffer instanceof ArrayBuffer)))}var H=m.exports=tt,q=/\s*function\s+([^\(\s]*)\s*/;function W(gt){if($.isFunction(gt)){if(j)return gt.name;var dt=gt.toString().match(q);return dt&&dt[1]}}function Q(gt,dt){return typeof gt=="string"?gt.length<dt?gt:gt.slice(0,dt):gt}function J(gt){if(j||!$.isFunction(gt))return $.inspect(gt);var dt=W(gt);return"[Function"+(dt?": "+dt:"")+"]"}function K(gt){return Q(J(gt.actual),128)+" "+gt.operator+" "+Q(J(gt.expected),128)}function V(gt,dt,yt,Nt,Bt){throw new H.AssertionError({message:yt,actual:gt,expected:dt,operator:Nt,stackStartFunction:Bt})}function tt(gt,dt){gt||V(gt,!0,dt,"==",H.ok)}function X(gt,dt,yt,Nt){if(gt===dt)return!0;if(F(gt)&&F(dt))return P(gt,dt)===0;if($.isDate(gt)&&$.isDate(dt))return gt.getTime()===dt.getTime();if($.isRegExp(gt)&&$.isRegExp(dt))return gt.source===dt.source&&gt.global===dt.global&&gt.multiline===dt.multiline&&gt.lastIndex===dt.lastIndex&&gt.ignoreCase===dt.ignoreCase;if(gt!==null&&typeof gt=="object"||dt!==null&&typeof dt=="object"){if(G(gt)&&G(dt)&&Z(gt)===Z(dt)&&!(gt instanceof Float32Array||gt instanceof Float64Array))return P(new Uint8Array(gt.buffer),new Uint8Array(dt.buffer))===0;if(F(gt)!==F(dt))return!1;var Bt=(Nt=Nt||{actual:[],expected:[]}).actual.indexOf(gt);return Bt!==-1&&Bt===Nt.expected.indexOf(dt)||(Nt.actual.push(gt),Nt.expected.push(dt),it(gt,dt,yt,Nt))}return yt?gt===dt:gt==dt}function ot(gt){return Object.prototype.toString.call(gt)=="[object Arguments]"}function it(gt,dt,yt,Nt){if(gt==null||dt==null)return!1;if($.isPrimitive(gt)||$.isPrimitive(dt))return gt===dt;if(yt&&Object.getPrototypeOf(gt)!==Object.getPrototypeOf(dt))return!1;var Bt=ot(gt),St=ot(dt);if(Bt&&!St||!Bt&&St)return!1;if(Bt)return X(gt=U.call(gt),dt=U.call(dt),yt);var zt,kt,Ct=Et(gt),Ut=Et(dt);if(Ct.length!==Ut.length)return!1;for(Ct.sort(),Ut.sort(),kt=Ct.length-1;kt>=0;kt--)if(Ct[kt]!==Ut[kt])return!1;for(kt=Ct.length-1;kt>=0;kt--)if(!X(gt[zt=Ct[kt]],dt[zt],yt,Nt))return!1;return!0}function lt(gt,dt,yt){X(gt,dt,!0)&&V(gt,dt,yt,"notDeepStrictEqual",lt)}function at(gt,dt){if(!gt||!dt)return!1;if(Object.prototype.toString.call(dt)=="[object RegExp]")return dt.test(gt);try{if(gt instanceof dt)return!0}catch{}return!Error.isPrototypeOf(dt)&&dt.call({},gt)===!0}function ht(gt){var dt;try{gt()}catch(yt){dt=yt}return dt}function et(gt,dt,yt,Nt){var Bt;if(typeof dt!="function")throw new TypeError('"block" argument must be a function');typeof yt=="string"&&(Nt=yt,yt=null),Bt=ht(dt),Nt=(yt&&yt.name?" ("+yt.name+").":".")+(Nt?" "+Nt:"."),gt&&!Bt&&V(Bt,yt,"Missing expected exception"+Nt);var St=typeof Nt=="string",zt=!gt&&Bt&&!yt;if((!gt&&$.isError(Bt)&&St&&at(Bt,yt)||zt)&&V(Bt,yt,"Got unwanted exception"+Nt),gt&&Bt&&yt&&!at(Bt,yt)||!gt&&Bt)throw Bt}function ut(gt,dt){gt||V(gt,!0,dt,"==",ut)}H.AssertionError=function(gt){this.name="AssertionError",this.actual=gt.actual,this.expected=gt.expected,this.operator=gt.operator,gt.message?(this.message=gt.message,this.generatedMessage=!1):(this.message=K(this),this.generatedMessage=!0);var dt=gt.stackStartFunction||V;if(Error.captureStackTrace)Error.captureStackTrace(this,dt);else{var yt=new Error;if(yt.stack){var Nt=yt.stack,Bt=W(dt),St=Nt.indexOf(`
`+Bt);if(St>=0){var zt=Nt.indexOf(`
`,St+1);Nt=Nt.substring(zt+1)}this.stack=Nt}}},$.inherits(H.AssertionError,Error),H.fail=V,H.ok=tt,H.equal=function(gt,dt,yt){gt!=dt&&V(gt,dt,yt,"==",H.equal)},H.notEqual=function(gt,dt,yt){gt==dt&&V(gt,dt,yt,"!=",H.notEqual)},H.deepEqual=function(gt,dt,yt){X(gt,dt,!1)||V(gt,dt,yt,"deepEqual",H.deepEqual)},H.deepStrictEqual=function(gt,dt,yt){X(gt,dt,!0)||V(gt,dt,yt,"deepStrictEqual",H.deepStrictEqual)},H.notDeepEqual=function(gt,dt,yt){X(gt,dt,!1)&&V(gt,dt,yt,"notDeepEqual",H.notDeepEqual)},H.notDeepStrictEqual=lt,H.strictEqual=function(gt,dt,yt){gt!==dt&&V(gt,dt,yt,"===",H.strictEqual)},H.notStrictEqual=function(gt,dt,yt){gt===dt&&V(gt,dt,yt,"!==",H.notStrictEqual)},H.throws=function(gt,dt,yt){et(!0,gt,dt,yt)},H.doesNotThrow=function(gt,dt,yt){et(!1,gt,dt,yt)},H.ifError=function(gt){if(gt)throw gt},H.strict=I(ut,H,{equal:H.strictEqual,deepEqual:H.deepStrictEqual,notEqual:H.notStrictEqual,notDeepEqual:H.notDeepStrictEqual}),H.strict.strict=H.strict;var Et=Object.keys||function(gt){var dt=[];for(var yt in gt)D.call(gt,yt)&&dt.push(yt);return dt}}).call(this)}).call(this,commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":51,"util/":26}],24:[function(d,m,g){typeof Object.create=="function"?m.exports=function(w,I){w.super_=I,w.prototype=Object.create(I.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}})}:m.exports=function(w,I){w.super_=I;var P=function(){};P.prototype=I.prototype,w.prototype=new P,w.prototype.constructor=w}},{}],25:[function(d,m,g){m.exports=function(w){return w&&typeof w=="object"&&typeof w.copy=="function"&&typeof w.fill=="function"&&typeof w.readUInt8=="function"}},{}],26:[function(d,m,g){(function(w,I){(function(){var P=/%[sdj%]/g;g.format=function(kt){if(!it(kt)){for(var Ct=[],Ut=0;Ut<arguments.length;Ut++)Ct.push(D(arguments[Ut]));return Ct.join(" ")}Ut=1;for(var Dt=arguments,Tt=Dt.length,Rt=String(kt).replace(P,function(Ht){if(Ht==="%%")return"%";if(Ut>=Tt)return Ht;switch(Ht){case"%s":return String(Dt[Ut++]);case"%d":return Number(Dt[Ut++]);case"%j":try{return JSON.stringify(Dt[Ut++])}catch{return"[Circular]"}default:return Ht}}),Lt=Dt[Ut];Ut<Tt;Lt=Dt[++Ut])tt(Lt)||!et(Lt)?Rt+=" "+Lt:Rt+=" "+D(Lt);return Rt},g.deprecate=function(kt,Ct){if(at(I.process))return function(){return g.deprecate(kt,Ct).apply(this,arguments)};if(w.noDeprecation===!0)return kt;var Ut=!1;function Dt(){if(!Ut){if(w.throwDeprecation)throw new Error(Ct);w.traceDeprecation?console.trace(Ct):console.error(Ct),Ut=!0}return kt.apply(this,arguments)}return Dt};var F,$={};function D(kt,Ct){var Ut={seen:[],stylize:j};return arguments.length>=3&&(Ut.depth=arguments[2]),arguments.length>=4&&(Ut.colors=arguments[3]),V(Ct)?Ut.showHidden=Ct:Ct&&g._extend(Ut,Ct),at(Ut.showHidden)&&(Ut.showHidden=!1),at(Ut.depth)&&(Ut.depth=2),at(Ut.colors)&&(Ut.colors=!1),at(Ut.customInspect)&&(Ut.customInspect=!0),Ut.colors&&(Ut.stylize=U),G(Ut,kt,Ut.depth)}function U(kt,Ct){var Ut=D.styles[Ct];return Ut?"\x1B["+D.colors[Ut][0]+"m"+kt+"\x1B["+D.colors[Ut][1]+"m":kt}function j(kt,Ct){return kt}function Z(kt){var Ct={};return kt.forEach(function(Ut,Dt){Ct[Ut]=!0}),Ct}function G(kt,Ct,Ut){if(kt.customInspect&&Ct&&gt(Ct.inspect)&&Ct.inspect!==g.inspect&&(!Ct.constructor||Ct.constructor.prototype!==Ct)){var Dt=Ct.inspect(Ut,kt);return it(Dt)||(Dt=G(kt,Dt,Ut)),Dt}var Tt=H(kt,Ct);if(Tt)return Tt;var Rt=Object.keys(Ct),Lt=Z(Rt);if(kt.showHidden&&(Rt=Object.getOwnPropertyNames(Ct)),Et(Ct)&&(Rt.indexOf("message")>=0||Rt.indexOf("description")>=0))return q(Ct);if(Rt.length===0){if(gt(Ct)){var Ht=Ct.name?": "+Ct.name:"";return kt.stylize("[Function"+Ht+"]","special")}if(ht(Ct))return kt.stylize(RegExp.prototype.toString.call(Ct),"regexp");if(ut(Ct))return kt.stylize(Date.prototype.toString.call(Ct),"date");if(Et(Ct))return q(Ct)}var Wt,Pt="",nt=!1,Mt=["{","}"];return K(Ct)&&(nt=!0,Mt=["[","]"]),gt(Ct)&&(Pt=" [Function"+(Ct.name?": "+Ct.name:"")+"]"),ht(Ct)&&(Pt=" "+RegExp.prototype.toString.call(Ct)),ut(Ct)&&(Pt=" "+Date.prototype.toUTCString.call(Ct)),Et(Ct)&&(Pt=" "+q(Ct)),Rt.length!==0||nt&&Ct.length!=0?Ut<0?ht(Ct)?kt.stylize(RegExp.prototype.toString.call(Ct),"regexp"):kt.stylize("[Object]","special"):(kt.seen.push(Ct),Wt=nt?W(kt,Ct,Ut,Lt,Rt):Rt.map(function(ct){return Q(kt,Ct,Ut,Lt,ct,nt)}),kt.seen.pop(),J(Wt,Pt,Mt)):Mt[0]+Pt+Mt[1]}function H(kt,Ct){if(at(Ct))return kt.stylize("undefined","undefined");if(it(Ct)){var Ut="'"+JSON.stringify(Ct).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return kt.stylize(Ut,"string")}return ot(Ct)?kt.stylize(""+Ct,"number"):V(Ct)?kt.stylize(""+Ct,"boolean"):tt(Ct)?kt.stylize("null","null"):void 0}function q(kt){return"["+Error.prototype.toString.call(kt)+"]"}function W(kt,Ct,Ut,Dt,Tt){for(var Rt=[],Lt=0,Ht=Ct.length;Lt<Ht;++Lt)zt(Ct,String(Lt))?Rt.push(Q(kt,Ct,Ut,Dt,String(Lt),!0)):Rt.push("");return Tt.forEach(function(Wt){Wt.match(/^\d+$/)||Rt.push(Q(kt,Ct,Ut,Dt,Wt,!0))}),Rt}function Q(kt,Ct,Ut,Dt,Tt,Rt){var Lt,Ht,Wt;if((Wt=Object.getOwnPropertyDescriptor(Ct,Tt)||{value:Ct[Tt]}).get?Ht=Wt.set?kt.stylize("[Getter/Setter]","special"):kt.stylize("[Getter]","special"):Wt.set&&(Ht=kt.stylize("[Setter]","special")),zt(Dt,Tt)||(Lt="["+Tt+"]"),Ht||(kt.seen.indexOf(Wt.value)<0?(Ht=tt(Ut)?G(kt,Wt.value,null):G(kt,Wt.value,Ut-1)).indexOf(`
`)>-1&&(Ht=Rt?Ht.split(`
`).map(function(Pt){return"  "+Pt}).join(`
`).substr(2):`
`+Ht.split(`
`).map(function(Pt){return"   "+Pt}).join(`
`)):Ht=kt.stylize("[Circular]","special")),at(Lt)){if(Rt&&Tt.match(/^\d+$/))return Ht;(Lt=JSON.stringify(""+Tt)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Lt=Lt.substr(1,Lt.length-2),Lt=kt.stylize(Lt,"name")):(Lt=Lt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Lt=kt.stylize(Lt,"string"))}return Lt+": "+Ht}function J(kt,Ct,Ut){return kt.reduce(function(Dt,Tt){return Tt.indexOf(`
`),Dt+Tt.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Ut[0]+(Ct===""?"":Ct+`
 `)+" "+kt.join(`,
  `)+" "+Ut[1]:Ut[0]+Ct+" "+kt.join(", ")+" "+Ut[1]}function K(kt){return Array.isArray(kt)}function V(kt){return typeof kt=="boolean"}function tt(kt){return kt===null}function X(kt){return kt==null}function ot(kt){return typeof kt=="number"}function it(kt){return typeof kt=="string"}function lt(kt){return typeof kt=="symbol"}function at(kt){return kt===void 0}function ht(kt){return et(kt)&&yt(kt)==="[object RegExp]"}function et(kt){return typeof kt=="object"&&kt!==null}function ut(kt){return et(kt)&&yt(kt)==="[object Date]"}function Et(kt){return et(kt)&&(yt(kt)==="[object Error]"||kt instanceof Error)}function gt(kt){return typeof kt=="function"}function dt(kt){return kt===null||typeof kt=="boolean"||typeof kt=="number"||typeof kt=="string"||typeof kt=="symbol"||kt===void 0}function yt(kt){return Object.prototype.toString.call(kt)}function Nt(kt){return kt<10?"0"+kt.toString(10):kt.toString(10)}g.debuglog=function(kt){if(at(F)&&(F=w.env.NODE_DEBUG||""),kt=kt.toUpperCase(),!$[kt])if(new RegExp("\\b"+kt+"\\b","i").test(F)){var Ct=w.pid;$[kt]=function(){var Ut=g.format.apply(g,arguments);console.error("%s %d: %s",kt,Ct,Ut)}}else $[kt]=function(){};return $[kt]},g.inspect=D,D.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},D.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},g.isArray=K,g.isBoolean=V,g.isNull=tt,g.isNullOrUndefined=X,g.isNumber=ot,g.isString=it,g.isSymbol=lt,g.isUndefined=at,g.isRegExp=ht,g.isObject=et,g.isDate=ut,g.isError=Et,g.isFunction=gt,g.isPrimitive=dt,g.isBuffer=d("./support/isBuffer");var Bt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function St(){var kt=new Date,Ct=[Nt(kt.getHours()),Nt(kt.getMinutes()),Nt(kt.getSeconds())].join(":");return[kt.getDate(),Bt[kt.getMonth()],Ct].join(" ")}function zt(kt,Ct){return Object.prototype.hasOwnProperty.call(kt,Ct)}g.log=function(){console.log("%s - %s",St(),g.format.apply(g,arguments))},g.inherits=d("inherits"),g._extend=function(kt,Ct){if(!Ct||!et(Ct))return kt;for(var Ut=Object.keys(Ct),Dt=Ut.length;Dt--;)kt[Ut[Dt]]=Ct[Ut[Dt]];return kt}}).call(this)}).call(this,d("_process"),commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":25,_process:63,inherits:24}],27:[function(d,m,g){(function(w){(function(){var I=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],P=typeof globalThis>"u"?w:globalThis;m.exports=function(){for(var F=[],$=0;$<I.length;$++)typeof P[I[$]]=="function"&&(F[F.length]=I[$]);return F}}).call(this)}).call(this,commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],28:[function(d,m,g){g.byteLength=j,g.toByteArray=G,g.fromByteArray=W;for(var w=[],I=[],P=typeof Uint8Array<"u"?Uint8Array:Array,F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$=0,D=F.length;$<D;++$)w[$]=F[$],I[F.charCodeAt($)]=$;function U(Q){var J=Q.length;if(J%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var K=Q.indexOf("=");return K===-1&&(K=J),[K,K===J?0:4-K%4]}function j(Q){var J=U(Q),K=J[0],V=J[1];return 3*(K+V)/4-V}function Z(Q,J,K){return 3*(J+K)/4-K}function G(Q){var J,K,V=U(Q),tt=V[0],X=V[1],ot=new P(Z(Q,tt,X)),it=0,lt=X>0?tt-4:tt;for(K=0;K<lt;K+=4)J=I[Q.charCodeAt(K)]<<18|I[Q.charCodeAt(K+1)]<<12|I[Q.charCodeAt(K+2)]<<6|I[Q.charCodeAt(K+3)],ot[it++]=J>>16&255,ot[it++]=J>>8&255,ot[it++]=255&J;return X===2&&(J=I[Q.charCodeAt(K)]<<2|I[Q.charCodeAt(K+1)]>>4,ot[it++]=255&J),X===1&&(J=I[Q.charCodeAt(K)]<<10|I[Q.charCodeAt(K+1)]<<4|I[Q.charCodeAt(K+2)]>>2,ot[it++]=J>>8&255,ot[it++]=255&J),ot}function H(Q){return w[Q>>18&63]+w[Q>>12&63]+w[Q>>6&63]+w[63&Q]}function q(Q,J,K){for(var V,tt=[],X=J;X<K;X+=3)V=(Q[X]<<16&16711680)+(Q[X+1]<<8&65280)+(255&Q[X+2]),tt.push(H(V));return tt.join("")}function W(Q){for(var J,K=Q.length,V=K%3,tt=[],X=16383,ot=0,it=K-V;ot<it;ot+=X)tt.push(q(Q,ot,ot+X>it?it:ot+X));return V===1?(J=Q[K-1],tt.push(w[J>>2]+w[J<<4&63]+"==")):V===2&&(J=(Q[K-2]<<8)+Q[K-1],tt.push(w[J>>10]+w[J>>4&63]+w[J<<2&63]+"=")),tt.join("")}I[45]=62,I[95]=63},{}],29:[function(d,m,g){},{}],30:[function(d,m,g){(function(w,I){(function(){var P=d("assert"),F=d("pako/lib/zlib/zstream"),$=d("pako/lib/zlib/deflate.js"),D=d("pako/lib/zlib/inflate.js"),U=d("pako/lib/zlib/constants");for(var j in U)g[j]=U[j];g.NONE=0,g.DEFLATE=1,g.INFLATE=2,g.GZIP=3,g.GUNZIP=4,g.DEFLATERAW=5,g.INFLATERAW=6,g.UNZIP=7;var Z=31,G=139;function H(q){if(typeof q!="number"||q<g.DEFLATE||q>g.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=q,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}H.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,P(this.init_done,"close before init"),P(this.mode<=g.UNZIP),this.mode===g.DEFLATE||this.mode===g.GZIP||this.mode===g.DEFLATERAW?$.deflateEnd(this.strm):this.mode!==g.INFLATE&&this.mode!==g.GUNZIP&&this.mode!==g.INFLATERAW&&this.mode!==g.UNZIP||D.inflateEnd(this.strm),this.mode=g.NONE,this.dictionary=null)},H.prototype.write=function(q,W,Q,J,K,V,tt){return this._write(!0,q,W,Q,J,K,V,tt)},H.prototype.writeSync=function(q,W,Q,J,K,V,tt){return this._write(!1,q,W,Q,J,K,V,tt)},H.prototype._write=function(q,W,Q,J,K,V,tt,X){if(P.equal(arguments.length,8),P(this.init_done,"write before init"),P(this.mode!==g.NONE,"already finalized"),P.equal(!1,this.write_in_progress,"write already in progress"),P.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,P.equal(!1,W===void 0,"must provide flush value"),this.write_in_progress=!0,W!==g.Z_NO_FLUSH&&W!==g.Z_PARTIAL_FLUSH&&W!==g.Z_SYNC_FLUSH&&W!==g.Z_FULL_FLUSH&&W!==g.Z_FINISH&&W!==g.Z_BLOCK)throw new Error("Invalid flush value");if(Q==null&&(Q=I.alloc(0),K=0,J=0),this.strm.avail_in=K,this.strm.input=Q,this.strm.next_in=J,this.strm.avail_out=X,this.strm.output=V,this.strm.next_out=tt,this.flush=W,!q)return this._process(),this._checkError()?this._afterSync():void 0;var ot=this;return w.nextTick(function(){ot._process(),ot._after()}),this},H.prototype._afterSync=function(){var q=this.strm.avail_out,W=this.strm.avail_in;return this.write_in_progress=!1,[W,q]},H.prototype._process=function(){var q=null;switch(this.mode){case g.DEFLATE:case g.GZIP:case g.DEFLATERAW:this.err=$.deflate(this.strm,this.flush);break;case g.UNZIP:switch(this.strm.avail_in>0&&(q=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(q===null)break;if(this.strm.input[q]!==Z){this.mode=g.INFLATE;break}if(this.gzip_id_bytes_read=1,q++,this.strm.avail_in===1)break;case 1:if(q===null)break;this.strm.input[q]===G?(this.gzip_id_bytes_read=2,this.mode=g.GUNZIP):this.mode=g.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case g.INFLATE:case g.GUNZIP:case g.INFLATERAW:for(this.err=D.inflate(this.strm,this.flush),this.err===g.Z_NEED_DICT&&this.dictionary&&(this.err=D.inflateSetDictionary(this.strm,this.dictionary),this.err===g.Z_OK?this.err=D.inflate(this.strm,this.flush):this.err===g.Z_DATA_ERROR&&(this.err=g.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===g.GUNZIP&&this.err===g.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=D.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},H.prototype._checkError=function(){switch(this.err){case g.Z_OK:case g.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===g.Z_FINISH)return this._error("unexpected end of file"),!1;break;case g.Z_STREAM_END:break;case g.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},H.prototype._after=function(){if(this._checkError()){var q=this.strm.avail_out,W=this.strm.avail_in;this.write_in_progress=!1,this.callback(W,q),this.pending_close&&this.close()}},H.prototype._error=function(q){this.strm.msg&&(q=this.strm.msg),this.onerror(q,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},H.prototype.init=function(q,W,Q,J,K){P(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),P(q>=8&&q<=15,"invalid windowBits"),P(W>=-1&&W<=9,"invalid compression level"),P(Q>=1&&Q<=9,"invalid memlevel"),P(J===g.Z_FILTERED||J===g.Z_HUFFMAN_ONLY||J===g.Z_RLE||J===g.Z_FIXED||J===g.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(W,q,Q,J,K),this._setDictionary()},H.prototype.params=function(){throw new Error("deflateParams Not supported")},H.prototype.reset=function(){this._reset(),this._setDictionary()},H.prototype._init=function(q,W,Q,J,K){switch(this.level=q,this.windowBits=W,this.memLevel=Q,this.strategy=J,this.flush=g.Z_NO_FLUSH,this.err=g.Z_OK,this.mode!==g.GZIP&&this.mode!==g.GUNZIP||(this.windowBits+=16),this.mode===g.UNZIP&&(this.windowBits+=32),this.mode!==g.DEFLATERAW&&this.mode!==g.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new F,this.mode){case g.DEFLATE:case g.GZIP:case g.DEFLATERAW:this.err=$.deflateInit2(this.strm,this.level,g.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case g.INFLATE:case g.GUNZIP:case g.INFLATERAW:case g.UNZIP:this.err=D.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==g.Z_OK&&this._error("Init error"),this.dictionary=K,this.write_in_progress=!1,this.init_done=!0},H.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=g.Z_OK,this.mode){case g.DEFLATE:case g.DEFLATERAW:this.err=$.deflateSetDictionary(this.strm,this.dictionary)}this.err!==g.Z_OK&&this._error("Failed to set dictionary")}},H.prototype._reset=function(){switch(this.err=g.Z_OK,this.mode){case g.DEFLATE:case g.DEFLATERAW:case g.GZIP:this.err=$.deflateReset(this.strm);break;case g.INFLATE:case g.INFLATERAW:case g.GUNZIP:this.err=D.inflateReset(this.strm)}this.err!==g.Z_OK&&this._error("Failed to reset stream")},g.Zlib=H}).call(this)}).call(this,d("_process"),d("buffer").Buffer)},{_process:63,assert:23,buffer:32,"pako/lib/zlib/constants":54,"pako/lib/zlib/deflate.js":56,"pako/lib/zlib/inflate.js":58,"pako/lib/zlib/zstream":62}],31:[function(d,m,g){(function(w){(function(){var I=d("buffer").Buffer,P=d("stream").Transform,F=d("./binding"),$=d("util"),D=d("assert").ok,U=d("buffer").kMaxLength,j="Cannot create final Buffer. It would be larger than 0x"+U.toString(16)+" bytes";F.Z_MIN_WINDOWBITS=8,F.Z_MAX_WINDOWBITS=15,F.Z_DEFAULT_WINDOWBITS=15,F.Z_MIN_CHUNK=64,F.Z_MAX_CHUNK=1/0,F.Z_DEFAULT_CHUNK=16384,F.Z_MIN_MEMLEVEL=1,F.Z_MAX_MEMLEVEL=9,F.Z_DEFAULT_MEMLEVEL=8,F.Z_MIN_LEVEL=-1,F.Z_MAX_LEVEL=9,F.Z_DEFAULT_LEVEL=F.Z_DEFAULT_COMPRESSION;for(var Z=Object.keys(F),G=0;G<Z.length;G++){var H=Z[G];H.match(/^Z/)&&Object.defineProperty(g,H,{enumerable:!0,value:F[H],writable:!1})}for(var q={Z_OK:F.Z_OK,Z_STREAM_END:F.Z_STREAM_END,Z_NEED_DICT:F.Z_NEED_DICT,Z_ERRNO:F.Z_ERRNO,Z_STREAM_ERROR:F.Z_STREAM_ERROR,Z_DATA_ERROR:F.Z_DATA_ERROR,Z_MEM_ERROR:F.Z_MEM_ERROR,Z_BUF_ERROR:F.Z_BUF_ERROR,Z_VERSION_ERROR:F.Z_VERSION_ERROR},W=Object.keys(q),Q=0;Q<W.length;Q++){var J=W[Q];q[q[J]]=J}function K(dt,yt,Nt){var Bt=[],St=0;function zt(){for(var Ut;(Ut=dt.read())!==null;)Bt.push(Ut),St+=Ut.length;dt.once("readable",zt)}function kt(Ut){dt.removeListener("end",Ct),dt.removeListener("readable",zt),Nt(Ut)}function Ct(){var Ut,Dt=null;St>=U?Dt=new RangeError(j):Ut=I.concat(Bt,St),Bt=[],dt.close(),Nt(Dt,Ut)}dt.on("error",kt),dt.on("end",Ct),dt.end(yt),zt()}function V(dt,yt){if(typeof yt=="string"&&(yt=I.from(yt)),!I.isBuffer(yt))throw new TypeError("Not a string or buffer");var Nt=dt._finishFlushFlag;return dt._processChunk(yt,Nt)}function tt(dt){if(!(this instanceof tt))return new tt(dt);ut.call(this,dt,F.DEFLATE)}function X(dt){if(!(this instanceof X))return new X(dt);ut.call(this,dt,F.INFLATE)}function ot(dt){if(!(this instanceof ot))return new ot(dt);ut.call(this,dt,F.GZIP)}function it(dt){if(!(this instanceof it))return new it(dt);ut.call(this,dt,F.GUNZIP)}function lt(dt){if(!(this instanceof lt))return new lt(dt);ut.call(this,dt,F.DEFLATERAW)}function at(dt){if(!(this instanceof at))return new at(dt);ut.call(this,dt,F.INFLATERAW)}function ht(dt){if(!(this instanceof ht))return new ht(dt);ut.call(this,dt,F.UNZIP)}function et(dt){return dt===F.Z_NO_FLUSH||dt===F.Z_PARTIAL_FLUSH||dt===F.Z_SYNC_FLUSH||dt===F.Z_FULL_FLUSH||dt===F.Z_FINISH||dt===F.Z_BLOCK}function ut(dt,yt){var Nt=this;if(this._opts=dt=dt||{},this._chunkSize=dt.chunkSize||g.Z_DEFAULT_CHUNK,P.call(this,dt),dt.flush&&!et(dt.flush))throw new Error("Invalid flush flag: "+dt.flush);if(dt.finishFlush&&!et(dt.finishFlush))throw new Error("Invalid flush flag: "+dt.finishFlush);if(this._flushFlag=dt.flush||F.Z_NO_FLUSH,this._finishFlushFlag=dt.finishFlush!==void 0?dt.finishFlush:F.Z_FINISH,dt.chunkSize&&(dt.chunkSize<g.Z_MIN_CHUNK||dt.chunkSize>g.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+dt.chunkSize);if(dt.windowBits&&(dt.windowBits<g.Z_MIN_WINDOWBITS||dt.windowBits>g.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+dt.windowBits);if(dt.level&&(dt.level<g.Z_MIN_LEVEL||dt.level>g.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+dt.level);if(dt.memLevel&&(dt.memLevel<g.Z_MIN_MEMLEVEL||dt.memLevel>g.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+dt.memLevel);if(dt.strategy&&dt.strategy!=g.Z_FILTERED&&dt.strategy!=g.Z_HUFFMAN_ONLY&&dt.strategy!=g.Z_RLE&&dt.strategy!=g.Z_FIXED&&dt.strategy!=g.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+dt.strategy);if(dt.dictionary&&!I.isBuffer(dt.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new F.Zlib(yt);var Bt=this;this._hadError=!1,this._handle.onerror=function(kt,Ct){Et(Bt),Bt._hadError=!0;var Ut=new Error(kt);Ut.errno=Ct,Ut.code=g.codes[Ct],Bt.emit("error",Ut)};var St=g.Z_DEFAULT_COMPRESSION;typeof dt.level=="number"&&(St=dt.level);var zt=g.Z_DEFAULT_STRATEGY;typeof dt.strategy=="number"&&(zt=dt.strategy),this._handle.init(dt.windowBits||g.Z_DEFAULT_WINDOWBITS,St,dt.memLevel||g.Z_DEFAULT_MEMLEVEL,zt,dt.dictionary),this._buffer=I.allocUnsafe(this._chunkSize),this._offset=0,this._level=St,this._strategy=zt,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!Nt._handle},configurable:!0,enumerable:!0})}function Et(dt,yt){yt&&w.nextTick(yt),dt._handle&&(dt._handle.close(),dt._handle=null)}function gt(dt){dt.emit("close")}Object.defineProperty(g,"codes",{enumerable:!0,value:Object.freeze(q),writable:!1}),g.Deflate=tt,g.Inflate=X,g.Gzip=ot,g.Gunzip=it,g.DeflateRaw=lt,g.InflateRaw=at,g.Unzip=ht,g.createDeflate=function(dt){return new tt(dt)},g.createInflate=function(dt){return new X(dt)},g.createDeflateRaw=function(dt){return new lt(dt)},g.createInflateRaw=function(dt){return new at(dt)},g.createGzip=function(dt){return new ot(dt)},g.createGunzip=function(dt){return new it(dt)},g.createUnzip=function(dt){return new ht(dt)},g.deflate=function(dt,yt,Nt){return typeof yt=="function"&&(Nt=yt,yt={}),K(new tt(yt),dt,Nt)},g.deflateSync=function(dt,yt){return V(new tt(yt),dt)},g.gzip=function(dt,yt,Nt){return typeof yt=="function"&&(Nt=yt,yt={}),K(new ot(yt),dt,Nt)},g.gzipSync=function(dt,yt){return V(new ot(yt),dt)},g.deflateRaw=function(dt,yt,Nt){return typeof yt=="function"&&(Nt=yt,yt={}),K(new lt(yt),dt,Nt)},g.deflateRawSync=function(dt,yt){return V(new lt(yt),dt)},g.unzip=function(dt,yt,Nt){return typeof yt=="function"&&(Nt=yt,yt={}),K(new ht(yt),dt,Nt)},g.unzipSync=function(dt,yt){return V(new ht(yt),dt)},g.inflate=function(dt,yt,Nt){return typeof yt=="function"&&(Nt=yt,yt={}),K(new X(yt),dt,Nt)},g.inflateSync=function(dt,yt){return V(new X(yt),dt)},g.gunzip=function(dt,yt,Nt){return typeof yt=="function"&&(Nt=yt,yt={}),K(new it(yt),dt,Nt)},g.gunzipSync=function(dt,yt){return V(new it(yt),dt)},g.inflateRaw=function(dt,yt,Nt){return typeof yt=="function"&&(Nt=yt,yt={}),K(new at(yt),dt,Nt)},g.inflateRawSync=function(dt,yt){return V(new at(yt),dt)},$.inherits(ut,P),ut.prototype.params=function(dt,yt,Nt){if(dt<g.Z_MIN_LEVEL||dt>g.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+dt);if(yt!=g.Z_FILTERED&&yt!=g.Z_HUFFMAN_ONLY&&yt!=g.Z_RLE&&yt!=g.Z_FIXED&&yt!=g.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+yt);if(this._level!==dt||this._strategy!==yt){var Bt=this;this.flush(F.Z_SYNC_FLUSH,function(){D(Bt._handle,"zlib binding closed"),Bt._handle.params(dt,yt),Bt._hadError||(Bt._level=dt,Bt._strategy=yt,Nt&&Nt())})}else w.nextTick(Nt)},ut.prototype.reset=function(){return D(this._handle,"zlib binding closed"),this._handle.reset()},ut.prototype._flush=function(dt){this._transform(I.alloc(0),"",dt)},ut.prototype.flush=function(dt,yt){var Nt=this,Bt=this._writableState;(typeof dt=="function"||dt===void 0&&!yt)&&(yt=dt,dt=F.Z_FULL_FLUSH),Bt.ended?yt&&w.nextTick(yt):Bt.ending?yt&&this.once("end",yt):Bt.needDrain?yt&&this.once("drain",function(){return Nt.flush(dt,yt)}):(this._flushFlag=dt,this.write(I.alloc(0),"",yt))},ut.prototype.close=function(dt){Et(this,dt),w.nextTick(gt,this)},ut.prototype._transform=function(dt,yt,Nt){var Bt,St=this._writableState,zt=(St.ending||St.ended)&&(!dt||St.length===dt.length);return dt===null||I.isBuffer(dt)?this._handle?(zt?Bt=this._finishFlushFlag:(Bt=this._flushFlag,dt.length>=St.length&&(this._flushFlag=this._opts.flush||F.Z_NO_FLUSH)),void this._processChunk(dt,Bt,Nt)):Nt(new Error("zlib binding closed")):Nt(new Error("invalid input"))},ut.prototype._processChunk=function(dt,yt,Nt){var Bt=dt&&dt.length,St=this._chunkSize-this._offset,zt=0,kt=this,Ct=typeof Nt=="function";if(!Ct){var Ut,Dt=[],Tt=0;this.on("error",function(Pt){Ut=Pt}),D(this._handle,"zlib binding closed");do var Rt=this._handle.writeSync(yt,dt,zt,Bt,this._buffer,this._offset,St);while(!this._hadError&&Wt(Rt[0],Rt[1]));if(this._hadError)throw Ut;if(Tt>=U)throw Et(this),new RangeError(j);var Lt=I.concat(Dt,Tt);return Et(this),Lt}D(this._handle,"zlib binding closed");var Ht=this._handle.write(yt,dt,zt,Bt,this._buffer,this._offset,St);function Wt(Pt,nt){if(this&&(this.buffer=null,this.callback=null),!kt._hadError){var Mt=St-nt;if(D(Mt>=0,"have should not go down"),Mt>0){var ct=kt._buffer.slice(kt._offset,kt._offset+Mt);kt._offset+=Mt,Ct?kt.push(ct):(Dt.push(ct),Tt+=ct.length)}if((nt===0||kt._offset>=kt._chunkSize)&&(St=kt._chunkSize,kt._offset=0,kt._buffer=I.allocUnsafe(kt._chunkSize)),nt===0){if(zt+=Bt-Pt,Bt=Pt,!Ct)return!0;var _t=kt._handle.write(yt,dt,zt,Bt,kt._buffer,kt._offset,kt._chunkSize);return _t.callback=Wt,void(_t.buffer=dt)}if(!Ct)return!1;Nt()}}Ht.buffer=dt,Ht.callback=Wt},$.inherits(tt,ut),$.inherits(X,ut),$.inherits(ot,ut),$.inherits(it,ut),$.inherits(lt,ut),$.inherits(at,ut),$.inherits(ht,ut)}).call(this)}).call(this,d("_process"))},{"./binding":30,_process:63,assert:23,buffer:32,stream:65,util:84}],32:[function(d,m,g){(function(w){(function(){var I=d("base64-js"),P=d("ieee754");g.Buffer=U,g.SlowBuffer=V,g.INSPECT_MAX_BYTES=50;var F=2147483647;function $(){try{var rt=new Uint8Array(1);return rt.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},rt.foo()===42}catch{return!1}}function D(rt){if(rt>F)throw new RangeError('The value "'+rt+'" is invalid for option "size"');var ft=new Uint8Array(rt);return ft.__proto__=U.prototype,ft}function U(rt,ft,wt){if(typeof rt=="number"){if(typeof ft=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return H(rt)}return j(rt,ft,wt)}function j(rt,ft,wt){if(typeof rt=="string")return q(rt,ft);if(ArrayBuffer.isView(rt))return W(rt);if(rt==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof rt);if(xt(rt,ArrayBuffer)||rt&&xt(rt.buffer,ArrayBuffer))return Q(rt,ft,wt);if(typeof rt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var vt=rt.valueOf&&rt.valueOf();if(vt!=null&&vt!==rt)return U.from(vt,ft,wt);var Gt=J(rt);if(Gt)return Gt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof rt[Symbol.toPrimitive]=="function")return U.from(rt[Symbol.toPrimitive]("string"),ft,wt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof rt)}function Z(rt){if(typeof rt!="number")throw new TypeError('"size" argument must be of type number');if(rt<0)throw new RangeError('The value "'+rt+'" is invalid for option "size"')}function G(rt,ft,wt){return Z(rt),rt<=0?D(rt):ft!==void 0?typeof wt=="string"?D(rt).fill(ft,wt):D(rt).fill(ft):D(rt)}function H(rt){return Z(rt),D(rt<0?0:0|K(rt))}function q(rt,ft){if(typeof ft=="string"&&ft!==""||(ft="utf8"),!U.isEncoding(ft))throw new TypeError("Unknown encoding: "+ft);var wt=0|tt(rt,ft),vt=D(wt),Gt=vt.write(rt,ft);return Gt!==wt&&(vt=vt.slice(0,Gt)),vt}function W(rt){for(var ft=rt.length<0?0:0|K(rt.length),wt=D(ft),vt=0;vt<ft;vt+=1)wt[vt]=255&rt[vt];return wt}function Q(rt,ft,wt){if(ft<0||rt.byteLength<ft)throw new RangeError('"offset" is outside of buffer bounds');if(rt.byteLength<ft+(wt||0))throw new RangeError('"length" is outside of buffer bounds');var vt;return(vt=ft===void 0&&wt===void 0?new Uint8Array(rt):wt===void 0?new Uint8Array(rt,ft):new Uint8Array(rt,ft,wt)).__proto__=U.prototype,vt}function J(rt){if(U.isBuffer(rt)){var ft=0|K(rt.length),wt=D(ft);return wt.length===0||rt.copy(wt,0,0,ft),wt}return rt.length!==void 0?typeof rt.length!="number"||$t(rt.length)?D(0):W(rt):rt.type==="Buffer"&&Array.isArray(rt.data)?W(rt.data):void 0}function K(rt){if(rt>=F)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+F.toString(16)+" bytes");return 0|rt}function V(rt){return+rt!=rt&&(rt=0),U.alloc(+rt)}function tt(rt,ft){if(U.isBuffer(rt))return rt.length;if(ArrayBuffer.isView(rt)||xt(rt,ArrayBuffer))return rt.byteLength;if(typeof rt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof rt);var wt=rt.length,vt=arguments.length>2&&arguments[2]===!0;if(!vt&&wt===0)return 0;for(var Gt=!1;;)switch(ft){case"ascii":case"latin1":case"binary":return wt;case"utf8":case"utf-8":return nt(rt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*wt;case"hex":return wt>>>1;case"base64":return _t(rt).length;default:if(Gt)return vt?-1:nt(rt).length;ft=(""+ft).toLowerCase(),Gt=!0}}function X(rt,ft,wt){var vt=!1;if((ft===void 0||ft<0)&&(ft=0),ft>this.length||((wt===void 0||wt>this.length)&&(wt=this.length),wt<=0)||(wt>>>=0)<=(ft>>>=0))return"";for(rt||(rt="utf8");;)switch(rt){case"hex":return kt(this,ft,wt);case"utf8":case"utf-8":return yt(this,ft,wt);case"ascii":return St(this,ft,wt);case"latin1":case"binary":return zt(this,ft,wt);case"base64":return dt(this,ft,wt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ct(this,ft,wt);default:if(vt)throw new TypeError("Unknown encoding: "+rt);rt=(rt+"").toLowerCase(),vt=!0}}function ot(rt,ft,wt){var vt=rt[ft];rt[ft]=rt[wt],rt[wt]=vt}function it(rt,ft,wt,vt,Gt){if(rt.length===0)return-1;if(typeof wt=="string"?(vt=wt,wt=0):wt>2147483647?wt=2147483647:wt<-2147483648&&(wt=-2147483648),$t(wt=+wt)&&(wt=Gt?0:rt.length-1),wt<0&&(wt=rt.length+wt),wt>=rt.length){if(Gt)return-1;wt=rt.length-1}else if(wt<0){if(!Gt)return-1;wt=0}if(typeof ft=="string"&&(ft=U.from(ft,vt)),U.isBuffer(ft))return ft.length===0?-1:lt(rt,ft,wt,vt,Gt);if(typeof ft=="number")return ft&=255,typeof Uint8Array.prototype.indexOf=="function"?Gt?Uint8Array.prototype.indexOf.call(rt,ft,wt):Uint8Array.prototype.lastIndexOf.call(rt,ft,wt):lt(rt,[ft],wt,vt,Gt);throw new TypeError("val must be string, number or Buffer")}function lt(rt,ft,wt,vt,Gt){var Qt,ae=1,se=rt.length,ie=ft.length;if(vt!==void 0&&((vt=String(vt).toLowerCase())==="ucs2"||vt==="ucs-2"||vt==="utf16le"||vt==="utf-16le")){if(rt.length<2||ft.length<2)return-1;ae=2,se/=2,ie/=2,wt/=2}function At(qt,Yt){return ae===1?qt[Yt]:qt.readUInt16BE(Yt*ae)}if(Gt){var st=-1;for(Qt=wt;Qt<se;Qt++)if(At(rt,Qt)===At(ft,st===-1?0:Qt-st)){if(st===-1&&(st=Qt),Qt-st+1===ie)return st*ae}else st!==-1&&(Qt-=Qt-st),st=-1}else for(wt+ie>se&&(wt=se-ie),Qt=wt;Qt>=0;Qt--){for(var mt=!0,Ot=0;Ot<ie;Ot++)if(At(rt,Qt+Ot)!==At(ft,Ot)){mt=!1;break}if(mt)return Qt}return-1}function at(rt,ft,wt,vt){wt=Number(wt)||0;var Gt=rt.length-wt;vt?(vt=Number(vt))>Gt&&(vt=Gt):vt=Gt;var Qt=ft.length;vt>Qt/2&&(vt=Qt/2);for(var ae=0;ae<vt;++ae){var se=parseInt(ft.substr(2*ae,2),16);if($t(se))return ae;rt[wt+ae]=se}return ae}function ht(rt,ft,wt,vt){return bt(nt(ft,rt.length-wt),rt,wt,vt)}function et(rt,ft,wt,vt){return bt(Mt(ft),rt,wt,vt)}function ut(rt,ft,wt,vt){return et(rt,ft,wt,vt)}function Et(rt,ft,wt,vt){return bt(_t(ft),rt,wt,vt)}function gt(rt,ft,wt,vt){return bt(ct(ft,rt.length-wt),rt,wt,vt)}function dt(rt,ft,wt){return ft===0&&wt===rt.length?I.fromByteArray(rt):I.fromByteArray(rt.slice(ft,wt))}function yt(rt,ft,wt){wt=Math.min(rt.length,wt);for(var vt=[],Gt=ft;Gt<wt;){var Qt,ae,se,ie,At=rt[Gt],st=null,mt=At>239?4:At>223?3:At>191?2:1;if(Gt+mt<=wt)switch(mt){case 1:At<128&&(st=At);break;case 2:(192&(Qt=rt[Gt+1]))==128&&(ie=(31&At)<<6|63&Qt)>127&&(st=ie);break;case 3:Qt=rt[Gt+1],ae=rt[Gt+2],(192&Qt)==128&&(192&ae)==128&&(ie=(15&At)<<12|(63&Qt)<<6|63&ae)>2047&&(ie<55296||ie>57343)&&(st=ie);break;case 4:Qt=rt[Gt+1],ae=rt[Gt+2],se=rt[Gt+3],(192&Qt)==128&&(192&ae)==128&&(192&se)==128&&(ie=(15&At)<<18|(63&Qt)<<12|(63&ae)<<6|63&se)>65535&&ie<1114112&&(st=ie)}st===null?(st=65533,mt=1):st>65535&&(st-=65536,vt.push(st>>>10&1023|55296),st=56320|1023&st),vt.push(st),Gt+=mt}return Bt(vt)}g.kMaxLength=F,U.TYPED_ARRAY_SUPPORT=$(),U.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(U.prototype,"parent",{enumerable:!0,get:function(){if(U.isBuffer(this))return this.buffer}}),Object.defineProperty(U.prototype,"offset",{enumerable:!0,get:function(){if(U.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&U[Symbol.species]===U&&Object.defineProperty(U,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),U.poolSize=8192,U.from=function(rt,ft,wt){return j(rt,ft,wt)},U.prototype.__proto__=Uint8Array.prototype,U.__proto__=Uint8Array,U.alloc=function(rt,ft,wt){return G(rt,ft,wt)},U.allocUnsafe=function(rt){return H(rt)},U.allocUnsafeSlow=function(rt){return H(rt)},U.isBuffer=function(rt){return rt!=null&&rt._isBuffer===!0&&rt!==U.prototype},U.compare=function(rt,ft){if(xt(rt,Uint8Array)&&(rt=U.from(rt,rt.offset,rt.byteLength)),xt(ft,Uint8Array)&&(ft=U.from(ft,ft.offset,ft.byteLength)),!U.isBuffer(rt)||!U.isBuffer(ft))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(rt===ft)return 0;for(var wt=rt.length,vt=ft.length,Gt=0,Qt=Math.min(wt,vt);Gt<Qt;++Gt)if(rt[Gt]!==ft[Gt]){wt=rt[Gt],vt=ft[Gt];break}return wt<vt?-1:vt<wt?1:0},U.isEncoding=function(rt){switch(String(rt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},U.concat=function(rt,ft){if(!Array.isArray(rt))throw new TypeError('"list" argument must be an Array of Buffers');if(rt.length===0)return U.alloc(0);var wt;if(ft===void 0)for(ft=0,wt=0;wt<rt.length;++wt)ft+=rt[wt].length;var vt=U.allocUnsafe(ft),Gt=0;for(wt=0;wt<rt.length;++wt){var Qt=rt[wt];if(xt(Qt,Uint8Array)&&(Qt=U.from(Qt)),!U.isBuffer(Qt))throw new TypeError('"list" argument must be an Array of Buffers');Qt.copy(vt,Gt),Gt+=Qt.length}return vt},U.byteLength=tt,U.prototype._isBuffer=!0,U.prototype.swap16=function(){var rt=this.length;if(rt%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ft=0;ft<rt;ft+=2)ot(this,ft,ft+1);return this},U.prototype.swap32=function(){var rt=this.length;if(rt%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ft=0;ft<rt;ft+=4)ot(this,ft,ft+3),ot(this,ft+1,ft+2);return this},U.prototype.swap64=function(){var rt=this.length;if(rt%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ft=0;ft<rt;ft+=8)ot(this,ft,ft+7),ot(this,ft+1,ft+6),ot(this,ft+2,ft+5),ot(this,ft+3,ft+4);return this},U.prototype.toString=function(){var rt=this.length;return rt===0?"":arguments.length===0?yt(this,0,rt):X.apply(this,arguments)},U.prototype.toLocaleString=U.prototype.toString,U.prototype.equals=function(rt){if(!U.isBuffer(rt))throw new TypeError("Argument must be a Buffer");return this===rt||U.compare(this,rt)===0},U.prototype.inspect=function(){var rt="",ft=g.INSPECT_MAX_BYTES;return rt=this.toString("hex",0,ft).replace(/(.{2})/g,"$1 ").trim(),this.length>ft&&(rt+=" ... "),"<Buffer "+rt+">"},U.prototype.compare=function(rt,ft,wt,vt,Gt){if(xt(rt,Uint8Array)&&(rt=U.from(rt,rt.offset,rt.byteLength)),!U.isBuffer(rt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof rt);if(ft===void 0&&(ft=0),wt===void 0&&(wt=rt?rt.length:0),vt===void 0&&(vt=0),Gt===void 0&&(Gt=this.length),ft<0||wt>rt.length||vt<0||Gt>this.length)throw new RangeError("out of range index");if(vt>=Gt&&ft>=wt)return 0;if(vt>=Gt)return-1;if(ft>=wt)return 1;if(this===rt)return 0;for(var Qt=(Gt>>>=0)-(vt>>>=0),ae=(wt>>>=0)-(ft>>>=0),se=Math.min(Qt,ae),ie=this.slice(vt,Gt),At=rt.slice(ft,wt),st=0;st<se;++st)if(ie[st]!==At[st]){Qt=ie[st],ae=At[st];break}return Qt<ae?-1:ae<Qt?1:0},U.prototype.includes=function(rt,ft,wt){return this.indexOf(rt,ft,wt)!==-1},U.prototype.indexOf=function(rt,ft,wt){return it(this,rt,ft,wt,!0)},U.prototype.lastIndexOf=function(rt,ft,wt){return it(this,rt,ft,wt,!1)},U.prototype.write=function(rt,ft,wt,vt){if(ft===void 0)vt="utf8",wt=this.length,ft=0;else if(wt===void 0&&typeof ft=="string")vt=ft,wt=this.length,ft=0;else{if(!isFinite(ft))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ft>>>=0,isFinite(wt)?(wt>>>=0,vt===void 0&&(vt="utf8")):(vt=wt,wt=void 0)}var Gt=this.length-ft;if((wt===void 0||wt>Gt)&&(wt=Gt),rt.length>0&&(wt<0||ft<0)||ft>this.length)throw new RangeError("Attempt to write outside buffer bounds");vt||(vt="utf8");for(var Qt=!1;;)switch(vt){case"hex":return at(this,rt,ft,wt);case"utf8":case"utf-8":return ht(this,rt,ft,wt);case"ascii":return et(this,rt,ft,wt);case"latin1":case"binary":return ut(this,rt,ft,wt);case"base64":return Et(this,rt,ft,wt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gt(this,rt,ft,wt);default:if(Qt)throw new TypeError("Unknown encoding: "+vt);vt=(""+vt).toLowerCase(),Qt=!0}},U.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Nt=4096;function Bt(rt){var ft=rt.length;if(ft<=Nt)return String.fromCharCode.apply(String,rt);for(var wt="",vt=0;vt<ft;)wt+=String.fromCharCode.apply(String,rt.slice(vt,vt+=Nt));return wt}function St(rt,ft,wt){var vt="";wt=Math.min(rt.length,wt);for(var Gt=ft;Gt<wt;++Gt)vt+=String.fromCharCode(127&rt[Gt]);return vt}function zt(rt,ft,wt){var vt="";wt=Math.min(rt.length,wt);for(var Gt=ft;Gt<wt;++Gt)vt+=String.fromCharCode(rt[Gt]);return vt}function kt(rt,ft,wt){var vt=rt.length;(!ft||ft<0)&&(ft=0),(!wt||wt<0||wt>vt)&&(wt=vt);for(var Gt="",Qt=ft;Qt<wt;++Qt)Gt+=Pt(rt[Qt]);return Gt}function Ct(rt,ft,wt){for(var vt=rt.slice(ft,wt),Gt="",Qt=0;Qt<vt.length;Qt+=2)Gt+=String.fromCharCode(vt[Qt]+256*vt[Qt+1]);return Gt}function Ut(rt,ft,wt){if(rt%1!=0||rt<0)throw new RangeError("offset is not uint");if(rt+ft>wt)throw new RangeError("Trying to access beyond buffer length")}function Dt(rt,ft,wt,vt,Gt,Qt){if(!U.isBuffer(rt))throw new TypeError('"buffer" argument must be a Buffer instance');if(ft>Gt||ft<Qt)throw new RangeError('"value" argument is out of bounds');if(wt+vt>rt.length)throw new RangeError("Index out of range")}function Tt(rt,ft,wt,vt,Gt,Qt){if(wt+vt>rt.length)throw new RangeError("Index out of range");if(wt<0)throw new RangeError("Index out of range")}function Rt(rt,ft,wt,vt,Gt){return ft=+ft,wt>>>=0,Gt||Tt(rt,ft,wt,4),P.write(rt,ft,wt,vt,23,4),wt+4}function Lt(rt,ft,wt,vt,Gt){return ft=+ft,wt>>>=0,Gt||Tt(rt,ft,wt,8),P.write(rt,ft,wt,vt,52,8),wt+8}U.prototype.slice=function(rt,ft){var wt=this.length;(rt=~~rt)<0?(rt+=wt)<0&&(rt=0):rt>wt&&(rt=wt),(ft=ft===void 0?wt:~~ft)<0?(ft+=wt)<0&&(ft=0):ft>wt&&(ft=wt),ft<rt&&(ft=rt);var vt=this.subarray(rt,ft);return vt.__proto__=U.prototype,vt},U.prototype.readUIntLE=function(rt,ft,wt){rt>>>=0,ft>>>=0,wt||Ut(rt,ft,this.length);for(var vt=this[rt],Gt=1,Qt=0;++Qt<ft&&(Gt*=256);)vt+=this[rt+Qt]*Gt;return vt},U.prototype.readUIntBE=function(rt,ft,wt){rt>>>=0,ft>>>=0,wt||Ut(rt,ft,this.length);for(var vt=this[rt+--ft],Gt=1;ft>0&&(Gt*=256);)vt+=this[rt+--ft]*Gt;return vt},U.prototype.readUInt8=function(rt,ft){return rt>>>=0,ft||Ut(rt,1,this.length),this[rt]},U.prototype.readUInt16LE=function(rt,ft){return rt>>>=0,ft||Ut(rt,2,this.length),this[rt]|this[rt+1]<<8},U.prototype.readUInt16BE=function(rt,ft){return rt>>>=0,ft||Ut(rt,2,this.length),this[rt]<<8|this[rt+1]},U.prototype.readUInt32LE=function(rt,ft){return rt>>>=0,ft||Ut(rt,4,this.length),(this[rt]|this[rt+1]<<8|this[rt+2]<<16)+16777216*this[rt+3]},U.prototype.readUInt32BE=function(rt,ft){return rt>>>=0,ft||Ut(rt,4,this.length),16777216*this[rt]+(this[rt+1]<<16|this[rt+2]<<8|this[rt+3])},U.prototype.readIntLE=function(rt,ft,wt){rt>>>=0,ft>>>=0,wt||Ut(rt,ft,this.length);for(var vt=this[rt],Gt=1,Qt=0;++Qt<ft&&(Gt*=256);)vt+=this[rt+Qt]*Gt;return vt>=(Gt*=128)&&(vt-=Math.pow(2,8*ft)),vt},U.prototype.readIntBE=function(rt,ft,wt){rt>>>=0,ft>>>=0,wt||Ut(rt,ft,this.length);for(var vt=ft,Gt=1,Qt=this[rt+--vt];vt>0&&(Gt*=256);)Qt+=this[rt+--vt]*Gt;return Qt>=(Gt*=128)&&(Qt-=Math.pow(2,8*ft)),Qt},U.prototype.readInt8=function(rt,ft){return rt>>>=0,ft||Ut(rt,1,this.length),128&this[rt]?-1*(255-this[rt]+1):this[rt]},U.prototype.readInt16LE=function(rt,ft){rt>>>=0,ft||Ut(rt,2,this.length);var wt=this[rt]|this[rt+1]<<8;return 32768&wt?4294901760|wt:wt},U.prototype.readInt16BE=function(rt,ft){rt>>>=0,ft||Ut(rt,2,this.length);var wt=this[rt+1]|this[rt]<<8;return 32768&wt?4294901760|wt:wt},U.prototype.readInt32LE=function(rt,ft){return rt>>>=0,ft||Ut(rt,4,this.length),this[rt]|this[rt+1]<<8|this[rt+2]<<16|this[rt+3]<<24},U.prototype.readInt32BE=function(rt,ft){return rt>>>=0,ft||Ut(rt,4,this.length),this[rt]<<24|this[rt+1]<<16|this[rt+2]<<8|this[rt+3]},U.prototype.readFloatLE=function(rt,ft){return rt>>>=0,ft||Ut(rt,4,this.length),P.read(this,rt,!0,23,4)},U.prototype.readFloatBE=function(rt,ft){return rt>>>=0,ft||Ut(rt,4,this.length),P.read(this,rt,!1,23,4)},U.prototype.readDoubleLE=function(rt,ft){return rt>>>=0,ft||Ut(rt,8,this.length),P.read(this,rt,!0,52,8)},U.prototype.readDoubleBE=function(rt,ft){return rt>>>=0,ft||Ut(rt,8,this.length),P.read(this,rt,!1,52,8)},U.prototype.writeUIntLE=function(rt,ft,wt,vt){rt=+rt,ft>>>=0,wt>>>=0,vt||Dt(this,rt,ft,wt,Math.pow(2,8*wt)-1,0);var Gt=1,Qt=0;for(this[ft]=255&rt;++Qt<wt&&(Gt*=256);)this[ft+Qt]=rt/Gt&255;return ft+wt},U.prototype.writeUIntBE=function(rt,ft,wt,vt){rt=+rt,ft>>>=0,wt>>>=0,vt||Dt(this,rt,ft,wt,Math.pow(2,8*wt)-1,0);var Gt=wt-1,Qt=1;for(this[ft+Gt]=255&rt;--Gt>=0&&(Qt*=256);)this[ft+Gt]=rt/Qt&255;return ft+wt},U.prototype.writeUInt8=function(rt,ft,wt){return rt=+rt,ft>>>=0,wt||Dt(this,rt,ft,1,255,0),this[ft]=255&rt,ft+1},U.prototype.writeUInt16LE=function(rt,ft,wt){return rt=+rt,ft>>>=0,wt||Dt(this,rt,ft,2,65535,0),this[ft]=255&rt,this[ft+1]=rt>>>8,ft+2},U.prototype.writeUInt16BE=function(rt,ft,wt){return rt=+rt,ft>>>=0,wt||Dt(this,rt,ft,2,65535,0),this[ft]=rt>>>8,this[ft+1]=255&rt,ft+2},U.prototype.writeUInt32LE=function(rt,ft,wt){return rt=+rt,ft>>>=0,wt||Dt(this,rt,ft,4,4294967295,0),this[ft+3]=rt>>>24,this[ft+2]=rt>>>16,this[ft+1]=rt>>>8,this[ft]=255&rt,ft+4},U.prototype.writeUInt32BE=function(rt,ft,wt){return rt=+rt,ft>>>=0,wt||Dt(this,rt,ft,4,4294967295,0),this[ft]=rt>>>24,this[ft+1]=rt>>>16,this[ft+2]=rt>>>8,this[ft+3]=255&rt,ft+4},U.prototype.writeIntLE=function(rt,ft,wt,vt){if(rt=+rt,ft>>>=0,!vt){var Gt=Math.pow(2,8*wt-1);Dt(this,rt,ft,wt,Gt-1,-Gt)}var Qt=0,ae=1,se=0;for(this[ft]=255&rt;++Qt<wt&&(ae*=256);)rt<0&&se===0&&this[ft+Qt-1]!==0&&(se=1),this[ft+Qt]=(rt/ae|0)-se&255;return ft+wt},U.prototype.writeIntBE=function(rt,ft,wt,vt){if(rt=+rt,ft>>>=0,!vt){var Gt=Math.pow(2,8*wt-1);Dt(this,rt,ft,wt,Gt-1,-Gt)}var Qt=wt-1,ae=1,se=0;for(this[ft+Qt]=255&rt;--Qt>=0&&(ae*=256);)rt<0&&se===0&&this[ft+Qt+1]!==0&&(se=1),this[ft+Qt]=(rt/ae|0)-se&255;return ft+wt},U.prototype.writeInt8=function(rt,ft,wt){return rt=+rt,ft>>>=0,wt||Dt(this,rt,ft,1,127,-128),rt<0&&(rt=255+rt+1),this[ft]=255&rt,ft+1},U.prototype.writeInt16LE=function(rt,ft,wt){return rt=+rt,ft>>>=0,wt||Dt(this,rt,ft,2,32767,-32768),this[ft]=255&rt,this[ft+1]=rt>>>8,ft+2},U.prototype.writeInt16BE=function(rt,ft,wt){return rt=+rt,ft>>>=0,wt||Dt(this,rt,ft,2,32767,-32768),this[ft]=rt>>>8,this[ft+1]=255&rt,ft+2},U.prototype.writeInt32LE=function(rt,ft,wt){return rt=+rt,ft>>>=0,wt||Dt(this,rt,ft,4,2147483647,-2147483648),this[ft]=255&rt,this[ft+1]=rt>>>8,this[ft+2]=rt>>>16,this[ft+3]=rt>>>24,ft+4},U.prototype.writeInt32BE=function(rt,ft,wt){return rt=+rt,ft>>>=0,wt||Dt(this,rt,ft,4,2147483647,-2147483648),rt<0&&(rt=4294967295+rt+1),this[ft]=rt>>>24,this[ft+1]=rt>>>16,this[ft+2]=rt>>>8,this[ft+3]=255&rt,ft+4},U.prototype.writeFloatLE=function(rt,ft,wt){return Rt(this,rt,ft,!0,wt)},U.prototype.writeFloatBE=function(rt,ft,wt){return Rt(this,rt,ft,!1,wt)},U.prototype.writeDoubleLE=function(rt,ft,wt){return Lt(this,rt,ft,!0,wt)},U.prototype.writeDoubleBE=function(rt,ft,wt){return Lt(this,rt,ft,!1,wt)},U.prototype.copy=function(rt,ft,wt,vt){if(!U.isBuffer(rt))throw new TypeError("argument should be a Buffer");if(wt||(wt=0),vt||vt===0||(vt=this.length),ft>=rt.length&&(ft=rt.length),ft||(ft=0),vt>0&&vt<wt&&(vt=wt),vt===wt||rt.length===0||this.length===0)return 0;if(ft<0)throw new RangeError("targetStart out of bounds");if(wt<0||wt>=this.length)throw new RangeError("Index out of range");if(vt<0)throw new RangeError("sourceEnd out of bounds");vt>this.length&&(vt=this.length),rt.length-ft<vt-wt&&(vt=rt.length-ft+wt);var Gt=vt-wt;if(this===rt&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ft,wt,vt);else if(this===rt&&wt<ft&&ft<vt)for(var Qt=Gt-1;Qt>=0;--Qt)rt[Qt+ft]=this[Qt+wt];else Uint8Array.prototype.set.call(rt,this.subarray(wt,vt),ft);return Gt},U.prototype.fill=function(rt,ft,wt,vt){if(typeof rt=="string"){if(typeof ft=="string"?(vt=ft,ft=0,wt=this.length):typeof wt=="string"&&(vt=wt,wt=this.length),vt!==void 0&&typeof vt!="string")throw new TypeError("encoding must be a string");if(typeof vt=="string"&&!U.isEncoding(vt))throw new TypeError("Unknown encoding: "+vt);if(rt.length===1){var Gt=rt.charCodeAt(0);(vt==="utf8"&&Gt<128||vt==="latin1")&&(rt=Gt)}}else typeof rt=="number"&&(rt&=255);if(ft<0||this.length<ft||this.length<wt)throw new RangeError("Out of range index");if(wt<=ft)return this;var Qt;if(ft>>>=0,wt=wt===void 0?this.length:wt>>>0,rt||(rt=0),typeof rt=="number")for(Qt=ft;Qt<wt;++Qt)this[Qt]=rt;else{var ae=U.isBuffer(rt)?rt:U.from(rt,vt),se=ae.length;if(se===0)throw new TypeError('The value "'+rt+'" is invalid for argument "value"');for(Qt=0;Qt<wt-ft;++Qt)this[Qt+ft]=ae[Qt%se]}return this};var Ht=/[^+/0-9A-Za-z-_]/g;function Wt(rt){if((rt=(rt=rt.split("=")[0]).trim().replace(Ht,"")).length<2)return"";for(;rt.length%4!=0;)rt+="=";return rt}function Pt(rt){return rt<16?"0"+rt.toString(16):rt.toString(16)}function nt(rt,ft){var wt;ft=ft||1/0;for(var vt=rt.length,Gt=null,Qt=[],ae=0;ae<vt;++ae){if((wt=rt.charCodeAt(ae))>55295&&wt<57344){if(!Gt){if(wt>56319){(ft-=3)>-1&&Qt.push(239,191,189);continue}if(ae+1===vt){(ft-=3)>-1&&Qt.push(239,191,189);continue}Gt=wt;continue}if(wt<56320){(ft-=3)>-1&&Qt.push(239,191,189),Gt=wt;continue}wt=65536+(Gt-55296<<10|wt-56320)}else Gt&&(ft-=3)>-1&&Qt.push(239,191,189);if(Gt=null,wt<128){if((ft-=1)<0)break;Qt.push(wt)}else if(wt<2048){if((ft-=2)<0)break;Qt.push(wt>>6|192,63&wt|128)}else if(wt<65536){if((ft-=3)<0)break;Qt.push(wt>>12|224,wt>>6&63|128,63&wt|128)}else{if(!(wt<1114112))throw new Error("Invalid code point");if((ft-=4)<0)break;Qt.push(wt>>18|240,wt>>12&63|128,wt>>6&63|128,63&wt|128)}}return Qt}function Mt(rt){for(var ft=[],wt=0;wt<rt.length;++wt)ft.push(255&rt.charCodeAt(wt));return ft}function ct(rt,ft){for(var wt,vt,Gt,Qt=[],ae=0;ae<rt.length&&!((ft-=2)<0);++ae)vt=(wt=rt.charCodeAt(ae))>>8,Gt=wt%256,Qt.push(Gt),Qt.push(vt);return Qt}function _t(rt){return I.toByteArray(Wt(rt))}function bt(rt,ft,wt,vt){for(var Gt=0;Gt<vt&&!(Gt+wt>=ft.length||Gt>=rt.length);++Gt)ft[Gt+wt]=rt[Gt];return Gt}function xt(rt,ft){return rt instanceof ft||rt!=null&&rt.constructor!=null&&rt.constructor.name!=null&&rt.constructor.name===ft.name}function $t(rt){return rt!=rt}}).call(this)}).call(this,d("buffer").Buffer)},{"base64-js":28,buffer:32,ieee754:45}],33:[function(d,m,g){var w=d("get-intrinsic"),I=d("./"),P=I(w("String.prototype.indexOf"));m.exports=function(F,$){var D=w(F,!!$);return typeof D=="function"&&P(F,".prototype.")>-1?I(D):D}},{"./":34,"get-intrinsic":39}],34:[function(d,m,g){var w=d("function-bind"),I=d("get-intrinsic"),P=I("%Function.prototype.apply%"),F=I("%Function.prototype.call%"),$=I("%Reflect.apply%",!0)||w.call(F,P),D=I("%Object.getOwnPropertyDescriptor%",!0),U=I("%Object.defineProperty%",!0),j=I("%Math.max%");if(U)try{U({},"a",{value:1})}catch{U=null}m.exports=function(G){var H=$(w,F,arguments);return D&&U&&D(H,"length").configurable&&U(H,"length",{value:1+j(0,G.length-(arguments.length-1))}),H};var Z=function(){return $(w,P,arguments)};U?U(m.exports,"apply",{value:Z}):m.exports.apply=Z},{"function-bind":38,"get-intrinsic":39}],35:[function(d,m,g){var w,I=typeof Reflect=="object"?Reflect:null,P=I&&typeof I.apply=="function"?I.apply:function(it,lt,at){return Function.prototype.apply.call(it,lt,at)};function F(it){console&&console.warn&&console.warn(it)}w=I&&typeof I.ownKeys=="function"?I.ownKeys:Object.getOwnPropertySymbols?function(it){return Object.getOwnPropertyNames(it).concat(Object.getOwnPropertySymbols(it))}:function(it){return Object.getOwnPropertyNames(it)};var $=Number.isNaN||function(it){return it!=it};function D(){D.init.call(this)}m.exports=D,m.exports.once=tt,D.EventEmitter=D,D.prototype._events=void 0,D.prototype._eventsCount=0,D.prototype._maxListeners=void 0;var U=10;function j(it){if(typeof it!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof it)}function Z(it){return it._maxListeners===void 0?D.defaultMaxListeners:it._maxListeners}function G(it,lt,at,ht){var et,ut,Et;if(j(at),(ut=it._events)===void 0?(ut=it._events=Object.create(null),it._eventsCount=0):(ut.newListener!==void 0&&(it.emit("newListener",lt,at.listener?at.listener:at),ut=it._events),Et=ut[lt]),Et===void 0)Et=ut[lt]=at,++it._eventsCount;else if(typeof Et=="function"?Et=ut[lt]=ht?[at,Et]:[Et,at]:ht?Et.unshift(at):Et.push(at),(et=Z(it))>0&&Et.length>et&&!Et.warned){Et.warned=!0;var gt=new Error("Possible EventEmitter memory leak detected. "+Et.length+" "+String(lt)+" listeners added. Use emitter.setMaxListeners() to increase limit");gt.name="MaxListenersExceededWarning",gt.emitter=it,gt.type=lt,gt.count=Et.length,F(gt)}return it}function H(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function q(it,lt,at){var ht={fired:!1,wrapFn:void 0,target:it,type:lt,listener:at},et=H.bind(ht);return et.listener=at,ht.wrapFn=et,et}function W(it,lt,at){var ht=it._events;if(ht===void 0)return[];var et=ht[lt];return et===void 0?[]:typeof et=="function"?at?[et.listener||et]:[et]:at?V(et):J(et,et.length)}function Q(it){var lt=this._events;if(lt!==void 0){var at=lt[it];if(typeof at=="function")return 1;if(at!==void 0)return at.length}return 0}function J(it,lt){for(var at=new Array(lt),ht=0;ht<lt;++ht)at[ht]=it[ht];return at}function K(it,lt){for(;lt+1<it.length;lt++)it[lt]=it[lt+1];it.pop()}function V(it){for(var lt=new Array(it.length),at=0;at<lt.length;++at)lt[at]=it[at].listener||it[at];return lt}function tt(it,lt){return new Promise(function(at,ht){function et(Et){it.removeListener(lt,ut),ht(Et)}function ut(){typeof it.removeListener=="function"&&it.removeListener("error",et),at([].slice.call(arguments))}ot(it,lt,ut,{once:!0}),lt!=="error"&&X(it,et,{once:!0})})}function X(it,lt,at){typeof it.on=="function"&&ot(it,"error",lt,at)}function ot(it,lt,at,ht){if(typeof it.on=="function")ht.once?it.once(lt,at):it.on(lt,at);else{if(typeof it.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof it);it.addEventListener(lt,function et(ut){ht.once&&it.removeEventListener(lt,et),at(ut)})}}Object.defineProperty(D,"defaultMaxListeners",{enumerable:!0,get:function(){return U},set:function(it){if(typeof it!="number"||it<0||$(it))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+it+".");U=it}}),D.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},D.prototype.setMaxListeners=function(it){if(typeof it!="number"||it<0||$(it))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+it+".");return this._maxListeners=it,this},D.prototype.getMaxListeners=function(){return Z(this)},D.prototype.emit=function(it){for(var lt=[],at=1;at<arguments.length;at++)lt.push(arguments[at]);var ht=it==="error",et=this._events;if(et!==void 0)ht=ht&&et.error===void 0;else if(!ht)return!1;if(ht){var ut;if(lt.length>0&&(ut=lt[0]),ut instanceof Error)throw ut;var Et=new Error("Unhandled error."+(ut?" ("+ut.message+")":""));throw Et.context=ut,Et}var gt=et[it];if(gt===void 0)return!1;if(typeof gt=="function")P(gt,this,lt);else{var dt=gt.length,yt=J(gt,dt);for(at=0;at<dt;++at)P(yt[at],this,lt)}return!0},D.prototype.addListener=function(it,lt){return G(this,it,lt,!1)},D.prototype.on=D.prototype.addListener,D.prototype.prependListener=function(it,lt){return G(this,it,lt,!0)},D.prototype.once=function(it,lt){return j(lt),this.on(it,q(this,it,lt)),this},D.prototype.prependOnceListener=function(it,lt){return j(lt),this.prependListener(it,q(this,it,lt)),this},D.prototype.removeListener=function(it,lt){var at,ht,et,ut,Et;if(j(lt),(ht=this._events)===void 0)return this;if((at=ht[it])===void 0)return this;if(at===lt||at.listener===lt)--this._eventsCount==0?this._events=Object.create(null):(delete ht[it],ht.removeListener&&this.emit("removeListener",it,at.listener||lt));else if(typeof at!="function"){for(et=-1,ut=at.length-1;ut>=0;ut--)if(at[ut]===lt||at[ut].listener===lt){Et=at[ut].listener,et=ut;break}if(et<0)return this;et===0?at.shift():K(at,et),at.length===1&&(ht[it]=at[0]),ht.removeListener!==void 0&&this.emit("removeListener",it,Et||lt)}return this},D.prototype.off=D.prototype.removeListener,D.prototype.removeAllListeners=function(it){var lt,at,ht;if((at=this._events)===void 0)return this;if(at.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):at[it]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete at[it]),this;if(arguments.length===0){var et,ut=Object.keys(at);for(ht=0;ht<ut.length;++ht)(et=ut[ht])!=="removeListener"&&this.removeAllListeners(et);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(lt=at[it])=="function")this.removeListener(it,lt);else if(lt!==void 0)for(ht=lt.length-1;ht>=0;ht--)this.removeListener(it,lt[ht]);return this},D.prototype.listeners=function(it){return W(this,it,!0)},D.prototype.rawListeners=function(it){return W(this,it,!1)},D.listenerCount=function(it,lt){return typeof it.listenerCount=="function"?it.listenerCount(lt):Q.call(it,lt)},D.prototype.listenerCount=Q,D.prototype.eventNames=function(){return this._eventsCount>0?w(this._events):[]}},{}],36:[function(d,m,g){var w=d("is-callable"),I=Object.prototype.toString,P=Object.prototype.hasOwnProperty,F=function(j,Z,G){for(var H=0,q=j.length;H<q;H++)P.call(j,H)&&(G==null?Z(j[H],H,j):Z.call(G,j[H],H,j))},$=function(j,Z,G){for(var H=0,q=j.length;H<q;H++)G==null?Z(j.charAt(H),H,j):Z.call(G,j.charAt(H),H,j)},D=function(j,Z,G){for(var H in j)P.call(j,H)&&(G==null?Z(j[H],H,j):Z.call(G,j[H],H,j))},U=function(j,Z,G){if(!w(Z))throw new TypeError("iterator must be a function");var H;arguments.length>=3&&(H=G),I.call(j)==="[object Array]"?F(j,Z,H):typeof j=="string"?$(j,Z,H):D(j,Z,H)};m.exports=U},{"is-callable":48}],37:[function(d,m,g){var w="Function.prototype.bind called on incompatible ",I=Array.prototype.slice,P=Object.prototype.toString,F="[object Function]";m.exports=function($){var D=this;if(typeof D!="function"||P.call(D)!==F)throw new TypeError(w+D);for(var U,j=I.call(arguments,1),Z=function(){if(this instanceof U){var Q=D.apply(this,j.concat(I.call(arguments)));return Object(Q)===Q?Q:this}return D.apply($,j.concat(I.call(arguments)))},G=Math.max(0,D.length-j.length),H=[],q=0;q<G;q++)H.push("$"+q);if(U=Function("binder","return function ("+H.join(",")+"){ return binder.apply(this,arguments); }")(Z),D.prototype){var W=function(){};W.prototype=D.prototype,U.prototype=new W,W.prototype=null}return U}},{}],38:[function(d,m,g){var w=d("./implementation");m.exports=Function.prototype.bind||w},{"./implementation":37}],39:[function(d,m,g){var w,I=SyntaxError,P=Function,F=TypeError,$=function(gt){try{return P('"use strict"; return ('+gt+").constructor;")()}catch{}},D=Object.getOwnPropertyDescriptor;if(D)try{D({},"")}catch{D=null}var U=function(){throw new F},j=D?function(){try{return U}catch{try{return D(arguments,"callee").get}catch{return U}}}():U,Z=d("has-symbols")(),G=Object.getPrototypeOf||function(gt){return gt.__proto__},H={},q=typeof Uint8Array>"u"?w:G(Uint8Array),W={"%AggregateError%":typeof AggregateError>"u"?w:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?w:ArrayBuffer,"%ArrayIteratorPrototype%":Z?G([][Symbol.iterator]()):w,"%AsyncFromSyncIteratorPrototype%":w,"%AsyncFunction%":H,"%AsyncGenerator%":H,"%AsyncGeneratorFunction%":H,"%AsyncIteratorPrototype%":H,"%Atomics%":typeof Atomics>"u"?w:Atomics,"%BigInt%":typeof BigInt>"u"?w:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?w:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?w:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?w:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?w:Float32Array,"%Float64Array%":typeof Float64Array>"u"?w:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?w:FinalizationRegistry,"%Function%":P,"%GeneratorFunction%":H,"%Int8Array%":typeof Int8Array>"u"?w:Int8Array,"%Int16Array%":typeof Int16Array>"u"?w:Int16Array,"%Int32Array%":typeof Int32Array>"u"?w:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Z?G(G([][Symbol.iterator]())):w,"%JSON%":typeof JSON=="object"?JSON:w,"%Map%":typeof Map>"u"?w:Map,"%MapIteratorPrototype%":typeof Map<"u"&&Z?G(new Map()[Symbol.iterator]()):w,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?w:Promise,"%Proxy%":typeof Proxy>"u"?w:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?w:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?w:Set,"%SetIteratorPrototype%":typeof Set<"u"&&Z?G(new Set()[Symbol.iterator]()):w,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?w:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Z?G(""[Symbol.iterator]()):w,"%Symbol%":Z?Symbol:w,"%SyntaxError%":I,"%ThrowTypeError%":j,"%TypedArray%":q,"%TypeError%":F,"%Uint8Array%":typeof Uint8Array>"u"?w:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?w:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?w:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?w:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?w:WeakMap,"%WeakRef%":typeof WeakRef>"u"?w:WeakRef,"%WeakSet%":typeof WeakSet>"u"?w:WeakSet};try{null.error}catch(gt){var Q=G(G(gt));W["%Error.prototype%"]=Q}var J=function gt(dt){var yt;if(dt==="%AsyncFunction%")yt=$("async function () {}");else if(dt==="%GeneratorFunction%")yt=$("function* () {}");else if(dt==="%AsyncGeneratorFunction%")yt=$("async function* () {}");else if(dt==="%AsyncGenerator%"){var Nt=gt("%AsyncGeneratorFunction%");Nt&&(yt=Nt.prototype)}else if(dt==="%AsyncIteratorPrototype%"){var Bt=gt("%AsyncGenerator%");Bt&&(yt=G(Bt.prototype))}return W[dt]=yt,yt},K={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},V=d("function-bind"),tt=d("has"),X=V.call(Function.call,Array.prototype.concat),ot=V.call(Function.apply,Array.prototype.splice),it=V.call(Function.call,String.prototype.replace),lt=V.call(Function.call,String.prototype.slice),at=V.call(Function.call,RegExp.prototype.exec),ht=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,et=/\\(\\)?/g,ut=function(gt){var dt=lt(gt,0,1),yt=lt(gt,-1);if(dt==="%"&&yt!=="%")throw new I("invalid intrinsic syntax, expected closing `%`");if(yt==="%"&&dt!=="%")throw new I("invalid intrinsic syntax, expected opening `%`");var Nt=[];return it(gt,ht,function(Bt,St,zt,kt){Nt[Nt.length]=zt?it(kt,et,"$1"):St||Bt}),Nt},Et=function(gt,dt){var yt,Nt=gt;if(tt(K,Nt)&&(Nt="%"+(yt=K[Nt])[0]+"%"),tt(W,Nt)){var Bt=W[Nt];if(Bt===H&&(Bt=J(Nt)),Bt===void 0&&!dt)throw new F("intrinsic "+gt+" exists, but is not available. Please file an issue!");return{alias:yt,name:Nt,value:Bt}}throw new I("intrinsic "+gt+" does not exist!")};m.exports=function(gt,dt){if(typeof gt!="string"||gt.length===0)throw new F("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof dt!="boolean")throw new F('"allowMissing" argument must be a boolean');if(at(/^%?[^%]*%?$/,gt)===null)throw new I("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var yt=ut(gt),Nt=yt.length>0?yt[0]:"",Bt=Et("%"+Nt+"%",dt),St=Bt.name,zt=Bt.value,kt=!1,Ct=Bt.alias;Ct&&(Nt=Ct[0],ot(yt,X([0,1],Ct)));for(var Ut=1,Dt=!0;Ut<yt.length;Ut+=1){var Tt=yt[Ut],Rt=lt(Tt,0,1),Lt=lt(Tt,-1);if((Rt==='"'||Rt==="'"||Rt==="`"||Lt==='"'||Lt==="'"||Lt==="`")&&Rt!==Lt)throw new I("property names with quotes must have matching quotes");if(Tt!=="constructor"&&Dt||(kt=!0),tt(W,St="%"+(Nt+="."+Tt)+"%"))zt=W[St];else if(zt!=null){if(!(Tt in zt)){if(!dt)throw new F("base intrinsic for "+gt+" exists, but the property is not available.");return}if(D&&Ut+1>=yt.length){var Ht=D(zt,Tt);zt=(Dt=!!Ht)&&"get"in Ht&&!("originalValue"in Ht.get)?Ht.get:zt[Tt]}else Dt=tt(zt,Tt),zt=zt[Tt];Dt&&!kt&&(W[St]=zt)}}return zt}},{"function-bind":38,has:44,"has-symbols":41}],40:[function(d,m,g){var w=d("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(w)try{w([],"length")}catch{w=null}m.exports=w},{"get-intrinsic":39}],41:[function(d,m,g){var w=typeof Symbol<"u"&&Symbol,I=d("./shams");m.exports=function(){return typeof w=="function"&&typeof Symbol=="function"&&typeof w("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&I()}},{"./shams":42}],42:[function(d,m,g){m.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var w={},I=Symbol("test"),P=Object(I);if(typeof I=="string"||Object.prototype.toString.call(I)!=="[object Symbol]"||Object.prototype.toString.call(P)!=="[object Symbol]")return!1;var F=42;for(I in w[I]=F,w)return!1;if(typeof Object.keys=="function"&&Object.keys(w).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(w).length!==0)return!1;var $=Object.getOwnPropertySymbols(w);if($.length!==1||$[0]!==I||!Object.prototype.propertyIsEnumerable.call(w,I))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var D=Object.getOwnPropertyDescriptor(w,I);if(D.value!==F||D.enumerable!==!0)return!1}return!0}},{}],43:[function(d,m,g){var w=d("has-symbols/shams");m.exports=function(){return w()&&!!Symbol.toStringTag}},{"has-symbols/shams":42}],44:[function(d,m,g){var w=d("function-bind");m.exports=w.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":38}],45:[function(d,m,g){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */g.read=function(w,I,P,F,$){var D,U,j=8*$-F-1,Z=(1<<j)-1,G=Z>>1,H=-7,q=P?$-1:0,W=P?-1:1,Q=w[I+q];for(q+=W,D=Q&(1<<-H)-1,Q>>=-H,H+=j;H>0;D=256*D+w[I+q],q+=W,H-=8);for(U=D&(1<<-H)-1,D>>=-H,H+=F;H>0;U=256*U+w[I+q],q+=W,H-=8);if(D===0)D=1-G;else{if(D===Z)return U?NaN:1/0*(Q?-1:1);U+=Math.pow(2,F),D-=G}return(Q?-1:1)*U*Math.pow(2,D-F)},g.write=function(w,I,P,F,$,D){var U,j,Z,G=8*D-$-1,H=(1<<G)-1,q=H>>1,W=$===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=F?0:D-1,J=F?1:-1,K=I<0||I===0&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(j=isNaN(I)?1:0,U=H):(U=Math.floor(Math.log(I)/Math.LN2),I*(Z=Math.pow(2,-U))<1&&(U--,Z*=2),(I+=U+q>=1?W/Z:W*Math.pow(2,1-q))*Z>=2&&(U++,Z/=2),U+q>=H?(j=0,U=H):U+q>=1?(j=(I*Z-1)*Math.pow(2,$),U+=q):(j=I*Math.pow(2,q-1)*Math.pow(2,$),U=0));$>=8;w[P+Q]=255&j,Q+=J,j/=256,$-=8);for(U=U<<$|j,G+=$;G>0;w[P+Q]=255&U,Q+=J,U/=256,G-=8);w[P+Q-J]|=128*K}},{}],46:[function(d,m,g){typeof Object.create=="function"?m.exports=function(w,I){I&&(w.super_=I,w.prototype=Object.create(I.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}))}:m.exports=function(w,I){if(I){w.super_=I;var P=function(){};P.prototype=I.prototype,w.prototype=new P,w.prototype.constructor=w}}},{}],47:[function(d,m,g){var w=d("has-tostringtag/shams")(),I=d("call-bind/callBound")("Object.prototype.toString"),P=function(D){return!(w&&D&&typeof D=="object"&&Symbol.toStringTag in D)&&I(D)==="[object Arguments]"},F=function(D){return!!P(D)||D!==null&&typeof D=="object"&&typeof D.length=="number"&&D.length>=0&&I(D)!=="[object Array]"&&I(D.callee)==="[object Function]"},$=function(){return P(arguments)}();P.isLegacyArguments=F,m.exports=$?P:F},{"call-bind/callBound":33,"has-tostringtag/shams":43}],48:[function(d,m,g){var w,I,P=Function.prototype.toString,F=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof F=="function"&&typeof Object.defineProperty=="function")try{w=Object.defineProperty({},"length",{get:function(){throw I}}),I={},F(function(){throw 42},null,w)}catch(X){X!==I&&(F=null)}else F=null;var $=/^\s*class\b/,D=function(X){try{var ot=P.call(X);return $.test(ot)}catch{return!1}},U=function(X){try{return!D(X)&&(P.call(X),!0)}catch{return!1}},j=Object.prototype.toString,Z="[object Object]",G="[object Function]",H="[object GeneratorFunction]",q="[object HTMLAllCollection]",W="[object HTML document.all class]",Q="[object HTMLCollection]",J=typeof Symbol=="function"&&!!Symbol.toStringTag,K=!(0 in[,]),V=function(){return!1};if(typeof document=="object"){var tt=document.all;j.call(tt)===j.call(document.all)&&(V=function(X){if((K||!X)&&(X===void 0||typeof X=="object"))try{var ot=j.call(X);return(ot===q||ot===W||ot===Q||ot===Z)&&X("")==null}catch{}return!1})}m.exports=F?function(X){if(V(X))return!0;if(!X||typeof X!="function"&&typeof X!="object")return!1;try{F(X,null,w)}catch(ot){if(ot!==I)return!1}return!D(X)&&U(X)}:function(X){if(V(X))return!0;if(!X||typeof X!="function"&&typeof X!="object")return!1;if(J)return U(X);if(D(X))return!1;var ot=j.call(X);return!(ot!==G&&ot!==H&&!/^\[object HTML/.test(ot))&&U(X)}},{}],49:[function(d,m,g){var w,I=Object.prototype.toString,P=Function.prototype.toString,F=/^\s*(?:function)?\*/,$=d("has-tostringtag/shams")(),D=Object.getPrototypeOf,U=function(){if(!$)return!1;try{return Function("return function*() {}")()}catch{}};m.exports=function(j){if(typeof j!="function")return!1;if(F.test(P.call(j)))return!0;if(!$)return I.call(j)==="[object GeneratorFunction]";if(!D)return!1;if(w===void 0){var Z=U();w=!!Z&&D(Z)}return D(j)===w}},{"has-tostringtag/shams":43}],50:[function(d,m,g){(function(w){(function(){var I=d("for-each"),P=d("available-typed-arrays"),F=d("call-bind/callBound"),$=F("Object.prototype.toString"),D=d("has-tostringtag/shams")(),U=d("gopd"),j=typeof globalThis>"u"?w:globalThis,Z=P(),G=F("Array.prototype.indexOf",!0)||function(J,K){for(var V=0;V<J.length;V+=1)if(J[V]===K)return V;return-1},H=F("String.prototype.slice"),q={},W=Object.getPrototypeOf;D&&U&&W&&I(Z,function(J){var K=new j[J];if(Symbol.toStringTag in K){var V=W(K),tt=U(V,Symbol.toStringTag);if(!tt){var X=W(V);tt=U(X,Symbol.toStringTag)}q[J]=tt.get}});var Q=function(J){var K=!1;return I(q,function(V,tt){if(!K)try{K=V.call(J)===tt}catch{}}),K};m.exports=function(J){if(!J||typeof J!="object")return!1;if(!D||!(Symbol.toStringTag in J)){var K=H($(J),8,-1);return G(Z,K)>-1}return!!U&&Q(J)}}).call(this)}).call(this,commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":27,"call-bind/callBound":33,"for-each":36,gopd:40,"has-tostringtag/shams":43}],51:[function(d,m,g){var w=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;function F(D){if(D==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(D)}function $(){try{if(!Object.assign)return!1;var D=new String("abc");if(D[5]="de",Object.getOwnPropertyNames(D)[0]==="5")return!1;for(var U={},j=0;j<10;j++)U["_"+String.fromCharCode(j)]=j;var Z=Object.getOwnPropertyNames(U).map(function(H){return U[H]});if(Z.join("")!=="0123456789")return!1;var G={};return"abcdefghijklmnopqrst".split("").forEach(function(H){G[H]=H}),Object.keys(Object.assign({},G)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}m.exports=$()?Object.assign:function(D,U){for(var j,Z,G=F(D),H=1;H<arguments.length;H++){for(var q in j=Object(arguments[H]))I.call(j,q)&&(G[q]=j[q]);if(w){Z=w(j);for(var W=0;W<Z.length;W++)P.call(j,Z[W])&&(G[Z[W]]=j[Z[W]])}}return G}},{}],52:[function(d,m,g){var w=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function I($,D){return Object.prototype.hasOwnProperty.call($,D)}g.assign=function($){for(var D=Array.prototype.slice.call(arguments,1);D.length;){var U=D.shift();if(U){if(typeof U!="object")throw new TypeError(U+"must be non-object");for(var j in U)I(U,j)&&($[j]=U[j])}}return $},g.shrinkBuf=function($,D){return $.length===D?$:$.subarray?$.subarray(0,D):($.length=D,$)};var P={arraySet:function($,D,U,j,Z){if(D.subarray&&$.subarray)$.set(D.subarray(U,U+j),Z);else for(var G=0;G<j;G++)$[Z+G]=D[U+G]},flattenChunks:function($){var D,U,j,Z,G,H;for(j=0,D=0,U=$.length;D<U;D++)j+=$[D].length;for(H=new Uint8Array(j),Z=0,D=0,U=$.length;D<U;D++)G=$[D],H.set(G,Z),Z+=G.length;return H}},F={arraySet:function($,D,U,j,Z){for(var G=0;G<j;G++)$[Z+G]=D[U+G]},flattenChunks:function($){return[].concat.apply([],$)}};g.setTyped=function($){$?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,P)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,F))},g.setTyped(w)},{}],53:[function(d,m,g){function w(I,P,F,$){for(var D=65535&I,U=I>>>16&65535,j=0;F!==0;){F-=j=F>2e3?2e3:F;do U=U+(D=D+P[$++]|0)|0;while(--j);D%=65521,U%=65521}return D|U<<16}m.exports=w},{}],54:[function(d,m,g){m.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],55:[function(d,m,g){function w(){for(var F,$=[],D=0;D<256;D++){F=D;for(var U=0;U<8;U++)F=1&F?3988292384^F>>>1:F>>>1;$[D]=F}return $}var I=w();function P(F,$,D,U){var j=I,Z=U+D;F^=-1;for(var G=U;G<Z;G++)F=F>>>8^j[255&(F^$[G])];return~F}m.exports=P},{}],56:[function(d,m,g){var w,I=d("../utils/common"),P=d("./trees"),F=d("./adler32"),$=d("./crc32"),D=d("./messages"),U=0,j=1,Z=3,G=4,H=5,q=0,W=1,Q=-2,J=-3,K=-5,V=-1,tt=1,X=2,ot=3,it=4,lt=0,at=2,ht=8,et=9,ut=15,Et=8,gt=286,dt=30,yt=19,Nt=2*gt+1,Bt=15,St=3,zt=258,kt=zt+St+1,Ct=32,Ut=42,Dt=69,Tt=73,Rt=91,Lt=103,Ht=113,Wt=666,Pt=1,nt=2,Mt=3,ct=4,_t=3;function bt(pt,ee){return pt.msg=D[ee],ee}function xt(pt){return(pt<<1)-(pt>4?9:0)}function $t(pt){for(var ee=pt.length;--ee>=0;)pt[ee]=0}function rt(pt){var ee=pt.state,Vt=ee.pending;Vt>pt.avail_out&&(Vt=pt.avail_out),Vt!==0&&(I.arraySet(pt.output,ee.pending_buf,ee.pending_out,Vt,pt.next_out),pt.next_out+=Vt,ee.pending_out+=Vt,pt.total_out+=Vt,pt.avail_out-=Vt,ee.pending-=Vt,ee.pending===0&&(ee.pending_out=0))}function ft(pt,ee){P._tr_flush_block(pt,pt.block_start>=0?pt.block_start:-1,pt.strstart-pt.block_start,ee),pt.block_start=pt.strstart,rt(pt.strm)}function wt(pt,ee){pt.pending_buf[pt.pending++]=ee}function vt(pt,ee){pt.pending_buf[pt.pending++]=ee>>>8&255,pt.pending_buf[pt.pending++]=255&ee}function Gt(pt,ee,Vt,Zt){var Xt=pt.avail_in;return Xt>Zt&&(Xt=Zt),Xt===0?0:(pt.avail_in-=Xt,I.arraySet(ee,pt.input,pt.next_in,Xt,Vt),pt.state.wrap===1?pt.adler=F(pt.adler,ee,Xt,Vt):pt.state.wrap===2&&(pt.adler=$(pt.adler,ee,Xt,Vt)),pt.next_in+=Xt,pt.total_in+=Xt,Xt)}function Qt(pt,ee){var Vt,Zt,Xt=pt.max_chain_length,te=pt.strstart,ue=pt.prev_length,oe=pt.nice_match,le=pt.strstart>pt.w_size-kt?pt.strstart-(pt.w_size-kt):0,he=pt.window,xe=pt.w_mask,de=pt.prev,pe=pt.strstart+zt,ge=he[te+ue-1],be=he[te+ue];pt.prev_length>=pt.good_match&&(Xt>>=2),oe>pt.lookahead&&(oe=pt.lookahead);do if(he[(Vt=ee)+ue]===be&&he[Vt+ue-1]===ge&&he[Vt]===he[te]&&he[++Vt]===he[te+1]){te+=2,Vt++;do;while(he[++te]===he[++Vt]&&he[++te]===he[++Vt]&&he[++te]===he[++Vt]&&he[++te]===he[++Vt]&&he[++te]===he[++Vt]&&he[++te]===he[++Vt]&&he[++te]===he[++Vt]&&he[++te]===he[++Vt]&&te<pe);if(Zt=zt-(pe-te),te=pe-zt,Zt>ue){if(pt.match_start=ee,ue=Zt,Zt>=oe)break;ge=he[te+ue-1],be=he[te+ue]}}while((ee=de[ee&xe])>le&&--Xt!=0);return ue<=pt.lookahead?ue:pt.lookahead}function ae(pt){var ee,Vt,Zt,Xt,te,ue=pt.w_size;do{if(Xt=pt.window_size-pt.lookahead-pt.strstart,pt.strstart>=ue+(ue-kt)){I.arraySet(pt.window,pt.window,ue,ue,0),pt.match_start-=ue,pt.strstart-=ue,pt.block_start-=ue,ee=Vt=pt.hash_size;do Zt=pt.head[--ee],pt.head[ee]=Zt>=ue?Zt-ue:0;while(--Vt);ee=Vt=ue;do Zt=pt.prev[--ee],pt.prev[ee]=Zt>=ue?Zt-ue:0;while(--Vt);Xt+=ue}if(pt.strm.avail_in===0)break;if(Vt=Gt(pt.strm,pt.window,pt.strstart+pt.lookahead,Xt),pt.lookahead+=Vt,pt.lookahead+pt.insert>=St)for(te=pt.strstart-pt.insert,pt.ins_h=pt.window[te],pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[te+1])&pt.hash_mask;pt.insert&&(pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[te+St-1])&pt.hash_mask,pt.prev[te&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=te,te++,pt.insert--,!(pt.lookahead+pt.insert<St)););}while(pt.lookahead<kt&&pt.strm.avail_in!==0)}function se(pt,ee){var Vt=65535;for(Vt>pt.pending_buf_size-5&&(Vt=pt.pending_buf_size-5);;){if(pt.lookahead<=1){if(ae(pt),pt.lookahead===0&&ee===U)return Pt;if(pt.lookahead===0)break}pt.strstart+=pt.lookahead,pt.lookahead=0;var Zt=pt.block_start+Vt;if((pt.strstart===0||pt.strstart>=Zt)&&(pt.lookahead=pt.strstart-Zt,pt.strstart=Zt,ft(pt,!1),pt.strm.avail_out===0)||pt.strstart-pt.block_start>=pt.w_size-kt&&(ft(pt,!1),pt.strm.avail_out===0))return Pt}return pt.insert=0,ee===G?(ft(pt,!0),pt.strm.avail_out===0?Mt:ct):(pt.strstart>pt.block_start&&(ft(pt,!1),pt.strm.avail_out),Pt)}function ie(pt,ee){for(var Vt,Zt;;){if(pt.lookahead<kt){if(ae(pt),pt.lookahead<kt&&ee===U)return Pt;if(pt.lookahead===0)break}if(Vt=0,pt.lookahead>=St&&(pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[pt.strstart+St-1])&pt.hash_mask,Vt=pt.prev[pt.strstart&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=pt.strstart),Vt!==0&&pt.strstart-Vt<=pt.w_size-kt&&(pt.match_length=Qt(pt,Vt)),pt.match_length>=St)if(Zt=P._tr_tally(pt,pt.strstart-pt.match_start,pt.match_length-St),pt.lookahead-=pt.match_length,pt.match_length<=pt.max_lazy_match&&pt.lookahead>=St){pt.match_length--;do pt.strstart++,pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[pt.strstart+St-1])&pt.hash_mask,Vt=pt.prev[pt.strstart&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=pt.strstart;while(--pt.match_length!=0);pt.strstart++}else pt.strstart+=pt.match_length,pt.match_length=0,pt.ins_h=pt.window[pt.strstart],pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[pt.strstart+1])&pt.hash_mask;else Zt=P._tr_tally(pt,0,pt.window[pt.strstart]),pt.lookahead--,pt.strstart++;if(Zt&&(ft(pt,!1),pt.strm.avail_out===0))return Pt}return pt.insert=pt.strstart<St-1?pt.strstart:St-1,ee===G?(ft(pt,!0),pt.strm.avail_out===0?Mt:ct):pt.last_lit&&(ft(pt,!1),pt.strm.avail_out===0)?Pt:nt}function At(pt,ee){for(var Vt,Zt,Xt;;){if(pt.lookahead<kt){if(ae(pt),pt.lookahead<kt&&ee===U)return Pt;if(pt.lookahead===0)break}if(Vt=0,pt.lookahead>=St&&(pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[pt.strstart+St-1])&pt.hash_mask,Vt=pt.prev[pt.strstart&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=pt.strstart),pt.prev_length=pt.match_length,pt.prev_match=pt.match_start,pt.match_length=St-1,Vt!==0&&pt.prev_length<pt.max_lazy_match&&pt.strstart-Vt<=pt.w_size-kt&&(pt.match_length=Qt(pt,Vt),pt.match_length<=5&&(pt.strategy===tt||pt.match_length===St&&pt.strstart-pt.match_start>4096)&&(pt.match_length=St-1)),pt.prev_length>=St&&pt.match_length<=pt.prev_length){Xt=pt.strstart+pt.lookahead-St,Zt=P._tr_tally(pt,pt.strstart-1-pt.prev_match,pt.prev_length-St),pt.lookahead-=pt.prev_length-1,pt.prev_length-=2;do++pt.strstart<=Xt&&(pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[pt.strstart+St-1])&pt.hash_mask,Vt=pt.prev[pt.strstart&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=pt.strstart);while(--pt.prev_length!=0);if(pt.match_available=0,pt.match_length=St-1,pt.strstart++,Zt&&(ft(pt,!1),pt.strm.avail_out===0))return Pt}else if(pt.match_available){if((Zt=P._tr_tally(pt,0,pt.window[pt.strstart-1]))&&ft(pt,!1),pt.strstart++,pt.lookahead--,pt.strm.avail_out===0)return Pt}else pt.match_available=1,pt.strstart++,pt.lookahead--}return pt.match_available&&(Zt=P._tr_tally(pt,0,pt.window[pt.strstart-1]),pt.match_available=0),pt.insert=pt.strstart<St-1?pt.strstart:St-1,ee===G?(ft(pt,!0),pt.strm.avail_out===0?Mt:ct):pt.last_lit&&(ft(pt,!1),pt.strm.avail_out===0)?Pt:nt}function st(pt,ee){for(var Vt,Zt,Xt,te,ue=pt.window;;){if(pt.lookahead<=zt){if(ae(pt),pt.lookahead<=zt&&ee===U)return Pt;if(pt.lookahead===0)break}if(pt.match_length=0,pt.lookahead>=St&&pt.strstart>0&&(Zt=ue[Xt=pt.strstart-1])===ue[++Xt]&&Zt===ue[++Xt]&&Zt===ue[++Xt]){te=pt.strstart+zt;do;while(Zt===ue[++Xt]&&Zt===ue[++Xt]&&Zt===ue[++Xt]&&Zt===ue[++Xt]&&Zt===ue[++Xt]&&Zt===ue[++Xt]&&Zt===ue[++Xt]&&Zt===ue[++Xt]&&Xt<te);pt.match_length=zt-(te-Xt),pt.match_length>pt.lookahead&&(pt.match_length=pt.lookahead)}if(pt.match_length>=St?(Vt=P._tr_tally(pt,1,pt.match_length-St),pt.lookahead-=pt.match_length,pt.strstart+=pt.match_length,pt.match_length=0):(Vt=P._tr_tally(pt,0,pt.window[pt.strstart]),pt.lookahead--,pt.strstart++),Vt&&(ft(pt,!1),pt.strm.avail_out===0))return Pt}return pt.insert=0,ee===G?(ft(pt,!0),pt.strm.avail_out===0?Mt:ct):pt.last_lit&&(ft(pt,!1),pt.strm.avail_out===0)?Pt:nt}function mt(pt,ee){for(var Vt;;){if(pt.lookahead===0&&(ae(pt),pt.lookahead===0)){if(ee===U)return Pt;break}if(pt.match_length=0,Vt=P._tr_tally(pt,0,pt.window[pt.strstart]),pt.lookahead--,pt.strstart++,Vt&&(ft(pt,!1),pt.strm.avail_out===0))return Pt}return pt.insert=0,ee===G?(ft(pt,!0),pt.strm.avail_out===0?Mt:ct):pt.last_lit&&(ft(pt,!1),pt.strm.avail_out===0)?Pt:nt}function Ot(pt,ee,Vt,Zt,Xt){this.good_length=pt,this.max_lazy=ee,this.nice_length=Vt,this.max_chain=Zt,this.func=Xt}function qt(pt){pt.window_size=2*pt.w_size,$t(pt.head),pt.max_lazy_match=w[pt.level].max_lazy,pt.good_match=w[pt.level].good_length,pt.nice_match=w[pt.level].nice_length,pt.max_chain_length=w[pt.level].max_chain,pt.strstart=0,pt.block_start=0,pt.lookahead=0,pt.insert=0,pt.match_length=pt.prev_length=St-1,pt.match_available=0,pt.ins_h=0}function Yt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ht,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new I.Buf16(2*Nt),this.dyn_dtree=new I.Buf16(2*(2*dt+1)),this.bl_tree=new I.Buf16(2*(2*yt+1)),$t(this.dyn_ltree),$t(this.dyn_dtree),$t(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new I.Buf16(Bt+1),this.heap=new I.Buf16(2*gt+1),$t(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new I.Buf16(2*gt+1),$t(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Jt(pt){var ee;return pt&&pt.state?(pt.total_in=pt.total_out=0,pt.data_type=at,(ee=pt.state).pending=0,ee.pending_out=0,ee.wrap<0&&(ee.wrap=-ee.wrap),ee.status=ee.wrap?Ut:Ht,pt.adler=ee.wrap===2?0:1,ee.last_flush=U,P._tr_init(ee),q):bt(pt,Q)}function Ft(pt){var ee=Jt(pt);return ee===q&&qt(pt.state),ee}function re(pt,ee){return pt&&pt.state?pt.state.wrap!==2?Q:(pt.state.gzhead=ee,q):Q}function jt(pt,ee,Vt,Zt,Xt,te){if(!pt)return Q;var ue=1;if(ee===V&&(ee=6),Zt<0?(ue=0,Zt=-Zt):Zt>15&&(ue=2,Zt-=16),Xt<1||Xt>et||Vt!==ht||Zt<8||Zt>15||ee<0||ee>9||te<0||te>it)return bt(pt,Q);Zt===8&&(Zt=9);var oe=new Yt;return pt.state=oe,oe.strm=pt,oe.wrap=ue,oe.gzhead=null,oe.w_bits=Zt,oe.w_size=1<<oe.w_bits,oe.w_mask=oe.w_size-1,oe.hash_bits=Xt+7,oe.hash_size=1<<oe.hash_bits,oe.hash_mask=oe.hash_size-1,oe.hash_shift=~~((oe.hash_bits+St-1)/St),oe.window=new I.Buf8(2*oe.w_size),oe.head=new I.Buf16(oe.hash_size),oe.prev=new I.Buf16(oe.w_size),oe.lit_bufsize=1<<Xt+6,oe.pending_buf_size=4*oe.lit_bufsize,oe.pending_buf=new I.Buf8(oe.pending_buf_size),oe.d_buf=1*oe.lit_bufsize,oe.l_buf=3*oe.lit_bufsize,oe.level=ee,oe.strategy=te,oe.method=Vt,Ft(pt)}function Kt(pt,ee){return jt(pt,ee,ht,ut,Et,lt)}function It(pt,ee){var Vt,Zt,Xt,te;if(!pt||!pt.state||ee>H||ee<0)return pt?bt(pt,Q):Q;if(Zt=pt.state,!pt.output||!pt.input&&pt.avail_in!==0||Zt.status===Wt&&ee!==G)return bt(pt,pt.avail_out===0?K:Q);if(Zt.strm=pt,Vt=Zt.last_flush,Zt.last_flush=ee,Zt.status===Ut)if(Zt.wrap===2)pt.adler=0,wt(Zt,31),wt(Zt,139),wt(Zt,8),Zt.gzhead?(wt(Zt,(Zt.gzhead.text?1:0)+(Zt.gzhead.hcrc?2:0)+(Zt.gzhead.extra?4:0)+(Zt.gzhead.name?8:0)+(Zt.gzhead.comment?16:0)),wt(Zt,255&Zt.gzhead.time),wt(Zt,Zt.gzhead.time>>8&255),wt(Zt,Zt.gzhead.time>>16&255),wt(Zt,Zt.gzhead.time>>24&255),wt(Zt,Zt.level===9?2:Zt.strategy>=X||Zt.level<2?4:0),wt(Zt,255&Zt.gzhead.os),Zt.gzhead.extra&&Zt.gzhead.extra.length&&(wt(Zt,255&Zt.gzhead.extra.length),wt(Zt,Zt.gzhead.extra.length>>8&255)),Zt.gzhead.hcrc&&(pt.adler=$(pt.adler,Zt.pending_buf,Zt.pending,0)),Zt.gzindex=0,Zt.status=Dt):(wt(Zt,0),wt(Zt,0),wt(Zt,0),wt(Zt,0),wt(Zt,0),wt(Zt,Zt.level===9?2:Zt.strategy>=X||Zt.level<2?4:0),wt(Zt,_t),Zt.status=Ht);else{var ue=ht+(Zt.w_bits-8<<4)<<8;ue|=(Zt.strategy>=X||Zt.level<2?0:Zt.level<6?1:Zt.level===6?2:3)<<6,Zt.strstart!==0&&(ue|=Ct),ue+=31-ue%31,Zt.status=Ht,vt(Zt,ue),Zt.strstart!==0&&(vt(Zt,pt.adler>>>16),vt(Zt,65535&pt.adler)),pt.adler=1}if(Zt.status===Dt)if(Zt.gzhead.extra){for(Xt=Zt.pending;Zt.gzindex<(65535&Zt.gzhead.extra.length)&&(Zt.pending!==Zt.pending_buf_size||(Zt.gzhead.hcrc&&Zt.pending>Xt&&(pt.adler=$(pt.adler,Zt.pending_buf,Zt.pending-Xt,Xt)),rt(pt),Xt=Zt.pending,Zt.pending!==Zt.pending_buf_size));)wt(Zt,255&Zt.gzhead.extra[Zt.gzindex]),Zt.gzindex++;Zt.gzhead.hcrc&&Zt.pending>Xt&&(pt.adler=$(pt.adler,Zt.pending_buf,Zt.pending-Xt,Xt)),Zt.gzindex===Zt.gzhead.extra.length&&(Zt.gzindex=0,Zt.status=Tt)}else Zt.status=Tt;if(Zt.status===Tt)if(Zt.gzhead.name){Xt=Zt.pending;do{if(Zt.pending===Zt.pending_buf_size&&(Zt.gzhead.hcrc&&Zt.pending>Xt&&(pt.adler=$(pt.adler,Zt.pending_buf,Zt.pending-Xt,Xt)),rt(pt),Xt=Zt.pending,Zt.pending===Zt.pending_buf_size)){te=1;break}te=Zt.gzindex<Zt.gzhead.name.length?255&Zt.gzhead.name.charCodeAt(Zt.gzindex++):0,wt(Zt,te)}while(te!==0);Zt.gzhead.hcrc&&Zt.pending>Xt&&(pt.adler=$(pt.adler,Zt.pending_buf,Zt.pending-Xt,Xt)),te===0&&(Zt.gzindex=0,Zt.status=Rt)}else Zt.status=Rt;if(Zt.status===Rt)if(Zt.gzhead.comment){Xt=Zt.pending;do{if(Zt.pending===Zt.pending_buf_size&&(Zt.gzhead.hcrc&&Zt.pending>Xt&&(pt.adler=$(pt.adler,Zt.pending_buf,Zt.pending-Xt,Xt)),rt(pt),Xt=Zt.pending,Zt.pending===Zt.pending_buf_size)){te=1;break}te=Zt.gzindex<Zt.gzhead.comment.length?255&Zt.gzhead.comment.charCodeAt(Zt.gzindex++):0,wt(Zt,te)}while(te!==0);Zt.gzhead.hcrc&&Zt.pending>Xt&&(pt.adler=$(pt.adler,Zt.pending_buf,Zt.pending-Xt,Xt)),te===0&&(Zt.status=Lt)}else Zt.status=Lt;if(Zt.status===Lt&&(Zt.gzhead.hcrc?(Zt.pending+2>Zt.pending_buf_size&&rt(pt),Zt.pending+2<=Zt.pending_buf_size&&(wt(Zt,255&pt.adler),wt(Zt,pt.adler>>8&255),pt.adler=0,Zt.status=Ht)):Zt.status=Ht),Zt.pending!==0){if(rt(pt),pt.avail_out===0)return Zt.last_flush=-1,q}else if(pt.avail_in===0&&xt(ee)<=xt(Vt)&&ee!==G)return bt(pt,K);if(Zt.status===Wt&&pt.avail_in!==0)return bt(pt,K);if(pt.avail_in!==0||Zt.lookahead!==0||ee!==U&&Zt.status!==Wt){var oe=Zt.strategy===X?mt(Zt,ee):Zt.strategy===ot?st(Zt,ee):w[Zt.level].func(Zt,ee);if(oe!==Mt&&oe!==ct||(Zt.status=Wt),oe===Pt||oe===Mt)return pt.avail_out===0&&(Zt.last_flush=-1),q;if(oe===nt&&(ee===j?P._tr_align(Zt):ee!==H&&(P._tr_stored_block(Zt,0,0,!1),ee===Z&&($t(Zt.head),Zt.lookahead===0&&(Zt.strstart=0,Zt.block_start=0,Zt.insert=0))),rt(pt),pt.avail_out===0))return Zt.last_flush=-1,q}return ee!==G?q:Zt.wrap<=0?W:(Zt.wrap===2?(wt(Zt,255&pt.adler),wt(Zt,pt.adler>>8&255),wt(Zt,pt.adler>>16&255),wt(Zt,pt.adler>>24&255),wt(Zt,255&pt.total_in),wt(Zt,pt.total_in>>8&255),wt(Zt,pt.total_in>>16&255),wt(Zt,pt.total_in>>24&255)):(vt(Zt,pt.adler>>>16),vt(Zt,65535&pt.adler)),rt(pt),Zt.wrap>0&&(Zt.wrap=-Zt.wrap),Zt.pending!==0?q:W)}function ne(pt){var ee;return pt&&pt.state?(ee=pt.state.status)!==Ut&&ee!==Dt&&ee!==Tt&&ee!==Rt&&ee!==Lt&&ee!==Ht&&ee!==Wt?bt(pt,Q):(pt.state=null,ee===Ht?bt(pt,J):q):Q}function ce(pt,ee){var Vt,Zt,Xt,te,ue,oe,le,he,xe=ee.length;if(!pt||!pt.state||(te=(Vt=pt.state).wrap)===2||te===1&&Vt.status!==Ut||Vt.lookahead)return Q;for(te===1&&(pt.adler=F(pt.adler,ee,xe,0)),Vt.wrap=0,xe>=Vt.w_size&&(te===0&&($t(Vt.head),Vt.strstart=0,Vt.block_start=0,Vt.insert=0),he=new I.Buf8(Vt.w_size),I.arraySet(he,ee,xe-Vt.w_size,Vt.w_size,0),ee=he,xe=Vt.w_size),ue=pt.avail_in,oe=pt.next_in,le=pt.input,pt.avail_in=xe,pt.next_in=0,pt.input=ee,ae(Vt);Vt.lookahead>=St;){Zt=Vt.strstart,Xt=Vt.lookahead-(St-1);do Vt.ins_h=(Vt.ins_h<<Vt.hash_shift^Vt.window[Zt+St-1])&Vt.hash_mask,Vt.prev[Zt&Vt.w_mask]=Vt.head[Vt.ins_h],Vt.head[Vt.ins_h]=Zt,Zt++;while(--Xt);Vt.strstart=Zt,Vt.lookahead=St-1,ae(Vt)}return Vt.strstart+=Vt.lookahead,Vt.block_start=Vt.strstart,Vt.insert=Vt.lookahead,Vt.lookahead=0,Vt.match_length=Vt.prev_length=St-1,Vt.match_available=0,pt.next_in=oe,pt.input=le,pt.avail_in=ue,Vt.wrap=te,q}w=[new Ot(0,0,0,0,se),new Ot(4,4,8,4,ie),new Ot(4,5,16,8,ie),new Ot(4,6,32,32,ie),new Ot(4,4,16,16,At),new Ot(8,16,32,32,At),new Ot(8,16,128,128,At),new Ot(8,32,128,256,At),new Ot(32,128,258,1024,At),new Ot(32,258,258,4096,At)],g.deflateInit=Kt,g.deflateInit2=jt,g.deflateReset=Ft,g.deflateResetKeep=Jt,g.deflateSetHeader=re,g.deflate=It,g.deflateEnd=ne,g.deflateSetDictionary=ce,g.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":52,"./adler32":53,"./crc32":55,"./messages":60,"./trees":61}],57:[function(d,m,g){var w=30,I=12;m.exports=function(P,F){var $,D,U,j,Z,G,H,q,W,Q,J,K,V,tt,X,ot,it,lt,at,ht,et,ut,Et,gt,dt;$=P.state,D=P.next_in,gt=P.input,U=D+(P.avail_in-5),j=P.next_out,dt=P.output,Z=j-(F-P.avail_out),G=j+(P.avail_out-257),H=$.dmax,q=$.wsize,W=$.whave,Q=$.wnext,J=$.window,K=$.hold,V=$.bits,tt=$.lencode,X=$.distcode,ot=(1<<$.lenbits)-1,it=(1<<$.distbits)-1;t:do{V<15&&(K+=gt[D++]<<V,V+=8,K+=gt[D++]<<V,V+=8),lt=tt[K&ot];e:for(;;){if(K>>>=at=lt>>>24,V-=at,(at=lt>>>16&255)==0)dt[j++]=65535&lt;else{if(!(16&at)){if(64&at){if(32&at){$.mode=I;break t}P.msg="invalid literal/length code",$.mode=w;break t}lt=tt[(65535&lt)+(K&(1<<at)-1)];continue e}for(ht=65535&lt,(at&=15)&&(V<at&&(K+=gt[D++]<<V,V+=8),ht+=K&(1<<at)-1,K>>>=at,V-=at),V<15&&(K+=gt[D++]<<V,V+=8,K+=gt[D++]<<V,V+=8),lt=X[K&it];;){if(K>>>=at=lt>>>24,V-=at,16&(at=lt>>>16&255)){if(et=65535&lt,V<(at&=15)&&(K+=gt[D++]<<V,(V+=8)<at&&(K+=gt[D++]<<V,V+=8)),(et+=K&(1<<at)-1)>H){P.msg="invalid distance too far back",$.mode=w;break t}if(K>>>=at,V-=at,et>(at=j-Z)){if((at=et-at)>W&&$.sane){P.msg="invalid distance too far back",$.mode=w;break t}if(ut=0,Et=J,Q===0){if(ut+=q-at,at<ht){ht-=at;do dt[j++]=J[ut++];while(--at);ut=j-et,Et=dt}}else if(Q<at){if(ut+=q+Q-at,(at-=Q)<ht){ht-=at;do dt[j++]=J[ut++];while(--at);if(ut=0,Q<ht){ht-=at=Q;do dt[j++]=J[ut++];while(--at);ut=j-et,Et=dt}}}else if(ut+=Q-at,at<ht){ht-=at;do dt[j++]=J[ut++];while(--at);ut=j-et,Et=dt}for(;ht>2;)dt[j++]=Et[ut++],dt[j++]=Et[ut++],dt[j++]=Et[ut++],ht-=3;ht&&(dt[j++]=Et[ut++],ht>1&&(dt[j++]=Et[ut++]))}else{ut=j-et;do dt[j++]=dt[ut++],dt[j++]=dt[ut++],dt[j++]=dt[ut++],ht-=3;while(ht>2);ht&&(dt[j++]=dt[ut++],ht>1&&(dt[j++]=dt[ut++]))}break}if(64&at){P.msg="invalid distance code",$.mode=w;break t}lt=X[(65535&lt)+(K&(1<<at)-1)]}}break}}while(D<U&&j<G);D-=ht=V>>3,K&=(1<<(V-=ht<<3))-1,P.next_in=D,P.next_out=j,P.avail_in=D<U?U-D+5:5-(D-U),P.avail_out=j<G?G-j+257:257-(j-G),$.hold=K,$.bits=V}},{}],58:[function(d,m,g){var w=d("../utils/common"),I=d("./adler32"),P=d("./crc32"),F=d("./inffast"),$=d("./inftrees"),D=0,U=1,j=2,Z=4,G=5,H=6,q=0,W=1,Q=2,J=-2,K=-3,V=-4,tt=-5,X=8,ot=1,it=2,lt=3,at=4,ht=5,et=6,ut=7,Et=8,gt=9,dt=10,yt=11,Nt=12,Bt=13,St=14,zt=15,kt=16,Ct=17,Ut=18,Dt=19,Tt=20,Rt=21,Lt=22,Ht=23,Wt=24,Pt=25,nt=26,Mt=27,ct=28,_t=29,bt=30,xt=31,$t=852,rt=592,ft=15;function wt(jt){return(jt>>>24&255)+(jt>>>8&65280)+((65280&jt)<<8)+((255&jt)<<24)}function vt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new w.Buf16(320),this.work=new w.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Gt(jt){var Kt;return jt&&jt.state?(Kt=jt.state,jt.total_in=jt.total_out=Kt.total=0,jt.msg="",Kt.wrap&&(jt.adler=1&Kt.wrap),Kt.mode=ot,Kt.last=0,Kt.havedict=0,Kt.dmax=32768,Kt.head=null,Kt.hold=0,Kt.bits=0,Kt.lencode=Kt.lendyn=new w.Buf32($t),Kt.distcode=Kt.distdyn=new w.Buf32(rt),Kt.sane=1,Kt.back=-1,q):J}function Qt(jt){var Kt;return jt&&jt.state?((Kt=jt.state).wsize=0,Kt.whave=0,Kt.wnext=0,Gt(jt)):J}function ae(jt,Kt){var It,ne;return jt&&jt.state?(ne=jt.state,Kt<0?(It=0,Kt=-Kt):(It=1+(Kt>>4),Kt<48&&(Kt&=15)),Kt&&(Kt<8||Kt>15)?J:(ne.window!==null&&ne.wbits!==Kt&&(ne.window=null),ne.wrap=It,ne.wbits=Kt,Qt(jt))):J}function se(jt,Kt){var It,ne;return jt?(ne=new vt,jt.state=ne,ne.window=null,(It=ae(jt,Kt))!==q&&(jt.state=null),It):J}function ie(jt){return se(jt,ft)}var At,st,mt=!0;function Ot(jt){if(mt){var Kt;for(At=new w.Buf32(512),st=new w.Buf32(32),Kt=0;Kt<144;)jt.lens[Kt++]=8;for(;Kt<256;)jt.lens[Kt++]=9;for(;Kt<280;)jt.lens[Kt++]=7;for(;Kt<288;)jt.lens[Kt++]=8;for($(U,jt.lens,0,288,At,0,jt.work,{bits:9}),Kt=0;Kt<32;)jt.lens[Kt++]=5;$(j,jt.lens,0,32,st,0,jt.work,{bits:5}),mt=!1}jt.lencode=At,jt.lenbits=9,jt.distcode=st,jt.distbits=5}function qt(jt,Kt,It,ne){var ce,pt=jt.state;return pt.window===null&&(pt.wsize=1<<pt.wbits,pt.wnext=0,pt.whave=0,pt.window=new w.Buf8(pt.wsize)),ne>=pt.wsize?(w.arraySet(pt.window,Kt,It-pt.wsize,pt.wsize,0),pt.wnext=0,pt.whave=pt.wsize):((ce=pt.wsize-pt.wnext)>ne&&(ce=ne),w.arraySet(pt.window,Kt,It-ne,ce,pt.wnext),(ne-=ce)?(w.arraySet(pt.window,Kt,It-ne,ne,0),pt.wnext=ne,pt.whave=pt.wsize):(pt.wnext+=ce,pt.wnext===pt.wsize&&(pt.wnext=0),pt.whave<pt.wsize&&(pt.whave+=ce))),0}function Yt(jt,Kt){var It,ne,ce,pt,ee,Vt,Zt,Xt,te,ue,oe,le,he,xe,de,pe,ge,be,ke,Ae,me,we,Ee,ve,ye=0,_e=new w.Buf8(4),Se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!jt||!jt.state||!jt.output||!jt.input&&jt.avail_in!==0)return J;(It=jt.state).mode===Nt&&(It.mode=Bt),ee=jt.next_out,ce=jt.output,Zt=jt.avail_out,pt=jt.next_in,ne=jt.input,Vt=jt.avail_in,Xt=It.hold,te=It.bits,ue=Vt,oe=Zt,we=q;t:for(;;)switch(It.mode){case ot:if(It.wrap===0){It.mode=Bt;break}for(;te<16;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}if(2&It.wrap&&Xt===35615){It.check=0,_e[0]=255&Xt,_e[1]=Xt>>>8&255,It.check=P(It.check,_e,2,0),Xt=0,te=0,It.mode=it;break}if(It.flags=0,It.head&&(It.head.done=!1),!(1&It.wrap)||(((255&Xt)<<8)+(Xt>>8))%31){jt.msg="incorrect header check",It.mode=bt;break}if((15&Xt)!==X){jt.msg="unknown compression method",It.mode=bt;break}if(te-=4,me=8+(15&(Xt>>>=4)),It.wbits===0)It.wbits=me;else if(me>It.wbits){jt.msg="invalid window size",It.mode=bt;break}It.dmax=1<<me,jt.adler=It.check=1,It.mode=512&Xt?dt:Nt,Xt=0,te=0;break;case it:for(;te<16;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}if(It.flags=Xt,(255&It.flags)!==X){jt.msg="unknown compression method",It.mode=bt;break}if(57344&It.flags){jt.msg="unknown header flags set",It.mode=bt;break}It.head&&(It.head.text=Xt>>8&1),512&It.flags&&(_e[0]=255&Xt,_e[1]=Xt>>>8&255,It.check=P(It.check,_e,2,0)),Xt=0,te=0,It.mode=lt;case lt:for(;te<32;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}It.head&&(It.head.time=Xt),512&It.flags&&(_e[0]=255&Xt,_e[1]=Xt>>>8&255,_e[2]=Xt>>>16&255,_e[3]=Xt>>>24&255,It.check=P(It.check,_e,4,0)),Xt=0,te=0,It.mode=at;case at:for(;te<16;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}It.head&&(It.head.xflags=255&Xt,It.head.os=Xt>>8),512&It.flags&&(_e[0]=255&Xt,_e[1]=Xt>>>8&255,It.check=P(It.check,_e,2,0)),Xt=0,te=0,It.mode=ht;case ht:if(1024&It.flags){for(;te<16;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}It.length=Xt,It.head&&(It.head.extra_len=Xt),512&It.flags&&(_e[0]=255&Xt,_e[1]=Xt>>>8&255,It.check=P(It.check,_e,2,0)),Xt=0,te=0}else It.head&&(It.head.extra=null);It.mode=et;case et:if(1024&It.flags&&((le=It.length)>Vt&&(le=Vt),le&&(It.head&&(me=It.head.extra_len-It.length,It.head.extra||(It.head.extra=new Array(It.head.extra_len)),w.arraySet(It.head.extra,ne,pt,le,me)),512&It.flags&&(It.check=P(It.check,ne,le,pt)),Vt-=le,pt+=le,It.length-=le),It.length))break t;It.length=0,It.mode=ut;case ut:if(2048&It.flags){if(Vt===0)break t;le=0;do me=ne[pt+le++],It.head&&me&&It.length<65536&&(It.head.name+=String.fromCharCode(me));while(me&&le<Vt);if(512&It.flags&&(It.check=P(It.check,ne,le,pt)),Vt-=le,pt+=le,me)break t}else It.head&&(It.head.name=null);It.length=0,It.mode=Et;case Et:if(4096&It.flags){if(Vt===0)break t;le=0;do me=ne[pt+le++],It.head&&me&&It.length<65536&&(It.head.comment+=String.fromCharCode(me));while(me&&le<Vt);if(512&It.flags&&(It.check=P(It.check,ne,le,pt)),Vt-=le,pt+=le,me)break t}else It.head&&(It.head.comment=null);It.mode=gt;case gt:if(512&It.flags){for(;te<16;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}if(Xt!==(65535&It.check)){jt.msg="header crc mismatch",It.mode=bt;break}Xt=0,te=0}It.head&&(It.head.hcrc=It.flags>>9&1,It.head.done=!0),jt.adler=It.check=0,It.mode=Nt;break;case dt:for(;te<32;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}jt.adler=It.check=wt(Xt),Xt=0,te=0,It.mode=yt;case yt:if(It.havedict===0)return jt.next_out=ee,jt.avail_out=Zt,jt.next_in=pt,jt.avail_in=Vt,It.hold=Xt,It.bits=te,Q;jt.adler=It.check=1,It.mode=Nt;case Nt:if(Kt===G||Kt===H)break t;case Bt:if(It.last){Xt>>>=7&te,te-=7&te,It.mode=Mt;break}for(;te<3;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}switch(It.last=1&Xt,te-=1,3&(Xt>>>=1)){case 0:It.mode=St;break;case 1:if(Ot(It),It.mode=Tt,Kt===H){Xt>>>=2,te-=2;break t}break;case 2:It.mode=Ct;break;case 3:jt.msg="invalid block type",It.mode=bt}Xt>>>=2,te-=2;break;case St:for(Xt>>>=7&te,te-=7&te;te<32;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}if((65535&Xt)!=(Xt>>>16^65535)){jt.msg="invalid stored block lengths",It.mode=bt;break}if(It.length=65535&Xt,Xt=0,te=0,It.mode=zt,Kt===H)break t;case zt:It.mode=kt;case kt:if(le=It.length){if(le>Vt&&(le=Vt),le>Zt&&(le=Zt),le===0)break t;w.arraySet(ce,ne,pt,le,ee),Vt-=le,pt+=le,Zt-=le,ee+=le,It.length-=le;break}It.mode=Nt;break;case Ct:for(;te<14;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}if(It.nlen=257+(31&Xt),Xt>>>=5,te-=5,It.ndist=1+(31&Xt),Xt>>>=5,te-=5,It.ncode=4+(15&Xt),Xt>>>=4,te-=4,It.nlen>286||It.ndist>30){jt.msg="too many length or distance symbols",It.mode=bt;break}It.have=0,It.mode=Ut;case Ut:for(;It.have<It.ncode;){for(;te<3;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}It.lens[Se[It.have++]]=7&Xt,Xt>>>=3,te-=3}for(;It.have<19;)It.lens[Se[It.have++]]=0;if(It.lencode=It.lendyn,It.lenbits=7,Ee={bits:It.lenbits},we=$(D,It.lens,0,19,It.lencode,0,It.work,Ee),It.lenbits=Ee.bits,we){jt.msg="invalid code lengths set",It.mode=bt;break}It.have=0,It.mode=Dt;case Dt:for(;It.have<It.nlen+It.ndist;){for(;pe=(ye=It.lencode[Xt&(1<<It.lenbits)-1])>>>16&255,ge=65535&ye,!((de=ye>>>24)<=te);){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}if(ge<16)Xt>>>=de,te-=de,It.lens[It.have++]=ge;else{if(ge===16){for(ve=de+2;te<ve;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}if(Xt>>>=de,te-=de,It.have===0){jt.msg="invalid bit length repeat",It.mode=bt;break}me=It.lens[It.have-1],le=3+(3&Xt),Xt>>>=2,te-=2}else if(ge===17){for(ve=de+3;te<ve;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}te-=de,me=0,le=3+(7&(Xt>>>=de)),Xt>>>=3,te-=3}else{for(ve=de+7;te<ve;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}te-=de,me=0,le=11+(127&(Xt>>>=de)),Xt>>>=7,te-=7}if(It.have+le>It.nlen+It.ndist){jt.msg="invalid bit length repeat",It.mode=bt;break}for(;le--;)It.lens[It.have++]=me}}if(It.mode===bt)break;if(It.lens[256]===0){jt.msg="invalid code -- missing end-of-block",It.mode=bt;break}if(It.lenbits=9,Ee={bits:It.lenbits},we=$(U,It.lens,0,It.nlen,It.lencode,0,It.work,Ee),It.lenbits=Ee.bits,we){jt.msg="invalid literal/lengths set",It.mode=bt;break}if(It.distbits=6,It.distcode=It.distdyn,Ee={bits:It.distbits},we=$(j,It.lens,It.nlen,It.ndist,It.distcode,0,It.work,Ee),It.distbits=Ee.bits,we){jt.msg="invalid distances set",It.mode=bt;break}if(It.mode=Tt,Kt===H)break t;case Tt:It.mode=Rt;case Rt:if(Vt>=6&&Zt>=258){jt.next_out=ee,jt.avail_out=Zt,jt.next_in=pt,jt.avail_in=Vt,It.hold=Xt,It.bits=te,F(jt,oe),ee=jt.next_out,ce=jt.output,Zt=jt.avail_out,pt=jt.next_in,ne=jt.input,Vt=jt.avail_in,Xt=It.hold,te=It.bits,It.mode===Nt&&(It.back=-1);break}for(It.back=0;pe=(ye=It.lencode[Xt&(1<<It.lenbits)-1])>>>16&255,ge=65535&ye,!((de=ye>>>24)<=te);){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}if(pe&&!(240&pe)){for(be=de,ke=pe,Ae=ge;pe=(ye=It.lencode[Ae+((Xt&(1<<be+ke)-1)>>be)])>>>16&255,ge=65535&ye,!(be+(de=ye>>>24)<=te);){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}Xt>>>=be,te-=be,It.back+=be}if(Xt>>>=de,te-=de,It.back+=de,It.length=ge,pe===0){It.mode=nt;break}if(32&pe){It.back=-1,It.mode=Nt;break}if(64&pe){jt.msg="invalid literal/length code",It.mode=bt;break}It.extra=15&pe,It.mode=Lt;case Lt:if(It.extra){for(ve=It.extra;te<ve;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}It.length+=Xt&(1<<It.extra)-1,Xt>>>=It.extra,te-=It.extra,It.back+=It.extra}It.was=It.length,It.mode=Ht;case Ht:for(;pe=(ye=It.distcode[Xt&(1<<It.distbits)-1])>>>16&255,ge=65535&ye,!((de=ye>>>24)<=te);){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}if(!(240&pe)){for(be=de,ke=pe,Ae=ge;pe=(ye=It.distcode[Ae+((Xt&(1<<be+ke)-1)>>be)])>>>16&255,ge=65535&ye,!(be+(de=ye>>>24)<=te);){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}Xt>>>=be,te-=be,It.back+=be}if(Xt>>>=de,te-=de,It.back+=de,64&pe){jt.msg="invalid distance code",It.mode=bt;break}It.offset=ge,It.extra=15&pe,It.mode=Wt;case Wt:if(It.extra){for(ve=It.extra;te<ve;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}It.offset+=Xt&(1<<It.extra)-1,Xt>>>=It.extra,te-=It.extra,It.back+=It.extra}if(It.offset>It.dmax){jt.msg="invalid distance too far back",It.mode=bt;break}It.mode=Pt;case Pt:if(Zt===0)break t;if(le=oe-Zt,It.offset>le){if((le=It.offset-le)>It.whave&&It.sane){jt.msg="invalid distance too far back",It.mode=bt;break}le>It.wnext?(le-=It.wnext,he=It.wsize-le):he=It.wnext-le,le>It.length&&(le=It.length),xe=It.window}else xe=ce,he=ee-It.offset,le=It.length;le>Zt&&(le=Zt),Zt-=le,It.length-=le;do ce[ee++]=xe[he++];while(--le);It.length===0&&(It.mode=Rt);break;case nt:if(Zt===0)break t;ce[ee++]=It.length,Zt--,It.mode=Rt;break;case Mt:if(It.wrap){for(;te<32;){if(Vt===0)break t;Vt--,Xt|=ne[pt++]<<te,te+=8}if(oe-=Zt,jt.total_out+=oe,It.total+=oe,oe&&(jt.adler=It.check=It.flags?P(It.check,ce,oe,ee-oe):I(It.check,ce,oe,ee-oe)),oe=Zt,(It.flags?Xt:wt(Xt))!==It.check){jt.msg="incorrect data check",It.mode=bt;break}Xt=0,te=0}It.mode=ct;case ct:if(It.wrap&&It.flags){for(;te<32;){if(Vt===0)break t;Vt--,Xt+=ne[pt++]<<te,te+=8}if(Xt!==(4294967295&It.total)){jt.msg="incorrect length check",It.mode=bt;break}Xt=0,te=0}It.mode=_t;case _t:we=W;break t;case bt:we=K;break t;case xt:return V;default:return J}return jt.next_out=ee,jt.avail_out=Zt,jt.next_in=pt,jt.avail_in=Vt,It.hold=Xt,It.bits=te,(It.wsize||oe!==jt.avail_out&&It.mode<bt&&(It.mode<Mt||Kt!==Z))&&qt(jt,jt.output,jt.next_out,oe-jt.avail_out),ue-=jt.avail_in,oe-=jt.avail_out,jt.total_in+=ue,jt.total_out+=oe,It.total+=oe,It.wrap&&oe&&(jt.adler=It.check=It.flags?P(It.check,ce,oe,jt.next_out-oe):I(It.check,ce,oe,jt.next_out-oe)),jt.data_type=It.bits+(It.last?64:0)+(It.mode===Nt?128:0)+(It.mode===Tt||It.mode===zt?256:0),(ue===0&&oe===0||Kt===Z)&&we===q&&(we=tt),we}function Jt(jt){if(!jt||!jt.state)return J;var Kt=jt.state;return Kt.window&&(Kt.window=null),jt.state=null,q}function Ft(jt,Kt){var It;return jt&&jt.state&&2&(It=jt.state).wrap?(It.head=Kt,Kt.done=!1,q):J}function re(jt,Kt){var It,ne=Kt.length;return jt&&jt.state?(It=jt.state).wrap!==0&&It.mode!==yt?J:It.mode===yt&&I(1,Kt,ne,0)!==It.check?K:qt(jt,Kt,ne,ne)?(It.mode=xt,V):(It.havedict=1,q):J}g.inflateReset=Qt,g.inflateReset2=ae,g.inflateResetKeep=Gt,g.inflateInit=ie,g.inflateInit2=se,g.inflate=Yt,g.inflateEnd=Jt,g.inflateGetHeader=Ft,g.inflateSetDictionary=re,g.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":52,"./adler32":53,"./crc32":55,"./inffast":57,"./inftrees":59}],59:[function(d,m,g){var w=d("../utils/common"),I=15,P=852,F=592,$=0,D=1,U=2,j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Z=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],G=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],H=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];m.exports=function(q,W,Q,J,K,V,tt,X){var ot,it,lt,at,ht,et,ut,Et,gt,dt=X.bits,yt=0,Nt=0,Bt=0,St=0,zt=0,kt=0,Ct=0,Ut=0,Dt=0,Tt=0,Rt=null,Lt=0,Ht=new w.Buf16(I+1),Wt=new w.Buf16(I+1),Pt=null,nt=0;for(yt=0;yt<=I;yt++)Ht[yt]=0;for(Nt=0;Nt<J;Nt++)Ht[W[Q+Nt]]++;for(zt=dt,St=I;St>=1&&Ht[St]===0;St--);if(zt>St&&(zt=St),St===0)return K[V++]=20971520,K[V++]=20971520,X.bits=1,0;for(Bt=1;Bt<St&&Ht[Bt]===0;Bt++);for(zt<Bt&&(zt=Bt),Ut=1,yt=1;yt<=I;yt++)if(Ut<<=1,(Ut-=Ht[yt])<0)return-1;if(Ut>0&&(q===$||St!==1))return-1;for(Wt[1]=0,yt=1;yt<I;yt++)Wt[yt+1]=Wt[yt]+Ht[yt];for(Nt=0;Nt<J;Nt++)W[Q+Nt]!==0&&(tt[Wt[W[Q+Nt]]++]=Nt);if(q===$?(Rt=Pt=tt,et=19):q===D?(Rt=j,Lt-=257,Pt=Z,nt-=257,et=256):(Rt=G,Pt=H,et=-1),Tt=0,Nt=0,yt=Bt,ht=V,kt=zt,Ct=0,lt=-1,at=(Dt=1<<zt)-1,q===D&&Dt>P||q===U&&Dt>F)return 1;for(;;){ut=yt-Ct,tt[Nt]<et?(Et=0,gt=tt[Nt]):tt[Nt]>et?(Et=Pt[nt+tt[Nt]],gt=Rt[Lt+tt[Nt]]):(Et=96,gt=0),ot=1<<yt-Ct,Bt=it=1<<kt;do K[ht+(Tt>>Ct)+(it-=ot)]=ut<<24|Et<<16|gt;while(it!==0);for(ot=1<<yt-1;Tt&ot;)ot>>=1;if(ot!==0?(Tt&=ot-1,Tt+=ot):Tt=0,Nt++,--Ht[yt]==0){if(yt===St)break;yt=W[Q+tt[Nt]]}if(yt>zt&&(Tt&at)!==lt){for(Ct===0&&(Ct=zt),ht+=Bt,Ut=1<<(kt=yt-Ct);kt+Ct<St&&!((Ut-=Ht[kt+Ct])<=0);)kt++,Ut<<=1;if(Dt+=1<<kt,q===D&&Dt>P||q===U&&Dt>F)return 1;K[lt=Tt&at]=zt<<24|kt<<16|ht-V}}return Tt!==0&&(K[ht+Tt]=yt-Ct<<24|64<<16),X.bits=zt,0}},{"../utils/common":52}],60:[function(d,m,g){m.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],61:[function(d,m,g){var w=d("../utils/common"),I=4,P=0,F=1,$=2;function D(Ft){for(var re=Ft.length;--re>=0;)Ft[re]=0}var U=0,j=1,Z=2,G=3,H=258,q=29,W=256,Q=W+1+q,J=30,K=19,V=2*Q+1,tt=15,X=16,ot=7,it=256,lt=16,at=17,ht=18,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ut=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],gt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],dt=512,yt=new Array(2*(Q+2));D(yt);var Nt=new Array(2*J);D(Nt);var Bt=new Array(dt);D(Bt);var St=new Array(H-G+1);D(St);var zt=new Array(q);D(zt);var kt,Ct,Ut,Dt=new Array(J);function Tt(Ft,re,jt,Kt,It){this.static_tree=Ft,this.extra_bits=re,this.extra_base=jt,this.elems=Kt,this.max_length=It,this.has_stree=Ft&&Ft.length}function Rt(Ft,re){this.dyn_tree=Ft,this.max_code=0,this.stat_desc=re}function Lt(Ft){return Ft<256?Bt[Ft]:Bt[256+(Ft>>>7)]}function Ht(Ft,re){Ft.pending_buf[Ft.pending++]=255&re,Ft.pending_buf[Ft.pending++]=re>>>8&255}function Wt(Ft,re,jt){Ft.bi_valid>X-jt?(Ft.bi_buf|=re<<Ft.bi_valid&65535,Ht(Ft,Ft.bi_buf),Ft.bi_buf=re>>X-Ft.bi_valid,Ft.bi_valid+=jt-X):(Ft.bi_buf|=re<<Ft.bi_valid&65535,Ft.bi_valid+=jt)}function Pt(Ft,re,jt){Wt(Ft,jt[2*re],jt[2*re+1])}function nt(Ft,re){var jt=0;do jt|=1&Ft,Ft>>>=1,jt<<=1;while(--re>0);return jt>>>1}function Mt(Ft){Ft.bi_valid===16?(Ht(Ft,Ft.bi_buf),Ft.bi_buf=0,Ft.bi_valid=0):Ft.bi_valid>=8&&(Ft.pending_buf[Ft.pending++]=255&Ft.bi_buf,Ft.bi_buf>>=8,Ft.bi_valid-=8)}function ct(Ft,re){var jt,Kt,It,ne,ce,pt,ee=re.dyn_tree,Vt=re.max_code,Zt=re.stat_desc.static_tree,Xt=re.stat_desc.has_stree,te=re.stat_desc.extra_bits,ue=re.stat_desc.extra_base,oe=re.stat_desc.max_length,le=0;for(ne=0;ne<=tt;ne++)Ft.bl_count[ne]=0;for(ee[2*Ft.heap[Ft.heap_max]+1]=0,jt=Ft.heap_max+1;jt<V;jt++)(ne=ee[2*ee[2*(Kt=Ft.heap[jt])+1]+1]+1)>oe&&(ne=oe,le++),ee[2*Kt+1]=ne,Kt>Vt||(Ft.bl_count[ne]++,ce=0,Kt>=ue&&(ce=te[Kt-ue]),pt=ee[2*Kt],Ft.opt_len+=pt*(ne+ce),Xt&&(Ft.static_len+=pt*(Zt[2*Kt+1]+ce)));if(le!==0){do{for(ne=oe-1;Ft.bl_count[ne]===0;)ne--;Ft.bl_count[ne]--,Ft.bl_count[ne+1]+=2,Ft.bl_count[oe]--,le-=2}while(le>0);for(ne=oe;ne!==0;ne--)for(Kt=Ft.bl_count[ne];Kt!==0;)(It=Ft.heap[--jt])>Vt||(ee[2*It+1]!==ne&&(Ft.opt_len+=(ne-ee[2*It+1])*ee[2*It],ee[2*It+1]=ne),Kt--)}}function _t(Ft,re,jt){var Kt,It,ne=new Array(tt+1),ce=0;for(Kt=1;Kt<=tt;Kt++)ne[Kt]=ce=ce+jt[Kt-1]<<1;for(It=0;It<=re;It++){var pt=Ft[2*It+1];pt!==0&&(Ft[2*It]=nt(ne[pt]++,pt))}}function bt(){var Ft,re,jt,Kt,It,ne=new Array(tt+1);for(jt=0,Kt=0;Kt<q-1;Kt++)for(zt[Kt]=jt,Ft=0;Ft<1<<et[Kt];Ft++)St[jt++]=Kt;for(St[jt-1]=Kt,It=0,Kt=0;Kt<16;Kt++)for(Dt[Kt]=It,Ft=0;Ft<1<<ut[Kt];Ft++)Bt[It++]=Kt;for(It>>=7;Kt<J;Kt++)for(Dt[Kt]=It<<7,Ft=0;Ft<1<<ut[Kt]-7;Ft++)Bt[256+It++]=Kt;for(re=0;re<=tt;re++)ne[re]=0;for(Ft=0;Ft<=143;)yt[2*Ft+1]=8,Ft++,ne[8]++;for(;Ft<=255;)yt[2*Ft+1]=9,Ft++,ne[9]++;for(;Ft<=279;)yt[2*Ft+1]=7,Ft++,ne[7]++;for(;Ft<=287;)yt[2*Ft+1]=8,Ft++,ne[8]++;for(_t(yt,Q+1,ne),Ft=0;Ft<J;Ft++)Nt[2*Ft+1]=5,Nt[2*Ft]=nt(Ft,5);kt=new Tt(yt,et,W+1,Q,tt),Ct=new Tt(Nt,ut,0,J,tt),Ut=new Tt(new Array(0),Et,0,K,ot)}function xt(Ft){var re;for(re=0;re<Q;re++)Ft.dyn_ltree[2*re]=0;for(re=0;re<J;re++)Ft.dyn_dtree[2*re]=0;for(re=0;re<K;re++)Ft.bl_tree[2*re]=0;Ft.dyn_ltree[2*it]=1,Ft.opt_len=Ft.static_len=0,Ft.last_lit=Ft.matches=0}function $t(Ft){Ft.bi_valid>8?Ht(Ft,Ft.bi_buf):Ft.bi_valid>0&&(Ft.pending_buf[Ft.pending++]=Ft.bi_buf),Ft.bi_buf=0,Ft.bi_valid=0}function rt(Ft,re,jt,Kt){$t(Ft),Ht(Ft,jt),Ht(Ft,~jt),w.arraySet(Ft.pending_buf,Ft.window,re,jt,Ft.pending),Ft.pending+=jt}function ft(Ft,re,jt,Kt){var It=2*re,ne=2*jt;return Ft[It]<Ft[ne]||Ft[It]===Ft[ne]&&Kt[re]<=Kt[jt]}function wt(Ft,re,jt){for(var Kt=Ft.heap[jt],It=jt<<1;It<=Ft.heap_len&&(It<Ft.heap_len&&ft(re,Ft.heap[It+1],Ft.heap[It],Ft.depth)&&It++,!ft(re,Kt,Ft.heap[It],Ft.depth));)Ft.heap[jt]=Ft.heap[It],jt=It,It<<=1;Ft.heap[jt]=Kt}function vt(Ft,re,jt){var Kt,It,ne,ce,pt=0;if(Ft.last_lit!==0)do Kt=Ft.pending_buf[Ft.d_buf+2*pt]<<8|Ft.pending_buf[Ft.d_buf+2*pt+1],It=Ft.pending_buf[Ft.l_buf+pt],pt++,Kt===0?Pt(Ft,It,re):(Pt(Ft,(ne=St[It])+W+1,re),(ce=et[ne])!==0&&Wt(Ft,It-=zt[ne],ce),Pt(Ft,ne=Lt(--Kt),jt),(ce=ut[ne])!==0&&Wt(Ft,Kt-=Dt[ne],ce));while(pt<Ft.last_lit);Pt(Ft,it,re)}function Gt(Ft,re){var jt,Kt,It,ne=re.dyn_tree,ce=re.stat_desc.static_tree,pt=re.stat_desc.has_stree,ee=re.stat_desc.elems,Vt=-1;for(Ft.heap_len=0,Ft.heap_max=V,jt=0;jt<ee;jt++)ne[2*jt]!==0?(Ft.heap[++Ft.heap_len]=Vt=jt,Ft.depth[jt]=0):ne[2*jt+1]=0;for(;Ft.heap_len<2;)ne[2*(It=Ft.heap[++Ft.heap_len]=Vt<2?++Vt:0)]=1,Ft.depth[It]=0,Ft.opt_len--,pt&&(Ft.static_len-=ce[2*It+1]);for(re.max_code=Vt,jt=Ft.heap_len>>1;jt>=1;jt--)wt(Ft,ne,jt);It=ee;do jt=Ft.heap[1],Ft.heap[1]=Ft.heap[Ft.heap_len--],wt(Ft,ne,1),Kt=Ft.heap[1],Ft.heap[--Ft.heap_max]=jt,Ft.heap[--Ft.heap_max]=Kt,ne[2*It]=ne[2*jt]+ne[2*Kt],Ft.depth[It]=(Ft.depth[jt]>=Ft.depth[Kt]?Ft.depth[jt]:Ft.depth[Kt])+1,ne[2*jt+1]=ne[2*Kt+1]=It,Ft.heap[1]=It++,wt(Ft,ne,1);while(Ft.heap_len>=2);Ft.heap[--Ft.heap_max]=Ft.heap[1],ct(Ft,re),_t(ne,Vt,Ft.bl_count)}function Qt(Ft,re,jt){var Kt,It,ne=-1,ce=re[1],pt=0,ee=7,Vt=4;for(ce===0&&(ee=138,Vt=3),re[2*(jt+1)+1]=65535,Kt=0;Kt<=jt;Kt++)It=ce,ce=re[2*(Kt+1)+1],++pt<ee&&It===ce||(pt<Vt?Ft.bl_tree[2*It]+=pt:It!==0?(It!==ne&&Ft.bl_tree[2*It]++,Ft.bl_tree[2*lt]++):pt<=10?Ft.bl_tree[2*at]++:Ft.bl_tree[2*ht]++,pt=0,ne=It,ce===0?(ee=138,Vt=3):It===ce?(ee=6,Vt=3):(ee=7,Vt=4))}function ae(Ft,re,jt){var Kt,It,ne=-1,ce=re[1],pt=0,ee=7,Vt=4;for(ce===0&&(ee=138,Vt=3),Kt=0;Kt<=jt;Kt++)if(It=ce,ce=re[2*(Kt+1)+1],!(++pt<ee&&It===ce)){if(pt<Vt)do Pt(Ft,It,Ft.bl_tree);while(--pt!=0);else It!==0?(It!==ne&&(Pt(Ft,It,Ft.bl_tree),pt--),Pt(Ft,lt,Ft.bl_tree),Wt(Ft,pt-3,2)):pt<=10?(Pt(Ft,at,Ft.bl_tree),Wt(Ft,pt-3,3)):(Pt(Ft,ht,Ft.bl_tree),Wt(Ft,pt-11,7));pt=0,ne=It,ce===0?(ee=138,Vt=3):It===ce?(ee=6,Vt=3):(ee=7,Vt=4)}}function se(Ft){var re;for(Qt(Ft,Ft.dyn_ltree,Ft.l_desc.max_code),Qt(Ft,Ft.dyn_dtree,Ft.d_desc.max_code),Gt(Ft,Ft.bl_desc),re=K-1;re>=3&&Ft.bl_tree[2*gt[re]+1]===0;re--);return Ft.opt_len+=3*(re+1)+5+5+4,re}function ie(Ft,re,jt,Kt){var It;for(Wt(Ft,re-257,5),Wt(Ft,jt-1,5),Wt(Ft,Kt-4,4),It=0;It<Kt;It++)Wt(Ft,Ft.bl_tree[2*gt[It]+1],3);ae(Ft,Ft.dyn_ltree,re-1),ae(Ft,Ft.dyn_dtree,jt-1)}function At(Ft){var re,jt=4093624447;for(re=0;re<=31;re++,jt>>>=1)if(1&jt&&Ft.dyn_ltree[2*re]!==0)return P;if(Ft.dyn_ltree[18]!==0||Ft.dyn_ltree[20]!==0||Ft.dyn_ltree[26]!==0)return F;for(re=32;re<W;re++)if(Ft.dyn_ltree[2*re]!==0)return F;return P}D(Dt);var st=!1;function mt(Ft){st||(bt(),st=!0),Ft.l_desc=new Rt(Ft.dyn_ltree,kt),Ft.d_desc=new Rt(Ft.dyn_dtree,Ct),Ft.bl_desc=new Rt(Ft.bl_tree,Ut),Ft.bi_buf=0,Ft.bi_valid=0,xt(Ft)}function Ot(Ft,re,jt,Kt){Wt(Ft,(U<<1)+(Kt?1:0),3),rt(Ft,re,jt)}function qt(Ft){Wt(Ft,j<<1,3),Pt(Ft,it,yt),Mt(Ft)}function Yt(Ft,re,jt,Kt){var It,ne,ce=0;Ft.level>0?(Ft.strm.data_type===$&&(Ft.strm.data_type=At(Ft)),Gt(Ft,Ft.l_desc),Gt(Ft,Ft.d_desc),ce=se(Ft),It=Ft.opt_len+3+7>>>3,(ne=Ft.static_len+3+7>>>3)<=It&&(It=ne)):It=ne=jt+5,jt+4<=It&&re!==-1?Ot(Ft,re,jt,Kt):Ft.strategy===I||ne===It?(Wt(Ft,(j<<1)+(Kt?1:0),3),vt(Ft,yt,Nt)):(Wt(Ft,(Z<<1)+(Kt?1:0),3),ie(Ft,Ft.l_desc.max_code+1,Ft.d_desc.max_code+1,ce+1),vt(Ft,Ft.dyn_ltree,Ft.dyn_dtree)),xt(Ft),Kt&&$t(Ft)}function Jt(Ft,re,jt){return Ft.pending_buf[Ft.d_buf+2*Ft.last_lit]=re>>>8&255,Ft.pending_buf[Ft.d_buf+2*Ft.last_lit+1]=255&re,Ft.pending_buf[Ft.l_buf+Ft.last_lit]=255&jt,Ft.last_lit++,re===0?Ft.dyn_ltree[2*jt]++:(Ft.matches++,re--,Ft.dyn_ltree[2*(St[jt]+W+1)]++,Ft.dyn_dtree[2*Lt(re)]++),Ft.last_lit===Ft.lit_bufsize-1}g._tr_init=mt,g._tr_stored_block=Ot,g._tr_flush_block=Yt,g._tr_tally=Jt,g._tr_align=qt},{"../utils/common":52}],62:[function(d,m,g){function w(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}m.exports=w},{}],63:[function(d,m,g){var w,I,P=m.exports={};function F(){throw new Error("setTimeout has not been defined")}function $(){throw new Error("clearTimeout has not been defined")}function D(K){if(w===setTimeout)return setTimeout(K,0);if((w===F||!w)&&setTimeout)return w=setTimeout,setTimeout(K,0);try{return w(K,0)}catch{try{return w.call(null,K,0)}catch{return w.call(this,K,0)}}}function U(K){if(I===clearTimeout)return clearTimeout(K);if((I===$||!I)&&clearTimeout)return I=clearTimeout,clearTimeout(K);try{return I(K)}catch{try{return I.call(null,K)}catch{return I.call(this,K)}}}(function(){try{w=typeof setTimeout=="function"?setTimeout:F}catch{w=F}try{I=typeof clearTimeout=="function"?clearTimeout:$}catch{I=$}})();var j,Z=[],G=!1,H=-1;function q(){G&&j&&(G=!1,j.length?Z=j.concat(Z):H=-1,Z.length&&W())}function W(){if(!G){var K=D(q);G=!0;for(var V=Z.length;V;){for(j=Z,Z=[];++H<V;)j&&j[H].run();H=-1,V=Z.length}j=null,G=!1,U(K)}}function Q(K,V){this.fun=K,this.array=V}function J(){}P.nextTick=function(K){var V=new Array(arguments.length-1);if(arguments.length>1)for(var tt=1;tt<arguments.length;tt++)V[tt-1]=arguments[tt];Z.push(new Q(K,V)),Z.length!==1||G||D(W)},Q.prototype.run=function(){this.fun.apply(null,this.array)},P.title="browser",P.browser=!0,P.env={},P.argv=[],P.version="",P.versions={},P.on=J,P.addListener=J,P.once=J,P.off=J,P.removeListener=J,P.removeAllListeners=J,P.emit=J,P.prependListener=J,P.prependOnceListener=J,P.listeners=function(K){return[]},P.binding=function(K){throw new Error("process.binding is not supported")},P.cwd=function(){return"/"},P.chdir=function(K){throw new Error("process.chdir is not supported")},P.umask=function(){return 0}},{}],64:[function(d,m,g){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var w=d("buffer"),I=w.Buffer;function P($,D){for(var U in $)D[U]=$[U]}function F($,D,U){return I($,D,U)}I.from&&I.alloc&&I.allocUnsafe&&I.allocUnsafeSlow?m.exports=w:(P(w,g),g.Buffer=F),F.prototype=Object.create(I.prototype),P(I,F),F.from=function($,D,U){if(typeof $=="number")throw new TypeError("Argument must not be a number");return I($,D,U)},F.alloc=function($,D,U){if(typeof $!="number")throw new TypeError("Argument must be a number");var j=I($);return D!==void 0?typeof U=="string"?j.fill(D,U):j.fill(D):j.fill(0),j},F.allocUnsafe=function($){if(typeof $!="number")throw new TypeError("Argument must be a number");return I($)},F.allocUnsafeSlow=function($){if(typeof $!="number")throw new TypeError("Argument must be a number");return w.SlowBuffer($)}},{buffer:32}],65:[function(d,m,g){m.exports=I;var w=d("events").EventEmitter;function I(){w.call(this)}d("inherits")(I,w),I.Readable=d("readable-stream/lib/_stream_readable.js"),I.Writable=d("readable-stream/lib/_stream_writable.js"),I.Duplex=d("readable-stream/lib/_stream_duplex.js"),I.Transform=d("readable-stream/lib/_stream_transform.js"),I.PassThrough=d("readable-stream/lib/_stream_passthrough.js"),I.finished=d("readable-stream/lib/internal/streams/end-of-stream.js"),I.pipeline=d("readable-stream/lib/internal/streams/pipeline.js"),I.Stream=I,I.prototype.pipe=function(P,F){var $=this;function D(W){P.writable&&P.write(W)===!1&&$.pause&&$.pause()}function U(){$.readable&&$.resume&&$.resume()}$.on("data",D),P.on("drain",U),P._isStdio||F&&F.end===!1||($.on("end",Z),$.on("close",G));var j=!1;function Z(){j||(j=!0,P.end())}function G(){j||(j=!0,typeof P.destroy=="function"&&P.destroy())}function H(W){if(q(),w.listenerCount(this,"error")===0)throw W}function q(){$.removeListener("data",D),P.removeListener("drain",U),$.removeListener("end",Z),$.removeListener("close",G),$.removeListener("error",H),P.removeListener("error",H),$.removeListener("end",q),$.removeListener("close",q),P.removeListener("close",q)}return $.on("error",H),P.on("error",H),$.on("end",q),$.on("close",q),P.on("close",q),P.emit("pipe",$),P}},{events:35,inherits:46,"readable-stream/lib/_stream_duplex.js":67,"readable-stream/lib/_stream_passthrough.js":68,"readable-stream/lib/_stream_readable.js":69,"readable-stream/lib/_stream_transform.js":70,"readable-stream/lib/_stream_writable.js":71,"readable-stream/lib/internal/streams/end-of-stream.js":75,"readable-stream/lib/internal/streams/pipeline.js":77}],66:[function(d,m,g){function w(j,Z){j.prototype=Object.create(Z.prototype),j.prototype.constructor=j,j.__proto__=Z}var I={};function P(j,Z,G){function H(W,Q,J){return typeof Z=="string"?Z:Z(W,Q,J)}G||(G=Error);var q=function(W){function Q(J,K,V){return W.call(this,H(J,K,V))||this}return w(Q,W),Q}(G);q.prototype.name=G.name,q.prototype.code=j,I[j]=q}function F(j,Z){if(Array.isArray(j)){var G=j.length;return j=j.map(function(H){return String(H)}),G>2?"one of ".concat(Z," ").concat(j.slice(0,G-1).join(", "),", or ")+j[G-1]:G===2?"one of ".concat(Z," ").concat(j[0]," or ").concat(j[1]):"of ".concat(Z," ").concat(j[0])}return"of ".concat(Z," ").concat(String(j))}function $(j,Z,G){return j.substr(0,Z.length)===Z}function D(j,Z,G){return(G===void 0||G>j.length)&&(G=j.length),j.substring(G-Z.length,G)===Z}function U(j,Z,G){return typeof G!="number"&&(G=0),!(G+Z.length>j.length)&&j.indexOf(Z,G)!==-1}P("ERR_INVALID_OPT_VALUE",function(j,Z){return'The value "'+Z+'" is invalid for option "'+j+'"'},TypeError),P("ERR_INVALID_ARG_TYPE",function(j,Z,G){var H,q;if(typeof Z=="string"&&$(Z,"not ")?(H="must not be",Z=Z.replace(/^not /,"")):H="must be",D(j," argument"))q="The ".concat(j," ").concat(H," ").concat(F(Z,"type"));else{var W=U(j,".")?"property":"argument";q='The "'.concat(j,'" ').concat(W," ").concat(H," ").concat(F(Z,"type"))}return q+=". Received type ".concat(typeof G)},TypeError),P("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),P("ERR_METHOD_NOT_IMPLEMENTED",function(j){return"The "+j+" method is not implemented"}),P("ERR_STREAM_PREMATURE_CLOSE","Premature close"),P("ERR_STREAM_DESTROYED",function(j){return"Cannot call "+j+" after a stream was destroyed"}),P("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),P("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),P("ERR_STREAM_WRITE_AFTER_END","write after end"),P("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),P("ERR_UNKNOWN_ENCODING",function(j){return"Unknown encoding: "+j},TypeError),P("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),m.exports.codes=I},{}],67:[function(d,m,g){(function(w){(function(){var I=Object.keys||function(H){var q=[];for(var W in H)q.push(W);return q};m.exports=j;var P=d("./_stream_readable"),F=d("./_stream_writable");d("inherits")(j,P);for(var $=I(F.prototype),D=0;D<$.length;D++){var U=$[D];j.prototype[U]||(j.prototype[U]=F.prototype[U])}function j(H){if(!(this instanceof j))return new j(H);P.call(this,H),F.call(this,H),this.allowHalfOpen=!0,H&&(H.readable===!1&&(this.readable=!1),H.writable===!1&&(this.writable=!1),H.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Z)))}function Z(){this._writableState.ended||w.nextTick(G,this)}function G(H){H.end()}Object.defineProperty(j.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(j.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(j.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(H){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=H,this._writableState.destroyed=H)}})}).call(this)}).call(this,d("_process"))},{"./_stream_readable":69,"./_stream_writable":71,_process:63,inherits:46}],68:[function(d,m,g){m.exports=I;var w=d("./_stream_transform");function I(P){if(!(this instanceof I))return new I(P);w.call(this,P)}d("inherits")(I,w),I.prototype._transform=function(P,F,$){$(null,P)}},{"./_stream_transform":70,inherits:46}],69:[function(d,m,g){(function(w,I){(function(){var P;m.exports=Et,Et.ReadableState=ut,d("events").EventEmitter;var F=function(bt,xt){return bt.listeners(xt).length},$=d("./internal/streams/stream"),D=d("buffer").Buffer,U=I.Uint8Array||function(){};function j(bt){return D.from(bt)}function Z(bt){return D.isBuffer(bt)||bt instanceof U}var G,H=d("util");G=H&&H.debuglog?H.debuglog("stream"):function(){};var q,W,Q,J=d("./internal/streams/buffer_list"),K=d("./internal/streams/destroy"),V=d("./internal/streams/state").getHighWaterMark,tt=d("../errors").codes,X=tt.ERR_INVALID_ARG_TYPE,ot=tt.ERR_STREAM_PUSH_AFTER_EOF,it=tt.ERR_METHOD_NOT_IMPLEMENTED,lt=tt.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;d("inherits")(Et,$);var at=K.errorOrDestroy,ht=["error","close","destroy","pause","resume"];function et(bt,xt,$t){if(typeof bt.prependListener=="function")return bt.prependListener(xt,$t);bt._events&&bt._events[xt]?Array.isArray(bt._events[xt])?bt._events[xt].unshift($t):bt._events[xt]=[$t,bt._events[xt]]:bt.on(xt,$t)}function ut(bt,xt,$t){P=P||d("./_stream_duplex"),bt=bt||{},typeof $t!="boolean"&&($t=xt instanceof P),this.objectMode=!!bt.objectMode,$t&&(this.objectMode=this.objectMode||!!bt.readableObjectMode),this.highWaterMark=V(this,bt,"readableHighWaterMark",$t),this.buffer=new J,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=bt.emitClose!==!1,this.autoDestroy=!!bt.autoDestroy,this.destroyed=!1,this.defaultEncoding=bt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,bt.encoding&&(q||(q=d("string_decoder/").StringDecoder),this.decoder=new q(bt.encoding),this.encoding=bt.encoding)}function Et(bt){if(P=P||d("./_stream_duplex"),!(this instanceof Et))return new Et(bt);var xt=this instanceof P;this._readableState=new ut(bt,this,xt),this.readable=!0,bt&&(typeof bt.read=="function"&&(this._read=bt.read),typeof bt.destroy=="function"&&(this._destroy=bt.destroy)),$.call(this)}function gt(bt,xt,$t,rt,ft){G("readableAddChunk",xt);var wt,vt=bt._readableState;if(xt===null)vt.reading=!1,zt(bt,vt);else if(ft||(wt=yt(vt,xt)),wt)at(bt,wt);else if(vt.objectMode||xt&&xt.length>0)if(typeof xt=="string"||vt.objectMode||Object.getPrototypeOf(xt)===D.prototype||(xt=j(xt)),rt)vt.endEmitted?at(bt,new lt):dt(bt,vt,xt,!0);else if(vt.ended)at(bt,new ot);else{if(vt.destroyed)return!1;vt.reading=!1,vt.decoder&&!$t?(xt=vt.decoder.write(xt),vt.objectMode||xt.length!==0?dt(bt,vt,xt,!1):Ut(bt,vt)):dt(bt,vt,xt,!1)}else rt||(vt.reading=!1,Ut(bt,vt));return!vt.ended&&(vt.length<vt.highWaterMark||vt.length===0)}function dt(bt,xt,$t,rt){xt.flowing&&xt.length===0&&!xt.sync?(xt.awaitDrain=0,bt.emit("data",$t)):(xt.length+=xt.objectMode?1:$t.length,rt?xt.buffer.unshift($t):xt.buffer.push($t),xt.needReadable&&kt(bt)),Ut(bt,xt)}function yt(bt,xt){var $t;return Z(xt)||typeof xt=="string"||xt===void 0||bt.objectMode||($t=new X("chunk",["string","Buffer","Uint8Array"],xt)),$t}Object.defineProperty(Et.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(bt){this._readableState&&(this._readableState.destroyed=bt)}}),Et.prototype.destroy=K.destroy,Et.prototype._undestroy=K.undestroy,Et.prototype._destroy=function(bt,xt){xt(bt)},Et.prototype.push=function(bt,xt){var $t,rt=this._readableState;return rt.objectMode?$t=!0:typeof bt=="string"&&((xt=xt||rt.defaultEncoding)!==rt.encoding&&(bt=D.from(bt,xt),xt=""),$t=!0),gt(this,bt,xt,!1,$t)},Et.prototype.unshift=function(bt){return gt(this,bt,null,!0,!1)},Et.prototype.isPaused=function(){return this._readableState.flowing===!1},Et.prototype.setEncoding=function(bt){q||(q=d("string_decoder/").StringDecoder);var xt=new q(bt);this._readableState.decoder=xt,this._readableState.encoding=this._readableState.decoder.encoding;for(var $t=this._readableState.buffer.head,rt="";$t!==null;)rt+=xt.write($t.data),$t=$t.next;return this._readableState.buffer.clear(),rt!==""&&this._readableState.buffer.push(rt),this._readableState.length=rt.length,this};var Nt=1073741824;function Bt(bt){return bt>=Nt?bt=Nt:(bt--,bt|=bt>>>1,bt|=bt>>>2,bt|=bt>>>4,bt|=bt>>>8,bt|=bt>>>16,bt++),bt}function St(bt,xt){return bt<=0||xt.length===0&&xt.ended?0:xt.objectMode?1:bt!=bt?xt.flowing&&xt.length?xt.buffer.head.data.length:xt.length:(bt>xt.highWaterMark&&(xt.highWaterMark=Bt(bt)),bt<=xt.length?bt:xt.ended?xt.length:(xt.needReadable=!0,0))}function zt(bt,xt){if(G("onEofChunk"),!xt.ended){if(xt.decoder){var $t=xt.decoder.end();$t&&$t.length&&(xt.buffer.push($t),xt.length+=xt.objectMode?1:$t.length)}xt.ended=!0,xt.sync?kt(bt):(xt.needReadable=!1,xt.emittedReadable||(xt.emittedReadable=!0,Ct(bt)))}}function kt(bt){var xt=bt._readableState;G("emitReadable",xt.needReadable,xt.emittedReadable),xt.needReadable=!1,xt.emittedReadable||(G("emitReadable",xt.flowing),xt.emittedReadable=!0,w.nextTick(Ct,bt))}function Ct(bt){var xt=bt._readableState;G("emitReadable_",xt.destroyed,xt.length,xt.ended),xt.destroyed||!xt.length&&!xt.ended||(bt.emit("readable"),xt.emittedReadable=!1),xt.needReadable=!xt.flowing&&!xt.ended&&xt.length<=xt.highWaterMark,Pt(bt)}function Ut(bt,xt){xt.readingMore||(xt.readingMore=!0,w.nextTick(Dt,bt,xt))}function Dt(bt,xt){for(;!xt.reading&&!xt.ended&&(xt.length<xt.highWaterMark||xt.flowing&&xt.length===0);){var $t=xt.length;if(G("maybeReadMore read 0"),bt.read(0),$t===xt.length)break}xt.readingMore=!1}function Tt(bt){return function(){var xt=bt._readableState;G("pipeOnDrain",xt.awaitDrain),xt.awaitDrain&&xt.awaitDrain--,xt.awaitDrain===0&&F(bt,"data")&&(xt.flowing=!0,Pt(bt))}}function Rt(bt){var xt=bt._readableState;xt.readableListening=bt.listenerCount("readable")>0,xt.resumeScheduled&&!xt.paused?xt.flowing=!0:bt.listenerCount("data")>0&&bt.resume()}function Lt(bt){G("readable nexttick read 0"),bt.read(0)}function Ht(bt,xt){xt.resumeScheduled||(xt.resumeScheduled=!0,w.nextTick(Wt,bt,xt))}function Wt(bt,xt){G("resume",xt.reading),xt.reading||bt.read(0),xt.resumeScheduled=!1,bt.emit("resume"),Pt(bt),xt.flowing&&!xt.reading&&bt.read(0)}function Pt(bt){var xt=bt._readableState;for(G("flow",xt.flowing);xt.flowing&&bt.read()!==null;);}function nt(bt,xt){return xt.length===0?null:(xt.objectMode?$t=xt.buffer.shift():!bt||bt>=xt.length?($t=xt.decoder?xt.buffer.join(""):xt.buffer.length===1?xt.buffer.first():xt.buffer.concat(xt.length),xt.buffer.clear()):$t=xt.buffer.consume(bt,xt.decoder),$t);var $t}function Mt(bt){var xt=bt._readableState;G("endReadable",xt.endEmitted),xt.endEmitted||(xt.ended=!0,w.nextTick(ct,xt,bt))}function ct(bt,xt){if(G("endReadableNT",bt.endEmitted,bt.length),!bt.endEmitted&&bt.length===0&&(bt.endEmitted=!0,xt.readable=!1,xt.emit("end"),bt.autoDestroy)){var $t=xt._writableState;(!$t||$t.autoDestroy&&$t.finished)&&xt.destroy()}}function _t(bt,xt){for(var $t=0,rt=bt.length;$t<rt;$t++)if(bt[$t]===xt)return $t;return-1}Et.prototype.read=function(bt){G("read",bt),bt=parseInt(bt,10);var xt=this._readableState,$t=bt;if(bt!==0&&(xt.emittedReadable=!1),bt===0&&xt.needReadable&&((xt.highWaterMark!==0?xt.length>=xt.highWaterMark:xt.length>0)||xt.ended))return G("read: emitReadable",xt.length,xt.ended),xt.length===0&&xt.ended?Mt(this):kt(this),null;if((bt=St(bt,xt))===0&&xt.ended)return xt.length===0&&Mt(this),null;var rt,ft=xt.needReadable;return G("need readable",ft),(xt.length===0||xt.length-bt<xt.highWaterMark)&&G("length less than watermark",ft=!0),xt.ended||xt.reading?G("reading or ended",ft=!1):ft&&(G("do read"),xt.reading=!0,xt.sync=!0,xt.length===0&&(xt.needReadable=!0),this._read(xt.highWaterMark),xt.sync=!1,xt.reading||(bt=St($t,xt))),(rt=bt>0?nt(bt,xt):null)===null?(xt.needReadable=xt.length<=xt.highWaterMark,bt=0):(xt.length-=bt,xt.awaitDrain=0),xt.length===0&&(xt.ended||(xt.needReadable=!0),$t!==bt&&xt.ended&&Mt(this)),rt!==null&&this.emit("data",rt),rt},Et.prototype._read=function(bt){at(this,new it("_read()"))},Et.prototype.pipe=function(bt,xt){var $t=this,rt=this._readableState;switch(rt.pipesCount){case 0:rt.pipes=bt;break;case 1:rt.pipes=[rt.pipes,bt];break;default:rt.pipes.push(bt)}rt.pipesCount+=1,G("pipe count=%d opts=%j",rt.pipesCount,xt);var ft=xt&&xt.end===!1||bt===w.stdout||bt===w.stderr?mt:vt;function wt(Ot,qt){G("onunpipe"),Ot===$t&&qt&&qt.hasUnpiped===!1&&(qt.hasUnpiped=!0,ae())}function vt(){G("onend"),bt.end()}rt.endEmitted?w.nextTick(ft):$t.once("end",ft),bt.on("unpipe",wt);var Gt=Tt($t);bt.on("drain",Gt);var Qt=!1;function ae(){G("cleanup"),bt.removeListener("close",At),bt.removeListener("finish",st),bt.removeListener("drain",Gt),bt.removeListener("error",ie),bt.removeListener("unpipe",wt),$t.removeListener("end",vt),$t.removeListener("end",mt),$t.removeListener("data",se),Qt=!0,!rt.awaitDrain||bt._writableState&&!bt._writableState.needDrain||Gt()}function se(Ot){G("ondata");var qt=bt.write(Ot);G("dest.write",qt),qt===!1&&((rt.pipesCount===1&&rt.pipes===bt||rt.pipesCount>1&&_t(rt.pipes,bt)!==-1)&&!Qt&&(G("false write response, pause",rt.awaitDrain),rt.awaitDrain++),$t.pause())}function ie(Ot){G("onerror",Ot),mt(),bt.removeListener("error",ie),F(bt,"error")===0&&at(bt,Ot)}function At(){bt.removeListener("finish",st),mt()}function st(){G("onfinish"),bt.removeListener("close",At),mt()}function mt(){G("unpipe"),$t.unpipe(bt)}return $t.on("data",se),et(bt,"error",ie),bt.once("close",At),bt.once("finish",st),bt.emit("pipe",$t),rt.flowing||(G("pipe resume"),$t.resume()),bt},Et.prototype.unpipe=function(bt){var xt=this._readableState,$t={hasUnpiped:!1};if(xt.pipesCount===0)return this;if(xt.pipesCount===1)return bt&&bt!==xt.pipes||(bt||(bt=xt.pipes),xt.pipes=null,xt.pipesCount=0,xt.flowing=!1,bt&&bt.emit("unpipe",this,$t)),this;if(!bt){var rt=xt.pipes,ft=xt.pipesCount;xt.pipes=null,xt.pipesCount=0,xt.flowing=!1;for(var wt=0;wt<ft;wt++)rt[wt].emit("unpipe",this,{hasUnpiped:!1});return this}var vt=_t(xt.pipes,bt);return vt===-1||(xt.pipes.splice(vt,1),xt.pipesCount-=1,xt.pipesCount===1&&(xt.pipes=xt.pipes[0]),bt.emit("unpipe",this,$t)),this},Et.prototype.on=function(bt,xt){var $t=$.prototype.on.call(this,bt,xt),rt=this._readableState;return bt==="data"?(rt.readableListening=this.listenerCount("readable")>0,rt.flowing!==!1&&this.resume()):bt==="readable"&&(rt.endEmitted||rt.readableListening||(rt.readableListening=rt.needReadable=!0,rt.flowing=!1,rt.emittedReadable=!1,G("on readable",rt.length,rt.reading),rt.length?kt(this):rt.reading||w.nextTick(Lt,this))),$t},Et.prototype.addListener=Et.prototype.on,Et.prototype.removeListener=function(bt,xt){var $t=$.prototype.removeListener.call(this,bt,xt);return bt==="readable"&&w.nextTick(Rt,this),$t},Et.prototype.removeAllListeners=function(bt){var xt=$.prototype.removeAllListeners.apply(this,arguments);return bt!=="readable"&&bt!==void 0||w.nextTick(Rt,this),xt},Et.prototype.resume=function(){var bt=this._readableState;return bt.flowing||(G("resume"),bt.flowing=!bt.readableListening,Ht(this,bt)),bt.paused=!1,this},Et.prototype.pause=function(){return G("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(G("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Et.prototype.wrap=function(bt){var xt=this,$t=this._readableState,rt=!1;for(var ft in bt.on("end",function(){if(G("wrapped end"),$t.decoder&&!$t.ended){var vt=$t.decoder.end();vt&&vt.length&&xt.push(vt)}xt.push(null)}),bt.on("data",function(vt){G("wrapped data"),$t.decoder&&(vt=$t.decoder.write(vt)),$t.objectMode&&vt==null||($t.objectMode||vt&&vt.length)&&(xt.push(vt)||(rt=!0,bt.pause()))}),bt)this[ft]===void 0&&typeof bt[ft]=="function"&&(this[ft]=function(vt){return function(){return bt[vt].apply(bt,arguments)}}(ft));for(var wt=0;wt<ht.length;wt++)bt.on(ht[wt],this.emit.bind(this,ht[wt]));return this._read=function(vt){G("wrapped _read",vt),rt&&(rt=!1,bt.resume())},this},typeof Symbol=="function"&&(Et.prototype[Symbol.asyncIterator]=function(){return W===void 0&&(W=d("./internal/streams/async_iterator")),W(this)}),Object.defineProperty(Et.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Et.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Et.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(bt){this._readableState&&(this._readableState.flowing=bt)}}),Et._fromList=nt,Object.defineProperty(Et.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(Et.from=function(bt,xt){return Q===void 0&&(Q=d("./internal/streams/from")),Q(Et,bt,xt)})}).call(this)}).call(this,d("_process"),commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":66,"./_stream_duplex":67,"./internal/streams/async_iterator":72,"./internal/streams/buffer_list":73,"./internal/streams/destroy":74,"./internal/streams/from":76,"./internal/streams/state":78,"./internal/streams/stream":79,_process:63,buffer:32,events:35,inherits:46,"string_decoder/":80,util:29}],70:[function(d,m,g){m.exports=j;var w=d("../errors").codes,I=w.ERR_METHOD_NOT_IMPLEMENTED,P=w.ERR_MULTIPLE_CALLBACK,F=w.ERR_TRANSFORM_ALREADY_TRANSFORMING,$=w.ERR_TRANSFORM_WITH_LENGTH_0,D=d("./_stream_duplex");function U(H,q){var W=this._transformState;W.transforming=!1;var Q=W.writecb;if(Q===null)return this.emit("error",new P);W.writechunk=null,W.writecb=null,q!=null&&this.push(q),Q(H);var J=this._readableState;J.reading=!1,(J.needReadable||J.length<J.highWaterMark)&&this._read(J.highWaterMark)}function j(H){if(!(this instanceof j))return new j(H);D.call(this,H),this._transformState={afterTransform:U.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,H&&(typeof H.transform=="function"&&(this._transform=H.transform),typeof H.flush=="function"&&(this._flush=H.flush)),this.on("prefinish",Z)}function Z(){var H=this;typeof this._flush!="function"||this._readableState.destroyed?G(this,null,null):this._flush(function(q,W){G(H,q,W)})}function G(H,q,W){if(q)return H.emit("error",q);if(W!=null&&H.push(W),H._writableState.length)throw new $;if(H._transformState.transforming)throw new F;return H.push(null)}d("inherits")(j,D),j.prototype.push=function(H,q){return this._transformState.needTransform=!1,D.prototype.push.call(this,H,q)},j.prototype._transform=function(H,q,W){W(new I("_transform()"))},j.prototype._write=function(H,q,W){var Q=this._transformState;if(Q.writecb=W,Q.writechunk=H,Q.writeencoding=q,!Q.transforming){var J=this._readableState;(Q.needTransform||J.needReadable||J.length<J.highWaterMark)&&this._read(J.highWaterMark)}},j.prototype._read=function(H){var q=this._transformState;q.writechunk===null||q.transforming?q.needTransform=!0:(q.transforming=!0,this._transform(q.writechunk,q.writeencoding,q.afterTransform))},j.prototype._destroy=function(H,q){D.prototype._destroy.call(this,H,function(W){q(W)})}},{"../errors":66,"./_stream_duplex":67,inherits:46}],71:[function(d,m,g){(function(w,I){(function(){function P(Pt){var nt=this;this.next=null,this.entry=null,this.finish=function(){Wt(nt,Pt)}}var F;m.exports=ut,ut.WritableState=et;var $={deprecate:d("util-deprecate")},D=d("./internal/streams/stream"),U=d("buffer").Buffer,j=I.Uint8Array||function(){};function Z(Pt){return U.from(Pt)}function G(Pt){return U.isBuffer(Pt)||Pt instanceof j}var H,q=d("./internal/streams/destroy"),W=d("./internal/streams/state").getHighWaterMark,Q=d("../errors").codes,J=Q.ERR_INVALID_ARG_TYPE,K=Q.ERR_METHOD_NOT_IMPLEMENTED,V=Q.ERR_MULTIPLE_CALLBACK,tt=Q.ERR_STREAM_CANNOT_PIPE,X=Q.ERR_STREAM_DESTROYED,ot=Q.ERR_STREAM_NULL_VALUES,it=Q.ERR_STREAM_WRITE_AFTER_END,lt=Q.ERR_UNKNOWN_ENCODING,at=q.errorOrDestroy;function ht(){}function et(Pt,nt,Mt){F=F||d("./_stream_duplex"),Pt=Pt||{},typeof Mt!="boolean"&&(Mt=nt instanceof F),this.objectMode=!!Pt.objectMode,Mt&&(this.objectMode=this.objectMode||!!Pt.writableObjectMode),this.highWaterMark=W(this,Pt,"writableHighWaterMark",Mt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ct=Pt.decodeStrings===!1;this.decodeStrings=!ct,this.defaultEncoding=Pt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(_t){zt(nt,_t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Pt.emitClose!==!1,this.autoDestroy=!!Pt.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new P(this)}function ut(Pt){var nt=this instanceof(F=F||d("./_stream_duplex"));if(!nt&&!H.call(ut,this))return new ut(Pt);this._writableState=new et(Pt,this,nt),this.writable=!0,Pt&&(typeof Pt.write=="function"&&(this._write=Pt.write),typeof Pt.writev=="function"&&(this._writev=Pt.writev),typeof Pt.destroy=="function"&&(this._destroy=Pt.destroy),typeof Pt.final=="function"&&(this._final=Pt.final)),D.call(this)}function Et(Pt,nt){var Mt=new it;at(Pt,Mt),w.nextTick(nt,Mt)}function gt(Pt,nt,Mt,ct){var _t;return Mt===null?_t=new ot:typeof Mt=="string"||nt.objectMode||(_t=new J("chunk",["string","Buffer"],Mt)),!_t||(at(Pt,_t),w.nextTick(ct,_t),!1)}function dt(Pt,nt,Mt){return Pt.objectMode||Pt.decodeStrings===!1||typeof nt!="string"||(nt=U.from(nt,Mt)),nt}function yt(Pt,nt,Mt,ct,_t,bt){if(!Mt){var xt=dt(nt,ct,_t);ct!==xt&&(Mt=!0,_t="buffer",ct=xt)}var $t=nt.objectMode?1:ct.length;nt.length+=$t;var rt=nt.length<nt.highWaterMark;if(rt||(nt.needDrain=!0),nt.writing||nt.corked){var ft=nt.lastBufferedRequest;nt.lastBufferedRequest={chunk:ct,encoding:_t,isBuf:Mt,callback:bt,next:null},ft?ft.next=nt.lastBufferedRequest:nt.bufferedRequest=nt.lastBufferedRequest,nt.bufferedRequestCount+=1}else Nt(Pt,nt,!1,$t,ct,_t,bt);return rt}function Nt(Pt,nt,Mt,ct,_t,bt,xt){nt.writelen=ct,nt.writecb=xt,nt.writing=!0,nt.sync=!0,nt.destroyed?nt.onwrite(new X("write")):Mt?Pt._writev(_t,nt.onwrite):Pt._write(_t,bt,nt.onwrite),nt.sync=!1}function Bt(Pt,nt,Mt,ct,_t){--nt.pendingcb,Mt?(w.nextTick(_t,ct),w.nextTick(Lt,Pt,nt),Pt._writableState.errorEmitted=!0,at(Pt,ct)):(_t(ct),Pt._writableState.errorEmitted=!0,at(Pt,ct),Lt(Pt,nt))}function St(Pt){Pt.writing=!1,Pt.writecb=null,Pt.length-=Pt.writelen,Pt.writelen=0}function zt(Pt,nt){var Mt=Pt._writableState,ct=Mt.sync,_t=Mt.writecb;if(typeof _t!="function")throw new V;if(St(Mt),nt)Bt(Pt,Mt,ct,nt,_t);else{var bt=Dt(Mt)||Pt.destroyed;bt||Mt.corked||Mt.bufferProcessing||!Mt.bufferedRequest||Ut(Pt,Mt),ct?w.nextTick(kt,Pt,Mt,bt,_t):kt(Pt,Mt,bt,_t)}}function kt(Pt,nt,Mt,ct){Mt||Ct(Pt,nt),nt.pendingcb--,ct(),Lt(Pt,nt)}function Ct(Pt,nt){nt.length===0&&nt.needDrain&&(nt.needDrain=!1,Pt.emit("drain"))}function Ut(Pt,nt){nt.bufferProcessing=!0;var Mt=nt.bufferedRequest;if(Pt._writev&&Mt&&Mt.next){var ct=nt.bufferedRequestCount,_t=new Array(ct),bt=nt.corkedRequestsFree;bt.entry=Mt;for(var xt=0,$t=!0;Mt;)_t[xt]=Mt,Mt.isBuf||($t=!1),Mt=Mt.next,xt+=1;_t.allBuffers=$t,Nt(Pt,nt,!0,nt.length,_t,"",bt.finish),nt.pendingcb++,nt.lastBufferedRequest=null,bt.next?(nt.corkedRequestsFree=bt.next,bt.next=null):nt.corkedRequestsFree=new P(nt),nt.bufferedRequestCount=0}else{for(;Mt;){var rt=Mt.chunk,ft=Mt.encoding,wt=Mt.callback;if(Nt(Pt,nt,!1,nt.objectMode?1:rt.length,rt,ft,wt),Mt=Mt.next,nt.bufferedRequestCount--,nt.writing)break}Mt===null&&(nt.lastBufferedRequest=null)}nt.bufferedRequest=Mt,nt.bufferProcessing=!1}function Dt(Pt){return Pt.ending&&Pt.length===0&&Pt.bufferedRequest===null&&!Pt.finished&&!Pt.writing}function Tt(Pt,nt){Pt._final(function(Mt){nt.pendingcb--,Mt&&at(Pt,Mt),nt.prefinished=!0,Pt.emit("prefinish"),Lt(Pt,nt)})}function Rt(Pt,nt){nt.prefinished||nt.finalCalled||(typeof Pt._final!="function"||nt.destroyed?(nt.prefinished=!0,Pt.emit("prefinish")):(nt.pendingcb++,nt.finalCalled=!0,w.nextTick(Tt,Pt,nt)))}function Lt(Pt,nt){var Mt=Dt(nt);if(Mt&&(Rt(Pt,nt),nt.pendingcb===0&&(nt.finished=!0,Pt.emit("finish"),nt.autoDestroy))){var ct=Pt._readableState;(!ct||ct.autoDestroy&&ct.endEmitted)&&Pt.destroy()}return Mt}function Ht(Pt,nt,Mt){nt.ending=!0,Lt(Pt,nt),Mt&&(nt.finished?w.nextTick(Mt):Pt.once("finish",Mt)),nt.ended=!0,Pt.writable=!1}function Wt(Pt,nt,Mt){var ct=Pt.entry;for(Pt.entry=null;ct;){var _t=ct.callback;nt.pendingcb--,_t(Mt),ct=ct.next}nt.corkedRequestsFree.next=Pt}d("inherits")(ut,D),et.prototype.getBuffer=function(){for(var Pt=this.bufferedRequest,nt=[];Pt;)nt.push(Pt),Pt=Pt.next;return nt},function(){try{Object.defineProperty(et.prototype,"buffer",{get:$.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(H=Function.prototype[Symbol.hasInstance],Object.defineProperty(ut,Symbol.hasInstance,{value:function(Pt){return!!H.call(this,Pt)||this===ut&&Pt&&Pt._writableState instanceof et}})):H=function(Pt){return Pt instanceof this},ut.prototype.pipe=function(){at(this,new tt)},ut.prototype.write=function(Pt,nt,Mt){var ct=this._writableState,_t=!1,bt=!ct.objectMode&&G(Pt);return bt&&!U.isBuffer(Pt)&&(Pt=Z(Pt)),typeof nt=="function"&&(Mt=nt,nt=null),bt?nt="buffer":nt||(nt=ct.defaultEncoding),typeof Mt!="function"&&(Mt=ht),ct.ending?Et(this,Mt):(bt||gt(this,ct,Pt,Mt))&&(ct.pendingcb++,_t=yt(this,ct,bt,Pt,nt,Mt)),_t},ut.prototype.cork=function(){this._writableState.corked++},ut.prototype.uncork=function(){var Pt=this._writableState;Pt.corked&&(Pt.corked--,Pt.writing||Pt.corked||Pt.bufferProcessing||!Pt.bufferedRequest||Ut(this,Pt))},ut.prototype.setDefaultEncoding=function(Pt){if(typeof Pt=="string"&&(Pt=Pt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Pt+"").toLowerCase())>-1))throw new lt(Pt);return this._writableState.defaultEncoding=Pt,this},Object.defineProperty(ut.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ut.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ut.prototype._write=function(Pt,nt,Mt){Mt(new K("_write()"))},ut.prototype._writev=null,ut.prototype.end=function(Pt,nt,Mt){var ct=this._writableState;return typeof Pt=="function"?(Mt=Pt,Pt=null,nt=null):typeof nt=="function"&&(Mt=nt,nt=null),Pt!=null&&this.write(Pt,nt),ct.corked&&(ct.corked=1,this.uncork()),ct.ending||Ht(this,ct,Mt),this},Object.defineProperty(ut.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ut.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Pt){this._writableState&&(this._writableState.destroyed=Pt)}}),ut.prototype.destroy=q.destroy,ut.prototype._undestroy=q.undestroy,ut.prototype._destroy=function(Pt,nt){nt(Pt)}}).call(this)}).call(this,d("_process"),commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":66,"./_stream_duplex":67,"./internal/streams/destroy":74,"./internal/streams/state":78,"./internal/streams/stream":79,_process:63,buffer:32,inherits:46,"util-deprecate":81}],72:[function(d,m,g){(function(w){(function(){var I;function P(X,ot,it){return ot in X?Object.defineProperty(X,ot,{value:it,enumerable:!0,configurable:!0,writable:!0}):X[ot]=it,X}var F=d("./end-of-stream"),$=Symbol("lastResolve"),D=Symbol("lastReject"),U=Symbol("error"),j=Symbol("ended"),Z=Symbol("lastPromise"),G=Symbol("handlePromise"),H=Symbol("stream");function q(X,ot){return{value:X,done:ot}}function W(X){var ot=X[$];if(ot!==null){var it=X[H].read();it!==null&&(X[Z]=null,X[$]=null,X[D]=null,ot(q(it,!1)))}}function Q(X){w.nextTick(W,X)}function J(X,ot){return function(it,lt){X.then(function(){ot[j]?it(q(void 0,!0)):ot[G](it,lt)},lt)}}var K=Object.getPrototypeOf(function(){}),V=Object.setPrototypeOf((I={get stream(){return this[H]},next:function(){var X=this,ot=this[U];if(ot!==null)return Promise.reject(ot);if(this[j])return Promise.resolve(q(void 0,!0));if(this[H].destroyed)return new Promise(function(ht,et){w.nextTick(function(){X[U]?et(X[U]):ht(q(void 0,!0))})});var it,lt=this[Z];if(lt)it=new Promise(J(lt,this));else{var at=this[H].read();if(at!==null)return Promise.resolve(q(at,!1));it=new Promise(this[G])}return this[Z]=it,it}},P(I,Symbol.asyncIterator,function(){return this}),P(I,"return",function(){var X=this;return new Promise(function(ot,it){X[H].destroy(null,function(lt){lt?it(lt):ot(q(void 0,!0))})})}),I),K),tt=function(X){var ot,it=Object.create(V,(P(ot={},H,{value:X,writable:!0}),P(ot,$,{value:null,writable:!0}),P(ot,D,{value:null,writable:!0}),P(ot,U,{value:null,writable:!0}),P(ot,j,{value:X._readableState.endEmitted,writable:!0}),P(ot,G,{value:function(lt,at){var ht=it[H].read();ht?(it[Z]=null,it[$]=null,it[D]=null,lt(q(ht,!1))):(it[$]=lt,it[D]=at)},writable:!0}),ot));return it[Z]=null,F(X,function(lt){if(lt&&lt.code!=="ERR_STREAM_PREMATURE_CLOSE"){var at=it[D];return at!==null&&(it[Z]=null,it[$]=null,it[D]=null,at(lt)),void(it[U]=lt)}var ht=it[$];ht!==null&&(it[Z]=null,it[$]=null,it[D]=null,ht(q(void 0,!0))),it[j]=!0}),X.on("readable",Q.bind(null,it)),it};m.exports=tt}).call(this)}).call(this,d("_process"))},{"./end-of-stream":75,_process:63}],73:[function(d,m,g){function w(H,q){var W=Object.keys(H);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(H);q&&(Q=Q.filter(function(J){return Object.getOwnPropertyDescriptor(H,J).enumerable})),W.push.apply(W,Q)}return W}function I(H){for(var q=1;q<arguments.length;q++){var W=arguments[q]!=null?arguments[q]:{};q%2?w(Object(W),!0).forEach(function(Q){P(H,Q,W[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(W)):w(Object(W)).forEach(function(Q){Object.defineProperty(H,Q,Object.getOwnPropertyDescriptor(W,Q))})}return H}function P(H,q,W){return q in H?Object.defineProperty(H,q,{value:W,enumerable:!0,configurable:!0,writable:!0}):H[q]=W,H}function F(H,q){if(!(H instanceof q))throw new TypeError("Cannot call a class as a function")}function $(H,q){for(var W=0;W<q.length;W++){var Q=q[W];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(H,Q.key,Q)}}function D(H,q,W){return $(H.prototype,q),H}var U=d("buffer").Buffer,j=d("util").inspect,Z=j&&j.custom||"inspect";function G(H,q,W){U.prototype.copy.call(H,q,W)}m.exports=function(){function H(){F(this,H),this.head=null,this.tail=null,this.length=0}return D(H,[{key:"push",value:function(q){var W={data:q,next:null};this.length>0?this.tail.next=W:this.head=W,this.tail=W,++this.length}},{key:"unshift",value:function(q){var W={data:q,next:this.head};this.length===0&&(this.tail=W),this.head=W,++this.length}},{key:"shift",value:function(){if(this.length!==0){var q=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,q}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(q){if(this.length===0)return"";for(var W=this.head,Q=""+W.data;W=W.next;)Q+=q+W.data;return Q}},{key:"concat",value:function(q){if(this.length===0)return U.alloc(0);for(var W=U.allocUnsafe(q>>>0),Q=this.head,J=0;Q;)G(Q.data,W,J),J+=Q.data.length,Q=Q.next;return W}},{key:"consume",value:function(q,W){var Q;return q<this.head.data.length?(Q=this.head.data.slice(0,q),this.head.data=this.head.data.slice(q)):Q=q===this.head.data.length?this.shift():W?this._getString(q):this._getBuffer(q),Q}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(q){var W=this.head,Q=1,J=W.data;for(q-=J.length;W=W.next;){var K=W.data,V=q>K.length?K.length:q;if(V===K.length?J+=K:J+=K.slice(0,q),(q-=V)==0){V===K.length?(++Q,W.next?this.head=W.next:this.head=this.tail=null):(this.head=W,W.data=K.slice(V));break}++Q}return this.length-=Q,J}},{key:"_getBuffer",value:function(q){var W=U.allocUnsafe(q),Q=this.head,J=1;for(Q.data.copy(W),q-=Q.data.length;Q=Q.next;){var K=Q.data,V=q>K.length?K.length:q;if(K.copy(W,W.length-q,0,V),(q-=V)==0){V===K.length?(++J,Q.next?this.head=Q.next:this.head=this.tail=null):(this.head=Q,Q.data=K.slice(V));break}++J}return this.length-=J,W}},{key:Z,value:function(q,W){return j(this,I({},W,{depth:0,customInspect:!1}))}}]),H}()},{buffer:32,util:29}],74:[function(d,m,g){(function(w){(function(){function I(j,Z){var G=this,H=this._readableState&&this._readableState.destroyed,q=this._writableState&&this._writableState.destroyed;return H||q?(Z?Z(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,w.nextTick(D,this,j)):w.nextTick(D,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(W){!Z&&W?G._writableState?G._writableState.errorEmitted?w.nextTick(F,G):(G._writableState.errorEmitted=!0,w.nextTick(P,G,W)):w.nextTick(P,G,W):Z?(w.nextTick(F,G),Z(W)):w.nextTick(F,G)}),this)}function P(j,Z){D(j,Z),F(j)}function F(j){j._writableState&&!j._writableState.emitClose||j._readableState&&!j._readableState.emitClose||j.emit("close")}function $(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function D(j,Z){j.emit("error",Z)}function U(j,Z){var G=j._readableState,H=j._writableState;G&&G.autoDestroy||H&&H.autoDestroy?j.destroy(Z):j.emit("error",Z)}m.exports={destroy:I,undestroy:$,errorOrDestroy:U}}).call(this)}).call(this,d("_process"))},{_process:63}],75:[function(d,m,g){var w=d("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function I(D){var U=!1;return function(){if(!U){U=!0;for(var j=arguments.length,Z=new Array(j),G=0;G<j;G++)Z[G]=arguments[G];D.apply(this,Z)}}}function P(){}function F(D){return D.setHeader&&typeof D.abort=="function"}function $(D,U,j){if(typeof U=="function")return $(D,null,U);U||(U={}),j=I(j||P);var Z=U.readable||U.readable!==!1&&D.readable,G=U.writable||U.writable!==!1&&D.writable,H=function(){D.writable||W()},q=D._writableState&&D._writableState.finished,W=function(){G=!1,q=!0,Z||j.call(D)},Q=D._readableState&&D._readableState.endEmitted,J=function(){Z=!1,Q=!0,G||j.call(D)},K=function(X){j.call(D,X)},V=function(){var X;return Z&&!Q?(D._readableState&&D._readableState.ended||(X=new w),j.call(D,X)):G&&!q?(D._writableState&&D._writableState.ended||(X=new w),j.call(D,X)):void 0},tt=function(){D.req.on("finish",W)};return F(D)?(D.on("complete",W),D.on("abort",V),D.req?tt():D.on("request",tt)):G&&!D._writableState&&(D.on("end",H),D.on("close",H)),D.on("end",J),D.on("finish",W),U.error!==!1&&D.on("error",K),D.on("close",V),function(){D.removeListener("complete",W),D.removeListener("abort",V),D.removeListener("request",tt),D.req&&D.req.removeListener("finish",W),D.removeListener("end",H),D.removeListener("close",H),D.removeListener("finish",W),D.removeListener("end",J),D.removeListener("error",K),D.removeListener("close",V)}}m.exports=$},{"../../../errors":66}],76:[function(d,m,g){m.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],77:[function(d,m,g){var w;function I(W){var Q=!1;return function(){Q||(Q=!0,W.apply(void 0,arguments))}}var P=d("../../../errors").codes,F=P.ERR_MISSING_ARGS,$=P.ERR_STREAM_DESTROYED;function D(W){if(W)throw W}function U(W){return W.setHeader&&typeof W.abort=="function"}function j(W,Q,J,K){K=I(K);var V=!1;W.on("close",function(){V=!0}),w===void 0&&(w=d("./end-of-stream")),w(W,{readable:Q,writable:J},function(X){if(X)return K(X);V=!0,K()});var tt=!1;return function(X){if(!V&&!tt)return tt=!0,U(W)?W.abort():typeof W.destroy=="function"?W.destroy():void K(X||new $("pipe"))}}function Z(W){W()}function G(W,Q){return W.pipe(Q)}function H(W){return W.length?typeof W[W.length-1]!="function"?D:W.pop():D}function q(){for(var W=arguments.length,Q=new Array(W),J=0;J<W;J++)Q[J]=arguments[J];var K,V=H(Q);if(Array.isArray(Q[0])&&(Q=Q[0]),Q.length<2)throw new F("streams");var tt=Q.map(function(X,ot){var it=ot<Q.length-1;return j(X,it,ot>0,function(lt){K||(K=lt),lt&&tt.forEach(Z),it||(tt.forEach(Z),V(K))})});return Q.reduce(G)}m.exports=q},{"../../../errors":66,"./end-of-stream":75}],78:[function(d,m,g){var w=d("../../../errors").codes.ERR_INVALID_OPT_VALUE;function I(F,$,D){return F.highWaterMark!=null?F.highWaterMark:$?F[D]:null}function P(F,$,D,U){var j=I($,U,D);if(j!=null){if(!isFinite(j)||Math.floor(j)!==j||j<0)throw new w(U?D:"highWaterMark",j);return Math.floor(j)}return F.objectMode?16:16384}m.exports={getHighWaterMark:P}},{"../../../errors":66}],79:[function(d,m,g){m.exports=d("events").EventEmitter},{events:35}],80:[function(d,m,g){var w=d("safe-buffer").Buffer,I=w.isEncoding||function(tt){switch((tt=""+tt)&&tt.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function P(tt){if(!tt)return"utf8";for(var X;;)switch(tt){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return tt;default:if(X)return;tt=(""+tt).toLowerCase(),X=!0}}function F(tt){var X=P(tt);if(typeof X!="string"&&(w.isEncoding===I||!I(tt)))throw new Error("Unknown encoding: "+tt);return X||tt}function $(tt){var X;switch(this.encoding=F(tt),this.encoding){case"utf16le":this.text=q,this.end=W,X=4;break;case"utf8":this.fillLast=Z,X=4;break;case"base64":this.text=Q,this.end=J,X=3;break;default:return this.write=K,void(this.end=V)}this.lastNeed=0,this.lastTotal=0,this.lastChar=w.allocUnsafe(X)}function D(tt){return tt<=127?0:tt>>5==6?2:tt>>4==14?3:tt>>3==30?4:tt>>6==2?-1:-2}function U(tt,X,ot){var it=X.length-1;if(it<ot)return 0;var lt=D(X[it]);return lt>=0?(lt>0&&(tt.lastNeed=lt-1),lt):--it<ot||lt===-2?0:(lt=D(X[it]))>=0?(lt>0&&(tt.lastNeed=lt-2),lt):--it<ot||lt===-2?0:(lt=D(X[it]))>=0?(lt>0&&(lt===2?lt=0:tt.lastNeed=lt-3),lt):0}function j(tt,X,ot){if((192&X[0])!=128)return tt.lastNeed=0,"";if(tt.lastNeed>1&&X.length>1){if((192&X[1])!=128)return tt.lastNeed=1,"";if(tt.lastNeed>2&&X.length>2&&(192&X[2])!=128)return tt.lastNeed=2,""}}function Z(tt){var X=this.lastTotal-this.lastNeed,ot=j(this,tt);return ot!==void 0?ot:this.lastNeed<=tt.length?(tt.copy(this.lastChar,X,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(tt.copy(this.lastChar,X,0,tt.length),void(this.lastNeed-=tt.length))}function G(tt,X){var ot=U(this,tt,X);if(!this.lastNeed)return tt.toString("utf8",X);this.lastTotal=ot;var it=tt.length-(ot-this.lastNeed);return tt.copy(this.lastChar,0,it),tt.toString("utf8",X,it)}function H(tt){var X=tt&&tt.length?this.write(tt):"";return this.lastNeed?X+"":X}function q(tt,X){if((tt.length-X)%2==0){var ot=tt.toString("utf16le",X);if(ot){var it=ot.charCodeAt(ot.length-1);if(it>=55296&&it<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=tt[tt.length-2],this.lastChar[1]=tt[tt.length-1],ot.slice(0,-1)}return ot}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=tt[tt.length-1],tt.toString("utf16le",X,tt.length-1)}function W(tt){var X=tt&&tt.length?this.write(tt):"";if(this.lastNeed){var ot=this.lastTotal-this.lastNeed;return X+this.lastChar.toString("utf16le",0,ot)}return X}function Q(tt,X){var ot=(tt.length-X)%3;return ot===0?tt.toString("base64",X):(this.lastNeed=3-ot,this.lastTotal=3,ot===1?this.lastChar[0]=tt[tt.length-1]:(this.lastChar[0]=tt[tt.length-2],this.lastChar[1]=tt[tt.length-1]),tt.toString("base64",X,tt.length-ot))}function J(tt){var X=tt&&tt.length?this.write(tt):"";return this.lastNeed?X+this.lastChar.toString("base64",0,3-this.lastNeed):X}function K(tt){return tt.toString(this.encoding)}function V(tt){return tt&&tt.length?this.write(tt):""}g.StringDecoder=$,$.prototype.write=function(tt){if(tt.length===0)return"";var X,ot;if(this.lastNeed){if((X=this.fillLast(tt))===void 0)return"";ot=this.lastNeed,this.lastNeed=0}else ot=0;return ot<tt.length?X?X+this.text(tt,ot):this.text(tt,ot):X||""},$.prototype.end=H,$.prototype.text=G,$.prototype.fillLast=function(tt){if(this.lastNeed<=tt.length)return tt.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);tt.copy(this.lastChar,this.lastTotal-this.lastNeed,0,tt.length),this.lastNeed-=tt.length}},{"safe-buffer":64}],81:[function(d,m,g){(function(w){(function(){function I(F,$){if(P("noDeprecation"))return F;var D=!1;function U(){if(!D){if(P("throwDeprecation"))throw new Error($);P("traceDeprecation")?console.trace($):console.warn($),D=!0}return F.apply(this,arguments)}return U}function P(F){try{if(!w.localStorage)return!1}catch{return!1}var $=w.localStorage[F];return $!=null&&String($).toLowerCase()==="true"}m.exports=I}).call(this)}).call(this,commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],82:[function(d,m,g){arguments[4][25][0].apply(g,arguments)},{dup:25}],83:[function(d,m,g){var w=d("is-arguments"),I=d("is-generator-function"),P=d("which-typed-array"),F=d("is-typed-array");function $(vt){return vt.call.bind(vt)}var D=typeof BigInt<"u",U=typeof Symbol<"u",j=$(Object.prototype.toString),Z=$(Number.prototype.valueOf),G=$(String.prototype.valueOf),H=$(Boolean.prototype.valueOf);if(D)var q=$(BigInt.prototype.valueOf);if(U)var W=$(Symbol.prototype.valueOf);function Q(vt,Gt){if(typeof vt!="object")return!1;try{return Gt(vt),!0}catch{return!1}}function J(vt){return typeof Promise<"u"&&vt instanceof Promise||vt!==null&&typeof vt=="object"&&typeof vt.then=="function"&&typeof vt.catch=="function"}function K(vt){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(vt):F(vt)||Tt(vt)}function V(vt){return P(vt)==="Uint8Array"}function tt(vt){return P(vt)==="Uint8ClampedArray"}function X(vt){return P(vt)==="Uint16Array"}function ot(vt){return P(vt)==="Uint32Array"}function it(vt){return P(vt)==="Int8Array"}function lt(vt){return P(vt)==="Int16Array"}function at(vt){return P(vt)==="Int32Array"}function ht(vt){return P(vt)==="Float32Array"}function et(vt){return P(vt)==="Float64Array"}function ut(vt){return P(vt)==="BigInt64Array"}function Et(vt){return P(vt)==="BigUint64Array"}function gt(vt){return j(vt)==="[object Map]"}function dt(vt){return typeof Map<"u"&&(gt.working?gt(vt):vt instanceof Map)}function yt(vt){return j(vt)==="[object Set]"}function Nt(vt){return typeof Set<"u"&&(yt.working?yt(vt):vt instanceof Set)}function Bt(vt){return j(vt)==="[object WeakMap]"}function St(vt){return typeof WeakMap<"u"&&(Bt.working?Bt(vt):vt instanceof WeakMap)}function zt(vt){return j(vt)==="[object WeakSet]"}function kt(vt){return zt(vt)}function Ct(vt){return j(vt)==="[object ArrayBuffer]"}function Ut(vt){return typeof ArrayBuffer<"u"&&(Ct.working?Ct(vt):vt instanceof ArrayBuffer)}function Dt(vt){return j(vt)==="[object DataView]"}function Tt(vt){return typeof DataView<"u"&&(Dt.working?Dt(vt):vt instanceof DataView)}g.isArgumentsObject=w,g.isGeneratorFunction=I,g.isTypedArray=F,g.isPromise=J,g.isArrayBufferView=K,g.isUint8Array=V,g.isUint8ClampedArray=tt,g.isUint16Array=X,g.isUint32Array=ot,g.isInt8Array=it,g.isInt16Array=lt,g.isInt32Array=at,g.isFloat32Array=ht,g.isFloat64Array=et,g.isBigInt64Array=ut,g.isBigUint64Array=Et,gt.working=typeof Map<"u"&&gt(new Map),g.isMap=dt,yt.working=typeof Set<"u"&&yt(new Set),g.isSet=Nt,Bt.working=typeof WeakMap<"u"&&Bt(new WeakMap),g.isWeakMap=St,zt.working=typeof WeakSet<"u"&&zt(new WeakSet),g.isWeakSet=kt,Ct.working=typeof ArrayBuffer<"u"&&Ct(new ArrayBuffer),g.isArrayBuffer=Ut,Dt.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Dt(new DataView(new ArrayBuffer(1),0,1)),g.isDataView=Tt;var Rt=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Lt(vt){return j(vt)==="[object SharedArrayBuffer]"}function Ht(vt){return Rt!==void 0&&(Lt.working===void 0&&(Lt.working=Lt(new Rt)),Lt.working?Lt(vt):vt instanceof Rt)}function Wt(vt){return j(vt)==="[object AsyncFunction]"}function Pt(vt){return j(vt)==="[object Map Iterator]"}function nt(vt){return j(vt)==="[object Set Iterator]"}function Mt(vt){return j(vt)==="[object Generator]"}function ct(vt){return j(vt)==="[object WebAssembly.Module]"}function _t(vt){return Q(vt,Z)}function bt(vt){return Q(vt,G)}function xt(vt){return Q(vt,H)}function $t(vt){return D&&Q(vt,q)}function rt(vt){return U&&Q(vt,W)}function ft(vt){return _t(vt)||bt(vt)||xt(vt)||$t(vt)||rt(vt)}function wt(vt){return typeof Uint8Array<"u"&&(Ut(vt)||Ht(vt))}g.isSharedArrayBuffer=Ht,g.isAsyncFunction=Wt,g.isMapIterator=Pt,g.isSetIterator=nt,g.isGeneratorObject=Mt,g.isWebAssemblyCompiledModule=ct,g.isNumberObject=_t,g.isStringObject=bt,g.isBooleanObject=xt,g.isBigIntObject=$t,g.isSymbolObject=rt,g.isBoxedPrimitive=ft,g.isAnyArrayBuffer=wt,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(vt){Object.defineProperty(g,vt,{enumerable:!1,value:function(){throw new Error(vt+" is not supported in userland")}})})},{"is-arguments":47,"is-generator-function":49,"is-typed-array":50,"which-typed-array":85}],84:[function(d,m,g){(function(w){(function(){var I=Object.getOwnPropertyDescriptors||function(Tt){for(var Rt=Object.keys(Tt),Lt={},Ht=0;Ht<Rt.length;Ht++)Lt[Rt[Ht]]=Object.getOwnPropertyDescriptor(Tt,Rt[Ht]);return Lt},P=/%[sdj%]/g;g.format=function(Tt){if(!lt(Tt)){for(var Rt=[],Lt=0;Lt<arguments.length;Lt++)Rt.push(U(arguments[Lt]));return Rt.join(" ")}Lt=1;for(var Ht=arguments,Wt=Ht.length,Pt=String(Tt).replace(P,function(Mt){if(Mt==="%%")return"%";if(Lt>=Wt)return Mt;switch(Mt){case"%s":return String(Ht[Lt++]);case"%d":return Number(Ht[Lt++]);case"%j":try{return JSON.stringify(Ht[Lt++])}catch{return"[Circular]"}default:return Mt}}),nt=Ht[Lt];Lt<Wt;nt=Ht[++Lt])X(nt)||!ut(nt)?Pt+=" "+nt:Pt+=" "+U(nt);return Pt},g.deprecate=function(Tt,Rt){if(w!==void 0&&w.noDeprecation===!0)return Tt;if(w===void 0)return function(){return g.deprecate(Tt,Rt).apply(this,arguments)};var Lt=!1;function Ht(){if(!Lt){if(w.throwDeprecation)throw new Error(Rt);w.traceDeprecation?console.trace(Rt):console.error(Rt),Lt=!0}return Tt.apply(this,arguments)}return Ht};var F={},$=/^$/;if(w.env.NODE_DEBUG){var D=w.env.NODE_DEBUG;D=D.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),$=new RegExp("^"+D+"$","i")}function U(Tt,Rt){var Lt={seen:[],stylize:Z};return arguments.length>=3&&(Lt.depth=arguments[2]),arguments.length>=4&&(Lt.colors=arguments[3]),tt(Rt)?Lt.showHidden=Rt:Rt&&g._extend(Lt,Rt),ht(Lt.showHidden)&&(Lt.showHidden=!1),ht(Lt.depth)&&(Lt.depth=2),ht(Lt.colors)&&(Lt.colors=!1),ht(Lt.customInspect)&&(Lt.customInspect=!0),Lt.colors&&(Lt.stylize=j),H(Lt,Tt,Lt.depth)}function j(Tt,Rt){var Lt=U.styles[Rt];return Lt?"\x1B["+U.colors[Lt][0]+"m"+Tt+"\x1B["+U.colors[Lt][1]+"m":Tt}function Z(Tt,Rt){return Tt}function G(Tt){var Rt={};return Tt.forEach(function(Lt,Ht){Rt[Lt]=!0}),Rt}function H(Tt,Rt,Lt){if(Tt.customInspect&&Rt&&dt(Rt.inspect)&&Rt.inspect!==g.inspect&&(!Rt.constructor||Rt.constructor.prototype!==Rt)){var Ht=Rt.inspect(Lt,Tt);return lt(Ht)||(Ht=H(Tt,Ht,Lt)),Ht}var Wt=q(Tt,Rt);if(Wt)return Wt;var Pt=Object.keys(Rt),nt=G(Pt);if(Tt.showHidden&&(Pt=Object.getOwnPropertyNames(Rt)),gt(Rt)&&(Pt.indexOf("message")>=0||Pt.indexOf("description")>=0))return W(Rt);if(Pt.length===0){if(dt(Rt)){var Mt=Rt.name?": "+Rt.name:"";return Tt.stylize("[Function"+Mt+"]","special")}if(et(Rt))return Tt.stylize(RegExp.prototype.toString.call(Rt),"regexp");if(Et(Rt))return Tt.stylize(Date.prototype.toString.call(Rt),"date");if(gt(Rt))return W(Rt)}var ct,_t="",bt=!1,xt=["{","}"];return V(Rt)&&(bt=!0,xt=["[","]"]),dt(Rt)&&(_t=" [Function"+(Rt.name?": "+Rt.name:"")+"]"),et(Rt)&&(_t=" "+RegExp.prototype.toString.call(Rt)),Et(Rt)&&(_t=" "+Date.prototype.toUTCString.call(Rt)),gt(Rt)&&(_t=" "+W(Rt)),Pt.length!==0||bt&&Rt.length!=0?Lt<0?et(Rt)?Tt.stylize(RegExp.prototype.toString.call(Rt),"regexp"):Tt.stylize("[Object]","special"):(Tt.seen.push(Rt),ct=bt?Q(Tt,Rt,Lt,nt,Pt):Pt.map(function($t){return J(Tt,Rt,Lt,nt,$t,bt)}),Tt.seen.pop(),K(ct,_t,xt)):xt[0]+_t+xt[1]}function q(Tt,Rt){if(ht(Rt))return Tt.stylize("undefined","undefined");if(lt(Rt)){var Lt="'"+JSON.stringify(Rt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Tt.stylize(Lt,"string")}return it(Rt)?Tt.stylize(""+Rt,"number"):tt(Rt)?Tt.stylize(""+Rt,"boolean"):X(Rt)?Tt.stylize("null","null"):void 0}function W(Tt){return"["+Error.prototype.toString.call(Tt)+"]"}function Q(Tt,Rt,Lt,Ht,Wt){for(var Pt=[],nt=0,Mt=Rt.length;nt<Mt;++nt)kt(Rt,String(nt))?Pt.push(J(Tt,Rt,Lt,Ht,String(nt),!0)):Pt.push("");return Wt.forEach(function(ct){ct.match(/^\d+$/)||Pt.push(J(Tt,Rt,Lt,Ht,ct,!0))}),Pt}function J(Tt,Rt,Lt,Ht,Wt,Pt){var nt,Mt,ct;if((ct=Object.getOwnPropertyDescriptor(Rt,Wt)||{value:Rt[Wt]}).get?Mt=ct.set?Tt.stylize("[Getter/Setter]","special"):Tt.stylize("[Getter]","special"):ct.set&&(Mt=Tt.stylize("[Setter]","special")),kt(Ht,Wt)||(nt="["+Wt+"]"),Mt||(Tt.seen.indexOf(ct.value)<0?(Mt=X(Lt)?H(Tt,ct.value,null):H(Tt,ct.value,Lt-1)).indexOf(`
`)>-1&&(Mt=Pt?Mt.split(`
`).map(function(_t){return"  "+_t}).join(`
`).slice(2):`
`+Mt.split(`
`).map(function(_t){return"   "+_t}).join(`
`)):Mt=Tt.stylize("[Circular]","special")),ht(nt)){if(Pt&&Wt.match(/^\d+$/))return Mt;(nt=JSON.stringify(""+Wt)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(nt=nt.slice(1,-1),nt=Tt.stylize(nt,"name")):(nt=nt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),nt=Tt.stylize(nt,"string"))}return nt+": "+Mt}function K(Tt,Rt,Lt){return Tt.reduce(function(Ht,Wt){return Wt.indexOf(`
`),Ht+Wt.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Lt[0]+(Rt===""?"":Rt+`
 `)+" "+Tt.join(`,
  `)+" "+Lt[1]:Lt[0]+Rt+" "+Tt.join(", ")+" "+Lt[1]}function V(Tt){return Array.isArray(Tt)}function tt(Tt){return typeof Tt=="boolean"}function X(Tt){return Tt===null}function ot(Tt){return Tt==null}function it(Tt){return typeof Tt=="number"}function lt(Tt){return typeof Tt=="string"}function at(Tt){return typeof Tt=="symbol"}function ht(Tt){return Tt===void 0}function et(Tt){return ut(Tt)&&Nt(Tt)==="[object RegExp]"}function ut(Tt){return typeof Tt=="object"&&Tt!==null}function Et(Tt){return ut(Tt)&&Nt(Tt)==="[object Date]"}function gt(Tt){return ut(Tt)&&(Nt(Tt)==="[object Error]"||Tt instanceof Error)}function dt(Tt){return typeof Tt=="function"}function yt(Tt){return Tt===null||typeof Tt=="boolean"||typeof Tt=="number"||typeof Tt=="string"||typeof Tt=="symbol"||Tt===void 0}function Nt(Tt){return Object.prototype.toString.call(Tt)}function Bt(Tt){return Tt<10?"0"+Tt.toString(10):Tt.toString(10)}g.debuglog=function(Tt){if(Tt=Tt.toUpperCase(),!F[Tt])if($.test(Tt)){var Rt=w.pid;F[Tt]=function(){var Lt=g.format.apply(g,arguments);console.error("%s %d: %s",Tt,Rt,Lt)}}else F[Tt]=function(){};return F[Tt]},g.inspect=U,U.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},U.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},g.types=d("./support/types"),g.isArray=V,g.isBoolean=tt,g.isNull=X,g.isNullOrUndefined=ot,g.isNumber=it,g.isString=lt,g.isSymbol=at,g.isUndefined=ht,g.isRegExp=et,g.types.isRegExp=et,g.isObject=ut,g.isDate=Et,g.types.isDate=Et,g.isError=gt,g.types.isNativeError=gt,g.isFunction=dt,g.isPrimitive=yt,g.isBuffer=d("./support/isBuffer");var St=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function zt(){var Tt=new Date,Rt=[Bt(Tt.getHours()),Bt(Tt.getMinutes()),Bt(Tt.getSeconds())].join(":");return[Tt.getDate(),St[Tt.getMonth()],Rt].join(" ")}function kt(Tt,Rt){return Object.prototype.hasOwnProperty.call(Tt,Rt)}g.log=function(){console.log("%s - %s",zt(),g.format.apply(g,arguments))},g.inherits=d("inherits"),g._extend=function(Tt,Rt){if(!Rt||!ut(Rt))return Tt;for(var Lt=Object.keys(Rt),Ht=Lt.length;Ht--;)Tt[Lt[Ht]]=Rt[Lt[Ht]];return Tt};var Ct=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function Ut(Tt,Rt){if(!Tt){var Lt=new Error("Promise was rejected with a falsy value");Lt.reason=Tt,Tt=Lt}return Rt(Tt)}function Dt(Tt){if(typeof Tt!="function")throw new TypeError('The "original" argument must be of type Function');function Rt(){for(var Lt=[],Ht=0;Ht<arguments.length;Ht++)Lt.push(arguments[Ht]);var Wt=Lt.pop();if(typeof Wt!="function")throw new TypeError("The last argument must be of type Function");var Pt=this,nt=function(){return Wt.apply(Pt,arguments)};Tt.apply(this,Lt).then(function(Mt){w.nextTick(nt.bind(null,null,Mt))},function(Mt){w.nextTick(Ut.bind(null,Mt,nt))})}return Object.setPrototypeOf(Rt,Object.getPrototypeOf(Tt)),Object.defineProperties(Rt,I(Tt)),Rt}g.promisify=function(Tt){if(typeof Tt!="function")throw new TypeError('The "original" argument must be of type Function');if(Ct&&Tt[Ct]){var Rt;if(typeof(Rt=Tt[Ct])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Rt,Ct,{value:Rt,enumerable:!1,writable:!1,configurable:!0}),Rt}function Rt(){for(var Lt,Ht,Wt=new Promise(function(Mt,ct){Lt=Mt,Ht=ct}),Pt=[],nt=0;nt<arguments.length;nt++)Pt.push(arguments[nt]);Pt.push(function(Mt,ct){Mt?Ht(Mt):Lt(ct)});try{Tt.apply(this,Pt)}catch(Mt){Ht(Mt)}return Wt}return Object.setPrototypeOf(Rt,Object.getPrototypeOf(Tt)),Ct&&Object.defineProperty(Rt,Ct,{value:Rt,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Rt,I(Tt))},g.promisify.custom=Ct,g.callbackify=Dt}).call(this)}).call(this,d("_process"))},{"./support/isBuffer":82,"./support/types":83,_process:63,inherits:46}],85:[function(d,m,g){(function(w){(function(){var I=d("for-each"),P=d("available-typed-arrays"),F=d("call-bind/callBound"),$=d("gopd"),D=F("Object.prototype.toString"),U=d("has-tostringtag/shams")(),j=typeof globalThis>"u"?w:globalThis,Z=P(),G=F("String.prototype.slice"),H={},q=Object.getPrototypeOf;U&&$&&q&&I(Z,function(J){if(typeof j[J]=="function"){var K=new j[J];if(Symbol.toStringTag in K){var V=q(K),tt=$(V,Symbol.toStringTag);if(!tt){var X=q(V);tt=$(X,Symbol.toStringTag)}H[J]=tt.get}}});var W=function(J){var K=!1;return I(H,function(V,tt){if(!K)try{var X=V.call(J);X===tt&&(K=X)}catch{}}),K},Q=d("is-typed-array");m.exports=function(J){return!!Q(J)&&(U&&Symbol.toStringTag in J?W(J):G(D(J),8,-1))}}).call(this)}).call(this,commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":27,"call-bind/callBound":33,"for-each":36,gopd:40,"has-tostringtag/shams":43,"is-typed-array":50}]},{},[20])(20);var browserExports=browser$1.exports,PNGFilterType,PNGFilterType2,PNGColorType,PNGColorType2;function png(){return{mime:"image/png",hasAlpha:!0,encode:(d,{deflateLevel:m=9,deflateStrategy:g=3,filterType:w=PNGFilterType.AUTO,colorType:I,inputHasAlpha:P=!0,...F}={})=>{const $=new browserExports.PNG({width:d.width,height:d.height});return $.data=d.data,browserExports.PNG.sync.write($,{...F,deflateLevel:m,deflateStrategy:g,filterType:w,colorType:I!==void 0?I:P?PNGColorType.COLOR_ALPHA:PNGColorType.COLOR,inputHasAlpha:P})},decode:(d,m)=>{const g=browserExports.PNG.sync.read(d,m);return{data:g.data,width:g.width,height:g.height}}}}PNGFilterType2=PNGFilterType||(PNGFilterType={}),PNGFilterType2[PNGFilterType2.AUTO=-1]="AUTO",PNGFilterType2[PNGFilterType2.NONE=0]="NONE",PNGFilterType2[PNGFilterType2.SUB=1]="SUB",PNGFilterType2[PNGFilterType2.UP=2]="UP",PNGFilterType2[PNGFilterType2.AVERAGE=3]="AVERAGE",PNGFilterType2[PNGFilterType2.PATH=4]="PATH",PNGColorType2=PNGColorType||(PNGColorType={}),PNGColorType2[PNGColorType2.GRAYSCALE=0]="GRAYSCALE",PNGColorType2[PNGColorType2.COLOR=2]="COLOR",PNGColorType2[PNGColorType2.GRAYSCALE_ALPHA=4]="GRAYSCALE_ALPHA",PNGColorType2[PNGColorType2.COLOR_ALPHA=6]="COLOR_ALPHA";var UTIF={exports:{}},common={},hasRequiredCommon;function requireCommon(){return hasRequiredCommon||(hasRequiredCommon=1,function(d){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function g(P,F){return Object.prototype.hasOwnProperty.call(P,F)}d.assign=function(P){for(var F=Array.prototype.slice.call(arguments,1);F.length;){var $=F.shift();if($){if(typeof $!="object")throw new TypeError($+"must be non-object");for(var D in $)g($,D)&&(P[D]=$[D])}}return P},d.shrinkBuf=function(P,F){return P.length===F?P:P.subarray?P.subarray(0,F):(P.length=F,P)};var w={arraySet:function(P,F,$,D,U){if(F.subarray&&P.subarray)P.set(F.subarray($,$+D),U);else for(var j=0;j<D;j++)P[U+j]=F[$+j]},flattenChunks:function(P){var F,$,D,U,j,Z;for(D=0,F=0,$=P.length;F<$;F++)D+=P[F].length;for(Z=new Uint8Array(D),U=0,F=0,$=P.length;F<$;F++)j=P[F],Z.set(j,U),U+=j.length;return Z}},I={arraySet:function(P,F,$,D,U){for(var j=0;j<D;j++)P[U+j]=F[$+j]},flattenChunks:function(P){return[].concat.apply([],P)}};d.setTyped=function(P){P?(d.Buf8=Uint8Array,d.Buf16=Uint16Array,d.Buf32=Int32Array,d.assign(d,w)):(d.Buf8=Array,d.Buf16=Array,d.Buf32=Array,d.assign(d,I))},d.setTyped(m)}(common)),common}var deflate$1={},deflate={},trees={},hasRequiredTrees,adler32_1,hasRequiredAdler32,crc32_1,hasRequiredCrc32,messages,hasRequiredMessages,hasRequiredDeflate$1;function requireTrees(){if(hasRequiredTrees)return trees;hasRequiredTrees=1;var d=requireCommon(),m=0,g=1;function w(ct){for(var _t=ct.length;--_t>=0;)ct[_t]=0}var I=0,P=29,F=256,$=F+1+P,D=30,U=19,j=2*$+1,Z=15,G=16,H=7,q=256,W=16,Q=17,J=18,K=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],V=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ot=new Array(2*($+2));w(ot);var it=new Array(2*D);w(it);var lt=new Array(512);w(lt);var at=new Array(256);w(at);var ht=new Array(P);w(ht);var et,ut,Et,gt=new Array(D);function dt(ct,_t,bt,xt,$t){this.static_tree=ct,this.extra_bits=_t,this.extra_base=bt,this.elems=xt,this.max_length=$t,this.has_stree=ct&&ct.length}function yt(ct,_t){this.dyn_tree=ct,this.max_code=0,this.stat_desc=_t}function Nt(ct){return ct<256?lt[ct]:lt[256+(ct>>>7)]}function Bt(ct,_t){ct.pending_buf[ct.pending++]=255&_t,ct.pending_buf[ct.pending++]=_t>>>8&255}function St(ct,_t,bt){ct.bi_valid>G-bt?(ct.bi_buf|=_t<<ct.bi_valid&65535,Bt(ct,ct.bi_buf),ct.bi_buf=_t>>G-ct.bi_valid,ct.bi_valid+=bt-G):(ct.bi_buf|=_t<<ct.bi_valid&65535,ct.bi_valid+=bt)}function zt(ct,_t,bt){St(ct,bt[2*_t],bt[2*_t+1])}function kt(ct,_t){var bt=0;do bt|=1&ct,ct>>>=1,bt<<=1;while(--_t>0);return bt>>>1}function Ct(ct,_t,bt){var xt,$t,rt=new Array(Z+1),ft=0;for(xt=1;xt<=Z;xt++)rt[xt]=ft=ft+bt[xt-1]<<1;for($t=0;$t<=_t;$t++){var wt=ct[2*$t+1];wt!==0&&(ct[2*$t]=kt(rt[wt]++,wt))}}function Ut(ct){var _t;for(_t=0;_t<$;_t++)ct.dyn_ltree[2*_t]=0;for(_t=0;_t<D;_t++)ct.dyn_dtree[2*_t]=0;for(_t=0;_t<U;_t++)ct.bl_tree[2*_t]=0;ct.dyn_ltree[2*q]=1,ct.opt_len=ct.static_len=0,ct.last_lit=ct.matches=0}function Dt(ct){ct.bi_valid>8?Bt(ct,ct.bi_buf):ct.bi_valid>0&&(ct.pending_buf[ct.pending++]=ct.bi_buf),ct.bi_buf=0,ct.bi_valid=0}function Tt(ct,_t,bt,xt){var $t=2*_t,rt=2*bt;return ct[$t]<ct[rt]||ct[$t]===ct[rt]&&xt[_t]<=xt[bt]}function Rt(ct,_t,bt){for(var xt=ct.heap[bt],$t=bt<<1;$t<=ct.heap_len&&($t<ct.heap_len&&Tt(_t,ct.heap[$t+1],ct.heap[$t],ct.depth)&&$t++,!Tt(_t,xt,ct.heap[$t],ct.depth));)ct.heap[bt]=ct.heap[$t],bt=$t,$t<<=1;ct.heap[bt]=xt}function Lt(ct,_t,bt){var xt,$t,rt,ft,wt=0;if(ct.last_lit!==0)do xt=ct.pending_buf[ct.d_buf+2*wt]<<8|ct.pending_buf[ct.d_buf+2*wt+1],$t=ct.pending_buf[ct.l_buf+wt],wt++,xt===0?zt(ct,$t,_t):(zt(ct,(rt=at[$t])+F+1,_t),(ft=K[rt])!==0&&St(ct,$t-=ht[rt],ft),zt(ct,rt=Nt(--xt),bt),(ft=V[rt])!==0&&St(ct,xt-=gt[rt],ft));while(wt<ct.last_lit);zt(ct,q,_t)}function Ht(ct,_t){var bt,xt,$t,rt=_t.dyn_tree,ft=_t.stat_desc.static_tree,wt=_t.stat_desc.has_stree,vt=_t.stat_desc.elems,Gt=-1;for(ct.heap_len=0,ct.heap_max=j,bt=0;bt<vt;bt++)rt[2*bt]!==0?(ct.heap[++ct.heap_len]=Gt=bt,ct.depth[bt]=0):rt[2*bt+1]=0;for(;ct.heap_len<2;)rt[2*($t=ct.heap[++ct.heap_len]=Gt<2?++Gt:0)]=1,ct.depth[$t]=0,ct.opt_len--,wt&&(ct.static_len-=ft[2*$t+1]);for(_t.max_code=Gt,bt=ct.heap_len>>1;bt>=1;bt--)Rt(ct,rt,bt);$t=vt;do bt=ct.heap[1],ct.heap[1]=ct.heap[ct.heap_len--],Rt(ct,rt,1),xt=ct.heap[1],ct.heap[--ct.heap_max]=bt,ct.heap[--ct.heap_max]=xt,rt[2*$t]=rt[2*bt]+rt[2*xt],ct.depth[$t]=(ct.depth[bt]>=ct.depth[xt]?ct.depth[bt]:ct.depth[xt])+1,rt[2*bt+1]=rt[2*xt+1]=$t,ct.heap[1]=$t++,Rt(ct,rt,1);while(ct.heap_len>=2);ct.heap[--ct.heap_max]=ct.heap[1],function(Qt,ae){var se,ie,At,st,mt,Ot,qt=ae.dyn_tree,Yt=ae.max_code,Jt=ae.stat_desc.static_tree,Ft=ae.stat_desc.has_stree,re=ae.stat_desc.extra_bits,jt=ae.stat_desc.extra_base,Kt=ae.stat_desc.max_length,It=0;for(st=0;st<=Z;st++)Qt.bl_count[st]=0;for(qt[2*Qt.heap[Qt.heap_max]+1]=0,se=Qt.heap_max+1;se<j;se++)(st=qt[2*qt[2*(ie=Qt.heap[se])+1]+1]+1)>Kt&&(st=Kt,It++),qt[2*ie+1]=st,ie>Yt||(Qt.bl_count[st]++,mt=0,ie>=jt&&(mt=re[ie-jt]),Ot=qt[2*ie],Qt.opt_len+=Ot*(st+mt),Ft&&(Qt.static_len+=Ot*(Jt[2*ie+1]+mt)));if(It!==0){do{for(st=Kt-1;Qt.bl_count[st]===0;)st--;Qt.bl_count[st]--,Qt.bl_count[st+1]+=2,Qt.bl_count[Kt]--,It-=2}while(It>0);for(st=Kt;st!==0;st--)for(ie=Qt.bl_count[st];ie!==0;)(At=Qt.heap[--se])>Yt||(qt[2*At+1]!==st&&(Qt.opt_len+=(st-qt[2*At+1])*qt[2*At],qt[2*At+1]=st),ie--)}}(ct,_t),Ct(rt,Gt,ct.bl_count)}function Wt(ct,_t,bt){var xt,$t,rt=-1,ft=_t[1],wt=0,vt=7,Gt=4;for(ft===0&&(vt=138,Gt=3),_t[2*(bt+1)+1]=65535,xt=0;xt<=bt;xt++)$t=ft,ft=_t[2*(xt+1)+1],++wt<vt&&$t===ft||(wt<Gt?ct.bl_tree[2*$t]+=wt:$t!==0?($t!==rt&&ct.bl_tree[2*$t]++,ct.bl_tree[2*W]++):wt<=10?ct.bl_tree[2*Q]++:ct.bl_tree[2*J]++,wt=0,rt=$t,ft===0?(vt=138,Gt=3):$t===ft?(vt=6,Gt=3):(vt=7,Gt=4))}function Pt(ct,_t,bt){var xt,$t,rt=-1,ft=_t[1],wt=0,vt=7,Gt=4;for(ft===0&&(vt=138,Gt=3),xt=0;xt<=bt;xt++)if($t=ft,ft=_t[2*(xt+1)+1],!(++wt<vt&&$t===ft)){if(wt<Gt)do zt(ct,$t,ct.bl_tree);while(--wt!=0);else $t!==0?($t!==rt&&(zt(ct,$t,ct.bl_tree),wt--),zt(ct,W,ct.bl_tree),St(ct,wt-3,2)):wt<=10?(zt(ct,Q,ct.bl_tree),St(ct,wt-3,3)):(zt(ct,J,ct.bl_tree),St(ct,wt-11,7));wt=0,rt=$t,ft===0?(vt=138,Gt=3):$t===ft?(vt=6,Gt=3):(vt=7,Gt=4)}}w(gt);var nt=!1;function Mt(ct,_t,bt,xt){St(ct,(I<<1)+(xt?1:0),3),function($t,rt,ft,wt){Dt($t),Bt($t,ft),Bt($t,~ft),d.arraySet($t.pending_buf,$t.window,rt,ft,$t.pending),$t.pending+=ft}(ct,_t,bt)}return trees._tr_init=function(ct){nt||(function(){var _t,bt,xt,$t,rt,ft=new Array(Z+1);for(xt=0,$t=0;$t<P-1;$t++)for(ht[$t]=xt,_t=0;_t<1<<K[$t];_t++)at[xt++]=$t;for(at[xt-1]=$t,rt=0,$t=0;$t<16;$t++)for(gt[$t]=rt,_t=0;_t<1<<V[$t];_t++)lt[rt++]=$t;for(rt>>=7;$t<D;$t++)for(gt[$t]=rt<<7,_t=0;_t<1<<V[$t]-7;_t++)lt[256+rt++]=$t;for(bt=0;bt<=Z;bt++)ft[bt]=0;for(_t=0;_t<=143;)ot[2*_t+1]=8,_t++,ft[8]++;for(;_t<=255;)ot[2*_t+1]=9,_t++,ft[9]++;for(;_t<=279;)ot[2*_t+1]=7,_t++,ft[7]++;for(;_t<=287;)ot[2*_t+1]=8,_t++,ft[8]++;for(Ct(ot,$+1,ft),_t=0;_t<D;_t++)it[2*_t+1]=5,it[2*_t]=kt(_t,5);et=new dt(ot,K,F+1,$,Z),ut=new dt(it,V,0,D,Z),Et=new dt(new Array(0),tt,0,U,H)}(),nt=!0),ct.l_desc=new yt(ct.dyn_ltree,et),ct.d_desc=new yt(ct.dyn_dtree,ut),ct.bl_desc=new yt(ct.bl_tree,Et),ct.bi_buf=0,ct.bi_valid=0,Ut(ct)},trees._tr_stored_block=Mt,trees._tr_flush_block=function(ct,_t,bt,xt){var $t,rt,ft=0;ct.level>0?(ct.strm.data_type===2&&(ct.strm.data_type=function(wt){var vt,Gt=4093624447;for(vt=0;vt<=31;vt++,Gt>>>=1)if(1&Gt&&wt.dyn_ltree[2*vt]!==0)return m;if(wt.dyn_ltree[18]!==0||wt.dyn_ltree[20]!==0||wt.dyn_ltree[26]!==0)return g;for(vt=32;vt<F;vt++)if(wt.dyn_ltree[2*vt]!==0)return g;return m}(ct)),Ht(ct,ct.l_desc),Ht(ct,ct.d_desc),ft=function(wt){var vt;for(Wt(wt,wt.dyn_ltree,wt.l_desc.max_code),Wt(wt,wt.dyn_dtree,wt.d_desc.max_code),Ht(wt,wt.bl_desc),vt=U-1;vt>=3&&wt.bl_tree[2*X[vt]+1]===0;vt--);return wt.opt_len+=3*(vt+1)+5+5+4,vt}(ct),$t=ct.opt_len+3+7>>>3,(rt=ct.static_len+3+7>>>3)<=$t&&($t=rt)):$t=rt=bt+5,bt+4<=$t&&_t!==-1?Mt(ct,_t,bt,xt):ct.strategy===4||rt===$t?(St(ct,2+(xt?1:0),3),Lt(ct,ot,it)):(St(ct,4+(xt?1:0),3),function(wt,vt,Gt,Qt){var ae;for(St(wt,vt-257,5),St(wt,Gt-1,5),St(wt,Qt-4,4),ae=0;ae<Qt;ae++)St(wt,wt.bl_tree[2*X[ae]+1],3);Pt(wt,wt.dyn_ltree,vt-1),Pt(wt,wt.dyn_dtree,Gt-1)}(ct,ct.l_desc.max_code+1,ct.d_desc.max_code+1,ft+1),Lt(ct,ct.dyn_ltree,ct.dyn_dtree)),Ut(ct),xt&&Dt(ct)},trees._tr_tally=function(ct,_t,bt){return ct.pending_buf[ct.d_buf+2*ct.last_lit]=_t>>>8&255,ct.pending_buf[ct.d_buf+2*ct.last_lit+1]=255&_t,ct.pending_buf[ct.l_buf+ct.last_lit]=255&bt,ct.last_lit++,_t===0?ct.dyn_ltree[2*bt]++:(ct.matches++,_t--,ct.dyn_ltree[2*(at[bt]+F+1)]++,ct.dyn_dtree[2*Nt(_t)]++),ct.last_lit===ct.lit_bufsize-1},trees._tr_align=function(ct){St(ct,2,3),zt(ct,q,ot),function(_t){_t.bi_valid===16?(Bt(_t,_t.bi_buf),_t.bi_buf=0,_t.bi_valid=0):_t.bi_valid>=8&&(_t.pending_buf[_t.pending++]=255&_t.bi_buf,_t.bi_buf>>=8,_t.bi_valid-=8)}(ct)},trees}function requireAdler32(){return hasRequiredAdler32||(hasRequiredAdler32=1,adler32_1=function(d,m,g,w){for(var I=65535&d,P=d>>>16&65535,F=0;g!==0;){g-=F=g>2e3?2e3:g;do P=P+(I=I+m[w++]|0)|0;while(--F);I%=65521,P%=65521}return I|P<<16}),adler32_1}function requireCrc32(){if(hasRequiredCrc32)return crc32_1;hasRequiredCrc32=1;var d=function(){for(var m,g=[],w=0;w<256;w++){m=w;for(var I=0;I<8;I++)m=1&m?3988292384^m>>>1:m>>>1;g[w]=m}return g}();return crc32_1=function(m,g,w,I){var P=d,F=I+w;m^=-1;for(var $=I;$<F;$++)m=m>>>8^P[255&(m^g[$])];return~m},crc32_1}function requireMessages(){return hasRequiredMessages?messages:(hasRequiredMessages=1,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"})}function requireDeflate$1(){if(hasRequiredDeflate$1)return deflate;hasRequiredDeflate$1=1;var d,m=requireCommon(),g=requireTrees(),w=requireAdler32(),I=requireCrc32(),P=requireMessages(),F=0,$=4,D=0,U=-2,j=-1,Z=4,G=2,H=8,q=9,W=286,Q=30,J=19,K=2*W+1,V=15,tt=3,X=258,ot=X+tt+1,it=42,lt=103,at=113,ht=666,et=1,ut=2,Et=3,gt=4;function dt(nt,Mt){return nt.msg=P[Mt],Mt}function yt(nt){return(nt<<1)-(nt>4?9:0)}function Nt(nt){for(var Mt=nt.length;--Mt>=0;)nt[Mt]=0}function Bt(nt){var Mt=nt.state,ct=Mt.pending;ct>nt.avail_out&&(ct=nt.avail_out),ct!==0&&(m.arraySet(nt.output,Mt.pending_buf,Mt.pending_out,ct,nt.next_out),nt.next_out+=ct,Mt.pending_out+=ct,nt.total_out+=ct,nt.avail_out-=ct,Mt.pending-=ct,Mt.pending===0&&(Mt.pending_out=0))}function St(nt,Mt){g._tr_flush_block(nt,nt.block_start>=0?nt.block_start:-1,nt.strstart-nt.block_start,Mt),nt.block_start=nt.strstart,Bt(nt.strm)}function zt(nt,Mt){nt.pending_buf[nt.pending++]=Mt}function kt(nt,Mt){nt.pending_buf[nt.pending++]=Mt>>>8&255,nt.pending_buf[nt.pending++]=255&Mt}function Ct(nt,Mt){var ct,_t,bt=nt.max_chain_length,xt=nt.strstart,$t=nt.prev_length,rt=nt.nice_match,ft=nt.strstart>nt.w_size-ot?nt.strstart-(nt.w_size-ot):0,wt=nt.window,vt=nt.w_mask,Gt=nt.prev,Qt=nt.strstart+X,ae=wt[xt+$t-1],se=wt[xt+$t];nt.prev_length>=nt.good_match&&(bt>>=2),rt>nt.lookahead&&(rt=nt.lookahead);do if(wt[(ct=Mt)+$t]===se&&wt[ct+$t-1]===ae&&wt[ct]===wt[xt]&&wt[++ct]===wt[xt+1]){xt+=2,ct++;do;while(wt[++xt]===wt[++ct]&&wt[++xt]===wt[++ct]&&wt[++xt]===wt[++ct]&&wt[++xt]===wt[++ct]&&wt[++xt]===wt[++ct]&&wt[++xt]===wt[++ct]&&wt[++xt]===wt[++ct]&&wt[++xt]===wt[++ct]&&xt<Qt);if(_t=X-(Qt-xt),xt=Qt-X,_t>$t){if(nt.match_start=Mt,$t=_t,_t>=rt)break;ae=wt[xt+$t-1],se=wt[xt+$t]}}while((Mt=Gt[Mt&vt])>ft&&--bt!=0);return $t<=nt.lookahead?$t:nt.lookahead}function Ut(nt){var Mt,ct,_t,bt,xt,$t,rt,ft,wt,vt,Gt=nt.w_size;do{if(bt=nt.window_size-nt.lookahead-nt.strstart,nt.strstart>=Gt+(Gt-ot)){m.arraySet(nt.window,nt.window,Gt,Gt,0),nt.match_start-=Gt,nt.strstart-=Gt,nt.block_start-=Gt,Mt=ct=nt.hash_size;do _t=nt.head[--Mt],nt.head[Mt]=_t>=Gt?_t-Gt:0;while(--ct);Mt=ct=Gt;do _t=nt.prev[--Mt],nt.prev[Mt]=_t>=Gt?_t-Gt:0;while(--ct);bt+=Gt}if(nt.strm.avail_in===0)break;if($t=nt.strm,rt=nt.window,ft=nt.strstart+nt.lookahead,wt=bt,vt=void 0,(vt=$t.avail_in)>wt&&(vt=wt),ct=vt===0?0:($t.avail_in-=vt,m.arraySet(rt,$t.input,$t.next_in,vt,ft),$t.state.wrap===1?$t.adler=w($t.adler,rt,vt,ft):$t.state.wrap===2&&($t.adler=I($t.adler,rt,vt,ft)),$t.next_in+=vt,$t.total_in+=vt,vt),nt.lookahead+=ct,nt.lookahead+nt.insert>=tt)for(xt=nt.strstart-nt.insert,nt.ins_h=nt.window[xt],nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[xt+1])&nt.hash_mask;nt.insert&&(nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[xt+tt-1])&nt.hash_mask,nt.prev[xt&nt.w_mask]=nt.head[nt.ins_h],nt.head[nt.ins_h]=xt,xt++,nt.insert--,!(nt.lookahead+nt.insert<tt)););}while(nt.lookahead<ot&&nt.strm.avail_in!==0)}function Dt(nt,Mt){for(var ct,_t;;){if(nt.lookahead<ot){if(Ut(nt),nt.lookahead<ot&&Mt===F)return et;if(nt.lookahead===0)break}if(ct=0,nt.lookahead>=tt&&(nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[nt.strstart+tt-1])&nt.hash_mask,ct=nt.prev[nt.strstart&nt.w_mask]=nt.head[nt.ins_h],nt.head[nt.ins_h]=nt.strstart),ct!==0&&nt.strstart-ct<=nt.w_size-ot&&(nt.match_length=Ct(nt,ct)),nt.match_length>=tt)if(_t=g._tr_tally(nt,nt.strstart-nt.match_start,nt.match_length-tt),nt.lookahead-=nt.match_length,nt.match_length<=nt.max_lazy_match&&nt.lookahead>=tt){nt.match_length--;do nt.strstart++,nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[nt.strstart+tt-1])&nt.hash_mask,ct=nt.prev[nt.strstart&nt.w_mask]=nt.head[nt.ins_h],nt.head[nt.ins_h]=nt.strstart;while(--nt.match_length!=0);nt.strstart++}else nt.strstart+=nt.match_length,nt.match_length=0,nt.ins_h=nt.window[nt.strstart],nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[nt.strstart+1])&nt.hash_mask;else _t=g._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++;if(_t&&(St(nt,!1),nt.strm.avail_out===0))return et}return nt.insert=nt.strstart<tt-1?nt.strstart:tt-1,Mt===$?(St(nt,!0),nt.strm.avail_out===0?Et:gt):nt.last_lit&&(St(nt,!1),nt.strm.avail_out===0)?et:ut}function Tt(nt,Mt){for(var ct,_t,bt;;){if(nt.lookahead<ot){if(Ut(nt),nt.lookahead<ot&&Mt===F)return et;if(nt.lookahead===0)break}if(ct=0,nt.lookahead>=tt&&(nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[nt.strstart+tt-1])&nt.hash_mask,ct=nt.prev[nt.strstart&nt.w_mask]=nt.head[nt.ins_h],nt.head[nt.ins_h]=nt.strstart),nt.prev_length=nt.match_length,nt.prev_match=nt.match_start,nt.match_length=tt-1,ct!==0&&nt.prev_length<nt.max_lazy_match&&nt.strstart-ct<=nt.w_size-ot&&(nt.match_length=Ct(nt,ct),nt.match_length<=5&&(nt.strategy===1||nt.match_length===tt&&nt.strstart-nt.match_start>4096)&&(nt.match_length=tt-1)),nt.prev_length>=tt&&nt.match_length<=nt.prev_length){bt=nt.strstart+nt.lookahead-tt,_t=g._tr_tally(nt,nt.strstart-1-nt.prev_match,nt.prev_length-tt),nt.lookahead-=nt.prev_length-1,nt.prev_length-=2;do++nt.strstart<=bt&&(nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[nt.strstart+tt-1])&nt.hash_mask,ct=nt.prev[nt.strstart&nt.w_mask]=nt.head[nt.ins_h],nt.head[nt.ins_h]=nt.strstart);while(--nt.prev_length!=0);if(nt.match_available=0,nt.match_length=tt-1,nt.strstart++,_t&&(St(nt,!1),nt.strm.avail_out===0))return et}else if(nt.match_available){if((_t=g._tr_tally(nt,0,nt.window[nt.strstart-1]))&&St(nt,!1),nt.strstart++,nt.lookahead--,nt.strm.avail_out===0)return et}else nt.match_available=1,nt.strstart++,nt.lookahead--}return nt.match_available&&(_t=g._tr_tally(nt,0,nt.window[nt.strstart-1]),nt.match_available=0),nt.insert=nt.strstart<tt-1?nt.strstart:tt-1,Mt===$?(St(nt,!0),nt.strm.avail_out===0?Et:gt):nt.last_lit&&(St(nt,!1),nt.strm.avail_out===0)?et:ut}function Rt(nt,Mt,ct,_t,bt){this.good_length=nt,this.max_lazy=Mt,this.nice_length=ct,this.max_chain=_t,this.func=bt}function Lt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=H,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new m.Buf16(2*K),this.dyn_dtree=new m.Buf16(2*(2*Q+1)),this.bl_tree=new m.Buf16(2*(2*J+1)),Nt(this.dyn_ltree),Nt(this.dyn_dtree),Nt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new m.Buf16(V+1),this.heap=new m.Buf16(2*W+1),Nt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new m.Buf16(2*W+1),Nt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ht(nt){var Mt;return nt&&nt.state?(nt.total_in=nt.total_out=0,nt.data_type=G,(Mt=nt.state).pending=0,Mt.pending_out=0,Mt.wrap<0&&(Mt.wrap=-Mt.wrap),Mt.status=Mt.wrap?it:at,nt.adler=Mt.wrap===2?0:1,Mt.last_flush=F,g._tr_init(Mt),D):dt(nt,U)}function Wt(nt){var Mt=Ht(nt);return Mt===D&&function(ct){ct.window_size=2*ct.w_size,Nt(ct.head),ct.max_lazy_match=d[ct.level].max_lazy,ct.good_match=d[ct.level].good_length,ct.nice_match=d[ct.level].nice_length,ct.max_chain_length=d[ct.level].max_chain,ct.strstart=0,ct.block_start=0,ct.lookahead=0,ct.insert=0,ct.match_length=ct.prev_length=tt-1,ct.match_available=0,ct.ins_h=0}(nt.state),Mt}function Pt(nt,Mt,ct,_t,bt,xt){if(!nt)return U;var $t=1;if(Mt===j&&(Mt=6),_t<0?($t=0,_t=-_t):_t>15&&($t=2,_t-=16),bt<1||bt>q||ct!==H||_t<8||_t>15||Mt<0||Mt>9||xt<0||xt>Z)return dt(nt,U);_t===8&&(_t=9);var rt=new Lt;return nt.state=rt,rt.strm=nt,rt.wrap=$t,rt.gzhead=null,rt.w_bits=_t,rt.w_size=1<<rt.w_bits,rt.w_mask=rt.w_size-1,rt.hash_bits=bt+7,rt.hash_size=1<<rt.hash_bits,rt.hash_mask=rt.hash_size-1,rt.hash_shift=~~((rt.hash_bits+tt-1)/tt),rt.window=new m.Buf8(2*rt.w_size),rt.head=new m.Buf16(rt.hash_size),rt.prev=new m.Buf16(rt.w_size),rt.lit_bufsize=1<<bt+6,rt.pending_buf_size=4*rt.lit_bufsize,rt.pending_buf=new m.Buf8(rt.pending_buf_size),rt.d_buf=1*rt.lit_bufsize,rt.l_buf=3*rt.lit_bufsize,rt.level=Mt,rt.strategy=xt,rt.method=ct,Wt(nt)}return d=[new Rt(0,0,0,0,function(nt,Mt){var ct=65535;for(ct>nt.pending_buf_size-5&&(ct=nt.pending_buf_size-5);;){if(nt.lookahead<=1){if(Ut(nt),nt.lookahead===0&&Mt===F)return et;if(nt.lookahead===0)break}nt.strstart+=nt.lookahead,nt.lookahead=0;var _t=nt.block_start+ct;if((nt.strstart===0||nt.strstart>=_t)&&(nt.lookahead=nt.strstart-_t,nt.strstart=_t,St(nt,!1),nt.strm.avail_out===0)||nt.strstart-nt.block_start>=nt.w_size-ot&&(St(nt,!1),nt.strm.avail_out===0))return et}return nt.insert=0,Mt===$?(St(nt,!0),nt.strm.avail_out===0?Et:gt):(nt.strstart>nt.block_start&&(St(nt,!1),nt.strm.avail_out),et)}),new Rt(4,4,8,4,Dt),new Rt(4,5,16,8,Dt),new Rt(4,6,32,32,Dt),new Rt(4,4,16,16,Tt),new Rt(8,16,32,32,Tt),new Rt(8,16,128,128,Tt),new Rt(8,32,128,256,Tt),new Rt(32,128,258,1024,Tt),new Rt(32,258,258,4096,Tt)],deflate.deflateInit=function(nt,Mt){return Pt(nt,Mt,H,15,8,0)},deflate.deflateInit2=Pt,deflate.deflateReset=Wt,deflate.deflateResetKeep=Ht,deflate.deflateSetHeader=function(nt,Mt){return nt&&nt.state?nt.state.wrap!==2?U:(nt.state.gzhead=Mt,D):U},deflate.deflate=function(nt,Mt){var ct,_t,bt,xt;if(!nt||!nt.state||Mt>5||Mt<0)return nt?dt(nt,U):U;if(_t=nt.state,!nt.output||!nt.input&&nt.avail_in!==0||_t.status===ht&&Mt!==$)return dt(nt,nt.avail_out===0?-5:U);if(_t.strm=nt,ct=_t.last_flush,_t.last_flush=Mt,_t.status===it)if(_t.wrap===2)nt.adler=0,zt(_t,31),zt(_t,139),zt(_t,8),_t.gzhead?(zt(_t,(_t.gzhead.text?1:0)+(_t.gzhead.hcrc?2:0)+(_t.gzhead.extra?4:0)+(_t.gzhead.name?8:0)+(_t.gzhead.comment?16:0)),zt(_t,255&_t.gzhead.time),zt(_t,_t.gzhead.time>>8&255),zt(_t,_t.gzhead.time>>16&255),zt(_t,_t.gzhead.time>>24&255),zt(_t,_t.level===9?2:_t.strategy>=2||_t.level<2?4:0),zt(_t,255&_t.gzhead.os),_t.gzhead.extra&&_t.gzhead.extra.length&&(zt(_t,255&_t.gzhead.extra.length),zt(_t,_t.gzhead.extra.length>>8&255)),_t.gzhead.hcrc&&(nt.adler=I(nt.adler,_t.pending_buf,_t.pending,0)),_t.gzindex=0,_t.status=69):(zt(_t,0),zt(_t,0),zt(_t,0),zt(_t,0),zt(_t,0),zt(_t,_t.level===9?2:_t.strategy>=2||_t.level<2?4:0),zt(_t,3),_t.status=at);else{var $t=H+(_t.w_bits-8<<4)<<8;$t|=(_t.strategy>=2||_t.level<2?0:_t.level<6?1:_t.level===6?2:3)<<6,_t.strstart!==0&&($t|=32),$t+=31-$t%31,_t.status=at,kt(_t,$t),_t.strstart!==0&&(kt(_t,nt.adler>>>16),kt(_t,65535&nt.adler)),nt.adler=1}if(_t.status===69)if(_t.gzhead.extra){for(bt=_t.pending;_t.gzindex<(65535&_t.gzhead.extra.length)&&(_t.pending!==_t.pending_buf_size||(_t.gzhead.hcrc&&_t.pending>bt&&(nt.adler=I(nt.adler,_t.pending_buf,_t.pending-bt,bt)),Bt(nt),bt=_t.pending,_t.pending!==_t.pending_buf_size));)zt(_t,255&_t.gzhead.extra[_t.gzindex]),_t.gzindex++;_t.gzhead.hcrc&&_t.pending>bt&&(nt.adler=I(nt.adler,_t.pending_buf,_t.pending-bt,bt)),_t.gzindex===_t.gzhead.extra.length&&(_t.gzindex=0,_t.status=73)}else _t.status=73;if(_t.status===73)if(_t.gzhead.name){bt=_t.pending;do{if(_t.pending===_t.pending_buf_size&&(_t.gzhead.hcrc&&_t.pending>bt&&(nt.adler=I(nt.adler,_t.pending_buf,_t.pending-bt,bt)),Bt(nt),bt=_t.pending,_t.pending===_t.pending_buf_size)){xt=1;break}xt=_t.gzindex<_t.gzhead.name.length?255&_t.gzhead.name.charCodeAt(_t.gzindex++):0,zt(_t,xt)}while(xt!==0);_t.gzhead.hcrc&&_t.pending>bt&&(nt.adler=I(nt.adler,_t.pending_buf,_t.pending-bt,bt)),xt===0&&(_t.gzindex=0,_t.status=91)}else _t.status=91;if(_t.status===91)if(_t.gzhead.comment){bt=_t.pending;do{if(_t.pending===_t.pending_buf_size&&(_t.gzhead.hcrc&&_t.pending>bt&&(nt.adler=I(nt.adler,_t.pending_buf,_t.pending-bt,bt)),Bt(nt),bt=_t.pending,_t.pending===_t.pending_buf_size)){xt=1;break}xt=_t.gzindex<_t.gzhead.comment.length?255&_t.gzhead.comment.charCodeAt(_t.gzindex++):0,zt(_t,xt)}while(xt!==0);_t.gzhead.hcrc&&_t.pending>bt&&(nt.adler=I(nt.adler,_t.pending_buf,_t.pending-bt,bt)),xt===0&&(_t.status=lt)}else _t.status=lt;if(_t.status===lt&&(_t.gzhead.hcrc?(_t.pending+2>_t.pending_buf_size&&Bt(nt),_t.pending+2<=_t.pending_buf_size&&(zt(_t,255&nt.adler),zt(_t,nt.adler>>8&255),nt.adler=0,_t.status=at)):_t.status=at),_t.pending!==0){if(Bt(nt),nt.avail_out===0)return _t.last_flush=-1,D}else if(nt.avail_in===0&&yt(Mt)<=yt(ct)&&Mt!==$)return dt(nt,-5);if(_t.status===ht&&nt.avail_in!==0)return dt(nt,-5);if(nt.avail_in!==0||_t.lookahead!==0||Mt!==F&&_t.status!==ht){var rt=_t.strategy===2?function(ft,wt){for(var vt;;){if(ft.lookahead===0&&(Ut(ft),ft.lookahead===0)){if(wt===F)return et;break}if(ft.match_length=0,vt=g._tr_tally(ft,0,ft.window[ft.strstart]),ft.lookahead--,ft.strstart++,vt&&(St(ft,!1),ft.strm.avail_out===0))return et}return ft.insert=0,wt===$?(St(ft,!0),ft.strm.avail_out===0?Et:gt):ft.last_lit&&(St(ft,!1),ft.strm.avail_out===0)?et:ut}(_t,Mt):_t.strategy===3?function(ft,wt){for(var vt,Gt,Qt,ae,se=ft.window;;){if(ft.lookahead<=X){if(Ut(ft),ft.lookahead<=X&&wt===F)return et;if(ft.lookahead===0)break}if(ft.match_length=0,ft.lookahead>=tt&&ft.strstart>0&&(Gt=se[Qt=ft.strstart-1])===se[++Qt]&&Gt===se[++Qt]&&Gt===se[++Qt]){ae=ft.strstart+X;do;while(Gt===se[++Qt]&&Gt===se[++Qt]&&Gt===se[++Qt]&&Gt===se[++Qt]&&Gt===se[++Qt]&&Gt===se[++Qt]&&Gt===se[++Qt]&&Gt===se[++Qt]&&Qt<ae);ft.match_length=X-(ae-Qt),ft.match_length>ft.lookahead&&(ft.match_length=ft.lookahead)}if(ft.match_length>=tt?(vt=g._tr_tally(ft,1,ft.match_length-tt),ft.lookahead-=ft.match_length,ft.strstart+=ft.match_length,ft.match_length=0):(vt=g._tr_tally(ft,0,ft.window[ft.strstart]),ft.lookahead--,ft.strstart++),vt&&(St(ft,!1),ft.strm.avail_out===0))return et}return ft.insert=0,wt===$?(St(ft,!0),ft.strm.avail_out===0?Et:gt):ft.last_lit&&(St(ft,!1),ft.strm.avail_out===0)?et:ut}(_t,Mt):d[_t.level].func(_t,Mt);if(rt!==Et&&rt!==gt||(_t.status=ht),rt===et||rt===Et)return nt.avail_out===0&&(_t.last_flush=-1),D;if(rt===ut&&(Mt===1?g._tr_align(_t):Mt!==5&&(g._tr_stored_block(_t,0,0,!1),Mt===3&&(Nt(_t.head),_t.lookahead===0&&(_t.strstart=0,_t.block_start=0,_t.insert=0))),Bt(nt),nt.avail_out===0))return _t.last_flush=-1,D}return Mt!==$?D:_t.wrap<=0?1:(_t.wrap===2?(zt(_t,255&nt.adler),zt(_t,nt.adler>>8&255),zt(_t,nt.adler>>16&255),zt(_t,nt.adler>>24&255),zt(_t,255&nt.total_in),zt(_t,nt.total_in>>8&255),zt(_t,nt.total_in>>16&255),zt(_t,nt.total_in>>24&255)):(kt(_t,nt.adler>>>16),kt(_t,65535&nt.adler)),Bt(nt),_t.wrap>0&&(_t.wrap=-_t.wrap),_t.pending!==0?D:1)},deflate.deflateEnd=function(nt){var Mt;return nt&&nt.state?(Mt=nt.state.status)!==it&&Mt!==69&&Mt!==73&&Mt!==91&&Mt!==lt&&Mt!==at&&Mt!==ht?dt(nt,U):(nt.state=null,Mt===at?dt(nt,-3):D):U},deflate.deflateSetDictionary=function(nt,Mt){var ct,_t,bt,xt,$t,rt,ft,wt,vt=Mt.length;if(!nt||!nt.state||(xt=(ct=nt.state).wrap)===2||xt===1&&ct.status!==it||ct.lookahead)return U;for(xt===1&&(nt.adler=w(nt.adler,Mt,vt,0)),ct.wrap=0,vt>=ct.w_size&&(xt===0&&(Nt(ct.head),ct.strstart=0,ct.block_start=0,ct.insert=0),wt=new m.Buf8(ct.w_size),m.arraySet(wt,Mt,vt-ct.w_size,ct.w_size,0),Mt=wt,vt=ct.w_size),$t=nt.avail_in,rt=nt.next_in,ft=nt.input,nt.avail_in=vt,nt.next_in=0,nt.input=Mt,Ut(ct);ct.lookahead>=tt;){_t=ct.strstart,bt=ct.lookahead-(tt-1);do ct.ins_h=(ct.ins_h<<ct.hash_shift^ct.window[_t+tt-1])&ct.hash_mask,ct.prev[_t&ct.w_mask]=ct.head[ct.ins_h],ct.head[ct.ins_h]=_t,_t++;while(--bt);ct.strstart=_t,ct.lookahead=tt-1,Ut(ct)}return ct.strstart+=ct.lookahead,ct.block_start=ct.strstart,ct.insert=ct.lookahead,ct.lookahead=0,ct.match_length=ct.prev_length=tt-1,ct.match_available=0,nt.next_in=rt,nt.input=ft,nt.avail_in=$t,ct.wrap=xt,D},deflate.deflateInfo="pako deflate (from Nodeca project)",deflate}var strings={},hasRequiredStrings,zstream,hasRequiredZstream,hasRequiredDeflate;function requireStrings(){if(hasRequiredStrings)return strings;hasRequiredStrings=1;var d=requireCommon(),m=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch{m=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{g=!1}for(var w=new d.Buf8(256),I=0;I<256;I++)w[I]=I>=252?6:I>=248?5:I>=240?4:I>=224?3:I>=192?2:1;function P(F,$){if($<65534&&(F.subarray&&g||!F.subarray&&m))return String.fromCharCode.apply(null,d.shrinkBuf(F,$));for(var D="",U=0;U<$;U++)D+=String.fromCharCode(F[U]);return D}return w[254]=w[254]=1,strings.string2buf=function(F){var $,D,U,j,Z,G=F.length,H=0;for(j=0;j<G;j++)(64512&(D=F.charCodeAt(j)))==55296&&j+1<G&&(64512&(U=F.charCodeAt(j+1)))==56320&&(D=65536+(D-55296<<10)+(U-56320),j++),H+=D<128?1:D<2048?2:D<65536?3:4;for($=new d.Buf8(H),Z=0,j=0;Z<H;j++)(64512&(D=F.charCodeAt(j)))==55296&&j+1<G&&(64512&(U=F.charCodeAt(j+1)))==56320&&(D=65536+(D-55296<<10)+(U-56320),j++),D<128?$[Z++]=D:D<2048?($[Z++]=192|D>>>6,$[Z++]=128|63&D):D<65536?($[Z++]=224|D>>>12,$[Z++]=128|D>>>6&63,$[Z++]=128|63&D):($[Z++]=240|D>>>18,$[Z++]=128|D>>>12&63,$[Z++]=128|D>>>6&63,$[Z++]=128|63&D);return $},strings.buf2binstring=function(F){return P(F,F.length)},strings.binstring2buf=function(F){for(var $=new d.Buf8(F.length),D=0,U=$.length;D<U;D++)$[D]=F.charCodeAt(D);return $},strings.buf2string=function(F,$){var D,U,j,Z,G=$||F.length,H=new Array(2*G);for(U=0,D=0;D<G;)if((j=F[D++])<128)H[U++]=j;else if((Z=w[j])>4)H[U++]=65533,D+=Z-1;else{for(j&=Z===2?31:Z===3?15:7;Z>1&&D<G;)j=j<<6|63&F[D++],Z--;Z>1?H[U++]=65533:j<65536?H[U++]=j:(j-=65536,H[U++]=55296|j>>10&1023,H[U++]=56320|1023&j)}return P(H,U)},strings.utf8border=function(F,$){var D;for(($=$||F.length)>F.length&&($=F.length),D=$-1;D>=0&&(192&F[D])==128;)D--;return D<0||D===0?$:D+w[F[D]]>$?D:$},strings}function requireZstream(){return hasRequiredZstream?zstream:(hasRequiredZstream=1,zstream=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0})}function requireDeflate(){if(hasRequiredDeflate)return deflate$1;hasRequiredDeflate=1;var d=requireDeflate$1(),m=requireCommon(),g=requireStrings(),w=requireMessages(),I=requireZstream(),P=Object.prototype.toString,F=0,$=-1,D=0,U=8;function j(G){if(!(this instanceof j))return new j(G);this.options=m.assign({level:$,method:U,chunkSize:16384,windowBits:15,memLevel:8,strategy:D,to:""},G||{});var H=this.options;H.raw&&H.windowBits>0?H.windowBits=-H.windowBits:H.gzip&&H.windowBits>0&&H.windowBits<16&&(H.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new I,this.strm.avail_out=0;var q=d.deflateInit2(this.strm,H.level,H.method,H.windowBits,H.memLevel,H.strategy);if(q!==F)throw new Error(w[q]);if(H.header&&d.deflateSetHeader(this.strm,H.header),H.dictionary){var W;if(W=typeof H.dictionary=="string"?g.string2buf(H.dictionary):P.call(H.dictionary)==="[object ArrayBuffer]"?new Uint8Array(H.dictionary):H.dictionary,(q=d.deflateSetDictionary(this.strm,W))!==F)throw new Error(w[q]);this._dict_set=!0}}function Z(G,H){var q=new j(H);if(q.push(G,!0),q.err)throw q.msg||w[q.err];return q.result}return j.prototype.push=function(G,H){var q,W,Q=this.strm,J=this.options.chunkSize;if(this.ended)return!1;W=H===~~H?H:H===!0?4:0,typeof G=="string"?Q.input=g.string2buf(G):P.call(G)==="[object ArrayBuffer]"?Q.input=new Uint8Array(G):Q.input=G,Q.next_in=0,Q.avail_in=Q.input.length;do{if(Q.avail_out===0&&(Q.output=new m.Buf8(J),Q.next_out=0,Q.avail_out=J),(q=d.deflate(Q,W))!==1&&q!==F)return this.onEnd(q),this.ended=!0,!1;Q.avail_out!==0&&(Q.avail_in!==0||W!==4&&W!==2)||(this.options.to==="string"?this.onData(g.buf2binstring(m.shrinkBuf(Q.output,Q.next_out))):this.onData(m.shrinkBuf(Q.output,Q.next_out)))}while((Q.avail_in>0||Q.avail_out===0)&&q!==1);return W===4?(q=d.deflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===F):W!==2||(this.onEnd(F),Q.avail_out=0,!0)},j.prototype.onData=function(G){this.chunks.push(G)},j.prototype.onEnd=function(G){G===F&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m.flattenChunks(this.chunks)),this.chunks=[],this.err=G,this.msg=this.strm.msg},deflate$1.Deflate=j,deflate$1.deflate=Z,deflate$1.deflateRaw=function(G,H){return(H=H||{}).raw=!0,Z(G,H)},deflate$1.gzip=function(G,H){return(H=H||{}).gzip=!0,Z(G,H)},deflate$1}var inflate$1={},inflate={},inffast,hasRequiredInffast,inftrees,hasRequiredInftrees,hasRequiredInflate$1,constants,hasRequiredConstants,gzheader,hasRequiredGzheader,hasRequiredInflate,pako_1,hasRequiredPako;function requireInffast(){return hasRequiredInffast?inffast:(hasRequiredInffast=1,inffast=function(d,m){var g,w,I,P,F,$,D,U,j,Z,G,H,q,W,Q,J,K,V,tt,X,ot,it,lt,at,ht;g=d.state,w=d.next_in,at=d.input,I=w+(d.avail_in-5),P=d.next_out,ht=d.output,F=P-(m-d.avail_out),$=P+(d.avail_out-257),D=g.dmax,U=g.wsize,j=g.whave,Z=g.wnext,G=g.window,H=g.hold,q=g.bits,W=g.lencode,Q=g.distcode,J=(1<<g.lenbits)-1,K=(1<<g.distbits)-1;t:do{q<15&&(H+=at[w++]<<q,q+=8,H+=at[w++]<<q,q+=8),V=W[H&J];e:for(;;){if(H>>>=tt=V>>>24,q-=tt,(tt=V>>>16&255)===0)ht[P++]=65535&V;else{if(!(16&tt)){if(64&tt){if(32&tt){g.mode=12;break t}d.msg="invalid literal/length code",g.mode=30;break t}V=W[(65535&V)+(H&(1<<tt)-1)];continue e}for(X=65535&V,(tt&=15)&&(q<tt&&(H+=at[w++]<<q,q+=8),X+=H&(1<<tt)-1,H>>>=tt,q-=tt),q<15&&(H+=at[w++]<<q,q+=8,H+=at[w++]<<q,q+=8),V=Q[H&K];;){if(H>>>=tt=V>>>24,q-=tt,16&(tt=V>>>16&255)){if(ot=65535&V,q<(tt&=15)&&(H+=at[w++]<<q,(q+=8)<tt&&(H+=at[w++]<<q,q+=8)),(ot+=H&(1<<tt)-1)>D){d.msg="invalid distance too far back",g.mode=30;break t}if(H>>>=tt,q-=tt,ot>(tt=P-F)){if((tt=ot-tt)>j&&g.sane){d.msg="invalid distance too far back",g.mode=30;break t}if(it=0,lt=G,Z===0){if(it+=U-tt,tt<X){X-=tt;do ht[P++]=G[it++];while(--tt);it=P-ot,lt=ht}}else if(Z<tt){if(it+=U+Z-tt,(tt-=Z)<X){X-=tt;do ht[P++]=G[it++];while(--tt);if(it=0,Z<X){X-=tt=Z;do ht[P++]=G[it++];while(--tt);it=P-ot,lt=ht}}}else if(it+=Z-tt,tt<X){X-=tt;do ht[P++]=G[it++];while(--tt);it=P-ot,lt=ht}for(;X>2;)ht[P++]=lt[it++],ht[P++]=lt[it++],ht[P++]=lt[it++],X-=3;X&&(ht[P++]=lt[it++],X>1&&(ht[P++]=lt[it++]))}else{it=P-ot;do ht[P++]=ht[it++],ht[P++]=ht[it++],ht[P++]=ht[it++],X-=3;while(X>2);X&&(ht[P++]=ht[it++],X>1&&(ht[P++]=ht[it++]))}break}if(64&tt){d.msg="invalid distance code",g.mode=30;break t}V=Q[(65535&V)+(H&(1<<tt)-1)]}}break}}while(w<I&&P<$);w-=X=q>>3,H&=(1<<(q-=X<<3))-1,d.next_in=w,d.next_out=P,d.avail_in=w<I?I-w+5:5-(w-I),d.avail_out=P<$?$-P+257:257-(P-$),g.hold=H,g.bits=q},inffast)}function requireInftrees(){if(hasRequiredInftrees)return inftrees;hasRequiredInftrees=1;var d=requireCommon(),m=15,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],w=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],I=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return inftrees=function(F,$,D,U,j,Z,G,H){var q,W,Q,J,K,V,tt,X,ot,it=H.bits,lt=0,at=0,ht=0,et=0,ut=0,Et=0,gt=0,dt=0,yt=0,Nt=0,Bt=null,St=0,zt=new d.Buf16(16),kt=new d.Buf16(16),Ct=null,Ut=0;for(lt=0;lt<=m;lt++)zt[lt]=0;for(at=0;at<U;at++)zt[$[D+at]]++;for(ut=it,et=m;et>=1&&zt[et]===0;et--);if(ut>et&&(ut=et),et===0)return j[Z++]=20971520,j[Z++]=20971520,H.bits=1,0;for(ht=1;ht<et&&zt[ht]===0;ht++);for(ut<ht&&(ut=ht),dt=1,lt=1;lt<=m;lt++)if(dt<<=1,(dt-=zt[lt])<0)return-1;if(dt>0&&(F===0||et!==1))return-1;for(kt[1]=0,lt=1;lt<m;lt++)kt[lt+1]=kt[lt]+zt[lt];for(at=0;at<U;at++)$[D+at]!==0&&(G[kt[$[D+at]]++]=at);if(F===0?(Bt=Ct=G,V=19):F===1?(Bt=g,St-=257,Ct=w,Ut-=257,V=256):(Bt=I,Ct=P,V=-1),Nt=0,at=0,lt=ht,K=Z,Et=ut,gt=0,Q=-1,J=(yt=1<<ut)-1,F===1&&yt>852||F===2&&yt>592)return 1;for(;;){tt=lt-gt,G[at]<V?(X=0,ot=G[at]):G[at]>V?(X=Ct[Ut+G[at]],ot=Bt[St+G[at]]):(X=96,ot=0),q=1<<lt-gt,ht=W=1<<Et;do j[K+(Nt>>gt)+(W-=q)]=tt<<24|X<<16|ot;while(W!==0);for(q=1<<lt-1;Nt&q;)q>>=1;if(q!==0?(Nt&=q-1,Nt+=q):Nt=0,at++,--zt[lt]==0){if(lt===et)break;lt=$[D+G[at]]}if(lt>ut&&(Nt&J)!==Q){for(gt===0&&(gt=ut),K+=ht,dt=1<<(Et=lt-gt);Et+gt<et&&!((dt-=zt[Et+gt])<=0);)Et++,dt<<=1;if(yt+=1<<Et,F===1&&yt>852||F===2&&yt>592)return 1;j[Q=Nt&J]=ut<<24|Et<<16|K-Z}}return Nt!==0&&(j[K+Nt]=lt-gt<<24|64<<16),H.bits=ut,0}}function requireInflate$1(){if(hasRequiredInflate$1)return inflate;hasRequiredInflate$1=1;var d=requireCommon(),m=requireAdler32(),g=requireCrc32(),w=requireInffast(),I=requireInftrees(),P=1,F=2,$=0,D=-2,U=1,j=12,Z=30,G=852,H=592;function q(at){return(at>>>24&255)+(at>>>8&65280)+((65280&at)<<8)+((255&at)<<24)}function W(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Q(at){var ht;return at&&at.state?(ht=at.state,at.total_in=at.total_out=ht.total=0,at.msg="",ht.wrap&&(at.adler=1&ht.wrap),ht.mode=U,ht.last=0,ht.havedict=0,ht.dmax=32768,ht.head=null,ht.hold=0,ht.bits=0,ht.lencode=ht.lendyn=new d.Buf32(G),ht.distcode=ht.distdyn=new d.Buf32(H),ht.sane=1,ht.back=-1,$):D}function J(at){var ht;return at&&at.state?((ht=at.state).wsize=0,ht.whave=0,ht.wnext=0,Q(at)):D}function K(at,ht){var et,ut;return at&&at.state?(ut=at.state,ht<0?(et=0,ht=-ht):(et=1+(ht>>4),ht<48&&(ht&=15)),ht&&(ht<8||ht>15)?D:(ut.window!==null&&ut.wbits!==ht&&(ut.window=null),ut.wrap=et,ut.wbits=ht,J(at))):D}function V(at,ht){var et,ut;return at?(ut=new W,at.state=ut,ut.window=null,(et=K(at,ht))!==$&&(at.state=null),et):D}var tt,X,ot=!0;function it(at){if(ot){var ht;for(tt=new d.Buf32(512),X=new d.Buf32(32),ht=0;ht<144;)at.lens[ht++]=8;for(;ht<256;)at.lens[ht++]=9;for(;ht<280;)at.lens[ht++]=7;for(;ht<288;)at.lens[ht++]=8;for(I(P,at.lens,0,288,tt,0,at.work,{bits:9}),ht=0;ht<32;)at.lens[ht++]=5;I(F,at.lens,0,32,X,0,at.work,{bits:5}),ot=!1}at.lencode=tt,at.lenbits=9,at.distcode=X,at.distbits=5}function lt(at,ht,et,ut){var Et,gt=at.state;return gt.window===null&&(gt.wsize=1<<gt.wbits,gt.wnext=0,gt.whave=0,gt.window=new d.Buf8(gt.wsize)),ut>=gt.wsize?(d.arraySet(gt.window,ht,et-gt.wsize,gt.wsize,0),gt.wnext=0,gt.whave=gt.wsize):((Et=gt.wsize-gt.wnext)>ut&&(Et=ut),d.arraySet(gt.window,ht,et-ut,Et,gt.wnext),(ut-=Et)?(d.arraySet(gt.window,ht,et-ut,ut,0),gt.wnext=ut,gt.whave=gt.wsize):(gt.wnext+=Et,gt.wnext===gt.wsize&&(gt.wnext=0),gt.whave<gt.wsize&&(gt.whave+=Et))),0}return inflate.inflateReset=J,inflate.inflateReset2=K,inflate.inflateResetKeep=Q,inflate.inflateInit=function(at){return V(at,15)},inflate.inflateInit2=V,inflate.inflate=function(at,ht){var et,ut,Et,gt,dt,yt,Nt,Bt,St,zt,kt,Ct,Ut,Dt,Tt,Rt,Lt,Ht,Wt,Pt,nt,Mt,ct,_t,bt=0,xt=new d.Buf8(4),$t=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!at||!at.state||!at.output||!at.input&&at.avail_in!==0)return D;(et=at.state).mode===j&&(et.mode=13),dt=at.next_out,Et=at.output,Nt=at.avail_out,gt=at.next_in,ut=at.input,yt=at.avail_in,Bt=et.hold,St=et.bits,zt=yt,kt=Nt,Mt=$;t:for(;;)switch(et.mode){case U:if(et.wrap===0){et.mode=13;break}for(;St<16;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}if(2&et.wrap&&Bt===35615){et.check=0,xt[0]=255&Bt,xt[1]=Bt>>>8&255,et.check=g(et.check,xt,2,0),Bt=0,St=0,et.mode=2;break}if(et.flags=0,et.head&&(et.head.done=!1),!(1&et.wrap)||(((255&Bt)<<8)+(Bt>>8))%31){at.msg="incorrect header check",et.mode=Z;break}if((15&Bt)!=8){at.msg="unknown compression method",et.mode=Z;break}if(St-=4,nt=8+(15&(Bt>>>=4)),et.wbits===0)et.wbits=nt;else if(nt>et.wbits){at.msg="invalid window size",et.mode=Z;break}et.dmax=1<<nt,at.adler=et.check=1,et.mode=512&Bt?10:j,Bt=0,St=0;break;case 2:for(;St<16;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}if(et.flags=Bt,(255&et.flags)!=8){at.msg="unknown compression method",et.mode=Z;break}if(57344&et.flags){at.msg="unknown header flags set",et.mode=Z;break}et.head&&(et.head.text=Bt>>8&1),512&et.flags&&(xt[0]=255&Bt,xt[1]=Bt>>>8&255,et.check=g(et.check,xt,2,0)),Bt=0,St=0,et.mode=3;case 3:for(;St<32;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}et.head&&(et.head.time=Bt),512&et.flags&&(xt[0]=255&Bt,xt[1]=Bt>>>8&255,xt[2]=Bt>>>16&255,xt[3]=Bt>>>24&255,et.check=g(et.check,xt,4,0)),Bt=0,St=0,et.mode=4;case 4:for(;St<16;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}et.head&&(et.head.xflags=255&Bt,et.head.os=Bt>>8),512&et.flags&&(xt[0]=255&Bt,xt[1]=Bt>>>8&255,et.check=g(et.check,xt,2,0)),Bt=0,St=0,et.mode=5;case 5:if(1024&et.flags){for(;St<16;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}et.length=Bt,et.head&&(et.head.extra_len=Bt),512&et.flags&&(xt[0]=255&Bt,xt[1]=Bt>>>8&255,et.check=g(et.check,xt,2,0)),Bt=0,St=0}else et.head&&(et.head.extra=null);et.mode=6;case 6:if(1024&et.flags&&((Ct=et.length)>yt&&(Ct=yt),Ct&&(et.head&&(nt=et.head.extra_len-et.length,et.head.extra||(et.head.extra=new Array(et.head.extra_len)),d.arraySet(et.head.extra,ut,gt,Ct,nt)),512&et.flags&&(et.check=g(et.check,ut,Ct,gt)),yt-=Ct,gt+=Ct,et.length-=Ct),et.length))break t;et.length=0,et.mode=7;case 7:if(2048&et.flags){if(yt===0)break t;Ct=0;do nt=ut[gt+Ct++],et.head&&nt&&et.length<65536&&(et.head.name+=String.fromCharCode(nt));while(nt&&Ct<yt);if(512&et.flags&&(et.check=g(et.check,ut,Ct,gt)),yt-=Ct,gt+=Ct,nt)break t}else et.head&&(et.head.name=null);et.length=0,et.mode=8;case 8:if(4096&et.flags){if(yt===0)break t;Ct=0;do nt=ut[gt+Ct++],et.head&&nt&&et.length<65536&&(et.head.comment+=String.fromCharCode(nt));while(nt&&Ct<yt);if(512&et.flags&&(et.check=g(et.check,ut,Ct,gt)),yt-=Ct,gt+=Ct,nt)break t}else et.head&&(et.head.comment=null);et.mode=9;case 9:if(512&et.flags){for(;St<16;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}if(Bt!==(65535&et.check)){at.msg="header crc mismatch",et.mode=Z;break}Bt=0,St=0}et.head&&(et.head.hcrc=et.flags>>9&1,et.head.done=!0),at.adler=et.check=0,et.mode=j;break;case 10:for(;St<32;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}at.adler=et.check=q(Bt),Bt=0,St=0,et.mode=11;case 11:if(et.havedict===0)return at.next_out=dt,at.avail_out=Nt,at.next_in=gt,at.avail_in=yt,et.hold=Bt,et.bits=St,2;at.adler=et.check=1,et.mode=j;case j:if(ht===5||ht===6)break t;case 13:if(et.last){Bt>>>=7&St,St-=7&St,et.mode=27;break}for(;St<3;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}switch(et.last=1&Bt,St-=1,3&(Bt>>>=1)){case 0:et.mode=14;break;case 1:if(it(et),et.mode=20,ht===6){Bt>>>=2,St-=2;break t}break;case 2:et.mode=17;break;case 3:at.msg="invalid block type",et.mode=Z}Bt>>>=2,St-=2;break;case 14:for(Bt>>>=7&St,St-=7&St;St<32;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}if((65535&Bt)!=(Bt>>>16^65535)){at.msg="invalid stored block lengths",et.mode=Z;break}if(et.length=65535&Bt,Bt=0,St=0,et.mode=15,ht===6)break t;case 15:et.mode=16;case 16:if(Ct=et.length){if(Ct>yt&&(Ct=yt),Ct>Nt&&(Ct=Nt),Ct===0)break t;d.arraySet(Et,ut,gt,Ct,dt),yt-=Ct,gt+=Ct,Nt-=Ct,dt+=Ct,et.length-=Ct;break}et.mode=j;break;case 17:for(;St<14;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}if(et.nlen=257+(31&Bt),Bt>>>=5,St-=5,et.ndist=1+(31&Bt),Bt>>>=5,St-=5,et.ncode=4+(15&Bt),Bt>>>=4,St-=4,et.nlen>286||et.ndist>30){at.msg="too many length or distance symbols",et.mode=Z;break}et.have=0,et.mode=18;case 18:for(;et.have<et.ncode;){for(;St<3;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}et.lens[$t[et.have++]]=7&Bt,Bt>>>=3,St-=3}for(;et.have<19;)et.lens[$t[et.have++]]=0;if(et.lencode=et.lendyn,et.lenbits=7,ct={bits:et.lenbits},Mt=I(0,et.lens,0,19,et.lencode,0,et.work,ct),et.lenbits=ct.bits,Mt){at.msg="invalid code lengths set",et.mode=Z;break}et.have=0,et.mode=19;case 19:for(;et.have<et.nlen+et.ndist;){for(;Rt=(bt=et.lencode[Bt&(1<<et.lenbits)-1])>>>16&255,Lt=65535&bt,!((Tt=bt>>>24)<=St);){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}if(Lt<16)Bt>>>=Tt,St-=Tt,et.lens[et.have++]=Lt;else{if(Lt===16){for(_t=Tt+2;St<_t;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}if(Bt>>>=Tt,St-=Tt,et.have===0){at.msg="invalid bit length repeat",et.mode=Z;break}nt=et.lens[et.have-1],Ct=3+(3&Bt),Bt>>>=2,St-=2}else if(Lt===17){for(_t=Tt+3;St<_t;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}St-=Tt,nt=0,Ct=3+(7&(Bt>>>=Tt)),Bt>>>=3,St-=3}else{for(_t=Tt+7;St<_t;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}St-=Tt,nt=0,Ct=11+(127&(Bt>>>=Tt)),Bt>>>=7,St-=7}if(et.have+Ct>et.nlen+et.ndist){at.msg="invalid bit length repeat",et.mode=Z;break}for(;Ct--;)et.lens[et.have++]=nt}}if(et.mode===Z)break;if(et.lens[256]===0){at.msg="invalid code -- missing end-of-block",et.mode=Z;break}if(et.lenbits=9,ct={bits:et.lenbits},Mt=I(P,et.lens,0,et.nlen,et.lencode,0,et.work,ct),et.lenbits=ct.bits,Mt){at.msg="invalid literal/lengths set",et.mode=Z;break}if(et.distbits=6,et.distcode=et.distdyn,ct={bits:et.distbits},Mt=I(F,et.lens,et.nlen,et.ndist,et.distcode,0,et.work,ct),et.distbits=ct.bits,Mt){at.msg="invalid distances set",et.mode=Z;break}if(et.mode=20,ht===6)break t;case 20:et.mode=21;case 21:if(yt>=6&&Nt>=258){at.next_out=dt,at.avail_out=Nt,at.next_in=gt,at.avail_in=yt,et.hold=Bt,et.bits=St,w(at,kt),dt=at.next_out,Et=at.output,Nt=at.avail_out,gt=at.next_in,ut=at.input,yt=at.avail_in,Bt=et.hold,St=et.bits,et.mode===j&&(et.back=-1);break}for(et.back=0;Rt=(bt=et.lencode[Bt&(1<<et.lenbits)-1])>>>16&255,Lt=65535&bt,!((Tt=bt>>>24)<=St);){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}if(Rt&&!(240&Rt)){for(Ht=Tt,Wt=Rt,Pt=Lt;Rt=(bt=et.lencode[Pt+((Bt&(1<<Ht+Wt)-1)>>Ht)])>>>16&255,Lt=65535&bt,!(Ht+(Tt=bt>>>24)<=St);){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}Bt>>>=Ht,St-=Ht,et.back+=Ht}if(Bt>>>=Tt,St-=Tt,et.back+=Tt,et.length=Lt,Rt===0){et.mode=26;break}if(32&Rt){et.back=-1,et.mode=j;break}if(64&Rt){at.msg="invalid literal/length code",et.mode=Z;break}et.extra=15&Rt,et.mode=22;case 22:if(et.extra){for(_t=et.extra;St<_t;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}et.length+=Bt&(1<<et.extra)-1,Bt>>>=et.extra,St-=et.extra,et.back+=et.extra}et.was=et.length,et.mode=23;case 23:for(;Rt=(bt=et.distcode[Bt&(1<<et.distbits)-1])>>>16&255,Lt=65535&bt,!((Tt=bt>>>24)<=St);){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}if(!(240&Rt)){for(Ht=Tt,Wt=Rt,Pt=Lt;Rt=(bt=et.distcode[Pt+((Bt&(1<<Ht+Wt)-1)>>Ht)])>>>16&255,Lt=65535&bt,!(Ht+(Tt=bt>>>24)<=St);){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}Bt>>>=Ht,St-=Ht,et.back+=Ht}if(Bt>>>=Tt,St-=Tt,et.back+=Tt,64&Rt){at.msg="invalid distance code",et.mode=Z;break}et.offset=Lt,et.extra=15&Rt,et.mode=24;case 24:if(et.extra){for(_t=et.extra;St<_t;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}et.offset+=Bt&(1<<et.extra)-1,Bt>>>=et.extra,St-=et.extra,et.back+=et.extra}if(et.offset>et.dmax){at.msg="invalid distance too far back",et.mode=Z;break}et.mode=25;case 25:if(Nt===0)break t;if(Ct=kt-Nt,et.offset>Ct){if((Ct=et.offset-Ct)>et.whave&&et.sane){at.msg="invalid distance too far back",et.mode=Z;break}Ct>et.wnext?(Ct-=et.wnext,Ut=et.wsize-Ct):Ut=et.wnext-Ct,Ct>et.length&&(Ct=et.length),Dt=et.window}else Dt=Et,Ut=dt-et.offset,Ct=et.length;Ct>Nt&&(Ct=Nt),Nt-=Ct,et.length-=Ct;do Et[dt++]=Dt[Ut++];while(--Ct);et.length===0&&(et.mode=21);break;case 26:if(Nt===0)break t;Et[dt++]=et.length,Nt--,et.mode=21;break;case 27:if(et.wrap){for(;St<32;){if(yt===0)break t;yt--,Bt|=ut[gt++]<<St,St+=8}if(kt-=Nt,at.total_out+=kt,et.total+=kt,kt&&(at.adler=et.check=et.flags?g(et.check,Et,kt,dt-kt):m(et.check,Et,kt,dt-kt)),kt=Nt,(et.flags?Bt:q(Bt))!==et.check){at.msg="incorrect data check",et.mode=Z;break}Bt=0,St=0}et.mode=28;case 28:if(et.wrap&&et.flags){for(;St<32;){if(yt===0)break t;yt--,Bt+=ut[gt++]<<St,St+=8}if(Bt!==(4294967295&et.total)){at.msg="incorrect length check",et.mode=Z;break}Bt=0,St=0}et.mode=29;case 29:Mt=1;break t;case Z:Mt=-3;break t;case 31:return-4;default:return D}return at.next_out=dt,at.avail_out=Nt,at.next_in=gt,at.avail_in=yt,et.hold=Bt,et.bits=St,(et.wsize||kt!==at.avail_out&&et.mode<Z&&(et.mode<27||ht!==4))&&lt(at,at.output,at.next_out,kt-at.avail_out),zt-=at.avail_in,kt-=at.avail_out,at.total_in+=zt,at.total_out+=kt,et.total+=kt,et.wrap&&kt&&(at.adler=et.check=et.flags?g(et.check,Et,kt,at.next_out-kt):m(et.check,Et,kt,at.next_out-kt)),at.data_type=et.bits+(et.last?64:0)+(et.mode===j?128:0)+(et.mode===20||et.mode===15?256:0),(zt===0&&kt===0||ht===4)&&Mt===$&&(Mt=-5),Mt},inflate.inflateEnd=function(at){if(!at||!at.state)return D;var ht=at.state;return ht.window&&(ht.window=null),at.state=null,$},inflate.inflateGetHeader=function(at,ht){var et;return at&&at.state&&2&(et=at.state).wrap?(et.head=ht,ht.done=!1,$):D},inflate.inflateSetDictionary=function(at,ht){var et,ut=ht.length;return at&&at.state?(et=at.state).wrap!==0&&et.mode!==11?D:et.mode===11&&m(1,ht,ut,0)!==et.check?-3:lt(at,ht,ut,ut)?(et.mode=31,-4):(et.havedict=1,$):D},inflate.inflateInfo="pako inflate (from Nodeca project)",inflate}function requireConstants(){return hasRequiredConstants?constants:(hasRequiredConstants=1,constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8})}function requireGzheader(){return hasRequiredGzheader?gzheader:(hasRequiredGzheader=1,gzheader=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1})}function requireInflate(){if(hasRequiredInflate)return inflate$1;hasRequiredInflate=1;var d=requireInflate$1(),m=requireCommon(),g=requireStrings(),w=requireConstants(),I=requireMessages(),P=requireZstream(),F=requireGzheader(),$=Object.prototype.toString;function D(j){if(!(this instanceof D))return new D(j);this.options=m.assign({chunkSize:16384,windowBits:0,to:""},j||{});var Z=this.options;Z.raw&&Z.windowBits>=0&&Z.windowBits<16&&(Z.windowBits=-Z.windowBits,Z.windowBits===0&&(Z.windowBits=-15)),!(Z.windowBits>=0&&Z.windowBits<16)||j&&j.windowBits||(Z.windowBits+=32),Z.windowBits>15&&Z.windowBits<48&&(15&Z.windowBits||(Z.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new P,this.strm.avail_out=0;var G=d.inflateInit2(this.strm,Z.windowBits);if(G!==w.Z_OK)throw new Error(I[G]);if(this.header=new F,d.inflateGetHeader(this.strm,this.header),Z.dictionary&&(typeof Z.dictionary=="string"?Z.dictionary=g.string2buf(Z.dictionary):$.call(Z.dictionary)==="[object ArrayBuffer]"&&(Z.dictionary=new Uint8Array(Z.dictionary)),Z.raw&&(G=d.inflateSetDictionary(this.strm,Z.dictionary))!==w.Z_OK))throw new Error(I[G])}function U(j,Z){var G=new D(Z);if(G.push(j,!0),G.err)throw G.msg||I[G.err];return G.result}return D.prototype.push=function(j,Z){var G,H,q,W,Q,J=this.strm,K=this.options.chunkSize,V=this.options.dictionary,tt=!1;if(this.ended)return!1;H=Z===~~Z?Z:Z===!0?w.Z_FINISH:w.Z_NO_FLUSH,typeof j=="string"?J.input=g.binstring2buf(j):$.call(j)==="[object ArrayBuffer]"?J.input=new Uint8Array(j):J.input=j,J.next_in=0,J.avail_in=J.input.length;do{if(J.avail_out===0&&(J.output=new m.Buf8(K),J.next_out=0,J.avail_out=K),(G=d.inflate(J,w.Z_NO_FLUSH))===w.Z_NEED_DICT&&V&&(G=d.inflateSetDictionary(this.strm,V)),G===w.Z_BUF_ERROR&&tt===!0&&(G=w.Z_OK,tt=!1),G!==w.Z_STREAM_END&&G!==w.Z_OK)return this.onEnd(G),this.ended=!0,!1;J.next_out&&(J.avail_out!==0&&G!==w.Z_STREAM_END&&(J.avail_in!==0||H!==w.Z_FINISH&&H!==w.Z_SYNC_FLUSH)||(this.options.to==="string"?(q=g.utf8border(J.output,J.next_out),W=J.next_out-q,Q=g.buf2string(J.output,q),J.next_out=W,J.avail_out=K-W,W&&m.arraySet(J.output,J.output,q,W,0),this.onData(Q)):this.onData(m.shrinkBuf(J.output,J.next_out)))),J.avail_in===0&&J.avail_out===0&&(tt=!0)}while((J.avail_in>0||J.avail_out===0)&&G!==w.Z_STREAM_END);return G===w.Z_STREAM_END&&(H=w.Z_FINISH),H===w.Z_FINISH?(G=d.inflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===w.Z_OK):H!==w.Z_SYNC_FLUSH||(this.onEnd(w.Z_OK),J.avail_out=0,!0)},D.prototype.onData=function(j){this.chunks.push(j)},D.prototype.onEnd=function(j){j===w.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m.flattenChunks(this.chunks)),this.chunks=[],this.err=j,this.msg=this.strm.msg},inflate$1.Inflate=D,inflate$1.inflate=U,inflate$1.inflateRaw=function(j,Z){return(Z=Z||{}).raw=!0,U(j,Z)},inflate$1.ungzip=U,inflate$1}function requirePako(){if(hasRequiredPako)return pako_1;hasRequiredPako=1;var d={};return(0,requireCommon().assign)(d,requireDeflate(),requireInflate(),requireConstants()),pako_1=d}(function(d){(function(){var m={};function g(){typeof process<"u"||console.log.apply(console,arguments)}d.exports=m,function(w,I){(function(){var P=function(){function D(U){this.message="JPEG error: "+U}return D.prototype=new Error,D.prototype.name="JpegError",D.constructor=D,D}(),F=function(){var D=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),U=4017,j=799,Z=3406,G=2276,H=1567,q=3784,W=5793,Q=2896;function J(lt){lt==null&&(lt={}),lt.w==null&&(lt.w=-1),this.V=lt.n,this.N=lt.w}function K(lt,at){for(var ht,et,ut,Et=0,gt=[],dt=16;dt>0&&!lt[dt-1];)dt--;gt.push({children:[],index:0});var yt=gt[0];for(ht=0;ht<dt;ht++){for(et=0;et<lt[ht];et++){for((yt=gt.pop()).children[yt.index]=at[Et];yt.index>0;)yt=gt.pop();for(yt.index++,gt.push(yt);gt.length<=ht;)gt.push(ut={children:[],index:0}),yt.children[yt.index]=ut.children,yt=ut;Et++}ht+1<dt&&(gt.push(ut={children:[],index:0}),yt.children[yt.index]=ut.children,yt=ut)}return gt[0].children}function V(lt,at,ht){return 64*((lt.P+1)*at+ht)}function tt(lt,at,ht,et,ut,Et,gt,dt,yt,Nt){Nt==null&&(Nt=!1);var Bt,St,zt,kt,Ct,Ut,Dt,Tt,Rt,Lt,Ht,Wt=ht.m,Pt=ht.Z,nt=at,Mt=0,ct=0,_t=0,bt=0,xt=0,$t=0;function rt(){if(ct>0)return ct--,Mt>>ct&1;if((Mt=lt[at++])===255){var ie=lt[at++];if(ie){if(ie===220&&Nt){var At=$(lt,at+=2);if(at+=2,At>0&&At!==ht.s)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",At)}else if(ie===217){if(Nt){var st=8*xt;if(st>0&&st<ht.s/10)throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",st)}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data")}throw new P("unexpected marker")}}return ct=7,Mt>>>7}function ft(ie){for(var At=ie;;){switch(typeof(At=At[rt()])){case"number":return At;case"object":continue}throw new P("invalid huffman sequence")}}function wt(ie){for(var At=0;ie>0;)At=At<<1|rt(),ie--;return At}function vt(ie){if(ie===1)return rt()===1?1:-1;var At=wt(ie);return At>=1<<ie-1?At:At+(-1<<ie)+1}function Gt(ie,At,st,mt,Ot){var qt=st%Wt;xt=(st/Wt|0)*ie.A+mt;var Yt=qt*ie.h+Ot;At(ie,V(ie,xt,Yt))}function Qt(ie,At,st){xt=st/ie.P|0;var mt=st%ie.P;At(ie,V(ie,xt,mt))}var ae=et.length;for(Dt=Pt?Et===0?dt===0?function(ie,At){var st=ft(ie.J),mt=st===0?0:vt(st)<<yt;ie.D[At]=ie.Q+=mt}:function(ie,At){ie.D[At]|=rt()<<yt}:dt===0?function(ie,At){if(_t>0)_t--;else for(var st=Et,mt=gt;st<=mt;){var Ot=ft(ie.i),qt=15&Ot,Yt=Ot>>4;if(qt!==0){var Jt=D[st+=Yt];ie.D[At+Jt]=vt(qt)*(1<<yt),st++}else{if(Yt<15){_t=wt(Yt)+(1<<Yt)-1;break}st+=16}}}:function(ie,At){for(var st,mt,Ot=Et,qt=gt,Yt=0;Ot<=qt;){var Jt=At+D[Ot],Ft=ie.D[Jt]<0?-1:1;switch(bt){case 0:if(Yt=(mt=ft(ie.i))>>4,(st=15&mt)==0)Yt<15?(_t=wt(Yt)+(1<<Yt),bt=4):(Yt=16,bt=1);else{if(st!==1)throw new P("invalid ACn encoding");Bt=vt(st),bt=Yt?2:3}continue;case 1:case 2:ie.D[Jt]?ie.D[Jt]+=Ft*(rt()<<yt):--Yt==0&&(bt=bt===2?3:0);break;case 3:ie.D[Jt]?ie.D[Jt]+=Ft*(rt()<<yt):(ie.D[Jt]=Bt<<yt,bt=0);break;case 4:ie.D[Jt]&&(ie.D[Jt]+=Ft*(rt()<<yt))}Ot++}bt===4&&--_t==0&&(bt=0)}:function(ie,At){var st=ft(ie.J),mt=st===0?0:vt(st),Ot=1;for(ie.D[At]=ie.Q+=mt;Ot<64;){var qt=ft(ie.i),Yt=15&qt,Jt=qt>>4;if(Yt!==0){var Ft=D[Ot+=Jt];ie.D[At+Ft]=vt(Yt),Ot++}else{if(Jt<15)break;Ot+=16}}},Rt=ae===1?et[0].P*et[0].c:Wt*ht.R;$t<=Rt;){var se=ut?Math.min(Rt-$t,ut):Rt;if(se>0){for(zt=0;zt<ae;zt++)et[zt].Q=0;if(_t=0,ae===1)for(St=et[0],Ut=0;Ut<se;Ut++)Qt(St,Dt,$t),$t++;else for(Ut=0;Ut<se;Ut++){for(zt=0;zt<ae;zt++)for(Lt=(St=et[zt]).h,Ht=St.A,kt=0;kt<Ht;kt++)for(Ct=0;Ct<Lt;Ct++)Gt(St,Dt,$t,kt,Ct);$t++}}if(ct=0,!(Tt=it(lt,at))||(Tt.u&&(at=Tt.offset),!(Tt.M>=65488&&Tt.M<=65495)))break;at+=2}return at-nt}function X(lt,at,ht){var et,ut,Et,gt,dt,yt,Nt,Bt,St,zt,kt,Ct,Ut,Dt,Tt,Rt,Lt,Ht=lt.$,Wt=lt.D;if(!Ht)throw new P("missing required Quantization Table.");for(var Pt=0;Pt<64;Pt+=8)St=Wt[at+Pt],zt=Wt[at+Pt+1],kt=Wt[at+Pt+2],Ct=Wt[at+Pt+3],Ut=Wt[at+Pt+4],Dt=Wt[at+Pt+5],Tt=Wt[at+Pt+6],Rt=Wt[at+Pt+7],St*=Ht[Pt],zt|kt|Ct|Ut|Dt|Tt|Rt?(zt*=Ht[Pt+1],kt*=Ht[Pt+2],Ct*=Ht[Pt+3],Ut*=Ht[Pt+4],Dt*=Ht[Pt+5],Tt*=Ht[Pt+6],Rt*=Ht[Pt+7],ut=(et=(et=W*St+128>>8)+(ut=W*Ut+128>>8)+1>>1)-ut,Lt=(Et=kt)*q+(gt=Tt)*H+128>>8,Et=Et*H-gt*q+128>>8,Nt=(dt=(dt=Q*(zt-Rt)+128>>8)+(Nt=Dt<<4)+1>>1)-Nt,yt=(Bt=(Bt=Q*(zt+Rt)+128>>8)+(yt=Ct<<4)+1>>1)-yt,gt=(et=et+(gt=Lt)+1>>1)-gt,Et=(ut=ut+Et+1>>1)-Et,Lt=dt*G+Bt*Z+2048>>12,dt=dt*Z-Bt*G+2048>>12,Bt=Lt,Lt=yt*j+Nt*U+2048>>12,yt=yt*U-Nt*j+2048>>12,Nt=Lt,ht[Pt]=et+Bt,ht[Pt+7]=et-Bt,ht[Pt+1]=ut+Nt,ht[Pt+6]=ut-Nt,ht[Pt+2]=Et+yt,ht[Pt+5]=Et-yt,ht[Pt+3]=gt+dt,ht[Pt+4]=gt-dt):(Lt=W*St+512>>10,ht[Pt]=Lt,ht[Pt+1]=Lt,ht[Pt+2]=Lt,ht[Pt+3]=Lt,ht[Pt+4]=Lt,ht[Pt+5]=Lt,ht[Pt+6]=Lt,ht[Pt+7]=Lt);for(var nt=0;nt<8;++nt)St=ht[nt],(zt=ht[nt+8])|(kt=ht[nt+16])|(Ct=ht[nt+24])|(Ut=ht[nt+32])|(Dt=ht[nt+40])|(Tt=ht[nt+48])|(Rt=ht[nt+56])?(ut=(et=4112+((et=W*St+2048>>12)+(ut=W*Ut+2048>>12)+1>>1))-ut,Lt=(Et=kt)*q+(gt=Tt)*H+2048>>12,Et=Et*H-gt*q+2048>>12,gt=Lt,Nt=(dt=(dt=Q*(zt-Rt)+2048>>12)+(Nt=Dt)+1>>1)-Nt,yt=(Bt=(Bt=Q*(zt+Rt)+2048>>12)+(yt=Ct)+1>>1)-yt,Lt=dt*G+Bt*Z+2048>>12,dt=dt*Z-Bt*G+2048>>12,Bt=Lt,Lt=yt*j+Nt*U+2048>>12,yt=yt*U-Nt*j+2048>>12,(St=(et=et+gt+1>>1)+Bt)<16?St=0:St>=4080?St=255:St>>=4,(zt=(ut=ut+Et+1>>1)+(Nt=Lt))<16?zt=0:zt>=4080?zt=255:zt>>=4,(kt=(Et=ut-Et)+yt)<16?kt=0:kt>=4080?kt=255:kt>>=4,(Ct=(gt=et-gt)+dt)<16?Ct=0:Ct>=4080?Ct=255:Ct>>=4,(Ut=gt-dt)<16?Ut=0:Ut>=4080?Ut=255:Ut>>=4,(Dt=Et-yt)<16?Dt=0:Dt>=4080?Dt=255:Dt>>=4,(Tt=ut-Nt)<16?Tt=0:Tt>=4080?Tt=255:Tt>>=4,(Rt=et-Bt)<16?Rt=0:Rt>=4080?Rt=255:Rt>>=4,Wt[at+nt]=St,Wt[at+nt+8]=zt,Wt[at+nt+16]=kt,Wt[at+nt+24]=Ct,Wt[at+nt+32]=Ut,Wt[at+nt+40]=Dt,Wt[at+nt+48]=Tt,Wt[at+nt+56]=Rt):(Lt=(Lt=W*St+8192>>14)<-2040?0:Lt>=2024?255:Lt+2056>>4,Wt[at+nt]=Lt,Wt[at+nt+8]=Lt,Wt[at+nt+16]=Lt,Wt[at+nt+24]=Lt,Wt[at+nt+32]=Lt,Wt[at+nt+40]=Lt,Wt[at+nt+48]=Lt,Wt[at+nt+56]=Lt)}function ot(lt,at){for(var ht=at.P,et=at.c,ut=new Int16Array(64),Et=0;Et<et;Et++)for(var gt=0;gt<ht;gt++)X(at,V(at,Et,gt),ut);return at.D}function it(lt,at,ht){ht==null&&(ht=at);var et=lt.length-1,ut=ht<at?ht:at;if(at>=et)return null;var Et=$(lt,at);if(Et>=65472&&Et<=65534)return{u:null,M:Et,offset:at};for(var gt=$(lt,ut);!(gt>=65472&&gt<=65534);){if(++ut>=et)return null;gt=$(lt,ut)}return{u:Et.toString(16),M:gt,offset:ut}}return J.prototype={parse(lt,at){at==null&&(at={});var ht,et,ut=at.F,Et=0,gt=null,dt=null,yt=0;function Nt(){var jt=$(lt,Et),Kt=(Et+=2)+jt-2,It=it(lt,Kt,Et);It&&It.u&&(Kt=It.offset);var ne=lt.subarray(Et,Kt);return Et+=ne.length,ne}function Bt(jt){for(var Kt=Math.ceil(jt.o/8/jt.X),It=Math.ceil(jt.s/8/jt.B),ne=0;ne<jt.W.length;ne++){Qt=jt.W[ne];var ce=Math.ceil(Math.ceil(jt.o/8)*Qt.h/jt.X),pt=Math.ceil(Math.ceil(jt.s/8)*Qt.A/jt.B),ee=Kt*Qt.h,Vt=64*(It*Qt.A)*(ee+1);Qt.D=new Int16Array(Vt),Qt.P=ce,Qt.c=pt}jt.m=Kt,jt.R=It}var St=[],zt=[],kt=[],Ct=$(lt,Et);if(Et+=2,Ct!==65496)throw new P("SOI not found");Ct=$(lt,Et),Et+=2;t:for(;Ct!==65497;){var Ut,Dt,Tt;switch(Ct){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var Rt=Nt();Ct===65504&&Rt[0]===74&&Rt[1]===70&&Rt[2]===73&&Rt[3]===70&&Rt[4]===0&&(gt={version:{d:Rt[5],T:Rt[6]},K:Rt[7],j:Rt[8]<<8|Rt[9],H:Rt[10]<<8|Rt[11],S:Rt[12],I:Rt[13],C:Rt.subarray(14,14+3*Rt[12]*Rt[13])}),Ct===65518&&Rt[0]===65&&Rt[1]===100&&Rt[2]===111&&Rt[3]===98&&Rt[4]===101&&(dt={version:Rt[5]<<8|Rt[6],k:Rt[7]<<8|Rt[8],q:Rt[9]<<8|Rt[10],a:Rt[11]});break;case 65499:for(var Lt=$(lt,Et)+(Et+=2)-2;Et<Lt;){var Ht=lt[Et++],Wt=new Uint16Array(64);if(Ht>>4){if(Ht>>4!=1)throw new P("DQT - invalid table spec");for(Dt=0;Dt<64;Dt++)Wt[D[Dt]]=$(lt,Et),Et+=2}else for(Dt=0;Dt<64;Dt++)Wt[D[Dt]]=lt[Et++];St[15&Ht]=Wt}break;case 65472:case 65473:case 65474:if(ht)throw new P("Only single frame JPEGs supported");Et+=2,(ht={}).G=Ct===65473,ht.Z=Ct===65474,ht.precision=lt[Et++];var Pt,nt=$(lt,Et),Mt=0,ct=0;Et+=2,ht.s=ut||nt,ht.o=$(lt,Et),Et+=2,ht.W=[],ht._={};var _t=lt[Et++];for(Ut=0;Ut<_t;Ut++){Pt=lt[Et];var bt=lt[Et+1]>>4,xt=15&lt[Et+1];Mt<bt&&(Mt=bt),ct<xt&&(ct=xt);var $t=lt[Et+2];Tt=ht.W.push({h:bt,A:xt,L:$t,$:null}),ht._[Pt]=Tt-1,Et+=3}ht.X=Mt,ht.B=ct,Bt(ht);break;case 65476:var rt=$(lt,Et);for(Et+=2,Ut=2;Ut<rt;){var ft=lt[Et++],wt=new Uint8Array(16),vt=0;for(Dt=0;Dt<16;Dt++,Et++)vt+=wt[Dt]=lt[Et];var Gt=new Uint8Array(vt);for(Dt=0;Dt<vt;Dt++,Et++)Gt[Dt]=lt[Et];Ut+=17+vt,(ft>>4?zt:kt)[15&ft]=K(wt,Gt)}break;case 65501:et=$(lt,Et+=2),Et+=2;break;case 65498:var Qt,ae=++yt==1&&!ut;Et+=2;var se=lt[Et++],ie=[];for(Ut=0;Ut<se;Ut++){var At=lt[Et++],st=ht._[At];(Qt=ht.W[st]).index=At;var mt=lt[Et++];Qt.J=kt[mt>>4],Qt.i=zt[15&mt],ie.push(Qt)}var Ot=lt[Et++],qt=lt[Et++],Yt=lt[Et++];try{var Jt=tt(lt,Et,ht,ie,et,Ot,qt,Yt>>4,15&Yt,ae);Et+=Jt}catch(jt){if(jt instanceof DNLMarkerError)return this.parse(lt,{F:jt.s});if(jt instanceof EOIMarkerError)break t;throw jt}break;case 65500:Et+=4;break;case 65535:lt[Et]!==255&&Et--;break;default:var Ft=it(lt,Et-2,Et-3);if(Ft&&Ft.u){Et=Ft.offset;break}if(Et>=lt.length-1)break t;throw new P("JpegImage.parse - unknown marker: "+Ct.toString(16))}Ct=$(lt,Et),Et+=2}for(this.width=ht.o,this.height=ht.s,this.g=gt,this.b=dt,this.W=[],Ut=0;Ut<ht.W.length;Ut++){var re=St[(Qt=ht.W[Ut]).L];re&&(Qt.$=re),this.W.push({index:Qt.index,e:ot(0,Qt),l:Qt.h/ht.X,t:Qt.A/ht.B,P:Qt.P,c:Qt.c})}this.p=this.W.length},Y(lt,at,ht){ht==null&&(ht=!1);var et,ut,Et,gt,dt,yt,Nt,Bt,St,zt,kt,Ct,Ut=this.width/lt,Dt=this.height/at,Tt=0,Rt=this.W.length,Lt=lt*at*Rt,Ht=new Uint8ClampedArray(Lt),Wt=new Uint32Array(lt),Pt=4294967288;for(Nt=0;Nt<Rt;Nt++){if(ut=(et=this.W[Nt]).l*Ut,Et=et.t*Dt,Tt=Nt,kt=et.e,gt=et.P+1<<3,ut!==Ct){for(dt=0;dt<lt;dt++)Bt=0|dt*ut,Wt[dt]=(Bt&Pt)<<3|7&Bt;Ct=ut}for(yt=0;yt<at;yt++)for(zt=gt*((Bt=0|yt*Et)&Pt)|(7&Bt)<<3,dt=0;dt<lt;dt++)Ht[Tt]=kt[zt+Wt[dt]],Tt+=Rt}var nt=this.V;if(ht||Rt!==4||nt||(nt=new Int32Array([-256,255,-256,255,-256,255,-256,255])),nt)for(Nt=0;Nt<Lt;)for(Bt=0,St=0;Bt<Rt;Bt++,Nt++,St+=2)Ht[Nt]=(Ht[Nt]*nt[St]>>8)+nt[St+1];return Ht},get f(){return this.b?!!this.b.a:this.p===3?this.N!==0&&(this.W[0].index!==82||this.W[1].index!==71||this.W[2].index!==66):this.N===1},z:function(lt){for(var at,ht,et,ut=0,Et=lt.length;ut<Et;ut+=3)at=lt[ut],ht=lt[ut+1],et=lt[ut+2],lt[ut]=at-179.456+1.402*et,lt[ut+1]=at+135.459-.344*ht-.714*et,lt[ut+2]=at-226.816+1.772*ht;return lt},O:function(lt){for(var at,ht,et,ut,Et=0,gt=0,dt=lt.length;gt<dt;gt+=4)at=lt[gt],ht=lt[gt+1],et=lt[gt+2],ut=lt[gt+3],lt[Et++]=ht*(-660635669420364e-19*ht+.000437130475926232*et-54080610064599e-18*at+.00048449797120281*ut-.154362151871126)-122.67195406894+et*(-.000957964378445773*et+.000817076911346625*at-.00477271405408747*ut+1.53380253221734)+at*(.000961250184130688*at-.00266257332283933*ut+.48357088451265)+ut*(-.000336197177618394*ut+.484791561490776),lt[Et++]=107.268039397724+ht*(219927104525741e-19*ht-.000640992018297945*et+.000659397001245577*at+.000426105652938837*ut-.176491792462875)+et*(-.000778269941513683*et+.00130872261408275*at+.000770482631801132*ut-.151051492775562)+at*(.00126935368114843*at-.00265090189010898*ut+.25802910206845)+ut*(-.000318913117588328*ut-.213742400323665),lt[Et++]=ht*(-.000570115196973677*ht-263409051004589e-19*et+.0020741088115012*at-.00288260236853442*ut+.814272968359295)-20.810012546947+et*(-153496057440975e-19*et-.000132689043961446*at+.000560833691242812*ut-.195152027534049)+at*(.00174418132927582*at-.00255243321439347*ut+.116935020465145)+ut*(-.000343531996510555*ut+.24165260232407);return lt.subarray(0,Et)},r:function(lt){for(var at,ht,et,ut=0,Et=lt.length;ut<Et;ut+=4)at=lt[ut],ht=lt[ut+1],et=lt[ut+2],lt[ut]=434.456-at-1.402*et,lt[ut+1]=119.541-at+.344*ht+.714*et,lt[ut+2]=481.816-at-1.772*ht;return lt},U:function(lt){for(var at,ht,et,ut,Et=0,gt=0,dt=lt.length;gt<dt;gt+=4)at=lt[gt],ht=lt[gt+1],et=lt[gt+2],ut=lt[gt+3],lt[Et++]=255+at*(-6747147073602441e-20*at+.0008379262121013727*ht+.0002894718188643294*et+.003264231057537806*ut-1.1185611867203937)+ht*(26374107616089405e-21*ht-8626949158638572e-20*et-.0002748769067499491*ut-.02155688794978967)+et*(-3878099212869363e-20*et-.0003267808279485286*ut+.0686742238595345)-ut*(.0003361971776183937*ut+.7430659151342254),lt[Et++]=255+at*(.00013596372813588848*at+.000924537132573585*ht+.00010567359618683593*et+.0004791864687436512*ut-.3109689587515875)+ht*(-.00023545346108370344*ht+.0002702845253534714*et+.0020200308977307156*ut-.7488052167015494)+et*(6834815998235662e-20*et+.00015168452363460973*ut-.09751927774728933)-ut*(.0003189131175883281*ut+.7364883807733168),lt[Et++]=255+at*(13598650411385307e-21*at+.00012423956175490851*ht+.0004751985097583589*et-36729317476630422e-22*ut-.05562186980264034)+ht*(.00016141380598724676*ht+.0009692239130725186*et+.0007782692450036253*ut-.44015232367526463)+et*(5068882914068769e-22*et+.0017778369011375071*ut-.7591454649749609)-ut*(.0003435319965105553*ut+.7063770186160144);return lt.subarray(0,Et)},getData:function(lt){var at=lt.width,ht=lt.height,et=lt.forceRGB,ut=lt.isSourcePDF;if(this.p>4)throw new P("Unsupported color mode");var Et=this.Y(at,ht,ut);if(this.p===1&&et){for(var gt=Et.length,dt=new Uint8ClampedArray(3*gt),yt=0,Nt=0;Nt<gt;Nt++){var Bt=Et[Nt];dt[yt++]=Bt,dt[yt++]=Bt,dt[yt++]=Bt}return dt}if(this.p===3&&this.f)return this.z(Et);if(this.p===4){if(this.f)return et?this.O(Et):this.r(Et);if(et)return this.U(Et)}return Et}},J}();function $(D,U){return D[U]<<8|D[U+1]}w.JpegDecoder=F})(),w.encodeImage=function(P,F,$,D){var U={t256:[F],t257:[$],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1e3],t277:[4],t278:[$],t279:[F*$*4],t282:[[72,1]],t283:[[72,1]],t284:[1],t286:[[0,1]],t287:[[0,1]],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(D)for(var j in D)U[j]=D[j];var Z=new Uint8Array(w.encode([U])),G=new Uint8Array(P),H=new Uint8Array(1e3+F*$*4);for(j=0;j<Z.length;j++)H[j]=Z[j];for(j=0;j<G.length;j++)H[1e3+j]=G[j];return H.buffer},w.encode=function(P){var F=new Uint8Array(2e4),$=4,D=w._binBE;F[0]=F[1]=77,D.writeUshort(F,2,42);var U=8;D.writeUint(F,$,U),$+=4;for(var j=0;j<P.length;j++){var Z=w._writeIFD(D,w._types.basic,F,U,P[j]);U=Z[1],j<P.length-1&&(3&U&&(U+=4-(3&U)),D.writeUint(F,Z[0],U))}return F.slice(0,U).buffer},w.decode=function(P,F){F==null&&(F={parseMN:!0,debug:!1});var $=new Uint8Array(P),D=0,U=w._binBE.readASCII($,D,2);D+=2;var j=U=="II"?w._binLE:w._binBE;j.readUshort($,D),D+=2;var Z=j.readUint($,D);D+=4;for(var G=[];;){var H=j.readUshort($,Z),q=j.readUshort($,Z+4);if(H!=0&&(q<1||13<q)){g("error in TIFF");break}if(w._readIFD(j,$,Z,G,0,F),(Z=j.readUint($,Z+2+12*H))==0)break}return G},w.decodeImage=function(P,F,$){if(!F.data){var D=new Uint8Array(P),U=w._binBE.readASCII(D,0,2);if(F.t256!=null){F.isLE=U=="II",F.width=F.t256[0],F.height=F.t257[0];var j=F.t259?F.t259[0]:1,Z=F.t266?F.t266[0]:1;F.t284&&F.t284[0]==2&&g("PlanarConfiguration 2 should not be used!"),j==7&&F.t258&&F.t258.length>3&&(F.t258=F.t258.slice(0,3));var G=F.t277?F.t277[0]:1,H=(F.t258?F.t258[0]:1)*G;j==1&&F.t279!=null&&F.t278&&F.t262[0]==32803&&(H=Math.round(8*F.t279[0]/(F.width*F.t278[0]))),F.t50885&&F.t50885[0]==4&&(H=3*F.t258[0]);var q=8*Math.ceil(F.width*H/8),W=F.t273;(W==null||F.t322)&&(W=F.t324);var Q=F.t279;j==1&&W.length==1&&(Q=[F.height*(q>>>3)]),(Q==null||F.t322)&&(Q=F.t325);var J=new Uint8Array(F.height*(q>>>3)),K=0;if(F.t322!=null){var V=F.t322[0],tt=F.t323[0],X=Math.floor((F.width+V-1)/V),ot=Math.floor((F.height+tt-1)/tt),it=new Uint8Array(0|Math.ceil(V*tt*H/8));console.log("====",X,ot);for(var lt=0;lt<ot;lt++)for(var at=0;at<X;at++){var ht=lt*X+at;it.fill(0),w.decode._decompress(F,$,D,W[ht],Q[ht],j,it,0,Z,V,tt),j==6?J=it:w._copyTile(it,0|Math.ceil(V*H/8),tt,J,0|Math.ceil(F.width*H/8),F.height,0|Math.ceil(at*V*H/8),lt*tt)}K=8*J.length}else{if(W==null)return;var et=F.t278?F.t278[0]:F.height;for(et=Math.min(et,F.height),ht=0;ht<W.length;ht++)w.decode._decompress(F,$,D,W[ht],Q[ht],j,J,0|Math.ceil(K/8),Z,F.width,et),K+=q*et;K=Math.min(K,8*J.length)}F.data=new Uint8Array(J.buffer,0,0|Math.ceil(K/8))}}},w.decode._decompress=function(P,F,$,D,U,j,Z,G,H,q,W){if(P.t271&&P.t271[0]=="Panasonic"&&P.t45&&P.t45[0]==6&&(j=34316),j==1)for(var Q=0;Q<U;Q++)Z[G+Q]=$[D+Q];else if(j==2)w.decode._decodeG2($,D,U,Z,G,q,H);else if(j==3)w.decode._decodeG3($,D,U,Z,G,q,H,!!P.t292&&!(1&~P.t292[0]));else if(j==4)w.decode._decodeG4($,D,U,Z,G,q,H);else if(j==5)w.decode._decodeLZW($,D,U,Z,G,8);else if(j==6)w.decode._decodeOldJPEG(P,$,D,U,Z,G);else if(j==7||j==34892)w.decode._decodeNewJPEG(P,$,D,U,Z,G);else if(j==8||j==32946){var J=new Uint8Array($.buffer,D+2,U-6),K=I.inflateRaw(J);G+K.length<=Z.length&&Z.set(K,G)}else j==9?w.decode._decodeVC5($,D,U,Z,G,P.t33422):j==32767?w.decode._decodeARW(P,$,D,U,Z,G):j==32773?w.decode._decodePackBits($,D,U,Z,G):j==32809?w.decode._decodeThunder($,D,U,Z,G):j==34316?w.decode._decodePanasonic(P,$,D,U,Z,G):j==34713?w.decode._decodeNikon(P,F,$,D,U,Z,G):j==34676?w.decode._decodeLogLuv32(P,$,D,U,Z,G):g("Unknown compression",j);var V=P.t258?Math.min(32,P.t258[0]):1,tt=P.t277?P.t277[0]:1,X=V*tt>>>3,ot=Math.ceil(V*tt*q/8);if(V==16&&!P.isLE&&P.t33422==null)for(var it=0;it<W;it++)for(var lt=G+it*ot,at=1;at<ot;at+=2){var ht=Z[lt+at];Z[lt+at]=Z[lt+at-1],Z[lt+at-1]=ht}if(P.t317&&P.t317[0]==2)for(it=0;it<W;it++){var et=G+it*ot;if(V==16)for(Q=X;Q<ot;Q+=2){var ut=(Z[et+Q+1]<<8|Z[et+Q])+(Z[et+Q-X+1]<<8|Z[et+Q-X]);Z[et+Q]=255&ut,Z[et+Q+1]=ut>>>8&255}else if(tt==3)for(Q=3;Q<ot;Q+=3)Z[et+Q]=Z[et+Q]+Z[et+Q-3]&255,Z[et+Q+1]=Z[et+Q+1]+Z[et+Q-2]&255,Z[et+Q+2]=Z[et+Q+2]+Z[et+Q-1]&255;else for(Q=X;Q<ot;Q++)Z[et+Q]=Z[et+Q]+Z[et+Q-X]&255}},w.decode._decodePanasonic=function(P,F,$,D,U,j){var Z,G,H,q,W,Q,J,K,V=F.buffer,tt=P.t2[0],X=P.t3[0],ot=P.t10[0],it=P.t45[0],lt=0,at=0,ht=0,et=0,ut=it==6?new Uint32Array(18):new Uint8Array(16),Et=[0,0],gt=[0,0],dt=0,yt=new Uint8Array(16384),Nt=new Uint16Array(U.buffer);function Bt($t){if(ht==0){var rt=new Uint8Array(V,$+at+8184,8200),ft=new Uint8Array(V,$+at,8184);yt.set(rt),yt.set(ft,rt.length),at+=16384}if(it!=5)return(yt[et=(ht=ht-$t&131071)>>3^16368]|yt[et+1]<<8)>>(7&ht)&~(-1<<$t);for(Z=0;Z<16;Z++)ut[Z]=yt[ht++],ht&=16383}function St($t){return yt[ht+15-$t]}function zt(){Et[0]=0,Et[1]=0,gt[0]=0,gt[1]=0}if(it==7)throw it;if(it==6){var kt=ot==12,Ct=kt?function(){ut[0]=St(0)<<4|St(1)>>4,ut[1]=4095&((15&St(1))<<8|St(2)),ut[2]=St(3)>>6&3,ut[3]=(63&St(3))<<2|St(4)>>6,ut[4]=(63&St(4))<<2|St(5)>>6,ut[5]=(63&St(5))<<2|St(6)>>6,ut[6]=St(6)>>4&3,ut[7]=(15&St(6))<<4|St(7)>>4,ut[8]=(15&St(7))<<4|St(8)>>4,ut[9]=(15&St(8))<<4|St(9)>>4,ut[10]=St(9)>>2&3,ut[11]=(3&St(9))<<6|St(10)>>2,ut[12]=(3&St(10))<<6|St(11)>>2,ut[13]=(3&St(11))<<6|St(12)>>2,ut[14]=3&St(12),ut[15]=St(13),ut[16]=St(14),ut[17]=St(15),ht+=16,et=0}:function(){ut[0]=St(0)<<6|St(1)>>2,ut[1]=16383&((3&St(1))<<12|St(2)<<4|St(3)>>4),ut[2]=St(3)>>2&3,ut[3]=(3&St(3))<<8|St(4),ut[4]=St(5)<<2|St(6)>>6,ut[5]=(63&St(6))<<4|St(7)>>4,ut[6]=St(7)>>2&3,ut[7]=(3&St(7))<<8|St(8),ut[8]=St(9)<<2&1020|St(10)>>6,ut[9]=1023&(St(10)<<4|St(11)>>4),ut[10]=St(11)>>2&3,ut[11]=(3&St(11))<<8|St(12),ut[12]=1023&(St(13)<<2&1020|St(14)>>6),ut[13]=1023&(St(14)<<4|St(15)>>4),ht+=16,et=0},Ut=kt?14:11,Dt=kt?128:512,Tt=kt?2048:8192,Rt=kt?16383:65535,Lt=kt?4095:16383,Ht=tt/Ut,Wt=16*Ht,Pt=kt?18:14;for(Q=0;Q<X-15;Q+=16){var nt=Math.min(16,X-Q),Mt=Wt*nt;for(yt=new Uint8Array(V,$+lt,Mt),ht=0,lt+=Mt,K=0,J=0;K<nt;K++,J=0){dt=(Q+K)*tt;for(var ct=0;ct<Ht;ct++)for(Ct(),zt(),H=0,W=0,Z=0;Z<Ut;Z++){if(q=1&Z,Z%3==2){var _t=et<Pt?ut[et++]:0;_t==3&&(_t=4),W=Dt<<_t,H=1<<_t}var bt=et<Pt?ut[et++]:0;Et[q]?(bt*=H,W<Tt&&gt[q]>W&&(bt+=gt[q]-W),gt[q]=bt):(Et[q]=bt,bt?gt[q]=bt:bt=gt[q]),Nt[dt+J++]=bt-15<=Rt?bt-15&Rt:bt+2147483633>>31&Lt}}}}else if(it==5){var xt=ot==12?10:9;for(Q=0;Q<X;Q++)for(J=0;J<tt;J+=xt)Bt(0),ot==12?(Nt[dt++]=((15&ut[1])<<8)+ut[0],Nt[dt++]=16*ut[2]+(ut[1]>>4),Nt[dt++]=((15&ut[4])<<8)+ut[3],Nt[dt++]=16*ut[5]+(ut[4]>>4),Nt[dt++]=((15&ut[7])<<8)+ut[6],Nt[dt++]=16*ut[8]+(ut[7]>>4),Nt[dt++]=((15&ut[10])<<8)+ut[9],Nt[dt++]=16*ut[11]+(ut[10]>>4),Nt[dt++]=((15&ut[13])<<8)+ut[12],Nt[dt++]=16*ut[14]+(ut[13]>>4)):ot==14&&(Nt[dt++]=ut[0]+((63&ut[1])<<8),Nt[dt++]=(ut[1]>>6)+4*ut[2]+((15&ut[3])<<10),Nt[dt++]=(ut[3]>>4)+16*ut[4]+((3&ut[5])<<12),Nt[dt++]=((252&ut[5])>>2)+(ut[6]<<6),Nt[dt++]=ut[7]+((63&ut[8])<<8),Nt[dt++]=(ut[8]>>6)+4*ut[9]+((15&ut[10])<<10),Nt[dt++]=(ut[10]>>4)+16*ut[11]+((3&ut[12])<<12),Nt[dt++]=((252&ut[12])>>2)+(ut[13]<<6),Nt[dt++]=ut[14]+((63&ut[15])<<8))}else{if(it!=4)throw it;for(Q=0;Q<X;Q++)for(J=0;J<tt;J++)q=1&(Z=J%14),Z==0&&zt(),Z%3==2&&(H=4>>3-Bt(2)),gt[q]?(G=Bt(8))!=0&&(Et[q]-=128<<H,(Et[q]<0||H==4)&&(Et[q]&=~(-1<<H)),Et[q]+=G<<H):(gt[q]=Bt(8),(gt[q]||Z>11)&&(Et[q]=gt[q]<<4|Bt(4))),Nt[dt++]=Et[1&J]}},w.decode._decodeVC5=function(){var P,F,$,D=[1,0,1,0,2,2,1,1,3,7,1,2,5,25,1,3,6,48,1,4,6,54,1,5,7,111,1,8,7,99,1,6,7,105,12,0,7,107,1,7,8,209,20,0,8,212,1,9,8,220,1,10,9,393,1,11,9,394,32,0,9,416,1,12,9,427,1,13,10,887,1,18,10,784,1,14,10,790,1,15,10,835,60,0,10,852,1,16,10,885,1,17,11,1571,1,19,11,1668,1,20,11,1669,100,0,11,1707,1,21,11,1772,1,22,12,3547,1,29,12,3164,1,24,12,3166,1,25,12,3140,1,23,12,3413,1,26,12,3537,1,27,12,3539,1,28,13,7093,1,35,13,6283,1,30,13,6331,1,31,13,6335,180,0,13,6824,1,32,13,7072,1,33,13,7077,320,0,13,7076,1,34,14,12565,1,36,14,12661,1,37,14,12669,1,38,14,13651,1,39,14,14184,1,40,15,28295,1,46,15,28371,1,47,15,25320,1,42,15,25336,1,43,15,25128,1,41,15,27300,1,44,15,28293,1,45,16,50259,1,48,16,50643,1,49,16,50675,1,50,16,56740,1,53,16,56584,1,51,16,56588,1,52,17,113483,1,61,17,113482,1,60,17,101285,1,55,17,101349,1,56,17,109205,1,57,17,109207,1,58,17,100516,1,54,17,113171,1,59,18,202568,1,62,18,202696,1,63,18,218408,1,64,18,218412,1,65,18,226340,1,66,18,226356,1,67,18,226358,1,68,19,402068,1,69,19,405138,1,70,19,405394,1,71,19,436818,1,72,19,436826,1,73,19,452714,1,75,19,452718,1,76,19,452682,1,74,20,804138,1,77,20,810279,1,78,20,810790,1,79,20,873638,1,80,20,873654,1,81,20,905366,1,82,20,905430,1,83,20,905438,1,84,21,1608278,1,85,21,1620557,1,86,21,1621582,1,87,21,1621583,1,88,21,1747310,1,89,21,1810734,1,90,21,1810735,1,91,21,1810863,1,92,21,1810879,1,93,22,3621725,1,99,22,3621757,1,100,22,3241112,1,94,22,3494556,1,95,22,3494557,1,96,22,3494622,1,97,22,3494623,1,98,23,6482227,1,102,23,6433117,1,101,23,6989117,1,103,23,6989119,1,105,23,6989118,1,104,23,7243449,1,106,23,7243512,1,107,24,13978233,1,111,24,12964453,1,109,24,12866232,1,108,24,14486897,1,113,24,13978232,1,110,24,14486896,1,112,24,14487026,1,114,24,14487027,1,115,25,25732598,1,225,25,25732597,1,189,25,25732596,1,188,25,25732595,1,203,25,25732594,1,202,25,25732593,1,197,25,25732592,1,207,25,25732591,1,169,25,25732590,1,223,25,25732589,1,159,25,25732522,1,235,25,25732579,1,152,25,25732575,1,192,25,25732489,1,179,25,25732573,1,201,25,25732472,1,172,25,25732576,1,149,25,25732488,1,178,25,25732566,1,120,25,25732571,1,219,25,25732577,1,150,25,25732487,1,127,25,25732506,1,211,25,25732548,1,125,25,25732588,1,158,25,25732486,1,247,25,25732467,1,238,25,25732508,1,163,25,25732552,1,228,25,25732603,1,183,25,25732513,1,217,25,25732587,1,168,25,25732520,1,122,25,25732484,1,128,25,25732562,1,249,25,25732505,1,187,25,25732504,1,186,25,25732483,1,136,25,25928905,1,181,25,25732560,1,255,25,25732500,1,230,25,25732482,1,135,25,25732555,1,233,25,25732568,1,222,25,25732583,1,145,25,25732481,1,134,25,25732586,1,167,25,25732521,1,248,25,25732518,1,209,25,25732480,1,243,25,25732512,1,216,25,25732509,1,164,25,25732547,1,140,25,25732479,1,157,25,25732544,1,239,25,25732574,1,191,25,25732564,1,251,25,25732478,1,156,25,25732546,1,139,25,25732498,1,242,25,25732557,1,133,25,25732477,1,162,25,25732515,1,213,25,25732584,1,165,25,25732514,1,212,25,25732476,1,227,25,25732494,1,198,25,25732531,1,236,25,25732530,1,234,25,25732529,1,117,25,25732528,1,215,25,25732527,1,124,25,25732526,1,123,25,25732525,1,254,25,25732524,1,253,25,25732523,1,148,25,25732570,1,218,25,25732580,1,146,25,25732581,1,147,25,25732569,1,224,25,25732533,1,143,25,25732540,1,184,25,25732541,1,185,25,25732585,1,166,25,25732556,1,132,25,25732485,1,129,25,25732563,1,250,25,25732578,1,151,25,25732501,1,119,25,25732502,1,193,25,25732536,1,176,25,25732496,1,245,25,25732553,1,229,25,25732516,1,206,25,25732582,1,144,25,25732517,1,208,25,25732558,1,137,25,25732543,1,241,25,25732466,1,237,25,25732507,1,190,25,25732542,1,240,25,25732551,1,131,25,25732554,1,232,25,25732565,1,252,25,25732475,1,171,25,25732493,1,205,25,25732492,1,204,25,25732491,1,118,25,25732490,1,214,25,25928904,1,180,25,25732549,1,126,25,25732602,1,182,25,25732539,1,175,25,25732545,1,141,25,25732559,1,138,25,25732537,1,177,25,25732534,1,153,25,25732503,1,194,25,25732606,1,160,25,25732567,1,121,25,25732538,1,174,25,25732497,1,246,25,25732550,1,130,25,25732572,1,200,25,25732474,1,170,25,25732511,1,221,25,25732601,1,196,25,25732532,1,142,25,25732519,1,210,25,25732495,1,199,25,25732605,1,155,25,25732535,1,154,25,25732499,1,244,25,25732510,1,220,25,25732600,1,195,25,25732607,1,161,25,25732604,1,231,25,25732473,1,173,25,25732599,1,226,26,51465122,1,116,26,51465123,0,1],U=[3,3,3,3,2,2,2,1,1,1];function j(K){var V=K[1],tt=K[0][V>>>3]>>>7-(7&V)&1;return K[1]++,tt}function Z(K,V){if(P==null){P={};for(var tt=0;tt<D.length;tt+=4)P[D[tt+1]]=D.slice(tt,tt+4)}for(var X=j(K),ot=P[X];ot==null;)X=X<<1|j(K),ot=P[X];var it=ot[3];it!=0&&(it=j(K)==0?it:-it),V[0]=ot[2],V[1]=it}function G(K,V){for(var tt=0;tt<V;tt++)1&~K||K++,K>>>=1;return K}function H(K,V){return K>>V}function q(K,V,tt,X,ot,it){V[tt]=H(H(11*K[ot]-4*K[ot+it]+K[ot+it+it]+4,3)+K[X],1),V[tt+it]=H(H(5*K[ot]+4*K[ot+it]-K[ot+it+it]+4,3)-K[X],1)}function W(K,V,tt,X,ot,it){var lt=K[ot-it]-K[ot+it],at=K[ot],ht=K[X];V[tt]=H(H(lt+4,3)+at+ht,1),V[tt+it]=H(H(4-lt,3)+at-ht,1)}function Q(K,V,tt,X,ot,it){V[tt]=H(H(5*K[ot]+4*K[ot-it]-K[ot-it-it]+4,3)+K[X],1),V[tt+it]=H(H(11*K[ot]-4*K[ot-it]+K[ot-it-it]+4,3)-K[X],1)}function J(K){return K=$[K=K<0?0:K>4095?4095:K]>>>2}return function(K,V,tt,X,ot,it){X=new Uint16Array(X.buffer);var lt,at,ht,et,ut,Et,gt,dt,yt=Date.now(),Nt=w._binBE,Bt=V+tt;V+=4;for(var St=it[0]==1;V<Bt;){var zt=Nt.readShort(K,V),kt=Nt.readUshort(K,V+2);if(V+=4,zt==12)Ht=kt;else if(zt==20)lt=kt;else if(zt==21)at=kt;else if(zt==48)ht=kt;else if(zt==53)et=kt;else if(zt!=35){if(zt==62)ut=kt;else if(zt!=101){if(zt==109)Et=kt;else if(zt!=84){if(zt!=106){if(zt!=107){if(zt!=108){if(zt!=102){if(zt==104)st=kt;else if(zt!=105){var Ct=zt<0?-zt:zt,Ut=65280&Ct,Dt=0;if(24576&Ct&&(8192&Ct?(Dt=65535&kt,Dt+=(255&Ct)<<16):Dt=65535&kt),24576&~Ct){if(Ct==16388)V+=4*Dt;else if(Ut!=8192&&Ut!=8448&&Ut!=9216)throw Ct.toString(16)}else{if(gt==null){gt=[];for(var Tt=0;Tt<4;Tt++)gt[Tt]=new Int16Array((lt>>>1)*(at>>>1));for(dt=new Int16Array((lt>>>1)*(at>>>1)),F=new Int16Array(1024),Tt=0;Tt<1024;Tt++){var Rt=Tt-512,Lt=Math.abs(Rt),Ht=Math.floor(768*Lt*Lt*Lt/16581375)+Lt;F[Tt]=Math.sign(Rt)*Ht}for($=new Uint16Array(4096),Tt=0;Tt<4096;Tt++){var Wt=Tt,Pt=65535*(Math.pow(113,Wt/4095)-1)/112;$[Tt]=Math.min(Pt,65535)}}var nt=gt[ut],Mt=G(lt,1+U[ht]),ct=G(at,1+U[ht]);if(ht==0)for(var _t=0;_t<ct;_t++)for(var bt=0;bt<Mt;bt++){var xt=V+2*(_t*Mt+bt);nt[_t*(lt>>>1)+bt]=K[xt]<<8|K[xt+1]}else{var $t=[K,8*V],rt=[],ft=0,wt=Mt*ct,vt=[0,0],Gt=0;for(kt=0;ft<wt;)for(Z($t,vt),Gt=vt[0],kt=vt[1];Gt>0;)rt[ft++]=kt,Gt--;var Qt=(ht-1)%3,ae=Qt!=1?Mt:0,se=Qt!=0?ct:0;for(_t=0;_t<ct;_t++){var ie=(_t+se)*(lt>>>1)+ae,At=_t*Mt;for(bt=0;bt<Mt;bt++)nt[ie+bt]=F[rt[At+bt]+512]*et}if(Qt==2){var st=lt>>>1,mt=2*Mt,Ot=2*ct;for(_t=0;_t<ct;_t++)for(bt=0;bt<mt;bt++){Tt=2*_t*st+bt;var qt=ct*st+(Jt=_t*st+bt);_t==0?q(nt,dt,Tt,qt,Jt,st):_t==ct-1?Q(nt,dt,Tt,qt,Jt,st):W(nt,dt,Tt,qt,Jt,st)}var Yt=nt;for(nt=dt,dt=Yt,_t=0;_t<Ot;_t++)for(bt=0;bt<Mt;bt++){var Jt;Tt=_t*st+2*bt,qt=Mt+(Jt=_t*st+bt),bt==0?q(nt,dt,Tt,qt,Jt,1):bt==Mt-1?Q(nt,dt,Tt,qt,Jt,1):W(nt,dt,Tt,qt,Jt,1)}Yt=nt,nt=dt,dt=Yt;for(var Ft=[],re=2-~~((ht-1)/3),jt=0;jt<3;jt++)Ft[jt]=Et>>14-2*jt&3;var Kt=Ft[re];if(Kt!=0)for(_t=0;_t<Ot;_t++)for(bt=0;bt<mt;bt++)nt[Tt=_t*st+bt]=nt[Tt]<<Kt}}if(ht==9&&ut==3){var It=gt[0],ne=gt[1],ce=gt[2],pt=gt[3];for(_t=0;_t<at;_t+=2)for(bt=0;bt<lt;bt+=2){var ee=_t*lt+bt,Vt=It[xt=(_t>>>1)*(lt>>>1)+(bt>>>1)],Zt=ne[xt]-2048,Xt=ce[xt]-2048,te=pt[xt]-2048,ue=(Zt<<1)+Vt,oe=(Xt<<1)+Vt,le=Vt+te,he=Vt-te;St?(X[ee]=J(le),X[ee+1]=J(oe),X[ee+lt]=J(ue),X[ee+lt+1]=J(he)):(X[ee]=J(ue),X[ee+1]=J(le),X[ee+lt]=J(he),X[ee+lt+1]=J(oe))}}V+=4*Dt}}}}}}}}}}console.log(Date.now()-yt)}}(),w.decode._decodeLogLuv32=function(P,F,$,D,U,j){for(var Z=P.width,G=4*Z,H=0,q=new Uint8Array(G);H<D;){for(var W=0;W<G;){var Q=F[$+H];if(H++,Q<128){for(var J=0;J<Q;J++)q[W+J]=F[$+H+J];W+=Q,H+=Q}else{for(Q-=126,J=0;J<Q;J++)q[W+J]=F[$+H];W+=Q,H++}}for(var K=0;K<Z;K++)U[j+0]=q[K],U[j+1]=q[K+Z],U[j+2]=q[K+2*Z],U[j+4]=q[K+3*Z],j+=6}},w.decode._ljpeg_diff=function(P,F,$){var D,U,j=w.decode._getbithuff;return D=j(P,F,$[0],$),(U=j(P,F,D,0))&1<<D-1||(U-=(1<<D)-1),U},w.decode._decodeARW=function(P,F,$,D,U,j){var Z=P.t256[0],G=P.t257[0],H=P.t258[0],q=P.isLE?w._binLE:w._binBE;if(Z*G==D||Z*G*1.5==D)if(Z*G*1.5!=D){var W,Q,J,K,V,tt,X,ot,it=new Uint16Array(16),lt=new Uint8Array(Z+1);for(yt=0;yt<G;yt++){for(var at=0;at<Z;at++)lt[at]=F[$++];for(ot=0,dt=0;dt<Z-30;ot+=16){for(Q=2047&(W=q.readUint(lt,ot)),J=2047&W>>>11,K=15&W>>>22,V=15&W>>>26,tt=0;tt<4&&128<<tt<=Q-J;tt++);for(X=30,ht=0;ht<16;ht++)ht==K?it[ht]=Q:ht==V?it[ht]=J:(it[ht]=((q.readUshort(lt,ot+(X>>3))>>>(7&X)&127)<<tt)+J,it[ht]>2047&&(it[ht]=2047),X+=7);for(ht=0;ht<16;ht++,dt+=2)Dt=it[ht]<<1,w.decode._putsF(U,(yt*Z+dt)*H,Dt<<16-H);dt-=1&dt?1:31}}}else for(var ht=0;ht<D;ht+=3){var et=F[$+ht+0],ut=F[$+ht+1],Et=F[$+ht+2];U[j+ht]=ut<<4|et>>>4,U[j+ht+1]=et<<4|Et>>>4,U[j+ht+2]=Et<<4|ut>>>4}else{G+=8;var gt,dt,yt,Nt=[$,0,0,0],Bt=new Uint16Array(32770),St=[3857,3856,3599,3342,3085,2828,2571,2314,2057,1800,1543,1286,1029,772,771,768,514,513],zt=0,kt=w.decode._ljpeg_diff;for(Bt[0]=15,gt=ht=0;ht<18;ht++)for(var Ct=32768>>>(St[ht]>>>8),Ut=0;Ut<Ct;Ut++)Bt[++gt]=St[ht];for(dt=Z;dt--;)for(yt=0;yt<G+1;yt+=2)if(yt==G&&(yt=1),zt+=kt(F,Nt,Bt),yt<G){var Dt=4095&zt;w.decode._putsF(U,(yt*Z+dt)*H,Dt<<16-H)}}},w.decode._decodeNikon=function(P,F,$,D,U,j,Z){var G=[[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,5,4,3,6,2,7,1,0,8,9,11,10,12],[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,57,90,56,39,22,5,4,3,2,1,0,11,12,12],[0,0,1,4,2,3,1,2,0,0,0,0,0,0,0,0,0,5,4,6,3,7,2,8,1,9,0,10,11,12],[0,0,1,4,3,1,1,1,1,1,2,0,0,0,0,0,0,5,6,4,7,8,3,9,2,1,0,10,11,12,13,14],[0,0,1,5,1,1,1,1,1,1,1,2,0,0,0,0,0,8,92,75,58,41,7,6,5,4,3,2,1,0,13,14],[0,0,1,4,2,2,3,1,2,0,0,0,0,0,0,0,0,7,6,8,5,9,4,10,3,11,12,2,0,1,13,14]],H=P.t256[0],q=P.t257[0],W=P.t258[0],Q=0,J=0,K=w.decode._make_decoder,V=w.decode._getbithuff,tt=F[0].exifIFD.makerNote,X=tt.t150?tt.t150:tt.t140,ot=0,it=X[ot++],lt=X[ot++];it!=73&&lt!=88||(ot+=2110),it==70&&(Q=2),W==14&&(Q+=3);for(var at=[[0,0],[0,0]],ht=P.isLE?w._binLE:w._binBE,et=0;et<2;et++)for(var ut=0;ut<2;ut++)at[et][ut]=ht.readShort(X,ot),ot+=2;var Et,gt,dt,yt,Nt,Bt=1<<W&32767,St=0,zt=ht.readShort(X,ot);ot+=2,zt>1&&(St=Math.floor(Bt/(zt-1))),it==68&&lt==32&&St>0&&(J=ht.readShort(X,562));var kt=[0,0],Ct=K(G[Q]),Ut=[D,0,0,0];for(Et=0;Et<q;Et++)for(J&&Et==J&&(Ct=K(G[Q+1])),gt=0;gt<H;gt++){et=V($,Ut,Ct[0],Ct),(Nt=1+(V($,Ut,(dt=15&et)-(yt=et>>>4),0)<<1)<<yt>>>1)&1<<dt-1||(Nt-=(1<<dt)-(yt==0?1:0)),gt<2?kt[gt]=at[1&Et][gt]+=Nt:kt[1&gt]+=Nt;var Dt=Math.min(Math.max(kt[1&gt],0),(1<<W)-1),Tt=(Et*H+gt)*W;w.decode._putsF(j,Tt,Dt<<16-W)}},w.decode._putsF=function(P,F,$){$<<=8-(7&F);var D=F>>>3;P[D]|=$>>>16,P[D+1]|=$>>>8,P[D+2]|=$},w.decode._getbithuff=function(P,F,$,D){var U;w.decode._get_byte;var j=F[0],Z=F[1],G=F[2],H=F[3];if($==0||G<0)return 0;for(;!H&&G<$&&(U=P[j++])!=-1&&!(H=0);)Z=(Z<<8)+U,G+=8;if(U=Z<<32-G>>>32-$,D?(G-=D[U+1]>>>8,U=255&D[U+1]):G-=$,G<0)throw"e";return F[0]=j,F[1]=Z,F[2]=G,F[3]=H,U},w.decode._make_decoder=function(P){var F,$,D,U,j,Z=[];for(F=16;F!=0&&!P[F];F--);var G=17;for(Z[0]=F,D=$=1;$<=F;$++)for(U=0;U<P[$];U++,++G)for(j=0;j<1<<F-$;j++)D<=1<<F&&(Z[D++]=$<<8|P[G]);return Z},w.decode._decodeNewJPEG=function(P,F,$,D,U,j){D=Math.min(D,F.length-$);var Z=P.t347,G=Z?Z.length:0,H=new Uint8Array(G+D);if(Z){for(var q=0,W=0;W<G-1&&(Z[W]!=255||Z[W+1]!=217);W++)H[q++]=Z[W];var Q=F[$],J=F[$+1];for(Q==255&&J==216||(H[q++]=Q,H[q++]=J),W=2;W<D;W++)H[q++]=F[$+W]}else for(W=0;W<D;W++)H[W]=F[$+W];if(P.t262[0]==32803||P.t259[0]==7&&P.t262[0]==34892){var K=P.t258[0],V=w.LosslessJpegDecode(H),tt=V.length;if(K==16)if(P.isLE)for(W=0;W<tt;W++)U[j+(W<<1)]=255&V[W],U[j+(W<<1)+1]=V[W]>>>8;else for(W=0;W<tt;W++)U[j+(W<<1)]=V[W]>>>8,U[j+(W<<1)+1]=255&V[W];else if(K==14||K==12||K==10){var X=16-K;for(W=0;W<tt;W++)w.decode._putsF(U,W*K,V[W]<<X)}else{if(K!=8)throw new Error("unsupported bit depth "+K);for(W=0;W<tt;W++)U[j+W]=V[W]}}else{var ot=new w.JpegDecoder;ot.parse(H);var it=ot.getData({width:ot.width,height:ot.height,forceRGB:!0,isSourcePDF:!1});for(W=0;W<it.length;W++)U[j+W]=it[W]}P.t262[0]==6&&(P.t262[0]=2)},w.decode._decodeOldJPEGInit=function(P,F,$,D){var U,j,Z,G,H,q=216,W=0,Q=0,J=!1,K=P.t513,V=K?K[0]:0,tt=P.t514,X=tt?tt[0]:0,ot=P.t324||P.t273||K,it=P.t530,lt=0,at=0,ht=P.t277?P.t277[0]:1,et=P.t515;if(ot&&(Q=ot[0],J=ot.length>1),!J){if(F[$]==255&&F[$+1]==q)return{jpegOffset:$};if(K!=null&&(F[$+V]==255&&F[$+V+1]==q?W=$+V:g("JPEGInterchangeFormat does not point to SOI"),tt==null?g("JPEGInterchangeFormatLength field is missing"):(V>=Q||V+X<=Q)&&g("JPEGInterchangeFormatLength field value is invalid"),W!=null))return{jpegOffset:W}}if(it!=null&&(lt=it[0],at=it[1]),K!=null&&tt!=null)if(X>=2&&V+X<=Q){for(U=F[$+V+X-2]==255&&F[$+V+X-1]==q?new Uint8Array(X-2):new Uint8Array(X),Z=0;Z<U.length;Z++)U[Z]=F[$+V+Z];g("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else g("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile");if(U==null){var ut=0,Et=[];Et[ut++]=255,Et[ut++]=q;var gt=P.t519;if(gt==null)throw new Error("JPEGQTables tag is missing");for(Z=0;Z<gt.length;Z++)for(Et[ut++]=255,Et[ut++]=219,Et[ut++]=0,Et[ut++]=67,Et[ut++]=Z,G=0;G<64;G++)Et[ut++]=F[$+gt[Z]+G];for(H=0;H<2;H++){var dt=P[H==0?"t520":"t521"];if(dt==null)throw new Error((H==0?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(Z=0;Z<dt.length;Z++){Et[ut++]=255,Et[ut++]=196;var yt=19;for(G=0;G<16;G++)yt+=F[$+dt[Z]+G];for(Et[ut++]=yt>>>8,Et[ut++]=255&yt,Et[ut++]=Z|H<<4,G=0;G<16;G++)Et[ut++]=F[$+dt[Z]+G];for(G=0;G<yt;G++)Et[ut++]=F[$+dt[Z]+16+G]}}if(Et[ut++]=255,Et[ut++]=192,Et[ut++]=0,Et[ut++]=8+3*ht,Et[ut++]=8,Et[ut++]=P.height>>>8&255,Et[ut++]=255&P.height,Et[ut++]=P.width>>>8&255,Et[ut++]=255&P.width,Et[ut++]=ht,ht==1)Et[ut++]=1,Et[ut++]=17,Et[ut++]=0;else for(Z=0;Z<3;Z++)Et[ut++]=Z+1,Et[ut++]=Z!=0?17:(15&lt)<<4|15&at,Et[ut++]=Z;et!=null&&et[0]!=0&&(Et[ut++]=255,Et[ut++]=221,Et[ut++]=0,Et[ut++]=4,Et[ut++]=et[0]>>>8&255,Et[ut++]=255&et[0]),U=new Uint8Array(Et)}var Nt=-1;for(Z=0;Z<U.length-1;){if(U[Z]==255&&U[Z+1]==192){Nt=Z;break}Z++}if(Nt==-1){var Bt=new Uint8Array(U.length+10+3*ht);Bt.set(U);var St=U.length;if(Nt=U.length,(U=Bt)[St++]=255,U[St++]=192,U[St++]=0,U[St++]=8+3*ht,U[St++]=8,U[St++]=P.height>>>8&255,U[St++]=255&P.height,U[St++]=P.width>>>8&255,U[St++]=255&P.width,U[St++]=ht,ht==1)U[St++]=1,U[St++]=17,U[St++]=0;else for(Z=0;Z<3;Z++)U[St++]=Z+1,U[St++]=Z!=0?17:(15&lt)<<4|15&at,U[St++]=Z}if(F[Q]==255&&F[Q+1]==218){var zt=F[Q+2]<<8|F[Q+3];for((j=new Uint8Array(zt+2))[0]=F[Q],j[1]=F[Q+1],j[2]=F[Q+2],j[3]=F[Q+3],Z=0;Z<zt-2;Z++)j[Z+4]=F[Q+Z+4]}else{var kt=0;if((j=new Uint8Array(8+2*ht))[kt++]=255,j[kt++]=218,j[kt++]=0,j[kt++]=6+2*ht,j[kt++]=ht,ht==1)j[kt++]=1,j[kt++]=0;else for(Z=0;Z<3;Z++)j[kt++]=Z+1,j[kt++]=Z<<4|Z;j[kt++]=0,j[kt++]=63,j[kt++]=0}return{jpegOffset:$,tables:U,sosMarker:j,sofPosition:Nt}},w.decode._decodeOldJPEG=function(P,F,$,D,U,j){var Z,G,H,q,W=w.decode._decodeOldJPEGInit(P,F,$,D);if(W.jpegOffset!=null)for(Z=$+D-W.jpegOffset,H=new Uint8Array(Z),K=0;K<Z;K++)H[K]=F[W.jpegOffset+K];else{for(G=W.tables.length,(H=new Uint8Array(G+W.sosMarker.length+D+2)).set(W.tables),q=G,H[W.sofPosition+5]=P.height>>>8&255,H[W.sofPosition+6]=255&P.height,H[W.sofPosition+7]=P.width>>>8&255,H[W.sofPosition+8]=255&P.width,F[$]==255&&F[$+1]==SOS||(H.set(W.sosMarker,q),q+=sosMarker.length),K=0;K<D;K++)H[q++]=F[$+K];H[q++]=255,H[q++]=EOI}var Q=new w.JpegDecoder;Q.parse(H);for(var J=Q.getData({width:Q.width,height:Q.height,forceRGB:!0,isSourcePDF:!1}),K=0;K<J.length;K++)U[j+K]=J[K];P.t262&&P.t262[0]==6&&(P.t262[0]=2)},w.decode._decodePackBits=function(P,F,$,D,U){for(var j=new Int8Array(P.buffer),Z=new Int8Array(D.buffer),G=F+$;F<G;){var H=j[F];if(F++,H>=0&&H<128)for(var q=0;q<H+1;q++)Z[U]=j[F],U++,F++;if(H>=-127&&H<0){for(q=0;q<1-H;q++)Z[U]=j[F],U++;F++}}return U},w.decode._decodeThunder=function(P,F,$,D,U){for(var j=[0,1,0,-1],Z=[0,1,2,3,0,-3,-2,-1],G=F+$,H=2*U,q=0;F<G;){var W=P[F],Q=W>>>6,J=63&W;if(F++,Q==3&&(q=15&J,D[H>>>1]|=q<<4*(1-H&1),H++),Q==0)for(var K=0;K<J;K++)D[H>>>1]|=q<<4*(1-H&1),H++;if(Q==2)for(K=0;K<2;K++)(V=J>>>3*(1-K)&7)!=4&&(q+=Z[V],D[H>>>1]|=q<<4*(1-H&1),H++);if(Q==1)for(K=0;K<3;K++){var V;(V=J>>>2*(2-K)&3)!=2&&(q+=j[V],D[H>>>1]|=q<<4*(1-H&1),H++)}}},w.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},w.decode._lens=function(){var P=function(H,q,W,Q){for(var J=0;J<q.length;J++)H[q[J]]=W+J*Q},F="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",$="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",D="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",U="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",j="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";F=F.split(","),$=$.split(","),D=D.split(","),U=U.split(","),j=j.split(",");var Z={},G={};return P(Z,F,0,1),P(Z,D,64,64),P(Z,j,1792,64),P(G,$,0,1),P(G,U,64,64),P(G,j,1792,64),[Z,G]}(),w.decode._decodeG4=function(P,F,$,D,U,j,Z){for(var G=w.decode,H=F<<3,q=0,W="",Q=[],J=[],K=0;K<j;K++)J.push(0);J=G._makeDiff(J);for(var V=0,tt=0,X=0,ot=0,it=0,lt=0,at="",ht=0,et=8*Math.ceil(j/8);H>>>3<F+$;){X=G._findDiff(J,V+(V==0?0:1),1-it),ot=G._findDiff(J,X,it);var ut=0;if(Z==1&&(ut=P[H>>>3]>>>7-(7&H)&1),Z==2&&(ut=P[H>>>3]>>>(7&H)&1),H++,W+=ut,at=="H"){if(G._lens[it][W]!=null){var Et=G._lens[it][W];W="",q+=Et,Et<64&&(G._addNtimes(Q,q,it),V+=q,it=1-it,q=0,--ht==0&&(at=""))}}else W=="0001"&&(W="",G._addNtimes(Q,ot-V,it),V=ot),W=="001"&&(W="",at="H",ht=2),G._dmap[W]!=null&&(tt=X+G._dmap[W],G._addNtimes(Q,tt-V,it),V=tt,W="",it=1-it);Q.length==j&&at==""&&(G._writeBits(Q,D,8*U+lt*et),it=0,lt++,V=0,J=G._makeDiff(Q),Q=[])}},w.decode._findDiff=function(P,F,$){for(var D=0;D<P.length;D+=2)if(P[D]>=F&&P[D+1]==$)return P[D]},w.decode._makeDiff=function(P){var F=[];P[0]==1&&F.push(0,1);for(var $=1;$<P.length;$++)P[$-1]!=P[$]&&F.push($,P[$]);return F.push(P.length,0,P.length,1),F},w.decode._decodeG2=function(P,F,$,D,U,j,Z){for(var G=w.decode,H=F<<3,q=0,W="",Q=[],J=0,K=0,V=8*Math.ceil(j/8);H>>>3<F+$;){var tt=0;Z==1&&(tt=P[H>>>3]>>>7-(7&H)&1),Z==2&&(tt=P[H>>>3]>>>(7&H)&1),H++,W+=tt,(q=G._lens[J][W])!=null&&(G._addNtimes(Q,q,J),W="",q<64&&(J=1-J),Q.length==j&&(G._writeBits(Q,D,8*U+K*V),Q=[],K++,J=0,7&H&&(H+=8-(7&H)),q>=64&&(H+=8)))}},w.decode._decodeG3=function(P,F,$,D,U,j,Z,G){for(var H=w.decode,q=F<<3,W=0,Q="",J=[],K=[],V=0;V<j;V++)J.push(0);for(var tt=0,X=0,ot=0,it=0,lt=0,at=-1,ht="",et=0,ut=!0,Et=8*Math.ceil(j/8);q>>>3<F+$;){ot=H._findDiff(K,tt+(tt==0?0:1),1-lt),it=H._findDiff(K,ot,lt);var gt=0;if(Z==1&&(gt=P[q>>>3]>>>7-(7&q)&1),Z==2&&(gt=P[q>>>3]>>>(7&q)&1),q++,Q+=gt,ut){if(H._lens[lt][Q]!=null){var dt=H._lens[lt][Q];Q="",W+=dt,dt<64&&(H._addNtimes(J,W,lt),lt=1-lt,W=0)}}else ht=="H"?H._lens[lt][Q]!=null&&(dt=H._lens[lt][Q],Q="",W+=dt,dt<64&&(H._addNtimes(J,W,lt),tt+=W,lt=1-lt,W=0,--et==0&&(ht=""))):(Q=="0001"&&(Q="",H._addNtimes(J,it-tt,lt),tt=it),Q=="001"&&(Q="",ht="H",et=2),H._dmap[Q]!=null&&(X=ot+H._dmap[Q],H._addNtimes(J,X-tt,lt),tt=X,Q="",lt=1-lt));Q.endsWith("000000000001")&&(at>=0&&H._writeBits(J,D,8*U+at*Et),G&&(Z==1&&(ut=(P[q>>>3]>>>7-(7&q)&1)==1),Z==2&&(ut=(P[q>>>3]>>>(7&q)&1)==1),q++),Q="",lt=0,at++,tt=0,K=H._makeDiff(J),J=[])}J.length==j&&H._writeBits(J,D,8*U+at*Et)},w.decode._addNtimes=function(P,F,$){for(var D=0;D<F;D++)P.push($)},w.decode._writeBits=function(P,F,$){for(var D=0;D<P.length;D++)F[$+D>>>3]|=P[D]<<7-($+D&7)},w.decode._decodeLZW=w.decode._decodeLZW=function(){var P,F,$,D,U=0,j=0,Z=0,G=0,H=function(){var V=P>>>3,tt=(F[V]<<16|F[V+1]<<8|F[V+2])>>>24-(7&P)-j&(1<<j)-1;return P+=j,tt},q=new Uint32Array(16384),W=0,Q=function(V){j=V+1,U=G+1},J=function(V){for(var tt=V<<2,X=q[tt+2],ot=D+X-1;tt!=65535;)$[ot--]=q[tt],tt=q[tt+1];D+=X},K=function(V,tt){var X=U<<2,ot=V<<2;q[X]=q[3+(tt<<2)],q[X+1]=ot,q[X+2]=q[ot+2]+1,q[X+3]=q[ot+3],++U+1==1<<j&&j!=12&&j++};return function(V,tt,X,ot,it,lt){P=tt<<3,F=V,$=ot,D=it;var at=tt+X<<3,ht=0,et=0;for(function(ut){if(ut!=W){W=ut,G=1+(Z=1<<ut);for(var Et=0;Et<G+1;Et++)q[4*Et]=q[4*Et+3]=Et,q[4*Et+1]=65535,q[4*Et+2]=1}}(lt),Q(lt);P<at&&(ht=H())!=G;){if(ht==Z){if(Q(lt),(ht=H())==G)break;J(ht)}else ht<U?(J(ht),K(et,ht)):(K(et,et),J(U-1));et=ht}return D}}(),w.tags={},w._types=function(){var P=new Array(250);return P.fill(0),{basic:{main:P=P.concat([0,0,0,0,4,3,3,3,3,3,0,0,3,0,0,0,3,0,0,2,2,2,2,4,3,0,0,3,4,4,3,3,5,5,3,2,5,5,0,0,0,0,4,4,0,0,3,3,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,2,2,3,5,5,3,0,3,3,4,4,4,3,4,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),rest:{33432:2,33434:5,33437:5,34665:4,34850:3,34853:4,34855:3,34864:3,34866:4,36864:7,36867:2,36868:2,37121:7,37377:10,37378:5,37380:10,37381:5,37383:3,37384:3,37385:3,37386:5,37510:7,37520:2,37521:2,37522:2,40960:7,40961:3,40962:4,40963:4,40965:4,41486:5,41487:5,41488:3,41985:3,41986:3,41987:3,41988:5,41989:3,41990:3,41993:3,41994:3,41995:7,41996:3,42032:2,42033:2,42034:5,42036:2,42037:2,59932:7}},gps:{main:[1,2,5,2,5,1,5,5,0,9],rest:{18:2,29:2}}}}(),w._readIFD=function(P,F,$,D,U,j){var Z=P.readUshort(F,$);$+=2;var G={};j.debug&&g("   ".repeat(U),D.length-1,">>>----------------");for(var H=0;H<Z;H++){var q=P.readUshort(F,$);$+=2;var W=P.readUshort(F,$);$+=2;var Q=P.readUint(F,$);$+=4;var J=P.readUint(F,$);$+=4;var K=[];if(W==1||W==7){var V=Q<5?$-4:J;V+Q>F.buffer.byteLength&&(Q=F.buffer.byteLength-V),K=new Uint8Array(F.buffer,V,Q)}if(W==2){var tt=Q<5?$-4:J,X=F[tt],ot=Math.max(0,Math.min(Q-1,F.length-tt));X<128||ot==0?K.push(P.readASCII(F,tt,ot)):K=new Uint8Array(F.buffer,tt,ot)}if(W==3)for(var it=0;it<Q;it++)K.push(P.readUshort(F,(Q<3?$-4:J)+2*it));if(W==4||W==13)for(it=0;it<Q;it++)K.push(P.readUint(F,(Q<2?$-4:J)+4*it));if(W==5||W==10){var lt=W==5?P.readUint:P.readInt;for(it=0;it<Q;it++)K.push([lt(F,J+8*it),lt(F,J+8*it+4)])}if(W==8)for(it=0;it<Q;it++)K.push(P.readShort(F,(Q<3?$-4:J)+2*it));if(W==9)for(it=0;it<Q;it++)K.push(P.readInt(F,(Q<2?$-4:J)+4*it));if(W==11)for(it=0;it<Q;it++)K.push(P.readFloat(F,J+4*it));if(W==12)for(it=0;it<Q;it++)K.push(P.readDouble(F,J+8*it));if(Q==0||K.length!=0){if(j.debug&&g("   ".repeat(U),q,W,w.tags[q],K),G["t"+q]=K,!(q==330&&G.t272&&G.t272[0]=="DSLR-A100")){if(q==330||q==34665||q==34853||q==50740&&P.readUshort(F,P.readUint(K,0))<300||q==61440){var at=q==50740?[P.readUint(K,0)]:K,ht=[];for(it=0;it<at.length;it++)w._readIFD(P,F,at[it],ht,U+1,j);q==330&&(G.subIFD=ht),q==34665&&(G.exifIFD=ht[0]),q==34853&&(G.gpsiIFD=ht[0]),q==50740&&(G.dngPrvt=ht[0]),q==61440&&(G.fujiIFD=ht[0])}}if(q==37500&&j.parseMN){var et=K;if(P.readASCII(et,0,5)=="Nikon")G.makerNote=w.decode(et.slice(10).buffer)[0];else if(P.readASCII(et,0,5)=="OLYMP"||P.readASCII(et,0,9)=="OM SYSTEM"){var ut=[8208,8224,8240,8256,8272],Et=[];w._readIFD(P,et,et[1]==77?16:et[5]==85?12:8,Et,U+1,j);var gt=G.makerNote=Et.pop();for(it=0;it<ut.length;it++){var dt="t"+ut[it];gt[dt]!=null&&(w._readIFD(P,et,gt[dt][0],Et,U+1,j),gt[dt]=Et.pop())}gt.t12288&&(w._readIFD(P,gt.t12288,0,Et,U+1,j),gt.t12288=Et.pop())}else P.readUshort(F,J)<300&&P.readUshort(F,J+4)<=12&&(Et=[],w._readIFD(P,F,J,Et,U+1,j),G.makerNote=Et[0])}}else if(g(q,"unknown TIFF tag type: ",W,"num:",Q),H==0)return}return D.push(G),j.debug&&g("   ".repeat(U),"<<<---------------"),$},w._writeIFD=function(P,F,$,D,U){var j=Object.keys(U),Z=j.length;U.exifIFD&&Z--,U.gpsiIFD&&Z--,P.writeUshort($,D,Z);for(var G=(D+=2)+12*Z+4,H=0;H<j.length;H++){var q=j[H];if(q!="t34665"&&q!="t34853"){q=="exifIFD"&&(q="t34665"),q=="gpsiIFD"&&(q="t34853");var W=parseInt(q.slice(1)),Q=F.main[W];if(Q==null&&(Q=F.rest[W]),Q==null||Q==0)throw new Error("unknown type of tag: "+W);var J=U[q];W==34665&&(J=[G],G=w._writeIFD(P,F,$,G,U.exifIFD)[1]),W==34853&&(J=[G],G=w._writeIFD(P,w._types.gps,$,G,U.gpsiIFD)[1]),Q==2&&(J=J[0]+"\0");var K=J.length;P.writeUshort($,D,W),D+=2,P.writeUshort($,D,Q),D+=2,P.writeUint($,D,K);var V=[-1,1,1,2,4,8,0,1,0,4,8,0,8][Q]*K,tt=D+=4;if(V>4&&(P.writeUint($,D,G),tt=G),Q==1||Q==7)for(var X=0;X<K;X++)$[tt+X]=J[X];else if(Q==2)P.writeASCII($,tt,J);else if(Q==3)for(X=0;X<K;X++)P.writeUshort($,tt+2*X,J[X]);else if(Q==4)for(X=0;X<K;X++)P.writeUint($,tt+4*X,J[X]);else if(Q==5||Q==10){var ot=Q==5?P.writeUint:P.writeInt;for(X=0;X<K;X++){var it=J[X],lt=it[0],at=it[1];if(lt==null)throw"e";ot($,tt+8*X,lt),ot($,tt+8*X+4,at)}}else if(Q==9)for(X=0;X<K;X++)P.writeInt($,tt+4*X,J[X]);else{if(Q!=12)throw Q;for(X=0;X<K;X++)P.writeDouble($,tt+8*X,J[X])}V>4&&(G+=V+=1&V),D+=4}}return[D,G]},w.toRGBA8=function(P,F){function $(ae){return ae<.0031308?12.92*ae:1.055*Math.pow(ae,1/2.4)-.055}var D=P.width,U=P.height,j=D*U,Z=P.data,G=new Uint8Array(4*j),H=P.t262?P.t262[0]:2,q=P.t258?Math.min(32,P.t258[0]):1;P.t262==null&&q==1&&(H=0);var W=P.t277?P.t277[0]:P.t258?P.t258.length:[1,1,3,1,1,4,3][H],Q=P.t339?P.t339[0]:null;if(H==1&&q==32&&Q!=3)throw"e";var J=Math.ceil(W*q*D/8);if(H==0){F=1/256;for(var K=0;K<U;K++){var V=K*J,tt=K*D;if(q==1)for(var X=0;X<D;X++){var ot=tt+X<<2,it=Z[V+(X>>3)]>>7-(7&X)&1;G[ot]=G[ot+1]=G[ot+2]=255*(1-it),G[ot+3]=255}if(q==4)for(X=0;X<D;X++)ot=tt+X<<2,it=Z[V+(X>>1)]>>4-4*(1&X)&15,G[ot]=G[ot+1]=G[ot+2]=17*(15-it),G[ot+3]=255;if(q==8)for(X=0;X<D;X++)ot=tt+X<<2,it=Z[V+X],G[ot]=G[ot+1]=G[ot+2]=255-it,G[ot+3]=255;if(q==16)for(X=0;X<D;X++)ot=tt+X<<2,it=Z[(at=V+2*X)+1]<<8|Z[at],G[ot]=G[ot+1]=G[ot+2]=Math.min(255,255-~~(it*F)),G[ot+3]=255}}else if(H==1){F==null&&(F=1/256);var lt=3&Z.length?null:new Float32Array(Z.buffer);for(K=0;K<U;K++){if(V=K*J,tt=K*D,q==1)for(X=0;X<D;X++)ot=tt+X<<2,it=Z[V+(X>>3)]>>7-(7&X)&1,G[ot]=G[ot+1]=G[ot+2]=255*it,G[ot+3]=255;if(q==2)for(X=0;X<D;X++)ot=tt+X<<2,it=Z[V+(X>>2)]>>6-2*(3&X)&3,G[ot]=G[ot+1]=G[ot+2]=85*it,G[ot+3]=255;if(q==8)for(X=0;X<D;X++)ot=tt+X<<2,it=Z[V+X*W],G[ot]=G[ot+1]=G[ot+2]=it,G[ot+3]=255;if(q==16)for(X=0;X<D;X++)ot=tt+X<<2,it=Z[(at=V+2*X)+1]<<8|Z[at],G[ot]=G[ot+1]=G[ot+2]=Math.min(255,~~(it*F)),G[ot+3]=255;if(q==32)for(X=0;X<D;X++){var at;ot=tt+X<<2,it=lt[at=(V>>>2)+X],G[ot]=G[ot+1]=G[ot+2]=~~(.5+255*it),G[ot+3]=255}}}else if(H==2)if(q==8){if(W==1)for(X=0;X<j;X++)G[4*X]=G[4*X+1]=G[4*X+2]=Z[X],G[4*X+3]=255;if(W==3)for(X=0;X<j;X++){var ht=3*X;G[ot=X<<2]=Z[ht],G[ot+1]=Z[ht+1],G[ot+2]=Z[ht+2],G[ot+3]=255}if(W>=4)for(X=0;X<j;X++)ht=X*W,G[ot=X<<2]=Z[ht],G[ot+1]=Z[ht+1],G[ot+2]=Z[ht+2],G[ot+3]=Z[ht+3]}else if(q==16){if(W==4)for(X=0;X<j;X++)ht=8*X+1,G[ot=X<<2]=Z[ht],G[ot+1]=Z[ht+2],G[ot+2]=Z[ht+4],G[ot+3]=Z[ht+6];if(W==3)for(X=0;X<j;X++)ht=6*X+1,G[ot=X<<2]=Z[ht],G[ot+1]=Z[ht+2],G[ot+2]=Z[ht+4],G[ot+3]=255}else{if(q!=32)throw q;var et=new Float32Array(Z.buffer),ut=0;for(X=0;X<et.length;X++)ut=Math.min(ut,et[X]);if(ut<0)for(X=0;X<Z.length;X+=4){var Et=Z[X];Z[X]=Z[X+3],Z[X+3]=Et,Et=Z[X+1],Z[X+1]=Z[X+2],Z[X+2]=Et}var gt=[];for(X=0;X<65536;X++)gt.push($(X/65535));for(X=0;X<et.length;X++){var dt=Math.max(0,Math.min(1,et[X]));et[X]=gt[~~(.5+65535*dt)]}if(W==3)for(X=0;X<j;X++)ht=3*X,G[ot=X<<2]=~~(.5+255*et[ht]),G[ot+1]=~~(.5+255*et[ht+1]),G[ot+2]=~~(.5+255*et[ht+2]),G[ot+3]=255;else{if(W!=4)throw W;for(X=0;X<j;X++)ht=4*X,G[ot=X<<2]=~~(.5+255*et[ht]),G[ot+1]=~~(.5+255*et[ht+1]),G[ot+2]=~~(.5+255*et[ht+2]),G[ot+3]=~~(.5+255*et[ht+3])}}else if(H==3){var yt=P.t320,Nt=1<<q,Bt=q==8&&W>1&&P.t338&&P.t338[0]!=0;for(K=0;K<U;K++)for(var St=0;St<D;St++){ot=(X=K*D+St)<<2;var zt=0,kt=K*J;if(q==1)zt=Z[kt+(St>>>3)]>>>7-(7&St)&1;else if(q==2)zt=Z[kt+(St>>>2)]>>>6-2*(3&St)&3;else if(q==4)zt=Z[kt+(St>>>1)]>>>4-4*(1&St)&15;else{if(q!=8)throw q;zt=Z[kt+St*W]}G[ot]=yt[zt]>>8,G[ot+1]=yt[Nt+zt]>>8,G[ot+2]=yt[Nt+Nt+zt]>>8,G[ot+3]=Bt?Z[kt+St*W+1]:255}}else if(H==5){var Ct=W>4?1:0;for(X=0;X<j;X++){ot=X<<2;var Ut=X*W;if(window.UDOC){var Dt=Z[Ut],Tt=Z[Ut+1],Rt=Z[Ut+2],Lt=Z[Ut+3],Ht=UDOC.C.cmykToRgb([Dt*(1/255),Tt*(1/255),Rt*(1/255),Lt*(1/255)]);G[ot]=~~(.5+255*Ht[0]),G[ot+1]=~~(.5+255*Ht[1]),G[ot+2]=~~(.5+255*Ht[2])}else Dt=255-Z[Ut],Tt=255-Z[Ut+1],Rt=255-Z[Ut+2],Lt=(255-Z[Ut+3])*(1/255),G[ot]=~~(Dt*Lt+.5),G[ot+1]=~~(Tt*Lt+.5),G[ot+2]=~~(Rt*Lt+.5);G[ot+3]=255*(1-Ct)+Z[Ut+4]*Ct}}else if(H==6&&P.t278){var Wt=P.t278[0];for(K=0;K<U;K+=Wt){X=K*D;for(var Pt=Wt*D,nt=0;nt<Pt;nt++){ot=4*(X+nt),Rt=Z[(Ut=3*X+4*(nt>>>1))+(1&nt)];var Mt=Z[Ut+2]-128,ct=Z[Ut+3]-128,_t=Rt+((ct>>2)+(ct>>3)+(ct>>5)),bt=Rt-((Mt>>2)+(Mt>>4)+(Mt>>5))-((ct>>1)+(ct>>3)+(ct>>4)+(ct>>5)),xt=Rt+(Mt+(Mt>>1)+(Mt>>2)+(Mt>>6));G[ot]=Math.max(0,Math.min(255,_t)),G[ot+1]=Math.max(0,Math.min(255,bt)),G[ot+2]=Math.max(0,Math.min(255,xt)),G[ot+3]=255}}}else if(H==32845)for(K=0;K<U;K++)for(St=0;St<D;St++){ot=4*(K*D+St);var $t=Z[(Ut=6*(K*D+St))+1]<<8|Z[Ut],rt=($t=Math.pow(2,($t+.5)/256-64),(Z[Ut+3]+.5)/410),ft=(Z[Ut+5]+.5)/410,wt=9*rt/(6*rt-16*ft+12),vt=4*ft/(6*rt-16*ft+12),Gt=wt*$t/vt,Qt=(1-wt-vt)*$t/vt;_t=2.69*Gt-1.276*(Rt=$t)-.414*Qt,bt=-1.022*Gt+1.978*Rt+.044*Qt,xt=.061*Gt-.224*Rt+1.163*Qt,G[ot]=255*$(Math.min(_t,1)),G[ot+1]=255*$(Math.min(bt,1)),G[ot+2]=255*$(Math.min(xt,1)),G[ot+3]=255}else g("Unknown Photometric interpretation: "+H);return G},w.replaceIMG=function(P){P==null&&(P=document.getElementsByTagName("img"));for(var F=["tif","tiff","dng","cr2","nef"],$=0;$<P.length;$++){var D=P[$],U=D.getAttribute("src");if(U!=null){var j=U.split(".").pop().toLowerCase();if(F.indexOf(j)!=-1){var Z=new XMLHttpRequest;w._xhrs.push(Z),w._imgs.push(D),Z.open("GET",U),Z.responseType="arraybuffer",Z.onload=w._imgLoaded,Z.send()}}}},w._xhrs=[],w._imgs=[],w._imgLoaded=function(P){var F=w._xhrs.indexOf(P.target),$=w._imgs[F];w._xhrs.splice(F,1),w._imgs.splice(F,1),$.setAttribute("src",w.bufferToURI(P.target.response))},w.bufferToURI=function(P){var F=w.decode(P),$=F,D=0,U=$[0];F[0].subIFD&&($=$.concat(F[0].subIFD));for(var j=0;j<$.length;j++){var Z=$[j];if(!(Z.t258==null||Z.t258.length<3)){var G=Z.t256*Z.t257;G>D&&(D=G,U=Z)}}w.decodeImage(P,U,F);var H=w.toRGBA8(U),q=U.width,W=U.height,Q=document.createElement("canvas");Q.width=q,Q.height=W;var J=Q.getContext("2d"),K=new ImageData(new Uint8ClampedArray(H.buffer),q,W);return J.putImageData(K,0,0),Q.toDataURL()},w._binBE={nextZero:function(P,F){for(;P[F]!=0;)F++;return F},readUshort:function(P,F){return P[F]<<8|P[F+1]},readShort:function(P,F){var $=w._binBE.ui8;return $[0]=P[F+1],$[1]=P[F+0],w._binBE.i16[0]},readInt:function(P,F){var $=w._binBE.ui8;return $[0]=P[F+3],$[1]=P[F+2],$[2]=P[F+1],$[3]=P[F+0],w._binBE.i32[0]},readUint:function(P,F){var $=w._binBE.ui8;return $[0]=P[F+3],$[1]=P[F+2],$[2]=P[F+1],$[3]=P[F+0],w._binBE.ui32[0]},readASCII:function(P,F,$){for(var D="",U=0;U<$;U++)D+=String.fromCharCode(P[F+U]);return D},readFloat:function(P,F){for(var $=w._binBE.ui8,D=0;D<4;D++)$[D]=P[F+3-D];return w._binBE.fl32[0]},readDouble:function(P,F){for(var $=w._binBE.ui8,D=0;D<8;D++)$[D]=P[F+7-D];return w._binBE.fl64[0]},writeUshort:function(P,F,$){P[F]=$>>8&255,P[F+1]=255&$},writeInt:function(P,F,$){var D=w._binBE.ui8;w._binBE.i32[0]=$,P[F+3]=D[0],P[F+2]=D[1],P[F+1]=D[2],P[F+0]=D[3]},writeUint:function(P,F,$){P[F]=$>>24&255,P[F+1]=$>>16&255,P[F+2]=$>>8&255,P[F+3]=255&$},writeASCII:function(P,F,$){for(var D=0;D<$.length;D++)P[F+D]=$.charCodeAt(D)},writeDouble:function(P,F,$){w._binBE.fl64[0]=$;for(var D=0;D<8;D++)P[F+D]=w._binBE.ui8[7-D]}},w._binBE.ui8=new Uint8Array(8),w._binBE.i16=new Int16Array(w._binBE.ui8.buffer),w._binBE.i32=new Int32Array(w._binBE.ui8.buffer),w._binBE.ui32=new Uint32Array(w._binBE.ui8.buffer),w._binBE.fl32=new Float32Array(w._binBE.ui8.buffer),w._binBE.fl64=new Float64Array(w._binBE.ui8.buffer),w._binLE={nextZero:w._binBE.nextZero,readUshort:function(P,F){return P[F+1]<<8|P[F]},readShort:function(P,F){var $=w._binBE.ui8;return $[0]=P[F+0],$[1]=P[F+1],w._binBE.i16[0]},readInt:function(P,F){var $=w._binBE.ui8;return $[0]=P[F+0],$[1]=P[F+1],$[2]=P[F+2],$[3]=P[F+3],w._binBE.i32[0]},readUint:function(P,F){var $=w._binBE.ui8;return $[0]=P[F+0],$[1]=P[F+1],$[2]=P[F+2],$[3]=P[F+3],w._binBE.ui32[0]},readASCII:w._binBE.readASCII,readFloat:function(P,F){for(var $=w._binBE.ui8,D=0;D<4;D++)$[D]=P[F+D];return w._binBE.fl32[0]},readDouble:function(P,F){for(var $=w._binBE.ui8,D=0;D<8;D++)$[D]=P[F+D];return w._binBE.fl64[0]},writeUshort:function(P,F,$){P[F]=255&$,P[F+1]=$>>8&255},writeInt:function(P,F,$){var D=w._binBE.ui8;w._binBE.i32[0]=$,P[F+0]=D[0],P[F+1]=D[1],P[F+2]=D[2],P[F+3]=D[3]},writeUint:function(P,F,$){P[F]=$>>>0&255,P[F+1]=$>>>8&255,P[F+2]=$>>>16&255,P[F+3]=$>>>24&255},writeASCII:w._binBE.writeASCII},w._copyTile=function(P,F,$,D,U,j,Z,G){for(var H=Math.min(F,U-Z),q=Math.min($,j-G),W=0;W<q;W++)for(var Q=(G+W)*U+Z,J=W*F,K=0;K<H;K++)D[Q+K]=P[J+K]},w.LosslessJpegDecode=function(){var P,F;function $(){return P[F++]}function D(){return P[F++]<<8|P[F++]}function U(V){for(var tt=$(),X=[0,0,0,255],ot=[],it=0;it<16;it++)ot[it]=$();for(it=0;it<16;it++)for(var lt=0;lt<ot[it];lt++)X[j(X,0,it+1,1)+3]=$();var at=new Uint8Array(256);for(V[tt]=[new Uint8Array(X),at],it=0;it<256;it++){for(var ht=8,et=it,ut=0;X[ut+3]==255&&ht!=0;)ut=X[ut+(et>>--ht&1)];at[it]=ut}}function j(V,tt,X,ot){if(V[tt+3]!=255)return 0;if(X==0)return tt;for(var it=0;it<2;it++){V[tt+it]==0&&(V[tt+it]=V.length,V.push(0,0,ot,255));var lt=j(V,V[tt+it],X-1,ot+1);if(lt!=0)return lt}return 0}function Z(V){for(var tt=V.b,X=V.f;tt<25&&V.a<V.d;){var ot=V.data[V.a++];ot!=255||V.c||V.a++,X=X<<8|ot,tt+=8}if(tt<0)throw"e";V.b=tt,V.f=X}function G(V,tt){return tt.b<V&&Z(tt),tt.f>>(tt.b-=V)&65535>>16-V}function H(V,tt){var X=V[0],ot=0,it=255;tt.b<16&&Z(tt);var lt=tt.f>>tt.b-8&255;for(it=X[(ot=V[1][lt])+3],tt.b-=X[ot+2];it==255;)it=X[(ot=X[ot+(tt.f>>--tt.b&1)])+3];return it}function q(V,tt){return V<32768>>16-tt&&(V+=1-(1<<tt)),V}function W(V,tt){var X=H(V,tt);return X==0?0:X==16?-32768:q(G(X,tt),X)}function Q(V,tt,X,ot,it,lt){for(var at=0,ht=0;ht<lt;ht++){for(var et=ht*tt,ut=0;ut<tt;ut+=it){at++;for(var Et=0;Et<it;Et++)V[et+ut+Et]=W(ot[Et],X)}if(X.e!=0&&at%X.e==0&&ht!=0){for(var gt=X.a,dt=X.data;dt[gt]!=255||!(208<=dt[gt+1]&&dt[gt+1]<=215);)gt--;X.a=gt+2,X.f=0,X.b=0}}}function J(V,tt){return q(G(V,tt),V)}function K(V,tt,X,ot,it,lt,at,ht){for(var et=X*at,ut=it;ut<lt;ut++)V[ut]+=1<<ht-1;for(var Et=at;Et<et;Et+=at)for(ut=it;ut<lt;ut++)V[Et+ut]+=V[Et+ut-at];for(var gt=1;gt<ot;gt++){var dt=gt*et;for(ut=it;ut<lt;ut++)V[dt+ut]+=V[dt+ut-et];for(Et=at;Et<et;Et+=at)for(ut=it;ut<lt;ut++){var yt=dt+Et+ut,Nt=yt-et,Bt=V[yt-at],St=0;if(tt==0)St=0;else if(tt==1)St=Bt;else if(tt==2)St=V[Nt];else if(tt==3)St=V[Nt-at];else if(tt==4)St=Bt+(V[Nt]-V[Nt-at]);else if(tt==5)St=Bt+(V[Nt]-V[Nt-at]>>>1);else if(tt==6)St=V[Nt]+(Bt-V[Nt-at]>>>1);else{if(tt!=7)throw tt;St=Bt+V[Nt]>>>1}V[yt]+=St}}}return function(V){if(P=V,F=0,D()!=65496)throw"e";for(var tt=[],X=0,ot=0,it=0,lt=[],at=[],ht=[],et=0,ut=0,Et=0;;){var gt=D();if(gt!=65535){var dt=D();if(gt==65475){ot=$(),ut=D(),Et=D(),et=$();for(var yt=0;yt<et;yt++){var Nt=$(),Bt=$();if($()!=0)throw"e";tt[Nt]=[yt,Bt>>4,15&Bt]}}else if(gt==65476)for(var St=F+dt-2;F<St;)U(at);else{if(gt==65498){for(F++,yt=0;yt<et;yt++){var zt=tt[$()];ht[zt[0]]=at[$()>>>4],lt[zt[0]]=zt.slice(1)}X=$(),F+=2;break}gt==65501?it=D():F+=dt-2}}else F--}var kt=new(ot>8?Uint16Array:Uint8Array)(ut*Et*et),Ct={b:0,f:0,c:X==8,a:F,data:P,d:P.length,e:it};if(Ct.c)(function(Gt,Qt,ae,se,ie){for(var At=P.length-F,st=0;st<At;st+=4){var mt=P[F+st];P[F+st]=P[F+st+3],P[F+st+3]=mt,mt=P[F+st+1],P[F+st+1]=P[F+st+2],P[F+st+2]=mt}for(var Ot=0;Ot<ie;Ot++)for(var qt=32768,Yt=32768,Jt=0;Jt<Qt;Jt+=2){var Ft=H(se,ae),re=H(se,ae);Ft!=0&&(qt+=J(Ft,ae)),re!=0&&(Yt+=J(re,ae)),Gt[Ot*Qt+Jt]=65535&qt,Gt[Ot*Qt+Jt+1]=65535&Yt}})(kt,Et*et,Ct,ht[0],ut);else{var Ut=[],Dt=0,Tt=0;for(yt=0;yt<et;yt++){var Rt=lt[yt];(xt=Rt[0])>Dt&&(Dt=xt),(bt=Rt[1])>Tt&&(Tt=bt),Ut.push(xt*bt)}if(Dt!=1||Tt!=1){if(et!=3||Ut[1]!=1||Ut[2]!=1||Dt!=2||Tt!=1&&Tt!=2)throw"e";var Lt=[],Ht=0;for(yt=0;yt<et;yt++){for(var Wt=0;Wt<Ut[yt];Wt++)Lt.push(ht[yt]);Ht+=Ut[yt]}var Pt=Et/Dt,nt=ut/Tt,Mt=Pt*nt;Q(kt,Pt*Ht,Ct,Lt,Ht,nt),K(kt,X,Pt,nt,Ht-2,Ht,Ht,ot);var ct=new Uint16Array(Mt*Ut[0]);if(Dt==2&&Tt==2){for(yt=0;yt<Mt;yt++)ct[4*yt]=kt[6*yt],ct[4*yt+1]=kt[6*yt+1],ct[4*yt+2]=kt[6*yt+2],ct[4*yt+3]=kt[6*yt+3];for(K(ct,X,4*Pt,nt,0,1,1,ot),yt=0;yt<Mt;yt++)kt[6*yt]=ct[4*yt],kt[6*yt+1]=ct[4*yt+1],kt[6*yt+2]=ct[4*yt+2],kt[6*yt+3]=ct[4*yt+3]}if(Dt==2&&Tt==1){for(yt=0;yt<Mt;yt++)ct[2*yt]=kt[4*yt],ct[2*yt+1]=kt[4*yt+1];for(K(ct,X,2*Pt,nt,0,1,1,ot),yt=0;yt<Mt;yt++)kt[4*yt]=ct[2*yt],kt[4*yt+1]=ct[2*yt+1]}for(var _t=kt.slice(0),bt=0;bt<ut;bt++)if(Tt==2)for(var xt=0;xt<Et;xt++){var $t=((bt>>>1)*Pt+(xt>>>1))*Ht,rt=2*(1&bt)+(1&xt);kt[ft=(bt*Et+xt)*et]=_t[$t+rt],kt[ft+1]=_t[$t+4],kt[ft+2]=_t[$t+5]}else for(xt=0;xt<Et;xt++){var ft;$t=(bt*Pt+(xt>>>1))*Ht,rt=1&xt,kt[ft=(bt*Et+xt)*et]=_t[$t+rt],kt[ft+1]=_t[$t+2],kt[ft+2]=_t[$t+3]}}else if(Q(kt,Et*et,Ct,ht,et,ut),it==0)K(kt,X,Et,ut,0,et,et,ot);else{var wt=Math.floor(it/Et);for(bt=0;bt<ut;bt+=wt){var vt=kt.slice(bt*Et*et,(bt+wt)*Et*et);K(vt,X,Et,wt,0,et,et,ot),kt.set(vt,bt*Et*et)}}}return kt}}(),function(){var P=2,F=4,$=5,D=6,U=7,j=12,Z=13,G=14,H=15,q=17;function W(lt){var at={c:new Int8Array(2<<lt.u)};return function(ht,et,ut){var Et=[et,3*et+18,5*et+67,7*et+276,ut];ht.o=et,ht.w=(Et[4]+2*et)/(2*et+1)+1|0,ht.v=Math.ceil(Math.log2(ht.w)),ht.t=9,function(gt,dt){for(var yt=-dt[4],Nt=0;yt<=dt[4];Nt++,yt++)gt[Nt]=yt<=-dt[3]?-4:yt<=-dt[2]?-3:yt<=-dt[1]?-2:yt<-dt[0]?-1:yt<=dt[0]?0:yt<dt[1]?1:yt<dt[2]?2:yt<dt[3]?3:4}(ht.c,Et)}(at,0,lt.g),at}function Q(lt){for(var at=[[],[],[]],ht=Math.max(2,lt.w+32>>>6),et=0;et<3;et++)for(var ut=0;ut<41;ut++)at[et][ut]=[ht,1];return at}function J(lt,at){var ht=0,et=8-lt.a;if(lt.j,lt.a,at){if(at>=et)do ht<<=et,at-=et,ht|=lt[lt.j]&(1<<et)-1,lt.j++,et=8;while(at>=8);at&&(ht<<=at,et-=at,ht|=lt[lt.j]>>>et&(1<<at)-1),lt.a=8-et}return ht}function K(lt,at,ht,et,ut,Et,gt,dt){dt==null&&(dt=0);var yt,Nt,Bt,St,zt,kt,Ct=Et+1,Ut=Ct%2,Dt=0,Tt=et[ut],Rt=et[ut-1],Lt=et[ut-2][Ct],Ht=Rt[Ct-1],Wt=Rt[Ct],Pt=Rt[Ct+1],nt=Tt[Ct-1],Mt=Tt[Ct+1],ct=Math.abs;if(Ut&&(Bt=ct(Pt-Wt),St=ct(Lt-Wt),zt=ct(Ht-Wt)),Ut){if(kt=(kt=Bt>zt&&St<Bt?Lt+Ht:Bt<zt&&St<zt?Lt+Pt:Pt+Ht)+2*Wt>>>2,dt)return void(Tt[Ct]=kt);yt=at.t*at.c[lt.g+Wt-Lt]+at.c[lt.g+Ht-Wt]}else kt=Wt>Ht&&Wt>Pt||Wt<Ht&&Wt<Pt?Mt+nt+2*Wt>>>2:nt+Mt>>>1,yt=at.t*at.c[lt.g+Wt-Ht]+at.c[lt.g+Ht-nt];Nt=ct(yt);var _t=function(xt){for(var $t=-1,rt=0;!rt;$t++)rt=xt[xt.j]>>>7-xt.a&1,xt.a++,xt.a&=7,xt.a||xt.j++;return $t}(ht);if(_t<lt.n-at.v-1){var bt=function(xt,$t){var rt=0;if($t<xt)for(;rt<=14&&$t<<++rt<xt;);return rt}(gt[Nt][0],gt[Nt][1]);Dt=J(ht,bt)+(_t<<bt)}else Dt=J(ht,at.v)+1;Dt=1&Dt?-1-(Dt>>>1):Dt>>>1,gt[Nt][0]+=ct(Dt),gt[Nt][1]==lt.f&&(gt[Nt][0]>>>=1,gt[Nt][1]>>>=1),gt[Nt][1]++,kt=yt<0?kt-Dt:kt+Dt,lt.i&&(kt<0?kt+=at.w:kt>lt.g&&(kt-=at.w)),Tt[Ct]=kt>=0?Math.min(kt,lt.g):0}function V(lt,at,ht){for(var et=lt[0].length,ut=at;ut<=ht;ut++)lt[ut][0]=lt[ut-1][1],lt[ut][et-1]=lt[ut-1][et-2]}function tt(lt){V(lt,U,j),V(lt,P,F),V(lt,H,q)}function X(lt,at,ht,et,ut,Et,gt,dt,yt,Nt,Bt,St,zt){for(var kt=0,Ct=1,Ut=ut<Z&&ut>F;Ct<lt.m;)kt<lt.m&&(K(lt,at,ht,et,ut,kt,gt[yt],lt.h&&(Ut&&Nt||!Ut&&(Bt||(kt&St)==zt))),K(lt,at,ht,et,Et,kt,gt[yt],lt.h&&(!Ut&&Nt||Ut&&(Bt||(kt&St)==zt))),kt+=2),kt>8&&(K(lt,at,ht,et,ut,Ct,dt[yt]),K(lt,at,ht,et,Et,Ct,dt[yt]),Ct+=2);tt(et)}function ot(lt,at,ht,et,ut,Et){X(lt,at,ht,et,P,U,ut,Et,0,0,1,0,8),X(lt,at,ht,et,8,H,ut,Et,1,0,1,0,8),X(lt,at,ht,et,3,9,ut,Et,2,1,0,3,0),X(lt,at,ht,et,10,16,ut,Et,0,0,0,3,2),X(lt,at,ht,et,F,11,ut,Et,1,0,0,3,2),X(lt,at,ht,et,j,q,ut,Et,2,1,0,3,0)}function it(lt,at,ht,et,ut,Et){var gt=Et.length,dt=lt.l;ut+1==lt.s&&(dt=lt.e-ut*lt.l);for(var yt=6*lt.e*et+ut*lt.l,Nt=0;Nt<6;Nt++){for(var Bt=0;Bt<dt;Bt++){var St,zt=Et[Nt%gt][Bt%gt];St=zt==0?P+(Nt>>>1):zt==2?H+(Nt>>>1):U+Nt;var kt=lt.h?(2*Bt/3&2147483646|Bt%3&1)+(Bt%3>>>1):Bt>>>1;at[yt+Bt]=ht[St][kt+1]}yt+=lt.e}}w._decompressRAF=function(lt,at){var ht=function(Ct){var Ut=w._binBE.readUshort,Dt={b:Ut(Ct,0),i:Ct[2],C:Ct[3],u:Ct[4],q:Ut(Ct,5),k:Ut(Ct,7),e:Ut(Ct,9),l:Ut(Ct,11),s:Ct[13],d:Ut(Ct,14)};if(Dt.b!=18771||Dt.i>1||Dt.q<6||Dt.q%6||Dt.e<768||Dt.e%24||Dt.l!=768||Dt.k<Dt.l||Dt.k%Dt.l||Dt.k-Dt.e>=Dt.l||Dt.s>16||Dt.s!=Dt.k/Dt.l||Dt.s!=Math.ceil(Dt.e/Dt.l)||Dt.d!=Dt.q/6||Dt.u!=12&&Dt.u!=14&&Dt.u!=16||Dt.C!=16&&Dt.C!=0)throw"Invalid data";if(Dt.i==0)throw"Not implemented. We need this file!";return Dt.h=Dt.C==16,Dt.m=0|(Dt.h?2*Dt.l/3:Dt.l>>>1),Dt.A=Dt.m+2,Dt.f=64,Dt.g=(1<<Dt.u)-1,Dt.n=4*Dt.u,Dt}(lt),et=function(Ct,Ut){var Dt=new Array(Ut.s),Tt=4*Ut.s,Rt=16+Tt;12&Tt&&(Rt+=16-(12&Tt));for(var Lt=0,Ht=16;Lt<Ut.s;Ht+=4){var Wt=w._binBE.readUint(Ct,Ht);Dt[Lt]=Ct.slice(Rt,Rt+Wt),Dt[Lt].j=0,Dt[Lt].a=0,Rt+=Wt,Lt++}if(Rt!=Ct.length)throw"Invalid data";return Dt}(lt,ht),ut=W(ht),Et=new Int16Array(ht.e*ht.q);at==null&&(at=ht.h?[[1,1,0,1,1,2],[1,1,2,1,1,0],[2,0,1,0,2,1],[1,1,2,1,1,0],[1,1,0,1,1,2],[0,2,1,2,0,1]]:[[0,1],[3,2]]);for(var gt=[[0,3],[1,F],[$,11],[D,j],[Z,16],[G,q]],dt=[],yt=0;yt<18;yt++)dt[yt]=new Uint16Array(ht.A);for(var Nt=0;Nt<ht.s;Nt++){var Bt=Q(ut),St=Q(ut);for(yt=0;yt<18;yt++)for(var zt=0;zt<ht.A;zt++)dt[yt][zt]=0;for(var kt=0;kt<ht.d;kt++){for(ot(ht,ut,et[Nt],dt,Bt,St),yt=0;yt<6;yt++)for(zt=0;zt<ht.A;zt++)dt[gt[yt][0]][zt]=dt[gt[yt][1]][zt];for(it(ht,Et,dt,kt,Nt,at),yt=P;yt<18;yt++)if([$,D,Z,G].indexOf(yt)==-1)for(zt=0;zt<ht.A;zt++)dt[yt][zt]=0;tt(dt)}}return Et}}()}(m,typeof commonjsRequire=="function"?requirePako():self.pako)})()})(UTIF);var UTIFExports=UTIF.exports,utif=getDefaultExportFromCjs(UTIFExports),util$1,objectUtil;function getDimensionValue(d){return typeof d=="number"?d:d instanceof Uint8Array?d[0]:typeof d[0]=="string"?parseInt(d[0]):d[0]}function tiff(){return{mime:"image/tiff",encode:d=>{const m=utif.encodeImage(d.data,d.width,d.height);return Buffer$1.from(m)},decode:d=>{const m=utif.decode(d),g=m[0];if(!g)throw new Error("No page found in TIFF");if(!g.t256)throw new Error("No image width found in TIFF");if(!g.t257)throw new Error("No image height found in TIFF");m.forEach(I=>{utif.decodeImage(d,I)});const w=utif.toRGBA8(g);return{data:Buffer$1.from(w),width:getDimensionValue(g.t256),height:getDimensionValue(g.t257)}}}}(function(d){d.assertEqual=m=>m,d.assertIs=function(m){},d.assertNever=function(m){throw new Error},d.arrayToEnum=m=>{const g={};for(const w of m)g[w]=w;return g},d.getValidEnumValues=m=>{const g=d.objectKeys(m).filter(I=>typeof m[m[I]]!="number"),w={};for(const I of g)w[I]=m[I];return d.objectValues(w)},d.objectValues=m=>d.objectKeys(m).map(function(g){return m[g]}),d.objectKeys=typeof Object.keys=="function"?m=>Object.keys(m):m=>{const g=[];for(const w in m)Object.prototype.hasOwnProperty.call(m,w)&&g.push(w);return g},d.find=(m,g)=>{for(const w of m)if(g(w))return w},d.isInteger=typeof Number.isInteger=="function"?m=>Number.isInteger(m):m=>typeof m=="number"&&isFinite(m)&&Math.floor(m)===m,d.joinValues=function(m,g=" | "){return m.map(w=>typeof w=="string"?`'${w}'`:w).join(g)},d.jsonStringifyReplacer=(m,g)=>typeof g=="bigint"?g.toString():g})(util$1||(util$1={})),function(d){d.mergeShapes=(m,g)=>({...m,...g})}(objectUtil||(objectUtil={}));const ZodParsedType=util$1.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=d=>{switch(typeof d){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(d)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(d)?ZodParsedType.array:d===null?ZodParsedType.null:d.then&&typeof d.then=="function"&&d.catch&&typeof d.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&d instanceof Map?ZodParsedType.map:typeof Set<"u"&&d instanceof Set?ZodParsedType.set:typeof Date<"u"&&d instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util$1.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=d=>JSON.stringify(d,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(m){super(),this.issues=[],this.addIssue=w=>{this.issues=[...this.issues,w]},this.addIssues=(w=[])=>{this.issues=[...this.issues,...w]};const g=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,g):this.__proto__=g,this.name="ZodError",this.issues=m}get errors(){return this.issues}format(m){const g=m||function(P){return P.message},w={_errors:[]},I=P=>{for(const F of P.issues)if(F.code==="invalid_union")F.unionErrors.map(I);else if(F.code==="invalid_return_type")I(F.returnTypeError);else if(F.code==="invalid_arguments")I(F.argumentsError);else if(F.path.length===0)w._errors.push(g(F));else{let $=w,D=0;for(;D<F.path.length;){const U=F.path[D];D===F.path.length-1?($[U]=$[U]||{_errors:[]},$[U]._errors.push(g(F))):$[U]=$[U]||{_errors:[]},$=$[U],D++}}};return I(this),w}static assert(m){if(!(m instanceof ZodError))throw new Error(`Not a ZodError: ${m}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util$1.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(m=g=>g.message){const g={},w=[];for(const I of this.issues)I.path.length>0?(g[I.path[0]]=g[I.path[0]]||[],g[I.path[0]].push(m(I))):w.push(m(I));return{formErrors:w,fieldErrors:g}}get formErrors(){return this.flatten()}}ZodError.create=d=>new ZodError(d);const errorMap=(d,m)=>{let g;switch(d.code){case ZodIssueCode.invalid_type:g=d.received===ZodParsedType.undefined?"Required":`Expected ${d.expected}, received ${d.received}`;break;case ZodIssueCode.invalid_literal:g=`Invalid literal value, expected ${JSON.stringify(d.expected,util$1.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:g=`Unrecognized key(s) in object: ${util$1.joinValues(d.keys,", ")}`;break;case ZodIssueCode.invalid_union:g="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:g=`Invalid discriminator value. Expected ${util$1.joinValues(d.options)}`;break;case ZodIssueCode.invalid_enum_value:g=`Invalid enum value. Expected ${util$1.joinValues(d.options)}, received '${d.received}'`;break;case ZodIssueCode.invalid_arguments:g="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:g="Invalid function return type";break;case ZodIssueCode.invalid_date:g="Invalid date";break;case ZodIssueCode.invalid_string:typeof d.validation=="object"?"includes"in d.validation?(g=`Invalid input: must include "${d.validation.includes}"`,typeof d.validation.position=="number"&&(g=`${g} at one or more positions greater than or equal to ${d.validation.position}`)):"startsWith"in d.validation?g=`Invalid input: must start with "${d.validation.startsWith}"`:"endsWith"in d.validation?g=`Invalid input: must end with "${d.validation.endsWith}"`:util$1.assertNever(d.validation):g=d.validation!=="regex"?`Invalid ${d.validation}`:"Invalid";break;case ZodIssueCode.too_small:g=d.type==="array"?`Array must contain ${d.exact?"exactly":d.inclusive?"at least":"more than"} ${d.minimum} element(s)`:d.type==="string"?`String must contain ${d.exact?"exactly":d.inclusive?"at least":"over"} ${d.minimum} character(s)`:d.type==="number"?`Number must be ${d.exact?"exactly equal to ":d.inclusive?"greater than or equal to ":"greater than "}${d.minimum}`:d.type==="date"?`Date must be ${d.exact?"exactly equal to ":d.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(d.minimum))}`:"Invalid input";break;case ZodIssueCode.too_big:g=d.type==="array"?`Array must contain ${d.exact?"exactly":d.inclusive?"at most":"less than"} ${d.maximum} element(s)`:d.type==="string"?`String must contain ${d.exact?"exactly":d.inclusive?"at most":"under"} ${d.maximum} character(s)`:d.type==="number"?`Number must be ${d.exact?"exactly":d.inclusive?"less than or equal to":"less than"} ${d.maximum}`:d.type==="bigint"?`BigInt must be ${d.exact?"exactly":d.inclusive?"less than or equal to":"less than"} ${d.maximum}`:d.type==="date"?`Date must be ${d.exact?"exactly":d.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(d.maximum))}`:"Invalid input";break;case ZodIssueCode.custom:g="Invalid input";break;case ZodIssueCode.invalid_intersection_types:g="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:g=`Number must be a multiple of ${d.multipleOf}`;break;case ZodIssueCode.not_finite:g="Number must be finite";break;default:g=m.defaultError,util$1.assertNever(d)}return{message:g}};let overrideErrorMap=errorMap;function setErrorMap(d){overrideErrorMap=d}function getErrorMap(){return overrideErrorMap}const makeIssue=d=>{const{data:m,path:g,errorMaps:w,issueData:I}=d,P=[...g,...I.path||[]],F={...I,path:P};if(I.message!==void 0)return{...I,path:P,message:I.message};let $="";const D=w.filter(U=>!!U).slice().reverse();for(const U of D)$=U(F,{data:m,defaultError:$}).message;return{...I,path:P,message:$}},EMPTY_PATH=[];function addIssueToContext(d,m){const g=getErrorMap(),w=makeIssue({issueData:m,data:d.data,path:d.path,errorMaps:[d.common.contextualErrorMap,d.schemaErrorMap,g,g===errorMap?void 0:errorMap].filter(I=>!!I)});d.common.issues.push(w)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(m,g){const w=[];for(const I of g){if(I.status==="aborted")return INVALID;I.status==="dirty"&&m.dirty(),w.push(I.value)}return{status:m.value,value:w}}static async mergeObjectAsync(m,g){const w=[];for(const I of g){const P=await I.key,F=await I.value;w.push({key:P,value:F})}return ParseStatus.mergeObjectSync(m,w)}static mergeObjectSync(m,g){const w={};for(const I of g){const{key:P,value:F}=I;if(P.status==="aborted"||F.status==="aborted")return INVALID;P.status==="dirty"&&m.dirty(),F.status==="dirty"&&m.dirty(),P.value==="__proto__"||F.value===void 0&&!I.alwaysSet||(w[P.value]=F.value)}return{status:m.value,value:w}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=d=>({status:"dirty",value:d}),OK=d=>({status:"valid",value:d}),isAborted=d=>d.status==="aborted",isDirty=d=>d.status==="dirty",isValid=d=>d.status==="valid",isAsync=d=>typeof Promise<"u"&&d instanceof Promise;function __classPrivateFieldGet(d,m,g,w){if(typeof m=="function"?d!==m||!0:!m.has(d))throw new TypeError("Cannot read private member from an object whose class did not declare it");return m.get(d)}function __classPrivateFieldSet(d,m,g,w,I){if(typeof m=="function"?d!==m||!0:!m.has(d))throw new TypeError("Cannot write private member to an object whose class did not declare it");return m.set(d,g),g}var errorUtil,_ZodEnum_cache,_ZodNativeEnum_cache;typeof SuppressedError=="function"&&SuppressedError,function(d){d.errToObj=m=>typeof m=="string"?{message:m}:m||{},d.toString=m=>typeof m=="string"?m:m==null?void 0:m.message}(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(m,g,w,I){this._cachedPath=[],this.parent=m,this.data=g,this._path=w,this._key=I}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(d,m)=>{if(isValid(m))return{success:!0,data:m.value};if(!d.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const g=new ZodError(d.common.issues);return this._error=g,this._error}}};function processCreateParams(d){if(!d)return{};const{errorMap:m,invalid_type_error:g,required_error:w,description:I}=d;if(m&&(g||w))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return m?{errorMap:m,description:I}:{errorMap:(P,F)=>{var $,D;const{message:U}=d;return P.code==="invalid_enum_value"?{message:U??F.defaultError}:F.data===void 0?{message:($=U??w)!==null&&$!==void 0?$:F.defaultError}:P.code!=="invalid_type"?{message:F.defaultError}:{message:(D=U??g)!==null&&D!==void 0?D:F.defaultError}},description:I}}class ZodType{constructor(m){this.spa=this.safeParseAsync,this._def=m,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(m){return getParsedType(m.data)}_getOrReturnCtx(m,g){return g||{common:m.parent.common,data:m.data,parsedType:getParsedType(m.data),schemaErrorMap:this._def.errorMap,path:m.path,parent:m.parent}}_processInputParams(m){return{status:new ParseStatus,ctx:{common:m.parent.common,data:m.data,parsedType:getParsedType(m.data),schemaErrorMap:this._def.errorMap,path:m.path,parent:m.parent}}}_parseSync(m){const g=this._parse(m);if(isAsync(g))throw new Error("Synchronous parse encountered promise.");return g}_parseAsync(m){const g=this._parse(m);return Promise.resolve(g)}parse(m,g){const w=this.safeParse(m,g);if(w.success)return w.data;throw w.error}safeParse(m,g){var w;const I={common:{issues:[],async:(w=g==null?void 0:g.async)!==null&&w!==void 0&&w,contextualErrorMap:g==null?void 0:g.errorMap},path:(g==null?void 0:g.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:m,parsedType:getParsedType(m)},P=this._parseSync({data:m,path:I.path,parent:I});return handleResult(I,P)}async parseAsync(m,g){const w=await this.safeParseAsync(m,g);if(w.success)return w.data;throw w.error}async safeParseAsync(m,g){const w={common:{issues:[],contextualErrorMap:g==null?void 0:g.errorMap,async:!0},path:(g==null?void 0:g.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:m,parsedType:getParsedType(m)},I=this._parse({data:m,path:w.path,parent:w}),P=await(isAsync(I)?I:Promise.resolve(I));return handleResult(w,P)}refine(m,g){const w=I=>typeof g=="string"||g===void 0?{message:g}:typeof g=="function"?g(I):g;return this._refinement((I,P)=>{const F=m(I),$=()=>P.addIssue({code:ZodIssueCode.custom,...w(I)});return typeof Promise<"u"&&F instanceof Promise?F.then(D=>!!D||($(),!1)):!!F||($(),!1)})}refinement(m,g){return this._refinement((w,I)=>!!m(w)||(I.addIssue(typeof g=="function"?g(w,I):g),!1))}_refinement(m){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:m}})}superRefine(m){return this._refinement(m)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(m){return ZodUnion.create([this,m],this._def)}and(m){return ZodIntersection.create(this,m,this._def)}transform(m){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:m}})}default(m){const g=typeof m=="function"?m:()=>m;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:g,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(m){const g=typeof m=="function"?m:()=>m;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:g,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(m){return new this.constructor({...this._def,description:m})}pipe(m){return ZodPipeline.create(this,m)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(d){let m="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return d.precision?m=`${m}\\.\\d{${d.precision}}`:d.precision==null&&(m=`${m}(\\.\\d+)?`),m}function timeRegex(d){return new RegExp(`^${timeRegexSource(d)}$`)}function datetimeRegex(d){let m=`${dateRegexSource}T${timeRegexSource(d)}`;const g=[];return g.push(d.local?"Z?":"Z"),d.offset&&g.push("([+-]\\d{2}:?\\d{2})"),m=`${m}(${g.join("|")})`,new RegExp(`^${m}$`)}function isValidIP(d,m){return!(m!=="v4"&&m||!ipv4Regex.test(d))||!(m!=="v6"&&m||!ipv6Regex.test(d))}class ZodString extends ZodType{_parse(m){if(this._def.coerce&&(m.data=String(m.data)),this._getType(m)!==ZodParsedType.string){const I=this._getOrReturnCtx(m);return addIssueToContext(I,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:I.parsedType}),INVALID}const g=new ParseStatus;let w;for(const I of this._def.checks)if(I.kind==="min")m.data.length<I.value&&(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.too_small,minimum:I.value,type:"string",inclusive:!0,exact:!1,message:I.message}),g.dirty());else if(I.kind==="max")m.data.length>I.value&&(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.too_big,maximum:I.value,type:"string",inclusive:!0,exact:!1,message:I.message}),g.dirty());else if(I.kind==="length"){const P=m.data.length>I.value,F=m.data.length<I.value;(P||F)&&(w=this._getOrReturnCtx(m,w),P?addIssueToContext(w,{code:ZodIssueCode.too_big,maximum:I.value,type:"string",inclusive:!0,exact:!0,message:I.message}):F&&addIssueToContext(w,{code:ZodIssueCode.too_small,minimum:I.value,type:"string",inclusive:!0,exact:!0,message:I.message}),g.dirty())}else if(I.kind==="email")emailRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"email",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"emoji",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="uuid")uuidRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"uuid",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="nanoid")nanoidRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="cuid")cuidRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"cuid",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="cuid2")cuid2Regex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="ulid")ulidRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"ulid",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="url")try{new URL(m.data)}catch{w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"url",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty()}else I.kind==="regex"?(I.regex.lastIndex=0,I.regex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"regex",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty())):I.kind==="trim"?m.data=m.data.trim():I.kind==="includes"?m.data.includes(I.value,I.position)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.invalid_string,validation:{includes:I.value,position:I.position},message:I.message}),g.dirty()):I.kind==="toLowerCase"?m.data=m.data.toLowerCase():I.kind==="toUpperCase"?m.data=m.data.toUpperCase():I.kind==="startsWith"?m.data.startsWith(I.value)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.invalid_string,validation:{startsWith:I.value},message:I.message}),g.dirty()):I.kind==="endsWith"?m.data.endsWith(I.value)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.invalid_string,validation:{endsWith:I.value},message:I.message}),g.dirty()):I.kind==="datetime"?datetimeRegex(I).test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.invalid_string,validation:"datetime",message:I.message}),g.dirty()):I.kind==="date"?dateRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.invalid_string,validation:"date",message:I.message}),g.dirty()):I.kind==="time"?timeRegex(I).test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.invalid_string,validation:"time",message:I.message}),g.dirty()):I.kind==="duration"?durationRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"duration",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty()):I.kind==="ip"?isValidIP(m.data,I.version)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"ip",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty()):I.kind==="base64"?base64Regex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"base64",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty()):util$1.assertNever(I);return{status:g.value,value:m.data}}_regex(m,g,w){return this.refinement(I=>m.test(I),{validation:g,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(w)})}_addCheck(m){return new ZodString({...this._def,checks:[...this._def.checks,m]})}email(m){return this._addCheck({kind:"email",...errorUtil.errToObj(m)})}url(m){return this._addCheck({kind:"url",...errorUtil.errToObj(m)})}emoji(m){return this._addCheck({kind:"emoji",...errorUtil.errToObj(m)})}uuid(m){return this._addCheck({kind:"uuid",...errorUtil.errToObj(m)})}nanoid(m){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(m)})}cuid(m){return this._addCheck({kind:"cuid",...errorUtil.errToObj(m)})}cuid2(m){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(m)})}ulid(m){return this._addCheck({kind:"ulid",...errorUtil.errToObj(m)})}base64(m){return this._addCheck({kind:"base64",...errorUtil.errToObj(m)})}ip(m){return this._addCheck({kind:"ip",...errorUtil.errToObj(m)})}datetime(m){var g,w;return typeof m=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:m}):this._addCheck({kind:"datetime",precision:(m==null?void 0:m.precision)===void 0?null:m==null?void 0:m.precision,offset:(g=m==null?void 0:m.offset)!==null&&g!==void 0&&g,local:(w=m==null?void 0:m.local)!==null&&w!==void 0&&w,...errorUtil.errToObj(m==null?void 0:m.message)})}date(m){return this._addCheck({kind:"date",message:m})}time(m){return typeof m=="string"?this._addCheck({kind:"time",precision:null,message:m}):this._addCheck({kind:"time",precision:(m==null?void 0:m.precision)===void 0?null:m==null?void 0:m.precision,...errorUtil.errToObj(m==null?void 0:m.message)})}duration(m){return this._addCheck({kind:"duration",...errorUtil.errToObj(m)})}regex(m,g){return this._addCheck({kind:"regex",regex:m,...errorUtil.errToObj(g)})}includes(m,g){return this._addCheck({kind:"includes",value:m,position:g==null?void 0:g.position,...errorUtil.errToObj(g==null?void 0:g.message)})}startsWith(m,g){return this._addCheck({kind:"startsWith",value:m,...errorUtil.errToObj(g)})}endsWith(m,g){return this._addCheck({kind:"endsWith",value:m,...errorUtil.errToObj(g)})}min(m,g){return this._addCheck({kind:"min",value:m,...errorUtil.errToObj(g)})}max(m,g){return this._addCheck({kind:"max",value:m,...errorUtil.errToObj(g)})}length(m,g){return this._addCheck({kind:"length",value:m,...errorUtil.errToObj(g)})}nonempty(m){return this.min(1,errorUtil.errToObj(m))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(m=>m.kind==="datetime")}get isDate(){return!!this._def.checks.find(m=>m.kind==="date")}get isTime(){return!!this._def.checks.find(m=>m.kind==="time")}get isDuration(){return!!this._def.checks.find(m=>m.kind==="duration")}get isEmail(){return!!this._def.checks.find(m=>m.kind==="email")}get isURL(){return!!this._def.checks.find(m=>m.kind==="url")}get isEmoji(){return!!this._def.checks.find(m=>m.kind==="emoji")}get isUUID(){return!!this._def.checks.find(m=>m.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(m=>m.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(m=>m.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(m=>m.kind==="cuid2")}get isULID(){return!!this._def.checks.find(m=>m.kind==="ulid")}get isIP(){return!!this._def.checks.find(m=>m.kind==="ip")}get isBase64(){return!!this._def.checks.find(m=>m.kind==="base64")}get minLength(){let m=null;for(const g of this._def.checks)g.kind==="min"&&(m===null||g.value>m)&&(m=g.value);return m}get maxLength(){let m=null;for(const g of this._def.checks)g.kind==="max"&&(m===null||g.value<m)&&(m=g.value);return m}}function floatSafeRemainder(d,m){const g=(d.toString().split(".")[1]||"").length,w=(m.toString().split(".")[1]||"").length,I=g>w?g:w;return parseInt(d.toFixed(I).replace(".",""))%parseInt(m.toFixed(I).replace(".",""))/Math.pow(10,I)}ZodString.create=d=>{var m;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(m=d==null?void 0:d.coerce)!==null&&m!==void 0&&m,...processCreateParams(d)})};class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(m){if(this._def.coerce&&(m.data=Number(m.data)),this._getType(m)!==ZodParsedType.number){const I=this._getOrReturnCtx(m);return addIssueToContext(I,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:I.parsedType}),INVALID}let g;const w=new ParseStatus;for(const I of this._def.checks)I.kind==="int"?util$1.isInteger(m.data)||(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:I.message}),w.dirty()):I.kind==="min"?(I.inclusive?m.data<I.value:m.data<=I.value)&&(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.too_small,minimum:I.value,type:"number",inclusive:I.inclusive,exact:!1,message:I.message}),w.dirty()):I.kind==="max"?(I.inclusive?m.data>I.value:m.data>=I.value)&&(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.too_big,maximum:I.value,type:"number",inclusive:I.inclusive,exact:!1,message:I.message}),w.dirty()):I.kind==="multipleOf"?floatSafeRemainder(m.data,I.value)!==0&&(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.not_multiple_of,multipleOf:I.value,message:I.message}),w.dirty()):I.kind==="finite"?Number.isFinite(m.data)||(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.not_finite,message:I.message}),w.dirty()):util$1.assertNever(I);return{status:w.value,value:m.data}}gte(m,g){return this.setLimit("min",m,!0,errorUtil.toString(g))}gt(m,g){return this.setLimit("min",m,!1,errorUtil.toString(g))}lte(m,g){return this.setLimit("max",m,!0,errorUtil.toString(g))}lt(m,g){return this.setLimit("max",m,!1,errorUtil.toString(g))}setLimit(m,g,w,I){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:m,value:g,inclusive:w,message:errorUtil.toString(I)}]})}_addCheck(m){return new ZodNumber({...this._def,checks:[...this._def.checks,m]})}int(m){return this._addCheck({kind:"int",message:errorUtil.toString(m)})}positive(m){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(m)})}negative(m){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(m)})}nonpositive(m){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(m)})}nonnegative(m){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(m)})}multipleOf(m,g){return this._addCheck({kind:"multipleOf",value:m,message:errorUtil.toString(g)})}finite(m){return this._addCheck({kind:"finite",message:errorUtil.toString(m)})}safe(m){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(m)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(m)})}get minValue(){let m=null;for(const g of this._def.checks)g.kind==="min"&&(m===null||g.value>m)&&(m=g.value);return m}get maxValue(){let m=null;for(const g of this._def.checks)g.kind==="max"&&(m===null||g.value<m)&&(m=g.value);return m}get isInt(){return!!this._def.checks.find(m=>m.kind==="int"||m.kind==="multipleOf"&&util$1.isInteger(m.value))}get isFinite(){let m=null,g=null;for(const w of this._def.checks){if(w.kind==="finite"||w.kind==="int"||w.kind==="multipleOf")return!0;w.kind==="min"?(g===null||w.value>g)&&(g=w.value):w.kind==="max"&&(m===null||w.value<m)&&(m=w.value)}return Number.isFinite(g)&&Number.isFinite(m)}}ZodNumber.create=d=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(d==null?void 0:d.coerce)||!1,...processCreateParams(d)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(m){if(this._def.coerce&&(m.data=BigInt(m.data)),this._getType(m)!==ZodParsedType.bigint){const I=this._getOrReturnCtx(m);return addIssueToContext(I,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:I.parsedType}),INVALID}let g;const w=new ParseStatus;for(const I of this._def.checks)I.kind==="min"?(I.inclusive?m.data<I.value:m.data<=I.value)&&(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.too_small,type:"bigint",minimum:I.value,inclusive:I.inclusive,message:I.message}),w.dirty()):I.kind==="max"?(I.inclusive?m.data>I.value:m.data>=I.value)&&(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.too_big,type:"bigint",maximum:I.value,inclusive:I.inclusive,message:I.message}),w.dirty()):I.kind==="multipleOf"?m.data%I.value!==BigInt(0)&&(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.not_multiple_of,multipleOf:I.value,message:I.message}),w.dirty()):util$1.assertNever(I);return{status:w.value,value:m.data}}gte(m,g){return this.setLimit("min",m,!0,errorUtil.toString(g))}gt(m,g){return this.setLimit("min",m,!1,errorUtil.toString(g))}lte(m,g){return this.setLimit("max",m,!0,errorUtil.toString(g))}lt(m,g){return this.setLimit("max",m,!1,errorUtil.toString(g))}setLimit(m,g,w,I){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:m,value:g,inclusive:w,message:errorUtil.toString(I)}]})}_addCheck(m){return new ZodBigInt({...this._def,checks:[...this._def.checks,m]})}positive(m){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(m)})}negative(m){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(m)})}nonpositive(m){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(m)})}nonnegative(m){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(m)})}multipleOf(m,g){return this._addCheck({kind:"multipleOf",value:m,message:errorUtil.toString(g)})}get minValue(){let m=null;for(const g of this._def.checks)g.kind==="min"&&(m===null||g.value>m)&&(m=g.value);return m}get maxValue(){let m=null;for(const g of this._def.checks)g.kind==="max"&&(m===null||g.value<m)&&(m=g.value);return m}}ZodBigInt.create=d=>{var m;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(m=d==null?void 0:d.coerce)!==null&&m!==void 0&&m,...processCreateParams(d)})};class ZodBoolean extends ZodType{_parse(m){if(this._def.coerce&&(m.data=!!m.data),this._getType(m)!==ZodParsedType.boolean){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:g.parsedType}),INVALID}return OK(m.data)}}ZodBoolean.create=d=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(d==null?void 0:d.coerce)||!1,...processCreateParams(d)});class ZodDate extends ZodType{_parse(m){if(this._def.coerce&&(m.data=new Date(m.data)),this._getType(m)!==ZodParsedType.date){const I=this._getOrReturnCtx(m);return addIssueToContext(I,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:I.parsedType}),INVALID}if(isNaN(m.data.getTime()))return addIssueToContext(this._getOrReturnCtx(m),{code:ZodIssueCode.invalid_date}),INVALID;const g=new ParseStatus;let w;for(const I of this._def.checks)I.kind==="min"?m.data.getTime()<I.value&&(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.too_small,message:I.message,inclusive:!0,exact:!1,minimum:I.value,type:"date"}),g.dirty()):I.kind==="max"?m.data.getTime()>I.value&&(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.too_big,message:I.message,inclusive:!0,exact:!1,maximum:I.value,type:"date"}),g.dirty()):util$1.assertNever(I);return{status:g.value,value:new Date(m.data.getTime())}}_addCheck(m){return new ZodDate({...this._def,checks:[...this._def.checks,m]})}min(m,g){return this._addCheck({kind:"min",value:m.getTime(),message:errorUtil.toString(g)})}max(m,g){return this._addCheck({kind:"max",value:m.getTime(),message:errorUtil.toString(g)})}get minDate(){let m=null;for(const g of this._def.checks)g.kind==="min"&&(m===null||g.value>m)&&(m=g.value);return m!=null?new Date(m):null}get maxDate(){let m=null;for(const g of this._def.checks)g.kind==="max"&&(m===null||g.value<m)&&(m=g.value);return m!=null?new Date(m):null}}ZodDate.create=d=>new ZodDate({checks:[],coerce:(d==null?void 0:d.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(d)});class ZodSymbol extends ZodType{_parse(m){if(this._getType(m)!==ZodParsedType.symbol){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:g.parsedType}),INVALID}return OK(m.data)}}ZodSymbol.create=d=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(d)});class ZodUndefined extends ZodType{_parse(m){if(this._getType(m)!==ZodParsedType.undefined){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:g.parsedType}),INVALID}return OK(m.data)}}ZodUndefined.create=d=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(d)});class ZodNull extends ZodType{_parse(m){if(this._getType(m)!==ZodParsedType.null){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:g.parsedType}),INVALID}return OK(m.data)}}ZodNull.create=d=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(d)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(m){return OK(m.data)}}ZodAny.create=d=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(d)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(m){return OK(m.data)}}ZodUnknown.create=d=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(d)});class ZodNever extends ZodType{_parse(m){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:g.parsedType}),INVALID}}ZodNever.create=d=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(d)});class ZodVoid extends ZodType{_parse(m){if(this._getType(m)!==ZodParsedType.undefined){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:g.parsedType}),INVALID}return OK(m.data)}}ZodVoid.create=d=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(d)});class ZodArray extends ZodType{_parse(m){const{ctx:g,status:w}=this._processInputParams(m),I=this._def;if(g.parsedType!==ZodParsedType.array)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:g.parsedType}),INVALID;if(I.exactLength!==null){const F=g.data.length>I.exactLength.value,$=g.data.length<I.exactLength.value;(F||$)&&(addIssueToContext(g,{code:F?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:$?I.exactLength.value:void 0,maximum:F?I.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:I.exactLength.message}),w.dirty())}if(I.minLength!==null&&g.data.length<I.minLength.value&&(addIssueToContext(g,{code:ZodIssueCode.too_small,minimum:I.minLength.value,type:"array",inclusive:!0,exact:!1,message:I.minLength.message}),w.dirty()),I.maxLength!==null&&g.data.length>I.maxLength.value&&(addIssueToContext(g,{code:ZodIssueCode.too_big,maximum:I.maxLength.value,type:"array",inclusive:!0,exact:!1,message:I.maxLength.message}),w.dirty()),g.common.async)return Promise.all([...g.data].map((F,$)=>I.type._parseAsync(new ParseInputLazyPath(g,F,g.path,$)))).then(F=>ParseStatus.mergeArray(w,F));const P=[...g.data].map((F,$)=>I.type._parseSync(new ParseInputLazyPath(g,F,g.path,$)));return ParseStatus.mergeArray(w,P)}get element(){return this._def.type}min(m,g){return new ZodArray({...this._def,minLength:{value:m,message:errorUtil.toString(g)}})}max(m,g){return new ZodArray({...this._def,maxLength:{value:m,message:errorUtil.toString(g)}})}length(m,g){return new ZodArray({...this._def,exactLength:{value:m,message:errorUtil.toString(g)}})}nonempty(m){return this.min(1,m)}}function deepPartialify(d){if(d instanceof ZodObject){const m={};for(const g in d.shape){const w=d.shape[g];m[g]=ZodOptional.create(deepPartialify(w))}return new ZodObject({...d._def,shape:()=>m})}return d instanceof ZodArray?new ZodArray({...d._def,type:deepPartialify(d.element)}):d instanceof ZodOptional?ZodOptional.create(deepPartialify(d.unwrap())):d instanceof ZodNullable?ZodNullable.create(deepPartialify(d.unwrap())):d instanceof ZodTuple?ZodTuple.create(d.items.map(m=>deepPartialify(m))):d}ZodArray.create=(d,m)=>new ZodArray({type:d,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(m)});class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const m=this._def.shape(),g=util$1.objectKeys(m);return this._cached={shape:m,keys:g}}_parse(m){if(this._getType(m)!==ZodParsedType.object){const D=this._getOrReturnCtx(m);return addIssueToContext(D,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:D.parsedType}),INVALID}const{status:g,ctx:w}=this._processInputParams(m),{shape:I,keys:P}=this._getCached(),F=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const D in w.data)P.includes(D)||F.push(D);const $=[];for(const D of P){const U=I[D],j=w.data[D];$.push({key:{status:"valid",value:D},value:U._parse(new ParseInputLazyPath(w,j,w.path,D)),alwaysSet:D in w.data})}if(this._def.catchall instanceof ZodNever){const D=this._def.unknownKeys;if(D==="passthrough")for(const U of F)$.push({key:{status:"valid",value:U},value:{status:"valid",value:w.data[U]}});else if(D==="strict")F.length>0&&(addIssueToContext(w,{code:ZodIssueCode.unrecognized_keys,keys:F}),g.dirty());else if(D!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const D=this._def.catchall;for(const U of F){const j=w.data[U];$.push({key:{status:"valid",value:U},value:D._parse(new ParseInputLazyPath(w,j,w.path,U)),alwaysSet:U in w.data})}}return w.common.async?Promise.resolve().then(async()=>{const D=[];for(const U of $){const j=await U.key,Z=await U.value;D.push({key:j,value:Z,alwaysSet:U.alwaysSet})}return D}).then(D=>ParseStatus.mergeObjectSync(g,D)):ParseStatus.mergeObjectSync(g,$)}get shape(){return this._def.shape()}strict(m){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...m!==void 0?{errorMap:(g,w)=>{var I,P,F,$;const D=(F=(P=(I=this._def).errorMap)===null||P===void 0?void 0:P.call(I,g,w).message)!==null&&F!==void 0?F:w.defaultError;return g.code==="unrecognized_keys"?{message:($=errorUtil.errToObj(m).message)!==null&&$!==void 0?$:D}:{message:D}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(m){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...m})})}merge(m){return new ZodObject({unknownKeys:m._def.unknownKeys,catchall:m._def.catchall,shape:()=>({...this._def.shape(),...m._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(m,g){return this.augment({[m]:g})}catchall(m){return new ZodObject({...this._def,catchall:m})}pick(m){const g={};return util$1.objectKeys(m).forEach(w=>{m[w]&&this.shape[w]&&(g[w]=this.shape[w])}),new ZodObject({...this._def,shape:()=>g})}omit(m){const g={};return util$1.objectKeys(this.shape).forEach(w=>{m[w]||(g[w]=this.shape[w])}),new ZodObject({...this._def,shape:()=>g})}deepPartial(){return deepPartialify(this)}partial(m){const g={};return util$1.objectKeys(this.shape).forEach(w=>{const I=this.shape[w];m&&!m[w]?g[w]=I:g[w]=I.optional()}),new ZodObject({...this._def,shape:()=>g})}required(m){const g={};return util$1.objectKeys(this.shape).forEach(w=>{if(m&&!m[w])g[w]=this.shape[w];else{let I=this.shape[w];for(;I instanceof ZodOptional;)I=I._def.innerType;g[w]=I}}),new ZodObject({...this._def,shape:()=>g})}keyof(){return createZodEnum(util$1.objectKeys(this.shape))}}ZodObject.create=(d,m)=>new ZodObject({shape:()=>d,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(m)}),ZodObject.strictCreate=(d,m)=>new ZodObject({shape:()=>d,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(m)}),ZodObject.lazycreate=(d,m)=>new ZodObject({shape:d,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(m)});class ZodUnion extends ZodType{_parse(m){const{ctx:g}=this._processInputParams(m),w=this._def.options;if(g.common.async)return Promise.all(w.map(async I=>{const P={...g,common:{...g.common,issues:[]},parent:null};return{result:await I._parseAsync({data:g.data,path:g.path,parent:P}),ctx:P}})).then(function(I){for(const F of I)if(F.result.status==="valid")return F.result;for(const F of I)if(F.result.status==="dirty")return g.common.issues.push(...F.ctx.common.issues),F.result;const P=I.map(F=>new ZodError(F.ctx.common.issues));return addIssueToContext(g,{code:ZodIssueCode.invalid_union,unionErrors:P}),INVALID});{let I;const P=[];for(const $ of w){const D={...g,common:{...g.common,issues:[]},parent:null},U=$._parseSync({data:g.data,path:g.path,parent:D});if(U.status==="valid")return U;U.status!=="dirty"||I||(I={result:U,ctx:D}),D.common.issues.length&&P.push(D.common.issues)}if(I)return g.common.issues.push(...I.ctx.common.issues),I.result;const F=P.map($=>new ZodError($));return addIssueToContext(g,{code:ZodIssueCode.invalid_union,unionErrors:F}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(d,m)=>new ZodUnion({options:d,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(m)});const getDiscriminator=d=>d instanceof ZodLazy?getDiscriminator(d.schema):d instanceof ZodEffects?getDiscriminator(d.innerType()):d instanceof ZodLiteral?[d.value]:d instanceof ZodEnum?d.options:d instanceof ZodNativeEnum?util$1.objectValues(d.enum):d instanceof ZodDefault?getDiscriminator(d._def.innerType):d instanceof ZodUndefined?[void 0]:d instanceof ZodNull?[null]:d instanceof ZodOptional?[void 0,...getDiscriminator(d.unwrap())]:d instanceof ZodNullable?[null,...getDiscriminator(d.unwrap())]:d instanceof ZodBranded||d instanceof ZodReadonly?getDiscriminator(d.unwrap()):d instanceof ZodCatch?getDiscriminator(d._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(m){const{ctx:g}=this._processInputParams(m);if(g.parsedType!==ZodParsedType.object)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:g.parsedType}),INVALID;const w=this.discriminator,I=g.data[w],P=this.optionsMap.get(I);return P?g.common.async?P._parseAsync({data:g.data,path:g.path,parent:g}):P._parseSync({data:g.data,path:g.path,parent:g}):(addIssueToContext(g,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[w]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(m,g,w){const I=new Map;for(const P of g){const F=getDiscriminator(P.shape[m]);if(!F.length)throw new Error(`A discriminator value for key \`${m}\` could not be extracted from all schema options`);for(const $ of F){if(I.has($))throw new Error(`Discriminator property ${String(m)} has duplicate value ${String($)}`);I.set($,P)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:m,options:g,optionsMap:I,...processCreateParams(w)})}}function mergeValues(d,m){const g=getParsedType(d),w=getParsedType(m);if(d===m)return{valid:!0,data:d};if(g===ZodParsedType.object&&w===ZodParsedType.object){const I=util$1.objectKeys(m),P=util$1.objectKeys(d).filter($=>I.indexOf($)!==-1),F={...d,...m};for(const $ of P){const D=mergeValues(d[$],m[$]);if(!D.valid)return{valid:!1};F[$]=D.data}return{valid:!0,data:F}}if(g===ZodParsedType.array&&w===ZodParsedType.array){if(d.length!==m.length)return{valid:!1};const I=[];for(let P=0;P<d.length;P++){const F=mergeValues(d[P],m[P]);if(!F.valid)return{valid:!1};I.push(F.data)}return{valid:!0,data:I}}return g===ZodParsedType.date&&w===ZodParsedType.date&&+d==+m?{valid:!0,data:d}:{valid:!1}}class ZodIntersection extends ZodType{_parse(m){const{status:g,ctx:w}=this._processInputParams(m),I=(P,F)=>{if(isAborted(P)||isAborted(F))return INVALID;const $=mergeValues(P.value,F.value);return $.valid?((isDirty(P)||isDirty(F))&&g.dirty(),{status:g.value,value:$.data}):(addIssueToContext(w,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return w.common.async?Promise.all([this._def.left._parseAsync({data:w.data,path:w.path,parent:w}),this._def.right._parseAsync({data:w.data,path:w.path,parent:w})]).then(([P,F])=>I(P,F)):I(this._def.left._parseSync({data:w.data,path:w.path,parent:w}),this._def.right._parseSync({data:w.data,path:w.path,parent:w}))}}ZodIntersection.create=(d,m,g)=>new ZodIntersection({left:d,right:m,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(g)});class ZodTuple extends ZodType{_parse(m){const{status:g,ctx:w}=this._processInputParams(m);if(w.parsedType!==ZodParsedType.array)return addIssueToContext(w,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:w.parsedType}),INVALID;if(w.data.length<this._def.items.length)return addIssueToContext(w,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&w.data.length>this._def.items.length&&(addIssueToContext(w,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),g.dirty());const I=[...w.data].map((P,F)=>{const $=this._def.items[F]||this._def.rest;return $?$._parse(new ParseInputLazyPath(w,P,w.path,F)):null}).filter(P=>!!P);return w.common.async?Promise.all(I).then(P=>ParseStatus.mergeArray(g,P)):ParseStatus.mergeArray(g,I)}get items(){return this._def.items}rest(m){return new ZodTuple({...this._def,rest:m})}}ZodTuple.create=(d,m)=>{if(!Array.isArray(d))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:d,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(m)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(m){const{status:g,ctx:w}=this._processInputParams(m);if(w.parsedType!==ZodParsedType.object)return addIssueToContext(w,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:w.parsedType}),INVALID;const I=[],P=this._def.keyType,F=this._def.valueType;for(const $ in w.data)I.push({key:P._parse(new ParseInputLazyPath(w,$,w.path,$)),value:F._parse(new ParseInputLazyPath(w,w.data[$],w.path,$)),alwaysSet:$ in w.data});return w.common.async?ParseStatus.mergeObjectAsync(g,I):ParseStatus.mergeObjectSync(g,I)}get element(){return this._def.valueType}static create(m,g,w){return new ZodRecord(g instanceof ZodType?{keyType:m,valueType:g,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(w)}:{keyType:ZodString.create(),valueType:m,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(g)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(m){const{status:g,ctx:w}=this._processInputParams(m);if(w.parsedType!==ZodParsedType.map)return addIssueToContext(w,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:w.parsedType}),INVALID;const I=this._def.keyType,P=this._def.valueType,F=[...w.data.entries()].map(([$,D],U)=>({key:I._parse(new ParseInputLazyPath(w,$,w.path,[U,"key"])),value:P._parse(new ParseInputLazyPath(w,D,w.path,[U,"value"]))}));if(w.common.async){const $=new Map;return Promise.resolve().then(async()=>{for(const D of F){const U=await D.key,j=await D.value;if(U.status==="aborted"||j.status==="aborted")return INVALID;U.status!=="dirty"&&j.status!=="dirty"||g.dirty(),$.set(U.value,j.value)}return{status:g.value,value:$}})}{const $=new Map;for(const D of F){const U=D.key,j=D.value;if(U.status==="aborted"||j.status==="aborted")return INVALID;U.status!=="dirty"&&j.status!=="dirty"||g.dirty(),$.set(U.value,j.value)}return{status:g.value,value:$}}}}ZodMap.create=(d,m,g)=>new ZodMap({valueType:m,keyType:d,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(g)});class ZodSet extends ZodType{_parse(m){const{status:g,ctx:w}=this._processInputParams(m);if(w.parsedType!==ZodParsedType.set)return addIssueToContext(w,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:w.parsedType}),INVALID;const I=this._def;I.minSize!==null&&w.data.size<I.minSize.value&&(addIssueToContext(w,{code:ZodIssueCode.too_small,minimum:I.minSize.value,type:"set",inclusive:!0,exact:!1,message:I.minSize.message}),g.dirty()),I.maxSize!==null&&w.data.size>I.maxSize.value&&(addIssueToContext(w,{code:ZodIssueCode.too_big,maximum:I.maxSize.value,type:"set",inclusive:!0,exact:!1,message:I.maxSize.message}),g.dirty());const P=this._def.valueType;function F(D){const U=new Set;for(const j of D){if(j.status==="aborted")return INVALID;j.status==="dirty"&&g.dirty(),U.add(j.value)}return{status:g.value,value:U}}const $=[...w.data.values()].map((D,U)=>P._parse(new ParseInputLazyPath(w,D,w.path,U)));return w.common.async?Promise.all($).then(D=>F(D)):F($)}min(m,g){return new ZodSet({...this._def,minSize:{value:m,message:errorUtil.toString(g)}})}max(m,g){return new ZodSet({...this._def,maxSize:{value:m,message:errorUtil.toString(g)}})}size(m,g){return this.min(m,g).max(m,g)}nonempty(m){return this.min(1,m)}}ZodSet.create=(d,m)=>new ZodSet({valueType:d,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(m)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(m){const{ctx:g}=this._processInputParams(m);if(g.parsedType!==ZodParsedType.function)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:g.parsedType}),INVALID;function w($,D){return makeIssue({data:$,path:g.path,errorMaps:[g.common.contextualErrorMap,g.schemaErrorMap,getErrorMap(),errorMap].filter(U=>!!U),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:D}})}function I($,D){return makeIssue({data:$,path:g.path,errorMaps:[g.common.contextualErrorMap,g.schemaErrorMap,getErrorMap(),errorMap].filter(U=>!!U),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:D}})}const P={errorMap:g.common.contextualErrorMap},F=g.data;if(this._def.returns instanceof ZodPromise){const $=this;return OK(async function(...D){const U=new ZodError([]),j=await $._def.args.parseAsync(D,P).catch(H=>{throw U.addIssue(w(D,H)),U}),Z=await Reflect.apply(F,this,j);return await $._def.returns._def.type.parseAsync(Z,P).catch(H=>{throw U.addIssue(I(Z,H)),U})})}{const $=this;return OK(function(...D){const U=$._def.args.safeParse(D,P);if(!U.success)throw new ZodError([w(D,U.error)]);const j=Reflect.apply(F,this,U.data),Z=$._def.returns.safeParse(j,P);if(!Z.success)throw new ZodError([I(j,Z.error)]);return Z.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...m){return new ZodFunction({...this._def,args:ZodTuple.create(m).rest(ZodUnknown.create())})}returns(m){return new ZodFunction({...this._def,returns:m})}implement(m){return this.parse(m)}strictImplement(m){return this.parse(m)}static create(m,g,w){return new ZodFunction({args:m||ZodTuple.create([]).rest(ZodUnknown.create()),returns:g||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(w)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(m){const{ctx:g}=this._processInputParams(m);return this._def.getter()._parse({data:g.data,path:g.path,parent:g})}}ZodLazy.create=(d,m)=>new ZodLazy({getter:d,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(m)});class ZodLiteral extends ZodType{_parse(m){if(m.data!==this._def.value){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{received:g.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:m.data}}get value(){return this._def.value}}function createZodEnum(d,m){return new ZodEnum({values:d,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(m)})}ZodLiteral.create=(d,m)=>new ZodLiteral({value:d,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(m)});class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(m){if(typeof m.data!="string"){const g=this._getOrReturnCtx(m),w=this._def.values;return addIssueToContext(g,{expected:util$1.joinValues(w),received:g.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(m.data)){const g=this._getOrReturnCtx(m),w=this._def.values;return addIssueToContext(g,{received:g.data,code:ZodIssueCode.invalid_enum_value,options:w}),INVALID}return OK(m.data)}get options(){return this._def.values}get enum(){const m={};for(const g of this._def.values)m[g]=g;return m}get Values(){const m={};for(const g of this._def.values)m[g]=g;return m}get Enum(){const m={};for(const g of this._def.values)m[g]=g;return m}extract(m,g=this._def){return ZodEnum.create(m,{...this._def,...g})}exclude(m,g=this._def){return ZodEnum.create(this.options.filter(w=>!m.includes(w)),{...this._def,...g})}}_ZodEnum_cache=new WeakMap,ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(m){const g=util$1.getValidEnumValues(this._def.values),w=this._getOrReturnCtx(m);if(w.parsedType!==ZodParsedType.string&&w.parsedType!==ZodParsedType.number){const I=util$1.objectValues(g);return addIssueToContext(w,{expected:util$1.joinValues(I),received:w.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util$1.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(m.data)){const I=util$1.objectValues(g);return addIssueToContext(w,{received:w.data,code:ZodIssueCode.invalid_enum_value,options:I}),INVALID}return OK(m.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap,ZodNativeEnum.create=(d,m)=>new ZodNativeEnum({values:d,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(m)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(m){const{ctx:g}=this._processInputParams(m);if(g.parsedType!==ZodParsedType.promise&&g.common.async===!1)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:g.parsedType}),INVALID;const w=g.parsedType===ZodParsedType.promise?g.data:Promise.resolve(g.data);return OK(w.then(I=>this._def.type.parseAsync(I,{path:g.path,errorMap:g.common.contextualErrorMap})))}}ZodPromise.create=(d,m)=>new ZodPromise({type:d,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(m)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(m){const{status:g,ctx:w}=this._processInputParams(m),I=this._def.effect||null,P={addIssue:F=>{addIssueToContext(w,F),F.fatal?g.abort():g.dirty()},get path(){return w.path}};if(P.addIssue=P.addIssue.bind(P),I.type==="preprocess"){const F=I.transform(w.data,P);if(w.common.async)return Promise.resolve(F).then(async $=>{if(g.value==="aborted")return INVALID;const D=await this._def.schema._parseAsync({data:$,path:w.path,parent:w});return D.status==="aborted"?INVALID:D.status==="dirty"||g.value==="dirty"?DIRTY(D.value):D});{if(g.value==="aborted")return INVALID;const $=this._def.schema._parseSync({data:F,path:w.path,parent:w});return $.status==="aborted"?INVALID:$.status==="dirty"||g.value==="dirty"?DIRTY($.value):$}}if(I.type==="refinement"){const F=$=>{const D=I.refinement($,P);if(w.common.async)return Promise.resolve(D);if(D instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return $};if(w.common.async===!1){const $=this._def.schema._parseSync({data:w.data,path:w.path,parent:w});return $.status==="aborted"?INVALID:($.status==="dirty"&&g.dirty(),F($.value),{status:g.value,value:$.value})}return this._def.schema._parseAsync({data:w.data,path:w.path,parent:w}).then($=>$.status==="aborted"?INVALID:($.status==="dirty"&&g.dirty(),F($.value).then(()=>({status:g.value,value:$.value}))))}if(I.type==="transform"){if(w.common.async===!1){const F=this._def.schema._parseSync({data:w.data,path:w.path,parent:w});if(!isValid(F))return F;const $=I.transform(F.value,P);if($ instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:g.value,value:$}}return this._def.schema._parseAsync({data:w.data,path:w.path,parent:w}).then(F=>isValid(F)?Promise.resolve(I.transform(F.value,P)).then($=>({status:g.value,value:$})):F)}util$1.assertNever(I)}}ZodEffects.create=(d,m,g)=>new ZodEffects({schema:d,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:m,...processCreateParams(g)}),ZodEffects.createWithPreprocess=(d,m,g)=>new ZodEffects({schema:m,effect:{type:"preprocess",transform:d},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(g)});class ZodOptional extends ZodType{_parse(m){return this._getType(m)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(m)}unwrap(){return this._def.innerType}}ZodOptional.create=(d,m)=>new ZodOptional({innerType:d,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(m)});class ZodNullable extends ZodType{_parse(m){return this._getType(m)===ZodParsedType.null?OK(null):this._def.innerType._parse(m)}unwrap(){return this._def.innerType}}ZodNullable.create=(d,m)=>new ZodNullable({innerType:d,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(m)});class ZodDefault extends ZodType{_parse(m){const{ctx:g}=this._processInputParams(m);let w=g.data;return g.parsedType===ZodParsedType.undefined&&(w=this._def.defaultValue()),this._def.innerType._parse({data:w,path:g.path,parent:g})}removeDefault(){return this._def.innerType}}ZodDefault.create=(d,m)=>new ZodDefault({innerType:d,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof m.default=="function"?m.default:()=>m.default,...processCreateParams(m)});class ZodCatch extends ZodType{_parse(m){const{ctx:g}=this._processInputParams(m),w={...g,common:{...g.common,issues:[]}},I=this._def.innerType._parse({data:w.data,path:w.path,parent:{...w}});return isAsync(I)?I.then(P=>({status:"valid",value:P.status==="valid"?P.value:this._def.catchValue({get error(){return new ZodError(w.common.issues)},input:w.data})})):{status:"valid",value:I.status==="valid"?I.value:this._def.catchValue({get error(){return new ZodError(w.common.issues)},input:w.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(d,m)=>new ZodCatch({innerType:d,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof m.catch=="function"?m.catch:()=>m.catch,...processCreateParams(m)});class ZodNaN extends ZodType{_parse(m){if(this._getType(m)!==ZodParsedType.nan){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:g.parsedType}),INVALID}return{status:"valid",value:m.data}}}ZodNaN.create=d=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(d)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(m){const{ctx:g}=this._processInputParams(m),w=g.data;return this._def.type._parse({data:w,path:g.path,parent:g})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(m){const{status:g,ctx:w}=this._processInputParams(m);if(w.common.async)return(async()=>{const I=await this._def.in._parseAsync({data:w.data,path:w.path,parent:w});return I.status==="aborted"?INVALID:I.status==="dirty"?(g.dirty(),DIRTY(I.value)):this._def.out._parseAsync({data:I.value,path:w.path,parent:w})})();{const I=this._def.in._parseSync({data:w.data,path:w.path,parent:w});return I.status==="aborted"?INVALID:I.status==="dirty"?(g.dirty(),{status:"dirty",value:I.value}):this._def.out._parseSync({data:I.value,path:w.path,parent:w})}}static create(m,g){return new ZodPipeline({in:m,out:g,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(m){const g=this._def.innerType._parse(m),w=I=>(isValid(I)&&(I.value=Object.freeze(I.value)),I);return isAsync(g)?g.then(I=>w(I)):w(g)}unwrap(){return this._def.innerType}}function custom(d,m={},g){return d?ZodAny.create().superRefine((w,I)=>{var P,F;if(!d(w)){const $=typeof m=="function"?m(w):typeof m=="string"?{message:m}:m,D=(F=(P=$.fatal)!==null&&P!==void 0?P:g)===null||F===void 0||F,U=typeof $=="string"?{message:$}:$;I.addIssue({code:"custom",...U,fatal:D})}}):ZodAny.create()}ZodReadonly.create=(d,m)=>new ZodReadonly({innerType:d,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(m)});const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(d){d.ZodString="ZodString",d.ZodNumber="ZodNumber",d.ZodNaN="ZodNaN",d.ZodBigInt="ZodBigInt",d.ZodBoolean="ZodBoolean",d.ZodDate="ZodDate",d.ZodSymbol="ZodSymbol",d.ZodUndefined="ZodUndefined",d.ZodNull="ZodNull",d.ZodAny="ZodAny",d.ZodUnknown="ZodUnknown",d.ZodNever="ZodNever",d.ZodVoid="ZodVoid",d.ZodArray="ZodArray",d.ZodObject="ZodObject",d.ZodUnion="ZodUnion",d.ZodDiscriminatedUnion="ZodDiscriminatedUnion",d.ZodIntersection="ZodIntersection",d.ZodTuple="ZodTuple",d.ZodRecord="ZodRecord",d.ZodMap="ZodMap",d.ZodSet="ZodSet",d.ZodFunction="ZodFunction",d.ZodLazy="ZodLazy",d.ZodLiteral="ZodLiteral",d.ZodEnum="ZodEnum",d.ZodEffects="ZodEffects",d.ZodNativeEnum="ZodNativeEnum",d.ZodOptional="ZodOptional",d.ZodNullable="ZodNullable",d.ZodDefault="ZodDefault",d.ZodCatch="ZodCatch",d.ZodPromise="ZodPromise",d.ZodBranded="ZodBranded",d.ZodPipeline="ZodPipeline",d.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(d,m={message:`Input not instance of ${d.name}`})=>custom(g=>g instanceof d,m),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:d=>ZodString.create({...d,coerce:!0}),number:d=>ZodNumber.create({...d,coerce:!0}),boolean:d=>ZodBoolean.create({...d,coerce:!0}),bigint:d=>ZodBigInt.create({...d,coerce:!0}),date:d=>ZodDate.create({...d,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util$1},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError}),Edge,Edge2;Edge2=Edge||(Edge={}),Edge2[Edge2.EXTEND=1]="EXTEND",Edge2[Edge2.WRAP=2]="WRAP",Edge2[Edge2.CROP=3]="CROP";const JimpClassSchema=z.object({bitmap:z.object({data:z.union([z.instanceof(Buffer$1),z.instanceof(Uint8Array)]),width:z.number(),height:z.number()})}),BlitOptionsSchemaComplex=z.object({src:JimpClassSchema,x:z.number().optional(),y:z.number().optional(),srcX:z.number().optional(),srcY:z.number().optional(),srcW:z.number().optional(),srcH:z.number().optional()}),BlitOptionsSchema=z.union([JimpClassSchema,BlitOptionsSchemaComplex]),methods$h={blit(d,m){const g=BlitOptionsSchema.parse(m);let{src:w,x:I=0,y:P=0,srcX:F=0,srcY:$=0,srcW:D=w.bitmap.width,srcH:U=w.bitmap.height}="bitmap"in g?{src:g}:g;if(!("bitmap"in w))throw new Error("The source must be a Jimp image");if(typeof I!="number"||typeof P!="number")throw new Error("x and y must be numbers");I=Math.round(I),P=Math.round(P),F=Math.round(F),$=Math.round($),D=Math.round(D),U=Math.round(U);const j=d.bitmap.width,Z=d.bitmap.height;return scan(w,F,$,D,U,function(G,H,q){const W=I+G-F,Q=P+H-$;if(W>=0&&Q>=0&&j-W>0&&Z-Q>0){const J=d.getPixelIndex(W,Q),K={r:w.bitmap.data[q]||0,g:w.bitmap.data[q+1]||0,b:w.bitmap.data[q+2]||0,a:w.bitmap.data[q+3]||0},V={r:d.bitmap.data[J]||0,g:d.bitmap.data[J+1]||0,b:d.bitmap.data[J+2]||0,a:d.bitmap.data[J+3]||0};d.bitmap.data[J]=(K.a*(K.r-V.r)-V.r+255>>8)+V.r,d.bitmap.data[J+1]=(K.a*(K.g-V.g)-V.g+255>>8)+V.g,d.bitmap.data[J+2]=(K.a*(K.b-V.b)-V.b+255>>8)+V.b,d.bitmap.data[J+3]=limit255(V.a+K.a)}}),d}},mulTable=[1,57,41,21,203,34,97,73,227,91,149,62,105,45,39,137,241,107,3,173,39,71,65,238,219,101,187,87,81,151,141,133,249,117,221,209,197,187,177,169,5,153,73,139,133,127,243,233,223,107,103,99,191,23,177,171,165,159,77,149,9,139,135,131,253,245,119,231,224,109,211,103,25,195,189,23,45,175,171,83,81,79,155,151,147,9,141,137,67,131,129,251,123,30,235,115,113,221,217,53,13,51,50,49,193,189,185,91,179,175,43,169,83,163,5,79,155,19,75,147,145,143,35,69,17,67,33,65,255,251,247,243,239,59,29,229,113,111,219,27,213,105,207,51,201,199,49,193,191,47,93,183,181,179,11,87,43,85,167,165,163,161,159,157,155,77,19,75,37,73,145,143,141,35,138,137,135,67,33,131,129,255,63,250,247,61,121,239,237,117,29,229,227,225,111,55,109,216,213,211,209,207,205,203,201,199,197,195,193,48,190,47,93,185,183,181,179,178,176,175,173,171,85,21,167,165,41,163,161,5,79,157,78,154,153,19,75,149,74,147,73,144,143,71,141,140,139,137,17,135,134,133,66,131,65,129,1],shgTable=[0,9,10,10,14,12,14,14,16,15,16,15,16,15,15,17,18,17,12,18,16,17,17,19,19,18,19,18,18,19,19,19,20,19,20,20,20,20,20,20,15,20,19,20,20,20,21,21,21,20,20,20,21,18,21,21,21,21,20,21,17,21,21,21,22,22,21,22,22,21,22,21,19,22,22,19,20,22,22,21,21,21,22,22,22,18,22,22,21,22,22,23,22,20,23,22,22,23,23,21,19,21,21,21,23,23,23,22,23,23,21,23,22,23,18,22,23,20,22,23,23,23,21,22,20,22,21,22,24,24,24,24,24,22,21,24,23,23,24,21,24,23,24,22,24,24,22,24,24,22,23,24,24,24,20,23,22,23,24,24,24,24,24,24,24,23,21,23,22,23,24,24,24,22,24,24,24,23,22,24,24,25,23,25,25,23,24,25,25,24,22,25,25,25,24,23,24,25,25,25,25,25,25,25,25,25,25,25,25,23,25,23,24,25,25,25,25,25,25,25,25,25,24,22,25,25,23,25,25,20,24,25,24,25,25,22,24,25,24,25,24,25,25,24,25,25,25,25,22,25,25,25,24,25,24,25,18],methods$g={blur(d,m){if(typeof m!="number")throw new Error("r must be a number");if(m<1)throw new Error("r must be greater than 0");let g,w,I,P,F,$,D,U,j,Z,G,H,q;const W=d.bitmap.width-1,Q=d.bitmap.height-1,J=m+1,K=mulTable[m],V=shgTable[m],tt=[],X=[],ot=[],it=[],lt=[],at=[];let ht=2;for(;ht-- >0;){for(H=0,q=0,$=0;$<d.bitmap.height;$++){for(g=d.bitmap.data[q]*J,w=d.bitmap.data[q+1]*J,I=d.bitmap.data[q+2]*J,P=d.bitmap.data[q+3]*J,D=1;D<=m;D++)U=q+((D>W?W:D)<<2),g+=d.bitmap.data[U++],w+=d.bitmap.data[U++],I+=d.bitmap.data[U++],P+=d.bitmap.data[U];for(F=0;F<d.bitmap.width;F++)tt[H]=g,X[H]=w,ot[H]=I,it[H]=P,$===0&&(lt[F]=((U=F+J)<W?U:W)<<2,at[F]=(U=F-m)>0?U<<2:0),j=q+lt[F],Z=q+at[F],g+=d.bitmap.data[j++]-d.bitmap.data[Z++],w+=d.bitmap.data[j++]-d.bitmap.data[Z++],I+=d.bitmap.data[j++]-d.bitmap.data[Z++],P+=d.bitmap.data[j]-d.bitmap.data[Z++],H++;q+=d.bitmap.width<<2}for(F=0;F<d.bitmap.width;F++){for(G=F,g=tt[G]*J,w=X[G]*J,I=ot[G]*J,P=it[G]*J,D=1;D<=m;D++)G+=D>Q?0:d.bitmap.width,g+=tt[G],w+=X[G],I+=ot[G],P+=it[G];for(H=F<<2,$=0;$<d.bitmap.height;$++)d.bitmap.data[H]=limit255(g*K>>>V),d.bitmap.data[H+1]=limit255(w*K>>>V),d.bitmap.data[H+2]=limit255(I*K>>>V),d.bitmap.data[H+3]=limit255(P*K>>>V),F===0&&(lt[$]=((U=$+J)<Q?U:Q)*d.bitmap.width,at[$]=(U=$-m)>0?U*d.bitmap.width:0),j=F+lt[$],Z=F+at[$],g+=tt[j]-tt[Z],w+=X[j]-X[Z],I+=ot[j]-ot[Z],P+=it[j]-it[Z],H+=d.bitmap.width<<2}}return d},gaussian(d,m){if(typeof m!="number")throw new Error("r must be a number");if(m<1)throw new Error("r must be greater than 0");const g=Math.ceil(2.57*m),w=2*g+1,I=m*m*2,P=I*Math.PI,F=[];for(let $=0;$<w;$++){const D=[];for(let U=0;U<w;U++){const j=(U-g)**2+($-g)**2;D[U]=Math.exp(-j/I)/P}F.push(D)}for(let $=0;$<d.bitmap.height;$++)for(let D=0;D<d.bitmap.width;D++){let U=0,j=0,Z=0,G=0,H=0;for(let q=0;q<w;q++){for(let Q=0;Q<w;Q++){const J=Math.min(d.bitmap.width-1,Math.max(0,Q+D-g)),K=Math.min(d.bitmap.height-1,Math.max(0,q+$-g)),V=F[q][Q],tt=K*d.bitmap.width+J<<2;U+=d.bitmap.data[tt]*V,j+=d.bitmap.data[tt+1]*V,Z+=d.bitmap.data[tt+2]*V,G+=d.bitmap.data[tt+3]*V,H+=V}const W=$*d.bitmap.width+D<<2;d.bitmap.data[W]=Math.round(U/H),d.bitmap.data[W+1]=Math.round(j/H),d.bitmap.data[W+2]=Math.round(Z/H),d.bitmap.data[W+3]=Math.round(G/H)}}return d}},CircleOptionsSchema=z.object({x:z.number().optional(),y:z.number().optional(),radius:z.number().min(0).optional()}),methods$f={circle(d,m={}){const g=CircleOptionsSchema.parse(m),w=g.radius||(d.bitmap.width>d.bitmap.height?d.bitmap.height:d.bitmap.width)/2,I=typeof g.x=="number"?g.x:d.bitmap.width/2,P=typeof g.y=="number"?g.y:d.bitmap.height/2;return d.scan((F,$,D)=>{const U=Math.sqrt(Math.pow(F-I,2)+Math.pow($-P,2));w-U<=0?d.bitmap.data[D+3]=0:w-U<1&&(d.bitmap.data[D+3]=255*(w-U))}),d}},ConvolutionMatrixSchema=z.array(z.number()).min(1).array(),ConvolutionComplexOptionsSchema=z.object({kernel:ConvolutionMatrixSchema,edgeHandling:z.nativeEnum(Edge).optional()}),ConvolutionOptionsSchema=z.union([ConvolutionMatrixSchema,ConvolutionComplexOptionsSchema]),ConvoluteComplexOptionsSchema=z.object({kernel:ConvolutionMatrixSchema,x:z.number().optional(),y:z.number().optional(),w:z.number().optional(),h:z.number().optional()}),ConvoluteOptionsSchema=z.union([ConvolutionMatrixSchema,ConvoluteComplexOptionsSchema]),PixelateSize=z.number().min(1).max(1/0),PixelateComplexOptionsSchema=z.object({size:PixelateSize,x:z.number().optional(),y:z.number().optional(),w:z.number().optional(),h:z.number().optional()}),PixelateOptionsSchema=z.union([PixelateSize,PixelateComplexOptionsSchema]);function applyKernel(d,m,g,w){const I=[0,0,0,0],P=(m.length-1)/2;for(let F=0;F<m.length;F+=1)for(let $=0;$<m[F].length;$+=1){const D=d.getPixelIndex(g+F-P,w+$-P);I[0]+=d.bitmap.data[D]*m[F][$],I[1]+=d.bitmap.data[D+1]*m[F][$],I[2]+=d.bitmap.data[D+2]*m[F][$],I[3]+=d.bitmap.data[D+3]*m[F][$]}return I}function mix(d,m,g=50){return{r:(m.r-d.r)*(g/100)+d.r,g:(m.g-d.g)*(g/100)+d.g,b:(m.b-d.b)*(g/100)+d.b}}const HueActionSchema=z.object({apply:z.literal("hue"),params:z.tuple([z.number().min(-360).max(360)])}),SpinActionSchema=z.object({apply:z.literal("spin"),params:z.tuple([z.number().min(-360).max(360)])}),LightenActionSchema=z.object({apply:z.literal("lighten"),params:z.tuple([z.number().min(0).max(100)]).optional()}),RGBColorSchema=z.object({r:z.number().min(0).max(255),g:z.number().min(0).max(255),b:z.number().min(0).max(255)}),MixActionSchema=z.object({apply:z.literal("mix"),params:z.union([z.tuple([RGBColorSchema]),z.tuple([RGBColorSchema,z.number().min(0).max(100)])])}),TintActionSchema=z.object({apply:z.literal("tint"),params:z.tuple([z.number().min(0).max(100)]).optional()}),ShadeActionSchema=z.object({apply:z.literal("shade"),params:z.tuple([z.number().min(0).max(100)]).optional()}),XorActionSchema=z.object({apply:z.literal("xor"),params:z.tuple([RGBColorSchema])}),RedActionSchema=z.object({apply:z.literal("red"),params:z.tuple([z.number().min(-255).max(255)])}),GreenActionSchema=z.object({apply:z.literal("green"),params:z.tuple([z.number().min(-255).max(255)])}),BlueActionSchema=z.object({apply:z.literal("blue"),params:z.tuple([z.number().min(-255).max(255)])}),BrightenActionSchema=z.object({apply:z.literal("brighten"),params:z.tuple([z.number().min(0).max(100)]).optional()}),DarkenActionSchema=z.object({apply:z.literal("darken"),params:z.tuple([z.number().min(0).max(100)]).optional()}),DesaturateActionSchema=z.object({apply:z.literal("desaturate"),params:z.tuple([z.number().min(0).max(100)]).optional()}),SaturateActionSchema=z.object({apply:z.literal("saturate"),params:z.tuple([z.number().min(0).max(100)]).optional()}),GrayscaleActionSchema=z.object({apply:z.literal("greyscale"),params:z.tuple([]).optional()}),ColorActionNameSchema=z.union([HueActionSchema,SpinActionSchema,LightenActionSchema,MixActionSchema,TintActionSchema,ShadeActionSchema,XorActionSchema,RedActionSchema,GreenActionSchema,BlueActionSchema,BrightenActionSchema,DarkenActionSchema,DesaturateActionSchema,SaturateActionSchema,GrayscaleActionSchema]);function histogram(d){const m={r:new Array(256).fill(0),g:new Array(256).fill(0),b:new Array(256).fill(0)};return d.scan((g,w,I)=>{m.r[d.bitmap.data[I+0]]++,m.g[d.bitmap.data[I+1]]++,m.b[d.bitmap.data[I+2]]++}),m}const normalizeValue=function(d,m,g){return 255*(d-m)/(g-m)},getBounds=function(d){return[d.findIndex(m=>m>0),255-d.slice().reverse().findIndex(m=>m>0)]},methods$e={normalize(d){const m=histogram(d),g={r:getBounds(m.r),g:getBounds(m.g),b:getBounds(m.b)};return d.scan((w,I,P)=>{const F=d.bitmap.data[P+0],$=d.bitmap.data[P+1],D=d.bitmap.data[P+2];d.bitmap.data[P+0]=normalizeValue(F,g.r[0],g.r[1]),d.bitmap.data[P+1]=normalizeValue($,g.g[0],g.g[1]),d.bitmap.data[P+2]=normalizeValue(D,g.b[0],g.b[1])}),d},invert:d=>(d.scan((m,g,w)=>{d.bitmap.data[w]=255-d.bitmap.data[w],d.bitmap.data[w+1]=255-d.bitmap.data[w+1],d.bitmap.data[w+2]=255-d.bitmap.data[w+2]}),d),brightness(d,m){if(typeof m!="number")throw new Error("val must be numbers");return d.scan((g,w,I)=>{d.bitmap.data[I]=limit255(d.bitmap.data[I]*m),d.bitmap.data[I+1]=limit255(d.bitmap.data[I+1]*m),d.bitmap.data[I+2]=limit255(d.bitmap.data[I+2]*m)}),d},contrast(d,m){if(typeof m!="number")throw new Error("val must be numbers");if(m<-1||m>1)throw new Error("val must be a number between -1 and +1");const g=(m+1)/(1-m);function w(I){return(I=Math.floor(g*(I-127)+127))<0?0:I>255?255:I}return d.scan((I,P,F)=>{d.bitmap.data[F]=w(d.bitmap.data[F]),d.bitmap.data[F+1]=w(d.bitmap.data[F+1]),d.bitmap.data[F+2]=w(d.bitmap.data[F+2])}),d},posterize(d,m){if(typeof m!="number")throw new Error("n must be numbers");return m<2&&(m=2),d.scan((g,w,I)=>{const P=d.bitmap.data[I],F=d.bitmap.data[I+1],$=d.bitmap.data[I+2];d.bitmap.data[I]=Math.floor(P/255*(m-1))/(m-1)*255,d.bitmap.data[I+1]=Math.floor(F/255*(m-1))/(m-1)*255,d.bitmap.data[I+2]=Math.floor($/255*(m-1))/(m-1)*255}),d},greyscale:d=>(d.scan((m,g,w)=>{const I=.2126*d.bitmap.data[w]+.7152*d.bitmap.data[w+1]+.0722*d.bitmap.data[w+2];d.bitmap.data[w]=I,d.bitmap.data[w+1]=I,d.bitmap.data[w+2]=I}),d),opacity(d,m){if(typeof m!="number")throw new Error("f must be a number");if(m<0||m>1)throw new Error("f must be a number from 0 to 1");return d.scan((g,w,I)=>{const P=d.bitmap.data[I+3]*m;d.bitmap.data[I+3]=P}),d},sepia:d=>(d.scan((m,g,w)=>{let I=d.bitmap.data[w],P=d.bitmap.data[w+1],F=d.bitmap.data[w+2];I=.393*I+.769*P+.189*F,P=.349*I+.686*P+.168*F,F=.272*I+.534*P+.131*F,d.bitmap.data[w]=I<255?I:255,d.bitmap.data[w+1]=P<255?P:255,d.bitmap.data[w+2]=F<255?F:255}),d),fade(d,m){if(typeof m!="number")throw new Error("f must be a number");if(m<0||m>1)throw new Error("f must be a number from 0 to 1");return this.opacity(d,1-m)},convolution(d,m){const g=ConvolutionOptionsSchema.parse(m),{kernel:w,edgeHandling:I=Edge.EXTEND}="kernel"in g?g:{kernel:g,edgeHandling:void 0};if(!w[0])throw new Error("kernel must be a matrix");const P=Buffer$1.from(d.bitmap.data),F=w.length,$=w[0].length,D=Math.floor(F/2),U=Math.floor($/2),j=-D,Z=-U;let G,H,q,W,Q,J,K,V,tt,X;return d.scan((ot,it,lt)=>{W=0,q=0,H=0;for(let at=j;at<=D;at++)for(let ht=Z;ht<=U;ht++)V=ot+ht,tt=it+at,G=w[at+D][ht+U],X=d.getPixelIndex(V,tt,I),X===-1?(K=0,J=0,Q=0):(Q=d.bitmap.data[X+0],J=d.bitmap.data[X+1],K=d.bitmap.data[X+2]),H+=G*Q,q+=G*J,W+=G*K;H<0&&(H=0),q<0&&(q=0),W<0&&(W=0),H>255&&(H=255),q>255&&(q=255),W>255&&(W=255),P[lt+0]=H,P[lt+1]=q,P[lt+2]=W}),d.bitmap.data=P,d},opaque:d=>(d.scan((m,g,w)=>{d.bitmap.data[w+3]=255}),d),pixelate(d,m){const g=PixelateOptionsSchema.parse(m),{size:w,x:I=0,y:P=0,w:F=d.bitmap.width-I,h:$=d.bitmap.height-P}=typeof g=="number"?{size:g}:g,D=[[1/16,2/16,1/16],[2/16,.25,2/16],[1/16,2/16,1/16]],U=clone(d);return scan(U,I,P,F,$,(j,Z,G)=>{j=w*Math.floor(j/w),Z=w*Math.floor(Z/w);const H=applyKernel(U,D,j,Z);d.bitmap.data[G]=H[0],d.bitmap.data[G+1]=H[1],d.bitmap.data[G+2]=H[2],d.bitmap.data[G+3]=H[3]}),d},convolute(d,m){const g=ConvoluteOptionsSchema.parse(m),{kernel:w,x:I=0,y:P=0,w:F=d.bitmap.width-I,h:$=d.bitmap.height-P}="kernel"in g?g:{kernel:g},D=clone(d);return scan(D,I,P,F,$,(U,j,Z)=>{const G=applyKernel(D,w,U,j);d.bitmap.data[Z]=limit255(G[0]),d.bitmap.data[Z+1]=limit255(G[1]),d.bitmap.data[Z+2]=limit255(G[2]),d.bitmap.data[Z+3]=limit255(G[3])}),d},color(d,m){if(!m||!Array.isArray(m))throw new Error("actions must be an array");return m.forEach(g=>ColorActionNameSchema.parse(g)),m=m.map(g=>(g.apply!=="xor"&&g.apply!=="mix"||(g.params[0]=tinycolor(g.params[0]).toRgb()),g)),d.scan((g,w,I)=>{let P={r:d.bitmap.data[I],g:d.bitmap.data[I+1],b:d.bitmap.data[I+2]};const F=($,D)=>limit255(P[$]+D);m.forEach($=>{var D,U;if($.apply==="mix")P=mix(P,$.params[0],$.params[1]);else if($.apply==="tint")P=mix(P,{r:255,g:255,b:255},(D=$.params)==null?void 0:D[0]);else if($.apply==="shade")P=mix(P,{r:0,g:0,b:0},(U=$.params)==null?void 0:U[0]);else if($.apply==="xor")P={r:P.r^$.params[0].r,g:P.g^$.params[0].g,b:P.b^$.params[0].b};else if($.apply==="red")P.r=F("r",$.params[0]);else if($.apply==="green")P.g=F("g",$.params[0]);else if($.apply==="blue")P.b=F("b",$.params[0]);else{$.apply==="hue"&&($.apply="spin");const j=tinycolor(P),Z=j[$.apply].bind(j);if(!Z)throw new Error("action "+$.apply+" not supported");P=Z(...$.params||[]).toRgb()}}),d.bitmap.data[I]=P.r,d.bitmap.data[I+1]=P.g,d.bitmap.data[I+2]=P.b}),d}};var lib$1={},ieee754$1={read:function(d,m,g,w,I){var P,F,$=8*I-w-1,D=(1<<$)-1,U=D>>1,j=-7,Z=g?I-1:0,G=g?-1:1,H=d[m+Z];for(Z+=G,P=H&(1<<-j)-1,H>>=-j,j+=$;j>0;P=256*P+d[m+Z],Z+=G,j-=8);for(F=P&(1<<-j)-1,P>>=-j,j+=w;j>0;F=256*F+d[m+Z],Z+=G,j-=8);if(P===0)P=1-U;else{if(P===D)return F?NaN:1/0*(H?-1:1);F+=Math.pow(2,w),P-=U}return(H?-1:1)*F*Math.pow(2,P-w)},write:function(d,m,g,w,I,P){var F,$,D,U=8*P-I-1,j=(1<<U)-1,Z=j>>1,G=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=w?0:P-1,q=w?1:-1,W=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?($=isNaN(m)?1:0,F=j):(F=Math.floor(Math.log(m)/Math.LN2),m*(D=Math.pow(2,-F))<1&&(F--,D*=2),(m+=F+Z>=1?G/D:G*Math.pow(2,1-Z))*D>=2&&(F++,D/=2),F+Z>=j?($=0,F=j):F+Z>=1?($=(m*D-1)*Math.pow(2,I),F+=Z):($=m*Math.pow(2,Z-1)*Math.pow(2,I),F=0));I>=8;d[g+H]=255&$,H+=q,$/=256,I-=8);for(F=F<<I|$,U+=I;U>0;d[g+H]=255&F,H+=q,F/=256,U-=8);d[g+H-q]|=128*W}};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.AnsiStringType=d.StringType=d.BufferType=d.Uint8ArrayType=d.IgnoreType=d.Float80_LE=d.Float80_BE=d.Float64_LE=d.Float64_BE=d.Float32_LE=d.Float32_BE=d.Float16_LE=d.Float16_BE=d.INT64_BE=d.UINT64_BE=d.INT64_LE=d.UINT64_LE=d.INT32_LE=d.INT32_BE=d.INT24_BE=d.INT24_LE=d.INT16_LE=d.INT16_BE=d.INT8=d.UINT32_BE=d.UINT32_LE=d.UINT24_BE=d.UINT24_LE=d.UINT16_BE=d.UINT16_LE=d.UINT8=void 0;const m=ieee754$1;function g(I){return new DataView(I.buffer,I.byteOffset)}d.UINT8={len:1,get:(I,P)=>g(I).getUint8(P),put:(I,P,F)=>(g(I).setUint8(P,F),P+1)},d.UINT16_LE={len:2,get:(I,P)=>g(I).getUint16(P,!0),put:(I,P,F)=>(g(I).setUint16(P,F,!0),P+2)},d.UINT16_BE={len:2,get:(I,P)=>g(I).getUint16(P),put:(I,P,F)=>(g(I).setUint16(P,F),P+2)},d.UINT24_LE={len:3,get(I,P){const F=g(I);return F.getUint8(P)+(F.getUint16(P+1,!0)<<8)},put(I,P,F){const $=g(I);return $.setUint8(P,255&F),$.setUint16(P+1,F>>8,!0),P+3}},d.UINT24_BE={len:3,get(I,P){const F=g(I);return(F.getUint16(P)<<8)+F.getUint8(P+2)},put(I,P,F){const $=g(I);return $.setUint16(P,F>>8),$.setUint8(P+2,255&F),P+3}},d.UINT32_LE={len:4,get:(I,P)=>g(I).getUint32(P,!0),put:(I,P,F)=>(g(I).setUint32(P,F,!0),P+4)},d.UINT32_BE={len:4,get:(I,P)=>g(I).getUint32(P),put:(I,P,F)=>(g(I).setUint32(P,F),P+4)},d.INT8={len:1,get:(I,P)=>g(I).getInt8(P),put:(I,P,F)=>(g(I).setInt8(P,F),P+1)},d.INT16_BE={len:2,get:(I,P)=>g(I).getInt16(P),put:(I,P,F)=>(g(I).setInt16(P,F),P+2)},d.INT16_LE={len:2,get:(I,P)=>g(I).getInt16(P,!0),put:(I,P,F)=>(g(I).setInt16(P,F,!0),P+2)},d.INT24_LE={len:3,get(I,P){const F=d.UINT24_LE.get(I,P);return F>8388607?F-16777216:F},put(I,P,F){const $=g(I);return $.setUint8(P,255&F),$.setUint16(P+1,F>>8,!0),P+3}},d.INT24_BE={len:3,get(I,P){const F=d.UINT24_BE.get(I,P);return F>8388607?F-16777216:F},put(I,P,F){const $=g(I);return $.setUint16(P,F>>8),$.setUint8(P+2,255&F),P+3}},d.INT32_BE={len:4,get:(I,P)=>g(I).getInt32(P),put:(I,P,F)=>(g(I).setInt32(P,F),P+4)},d.INT32_LE={len:4,get:(I,P)=>g(I).getInt32(P,!0),put:(I,P,F)=>(g(I).setInt32(P,F,!0),P+4)},d.UINT64_LE={len:8,get:(I,P)=>g(I).getBigUint64(P,!0),put:(I,P,F)=>(g(I).setBigUint64(P,F,!0),P+8)},d.INT64_LE={len:8,get:(I,P)=>g(I).getBigInt64(P,!0),put:(I,P,F)=>(g(I).setBigInt64(P,F,!0),P+8)},d.UINT64_BE={len:8,get:(I,P)=>g(I).getBigUint64(P),put:(I,P,F)=>(g(I).setBigUint64(P,F),P+8)},d.INT64_BE={len:8,get:(I,P)=>g(I).getBigInt64(P),put:(I,P,F)=>(g(I).setBigInt64(P,F),P+8)},d.Float16_BE={len:2,get(I,P){return m.read(I,P,!1,10,this.len)},put(I,P,F){return m.write(I,F,P,!1,10,this.len),P+this.len}},d.Float16_LE={len:2,get(I,P){return m.read(I,P,!0,10,this.len)},put(I,P,F){return m.write(I,F,P,!0,10,this.len),P+this.len}},d.Float32_BE={len:4,get:(I,P)=>g(I).getFloat32(P),put:(I,P,F)=>(g(I).setFloat32(P,F),P+4)},d.Float32_LE={len:4,get:(I,P)=>g(I).getFloat32(P,!0),put:(I,P,F)=>(g(I).setFloat32(P,F,!0),P+4)},d.Float64_BE={len:8,get:(I,P)=>g(I).getFloat64(P),put:(I,P,F)=>(g(I).setFloat64(P,F),P+8)},d.Float64_LE={len:8,get:(I,P)=>g(I).getFloat64(P,!0),put:(I,P,F)=>(g(I).setFloat64(P,F,!0),P+8)},d.Float80_BE={len:10,get(I,P){return m.read(I,P,!1,63,this.len)},put(I,P,F){return m.write(I,F,P,!1,63,this.len),P+this.len}},d.Float80_LE={len:10,get(I,P){return m.read(I,P,!0,63,this.len)},put(I,P,F){return m.write(I,F,P,!0,63,this.len),P+this.len}},d.IgnoreType=class{constructor(I){this.len=I}get(I,P){}},d.Uint8ArrayType=class{constructor(I){this.len=I}get(I,P){return I.subarray(P,P+this.len)}},d.BufferType=class{constructor(I){this.len=I}get(I,P){return Buffer$1.from(I.subarray(P,P+this.len))}},d.StringType=class{constructor(I,P){this.len=I,this.encoding=P}get(I,P){return Buffer$1.from(I).toString(this.encoding,P,P+this.len)}};class w{constructor(P){this.len=P}static decode(P,F,$){let D="";for(let U=F;U<$;++U)D+=w.codePointToString(w.singleByteDecoder(P[U]));return D}static inRange(P,F,$){return F<=P&&P<=$}static codePointToString(P){return P<=65535?String.fromCharCode(P):(P-=65536,String.fromCharCode(55296+(P>>10),56320+(1023&P)))}static singleByteDecoder(P){if(w.inRange(P,0,127))return P;const F=w.windows1252[P-128];if(F===null)throw Error("invaliding encoding");return F}get(P,F=0){return w.decode(P,F,F+this.len)}}d.AnsiStringType=w,w.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1);var core$1={},ReadStreamTokenizer$1={},AbstractTokenizer$1={},lib={},EndOfFileStream={};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.EndOfStreamError=d.defaultMessages=void 0,d.defaultMessages="End-Of-Stream";class m extends Error{constructor(){super(d.defaultMessages)}}d.EndOfStreamError=m})(EndOfFileStream);var StreamReader={},Deferred$1={};Object.defineProperty(Deferred$1,"__esModule",{value:!0}),Deferred$1.Deferred=void 0;class Deferred{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((m,g)=>{this.reject=g,this.resolve=m})}}Deferred$1.Deferred=Deferred,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.StreamReader=d.EndOfStreamError=void 0;const m=EndOfFileStream,g=Deferred$1;var w=EndOfFileStream;Object.defineProperty(d,"EndOfStreamError",{enumerable:!0,get:function(){return w.EndOfStreamError}}),d.StreamReader=class{constructor(I){if(this.s=I,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!I.read||!I.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new m.EndOfStreamError)),this.s.once("error",P=>this.reject(P)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(I,P,F){const $=await this.read(I,P,F);return this.peekQueue.push(I.subarray(P,P+$)),$}async read(I,P,F){if(F===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new m.EndOfStreamError;let $=F,D=0;for(;this.peekQueue.length>0&&$>0;){const U=this.peekQueue.pop();if(!U)throw new Error("peekData should be defined");const j=Math.min(U.length,$);I.set(U.subarray(0,j),P+D),D+=j,$-=j,j<U.length&&this.peekQueue.push(U.subarray(j))}for(;$>0&&!this.endOfStream;){const U=Math.min($,1048576),j=await this.readFromStream(I,P+D,U);if(D+=j,j<U)break;$-=j}return D}async readFromStream(I,P,F){const $=this.s.read(F);if($)return I.set($,P),$.length;{const D={buffer:I,offset:P,length:F,deferred:new g.Deferred};return this.deferred=D.deferred,this.s.once("readable",()=>{this.readDeferred(D)}),D.deferred.promise}}readDeferred(I){const P=this.s.read(I.length);P?(I.buffer.set(P,I.offset),I.deferred.resolve(P.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(I)})}reject(I){this.endOfStream=!0,this.deferred&&(this.deferred.reject(I),this.deferred=null)}}}(StreamReader),function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.StreamReader=d.EndOfStreamError=void 0;var m=EndOfFileStream;Object.defineProperty(d,"EndOfStreamError",{enumerable:!0,get:function(){return m.EndOfStreamError}});var g=StreamReader;Object.defineProperty(d,"StreamReader",{enumerable:!0,get:function(){return g.StreamReader}})}(lib),Object.defineProperty(AbstractTokenizer$1,"__esModule",{value:!0}),AbstractTokenizer$1.AbstractTokenizer=void 0;const peek_readable_1$2=lib;class AbstractTokenizer{constructor(m){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=m||{}}async readToken(m,g=this.position){const w=Buffer$1.alloc(m.len);if(await this.readBuffer(w,{position:g})<m.len)throw new peek_readable_1$2.EndOfStreamError;return m.get(w,0)}async peekToken(m,g=this.position){const w=Buffer$1.alloc(m.len);if(await this.peekBuffer(w,{position:g})<m.len)throw new peek_readable_1$2.EndOfStreamError;return m.get(w,0)}async readNumber(m){if(await this.readBuffer(this.numBuffer,{length:m.len})<m.len)throw new peek_readable_1$2.EndOfStreamError;return m.get(this.numBuffer,0)}async peekNumber(m){if(await this.peekBuffer(this.numBuffer,{length:m.len})<m.len)throw new peek_readable_1$2.EndOfStreamError;return m.get(this.numBuffer,0)}async ignore(m){if(this.fileInfo.size!==void 0){const g=this.fileInfo.size-this.position;if(m>g)return this.position+=g,g}return this.position+=m,m}async close(){}normalizeOptions(m,g){if(g&&g.position!==void 0&&g.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return g?{mayBeLess:g.mayBeLess===!0,offset:g.offset?g.offset:0,length:g.length?g.length:m.length-(g.offset?g.offset:0),position:g.position?g.position:this.position}:{mayBeLess:!1,offset:0,length:m.length,position:this.position}}}AbstractTokenizer$1.AbstractTokenizer=AbstractTokenizer,Object.defineProperty(ReadStreamTokenizer$1,"__esModule",{value:!0}),ReadStreamTokenizer$1.ReadStreamTokenizer=void 0;const AbstractTokenizer_1$1=AbstractTokenizer$1,peek_readable_1$1=lib,maxBufferSize=256e3;class ReadStreamTokenizer extends AbstractTokenizer_1$1.AbstractTokenizer{constructor(m,g){super(g),this.streamReader=new peek_readable_1$1.StreamReader(m)}async getFileInfo(){return this.fileInfo}async readBuffer(m,g){const w=this.normalizeOptions(m,g),I=w.position-this.position;if(I>0)return await this.ignore(I),this.readBuffer(m,g);if(I<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(w.length===0)return 0;const P=await this.streamReader.read(m,w.offset,w.length);if(this.position+=P,(!g||!g.mayBeLess)&&P<w.length)throw new peek_readable_1$1.EndOfStreamError;return P}async peekBuffer(m,g){const w=this.normalizeOptions(m,g);let I=0;if(w.position){const P=w.position-this.position;if(P>0){const F=new Uint8Array(w.length+P);return I=await this.peekBuffer(F,{mayBeLess:w.mayBeLess}),m.set(F.subarray(P),w.offset),I-P}if(P<0)throw new Error("Cannot peek from a negative offset in a stream")}if(w.length>0){try{I=await this.streamReader.peek(m,w.offset,w.length)}catch(P){if(g&&g.mayBeLess&&P instanceof peek_readable_1$1.EndOfStreamError)return 0;throw P}if(!w.mayBeLess&&I<w.length)throw new peek_readable_1$1.EndOfStreamError}return I}async ignore(m){const g=Math.min(maxBufferSize,m),w=new Uint8Array(g);let I=0;for(;I<m;){const P=m-I,F=await this.readBuffer(w,{length:Math.min(g,P)});if(F<0)return F;I+=F}return I}}ReadStreamTokenizer$1.ReadStreamTokenizer=ReadStreamTokenizer;var BufferTokenizer$1={};Object.defineProperty(BufferTokenizer$1,"__esModule",{value:!0}),BufferTokenizer$1.BufferTokenizer=void 0;const peek_readable_1=lib,AbstractTokenizer_1=AbstractTokenizer$1;class BufferTokenizer extends AbstractTokenizer_1.AbstractTokenizer{constructor(m,g){super(g),this.uint8Array=m,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:m.length}async readBuffer(m,g){if(g&&g.position){if(g.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=g.position}const w=await this.peekBuffer(m,g);return this.position+=w,w}async peekBuffer(m,g){const w=this.normalizeOptions(m,g),I=Math.min(this.uint8Array.length-w.position,w.length);if(!w.mayBeLess&&I<w.length)throw new peek_readable_1.EndOfStreamError;return m.set(this.uint8Array.subarray(w.position,w.position+I),w.offset),I}async close(){}}BufferTokenizer$1.BufferTokenizer=BufferTokenizer,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.fromBuffer=d.fromStream=d.EndOfStreamError=void 0;const m=ReadStreamTokenizer$1,g=BufferTokenizer$1;var w=lib;Object.defineProperty(d,"EndOfStreamError",{enumerable:!0,get:function(){return w.EndOfStreamError}}),d.fromStream=function(I,P){return P=P||{},new m.ReadStreamTokenizer(I,P)},d.fromBuffer=function(I,P){return new g.BufferTokenizer(I,P)}}(core$1);var util={stringToBytes:d=>[...d].map(m=>m.charCodeAt(0)),tarHeaderChecksumMatches:(d,m=0)=>{const g=parseInt(d.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(g))return!1;let w=256;for(let I=m;I<m+148;I++)w+=d[I];for(let I=m+156;I<m+512;I++)w+=d[I];return g===w},uint32SyncSafeToken:{get:(d,m)=>127&d[m+3]|d[m+2]<<7|d[m+1]<<14|d[m]<<21,len:4}},supported$1={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]};const Token=lib$1,strtok3=core$1,{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=util,supported=supported$1,minimumBytes=4100;async function fromStream(d){const m=await strtok3.fromStream(d);try{return await fromTokenizer(m)}finally{await m.close()}}async function fromBuffer(d){if(!(d instanceof Uint8Array||d instanceof ArrayBuffer||Buffer$1.isBuffer(d)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof d}\``);const m=d instanceof Buffer$1?d:Buffer$1.from(d);if(m&&m.length>1)return fromTokenizer(strtok3.fromBuffer(m))}function _check(d,m,g){g={offset:0,...g};for(const[w,I]of m.entries())if(g.mask){if(I!==(g.mask[w]&d[w+g.offset]))return!1}else if(I!==d[w+g.offset])return!1;return!0}async function fromTokenizer(d){try{return _fromTokenizer(d)}catch(m){if(!(m instanceof strtok3.EndOfStreamError))throw m}}async function _fromTokenizer(d){let m=Buffer$1.alloc(minimumBytes);const g=(I,P)=>_check(m,I,P),w=(I,P)=>g(stringToBytes(I),P);if(d.fileInfo.size||(d.fileInfo.size=Number.MAX_SAFE_INTEGER),await d.peekBuffer(m,{length:12,mayBeLess:!0}),g([66,77]))return{ext:"bmp",mime:"image/bmp"};if(g([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(g([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(g([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(g([37,33]))return await d.peekBuffer(m,{length:24,mayBeLess:!0}),w("PS-Adobe-",{offset:2})&&w(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(g([31,160])||g([31,157]))return{ext:"Z",mime:"application/x-compress"};if(g([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(g([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(g([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(g([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(w("ID3")){await d.ignore(6);const I=await d.readToken(uint32SyncSafeToken);return d.position+I>d.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await d.ignore(I),fromTokenizer(d))}if(w("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((m[0]===67||m[0]===70)&&g([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(g([71,73,70]))return{ext:"gif",mime:"image/gif"};if(w("FLIF"))return{ext:"flif",mime:"image/flif"};if(w("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(w("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(w("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(w("FORM"))return{ext:"aif",mime:"audio/aiff"};if(w("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(g([80,75,3,4])){try{for(;d.position+30<d.fileInfo.size;){await d.readBuffer(m,{length:30});const I={compressedSize:m.readUInt32LE(18),uncompressedSize:m.readUInt32LE(22),filenameLength:m.readUInt16LE(26),extraFieldLength:m.readUInt16LE(28)};if(I.filename=await d.readToken(new Token.StringType(I.filenameLength,"utf-8")),await d.ignore(I.extraFieldLength),I.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(I.filename.endsWith(".rels")||I.filename.endsWith(".xml"))switch(I.filename.split("/")[0]){case"_rels":default:break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}if(I.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(I.filename.startsWith("3D/")&&I.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(I.filename==="mimetype"&&I.compressedSize===I.uncompressedSize)switch(await d.readToken(new Token.StringType(I.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"}}if(I.compressedSize===0){let P=-1;for(;P<0&&d.position<d.fileInfo.size;)await d.peekBuffer(m,{mayBeLess:!0}),P=m.indexOf("504B0304",0,"hex"),await d.ignore(P>=0?P:m.length)}else await d.ignore(I.compressedSize)}}catch(I){if(!(I instanceof strtok3.EndOfStreamError))throw I}return{ext:"zip",mime:"application/zip"}}if(w("OggS")){await d.ignore(28);const I=Buffer$1.alloc(8);return await d.readBuffer(I),_check(I,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(I,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(I,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(I,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(I,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(I,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(g([80,75])&&(m[2]===3||m[2]===5||m[2]===7)&&(m[3]===4||m[3]===6||m[3]===8))return{ext:"zip",mime:"application/zip"};if(w("ftyp",{offset:4})&&96&m[8]){const I=m.toString("binary",8,12).replace("\0"," ").trim();switch(I){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return I.startsWith("3g")?I.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(w("MThd"))return{ext:"mid",mime:"audio/midi"};if(w("wOFF")&&(g([0,1,0,0],{offset:4})||w("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(w("wOF2")&&(g([0,1,0,0],{offset:4})||w("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(g([212,195,178,161])||g([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(w("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(w("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(w("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(g([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(w("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(w("%PDF")){await d.ignore(1350);const I=10485760,P=Buffer$1.alloc(Math.min(I,d.fileInfo.size));return await d.readBuffer(P,{mayBeLess:!0}),P.includes(Buffer$1.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(g([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(g([73,73,42,0]))return w("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:g([28,0,254,0],{offset:8})||g([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:g([8,0,0,0],{offset:4})&&(g([45,0,254,0],{offset:8})||g([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(m=Buffer$1.alloc(24),await d.peekBuffer(m),(g([16,251,134,1],{offset:4})||g([8,0,0,0],{offset:4}))&&g([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(g([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(w("MAC "))return{ext:"ape",mime:"audio/ape"};if(g([26,69,223,163])){async function I(){const D=await d.peekNumber(Token.UINT8);let U=128,j=0;for(;!(D&U)&&U!==0;)++j,U>>=1;const Z=Buffer$1.alloc(j+1);return await d.readBuffer(Z),Z}async function P(){const D=await I(),U=await I();U[0]^=128>>U.length-1;const j=Math.min(6,U.length);return{id:D.readUIntBE(0,D.length),len:U.readUIntBE(U.length-j,j)}}async function F(D,U){for(;U>0;){const j=await P();if(j.id===17026)return d.readToken(new Token.StringType(j.len,"utf-8"));await d.ignore(j.len),--U}}const $=await P();switch(await F(0,$.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(g([82,73,70,70])){if(g([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(g([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(g([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(w("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(g([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(w("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(w("MSCF")||w("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(g([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(g([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(g([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(g([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(w("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(w("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(g([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(w("IMPM"))return{ext:"it",mime:"audio/x-it"};if(w("-lh0-",{offset:2})||w("-lh1-",{offset:2})||w("-lh2-",{offset:2})||w("-lh3-",{offset:2})||w("-lh4-",{offset:2})||w("-lh5-",{offset:2})||w("-lh6-",{offset:2})||w("-lh7-",{offset:2})||w("-lzs-",{offset:2})||w("-lz4-",{offset:2})||w("-lz5-",{offset:2})||w("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(g([0,0,1,186])){if(g([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(g([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(w("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(g([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(w("<?xml "))return{ext:"xml",mime:"application/xml"};if(g([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(g([82,97,114,33,26,7])&&(m[6]===0||m[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(w("solid "))return{ext:"stl",mime:"model/stl"};if(w("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(w("!<arch>"))return await d.ignore(8),await d.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(g([137,80,78,71,13,10,26,10])){async function I(){return{length:await d.readToken(Token.INT32_BE),type:await d.readToken(new Token.StringType(4,"binary"))}}await d.ignore(8);do{const P=await I();if(P.length<0)return;switch(P.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await d.ignore(P.length+4)}}while(d.position+8<d.fileInfo.size);return{ext:"png",mime:"image/png"}}if(g([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(g([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(g([102,114,101,101],{offset:4})||g([109,100,97,116],{offset:4})||g([109,111,111,118],{offset:4})||g([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(g([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(w("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(g([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(g([48,38,178,117,142,102,207,17,166,217])){async function I(){const P=Buffer$1.alloc(16);return await d.readBuffer(P),{id:P,size:Number(await d.readToken(Token.UINT64_LE))}}for(await d.ignore(30);d.position+24<d.fileInfo.size;){const P=await I();let F=P.size-24;if(_check(P.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const $=Buffer$1.alloc(16);if(F-=await d.readBuffer($),_check($,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check($,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await d.ignore(F)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(g([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((g([126,16,4])||g([126,24,4]))&&g([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(g([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(g([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await d.ignore(20),await d.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(g([255,10])||g([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(g([0,0,1,186])||g([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(g([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(g([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(g([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(g([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await d.peekBuffer(m,{length:Math.min(256,d.fileInfo.size),mayBeLess:!0}),w("BEGIN:")){if(w("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(w("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(w("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(w("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(w("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(g([4,0,0,0])&&m.length>=16){const I=m.readUInt32LE(12);if(I>12&&m.length>=I+16)try{const P=m.slice(16,I+16).toString();if(JSON.parse(P).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(g([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(w("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(g([71],{offset:4})&&(g([71],{offset:192})||g([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(g([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(g([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(g([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(g([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(g([76,80],{offset:34})&&(g([0,0,1],{offset:8})||g([1,0,2],{offset:8})||g([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(g([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await d.peekBuffer(m,{length:Math.min(512,d.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(m))return{ext:"tar",mime:"application/x-tar"};if(g([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(w("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(m.length>=2&&g([255,224],{offset:0,mask:[255,224]})){if(g([16],{offset:1,mask:[22]}))return g([8],{offset:1,mask:[8]}),{ext:"aac",mime:"audio/aac"};if(g([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(g([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(g([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const d=new stream.PassThrough;let m;m=stream.pipeline?stream.pipeline(readableStream,d,()=>{}):readableStream.pipe(d);const g=readableStream.read(minimumBytes)||readableStream.read()||Buffer$1.alloc(0);try{const w=await fromBuffer(g);d.fileType=w}catch(w){reject(w)}resolve(m)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get:()=>new Set(supported.extensions)}),Object.defineProperty(fileType,"mimeTypes",{get:()=>new Set(supported.mimeTypes)});var core=fileType,fileType$1=getDefaultExportFromCjs(core);function to(d,m){return d.then(function(g){return[null,g]}).catch(function(g){return[g,void 0]})}const writeFile=async()=>{throw new Error("Not supported")};function Mime$1(){this._types=Object.create(null),this._extensions=Object.create(null);for(let d=0;d<arguments.length;d++)this.define(arguments[d]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}Mime$1.prototype.define=function(d,m){for(let g in d){let w=d[g].map(function(I){return I.toLowerCase()});g=g.toLowerCase();for(let I=0;I<w.length;I++){const P=w[I];if(P[0]!=="*"){if(!m&&P in this._types)throw new Error('Attempt to change mapping for "'+P+'" extension from "'+this._types[P]+'" to "'+g+'". Pass `force=true` to allow this, otherwise remove "'+P+'" from the list of extensions for "'+g+'".');this._types[P]=g}}if(m||!this._extensions[g]){const I=w[0];this._extensions[g]=I[0]!=="*"?I:I.substr(1)}}},Mime$1.prototype.getType=function(d){let m=(d=String(d)).replace(/^.*[/\\]/,"").toLowerCase(),g=m.replace(/^.*\./,"").toLowerCase(),w=m.length<d.length;return(g.length<m.length-1||!w)&&this._types[g]||null},Mime$1.prototype.getExtension=function(d){return(d=/^\s*([^;\s]*)/.test(d)&&RegExp.$1)&&this._extensions[d.toLowerCase()]||null};var Mime_1=Mime$1,standard={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};let Mime=Mime_1;var lite=new Mime(standard),mime=getDefaultExportFromCjs(lite),HorizontalAlign,HorizontalAlign2,VerticalAlign,VerticalAlign2,BlendMode,BlendMode2;function srcOver(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a;return{r:(d.r*d.a+m.r*m.a*(1-d.a))/w,g:(d.g*d.a+m.g*m.a*(1-d.a))/w,b:(d.b*d.a+m.b*m.a*(1-d.a))/w,a:w}}function dstOver(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a;return{r:(m.r*m.a+d.r*d.a*(1-m.a))/w,g:(m.g*m.a+d.g*d.a*(1-m.a))/w,b:(m.b*m.a+d.b*d.a*(1-m.a))/w,a:w}}function multiply(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,F=d.b*d.a,$=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(I*$+I*(1-m.a)+$*(1-d.a))/w,g:(P*D+P*(1-m.a)+D*(1-d.a))/w,b:(F*U+F*(1-m.a)+U*(1-d.a))/w,a:w}}function add(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,F=d.b*d.a;return{r:(I+m.r*m.a)/w,g:(P+m.g*m.a)/w,b:(F+m.b*m.a)/w,a:w}}function screen(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,F=d.b*d.a,$=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(I*m.a+$*d.a-I*$+I*(1-m.a)+$*(1-d.a))/w,g:(P*m.a+D*d.a-P*D+P*(1-m.a)+D*(1-d.a))/w,b:(F*m.a+U*d.a-F*U+F*(1-m.a)+U*(1-d.a))/w,a:w}}function overlay(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,F=d.b*d.a,$=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(2*$<=m.a?2*I*$+I*(1-m.a)+$*(1-d.a):I*(1+m.a)+$*(1+d.a)-2*$*I-m.a*d.a)/w,g:(2*D<=m.a?2*P*D+P*(1-m.a)+D*(1-d.a):P*(1+m.a)+D*(1+d.a)-2*D*P-m.a*d.a)/w,b:(2*U<=m.a?2*F*U+F*(1-m.a)+U*(1-d.a):F*(1+m.a)+U*(1+d.a)-2*U*F-m.a*d.a)/w,a:w}}function darken(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,F=d.b*d.a,$=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(Math.min(I*m.a,$*d.a)+I*(1-m.a)+$*(1-d.a))/w,g:(Math.min(P*m.a,D*d.a)+P*(1-m.a)+D*(1-d.a))/w,b:(Math.min(F*m.a,U*d.a)+F*(1-m.a)+U*(1-d.a))/w,a:w}}function lighten(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,F=d.b*d.a,$=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(Math.max(I*m.a,$*d.a)+I*(1-m.a)+$*(1-d.a))/w,g:(Math.max(P*m.a,D*d.a)+P*(1-m.a)+D*(1-d.a))/w,b:(Math.max(F*m.a,U*d.a)+F*(1-m.a)+U*(1-d.a))/w,a:w}}function hardLight(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,F=d.b*d.a,$=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(2*I<=d.a?2*I*$+I*(1-m.a)+$*(1-d.a):I*(1+m.a)+$*(1+d.a)-2*$*I-m.a*d.a)/w,g:(2*P<=d.a?2*P*D+P*(1-m.a)+D*(1-d.a):P*(1+m.a)+D*(1+d.a)-2*D*P-m.a*d.a)/w,b:(2*F<=d.a?2*F*U+F*(1-m.a)+U*(1-d.a):F*(1+m.a)+U*(1+d.a)-2*U*F-m.a*d.a)/w,a:w}}function difference(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,F=d.b*d.a,$=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(I+$-2*Math.min(I*m.a,$*d.a))/w,g:(P+D-2*Math.min(P*m.a,D*d.a))/w,b:(F+U-2*Math.min(F*m.a,U*d.a))/w,a:w}}function exclusion(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,F=d.b*d.a,$=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(I*m.a+$*d.a-2*I*$+I*(1-m.a)+$*(1-d.a))/w,g:(P*m.a+D*d.a-2*P*D+P*(1-m.a)+D*(1-d.a))/w,b:(F*m.a+U*d.a-2*F*U+F*(1-m.a)+U*(1-d.a))/w,a:w}}HorizontalAlign2=HorizontalAlign||(HorizontalAlign={}),HorizontalAlign2[HorizontalAlign2.LEFT=1]="LEFT",HorizontalAlign2[HorizontalAlign2.CENTER=2]="CENTER",HorizontalAlign2[HorizontalAlign2.RIGHT=4]="RIGHT",VerticalAlign2=VerticalAlign||(VerticalAlign={}),VerticalAlign2[VerticalAlign2.TOP=8]="TOP",VerticalAlign2[VerticalAlign2.MIDDLE=16]="MIDDLE",VerticalAlign2[VerticalAlign2.BOTTOM=32]="BOTTOM",BlendMode2=BlendMode||(BlendMode={}),BlendMode2.SRC_OVER="srcOver",BlendMode2.DST_OVER="dstOver",BlendMode2.MULTIPLY="multiply",BlendMode2.ADD="add",BlendMode2.SCREEN="screen",BlendMode2.OVERLAY="overlay",BlendMode2.DARKEN="darken",BlendMode2.LIGHTEN="lighten",BlendMode2.HARD_LIGHT="hardLight",BlendMode2.DIFFERENCE="difference",BlendMode2.EXCLUSION="exclusion";const names=[srcOver,dstOver,multiply,add,screen,overlay,darken,lighten,hardLight,difference,exclusion];var compositeModes=Object.freeze({__proto__:null,add,darken,difference,dstOver,exclusion,hardLight,lighten,multiply,names,overlay,screen,srcOver});function composite(d,m,g=0,w=0,I={}){if(!(m instanceof d.constructor))throw new Error("The source must be a Jimp image");if(typeof g!="number"||typeof w!="number")throw new Error("x and y must be numbers");const{mode:P=BlendMode.SRC_OVER}=I;let{opacitySource:F=1,opacityDest:$=1}=I;(typeof F!="number"||F<0||F>1)&&(F=1),(typeof $!="number"||$<0||$>1)&&($=1);const D=compositeModes[P];return g=Math.round(g),w=Math.round(w),$!==1&&d.scan((U,j,Z)=>{const G=d.bitmap.data[Z+3]*$;d.bitmap.data[Z+3]=G}),m.scan((U,j,Z)=>{const G=d.getPixelIndex(g+U,w+j,Edge.CROP);if(G===-1)return;const H=D({r:m.bitmap.data[Z+0]/255,g:m.bitmap.data[Z+1]/255,b:m.bitmap.data[Z+2]/255,a:m.bitmap.data[Z+3]/255},{r:d.bitmap.data[G+0]/255,g:d.bitmap.data[G+1]/255,b:d.bitmap.data[G+2]/255,a:d.bitmap.data[G+3]/255},F);d.bitmap.data[G+0]=limit255(255*H.r),d.bitmap.data[G+1]=limit255(255*H.g),d.bitmap.data[G+2]=limit255(255*H.b),d.bitmap.data[G+3]=limit255(255*H.a)}),d}var jpeg$1={parseSections:function(d,m){var g,w;for(d.setBigEndian(!0);d.remainingLength()>0&&w!==218;){if(d.nextUInt8()!==255)throw new Error("Invalid JPEG section offset");g=(w=d.nextUInt8())>=208&&w<=217||w===218?0:d.nextUInt16()-2,m(w,d.branch(0,g)),d.skip(g)}},getSizeFromSOFSection:function(d){return d.skip(1),{height:d.nextUInt16(),width:d.nextUInt16()}},getSectionName:function(d){var m,g;switch(d){case 216:m="SOI";break;case 196:m="DHT";break;case 219:m="DQT";break;case 221:m="DRI";break;case 218:m="SOS";break;case 254:m="COM";break;case 217:m="EOI";break;default:d>=224&&d<=239?(m="APP",g=d-224):d>=192&&d<=207&&d!==196&&d!==200&&d!==204?(m="SOF",g=d-192):d>=208&&d<=215&&(m="RST",g=d-208)}var w={name:m};return typeof g=="number"&&(w.index=g),w}};function readExifValue(d,m){switch(d){case 1:return m.nextUInt8();case 3:case 8:return m.nextUInt16();case 4:case 9:return m.nextUInt32();case 5:return[m.nextUInt32(),m.nextUInt32()];case 6:return m.nextInt8();case 10:return[m.nextInt32(),m.nextInt32()];case 11:return m.nextFloat();case 12:return m.nextDouble();default:throw new Error("Invalid format while decoding: "+d)}}function getBytesPerComponent(d){switch(d){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}}function readExifTag(d,m){var g,w,I=m.nextUInt16(),P=m.nextUInt16(),F=getBytesPerComponent(P),$=m.nextUInt32(),D=F*$;if(D>4&&(m=d.openWithOffset(m.nextUInt32())),P===2){var U=(g=m.nextString($)).indexOf("\0");U!==-1&&(g=g.substr(0,U))}else if(P===7)g=m.nextBuffer($);else if(P!==0)for(g=[],w=0;w<$;++w)g.push(readExifValue(P,m));return D<4&&m.skip(4-D),[I,g,P]}function readIFDSection(d,m,g){var w,I,P=m.nextUInt16();for(I=0;I<P;++I)g((w=readExifTag(d,m))[0],w[1],w[2])}function readHeader(d){if(d.nextString(6)!=="Exif\0\0")throw new Error("Invalid EXIF header");var m=d.mark(),g=d.nextUInt16();if(g===18761)d.setBigEndian(!1);else{if(g!==19789)throw new Error("Invalid TIFF header");d.setBigEndian(!0)}if(d.nextUInt16()!==42)throw new Error("Invalid TIFF data");return m}var exif$2={IFD0:1,IFD1:2,GPSIFD:3,SubIFD:4,InteropIFD:5,parseTags:function(d,m){var g,w,I,P;try{g=readHeader(d)}catch{return!1}var F=g.openWithOffset(d.nextUInt32()),$=this.IFD0;readIFDSection(g,F,function(q,W,Q){switch(q){case 34853:I=W[0];break;case 34665:w=W[0];break;default:m($,q,W,Q)}});var D=F.nextUInt32();if(D!==0){var U=g.openWithOffset(D);readIFDSection(g,U,m.bind(null,this.IFD1))}if(I){var j=g.openWithOffset(I);readIFDSection(g,j,m.bind(null,this.GPSIFD))}if(w){var Z=g.openWithOffset(w),G=this.InteropIFD;readIFDSection(g,Z,function(q,W,Q){q===40965?P=W[0]:m(G,q,W,Q)})}if(P){var H=g.openWithOffset(P);readIFDSection(g,H,m.bind(null,this.InteropIFD))}return!0}};function parseNumber(d){return parseInt(d,10)}var hours=3600,minutes=60;function parseDateTimeParts(d,m){d=d.map(parseNumber),m=m.map(parseNumber);var g=d[0],w=d[1]-1,I=d[2],P=m[0],F=m[1],$=m[2];return Date.UTC(g,w,I,P,F,$,0)/1e3}function parseDateWithTimezoneFormat(d){var m=d.substr(0,10).split("-"),g=d.substr(11,8).split(":"),w=d.substr(19,6).split(":").map(parseNumber),I=w[0]*hours+w[1]*minutes,P=parseDateTimeParts(m,g);if(typeof(P-=I)=="number"&&!isNaN(P))return P}function parseDateWithSpecFormat(d){var m=d.split(" "),g=parseDateTimeParts(m[0].split(":"),m[1].split(":"));if(typeof g=="number"&&!isNaN(g))return g}function parseExifDate(d){var m=d.length===19&&d.charAt(4)===":";return d.length===25&&d.charAt(10)==="T"?parseDateWithTimezoneFormat(d):m?parseDateWithSpecFormat(d):void 0}var date$1={parseDateWithSpecFormat,parseDateWithTimezoneFormat,parseExifDate},exif$1=exif$2,date=date$1,degreeTags=[{section:exif$1.GPSIFD,type:2,name:"GPSLatitude",refType:1,refName:"GPSLatitudeRef",posVal:"N"},{section:exif$1.GPSIFD,type:4,name:"GPSLongitude",refType:3,refName:"GPSLongitudeRef",posVal:"E"}],dateTags=[{section:exif$1.SubIFD,type:306,name:"ModifyDate"},{section:exif$1.SubIFD,type:36867,name:"DateTimeOriginal"},{section:exif$1.SubIFD,type:36868,name:"CreateDate"},{section:exif$1.SubIFD,type:306,name:"ModifyDate"}],simplify$1={castDegreeValues:function(d,m){degreeTags.forEach(function(g){var w=d(g);if(w){var I=d({section:g.section,type:g.refType,name:g.refName})===g.posVal?1:-1,P=(w[0]+w[1]/60+w[2]/3600)*I;m(g,P)}})},castDateValues:function(d,m){dateTags.forEach(function(g){var w=d(g);if(w){var I=date.parseExifDate(w);I!==void 0&&m(g,I)}})},simplifyValue:function(d,m){return Array.isArray(d)&&(d=d.map(function(g){return m===10||m===5?g[0]/g[1]:g})).length===1&&(d=d[0]),d}},exifTags,hasRequiredExifTags;function requireExifTags(){return hasRequiredExifTags?exifTags:(hasRequiredExifTags=1,exifTags={exif:{1:"InteropIndex",2:"InteropVersion",11:"ProcessingSoftware",254:"SubfileType",255:"OldSubfileType",256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Thresholding",264:"CellWidth",265:"CellLength",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",285:"PageName",286:"XPosition",287:"YPosition",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",292:"T4Options",293:"T6Options",296:"ResolutionUnit",297:"PageNumber",300:"ColorResponseUnit",301:"TransferFunction",305:"Software",306:"ModifyDate",315:"Artist",316:"HostComputer",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFD",332:"InkSet",333:"InkNames",334:"NumberofInks",336:"DotRange",337:"TargetPrinter",338:"ExtraSamples",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",435:"T82Options",437:"JPEGTables",512:"JPEGProc",513:"ThumbnailOffset",514:"ThumbnailLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"ApplicationNotes",999:"USPTOMiscellaneous",4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight",18246:"Rating",18247:"XP_DIP_XML",18248:"StitchInfo",18249:"RatingPercent",32781:"ImageID",32931:"WangTag1",32932:"WangAnnotation",32933:"WangTag3",32934:"WangTag4",32995:"Matteing",32996:"DataType",32997:"ImageDepth",32998:"TileDepth",33405:"Model2",33421:"CFARepeatPatternDim",33422:"CFAPattern2",33423:"BatteryLevel",33424:"KodakIFD",33432:"Copyright",33434:"ExposureTime",33437:"FNumber",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"PixelScale",33589:"AdventScale",33590:"AdventRevision",33628:"UIC1Tag",33629:"UIC2Tag",33630:"UIC3Tag",33631:"UIC4Tag",33723:"IPTC-NAA",33918:"IntergraphPacketData",33919:"IntergraphFlagRegisters",33920:"IntergraphMatrix",33921:"INGRReserved",33922:"ModelTiePoint",34016:"Site",34017:"ColorSequence",34018:"IT8Header",34019:"RasterPadding",34020:"BitsPerRunLength",34021:"BitsPerExtendedRunLength",34022:"ColorTable",34023:"ImageColorIndicator",34024:"BackgroundColorIndicator",34025:"ImageColorValue",34026:"BackgroundColorValue",34027:"PixelIntensityRange",34028:"TransparencyIndicator",34029:"ColorCharacterization",34030:"HCUsage",34031:"TrapIndicator",34032:"CMYKEquivalent",34118:"SEMInfo",34152:"AFCP_IPTC",34232:"PixelMagicJBIGOptions",34264:"ModelTransform",34306:"WB_GRGBLevels",34310:"LeafData",34377:"PhotoshopSettings",34665:"ExifOffset",34675:"ICC_Profile",34687:"TIFF_FXExtensions",34688:"MultiProfiles",34689:"SharedData",34690:"T88Options",34732:"ImageLayer",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34850:"ExposureProgram",34852:"SpectralSensitivity",34853:"GPSInfo",34855:"ISO",34856:"Opto-ElectricConvFactor",34857:"Interlace",34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",34908:"FaxRecvParams",34909:"FaxSubAddress",34910:"FaxRecvTime",34954:"LeafSubIFD",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"CreateDate",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureCompensation",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37387:"FlashEnergy",37388:"SpatialFrequencyResponse",37389:"Noise",37390:"FocalPlaneXResolution",37391:"FocalPlaneYResolution",37392:"FocalPlaneResolutionUnit",37393:"ImageNumber",37394:"SecurityClassification",37395:"ImageHistory",37396:"SubjectArea",37397:"ExposureIndex",37398:"TIFF-EPStandardID",37399:"SensingMethod",37434:"CIP3DataFile",37435:"CIP3Sheet",37436:"CIP3Side",37439:"StoNits",37500:"MakerNote",37510:"UserComment",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37679:"MSDocumentText",37680:"MSPropertySetStorage",37681:"MSDocumentTextPosition",37724:"ImageSourceData",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",40960:"FlashpixVersion",40961:"ColorSpace",40962:"ExifImageWidth",40963:"ExifImageHeight",40964:"RelatedSoundFile",40965:"InteropOffset",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41485:"Noise",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41489:"ImageNumber",41490:"SecurityClassification",41491:"ImageHistory",41492:"SubjectLocation",41493:"ExposureIndex",41494:"TIFF-EPStandardID",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFormat",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"OwnerName",42033:"SerialNumber",42034:"LensInfo",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42112:"GDALMetadata",42113:"GDALNoData",42240:"Gamma",44992:"ExpandSoftware",44993:"ExpandLens",44994:"ExpandFilm",44995:"ExpandFilterLens",44996:"ExpandScanner",44997:"ExpandFlashLamp",48129:"PixelFormat",48130:"Transformation",48131:"Uncompressed",48132:"ImageType",48256:"ImageWidth",48257:"ImageHeight",48258:"WidthResolution",48259:"HeightResolution",48320:"ImageOffset",48321:"ImageByteCount",48322:"AlphaOffset",48323:"AlphaByteCount",48324:"ImageDataDiscard",48325:"AlphaDataDiscard",50215:"OceScanjobDesc",50216:"OceApplicationSelector",50217:"OceIDNumber",50218:"OceImageLogic",50255:"Annotations",50341:"PrintIM",50560:"USPTOOriginalContentType",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50739:"ShadowScale",50740:"DNGPrivateData",50741:"MakerNoteSafety",50752:"RawImageSegmentation",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50781:"RawDataUniqueID",50784:"AliasLayerMetadata",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50829:"ActiveArea",50830:"MaskedAreas",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50935:"NoiseReductionApplied",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:"ProfileEmbedPolicy",50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:"PreviewColorSpace",50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50974:"SubTileBlockSize",50975:"RowInterleaveFactor",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51008:"OpcodeList1",51009:"OpcodeList2",51022:"OpcodeList3",51041:"NoiseProfile",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:"ProfileHueSatMapEncoding",51108:"ProfileLookTableEncoding",51109:"BaselineExposureOffset",51110:"DefaultBlackRender",51111:"NewRawImageDigest",51112:"RawToPreviewGain",51125:"DefaultUserCrop",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65024:"KDC_IFD",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"}})}var jpeg=jpeg$1,exif=exif$2,simplify=simplify$1;function ExifResult(d,m,g,w,I,P,F){this.startMarker=d,this.tags=m,this.imageSize=g,this.thumbnailOffset=w,this.thumbnailLength=I,this.thumbnailType=P,this.app1Offset=F}function Parser$1(d){this.stream=d,this.flags={readBinaryTags:!1,resolveTagNames:!0,simplifyValues:!0,imageSize:!0,hidePointers:!0,returnTags:!0}}ExifResult.prototype={hasThumbnail:function(d){return!(!this.thumbnailOffset||!this.thumbnailLength)&&(typeof d!="string"||(d.toLowerCase().trim()==="image/jpeg"?this.thumbnailType===6:d.toLowerCase().trim()==="image/tiff"&&this.thumbnailType===1))},getThumbnailOffset:function(){return this.app1Offset+6+this.thumbnailOffset},getThumbnailLength:function(){return this.thumbnailLength},getThumbnailBuffer:function(){return this._getThumbnailStream().nextBuffer(this.thumbnailLength)},_getThumbnailStream:function(){return this.startMarker.openWithOffset(this.getThumbnailOffset())},getImageSize:function(){return this.imageSize},getThumbnailSize:function(){var d,m=this._getThumbnailStream();return jpeg.parseSections(m,function(g,w){jpeg.getSectionName(g).name==="SOF"&&(d=jpeg.getSizeFromSOFSection(w))}),d}},Parser$1.prototype={enableBinaryFields:function(d){return this.flags.readBinaryTags=!!d,this},enablePointers:function(d){return this.flags.hidePointers=!d,this},enableTagNames:function(d){return this.flags.resolveTagNames=!!d,this},enableImageSize:function(d){return this.flags.imageSize=!!d,this},enableReturnTags:function(d){return this.flags.returnTags=!!d,this},enableSimpleValues:function(d){return this.flags.simplifyValues=!!d,this},parse:function(){var d,m,g,w,I,P,F,$,D,U=this.stream.mark(),j=U.openWithOffset(0),Z=this.flags;return Z.resolveTagNames&&(F=requireExifTags()),Z.resolveTagNames?(d={},$=function(G){return d[G.name]},D=function(G,H){d[G.name]=H}):(d=[],$=function(G){var H;for(H=0;H<d.length;++H)if(d[H].type===G.type&&d[H].section===G.section)return d.value},D=function(G,H){var q;for(q=0;q<d.length;++q)if(d[q].type===G.type&&d[q].section===G.section)return void(d.value=H)}),jpeg.parseSections(j,function(G,H){var q=H.offsetFrom(U);G===225?exif.parseTags(H,function(W,Q,J,K){if(Z.readBinaryTags||K!==7){if(Q===513){if(g=J[0],Z.hidePointers)return}else if(Q===514){if(w=J[0],Z.hidePointers)return}else if(Q===259&&(I=J[0],Z.hidePointers))return;if(Z.returnTags)if(Z.simplifyValues&&(J=simplify.simplifyValue(J,K)),Z.resolveTagNames){var V=(W===exif.GPSIFD?F.gps:F.exif)[Q];V||(V=F.exif[Q]),d.hasOwnProperty(V)||(d[V]=J)}else d.push({section:W,type:Q,value:J})}})&&(P=q):Z.imageSize&&jpeg.getSectionName(G).name==="SOF"&&(m=jpeg.getSizeFromSOFSection(H))}),Z.simplifyValues&&(simplify.castDegreeValues($,D),simplify.castDateValues($,D)),new ExifResult(U,d,m,g,w,I,P)}};var parser=Parser$1,domBufferstream,hasRequiredDomBufferstream,bufferstream,hasRequiredBufferstream;function requireDomBufferstream(){if(hasRequiredDomBufferstream)return domBufferstream;function d(m,g,w,I,P,F){this.global=P,g=g||0,w=w||m.byteLength-g,this.arrayBuffer=m.slice(g,g+w),this.view=new P.DataView(this.arrayBuffer,0,this.arrayBuffer.byteLength),this.setBigEndian(I),this.offset=0,this.parentOffset=(F||0)+g}return hasRequiredDomBufferstream=1,d.prototype={setBigEndian:function(m){this.littleEndian=!m},nextUInt8:function(){var m=this.view.getUint8(this.offset);return this.offset+=1,m},nextInt8:function(){var m=this.view.getInt8(this.offset);return this.offset+=1,m},nextUInt16:function(){var m=this.view.getUint16(this.offset,this.littleEndian);return this.offset+=2,m},nextUInt32:function(){var m=this.view.getUint32(this.offset,this.littleEndian);return this.offset+=4,m},nextInt16:function(){var m=this.view.getInt16(this.offset,this.littleEndian);return this.offset+=2,m},nextInt32:function(){var m=this.view.getInt32(this.offset,this.littleEndian);return this.offset+=4,m},nextFloat:function(){var m=this.view.getFloat32(this.offset,this.littleEndian);return this.offset+=4,m},nextDouble:function(){var m=this.view.getFloat64(this.offset,this.littleEndian);return this.offset+=8,m},nextBuffer:function(m){var g=this.arrayBuffer.slice(this.offset,this.offset+m);return this.offset+=m,g},remainingLength:function(){return this.arrayBuffer.byteLength-this.offset},nextString:function(m){var g=this.arrayBuffer.slice(this.offset,this.offset+m);return g=String.fromCharCode.apply(null,new this.global.Uint8Array(g)),this.offset+=m,g},mark:function(){var m=this;return{openWithOffset:function(g){return g=(g||0)+this.offset,new d(m.arrayBuffer,g,m.arrayBuffer.byteLength-g,!m.littleEndian,m.global,m.parentOffset)},offset:this.offset,getParentOffset:function(){return m.parentOffset}}},offsetFrom:function(m){return this.parentOffset+this.offset-(m.offset+m.getParentOffset())},skip:function(m){this.offset+=m},branch:function(m,g){return g=typeof g=="number"?g:this.arrayBuffer.byteLength-(this.offset+m),new d(this.arrayBuffer,this.offset+m,g,!this.littleEndian,this.global,this.parentOffset)}},domBufferstream=d}function requireBufferstream(){if(hasRequiredBufferstream)return bufferstream;function d(m,g,w,I){this.buffer=m,this.offset=g||0,w=typeof w=="number"?w:m.length,this.endPosition=this.offset+w,this.setBigEndian(I)}return hasRequiredBufferstream=1,d.prototype={setBigEndian:function(m){this.bigEndian=!!m},nextUInt8:function(){var m=this.buffer.readUInt8(this.offset);return this.offset+=1,m},nextInt8:function(){var m=this.buffer.readInt8(this.offset);return this.offset+=1,m},nextUInt16:function(){var m=this.bigEndian?this.buffer.readUInt16BE(this.offset):this.buffer.readUInt16LE(this.offset);return this.offset+=2,m},nextUInt32:function(){var m=this.bigEndian?this.buffer.readUInt32BE(this.offset):this.buffer.readUInt32LE(this.offset);return this.offset+=4,m},nextInt16:function(){var m=this.bigEndian?this.buffer.readInt16BE(this.offset):this.buffer.readInt16LE(this.offset);return this.offset+=2,m},nextInt32:function(){var m=this.bigEndian?this.buffer.readInt32BE(this.offset):this.buffer.readInt32LE(this.offset);return this.offset+=4,m},nextFloat:function(){var m=this.bigEndian?this.buffer.readFloatBE(this.offset):this.buffer.readFloatLE(this.offset);return this.offset+=4,m},nextDouble:function(){var m=this.bigEndian?this.buffer.readDoubleBE(this.offset):this.buffer.readDoubleLE(this.offset);return this.offset+=8,m},nextBuffer:function(m){var g=this.buffer.slice(this.offset,this.offset+m);return this.offset+=m,g},remainingLength:function(){return this.endPosition-this.offset},nextString:function(m){var g=this.buffer.toString("utf8",this.offset,this.offset+m);return this.offset+=m,g},mark:function(){var m=this;return{openWithOffset:function(g){return g=(g||0)+this.offset,new d(m.buffer,g,m.endPosition-g,m.bigEndian)},offset:this.offset}},offsetFrom:function(m){return this.offset-m.offset},skip:function(m){this.offset+=m},branch:function(m,g){return g=typeof g=="number"?g:this.endPosition-(this.offset+m),new d(this.buffer,this.offset+m,g,this.bigEndian)}},bufferstream=d}var Parser=parser;function getGlobal(){return(0,eval)("this")}var exifParser={create:function(d,m){if(d instanceof(m=m||getGlobal()).ArrayBuffer){var g=requireDomBufferstream();return new Parser(new g(d,0,d.byteLength,!0,m))}var w=requireBufferstream();return new Parser(new w(d,0,d.length,!0))}},EXIFParser=getDefaultExportFromCjs(exifParser);function getExifOrientation(d){const m=d._exif;return m&&m.tags&&m.tags.Orientation||1}function getExifOrientationTransformation(d){const m=d.bitmap.width,g=d.bitmap.height;switch(getExifOrientation(d)){case 1:default:return null;case 2:return function(w,I){return[m-w-1,I]};case 3:return function(w,I){return[m-w-1,g-I-1]};case 4:return function(w,I){return[w,g-I-1]};case 5:return function(w,I){return[I,w]};case 6:return function(w,I){return[I,g-w-1]};case 7:return function(w,I){return[m-I-1,g-w-1]};case 8:return function(w,I){return[m-I-1,w]}}}function transformBitmap(d,m,g,w){const I=d.bitmap.data,P=d.bitmap.width,F=Buffer$1.alloc(I.length);for(let $=0;$<m;$++)for(let D=0;D<g;D++){const[U,j]=w($,D),Z=m*D+$<<2,G=P*j+U<<2,H=I.readUInt32BE(G);F.writeUInt32BE(H,Z)}d.bitmap.data=F,d.bitmap.width=m,d.bitmap.height=g,d._exif.tags.Orientation=1}function exifRotate(d){if(getExifOrientation(d)<2)return;const m=getExifOrientationTransformation(d),g=getExifOrientation(d)>4,w=g?d.bitmap.height:d.bitmap.width,I=g?d.bitmap.width:d.bitmap.height;m&&transformBitmap(d,w,I,m)}async function attemptExifRotate(d,m){try{d._exif=EXIFParser.create(m).parse(),exifRotate(d)}catch{}}var __defProp$2=Object.defineProperty,__defNormalProp$2=(d,m,g)=>m in d?__defProp$2(d,m,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[m]=g,__publicField$2=(d,m,g)=>__defNormalProp$2(d,typeof m!="symbol"?m+"":m,g);const emptyBitmap={data:Buffer$1.alloc(0),width:0,height:0};function bufferFromArrayBuffer(d){const m=Buffer$1.alloc(d.byteLength),g=new Uint8Array(d);for(let w=0;w<m.length;++w)m[w]=g[w];return m}function createJimp({plugins:d,formats:m}={}){const g=d||[],w=(m||[]).map(P=>P()),I=class{constructor(P=emptyBitmap){if(__publicField$2(this,"bitmap",emptyBitmap),__publicField$2(this,"background",0),__publicField$2(this,"formats",[]),__publicField$2(this,"mime"),this.formats=w,"data"in P)this.bitmap=P;else if(this.bitmap={data:Buffer$1.alloc(P.width*P.height*4),width:P.width,height:P.height},P.color){this.background=typeof P.color=="string"?cssColorToHex(P.color):P.color;for(let F=0;F<this.bitmap.data.length;F+=4)this.bitmap.data.writeUInt32BE(this.background,F)}for(const F of g)for(const $ in F)this[$]=(...D)=>{var j;const U=(j=F[$])==null?void 0:j.call(F,this,...D);return typeof U=="object"&&"bitmap"in U?(this.bitmap=U.bitmap,this):U}}static async read(P,F){if(Buffer$1.isBuffer(P)||P instanceof ArrayBuffer)return this.fromBuffer(P);const[$,D]=await to(fetch(P));if($)throw new Error(`Could not load Buffer from URL: ${P}`);if(!D.ok)throw new Error(`HTTP Status ${D.status} for url ${P}`);const[U,j]=await to(D.arrayBuffer());if(U)throw new Error(`Could not load Buffer from ${P}`);const Z=bufferFromArrayBuffer(j);return this.fromBuffer(Z,F)}static fromBitmap(P){let F;if(P.data instanceof Buffer$1&&(F=Buffer$1.from(P.data)),(P.data instanceof Uint8Array||P.data instanceof Uint8ClampedArray)&&(F=Buffer$1.from(P.data.buffer)),Array.isArray(P.data)&&(F=Buffer$1.concat(P.data.map($=>Buffer$1.from($.toString(16).padStart(8,"0"),"hex")))),!F)throw new Error("data must be a Buffer");if(typeof P.height!="number"||typeof P.width!="number")throw new Error("bitmap must have width and height");return new I({height:P.height,width:P.width,data:F})}static async fromBuffer(P,F){const $=P instanceof ArrayBuffer?bufferFromArrayBuffer(P):P,D=await fileType$1.fromBuffer($);if(!D||!D.mime)throw new Error("Could not find MIME for Buffer");const U=w.find(Z=>Z.mime===D.mime);if(!U||!U.decode)throw new Error(`Mime type ${D.mime} does not support decoding`);const j=new I(await U.decode($,F==null?void 0:F[U.mime]));return j.mime=D.mime,attemptExifRotate(j,$),j}inspect(){return"<Jimp "+(this.bitmap===emptyBitmap?"pending...":this.bitmap.width+"x"+this.bitmap.height)+">"}toString(){return"[object Jimp]"}get width(){return this.bitmap.width}get height(){return this.bitmap.height}async getBuffer(P,F){const $=this.formats.find(U=>U.mime===P);if(!$||!$.encode)throw new Error(`Unsupported MIME type: ${P}`);let D;return $.hasAlpha?D=this:(D=new I({width:this.bitmap.width,height:this.bitmap.height,color:this.background}),composite(D,this)),$.encode(D.bitmap,F)}async getBase64(P,F){return"data:"+P+";base64,"+(await this.getBuffer(P,F)).toString("base64")}async write(P,F){const $=mime.getType(P);await writeFile(P,await this.getBuffer($,F))}clone(){return new I({...this.bitmap,data:Buffer$1.from(this.bitmap.data)})}getPixelIndex(P,F,$){let D,U;if($||($=Edge.EXTEND),typeof P!="number"||typeof F!="number")throw new Error("x and y must be numbers");D=P=Math.round(P),U=F=Math.round(F),$===Edge.EXTEND&&(P<0&&(D=0),P>=this.bitmap.width&&(D=this.bitmap.width-1),F<0&&(U=0),F>=this.bitmap.height&&(U=this.bitmap.height-1)),$===Edge.WRAP&&(P<0&&(D=this.bitmap.width+P),P>=this.bitmap.width&&(D=P%this.bitmap.width),F<0&&(U=this.bitmap.height+F),F>=this.bitmap.height&&(U=F%this.bitmap.height));let j=this.bitmap.width*U+D<<2;return(D<0||D>=this.bitmap.width)&&(j=-1),(U<0||U>=this.bitmap.height)&&(j=-1),j}getPixelColor(P,F){if(typeof P!="number"||typeof F!="number")throw new Error("x and y must be numbers");const $=this.getPixelIndex(P,F);return this.bitmap.data.readUInt32BE($)}setPixelColor(P,F,$){if(typeof P!="number"||typeof F!="number"||typeof $!="number")throw new Error("hex, x and y must be numbers");const D=this.getPixelIndex(F,$);return this.bitmap.data.writeUInt32BE(P,D),this}hasAlpha(){const{width:P,height:F,data:$}=this.bitmap,D=P*F<<2;for(let U=3;U<D;U+=4)if($[U]!==255)return!0;return!1}composite(P,F=0,$=0,D={}){return composite(this,P,F,$,D)}scan(P,F,$,D,U){return scan(this,P,F,$,D,U)}scanIterator(P=0,F=0,$=this.bitmap.width,D=this.bitmap.height){if(typeof P!="number"||typeof F!="number")throw new Error("x and y must be numbers");if(typeof $!="number"||typeof D!="number")throw new Error("w and h must be numbers");return scanIterator(this,P,F,$,D)}};return I}var ResizeStrategy,ResizeStrategy2;function Resize(d,m,g,w,I,P,F){this.widthOriginal=Math.abs(Math.floor(d)||0),this.heightOriginal=Math.abs(Math.floor(m)||0),this.targetWidth=Math.abs(Math.floor(g)||0),this.targetHeight=Math.abs(Math.floor(w)||0),this.colorChannels=I?4:3,this.interpolationPass=!!P,this.resizeCallback=typeof F=="function"?F:function(){},this.targetWidthMultipliedByChannels=this.targetWidth*this.colorChannels,this.originalWidthMultipliedByChannels=this.widthOriginal*this.colorChannels,this.originalHeightMultipliedByChannels=this.heightOriginal*this.colorChannels,this.widthPassResultSize=this.targetWidthMultipliedByChannels*this.heightOriginal,this.finalResultSize=this.targetWidthMultipliedByChannels*this.targetHeight,this.initialize()}ResizeStrategy2=ResizeStrategy||(ResizeStrategy={}),ResizeStrategy2.NEAREST_NEIGHBOR="nearestNeighbor",ResizeStrategy2.BILINEAR="bilinearInterpolation",ResizeStrategy2.BICUBIC="bicubicInterpolation",ResizeStrategy2.HERMITE="hermiteInterpolation",ResizeStrategy2.BEZIER="bezierInterpolation",Resize.prototype.initialize=function(){if(!(this.widthOriginal>0&&this.heightOriginal>0&&this.targetWidth>0&&this.targetHeight>0))throw console.log(this),new Error("Invalid settings specified for the resizer.");this.configurePasses()},Resize.prototype.configurePasses=function(){this.widthOriginal===this.targetWidth?this.resizeWidth=this.bypassResizer:(this.ratioWeightWidthPass=this.widthOriginal/this.targetWidth,this.ratioWeightWidthPass<1&&this.interpolationPass?(this.initializeFirstPassBuffers(!0),this.resizeWidth=this.colorChannels===4?this.resizeWidthInterpolatedRGBA:this.resizeWidthInterpolatedRGB):(this.initializeFirstPassBuffers(!1),this.resizeWidth=this.colorChannels===4?this.resizeWidthRGBA:this.resizeWidthRGB)),this.heightOriginal===this.targetHeight?this.resizeHeight=this.bypassResizer:(this.ratioWeightHeightPass=this.heightOriginal/this.targetHeight,this.ratioWeightHeightPass<1&&this.interpolationPass?(this.initializeSecondPassBuffers(!0),this.resizeHeight=this.resizeHeightInterpolated):(this.initializeSecondPassBuffers(!1),this.resizeHeight=this.colorChannels===4?this.resizeHeightRGBA:this.resizeHeightRGB))},Resize.prototype._resizeWidthInterpolatedRGBChannels=function(d,m){const g=m?4:3,w=this.ratioWeightWidthPass,I=this.widthBuffer;let P,F,$=0,D=0,U=0,j=0,Z=0;for(P=0;$<1/3;P+=g,$+=w)for(D=P,U=0;D<this.widthPassResultSize;U+=this.originalWidthMultipliedByChannels,D+=this.targetWidthMultipliedByChannels)I[D]=d[U],I[D+1]=d[U+1],I[D+2]=d[U+2],m&&(I[D+3]=d[U+3]);for($-=1/3,F=this.widthOriginal-1;$<F;P+=g,$+=w)for(Z=$%1,j=1-Z,D=P,U=Math.floor($)*g;D<this.widthPassResultSize;U+=this.originalWidthMultipliedByChannels,D+=this.targetWidthMultipliedByChannels)I[D+0]=d[U+0]*j+d[U+g+0]*Z,I[D+1]=d[U+1]*j+d[U+g+1]*Z,I[D+2]=d[U+2]*j+d[U+g+2]*Z,m&&(I[D+3]=d[U+3]*j+d[U+g+3]*Z);for(F=this.originalWidthMultipliedByChannels-g;P<this.targetWidthMultipliedByChannels;P+=g)for(D=P,U=F;D<this.widthPassResultSize;U+=this.originalWidthMultipliedByChannels,D+=this.targetWidthMultipliedByChannels)I[D]=d[U],I[D+1]=d[U+1],I[D+2]=d[U+2],m&&(I[D+3]=d[U+3]);return I},Resize.prototype._resizeWidthRGBChannels=function(d,m){const g=m?4:3,w=this.ratioWeightWidthPass,I=1/w,P=this.originalWidthMultipliedByChannels-g+1,F=this.targetWidthMultipliedByChannels-g+1,$=this.outputWidthWorkBench,D=this.widthBuffer,U=this.outputWidthWorkBenchOpaquePixelsCount;let j=0,Z=0,G=0,H=0,q=0,W=0,Q=0,J=1,K=0,V=0,tt=0,X=0;do{for(q=0;q<this.originalHeightMultipliedByChannels;)$[q++]=0,$[q++]=0,$[q++]=0,m&&($[q++]=0,U[q/g-1]=0);j=w;do{for(Z=1+G-H,J=Math.min(j,Z),q=0,W=G;q<this.originalHeightMultipliedByChannels;W+=P)K=d[W],V=d[++W],tt=d[++W],X=m?d[++W]:255,$[q++]+=(X?K:0)*J,$[q++]+=(X?V:0)*J,$[q++]+=(X?tt:0)*J,m&&($[q++]+=X*J,U[q/g-1]+=X?J:0);if(!(j>=Z)){H+=j;break}G+=g,H=G,j-=Z}while(j>0&&G<this.originalWidthMultipliedByChannels);for(q=0,W=Q;q<this.originalHeightMultipliedByChannels;W+=F)j=m?U[q/g]:1,J=m?j?1/j:0:I,D[W]=$[q++]*J,D[++W]=$[q++]*J,D[++W]=$[q++]*J,m&&(D[++W]=$[q++]*I);Q+=g}while(Q<this.targetWidthMultipliedByChannels);return D},Resize.prototype._resizeHeightRGBChannels=function(d,m){const g=this.ratioWeightHeightPass,w=1/g,I=this.outputHeightWorkBench,P=this.heightBuffer,F=this.outputHeightWorkBenchOpaquePixelsCount;let $=0,D=0,U=0,j=0,Z=0,G=0,H=0,q=1,W=0,Q=0,J=0,K=0;do{for(Z=0;Z<this.targetWidthMultipliedByChannels;)I[Z++]=0,I[Z++]=0,I[Z++]=0,m&&(I[Z++]=0,F[Z/4-1]=0);$=g;do{for(D=1+U-j,q=Math.min($,D),H=U,Z=0;Z<this.targetWidthMultipliedByChannels;)W=d[H++],Q=d[H++],J=d[H++],K=m?d[H++]:255,I[Z++]+=(K?W:0)*q,I[Z++]+=(K?Q:0)*q,I[Z++]+=(K?J:0)*q,m&&(I[Z++]+=K*q,F[Z/4-1]+=K?q:0);if(!($>=D)){j+=$;break}U=H,j=U,$-=D}while($>0&&U<this.widthPassResultSize);for(Z=0;Z<this.targetWidthMultipliedByChannels;)$=m?F[Z/4]:1,q=m?$?1/$:0:w,P[G++]=Math.round(I[Z++]*q),P[G++]=Math.round(I[Z++]*q),P[G++]=Math.round(I[Z++]*q),m&&(P[G++]=Math.round(I[Z++]*w))}while(G<this.finalResultSize);return P},Resize.prototype.resizeWidthInterpolatedRGB=function(d){return this._resizeWidthInterpolatedRGBChannels(d,!1)},Resize.prototype.resizeWidthInterpolatedRGBA=function(d){return this._resizeWidthInterpolatedRGBChannels(d,!0)},Resize.prototype.resizeWidthRGB=function(d){return this._resizeWidthRGBChannels(d,!1)},Resize.prototype.resizeWidthRGBA=function(d){return this._resizeWidthRGBChannels(d,!0)},Resize.prototype.resizeHeightInterpolated=function(d){const m=this.ratioWeightHeightPass,g=this.heightBuffer;let w,I=0,P=0,F=0,$=0,D=0,U=0,j=0;for(;I<1/3;I+=m)for(F=0;F<this.targetWidthMultipliedByChannels;)g[P++]=Math.round(d[F++]);for(I-=1/3,w=this.heightOriginal-1;I<w;I+=m)for(j=I%1,U=1-j,$=Math.floor(I)*this.targetWidthMultipliedByChannels,D=$+this.targetWidthMultipliedByChannels,F=0;F<this.targetWidthMultipliedByChannels;++F)g[P++]=Math.round(d[$++]*U+d[D++]*j);for(;P<this.finalResultSize;)for(F=0,$=w*this.targetWidthMultipliedByChannels;F<this.targetWidthMultipliedByChannels;++F)g[P++]=Math.round(d[$++]);return g},Resize.prototype.resizeHeightRGB=function(d){return this._resizeHeightRGBChannels(d,!1)},Resize.prototype.resizeHeightRGBA=function(d){return this._resizeHeightRGBChannels(d,!0)},Resize.prototype.resize=function(d){this.resizeCallback(this.resizeHeight(this.resizeWidth(d)))},Resize.prototype.bypassResizer=function(d){return d},Resize.prototype.initializeFirstPassBuffers=function(d){this.widthBuffer=this.generateFloatBuffer(this.widthPassResultSize),d||(this.outputWidthWorkBench=this.generateFloatBuffer(this.originalHeightMultipliedByChannels),this.colorChannels>3&&(this.outputWidthWorkBenchOpaquePixelsCount=this.generateFloat64Buffer(this.heightOriginal)))},Resize.prototype.initializeSecondPassBuffers=function(d){this.heightBuffer=this.generateUint8Buffer(this.finalResultSize),d||(this.outputHeightWorkBench=this.generateFloatBuffer(this.targetWidthMultipliedByChannels),this.colorChannels>3&&(this.outputHeightWorkBenchOpaquePixelsCount=this.generateFloat64Buffer(this.targetWidth)))},Resize.prototype.generateFloatBuffer=function(d){try{return new Float32Array(d)}catch(m){return console.error(m),[]}},Resize.prototype.generateFloat64Buffer=function(d){try{return new Float64Array(d)}catch(m){return console.error(m),[]}},Resize.prototype.generateUint8Buffer=function(d){try{return new Uint8Array(d)}catch(m){return console.error(m),[]}};const operations={nearestNeighbor(d,m){const g=d.width,w=d.height,I=m.width,P=m.height,F=d.data,$=m.data;for(let D=0;D<P;D++)for(let U=0;U<I;U++){let j=4*(D*I+U),Z=4*(Math.floor(D*w/P)*g+Math.floor(U*g/I));$[j++]=F[Z++],$[j++]=F[Z++],$[j++]=F[Z++],$[j++]=F[Z++]}},bilinearInterpolation(d,m){const g=d.width,w=d.height,I=m.width,P=m.height,F=d.data,$=m.data,D=function(j,Z,G,H,q){return Z===H?G:Math.round((j-Z)*q+(H-j)*G)},U=function(j,Z,G,H,q,W,Q,J){let K=4*(Q*g+H)+Z,V=4*(Q*g+q)+Z;const tt=D(G,H,F[K],q,F[V]);if(J===Q)$[j+Z]=tt;else{K=4*(J*g+H)+Z,V=4*(J*g+q)+Z;const X=D(G,H,F[K],q,F[V]);$[j+Z]=D(W,Q,tt,J,X)}};for(let j=0;j<P;j++)for(let Z=0;Z<I;Z++){const G=4*(j*I+Z),H=Z*g/I,q=Math.floor(H),W=Math.min(Math.ceil(H),g-1),Q=j*w/P,J=Math.floor(Q),K=Math.min(Math.ceil(Q),w-1);U(G,0,H,q,W,Q,J,K),U(G,1,H,q,W,Q,J,K),U(G,2,H,q,W,Q,J,K),U(G,3,H,q,W,Q,J,K)}},_interpolate2D(d,m,g,w){const I=d.data,P=m.data,F=d.width,$=d.height,D=m.width,U=m.height,j=Math.max(1,Math.floor(F/D)),Z=D*j,G=Math.max(1,Math.floor($/U)),H=U*G,q=Buffer$1.alloc(Z*$*4);for(let J=0;J<$;J++)for(let K=0;K<Z;K++){const V=K*(F-1)/Z,tt=Math.floor(V),X=V-tt,ot=4*(J*F+tt),it=4*(J*Z+K);for(let lt=0;lt<4;lt++){const at=ot+lt,ht=tt>0?I[at-4]:2*I[at]-I[at+4],et=I[at],ut=I[at+4],Et=tt<F-2?I[at+8]:2*I[at+4]-I[at];q[it+lt]=w(ht,et,ut,Et,X)}}const W=Buffer$1.alloc(Z*H*4);for(let J=0;J<H;J++)for(let K=0;K<Z;K++){const V=J*($-1)/H,tt=Math.floor(V),X=V-tt,ot=4*(tt*Z+K),it=4*(J*Z+K);for(let lt=0;lt<4;lt++){const at=ot+lt,ht=tt>0?q[at-4*Z]:2*q[at]-q[at+4*Z],et=q[at],ut=q[at+4*Z],Et=tt<$-2?q[at+8*Z]:2*q[at+4*Z]-q[at];W[it+lt]=w(ht,et,ut,Et,X)}}const Q=j*G;if(Q>1)for(let J=0;J<U;J++)for(let K=0;K<D;K++){let V=0,tt=0,X=0,ot=0,it=0;for(let at=0;at<G;at++){const ht=J*G+at;for(let et=0;et<j;et++){const ut=4*(ht*Z+(K*j+et)),Et=W[ut+3];Et&&(V+=W[ut],tt+=W[ut+1],X+=W[ut+2],it++),ot+=Et}}const lt=4*(J*D+K);P[lt]=it?Math.round(V/it):0,P[lt+1]=it?Math.round(tt/it):0,P[lt+2]=it?Math.round(X/it):0,P[lt+3]=Math.round(ot/Q)}else m.data=W},bicubicInterpolation(d,m,g){return this._interpolate2D(d,m,g,function(w,I,P,F,$){const D=F-P-w+I,U=w-I-D,j=P-w,Z=I;return Math.max(0,Math.min(255,D*($*$*$)+U*($*$)+j*$+Z))})},hermiteInterpolation(d,m,g){return this._interpolate2D(d,m,g,function(w,I,P,F,$){const D=I,U=.5*(P-w),j=w-2.5*I+2*P-.5*F,Z=.5*(F-w)+1.5*(I-P);return Math.max(0,Math.min(255,Math.round(((Z*$+j)*$+U)*$+D)))})},bezierInterpolation(d,m,g){return this._interpolate2D(d,m,g,function(w,I,P,F,$){const D=1-$,U=I*D*D*D,j=3*(I+(P-w)/4)*D*D*$,Z=3*(P-(F-I)/4)*D*$*$,G=P*$*$*$;return Math.max(0,Math.min(255,Math.round(U+j+Z+G)))})}},ResizeOptionsSchema=z.union([z.object({w:z.number().min(0),h:z.number().min(0).optional(),mode:z.nativeEnum(ResizeStrategy).optional()}),z.object({w:z.number().min(0).optional(),h:z.number().min(0),mode:z.nativeEnum(ResizeStrategy).optional()})]),ScaleToFitOptionsSchema=z.object({w:z.number().min(0),h:z.number().min(0),mode:z.nativeEnum(ResizeStrategy).optional()}),ScaleComplexOptionsSchema=z.object({f:z.number().min(0),mode:z.nativeEnum(ResizeStrategy).optional()}),methods$d={resize(d,m){const{mode:g}=ResizeOptionsSchema.parse(m);let w,I;if(typeof m.w=="number")w=m.w,I=m.h??d.bitmap.height*(w/d.bitmap.width);else{if(typeof m.h!="number")throw new Error("w must be a number");I=m.h,w=m.w??d.bitmap.width*(I/d.bitmap.height)}if(w=Math.round(w)||1,I=Math.round(I)||1,g&&typeof operations[g]=="function"){const P={data:Buffer$1.alloc(w*I*4),width:w,height:I};operations[g](d.bitmap,P),d.bitmap=P}else new Resize(d.bitmap.width,d.bitmap.height,w,I,!0,!0,P=>{d.bitmap.data=Buffer$1.from(P),d.bitmap.width=w,d.bitmap.height=I}).resize(d.bitmap.data);return d},scale(d,m){const{f:g,mode:w}=typeof m=="number"?{f:m}:ScaleComplexOptionsSchema.parse(m),I=d.bitmap.width*g,P=d.bitmap.height*g;return this.resize(d,{w:I,h:P,mode:w})},scaleToFit(d,m){const{h:g,w,mode:I}=ScaleToFitOptionsSchema.parse(m),P=w/g>d.bitmap.width/d.bitmap.height?g/d.bitmap.height:w/d.bitmap.width;return this.scale(d,{f:P,mode:I})}},ContainOptionsSchema=z.object({w:z.number(),h:z.number(),align:z.number().optional(),mode:z.nativeEnum(ResizeStrategy).optional()}),methods$c={contain(d,m){const{w:g,h:w,align:I=HorizontalAlign.CENTER|VerticalAlign.MIDDLE,mode:P}=ContainOptionsSchema.parse(m),F=7&I,$=I>>3;if((F===0||F&F-1)&&($===0||$&$-1))throw new Error("only use one flag per alignment direction");const D=F>>1,U=$>>1,j=g/w>d.bitmap.width/d.bitmap.height?w/d.bitmap.height:g/d.bitmap.width,Z=methods$d.scale(clone(d),{f:j,mode:P});return(d=methods$d.resize(d,{w:g,h:w,mode:P})).scan((G,H,q)=>{d.bitmap.data.writeUInt32BE(d.background,q)}),d=methods$h.blit(d,{src:Z,x:(d.bitmap.width-Z.bitmap.width)/2*D,y:(d.bitmap.height-Z.bitmap.height)/2*U})}},CropOptionsSchema=z.object({x:z.number(),y:z.number(),w:z.number(),h:z.number()}),AutocropComplexOptionsSchema=z.object({tolerance:z.number().min(0).max(1).optional(),cropOnlyFrames:z.boolean().optional(),cropSymmetric:z.boolean().optional(),leaveBorder:z.number().optional(),ignoreSides:z.object({north:z.boolean().optional(),south:z.boolean().optional(),east:z.boolean().optional(),west:z.boolean().optional()}).optional()}),methods$b={crop(d,m){let{x:g,y:w,w:I,h:P}=CropOptionsSchema.parse(m);if(g=Math.round(g),w=Math.round(w),I=Math.round(I),P=Math.round(P),g===0&&I===d.bitmap.width){const F=I*w+g<<2,$=F+(P*I<<2);d.bitmap.data=d.bitmap.data.slice(F,$)}else{const F=Buffer$1.allocUnsafe(I*P*4);let $=0;scan(d,g,w,I,P,function(D,U,j){const Z=d.bitmap.data.readUInt32BE(j);F.writeUInt32BE(Z,$),$+=4}),d.bitmap.data=F}return d.bitmap.width=I,d.bitmap.height=P,d},autocrop(d,m={}){const{tolerance:g=2e-4,cropOnlyFrames:w=!0,cropSymmetric:I=!1,leaveBorder:P=0,ignoreSides:F}=typeof m=="number"?{tolerance:m}:AutocropComplexOptionsSchema.parse(m),$=d.bitmap.width,D=d.bitmap.height,U={north:!1,south:!1,east:!1,west:!1,...F};let j=d.getPixelColor(0,0);const Z=intToRGBA$1(j);let G=0,H=0,q=0,W=0;if(j=d.getPixelColor(0,0),!U.north)t:for(let V=0;V<D-1;V++){for(let tt=0;tt<$;tt++)if(colorDiff(Z,intToRGBA$1(d.getPixelColor(tt,V)))>g)break t;G++}if(j=d.getPixelColor($,0),!U.west)t:for(let V=0;V<$-1;V++){for(let tt=0+G;tt<D;tt++)if(colorDiff(Z,intToRGBA$1(d.getPixelColor(V,tt)))>g)break t;W++}if(j=d.getPixelColor(0,D),!U.south)t:for(let V=D-1;V>=G+1;V--){for(let tt=$-H-1;tt>=0;tt--)if(colorDiff(Z,intToRGBA$1(d.getPixelColor(tt,V)))>g)break t;q++}if(j=d.getPixelColor($,D),!U.east)t:for(let V=$-1;V>=0+W+1;V--){for(let tt=D-1;tt>=0+G;tt--)if(colorDiff(Z,intToRGBA$1(d.getPixelColor(V,tt)))>g)break t;H++}let Q=!1;if(W-=P,H-=P,G-=P,q-=P,I){const V=Math.min(H,W),tt=Math.min(G,q);W=V,H=V,G=tt,q=tt}W=W>=0?W:0,H=H>=0?H:0,G=G>=0?G:0,q=q>=0?q:0;const J=$-(W+H),K=D-(q+G);return Q=w?H!==0&&G!==0&&W!==0&&q!==0:H!==0||G!==0||W!==0||q!==0,Q&&this.crop(d,{x:W,y:G,w:J,h:K}),d}},CoverOptionsSchema=z.object({w:z.number(),h:z.number(),align:z.number().optional(),mode:z.nativeEnum(ResizeStrategy).optional()}),methods$a={cover(d,m){const{w:g,h:w,align:I=HorizontalAlign.CENTER|VerticalAlign.MIDDLE,mode:P}=CoverOptionsSchema.parse(m),F=7&I,$=I>>3;if((F===0||F&F-1)&&($===0||$&$-1))throw new Error("only use one flag per alignment direction");const D=F>>1,U=$>>1,j=g/w>d.bitmap.width/d.bitmap.height?g/d.bitmap.width:w/d.bitmap.height;return d=methods$d.scale(d,{f:j,mode:P}),d=methods$b.crop(d,{x:(d.bitmap.width-g)/2*D,y:(d.bitmap.height-w)/2*U,w:g,h:w})}},DisplaceOptionsSchema=z.object({map:JimpClassSchema,offset:z.number()}),methods$9={displace(d,m){const{map:g,offset:w}=DisplaceOptionsSchema.parse(m),I=clone(d);return d.scan((P,F,$)=>{let D=g.bitmap.data[$]/256*w;D=Math.round(D);const U=d.getPixelIndex(P+D,F);d.bitmap.data[U]=I.bitmap.data[$],d.bitmap.data[U+1]=I.bitmap.data[$+1],d.bitmap.data[U+2]=I.bitmap.data[$+2]}),d}},methods$8={dither(d){const m=[1,9,3,11,13,5,15,7,4,12,2,10,16,8,14,6];return d.scan((g,w,I)=>{const P=m[((3&w)<<2)+g%4];d.bitmap.data[I]=Math.min(d.bitmap.data[I]+P,255),d.bitmap.data[I+1]=Math.min(d.bitmap.data[I+1]+P,255),d.bitmap.data[I+2]=Math.min(d.bitmap.data[I+2]+P,255)}),d}},FisheyeOptionsSchema=z.object({radius:z.number().min(0).optional()}),methods$7={fisheye(d,m={}){const{radius:g=2.5}=FisheyeOptionsSchema.parse(m),w=clone(d),{width:I,height:P}=w.bitmap;return w.scan((F,$)=>{const D=F/I,U=$/P,j=Math.sqrt(Math.pow(D-.5,2)+Math.pow(U-.5,2)),Z=2*Math.pow(j,g),G=(D-.5)/j,H=(U-.5)/j,q=Math.round((Z*G+.5)*I),W=Math.round((Z*H+.5)*P),Q=w.getPixelColor(q,W);d.setPixelColor(Q,F,$)}),d.setPixelColor(w.getPixelColor(I/2,P/2),I/2,P/2),d}},FlipOptionsSchema=z.object({horizontal:z.boolean().optional(),vertical:z.boolean().optional()}),methods$6={flip(d,m){const{horizontal:g,vertical:w}=FlipOptionsSchema.parse(m),I=Buffer$1.alloc(d.bitmap.data.length);return d.scan((P,F,$)=>{const D=g?d.bitmap.width-1-P:P,U=w?d.bitmap.height-1-F:F,j=d.bitmap.width*U+D<<2,Z=d.bitmap.data.readUInt32BE($);I.writeUInt32BE(Z,j)}),d.bitmap.data=Buffer$1.from(I),d}};function Converter$1(d,m){if(!(d&&m&&d.length&&m.length))throw new Error("Bad alphabet");this.srcAlphabet=d,this.dstAlphabet=m}Converter$1.prototype.convert=function(d){var m,g,w,I={},P=this.srcAlphabet.length,F=this.dstAlphabet.length,$=d.length,D=typeof d=="string"?"":[];if(!this.isValid(d))throw new Error('Number "'+d+'" contains of non-alphabetic digits ('+this.srcAlphabet+")");if(this.srcAlphabet===this.dstAlphabet)return d;for(m=0;m<$;m++)I[m]=this.srcAlphabet.indexOf(d[m]);do{for(g=0,w=0,m=0;m<$;m++)(g=g*P+I[m])>=F?(I[w++]=parseInt(g/F,10),g%=F):w>0&&(I[w++]=0);$=w,D=this.dstAlphabet.slice(g,g+1).concat(D)}while(w!==0);return D},Converter$1.prototype.isValid=function(d){for(var m=0;m<d.length;++m)if(this.srcAlphabet.indexOf(d[m])===-1)return!1;return!0};var converter=Converter$1,Converter=converter;function anyBase(d,m){var g=new Converter(d,m);return function(w){return g.convert(w)}}anyBase.BIN="01",anyBase.OCT="01234567",anyBase.DEC="0123456789",anyBase.HEX="0123456789abcdef";var anyBase_1=anyBase,anyBase$1=getDefaultExportFromCjs(anyBase_1),__defProp$1=Object.defineProperty,__defNormalProp$1=(d,m,g)=>m in d?__defProp$1(d,m,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[m]=g,__publicField$1=(d,m,g)=>__defNormalProp$1(d,typeof m!="symbol"?m+"":m,g);class ImagePHash{constructor(m,g){__publicField$1(this,"size"),__publicField$1(this,"smallerSize"),this.size=m||32,this.smallerSize=g||8,initCoefficients(this.size)}distance(m,g){let w=0;for(let I=0;I<m.length;I++)m[I]!==g[I]&&w++;return w/m.length}getHash(m){m=methods$d.resize(clone(m),{w:this.size,h:this.size}),m=methods$e.greyscale(m);const g=[];for(let $=0;$<m.bitmap.width;$++){const D=[];for(let U=0;U<m.bitmap.height;U++)D[U]=intToRGBA(m.getPixelColor($,U)).b;g[$]=D}const w=applyDCT(g,this.size);let I=0;for(let $=0;$<this.smallerSize;$++)for(let D=0;D<this.smallerSize;D++)I+=w[$][D];const P=I/(this.smallerSize*this.smallerSize);let F="";for(let $=0;$<this.smallerSize;$++)for(let D=0;D<this.smallerSize;D++)F+=w[$][D]>P?"1":"0";return F}}function intToRGBA(d){const m=255&d,g=255&(d>>>=8),w=255&(d>>>=8);return{r:255&(d>>>=8),g:w,b:g,a:m}}const c$1=[];function initCoefficients(d){for(let m=1;m<d;m++)c$1[m]=1;c$1[0]=1/Math.sqrt(2)}function applyDCT(d,m){const g=m,w=[];for(let I=0;I<g;I++){const P=[];for(let F=0;F<g;F++){let $=0;for(let D=0;D<g;D++)for(let U=0;U<g;U++)$+=Math.cos((2*D+1)/(2*g)*I*Math.PI)*Math.cos((2*U+1)/(2*g)*F*Math.PI)*d[D][U];$*=c$1[I]*c$1[F]/4,P[F]=$,w[I]=P}}return w}const alphabet="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",maxHashLength=[NaN,NaN];for(let d=2;d<65;d++){const m=anyBase$1(anyBase$1.BIN,alphabet.slice(0,d))(new Array(65).join("1"));maxHashLength.push(m.length)}const methods$5={pHash:d=>new ImagePHash().getHash(d),hash(d,m=64){if(m<2||m>64)throw new Error("base must be a number between 2 and 64");const g=alphabet.slice(0,m),w=this.pHash(d),I=maxHashLength[m];return anyBase$1(anyBase$1.BIN,g)(w).padStart(I,"0")},distanceFromHash(d,m){const g=new ImagePHash,w=g.getHash(d);return g.distance(w,m)}},MaskOptionsObjectSchema=z.object({src:JimpClassSchema,x:z.number().optional(),y:z.number().optional()}),MaskOptionsSchema=z.union([JimpClassSchema,MaskOptionsObjectSchema]),methods$4={mask(d,m){let g,w,I;MaskOptionsSchema.parse(m),"bitmap"in m?(g=m,w=0,I=0):(g=m.src,w=m.x??0,I=m.y??0),w=Math.round(w),I=Math.round(I);const P=d.bitmap.width,F=d.bitmap.height;return g.scan(function($,D,U){const j=w+$,Z=I+D;if(j>=0&&Z>=0&&j<P&&Z<F){const G=d.getPixelIndex(j,Z),{data:H}=g.bitmap,q=(H[U+0]+H[U+1]+H[U+2])/3;d.bitmap.data[G+3]*=q/255}}),d}};function measureText(d,m){let g=0;for(let w=0;w<m.length;w++){const I=m[w],P=d.chars[I];if(P){const F=d.kernings[I],$=m[w+1],D=F&&$&&F[$]&&F[$]||0;g+=(P.xadvance||0)+D}}return g}function splitLines(d,m,g){const w=m.replace(/[\r\n]+/g,` 
`).split(" "),I=[];let P=[],F=0;return w.forEach($=>{if(measureText(d,$+(w.length>1?" ":""))>g){const j=$[Symbol.iterator]();let Z="";for(const G of j){const H=[...P,Z+G].join(" "),q=measureText(d,H);q<g?Z+=G:q>g?(I.push([...P,Z]),P=[],Z=G):(I.push([...P,Z+G]),P=[],Z="")}return}const D=[...P,$].join(" "),U=measureText(d,D);U<=g&&!$.includes(`
`)?(U>F&&(F=U),P.push($)):(I.push(P),P=[$.replace(`
`,"")])}),I.push(P),{lines:I,longestLine:F}}function measureTextHeight(d,m,g){const{lines:w}=splitLines(d,m,g);return w.length*d.common.lineHeight}const PrintOptionsSchema=z.object({x:z.number(),y:z.number(),text:z.union([z.union([z.string(),z.number()]),z.object({text:z.union([z.string(),z.number()]),alignmentX:z.nativeEnum(HorizontalAlign).optional(),alignmentY:z.nativeEnum(VerticalAlign).optional()})]),maxWidth:z.number().optional(),maxHeight:z.number().optional(),cb:z.function(z.tuple([z.object({x:z.number(),y:z.number()})])).optional()});function xOffsetBasedOnAlignment(d,m,g,w){return w===HorizontalAlign.LEFT?0:w===HorizontalAlign.CENTER?(g-measureText(d,m))/2:g-measureText(d,m)}function drawCharacter(d,m,g,w,I){if(I.width>0&&I.height>0){const P=m.pages[I.page];P&&(d=methods$h.blit(d,{src:P,x:g+I.xoffset,y:w+I.yoffset,srcX:I.x,srcY:I.y,srcW:I.width,srcH:I.height}))}return d}function printText(d,m,g,w,I,P){for(let F=0;F<I.length;F++){const $=I[F];let D;D=m.chars[$]?$:/\s/.test($)?"":"?";const U=m.chars[D]||{xadvance:void 0},j=m.kernings[D];drawCharacter(d,m,g,w,U);const Z=I[F+1];g+=(j&&Z&&j[Z]&&j[Z]||0)+(U.xadvance||P)}}const methods$3={print(d,{font:m,...g}){var q;let w,I,{x:P,y:F,text:$,maxWidth:D=1/0,maxHeight:U=1/0,cb:j=()=>{}}=PrintOptionsSchema.parse(g);typeof $=="object"&&$.text!==null&&$.text!==void 0?(w=$.alignmentX||HorizontalAlign.LEFT,I=$.alignmentY||VerticalAlign.TOP,{text:$}=$):(w=HorizontalAlign.LEFT,I=VerticalAlign.TOP,$=$.toString()),typeof $=="number"&&($=$.toString()),U!==1/0&&I===VerticalAlign.BOTTOM?F+=U-measureTextHeight(m,$,D):U!==1/0&&I===VerticalAlign.MIDDLE&&(F+=U/2-measureTextHeight(m,$,D)/2);const Z=(q=Object.entries(m.chars).find(W=>W[1].xadvance))==null?void 0:q[1].xadvance;if(typeof Z!="number")throw new Error("Could not find default character width");const{lines:G,longestLine:H}=splitLines(m,$,D);return G.forEach(W=>{const Q=W.join(" "),J=xOffsetBasedOnAlignment(m,Q,D,w);printText(d,m,P+J,F,Q,Z),F+=m.common.lineHeight}),j.bind(d)({x:P+H,y:F}),d}},RotateOptionsSchema=z.union([z.number(),z.object({deg:z.number(),mode:z.union([z.boolean(),z.nativeEnum(ResizeStrategy)]).optional()})]);function createIdxTranslationFunction(d){return function(m,g){return g*d+m<<2}}function matrixRotate(d,m){if(Math.abs(m)%90!=0)throw new Error("Unsupported matrix rotation degree");const g=d.bitmap.width,w=d.bitmap.height;let I;switch(m){case 90:case-270:I=90;break;case 180:case-180:I=180;break;case 270:case-90:I=-90;break;default:throw new Error("Unsupported matrix rotation degree")}const P=I===180?g:w,F=I===180?w:g,$=Buffer$1.alloc(d.bitmap.data.length),D=createIdxTranslationFunction(g),U=createIdxTranslationFunction(P);for(let j=0;j<g;j++)for(let Z=0;Z<w;Z++){const G=D(j,Z),H=d.bitmap.data.readUInt32BE(G);let q;switch(I){case 90:q=U(Z,g-j-1);break;case-90:q=U(w-Z-1,j);break;case 180:q=U(g-j-1,w-Z-1);break;default:throw new Error("Unsupported matrix rotation angle")}$.writeUInt32BE(H,q)}d.bitmap.data=$,d.bitmap.width=P,d.bitmap.height=F}function createTranslationFunction(d,m){return function(g,w){return{x:g+d,y:w+m}}}function advancedRotate(d,m,g){const w=m*Math.PI/180,I=Math.cos(w),P=Math.sin(w);let F=d.bitmap.width,$=d.bitmap.height;if(g===!0||typeof g=="string"){F=Math.ceil(Math.abs(d.bitmap.width*I)+Math.abs(d.bitmap.height*P))+1,$=Math.ceil(Math.abs(d.bitmap.width*P)+Math.abs(d.bitmap.height*I))+1,F%2!=0&&F++,$%2!=0&&$++;const H=clone(d);d.scan((W,Q,J)=>{d.bitmap.data.writeUInt32BE(d.background,J)});const q=Math.max(F,$,d.bitmap.width,d.bitmap.height);d=composite(d=methods$d.resize(d,{h:q,w:q,mode:g===!0?void 0:g}),H,d.bitmap.width/2-H.bitmap.width/2,d.bitmap.height/2-H.bitmap.height/2)}const D=d.bitmap.width,U=d.bitmap.height,j=Buffer$1.alloc(d.bitmap.data.length),Z=createTranslationFunction(-D/2,-U/2),G=createTranslationFunction(D/2+.5,U/2+.5);for(let H=1;H<=U;H++)for(let q=1;q<=D;q++){const W=Z(q,H),Q=G(I*W.x-P*W.y,I*W.y+P*W.x),J=D*(H-1)+q-1<<2;if(Q.x>=0&&Q.x<D&&Q.y>=0&&Q.y<U){const K=D*(0|Q.y)+Q.x<<2,V=d.bitmap.data.readUInt32BE(K);j.writeUInt32BE(V,J)}else j.writeUInt32BE(d.background,J)}if(d.bitmap.data=j,g===!0||typeof g=="string"){const H=Math.max(D/2-F/2,0),q=Math.max(U/2-$/2,0);d=methods$b.crop(d,{x:H,y:q,w:F,h:$})}}const methods$2={rotate(d,m){const g=RotateOptionsSchema.parse(m),w=typeof g=="number"?{deg:g}:g,{mode:I=!0}=w;let{deg:P}=w;return P%=360,P%360==0||(P%90==0&&(I||d.bitmap.width===d.bitmap.height||P%180==0)?matrixRotate(d,P):advancedRotate(d,P,I)),d}},ThresholdOptionsSchema=z.object({max:z.number().min(0).max(255),replace:z.number().min(0).max(255).optional(),autoGreyscale:z.boolean().optional()}),methods$1={threshold(d,m){let{max:g,replace:w=255,autoGreyscale:I=!0}=ThresholdOptionsSchema.parse(m);return g=limit255(g),w=limit255(w),I&&methods$e.greyscale(d),d.scan((P,F,$)=>{const D=d.bitmap.data[$]<g?d.bitmap.data[$]:w;d.bitmap.data[$]=D,d.bitmap.data[$+1]=D,d.bitmap.data[$+2]=D}),d}};var __defProp=Object.defineProperty,__defNormalProp=(d,m,g)=>m in d?__defProp(d,m,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[m]=g,__export=(d,m)=>{for(var g in m)__defProp(d,g,{get:m[g],enumerable:!0})},__publicField=(d,m,g)=>(__defNormalProp(d,typeof m!="symbol"?m+"":m,g),g),constants_exports={};__export(constants_exports,{bt709:()=>bt709_exports});var bt709_exports={};__export(bt709_exports,{Y:()=>Y,x:()=>x$1,y:()=>y$1});var Y=(d=>(d[d.RED=.2126]="RED",d[d.GREEN=.7152]="GREEN",d[d.BLUE=.0722]="BLUE",d[d.WHITE=1]="WHITE",d))(Y||{}),x$1=(d=>(d[d.RED=.64]="RED",d[d.GREEN=.3]="GREEN",d[d.BLUE=.15]="BLUE",d[d.WHITE=.3127]="WHITE",d))(x$1||{}),y$1=(d=>(d[d.RED=.33]="RED",d[d.GREEN=.6]="GREEN",d[d.BLUE=.06]="BLUE",d[d.WHITE=.329]="WHITE",d))(y$1||{}),conversion_exports={};function correctGamma(d){return d>.04045?((d+.055)/1.055)**2.4:d/12.92}function rgb2xyz(d,m,g){return{x:.4124*(d=correctGamma(d/255))+.3576*(m=correctGamma(m/255))+.1805*(g=correctGamma(g/255)),y:.2126*d+.7152*m+.0722*g,z:.0193*d+.1192*m+.9505*g}}__export(conversion_exports,{lab2rgb:()=>lab2rgb,lab2xyz:()=>lab2xyz,rgb2hsl:()=>rgb2hsl,rgb2lab:()=>rgb2lab,rgb2xyz:()=>rgb2xyz,xyz2lab:()=>xyz2lab,xyz2rgb:()=>xyz2rgb});var arithmetic_exports={};function degrees2radians(d){return d*(Math.PI/180)}function max3(d,m,g){let w=d;return w<m&&(w=m),w<g&&(w=g),w}function min3(d,m,g){let w=d;return w>m&&(w=m),w>g&&(w=g),w}function intInRange(d,m,g){return d>g&&(d=g),d<m&&(d=m),0|d}function inRange0to255Rounded(d){return(d=Math.round(d))>255?d=255:d<0&&(d=0),d}function inRange0to255(d){return d>255?d=255:d<0&&(d=0),d}function stableSort(d,m){const g=typeof d[0];let w;if(g==="number"||g==="string"){const I=Object.create(null);for(let P=0,F=d.length;P<F;P++){const $=d[P];I[$]||I[$]===0||(I[$]=P)}w=d.sort((P,F)=>m(P,F)||I[P]-I[F])}else{const I=d.slice(0);w=d.sort((P,F)=>m(P,F)||I.indexOf(P)-I.indexOf(F))}return w}function rgb2hsl(d,m,g){const w=min3(d,m,g),I=max3(d,m,g),P=I-w,F=(w+I)/510;let $=0;F>0&&F<1&&($=P/(F<.5?I+w:510-I-w));let D=0;return P>0&&(D=I===d?(m-g)/P:I===m?2+(g-d)/P:4+(d-m)/P,D*=60,D<0&&(D+=360)),{h:D,s:$,l:F}}__export(arithmetic_exports,{degrees2radians:()=>degrees2radians,inRange0to255:()=>inRange0to255,inRange0to255Rounded:()=>inRange0to255Rounded,intInRange:()=>intInRange,max3:()=>max3,min3:()=>min3,stableSort:()=>stableSort});var refX=.95047,refY=1,refZ=1.08883;function pivot(d){return d>.008856?d**(1/3):7.787*d+16/116}function xyz2lab(d,m,g){if(d=pivot(d/refX),m=pivot(m/refY),g=pivot(g/refZ),116*m-16<0)throw new Error("xxx");return{L:Math.max(0,116*m-16),a:500*(d-m),b:200*(m-g)}}function rgb2lab(d,m,g){const w=rgb2xyz(d,m,g);return xyz2lab(w.x,w.y,w.z)}var refX2=.95047,refY2=1,refZ2=1.08883;function pivot2(d){return d>.206893034?d**3:(d-16/116)/7.787}function lab2xyz(d,m,g){const w=(d+16)/116,I=w-g/200;return{x:refX2*pivot2(m/500+w),y:refY2*pivot2(w),z:refZ2*pivot2(I)}}function correctGamma2(d){return d>.0031308?1.055*d**(1/2.4)-.055:12.92*d}function xyz2rgb(d,m,g){const w=correctGamma2(3.2406*d+-1.5372*m+-.4986*g),I=correctGamma2(-.9689*d+1.8758*m+.0415*g),P=correctGamma2(.0557*d+-.204*m+1.057*g);return{r:inRange0to255Rounded(255*w),g:inRange0to255Rounded(255*I),b:inRange0to255Rounded(255*P)}}function lab2rgb(d,m,g){const w=lab2xyz(d,m,g);return xyz2rgb(w.x,w.y,w.z)}var distance_exports={};__export(distance_exports,{AbstractDistanceCalculator:()=>AbstractDistanceCalculator,AbstractEuclidean:()=>AbstractEuclidean,AbstractManhattan:()=>AbstractManhattan,CIE94GraphicArts:()=>CIE94GraphicArts,CIE94Textiles:()=>CIE94Textiles,CIEDE2000:()=>CIEDE2000,CMetric:()=>CMetric,Euclidean:()=>Euclidean,EuclideanBT709:()=>EuclideanBT709,EuclideanBT709NoAlpha:()=>EuclideanBT709NoAlpha,Manhattan:()=>Manhattan,ManhattanBT709:()=>ManhattanBT709,ManhattanNommyde:()=>ManhattanNommyde,PNGQuant:()=>PNGQuant});var AbstractDistanceCalculator=class{constructor(){__publicField(this,"_maxDistance"),__publicField(this,"_whitePoint"),this._setDefaults(),this.setWhitePoint(255,255,255,255)}setWhitePoint(d,m,g,w){this._whitePoint={r:d>0?255/d:0,g:m>0?255/m:0,b:g>0?255/g:0,a:w>0?255/w:0},this._maxDistance=this.calculateRaw(d,m,g,w,0,0,0,0)}calculateNormalized(d,m){return this.calculateRaw(d.r,d.g,d.b,d.a,m.r,m.g,m.b,m.a)/this._maxDistance}},AbstractCIE94=class extends AbstractDistanceCalculator{calculateRaw(d,m,g,w,I,P,F,$){const D=rgb2lab(inRange0to255(d*this._whitePoint.r),inRange0to255(m*this._whitePoint.g),inRange0to255(g*this._whitePoint.b)),U=rgb2lab(inRange0to255(I*this._whitePoint.r),inRange0to255(P*this._whitePoint.g),inRange0to255(F*this._whitePoint.b)),j=D.L-U.L,Z=D.a-U.a,G=D.b-U.b,H=Math.sqrt(D.a*D.a+D.b*D.b),q=H-Math.sqrt(U.a*U.a+U.b*U.b);let W=Z*Z+G*G-q*q;W=W<0?0:Math.sqrt(W);const Q=($-w)*this._whitePoint.a*this._kA;return Math.sqrt((j/this._Kl)**2+(q/(1+this._K1*H))**2+(W/(1+this._K2*H))**2+Q**2)}},CIE94Textiles=class extends AbstractCIE94{_setDefaults(){this._Kl=2,this._K1=.048,this._K2=.014,this._kA=12.5/255}},CIE94GraphicArts=class extends AbstractCIE94{_setDefaults(){this._Kl=1,this._K1=.045,this._K2=.015,this._kA=25/255}},_CIEDE2000=class extends AbstractDistanceCalculator{_setDefaults(){}static _calculatehp(d,m){const g=Math.atan2(d,m);return g>=0?g:g+_CIEDE2000._deg360InRad}static _calculateRT(d,m){const g=m**7,w=2*Math.sqrt(g/(g+_CIEDE2000._pow25to7)),I=_CIEDE2000._deg30InRad*Math.exp(-(((d-_CIEDE2000._deg275InRad)/_CIEDE2000._deg25InRad)**2));return-Math.sin(2*I)*w}static _calculateT(d){return 1-.17*Math.cos(d-_CIEDE2000._deg30InRad)+.24*Math.cos(2*d)+.32*Math.cos(3*d+_CIEDE2000._deg6InRad)-.2*Math.cos(4*d-_CIEDE2000._deg63InRad)}static _calculate_ahp(d,m,g,w){const I=g+w;return d===0?I:m<=_CIEDE2000._deg180InRad?I/2:I<_CIEDE2000._deg360InRad?(I+_CIEDE2000._deg360InRad)/2:(I-_CIEDE2000._deg360InRad)/2}static _calculate_dHp(d,m,g,w){let I;return I=d===0?0:m<=_CIEDE2000._deg180InRad?g-w:g<=w?g-w+_CIEDE2000._deg360InRad:g-w-_CIEDE2000._deg360InRad,2*Math.sqrt(d)*Math.sin(I/2)}calculateRaw(d,m,g,w,I,P,F,$){const D=rgb2lab(inRange0to255(d*this._whitePoint.r),inRange0to255(m*this._whitePoint.g),inRange0to255(g*this._whitePoint.b)),U=rgb2lab(inRange0to255(I*this._whitePoint.r),inRange0to255(P*this._whitePoint.g),inRange0to255(F*this._whitePoint.b)),j=($-w)*this._whitePoint.a*_CIEDE2000._kA,Z=this.calculateRawInLab(D,U);return Math.sqrt(Z+j*j)}calculateRawInLab(d,m){const g=d.L,w=d.a,I=d.b,P=m.L,F=m.a,$=m.b,D=((Math.sqrt(w*w+I*I)+Math.sqrt(F*F+$*$))/2)**7,U=.5*(1-Math.sqrt(D/(D+_CIEDE2000._pow25to7))),j=(1+U)*w,Z=(1+U)*F,G=Math.sqrt(j*j+I*I),H=Math.sqrt(Z*Z+$*$),q=G*H,W=_CIEDE2000._calculatehp(I,j),Q=_CIEDE2000._calculatehp($,Z),J=Math.abs(W-Q),K=P-g,V=H-G,tt=_CIEDE2000._calculate_dHp(q,J,Q,W),X=_CIEDE2000._calculate_ahp(q,J,W,Q),ot=(G+H)/2,it=((g+P)/2-50)**2,lt=V/(1+.045*ot),at=tt/(1+.015*_CIEDE2000._calculateT(X)*ot);return(K/(1+.015*it/Math.sqrt(20+it)))**2+lt**2+at**2+_CIEDE2000._calculateRT(X,ot)*lt*at}},CIEDE2000=_CIEDE2000;__publicField(CIEDE2000,"_kA",25/255),__publicField(CIEDE2000,"_pow25to7",25**7),__publicField(CIEDE2000,"_deg360InRad",degrees2radians(360)),__publicField(CIEDE2000,"_deg180InRad",degrees2radians(180)),__publicField(CIEDE2000,"_deg30InRad",degrees2radians(30)),__publicField(CIEDE2000,"_deg6InRad",degrees2radians(6)),__publicField(CIEDE2000,"_deg63InRad",degrees2radians(63)),__publicField(CIEDE2000,"_deg275InRad",degrees2radians(275)),__publicField(CIEDE2000,"_deg25InRad",degrees2radians(25));var CMetric=class extends AbstractDistanceCalculator{calculateRaw(d,m,g,w,I,P,F,$){const D=(d+I)/2*this._whitePoint.r,U=(d-I)*this._whitePoint.r,j=(m-P)*this._whitePoint.g,Z=(g-F)*this._whitePoint.b,G=((512+D)*U*U>>8)+4*j*j+((767-D)*Z*Z>>8),H=($-w)*this._whitePoint.a;return Math.sqrt(G+H*H)}_setDefaults(){}},AbstractEuclidean=class extends AbstractDistanceCalculator{calculateRaw(d,m,g,w,I,P,F,$){const D=I-d,U=P-m,j=F-g,Z=$-w;return Math.sqrt(this._kR*D*D+this._kG*U*U+this._kB*j*j+this._kA*Z*Z)}},Euclidean=class extends AbstractEuclidean{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},EuclideanBT709=class extends AbstractEuclidean{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},EuclideanBT709NoAlpha=class extends AbstractEuclidean{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=0}},AbstractManhattan=class extends AbstractDistanceCalculator{calculateRaw(d,m,g,w,I,P,F,$){let D=I-d,U=P-m,j=F-g,Z=$-w;return D<0&&(D=0-D),U<0&&(U=0-U),j<0&&(j=0-j),Z<0&&(Z=0-Z),this._kR*D+this._kG*U+this._kB*j+this._kA*Z}},Manhattan=class extends AbstractManhattan{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},ManhattanNommyde=class extends AbstractManhattan{_setDefaults(){this._kR=.4984,this._kG=.8625,this._kB=.2979,this._kA=1}},ManhattanBT709=class extends AbstractManhattan{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},PNGQuant=class extends AbstractDistanceCalculator{calculateRaw(d,m,g,w,I,P,F,$){const D=($-w)*this._whitePoint.a;return this._colordifferenceCh(d*this._whitePoint.r,I*this._whitePoint.r,D)+this._colordifferenceCh(m*this._whitePoint.g,P*this._whitePoint.g,D)+this._colordifferenceCh(g*this._whitePoint.b,F*this._whitePoint.b,D)}_colordifferenceCh(d,m,g){const w=d-m,I=w+g;return w*w+I*I}_setDefaults(){}},palette_exports={};__export(palette_exports,{AbstractPaletteQuantizer:()=>AbstractPaletteQuantizer,ColorHistogram:()=>ColorHistogram,NeuQuant:()=>NeuQuant,NeuQuantFloat:()=>NeuQuantFloat,RGBQuant:()=>RGBQuant,WuColorCube:()=>WuColorCube,WuQuant:()=>WuQuant});var AbstractPaletteQuantizer=class{quantizeSync(){for(const d of this.quantize())if(d.palette)return d.palette;throw new Error("unreachable")}},Point=class{constructor(){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),__publicField(this,"uint32"),__publicField(this,"rgba"),this.uint32=-1>>>0,this.r=this.g=this.b=this.a=0,this.rgba=new Array(4),this.rgba[0]=0,this.rgba[1]=0,this.rgba[2]=0,this.rgba[3]=0}static createByQuadruplet(d){const m=new Point;return m.r=0|d[0],m.g=0|d[1],m.b=0|d[2],m.a=0|d[3],m._loadUINT32(),m._loadQuadruplet(),m}static createByRGBA(d,m,g,w){const I=new Point;return I.r=0|d,I.g=0|m,I.b=0|g,I.a=0|w,I._loadUINT32(),I._loadQuadruplet(),I}static createByUint32(d){const m=new Point;return m.uint32=d>>>0,m._loadRGBA(),m._loadQuadruplet(),m}from(d){this.r=d.r,this.g=d.g,this.b=d.b,this.a=d.a,this.uint32=d.uint32,this.rgba[0]=d.r,this.rgba[1]=d.g,this.rgba[2]=d.b,this.rgba[3]=d.a}getLuminosity(d){let m=this.r,g=this.g,w=this.b;return d&&(m=Math.min(255,255-this.a+this.a*m/255),g=Math.min(255,255-this.a+this.a*g/255),w=Math.min(255,255-this.a+this.a*w/255)),.2126*m+.7152*g+.0722*w}_loadUINT32(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0}_loadRGBA(){this.r=255&this.uint32,this.g=this.uint32>>>8&255,this.b=this.uint32>>>16&255,this.a=this.uint32>>>24&255}_loadQuadruplet(){this.rgba[0]=this.r,this.rgba[1]=this.g,this.rgba[2]=this.b,this.rgba[3]=this.a}},PointContainer=class{constructor(){__publicField(this,"_pointArray"),__publicField(this,"_width"),__publicField(this,"_height"),this._width=0,this._height=0,this._pointArray=[]}getWidth(){return this._width}getHeight(){return this._height}setWidth(d){this._width=d}setHeight(d){this._height=d}getPointArray(){return this._pointArray}clone(){const d=new PointContainer;d._width=this._width,d._height=this._height;for(let m=0,g=this._pointArray.length;m<g;m++)d._pointArray[m]=Point.createByUint32(0|this._pointArray[m].uint32);return d}toUint32Array(){const d=this._pointArray.length,m=new Uint32Array(d);for(let g=0;g<d;g++)m[g]=this._pointArray[g].uint32;return m}toUint8Array(){return new Uint8Array(this.toUint32Array().buffer)}static fromHTMLImageElement(d){const m=d.naturalWidth,g=d.naturalHeight,w=document.createElement("canvas");return w.width=m,w.height=g,w.getContext("2d").drawImage(d,0,0,m,g,0,0,m,g),PointContainer.fromHTMLCanvasElement(w)}static fromHTMLCanvasElement(d){const m=d.width,g=d.height,w=d.getContext("2d").getImageData(0,0,m,g);return PointContainer.fromImageData(w)}static fromImageData(d){const m=d.width,g=d.height;return PointContainer.fromUint8Array(d.data,m,g)}static fromUint8Array(d,m,g){switch(Object.prototype.toString.call(d)){case"[object Uint8ClampedArray]":case"[object Uint8Array]":break;default:d=new Uint8Array(d)}const w=new Uint32Array(d.buffer);return PointContainer.fromUint32Array(w,m,g)}static fromUint32Array(d,m,g){const w=new PointContainer;w._width=m,w._height=g;for(let I=0,P=d.length;I<P;I++)w._pointArray[I]=Point.createByUint32(0|d[I]);return w}static fromBuffer(d,m,g){const w=new Uint32Array(d.buffer,d.byteOffset,d.byteLength/Uint32Array.BYTES_PER_ELEMENT);return PointContainer.fromUint32Array(w,m,g)}},hueGroups=10;function hueGroup(d,m){const g=360/m;for(let w=1,I=g-g/2;w<m;w++,I+=g)if(d>=I&&d<I+g)return w;return 0}var Palette=class{constructor(){__publicField(this,"_pointContainer"),__publicField(this,"_pointArray",[]),__publicField(this,"_i32idx",{}),this._pointContainer=new PointContainer,this._pointContainer.setHeight(1),this._pointArray=this._pointContainer.getPointArray()}add(d){this._pointArray.push(d),this._pointContainer.setWidth(this._pointArray.length)}has(d){for(let m=this._pointArray.length-1;m>=0;m--)if(d.uint32===this._pointArray[m].uint32)return!0;return!1}getNearestColor(d,m){return this._pointArray[0|this._getNearestIndex(d,m)]}getPointContainer(){return this._pointContainer}_nearestPointFromCache(d){return typeof this._i32idx[d]=="number"?this._i32idx[d]:-1}_getNearestIndex(d,m){let g=this._nearestPointFromCache(""+m.uint32);if(g>=0)return g;let w=Number.MAX_VALUE;g=0;for(let I=0,P=this._pointArray.length;I<P;I++){const F=this._pointArray[I],$=d.calculateRaw(m.r,m.g,m.b,m.a,F.r,F.g,F.b,F.a);$<w&&(w=$,g=I)}return this._i32idx[m.uint32]=g,g}sort(){this._i32idx={},this._pointArray.sort((d,m)=>{const g=rgb2hsl(d.r,d.g,d.b),w=rgb2hsl(m.r,m.g,m.b),I=d.r===d.g&&d.g===d.b?0:1+hueGroup(g.h,hueGroups),P=(m.r===m.g&&m.g===m.b?0:1+hueGroup(w.h,hueGroups))-I;if(P)return-P;const F=d.getLuminosity(!0),$=m.getLuminosity(!0);if($-F!=0)return $-F;const D=(100*w.s|0)-(100*g.s|0);return D?-D:0})}},utils_exports={};__export(utils_exports,{HueStatistics:()=>HueStatistics,Palette:()=>Palette,Point:()=>Point,PointContainer:()=>PointContainer,ProgressTracker:()=>ProgressTracker,arithmetic:()=>arithmetic_exports});var HueGroup=class{constructor(){__publicField(this,"num",0),__publicField(this,"cols",[])}},HueStatistics=class{constructor(d,m){__publicField(this,"_numGroups"),__publicField(this,"_minCols"),__publicField(this,"_stats"),__publicField(this,"_groupsFull"),this._numGroups=d,this._minCols=m,this._stats=[];for(let g=0;g<=d;g++)this._stats[g]=new HueGroup;this._groupsFull=0}check(d){this._groupsFull===this._numGroups+1&&(this.check=()=>{});const m=255&d,g=d>>>8&255,w=d>>>16&255,I=m===g&&g===w?0:1+hueGroup(rgb2hsl(m,g,w).h,this._numGroups),P=this._stats[I],F=this._minCols;P.num++,P.num>F||(P.num===F&&this._groupsFull++,P.num<=F&&this._stats[I].cols.push(d))}injectIntoDictionary(d){for(let m=0;m<=this._numGroups;m++)this._stats[m].num<=this._minCols&&this._stats[m].cols.forEach(g=>{d[g]?d[g]++:d[g]=1})}injectIntoArray(d){for(let m=0;m<=this._numGroups;m++)this._stats[m].num<=this._minCols&&this._stats[m].cols.forEach(g=>{d.indexOf(g)===-1&&d.push(g)})}},_ProgressTracker=class{constructor(d,m){__publicField(this,"progress"),__publicField(this,"_step"),__publicField(this,"_range"),__publicField(this,"_last"),__publicField(this,"_progressRange"),this._range=d,this._progressRange=m,this._step=Math.max(1,this._range/(_ProgressTracker.steps+1)|0),this._last=-this._step,this.progress=0}shouldNotify(d){return d-this._last>=this._step&&(this._last=d,this.progress=Math.min(this._progressRange*this._last/this._range,this._progressRange),!0)}},ProgressTracker=_ProgressTracker;__publicField(ProgressTracker,"steps",100);var networkBiasShift=3,Neuron=class{constructor(d){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),this.r=this.g=this.b=this.a=d}toPoint(){return Point.createByRGBA(this.r>>networkBiasShift,this.g>>networkBiasShift,this.b>>networkBiasShift,this.a>>networkBiasShift)}subtract(d,m,g,w){this.r-=0|d,this.g-=0|m,this.b-=0|g,this.a-=0|w}},_NeuQuant=class extends AbstractPaletteQuantizer{constructor(d,m=256){super(),__publicField(this,"_pointArray"),__publicField(this,"_networkSize"),__publicField(this,"_network"),__publicField(this,"_sampleFactor"),__publicField(this,"_radPower"),__publicField(this,"_freq"),__publicField(this,"_bias"),__publicField(this,"_distance"),this._distance=d,this._pointArray=[],this._sampleFactor=1,this._networkSize=m,this._distance.setWhitePoint(255<<networkBiasShift,255<<networkBiasShift,255<<networkBiasShift,255<<networkBiasShift)}sample(d){this._pointArray=this._pointArray.concat(d.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let d=0;d<this._networkSize;d++)this._network[d]=new Neuron((d<<networkBiasShift+8)/this._networkSize|0),this._freq[d]=_NeuQuant._initialBias/this._networkSize|0,this._bias[d]=0}*_learn(){let d=this._sampleFactor;const m=this._pointArray.length;m<_NeuQuant._minpicturebytes&&(d=1);const g=30+(d-1)/3|0,w=m/d|0;let I,P=w/_NeuQuant._nCycles|0,F=_NeuQuant._initAlpha,$=(this._networkSize>>3)*_NeuQuant._radiusBias,D=$>>_NeuQuant._radiusBiasShift;D<=1&&(D=0);for(let j=0;j<D;j++)this._radPower[j]=F*((D*D-j*j)*_NeuQuant._radBias/(D*D))>>>0;I=m<_NeuQuant._minpicturebytes?1:m%_NeuQuant._prime1!=0?_NeuQuant._prime1:m%_NeuQuant._prime2!=0?_NeuQuant._prime2:m%_NeuQuant._prime3!=0?_NeuQuant._prime3:_NeuQuant._prime4;const U=new ProgressTracker(w,99);for(let j=0,Z=0;j<w;){U.shouldNotify(j)&&(yield{progress:U.progress});const G=this._pointArray[Z],H=G.b<<networkBiasShift,q=G.g<<networkBiasShift,W=G.r<<networkBiasShift,Q=G.a<<networkBiasShift,J=this._contest(H,q,W,Q);if(this._alterSingle(F,J,H,q,W,Q),D!==0&&this._alterNeighbour(D,J,H,q,W,Q),Z+=I,Z>=m&&(Z-=m),j++,P===0&&(P=1),j%P==0){F-=F/g|0,$-=$/_NeuQuant._radiusDecrease|0,D=$>>_NeuQuant._radiusBiasShift,D<=1&&(D=0);for(let K=0;K<D;K++)this._radPower[K]=F*((D*D-K*K)*_NeuQuant._radBias/(D*D))>>>0}}}_buildPalette(){const d=new Palette;return this._network.forEach(m=>{d.add(m.toPoint())}),d.sort(),d}_alterNeighbour(d,m,g,w,I,P){let F=m-d;F<-1&&(F=-1);let $=m+d;$>this._networkSize&&($=this._networkSize);let D=m+1,U=m-1,j=1;for(;D<$||U>F;){const Z=this._radPower[j++]/_NeuQuant._alphaRadBias;if(D<$){const G=this._network[D++];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}if(U>F){const G=this._network[U--];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}}}_alterSingle(d,m,g,w,I,P){d/=_NeuQuant._initAlpha;const F=this._network[m];F.subtract(d*(F.r-I),d*(F.g-w),d*(F.b-g),d*(F.a-P))}_contest(d,m,g,w){const I=1020<<networkBiasShift;let P=2147483647,F=P,$=-1,D=$;for(let U=0;U<this._networkSize;U++){const j=this._network[U],Z=this._distance.calculateNormalized(j,{r:g,g:m,b:d,a:w})*I|0;Z<P&&(P=Z,$=U);const G=Z-(this._bias[U]>>_NeuQuant._initialBiasShift-networkBiasShift);G<F&&(F=G,D=U);const H=this._freq[U]>>_NeuQuant._betaShift;this._freq[U]-=H,this._bias[U]+=H<<_NeuQuant._gammaShift}return this._freq[$]+=_NeuQuant._beta,this._bias[$]-=_NeuQuant._betaGamma,D}},NeuQuant=_NeuQuant;__publicField(NeuQuant,"_prime1",499),__publicField(NeuQuant,"_prime2",491),__publicField(NeuQuant,"_prime3",487),__publicField(NeuQuant,"_prime4",503),__publicField(NeuQuant,"_minpicturebytes",_NeuQuant._prime4),__publicField(NeuQuant,"_nCycles",100),__publicField(NeuQuant,"_initialBiasShift",16),__publicField(NeuQuant,"_initialBias",1<<_NeuQuant._initialBiasShift),__publicField(NeuQuant,"_gammaShift",10),__publicField(NeuQuant,"_betaShift",10),__publicField(NeuQuant,"_beta",_NeuQuant._initialBias>>_NeuQuant._betaShift),__publicField(NeuQuant,"_betaGamma",_NeuQuant._initialBias<<_NeuQuant._gammaShift-_NeuQuant._betaShift),__publicField(NeuQuant,"_radiusBiasShift",6),__publicField(NeuQuant,"_radiusBias",1<<_NeuQuant._radiusBiasShift),__publicField(NeuQuant,"_radiusDecrease",30),__publicField(NeuQuant,"_alphaBiasShift",10),__publicField(NeuQuant,"_initAlpha",1<<_NeuQuant._alphaBiasShift),__publicField(NeuQuant,"_radBiasShift",8),__publicField(NeuQuant,"_radBias",1<<_NeuQuant._radBiasShift),__publicField(NeuQuant,"_alphaRadBiasShift",_NeuQuant._alphaBiasShift+_NeuQuant._radBiasShift),__publicField(NeuQuant,"_alphaRadBias",1<<_NeuQuant._alphaRadBiasShift);var networkBiasShift2=3,NeuronFloat=class{constructor(d){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),this.r=this.g=this.b=this.a=d}toPoint(){return Point.createByRGBA(this.r>>networkBiasShift2,this.g>>networkBiasShift2,this.b>>networkBiasShift2,this.a>>networkBiasShift2)}subtract(d,m,g,w){this.r-=d,this.g-=m,this.b-=g,this.a-=w}},_NeuQuantFloat=class extends AbstractPaletteQuantizer{constructor(d,m=256){super(),__publicField(this,"_pointArray"),__publicField(this,"_networkSize"),__publicField(this,"_network"),__publicField(this,"_sampleFactor"),__publicField(this,"_radPower"),__publicField(this,"_freq"),__publicField(this,"_bias"),__publicField(this,"_distance"),this._distance=d,this._pointArray=[],this._sampleFactor=1,this._networkSize=m,this._distance.setWhitePoint(255<<networkBiasShift2,255<<networkBiasShift2,255<<networkBiasShift2,255<<networkBiasShift2)}sample(d){this._pointArray=this._pointArray.concat(d.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let d=0;d<this._networkSize;d++)this._network[d]=new NeuronFloat((d<<networkBiasShift2+8)/this._networkSize),this._freq[d]=_NeuQuantFloat._initialBias/this._networkSize,this._bias[d]=0}*_learn(){let d=this._sampleFactor;const m=this._pointArray.length;m<_NeuQuantFloat._minpicturebytes&&(d=1);const g=30+(d-1)/3,w=m/d;let I,P=w/_NeuQuantFloat._nCycles|0,F=_NeuQuantFloat._initAlpha,$=(this._networkSize>>3)*_NeuQuantFloat._radiusBias,D=$>>_NeuQuantFloat._radiusBiasShift;D<=1&&(D=0);for(let j=0;j<D;j++)this._radPower[j]=F*((D*D-j*j)*_NeuQuantFloat._radBias/(D*D));I=m<_NeuQuantFloat._minpicturebytes?1:m%_NeuQuantFloat._prime1!=0?_NeuQuantFloat._prime1:m%_NeuQuantFloat._prime2!=0?_NeuQuantFloat._prime2:m%_NeuQuantFloat._prime3!=0?_NeuQuantFloat._prime3:_NeuQuantFloat._prime4;const U=new ProgressTracker(w,99);for(let j=0,Z=0;j<w;){U.shouldNotify(j)&&(yield{progress:U.progress});const G=this._pointArray[Z],H=G.b<<networkBiasShift2,q=G.g<<networkBiasShift2,W=G.r<<networkBiasShift2,Q=G.a<<networkBiasShift2,J=this._contest(H,q,W,Q);if(this._alterSingle(F,J,H,q,W,Q),D!==0&&this._alterNeighbour(D,J,H,q,W,Q),Z+=I,Z>=m&&(Z-=m),j++,P===0&&(P=1),j%P==0){F-=F/g,$-=$/_NeuQuantFloat._radiusDecrease,D=$>>_NeuQuantFloat._radiusBiasShift,D<=1&&(D=0);for(let K=0;K<D;K++)this._radPower[K]=F*((D*D-K*K)*_NeuQuantFloat._radBias/(D*D))}}}_buildPalette(){const d=new Palette;return this._network.forEach(m=>{d.add(m.toPoint())}),d.sort(),d}_alterNeighbour(d,m,g,w,I,P){let F=m-d;F<-1&&(F=-1);let $=m+d;$>this._networkSize&&($=this._networkSize);let D=m+1,U=m-1,j=1;for(;D<$||U>F;){const Z=this._radPower[j++]/_NeuQuantFloat._alphaRadBias;if(D<$){const G=this._network[D++];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}if(U>F){const G=this._network[U--];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}}}_alterSingle(d,m,g,w,I,P){d/=_NeuQuantFloat._initAlpha;const F=this._network[m];F.subtract(d*(F.r-I),d*(F.g-w),d*(F.b-g),d*(F.a-P))}_contest(d,m,g,w){const I=1020<<networkBiasShift2;let P=2147483647,F=P,$=-1,D=$;for(let U=0;U<this._networkSize;U++){const j=this._network[U],Z=this._distance.calculateNormalized(j,{r:g,g:m,b:d,a:w})*I;Z<P&&(P=Z,$=U);const G=Z-(this._bias[U]>>_NeuQuantFloat._initialBiasShift-networkBiasShift2);G<F&&(F=G,D=U);const H=this._freq[U]>>_NeuQuantFloat._betaShift;this._freq[U]-=H,this._bias[U]+=H<<_NeuQuantFloat._gammaShift}return this._freq[$]+=_NeuQuantFloat._beta,this._bias[$]-=_NeuQuantFloat._betaGamma,D}},NeuQuantFloat=_NeuQuantFloat;__publicField(NeuQuantFloat,"_prime1",499),__publicField(NeuQuantFloat,"_prime2",491),__publicField(NeuQuantFloat,"_prime3",487),__publicField(NeuQuantFloat,"_prime4",503),__publicField(NeuQuantFloat,"_minpicturebytes",_NeuQuantFloat._prime4),__publicField(NeuQuantFloat,"_nCycles",100),__publicField(NeuQuantFloat,"_initialBiasShift",16),__publicField(NeuQuantFloat,"_initialBias",1<<_NeuQuantFloat._initialBiasShift),__publicField(NeuQuantFloat,"_gammaShift",10),__publicField(NeuQuantFloat,"_betaShift",10),__publicField(NeuQuantFloat,"_beta",_NeuQuantFloat._initialBias>>_NeuQuantFloat._betaShift),__publicField(NeuQuantFloat,"_betaGamma",_NeuQuantFloat._initialBias<<_NeuQuantFloat._gammaShift-_NeuQuantFloat._betaShift),__publicField(NeuQuantFloat,"_radiusBiasShift",6),__publicField(NeuQuantFloat,"_radiusBias",1<<_NeuQuantFloat._radiusBiasShift),__publicField(NeuQuantFloat,"_radiusDecrease",30),__publicField(NeuQuantFloat,"_alphaBiasShift",10),__publicField(NeuQuantFloat,"_initAlpha",1<<_NeuQuantFloat._alphaBiasShift),__publicField(NeuQuantFloat,"_radBiasShift",8),__publicField(NeuQuantFloat,"_radBias",1<<_NeuQuantFloat._radBiasShift),__publicField(NeuQuantFloat,"_alphaRadBiasShift",_NeuQuantFloat._alphaBiasShift+_NeuQuantFloat._radBiasShift),__publicField(NeuQuantFloat,"_alphaRadBias",1<<_NeuQuantFloat._alphaRadBiasShift);var _ColorHistogram=class{constructor(d,m){__publicField(this,"_method"),__publicField(this,"_hueStats"),__publicField(this,"_histogram"),__publicField(this,"_initColors"),__publicField(this,"_minHueCols"),this._method=d,this._minHueCols=m<<2,this._initColors=m<<2,this._hueStats=new HueStatistics(_ColorHistogram._hueGroups,this._minHueCols),this._histogram=Object.create(null)}sample(d){switch(this._method){case 1:this._colorStats1D(d);break;case 2:this._colorStats2D(d)}}getImportanceSortedColorsIDXI32(){const d=stableSort(Object.keys(this._histogram),(g,w)=>this._histogram[w]-this._histogram[g]);if(d.length===0)return[];let m;switch(this._method){case 1:const g=Math.min(d.length,this._initColors),w=d[g-1],I=this._histogram[w];m=d.slice(0,g);let P=g;const F=d.length;for(;P<F&&this._histogram[d[P]]===I;)m.push(d[P++]);this._hueStats.injectIntoArray(m);break;case 2:m=d;break;default:throw new Error("Incorrect method")}return m.map(g=>+g)}_colorStats1D(d){const m=this._histogram,g=d.getPointArray(),w=g.length;for(let I=0;I<w;I++){const P=g[I].uint32;this._hueStats.check(P),P in m?m[P]++:m[P]=1}}_colorStats2D(d){const m=d.getWidth(),g=d.getHeight(),w=d.getPointArray(),I=_ColorHistogram._boxSize[0],P=_ColorHistogram._boxSize[1],F=I*P,$=this._makeBoxes(m,g,I,P),D=this._histogram;$.forEach(U=>{let j=Math.round(U.w*U.h/F)*_ColorHistogram._boxPixels;j<2&&(j=2);const Z={};this._iterateBox(U,m,G=>{const H=w[G].uint32;this._hueStats.check(H),H in D?D[H]++:H in Z?++Z[H]>=j&&(D[H]=Z[H]):Z[H]=1})}),this._hueStats.injectIntoDictionary(D)}_iterateBox(d,m,g){const w=d,I=w.y*m+w.x,P=(w.y+w.h-1)*m+(w.x+w.w-1),F=m-w.w+1;let $=0,D=I;do g.call(this,D),D+=++$%w.w==0?F:1;while(D<=P)}_makeBoxes(d,m,g,w){const I=d%g,P=m%w,F=d-I,$=m-P,D=[];for(let U=0;U<m;U+=w)for(let j=0;j<d;j+=g)D.push({x:j,y:U,w:j===F?I:g,h:U===$?P:w});return D}},ColorHistogram=_ColorHistogram;__publicField(ColorHistogram,"_boxSize",[64,64]),__publicField(ColorHistogram,"_boxPixels",2),__publicField(ColorHistogram,"_hueGroups",10);var RemovedColor=class{constructor(d,m,g){__publicField(this,"index"),__publicField(this,"color"),__publicField(this,"distance"),this.index=d,this.color=m,this.distance=g}},RGBQuant=class extends AbstractPaletteQuantizer{constructor(d,m=256,g=2){super(),__publicField(this,"_colors"),__publicField(this,"_initialDistance"),__publicField(this,"_distanceIncrement"),__publicField(this,"_histogram"),__publicField(this,"_distance"),this._distance=d,this._colors=m,this._histogram=new ColorHistogram(g,m),this._initialDistance=.01,this._distanceIncrement=.005}sample(d){this._histogram.sample(d)}*quantize(){const d=this._histogram.getImportanceSortedColorsIDXI32();if(d.length===0)throw new Error("No colors in image");yield*this._buildPalette(d)}*_buildPalette(d){const m=new Palette,g=m.getPointContainer().getPointArray(),w=new Array(d.length);for(let j=0;j<d.length;j++)g.push(Point.createByUint32(d[j])),w[j]=1;const I=g.length,P=[];let F=I,$=this._initialDistance;const D=new ProgressTracker(F-this._colors,99);for(;F>this._colors;){P.length=0;for(let j=0;j<I;j++){if(D.shouldNotify(I-F)&&(yield{progress:D.progress}),w[j]===0)continue;const Z=g[j];for(let G=j+1;G<I;G++){if(w[G]===0)continue;const H=g[G],q=this._distance.calculateNormalized(Z,H);q<$&&(P.push(new RemovedColor(G,H,q)),w[G]=0,F--)}}$+=F>3*this._colors?this._initialDistance:this._distanceIncrement}if(F<this._colors){stableSort(P,(Z,G)=>G.distance-Z.distance);let j=0;for(;F<this._colors&&j<P.length;)w[P[j].index]=1,F++,j++}let U=g.length;for(let j=U-1;j>=0;j--)w[j]===0&&(j!==U-1&&(g[j]=g[U-1]),--U);g.length=U,m.sort(),yield{palette:m,progress:100}}};function createArray1D(d){const m=[];for(let g=0;g<d;g++)m[g]=0;return m}function createArray4D(d,m,g,w){const I=new Array(d);for(let P=0;P<d;P++){I[P]=new Array(m);for(let F=0;F<m;F++){I[P][F]=new Array(g);for(let $=0;$<g;$++){I[P][F][$]=new Array(w);for(let D=0;D<w;D++)I[P][F][$][D]=0}}}return I}function createArray3D(d,m,g){const w=new Array(d);for(let I=0;I<d;I++){w[I]=new Array(m);for(let P=0;P<m;P++){w[I][P]=new Array(g);for(let F=0;F<g;F++)w[I][P][F]=0}}return w}function fillArray3D(d,m,g,w,I){for(let P=0;P<m;P++){d[P]=[];for(let F=0;F<g;F++){d[P][F]=[];for(let $=0;$<w;$++)d[P][F][$]=I}}}function fillArray1D(d,m,g){for(let w=0;w<m;w++)d[w]=g}var WuColorCube=class{constructor(){__publicField(this,"redMinimum"),__publicField(this,"redMaximum"),__publicField(this,"greenMinimum"),__publicField(this,"greenMaximum"),__publicField(this,"blueMinimum"),__publicField(this,"blueMaximum"),__publicField(this,"volume"),__publicField(this,"alphaMinimum"),__publicField(this,"alphaMaximum")}},_WuQuant=class extends AbstractPaletteQuantizer{constructor(d,m=256,g=5){super(),__publicField(this,"_reds"),__publicField(this,"_greens"),__publicField(this,"_blues"),__publicField(this,"_alphas"),__publicField(this,"_sums"),__publicField(this,"_weights"),__publicField(this,"_momentsRed"),__publicField(this,"_momentsGreen"),__publicField(this,"_momentsBlue"),__publicField(this,"_momentsAlpha"),__publicField(this,"_moments"),__publicField(this,"_table"),__publicField(this,"_pixels"),__publicField(this,"_cubes"),__publicField(this,"_colors"),__publicField(this,"_significantBitsPerChannel"),__publicField(this,"_maxSideIndex"),__publicField(this,"_alphaMaxSideIndex"),__publicField(this,"_sideSize"),__publicField(this,"_alphaSideSize"),__publicField(this,"_distance"),this._distance=d,this._setQuality(g),this._initialize(m)}sample(d){const m=d.getPointArray();for(let g=0,w=m.length;g<w;g++)this._addColor(m[g]);this._pixels=this._pixels.concat(m)}*quantize(){yield*this._preparePalette();const d=new Palette;for(let m=0;m<this._colors;m++)if(this._sums[m]>0){const g=this._sums[m],w=this._reds[m]/g,I=this._greens[m]/g,P=this._blues[m]/g,F=this._alphas[m]/g,$=Point.createByRGBA(0|w,0|I,0|P,0|F);d.add($)}d.sort(),yield{palette:d,progress:100}}*_preparePalette(){yield*this._calculateMoments();let d=0;const m=createArray1D(this._colors);for(let F=1;F<this._colors;++F){this._cut(this._cubes[d],this._cubes[F])?(m[d]=this._cubes[d].volume>1?this._calculateVariance(this._cubes[d]):0,m[F]=this._cubes[F].volume>1?this._calculateVariance(this._cubes[F]):0):(m[d]=0,F--),d=0;let $=m[0];for(let D=1;D<=F;++D)m[D]>$&&($=m[D],d=D);if($<=0){this._colors=F+1;break}}const g=[],w=[],I=[],P=[];for(let F=0;F<this._colors;++F){const $=_WuQuant._volume(this._cubes[F],this._weights);$>0?(g[F]=_WuQuant._volume(this._cubes[F],this._momentsRed)/$|0,w[F]=_WuQuant._volume(this._cubes[F],this._momentsGreen)/$|0,I[F]=_WuQuant._volume(this._cubes[F],this._momentsBlue)/$|0,P[F]=_WuQuant._volume(this._cubes[F],this._momentsAlpha)/$|0):(g[F]=0,w[F]=0,I[F]=0,P[F]=0)}this._reds=createArray1D(this._colors+1),this._greens=createArray1D(this._colors+1),this._blues=createArray1D(this._colors+1),this._alphas=createArray1D(this._colors+1),this._sums=createArray1D(this._colors+1);for(let F=0,$=this._pixels.length;F<$;F++){const D=this._pixels[F];let U=-1,j=Number.MAX_VALUE;for(let Z=0;Z<this._colors;Z++){const G=g[Z],H=w[Z],q=I[Z],W=P[Z],Q=this._distance.calculateRaw(G,H,q,W,D.r,D.g,D.b,D.a);Q<j&&(j=Q,U=Z)}this._reds[U]+=D.r,this._greens[U]+=D.g,this._blues[U]+=D.b,this._alphas[U]+=D.a,this._sums[U]++}}_addColor(d){const m=8-this._significantBitsPerChannel,g=1+(d.r>>m),w=1+(d.g>>m),I=1+(d.b>>m),P=1+(d.a>>m);this._weights[P][g][w][I]++,this._momentsRed[P][g][w][I]+=d.r,this._momentsGreen[P][g][w][I]+=d.g,this._momentsBlue[P][g][w][I]+=d.b,this._momentsAlpha[P][g][w][I]+=d.a,this._moments[P][g][w][I]+=this._table[d.r]+this._table[d.g]+this._table[d.b]+this._table[d.a]}*_calculateMoments(){const d=[],m=[],g=[],w=[],I=[],P=[],F=createArray3D(this._sideSize,this._sideSize,this._sideSize),$=createArray3D(this._sideSize,this._sideSize,this._sideSize),D=createArray3D(this._sideSize,this._sideSize,this._sideSize),U=createArray3D(this._sideSize,this._sideSize,this._sideSize),j=createArray3D(this._sideSize,this._sideSize,this._sideSize),Z=createArray3D(this._sideSize,this._sideSize,this._sideSize);let G=0;const H=new ProgressTracker(this._alphaMaxSideIndex*this._maxSideIndex,99);for(let q=1;q<=this._alphaMaxSideIndex;++q){fillArray3D(F,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D($,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(D,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(U,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(j,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(Z,this._sideSize,this._sideSize,this._sideSize,0);for(let W=1;W<=this._maxSideIndex;++W,++G){H.shouldNotify(G)&&(yield{progress:H.progress}),fillArray1D(d,this._sideSize,0),fillArray1D(m,this._sideSize,0),fillArray1D(g,this._sideSize,0),fillArray1D(w,this._sideSize,0),fillArray1D(I,this._sideSize,0),fillArray1D(P,this._sideSize,0);for(let Q=1;Q<=this._maxSideIndex;++Q){let J=0,K=0,V=0,tt=0,X=0,ot=0;for(let it=1;it<=this._maxSideIndex;++it)J+=this._weights[q][W][Q][it],K+=this._momentsRed[q][W][Q][it],V+=this._momentsGreen[q][W][Q][it],tt+=this._momentsBlue[q][W][Q][it],X+=this._momentsAlpha[q][W][Q][it],ot+=this._moments[q][W][Q][it],d[it]+=J,m[it]+=K,g[it]+=V,w[it]+=tt,I[it]+=X,P[it]+=ot,F[W][Q][it]=F[W-1][Q][it]+d[it],$[W][Q][it]=$[W-1][Q][it]+m[it],D[W][Q][it]=D[W-1][Q][it]+g[it],U[W][Q][it]=U[W-1][Q][it]+w[it],j[W][Q][it]=j[W-1][Q][it]+I[it],Z[W][Q][it]=Z[W-1][Q][it]+P[it],this._weights[q][W][Q][it]=this._weights[q-1][W][Q][it]+F[W][Q][it],this._momentsRed[q][W][Q][it]=this._momentsRed[q-1][W][Q][it]+$[W][Q][it],this._momentsGreen[q][W][Q][it]=this._momentsGreen[q-1][W][Q][it]+D[W][Q][it],this._momentsBlue[q][W][Q][it]=this._momentsBlue[q-1][W][Q][it]+U[W][Q][it],this._momentsAlpha[q][W][Q][it]=this._momentsAlpha[q-1][W][Q][it]+j[W][Q][it],this._moments[q][W][Q][it]=this._moments[q-1][W][Q][it]+Z[W][Q][it]}}}}static _volumeFloat(d,m){return m[d.alphaMaximum][d.redMaximum][d.greenMaximum][d.blueMaximum]-m[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMaximum]-m[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMaximum]+m[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMaximum]-m[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMaximum]+m[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMaximum]+m[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMaximum]-m[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(m[d.alphaMaximum][d.redMaximum][d.greenMaximum][d.blueMinimum]-m[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMinimum]-m[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMinimum]+m[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]-m[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMinimum]+m[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]+m[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]-m[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum])}static _volume(d,m){return 0|_WuQuant._volumeFloat(d,m)}static _top(d,m,g,w){let I;switch(m){case _WuQuant._alpha:I=w[g][d.redMaximum][d.greenMaximum][d.blueMaximum]-w[g][d.redMaximum][d.greenMinimum][d.blueMaximum]-w[g][d.redMinimum][d.greenMaximum][d.blueMaximum]+w[g][d.redMinimum][d.greenMinimum][d.blueMaximum]-(w[g][d.redMaximum][d.greenMaximum][d.blueMinimum]-w[g][d.redMaximum][d.greenMinimum][d.blueMinimum]-w[g][d.redMinimum][d.greenMaximum][d.blueMinimum]+w[g][d.redMinimum][d.greenMinimum][d.blueMinimum]);break;case _WuQuant._red:I=w[d.alphaMaximum][g][d.greenMaximum][d.blueMaximum]-w[d.alphaMaximum][g][d.greenMinimum][d.blueMaximum]-w[d.alphaMinimum][g][d.greenMaximum][d.blueMaximum]+w[d.alphaMinimum][g][d.greenMinimum][d.blueMaximum]-(w[d.alphaMaximum][g][d.greenMaximum][d.blueMinimum]-w[d.alphaMaximum][g][d.greenMinimum][d.blueMinimum]-w[d.alphaMinimum][g][d.greenMaximum][d.blueMinimum]+w[d.alphaMinimum][g][d.greenMinimum][d.blueMinimum]);break;case _WuQuant._green:I=w[d.alphaMaximum][d.redMaximum][g][d.blueMaximum]-w[d.alphaMaximum][d.redMinimum][g][d.blueMaximum]-w[d.alphaMinimum][d.redMaximum][g][d.blueMaximum]+w[d.alphaMinimum][d.redMinimum][g][d.blueMaximum]-(w[d.alphaMaximum][d.redMaximum][g][d.blueMinimum]-w[d.alphaMaximum][d.redMinimum][g][d.blueMinimum]-w[d.alphaMinimum][d.redMaximum][g][d.blueMinimum]+w[d.alphaMinimum][d.redMinimum][g][d.blueMinimum]);break;case _WuQuant._blue:I=w[d.alphaMaximum][d.redMaximum][d.greenMaximum][g]-w[d.alphaMaximum][d.redMaximum][d.greenMinimum][g]-w[d.alphaMaximum][d.redMinimum][d.greenMaximum][g]+w[d.alphaMaximum][d.redMinimum][d.greenMinimum][g]-(w[d.alphaMinimum][d.redMaximum][d.greenMaximum][g]-w[d.alphaMinimum][d.redMaximum][d.greenMinimum][g]-w[d.alphaMinimum][d.redMinimum][d.greenMaximum][g]+w[d.alphaMinimum][d.redMinimum][d.greenMinimum][g]);break;default:throw new Error("impossible")}return 0|I}static _bottom(d,m,g){switch(m){case _WuQuant._alpha:return-g[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMaximum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMaximum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMaximum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(-g[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMinimum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);case _WuQuant._red:return-g[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMaximum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMaximum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMaximum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(-g[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMinimum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);case _WuQuant._green:return-g[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMaximum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMaximum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMaximum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(-g[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);case _WuQuant._blue:return-g[d.alphaMaximum][d.redMaximum][d.greenMaximum][d.blueMinimum]+g[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]-(-g[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMinimum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);default:return 0}}_calculateVariance(d){const m=_WuQuant._volume(d,this._momentsRed),g=_WuQuant._volume(d,this._momentsGreen),w=_WuQuant._volume(d,this._momentsBlue),I=_WuQuant._volume(d,this._momentsAlpha);return _WuQuant._volumeFloat(d,this._moments)-(m*m+g*g+w*w+I*I)/_WuQuant._volume(d,this._weights)}_maximize(d,m,g,w,I,P,F,$,D){const U=0|_WuQuant._bottom(d,m,this._momentsRed),j=0|_WuQuant._bottom(d,m,this._momentsGreen),Z=0|_WuQuant._bottom(d,m,this._momentsBlue),G=0|_WuQuant._bottom(d,m,this._momentsAlpha),H=0|_WuQuant._bottom(d,m,this._weights);let q=0,W=-1;for(let Q=g;Q<w;++Q){let J=U+_WuQuant._top(d,m,Q,this._momentsRed),K=j+_WuQuant._top(d,m,Q,this._momentsGreen),V=Z+_WuQuant._top(d,m,Q,this._momentsBlue),tt=G+_WuQuant._top(d,m,Q,this._momentsAlpha),X=H+_WuQuant._top(d,m,Q,this._weights);if(X!==0){let ot=J*J+K*K+V*V+tt*tt,it=ot/X;J=I-J,K=P-K,V=F-V,tt=$-tt,X=D-X,X!==0&&(ot=J*J+K*K+V*V+tt*tt,it+=ot/X,it>q&&(q=it,W=Q))}}return{max:q,position:W}}_cut(d,m){let g;const w=_WuQuant._volume(d,this._momentsRed),I=_WuQuant._volume(d,this._momentsGreen),P=_WuQuant._volume(d,this._momentsBlue),F=_WuQuant._volume(d,this._momentsAlpha),$=_WuQuant._volume(d,this._weights),D=this._maximize(d,_WuQuant._red,d.redMinimum+1,d.redMaximum,w,I,P,F,$),U=this._maximize(d,_WuQuant._green,d.greenMinimum+1,d.greenMaximum,w,I,P,F,$),j=this._maximize(d,_WuQuant._blue,d.blueMinimum+1,d.blueMaximum,w,I,P,F,$),Z=this._maximize(d,_WuQuant._alpha,d.alphaMinimum+1,d.alphaMaximum,w,I,P,F,$);if(Z.max>=D.max&&Z.max>=U.max&&Z.max>=j.max){if(g=_WuQuant._alpha,Z.position<0)return!1}else g=D.max>=Z.max&&D.max>=U.max&&D.max>=j.max?_WuQuant._red:U.max>=Z.max&&U.max>=D.max&&U.max>=j.max?_WuQuant._green:_WuQuant._blue;switch(m.redMaximum=d.redMaximum,m.greenMaximum=d.greenMaximum,m.blueMaximum=d.blueMaximum,m.alphaMaximum=d.alphaMaximum,g){case _WuQuant._red:m.redMinimum=d.redMaximum=D.position,m.greenMinimum=d.greenMinimum,m.blueMinimum=d.blueMinimum,m.alphaMinimum=d.alphaMinimum;break;case _WuQuant._green:m.greenMinimum=d.greenMaximum=U.position,m.redMinimum=d.redMinimum,m.blueMinimum=d.blueMinimum,m.alphaMinimum=d.alphaMinimum;break;case _WuQuant._blue:m.blueMinimum=d.blueMaximum=j.position,m.redMinimum=d.redMinimum,m.greenMinimum=d.greenMinimum,m.alphaMinimum=d.alphaMinimum;break;case _WuQuant._alpha:m.alphaMinimum=d.alphaMaximum=Z.position,m.blueMinimum=d.blueMinimum,m.redMinimum=d.redMinimum,m.greenMinimum=d.greenMinimum}return d.volume=(d.redMaximum-d.redMinimum)*(d.greenMaximum-d.greenMinimum)*(d.blueMaximum-d.blueMinimum)*(d.alphaMaximum-d.alphaMinimum),m.volume=(m.redMaximum-m.redMinimum)*(m.greenMaximum-m.greenMinimum)*(m.blueMaximum-m.blueMinimum)*(m.alphaMaximum-m.alphaMinimum),!0}_initialize(d){this._colors=d,this._cubes=[];for(let m=0;m<d;m++)this._cubes[m]=new WuColorCube;this._cubes[0].redMinimum=0,this._cubes[0].greenMinimum=0,this._cubes[0].blueMinimum=0,this._cubes[0].alphaMinimum=0,this._cubes[0].redMaximum=this._maxSideIndex,this._cubes[0].greenMaximum=this._maxSideIndex,this._cubes[0].blueMaximum=this._maxSideIndex,this._cubes[0].alphaMaximum=this._alphaMaxSideIndex,this._weights=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsRed=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsGreen=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsBlue=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsAlpha=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._moments=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._table=[];for(let m=0;m<256;++m)this._table[m]=m*m;this._pixels=[]}_setQuality(d=5){this._significantBitsPerChannel=d,this._maxSideIndex=1<<this._significantBitsPerChannel,this._alphaMaxSideIndex=this._maxSideIndex,this._sideSize=this._maxSideIndex+1,this._alphaSideSize=this._alphaMaxSideIndex+1}},WuQuant=_WuQuant;__publicField(WuQuant,"_alpha",3),__publicField(WuQuant,"_red",2),__publicField(WuQuant,"_green",1),__publicField(WuQuant,"_blue",0);var image_exports={};__export(image_exports,{AbstractImageQuantizer:()=>AbstractImageQuantizer,ErrorDiffusionArray:()=>ErrorDiffusionArray,ErrorDiffusionArrayKernel:()=>ErrorDiffusionArrayKernel,ErrorDiffusionRiemersma:()=>ErrorDiffusionRiemersma,NearestColor:()=>NearestColor});var AbstractImageQuantizer=class{quantizeSync(d,m){for(const g of this.quantize(d,m))if(g.pointContainer)return g.pointContainer;throw new Error("unreachable")}},NearestColor=class extends AbstractImageQuantizer{constructor(d){super(),__publicField(this,"_distance"),this._distance=d}*quantize(d,m){const g=d.getPointArray(),w=d.getWidth(),I=d.getHeight(),P=new ProgressTracker(I,99);for(let F=0;F<I;F++){P.shouldNotify(F)&&(yield{progress:P.progress});for(let $=0,D=F*w;$<w;$++,D++){const U=g[D];U.from(m.getNearestColor(this._distance,U))}}yield{pointContainer:d,progress:100}}},ErrorDiffusionArrayKernel=(d=>(d[d.FloydSteinberg=0]="FloydSteinberg",d[d.FalseFloydSteinberg=1]="FalseFloydSteinberg",d[d.Stucki=2]="Stucki",d[d.Atkinson=3]="Atkinson",d[d.Jarvis=4]="Jarvis",d[d.Burkes=5]="Burkes",d[d.Sierra=6]="Sierra",d[d.TwoSierra=7]="TwoSierra",d[d.SierraLite=8]="SierraLite",d))(ErrorDiffusionArrayKernel||{}),ErrorDiffusionArray=class extends AbstractImageQuantizer{constructor(d,m,g=!0,w=0,I=!1){super(),__publicField(this,"_minColorDistance"),__publicField(this,"_serpentine"),__publicField(this,"_kernel"),__publicField(this,"_calculateErrorLikeGIMP"),__publicField(this,"_distance"),this._setKernel(m),this._distance=d,this._minColorDistance=w,this._serpentine=g,this._calculateErrorLikeGIMP=I}*quantize(d,m){const g=d.getPointArray(),w=new Point,I=d.getWidth(),P=d.getHeight(),F=[];let $=1,D=1;for(const j of this._kernel){const Z=j[2]+1;D<Z&&(D=Z)}for(let j=0;j<D;j++)this._fillErrorLine(F[j]=[],I);const U=new ProgressTracker(P,99);for(let j=0;j<P;j++){U.shouldNotify(j)&&(yield{progress:U.progress}),this._serpentine&&($*=-1);const Z=j*I,G=$===1?0:I-1,H=$===1?I:-1;this._fillErrorLine(F[0],I),F.push(F.shift());const q=F[0];for(let W=G,Q=Z+G;W!==H;W+=$,Q+=$){const J=g[Q],K=q[W];w.from(J);const V=Point.createByRGBA(inRange0to255Rounded(J.r+K[0]),inRange0to255Rounded(J.g+K[1]),inRange0to255Rounded(J.b+K[2]),inRange0to255Rounded(J.a+K[3])),tt=m.getNearestColor(this._distance,V);if(J.from(tt),this._minColorDistance&&this._distance.calculateNormalized(w,tt)<this._minColorDistance)continue;let X,ot,it,lt;this._calculateErrorLikeGIMP?(X=V.r-tt.r,ot=V.g-tt.g,it=V.b-tt.b,lt=V.a-tt.a):(X=w.r-tt.r,ot=w.g-tt.g,it=w.b-tt.b,lt=w.a-tt.a);const at=$===1?0:this._kernel.length-1,ht=$===1?this._kernel.length:-1;for(let et=at;et!==ht;et+=$){const ut=this._kernel[et][1]*$,Et=this._kernel[et][2];if(ut+W>=0&&ut+W<I&&Et+j>=0&&Et+j<P){const gt=this._kernel[et][0],dt=F[Et][ut+W];dt[0]+=X*gt,dt[1]+=ot*gt,dt[2]+=it*gt,dt[3]+=lt*gt}}}}yield{pointContainer:d,progress:100}}_fillErrorLine(d,m){d.length>m&&(d.length=m);const g=d.length;for(let w=0;w<g;w++){const I=d[w];I[0]=I[1]=I[2]=I[3]=0}for(let w=g;w<m;w++)d[w]=[0,0,0,0]}_setKernel(d){switch(d){case 0:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case 1:this._kernel=[[3/8,1,0],[3/8,0,1],[2/8,1,1]];break;case 2:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case 3:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case 4:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case 5:this._kernel=[[.25,1,0],[4/32,2,0],[2/32,-2,1],[4/32,-1,1],[.25,0,1],[4/32,1,1],[2/32,2,1]];break;case 6:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[4/32,-1,1],[5/32,0,1],[4/32,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case 7:this._kernel=[[.25,1,0],[3/16,2,0],[1/16,-2,1],[2/16,-1,1],[3/16,0,1],[2/16,1,1],[1/16,2,1]];break;case 8:this._kernel=[[.5,1,0],[1/4,-1,1],[1/4,0,1]];break;default:throw new Error(`ErrorDiffusionArray: unknown kernel = ${d}`)}}};function*hilbertCurve(d,m,g){const w=Math.max(d,m),I={width:d,height:m,level:Math.floor(Math.log(w)/Math.log(2)+1),callback:g,tracker:new ProgressTracker(d*m,99),index:0,x:0,y:0};yield*walkHilbert(I,1),visit(I,0)}function*walkHilbert(d,m){if(!(d.level<1)){switch(d.tracker.shouldNotify(d.index)&&(yield{progress:d.tracker.progress}),d.level--,m){case 2:yield*walkHilbert(d,1),visit(d,3),yield*walkHilbert(d,2),visit(d,4),yield*walkHilbert(d,2),visit(d,2),yield*walkHilbert(d,4);break;case 3:yield*walkHilbert(d,4),visit(d,2),yield*walkHilbert(d,3),visit(d,1),yield*walkHilbert(d,3),visit(d,3),yield*walkHilbert(d,1);break;case 1:yield*walkHilbert(d,2),visit(d,4),yield*walkHilbert(d,1),visit(d,3),yield*walkHilbert(d,1),visit(d,1),yield*walkHilbert(d,3);break;case 4:yield*walkHilbert(d,3),visit(d,1),yield*walkHilbert(d,4),visit(d,2),yield*walkHilbert(d,4),visit(d,4),yield*walkHilbert(d,2)}d.level++}}function visit(d,m){switch(d.x>=0&&d.x<d.width&&d.y>=0&&d.y<d.height&&(d.callback(d.x,d.y),d.index++),m){case 2:d.x--;break;case 3:d.x++;break;case 1:d.y--;break;case 4:d.y++}}var ErrorDiffusionRiemersma=class extends AbstractImageQuantizer{constructor(d,m=16,g=1){super(),__publicField(this,"_distance"),__publicField(this,"_weights"),__publicField(this,"_errorQueueSize"),this._distance=d,this._errorQueueSize=m,this._weights=ErrorDiffusionRiemersma._createWeights(g,m)}*quantize(d,m){const g=d.getPointArray(),w=d.getWidth(),I=d.getHeight(),P=[];let F=0;for(let $=0;$<this._errorQueueSize;$++)P[$]={r:0,g:0,b:0,a:0};yield*hilbertCurve(w,I,($,D)=>{const U=g[$+D*w];let{r:j,g:Z,b:G,a:H}=U;for(let J=0;J<this._errorQueueSize;J++){const K=this._weights[J],V=P[(J+F)%this._errorQueueSize];j+=V.r*K,Z+=V.g*K,G+=V.b*K,H+=V.a*K}const q=Point.createByRGBA(inRange0to255Rounded(j),inRange0to255Rounded(Z),inRange0to255Rounded(G),inRange0to255Rounded(H)),W=m.getNearestColor(this._distance,q);F=(F+1)%this._errorQueueSize;const Q=(F+this._errorQueueSize-1)%this._errorQueueSize;P[Q].r=U.r-W.r,P[Q].g=U.g-W.g,P[Q].b=U.b-W.b,P[Q].a=U.a-W.a,U.from(W)}),yield{pointContainer:d,progress:100}}static _createWeights(d,m){const g=[],w=Math.exp(Math.log(m)/(m-1));for(let I=0,P=1;I<m;I++)g[I]=(P+.5|0)/m*d,P*=w;return g}},quality_exports={};__export(quality_exports,{ssim:()=>ssim});var K1=.01,K2=.03;function ssim(d,m){if(d.getHeight()!==m.getHeight()||d.getWidth()!==m.getWidth())throw new Error("Images have different sizes!");const g=(255*K1)**2,w=(255*K2)**2;let I=0,P=0;return iterate(d,m,(F,$,D,U)=>{let j=0,Z=0,G=0;for(let q=0;q<F.length;q++)Z+=(F[q]-D)**2,G+=($[q]-U)**2,j+=(F[q]-D)*($[q]-U);const H=F.length-1;Z/=H,G/=H,j/=H,P+=(2*D*U+g)*(2*j+w)/((D**2+U**2+g)*(Z+G+w)),I++}),P/I}function iterate(d,m,g){const w=d.getWidth(),I=d.getHeight();for(let P=0;P<I;P+=8)for(let F=0;F<w;F+=8){const $=Math.min(8,w-F),D=Math.min(8,I-P),U=calculateLumaValuesForWindow(d,F,P,$,D),j=calculateLumaValuesForWindow(m,F,P,$,D);g(U,j,calculateAverageLuma(U),calculateAverageLuma(j))}}function calculateLumaValuesForWindow(d,m,g,w,I){const P=d.getPointArray(),F=[];let $=0;for(let D=g;D<g+I;D++){const U=D*d.getWidth();for(let j=m;j<m+w;j++){const Z=P[U+j];F[$]=.2126*Z.r+.7152*Z.g+.0722*Z.b,$++}}return F}function calculateAverageLuma(d){let m=0;for(const g of d)m+=g;return m/d.length}function buildPaletteSync(d,{colorDistanceFormula:m,paletteQuantization:g,colors:w}={}){const I=paletteQuantizationToPaletteQuantizer(colorDistanceFormulaToColorDistance(m),g,w);return d.forEach(P=>I.sample(P)),I.quantizeSync()}function applyPaletteSync(d,m,{colorDistanceFormula:g,imageQuantization:w}={}){return imageQuantizationToImageQuantizer(colorDistanceFormulaToColorDistance(g),w).quantizeSync(d,m)}function colorDistanceFormulaToColorDistance(d="euclidean-bt709"){switch(d){case"cie94-graphic-arts":return new CIE94GraphicArts;case"cie94-textiles":return new CIE94Textiles;case"ciede2000":return new CIEDE2000;case"color-metric":return new CMetric;case"euclidean":return new Euclidean;case"euclidean-bt709":return new EuclideanBT709;case"euclidean-bt709-noalpha":return new EuclideanBT709NoAlpha;case"manhattan":return new Manhattan;case"manhattan-bt709":return new ManhattanBT709;case"manhattan-nommyde":return new ManhattanNommyde;case"pngquant":return new PNGQuant;default:throw new Error(`Unknown colorDistanceFormula ${d}`)}}function imageQuantizationToImageQuantizer(d,m="floyd-steinberg"){switch(m){case"nearest":return new NearestColor(d);case"riemersma":return new ErrorDiffusionRiemersma(d);case"floyd-steinberg":return new ErrorDiffusionArray(d,0);case"false-floyd-steinberg":return new ErrorDiffusionArray(d,1);case"stucki":return new ErrorDiffusionArray(d,2);case"atkinson":return new ErrorDiffusionArray(d,3);case"jarvis":return new ErrorDiffusionArray(d,4);case"burkes":return new ErrorDiffusionArray(d,5);case"sierra":return new ErrorDiffusionArray(d,6);case"two-sierra":return new ErrorDiffusionArray(d,7);case"sierra-lite":return new ErrorDiffusionArray(d,8);default:throw new Error(`Unknown imageQuantization ${m}`)}}function paletteQuantizationToPaletteQuantizer(d,m="wuquant",g=256){switch(m){case"neuquant":return new NeuQuant(d,g);case"rgbquant":return new RGBQuant(d,g);case"wuquant":return new WuQuant(d,g);case"neuquant-float":return new NeuQuantFloat(d,g);default:throw new Error(`Unknown paletteQuantization ${m}`)}}/**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * cie94.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * ciede2000.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * cmetric.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * common.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * constants.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * ditherErrorDiffusionArray.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * euclidean.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * helper.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * hueStatistics.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * iq.ts - Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * lab2rgb.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * lab2xyz.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * manhattanNeuQuant.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * nearestColor.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * palette.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * pngQuant.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * point.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * pointContainer.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgb2hsl.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgb2lab.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgb2xyz.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * ssim.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * wuQuant.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * xyz2lab.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * xyz2rgb.ts - part of Image Quantization Library
 *//**
 * @preserve
 * MIT License
 *
 * Copyright 2015-2018 Igor Bezkrovnyi
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * riemersma.ts - part of Image Quantization Library
 *//**
 * @preserve TypeScript port:
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * colorHistogram.ts - part of Image Quantization Library
 *//**
 * @preserve TypeScript port:
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * neuquant.ts - part of Image Quantization Library
 *//**
 * @preserve TypeScript port:
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgbquant.ts - part of Image Quantization Library
 */typeof setImmediate=="function"?setImmediate:typeof process<"u"&&(process==null||process.nextTick);const QuantizeOptionsSchema=z.object({colors:z.number().optional(),colorDistanceFormula:z.union([z.literal("cie94-textiles"),z.literal("cie94-graphic-arts"),z.literal("ciede2000"),z.literal("color-metric"),z.literal("euclidean"),z.literal("euclidean-bt709-noalpha"),z.literal("euclidean-bt709"),z.literal("manhattan"),z.literal("manhattan-bt709"),z.literal("manhattan-nommyde"),z.literal("pngquant")]).optional(),paletteQuantization:z.union([z.literal("neuquant"),z.literal("neuquant-float"),z.literal("rgbquant"),z.literal("wuquant")]).optional(),imageQuantization:z.union([z.literal("nearest"),z.literal("riemersma"),z.literal("floyd-steinberg"),z.literal("false-floyd-steinberg"),z.literal("stucki"),z.literal("atkinson"),z.literal("jarvis"),z.literal("burkes"),z.literal("sierra"),z.literal("two-sierra"),z.literal("sierra-lite")]).optional()}),methods={quantize(d,m){const{colors:g,colorDistanceFormula:w,paletteQuantization:I,imageQuantization:P}=QuantizeOptionsSchema.parse(m),F=utils_exports.PointContainer.fromUint8Array(d.bitmap.data,d.bitmap.width,d.bitmap.height),$=applyPaletteSync(F,buildPaletteSync([F],{colors:g,colorDistanceFormula:w,paletteQuantization:I}),{colorDistanceFormula:w,imageQuantization:P});return d.bitmap.data=Buffer$1.from($.toUint8Array()),d}};var parseBmfontAscii=function(d){if(!d)throw new Error("no data provided");var m={pages:[],chars:[],kernings:[]},g=(d=d.toString().trim()).split(/\r\n?|\n/g);if(g.length===0)throw new Error("no data in BMFont file");for(var w=0;w<g.length;w++){var I=splitLine(g[w],w);if(I)if(I.key==="page"){if(typeof I.data.id!="number")throw new Error("malformed file at line "+w+" -- needs page id=N");if(typeof I.data.file!="string")throw new Error("malformed file at line "+w+' -- needs page file="path"');m.pages[I.data.id]=I.data.file}else I.key==="chars"||I.key==="kernings"||(I.key==="char"?m.chars.push(I.data):I.key==="kerning"?m.kernings.push(I.data):m[I.key]=I.data)}return m};function splitLine(d,m){if(!(d=d.replace(/\t+/g," ").trim()))return null;var g=d.indexOf(" ");if(g===-1)throw new Error("no named row at line "+m);var w=d.substring(0,g);d=(d=(d=(d=d.substring(g+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map(function(D){return D.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var I=[],P=0;P<d.length;P++){var F=d[P];P===0?I.push({key:F[0],data:""}):P===d.length-1?I[I.length-1].data=parseData(F[0]):(I[I.length-1].data=parseData(F[0]),I.push({key:F[1],data:""}))}var $={key:w,data:{}};return I.forEach(function(D){$.data[D.key]=D.data}),$}function parseData(d){return d&&d.length!==0?d.indexOf('"')===0||d.indexOf("'")===0?d.substring(1,d.length-1):d.indexOf(",")!==-1?parseIntList$1(d):parseInt(d,10):""}function parseIntList$1(d){return d.split(",").map(function(m){return parseInt(m,10)})}getDefaultExportFromCjs(parseBmfontAscii);var GLYPH_DESIGNER_ERROR="chasrset",parseAttribs=function(d){for(var m in d=Object.assign({},d),GLYPH_DESIGNER_ERROR in d&&(d.charset=d[GLYPH_DESIGNER_ERROR],delete d[GLYPH_DESIGNER_ERROR]),d)m!=="face"&&m!=="charset"&&(d[m]=m==="padding"||m==="spacing"?parseIntList(d[m]):parseInt(d[m],10));return d};function parseIntList(d){return d.split(",").map(function(m){return parseInt(m,10)})}var xmlParseFromString=self.DOMParser!==void 0?function(d){return new self.DOMParser().parseFromString(d,"application/xml")}:self.ActiveXObject!==void 0&&new self.ActiveXObject("Microsoft.XMLDOM")?function(d){var m=new self.ActiveXObject("Microsoft.XMLDOM");return m.async="false",m.loadXML(d),m}:function(d){var m=document.createElement("div");return m.innerHTML=d,m},parseAttributes=parseAttribs,parseFromString=xmlParseFromString,NAME_MAP={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"},browser=function(d){d=d.toString();var m=parseFromString(d),g={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(U){var j=m.getElementsByTagName(U)[0];j&&(g[U]=parseAttributes(getAttribs(j)))});var w=m.getElementsByTagName("pages")[0];if(!w)throw new Error("malformed file -- no <pages> element");for(var I=w.getElementsByTagName("page"),P=0;P<I.length;P++){var F=I[P],$=parseInt(F.getAttribute("id"),10),D=F.getAttribute("file");if(isNaN($))throw new Error('malformed file -- page "id" attribute is NaN');if(!D)throw new Error('malformed file -- needs page "file" attribute');g.pages[parseInt($,10)]=D}return["chars","kernings"].forEach(function(U){var j=m.getElementsByTagName(U)[0];if(j)for(var Z=U.substring(0,U.length-1),G=j.getElementsByTagName(Z),H=0;H<G.length;H++){var q=G[H];g[U].push(parseAttributes(getAttribs(q)))}}),g};function getAttribs(d){return getAttribList(d).reduce(function(m,g){return m[mapName(g.nodeName)]=g.nodeValue,m},{})}function getAttribList(d){for(var m=[],g=0;g<d.attributes.length;g++)m.push(d.attributes[g]);return m}function mapName(d){return NAME_MAP[d.toLowerCase()]||d}getDefaultExportFromCjs(browser);var HEADER$1=[66,77,70],parseBmfontBinary=function(d){if(d.length<6)throw new Error("invalid buffer length for BMFont");var m=HEADER$1.every(function(P,F){return d.readUInt8(F)===P});if(!m)throw new Error("BMFont missing BMF byte header");var g=3;if(d.readUInt8(g++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var w={kernings:[],chars:[]},I=0;I<5;I++)g+=readBlock(w,d,g);return w};function readBlock(d,m,g){if(g>m.length-1)return 0;var w=m.readUInt8(g++),I=m.readInt32LE(g);switch(g+=4,w){case 1:d.info=readInfo(m,g);break;case 2:d.common=readCommon(m,g);break;case 3:d.pages=readPages(m,g,I);break;case 4:d.chars=readChars(m,g,I);break;case 5:d.kernings=readKernings(m,g,I)}return 5+I}function readInfo(d,m){var g={};g.size=d.readInt16LE(m);var w=d.readUInt8(m+2);return g.smooth=w>>7&1,g.unicode=w>>6&1,g.italic=w>>5&1,g.bold=w>>4&1,w>>3&1&&(g.fixedHeight=1),g.charset=d.readUInt8(m+3)||"",g.stretchH=d.readUInt16LE(m+4),g.aa=d.readUInt8(m+6),g.padding=[d.readInt8(m+7),d.readInt8(m+8),d.readInt8(m+9),d.readInt8(m+10)],g.spacing=[d.readInt8(m+11),d.readInt8(m+12)],g.outline=d.readUInt8(m+13),g.face=readStringNT(d,m+14),g}function readCommon(d,m){var g={};return g.lineHeight=d.readUInt16LE(m),g.base=d.readUInt16LE(m+2),g.scaleW=d.readUInt16LE(m+4),g.scaleH=d.readUInt16LE(m+6),g.pages=d.readUInt16LE(m+8),d.readUInt8(m+10),g.packed=0,g.alphaChnl=d.readUInt8(m+11),g.redChnl=d.readUInt8(m+12),g.greenChnl=d.readUInt8(m+13),g.blueChnl=d.readUInt8(m+14),g}function readPages(d,m,g){for(var w=[],I=readNameNT(d,m),P=I.length+1,F=g/P,$=0;$<F;$++)w[$]=d.slice(m,m+I.length).toString("utf8"),m+=P;return w}function readChars(d,m,g){for(var w=[],I=g/20,P=0;P<I;P++){var F={},$=20*P;F.id=d.readUInt32LE(m+0+$),F.x=d.readUInt16LE(m+4+$),F.y=d.readUInt16LE(m+6+$),F.width=d.readUInt16LE(m+8+$),F.height=d.readUInt16LE(m+10+$),F.xoffset=d.readInt16LE(m+12+$),F.yoffset=d.readInt16LE(m+14+$),F.xadvance=d.readInt16LE(m+16+$),F.page=d.readUInt8(m+18+$),F.chnl=d.readUInt8(m+19+$),w[P]=F}return w}function readKernings(d,m,g){for(var w=[],I=g/10,P=0;P<I;P++){var F={},$=10*P;F.first=d.readUInt32LE(m+0+$),F.second=d.readUInt32LE(m+4+$),F.amount=d.readInt16LE(m+8+$),w[P]=F}return w}function readNameNT(d,m){for(var g=m;g<d.length&&d[g]!==0;g++);return d.slice(m,g)}function readStringNT(d,m){return readNameNT(d,m).toString("utf8")}getDefaultExportFromCjs(parseBmfontBinary);function e(d){return d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}const t=d=>{if(!d)return null;const m={};switch(d.type){case"ELEMENT":{let g={};const w=E(d.value.attributes),I=t(d.value.children);if(w&&(g=Object.assign(g,w)),I){const P=r(d.value.children);g=Object.assign(g,P)}m[d.value.type]=g;break}case"ATTRIBUTE":{const g=d.value;m[g.name]=g.value;break}case"CONTENT":return{content:d.value}}return m},r=d=>d&&Array.isArray(d)&&d.length!==0?n(d)?{content:d[0].value}:{children:d.map(t)}:null,n=d=>d&&Array.isArray(d)&&d.length===1&&d[0].type==="CONTENT",E=d=>d&&Array.isArray(d)?d.map(t).reduce((m,g)=>Object.assign(m,g),{}):null;var s={convert:d=>t(d.value.children[0])},a={Token:(d,m)=>({type:d,value:m}),TOKEN_TYPE:{OPEN_BRACKET:"OPEN_BRACKET",ELEMENT_TYPE:"ELEMENT_TYPE",CLOSE_ELEMENT:"CLOSE_ELEMENT",ATTRIB_NAME:"ATTRIB_NAME",ATTRIB_VALUE:"ATTRIB_VALUE",ASSIGN:"ASSIGN",CLOSE_BRACKET:"CLOSE_BRACKET",CONTENT:"CONTENT",EOF:"EOF"}};const{Token:T,TOKEN_TYPE:u}=a,c=T("EOF"),l=d=>d===" "||d===`
`||d==="\r"||d==="	",o=d=>d.replace(/'/g,'"');var N={createLexer:function(d){let m=null,g=(Z=>{let G=0;for(;G<Z.length&&l(Z[G]);)G++;return((H,q)=>{if(H.startsWith("<?xml",q)){const W=H.length;for(;q<W;)if(H[q]!=="?")q++;else{if(H[q+1]===">")return q+2;q++}}return q})(Z,G)})(d),w=[];const I=()=>d[g],P=()=>m!==c&&g<d.length,F=Z=>Z==='"'||Z==="'",$=()=>{for(;P()&&l(d[g]);)g++},D=Z=>{if(P()){if(d[g]==="<"){let G="<";return g++,P()&&d[g]==="/"?(g++,G="</"):P()&&d[g]==="!"&&d[g+1]==="-"&&d[g+2]==="-"&&(g++,g++,g++,G="<!--"),G}if(I()==="/"){let G="/";return g++,P()&&I()===">"&&(g++,G="/>"),G}if(d[g]==="="||d[g]===">"){const G=d[g];return g++,G}}return U(!!Z)},U=Z=>{const G=Z?/[^>=<]/u:/[a-zA-Z0-9_:-]/;let H=g;for(;P()&&d[g].match(G);)g++;return o(d.substring(H,g))},j=()=>{const Z=g;$();const G=g-Z;if(P())if(m&&m.type===u.OPEN_BRACKET){$();const H=D(!1);m=T(u.ELEMENT_TYPE,H),w.push(H)}else if(m&&m.type===u.ASSIGN){P()&&F(I())&&g++;let H=g;for(;P()&&!F(I());)g++;const q=o(d.substring(H,g));g++,m=T(u.ATTRIB_VALUE,q)}else{$();let H=D(!0);switch(H){case"=":m=m.type===u.ATTRIB_NAME?T(u.ASSIGN):T(u.CONTENT,H);break;case"</":{const q=g;for(;d[g]!==">";)g++;m=T(u.CLOSE_ELEMENT,d.substring(q,g)),g++,w.pop();break}case"/>":{const q=w.pop();m=T(u.CLOSE_ELEMENT,q);break}case"<!--":{const q=["!","-","-"];for(;P()&&(q[2]!==">"||q[1]!=="-"||q[0]!=="-");)q.shift(),q.push(d[g]),g++;return j()}case">":m=T(u.CLOSE_BRACKET);break;case"<":m=T(u.OPEN_BRACKET);break;default:if(H&&H.length>0){if(m.type===u.CLOSE_BRACKET){let q="";I()!=="<"&&(q=U(!0)),m=T(u.CONTENT,H+q)}else if(m.type!==u.ATTRIB_NAME&&m.type!==u.CONTENT)m.type===u.CLOSE_ELEMENT?(H=" ".repeat(G)+H,m=T(u.CONTENT,H)):m=T(u.ATTRIB_NAME,H);else{const q=" ".repeat(G)+H;m=T(u.CONTENT,q)}break}{const q='Unknown Syntax : "'+d[g]+'"';throw new Error(q)}}}else m=c;return m};return{peek:I,next:j,hasNext:P}}};const{createLexer:i}=N,{Token:p,TOKEN_TYPE:O}=a,[A,f,C,h]=["ROOT","ELEMENT","ATTRIBUTE","CONTENT"],_=(d,m)=>({type:d,value:m}),L=d=>_(h,d),y=(d,m,g)=>_(f,{type:d,attributes:m,children:g}),v=(d,m)=>_(C,{name:d,value:m}),S=(d,m)=>{const g=[];for(;d.hasNext();){const w=d.next();switch(w.type){case O.OPEN_BRACKET:{const I=d.next(),[P,F]=R(d);let $=[];F.type!==O.CLOSE_ELEMENT&&($=S(d,I)),$&&$.length>0&&$[0].type===O.CONTENT&&($=b($)),g.push(y(I.value,P,$));break}case O.CLOSE_ELEMENT:if(w.value===m.value)return g;break;case O.CONTENT:g.push(L(w.value));break;case O.EOF:return g;default:throw new Error(`Unknown Lexem type: ${w.type} "${w.value}, scoping element: ${m.value}"`)}}return g},R=d=>{const m=[];let g=d.peek();if(!d.hasNext()||g&&g.type===O.CLOSE_BRACKET||g&&g.type===O.CLOSE_ELEMENT)return[m,g];for(g=d.next();d.hasNext()&&g&&g.type!==O.CLOSE_BRACKET&&g.type!==O.CLOSE_ELEMENT;){const w=g;d.next();const I=d.next(),P=v(w.value,I.value);m.push(P),g=d.next()}return[m,g]};function b(d){let m=[],g="";return d.forEach(w=>{w.type===O.CONTENT?g+=w.value:(g.length&&(m.push(L(g)),g=""),m.push(w))}),g.length&&m.push(L(g)),m}var B={transpile:function(d,m){const g=(w=>_(A,{children:S(w,p(A,"ROOT"))}))(i(d));return m?m.convert(g):g},Node:_,ElementNode:y,AttribNode:v};const M=s,{transpile:x}=B;var k=e({convertXML:function(d,m){return x(d,m||M)},createAST:function(d){return x(d)}}),simpleXmlToJson_min=k;getDefaultExportFromCjs(simpleXmlToJson_min);createJimp({formats:[png]});Buffer$1.from([66,77,70,3]);var pixelmatch_1=pixelmatch;const defaultOptions={threshold:.1,includeAA:!1,alpha:.1,aaColor:[255,255,0],diffColor:[255,0,0],diffColorAlt:null,diffMask:!1};function pixelmatch(d,m,g,w,I,P){if(!isPixelData(d)||!isPixelData(m)||g&&!isPixelData(g))throw new Error("Image data: Uint8Array, Uint8ClampedArray or Buffer expected.");if(d.length!==m.length||g&&g.length!==d.length)throw new Error("Image sizes do not match.");if(d.length!==w*I*4)throw new Error("Image data size does not match width/height.");P=Object.assign({},defaultOptions,P);const F=w*I,$=new Uint32Array(d.buffer,d.byteOffset,F),D=new Uint32Array(m.buffer,m.byteOffset,F);let U=!0;for(let G=0;G<F;G++)if($[G]!==D[G]){U=!1;break}if(U){if(g&&!P.diffMask)for(let G=0;G<F;G++)drawGrayPixel(d,4*G,P.alpha,g);return 0}const j=35215*P.threshold*P.threshold;let Z=0;for(let G=0;G<I;G++)for(let H=0;H<w;H++){const q=4*(G*w+H),W=colorDelta(d,m,q,q);Math.abs(W)>j?P.includeAA||!antialiased(d,H,G,w,I,m)&&!antialiased(m,H,G,w,I,d)?(g&&drawPixel(g,q,...W<0&&P.diffColorAlt||P.diffColor),Z++):g&&!P.diffMask&&drawPixel(g,q,...P.aaColor):g&&(P.diffMask||drawGrayPixel(d,q,P.alpha,g))}return Z}function isPixelData(d){return ArrayBuffer.isView(d)&&d.constructor.BYTES_PER_ELEMENT===1}function antialiased(d,m,g,w,I,P){const F=Math.max(m-1,0),$=Math.max(g-1,0),D=Math.min(m+1,w-1),U=Math.min(g+1,I-1),j=4*(g*w+m);let Z,G,H,q,W=m===F||m===D||g===$||g===U?1:0,Q=0,J=0;for(let K=F;K<=D;K++)for(let V=$;V<=U;V++){if(K===m&&V===g)continue;const tt=colorDelta(d,d,j,4*(V*w+K),!0);if(tt===0){if(W++,W>2)return!1}else tt<Q?(Q=tt,Z=K,G=V):tt>J&&(J=tt,H=K,q=V)}return Q!==0&&J!==0&&(hasManySiblings(d,Z,G,w,I)&&hasManySiblings(P,Z,G,w,I)||hasManySiblings(d,H,q,w,I)&&hasManySiblings(P,H,q,w,I))}function hasManySiblings(d,m,g,w,I){const P=Math.max(m-1,0),F=Math.max(g-1,0),$=Math.min(m+1,w-1),D=Math.min(g+1,I-1),U=4*(g*w+m);let j=m===P||m===$||g===F||g===D?1:0;for(let Z=P;Z<=$;Z++)for(let G=F;G<=D;G++){if(Z===m&&G===g)continue;const H=4*(G*w+Z);if(d[U]===d[H]&&d[U+1]===d[H+1]&&d[U+2]===d[H+2]&&d[U+3]===d[H+3]&&j++,j>2)return!0}return!1}function colorDelta(d,m,g,w,I){let P=d[g+0],F=d[g+1],$=d[g+2],D=d[g+3],U=m[w+0],j=m[w+1],Z=m[w+2],G=m[w+3];if(D===G&&P===U&&F===j&&$===Z)return 0;D<255&&(D/=255,P=blend(P,D),F=blend(F,D),$=blend($,D)),G<255&&(G/=255,U=blend(U,G),j=blend(j,G),Z=blend(Z,G));const H=rgb2y(P,F,$),q=rgb2y(U,j,Z),W=H-q;if(I)return W;const Q=rgb2i(P,F,$)-rgb2i(U,j,Z),J=rgb2q(P,F,$)-rgb2q(U,j,Z),K=.5053*W*W+.299*Q*Q+.1957*J*J;return H>q?-K:K}function rgb2y(d,m,g){return .29889531*d+.58662247*m+.11448223*g}function rgb2i(d,m,g){return .59597799*d-.2741761*m-.32180189*g}function rgb2q(d,m,g){return .21147017*d-.52261711*m+.31114694*g}function blend(d,m){return 255+(d-255)*m}function drawPixel(d,m,g,w,I){d[m+0]=g,d[m+1]=w,d[m+2]=I,d[m+3]=255}function drawGrayPixel(d,m,g,w){const I=blend(rgb2y(d[m+0],d[m+1],d[m+2]),g*d[m+3]/255);drawPixel(w,m,I,I,I)}getDefaultExportFromCjs(pixelmatch_1);const defaultPlugins=[methods$h,methods$g,methods$f,methods$e,methods$c,methods$a,methods$b,methods$9,methods$8,methods$7,methods$6,methods$5,methods$4,methods$3,methods$d,methods$2,methods$1,methods],defaultFormats=[bmp,msBmp,gif,jpeg$2,png,tiff];bmp().mime,gif().mime,jpeg$2().mime,png().mime,tiff().mime;const Jimp=createJimp({formats:defaultFormats,plugins:defaultPlugins});function bin2hex(d){return("00"+parseInt(d,2).toString(16)).substr(-2).toUpperCase()}function flipEndainess(d){return d.split("").reverse().join("")}function hex2int(d,m=!1){if(typeof d!="string"||!/^[0-9A-Fa-f]+$/.test(d))throw new Error("Input must be a valid hexadecimal string.");if(d.length%2!==0)throw new Error("Hexadecimal string length must be even.");return m&&(d=d.match(/.{2}/g).reverse().join("")),parseInt(d,16)}function int2hex(d,m=!1){if(!Number.isInteger(d))throw new Error("Input must be an integer.");if(d<0)throw new Error("This function does not support negative numbers for endianness conversion.");let g=d.toString(16).toUpperCase();return g.length%2!==0&&(g="0"+g),m&&(g=g.match(/.{2}/g).reverse().join("")),g}const delay=d=>new Promise(m=>setTimeout(m,d)),locations={naviId:{start:0,length:1,type:"int",little:!1,multiplier:1},petId:{start:2,length:2,type:"int",little:!1,multiplier:1},owner:{start:4,length:5,type:"int",little:!1,multiplier:1},level:{start:9,length:1,type:"int",little:!1,multiplier:1},experiance:{start:10,length:2,type:"int",little:!0,multiplier:1},health:{start:12,length:1,type:"int",little:!1,multiplier:10},attack:{start:13,length:1,type:"int",little:!1,multiplier:1},wins:{start:16,length:1,type:"int",little:!1,multiplier:1},losses:{start:17,length:1,type:"int",little:!1,multiplier:1},unknownSprite:{start:228,length:120,type:"image"},crossSprite:{start:356,length:120,type:"image"},loseSprite:{start:484,length:120,type:"image"},winSprite:{start:612,length:120,type:"image"}};function toObject(d){return{petId:getIntValue("petId",d),owner:getIntValue("owner",d),naviId:getIntValue("naviId",d),level:getIntValue("level",d),experiance:getIntValue("experiance",d),health:getIntValue("health",d),attack:getIntValue("attack",d),wins:getIntValue("wins",d),losses:getIntValue("losses",d),unknownSprite:getRawValue("unknownSprite",d),crossSprite:getRawValue("crossSprite",d),loseSprite:getRawValue("loseSprite",d),winSprite:getRawValue("winSprite",d),raw:d}}function toRaw(d){return Object.keys(d).forEach(g=>{if(g!="raw"&&locations[g].type=="int"){const w=locations[g].length==1?255:65535;if(d[g]>w||d[g]<0)throw new Error(`Field [${g}] contains invalid data.`);const I=d[g]/locations[g].multiplier;d.raw=setRawValue(g,int2hex(I,locations[g].little),d.raw)}else g!="raw"&&locations[g].type=="image"&&(d.raw=setRawValue(g,d[g],d.raw))}),d}function getIntValue(d,m){return hex2int(getRawValue(d,m),locations[d].little)*locations[d].multiplier}function getRawValue(d,m){return m.substr(locations[d].start*2,locations[d].length*2)}function setRawValue(d,m,g){return g.replaceAt(locations[d].start*2,locations[d].start*2+locations[d].length*2,m)}function pinoutToBin(d){return d.substring(2).slice(0,-1).split("").reverse().join("").padStart(16,"0")}String.prototype.replaceAt=function(d,m,g){return this.substring(0,d)+g+this.substring(d+g.length,this.length)};const LinkChip={toObject,toRaw,pinoutToBin};async function saveNavi(d){try{d=LinkChip.toRaw(d);const m=new Uint8Array(d.raw.match(/.{1,2}/g).map(I=>parseInt(I,16))),g=await window.showSaveFilePicker({suggestedName:"backup.navi",types:[{description:"Navi Backup",accept:{"application/octet-stream":[".navi"]}}]}),w=await g.createWritable();return await w.write(m),await w.close(),g.name}catch(m){if(!m.message.toLowerCase().includes("window"))throw new Error(m)}}async function openNavi(){try{const[d]=await window.showOpenFilePicker({types:[{description:"Navi Backup",accept:{"application/octet-stream":[".navi"]}}],multiple:!1}),g=await(await d.getFile()).arrayBuffer(),w=new Uint8Array(g);let I="";if(w.length!=1024)throw new Error("Navi file has an incorrect length.");for(let P=0;P<w.length;P++)I+=int2hex(w[P]);return LinkChip.toObject(I)}catch(d){if(!d.message.includes("Window"))throw new Error(d)}}async function saveImage(d,m,g){try{const w=await window.showSaveFilePicker({suggestedName:`${d.split(" ").join("-")}.${g}`,types:[{description:`${g.toUpperCase()} Image`,accept:{[`image/${g}`]:[`.${g}`]}}]}),I=await w.createWritable();await m.rotate(-90).flip({horizontal:!0,vertical:!1}),g!="bmp"&&await m.resize({w:160,h:160});const P=await m.getBuffer(`image/${g}`);return await I.write(P),await I.close(),w.name}catch(w){if(!w.message.includes("Window"))throw new Error(w)}}async function openImage(){try{const[d]=await window.showOpenFilePicker({types:[{description:"Bitmap Files",accept:{"image/bmp":[".bmp"]}}],multiple:!1}),g=await(await d.getFile()).arrayBuffer(),w=await Jimp.fromBuffer(g);if(w.bitmap.width!=32||w.bitmap.height!=32)throw new Error("Image must be 32x32.");await w.greyscale().flip({horizontal:!0,vertical:!1}).rotate(90);const I=w.bitmap.data.toString("HEX");let P="",F="";for(let $=0;$<I.length;$+=8)P+=I.substring($,$+8)=="fefefeff"?0:1,P.length==8&&(F+=bin2hex(flipEndainess(P)),P="");return F.substring(0,240)}catch(d){if(!d.message.includes("Window"))throw new Error(d)}}const FileUtil={saveImage,openImage,saveNavi,openNavi},eventBus=writable({});function publish(d,m){eventBus.update(g=>({...g,[d]:m}))}function subscribe(d,m){return eventBus.subscribe(w=>{w[d]!==void 0&&m(w[d])})}async function uploadSprite(d,m,g){try{const w=await FileUtil.openImage();w&&(m(w),publish("toasts",{type:"success",content:`New [${g.name}] sprite uploaded.`}))}catch(w){publish("toasts",{type:"error",content:w.message||w})}}var on_click$2=(d,m)=>m("bmp"),root_1$3=template('<div class="margin-bottom svelte-rj148o"><img alt="Not Avalible"></div> <div><button type="button" class="btn btn-warning margin-bottom svelte-rj148o">Upload</button> <button type="button" class="btn btn-warning margin-bottom svelte-rj148o">Save BMP</button></div>',1),root$7=template('<div style="card pad-bottom"><div class="card-header align-center svelte-rj148o"> </div> <div class="card-body align-center svelte-rj148o"><!></div></div>');function ImageField(d,m){push(m,!0);let g=prop(m,"value",15),w=state(void 0),I;function P(q){let W=0;for(let Q=0;Q<8;Q++)W=W<<1|q&1,q>>=1;return W}async function F(q){try{const W=new Jimp({height:32,width:32});W.background=4294967295;for(let Q=0;Q<32;Q++)for(let J=0;J<32;J++){const K=Q*32+J,V=Math.floor(K/8),tt=K%8;let X=0;if(Q<30){const it=q.substr(V*2,2),lt=parseInt(it,16);X=P(lt)>>7-tt&1}else X=0;const ot=X===0?4294967295:255;W.setPixelColor(ot,J,Q)}I=await W.clone(),set(w,proxy(await W.rotate(-90).flip({horizontal:!0,vertical:!1}).resize({w:160,h:160,mode:ResizeStrategy.NEAREST_NEIGHBOR}).getBase64("image/bmp")))}catch(W){console.error(W),publish("toasts",{type:"error",content:`Error occured when converting [${m.name}]`})}}async function $(q){try{const W=await FileUtil.saveImage(m.name,I.clone(),q);W&&publish("toasts",{type:"success",content:`[${m.name}] sprite downloaded as ${W}`})}catch(W){publish("toasts",{type:"error",content:W.message||W})}}user_effect(()=>{F(g())});var D=root$7(),U=child(D),j=child(U),Z=sibling(U,2),G=child(Z);{var H=q=>{var W=root_1$3(),Q=first_child(W),J=child(Q),K=sibling(Q,2),V=child(K);V.__click=[uploadSprite,g,m];var tt=sibling(V,2);tt.__click=[on_click$2,$],template_effect(()=>set_attribute(J,"src",get(w))),append(q,W)};if_block(G,q=>{get(w)&&q(H)})}template_effect(()=>set_text(j,m.name)),append(d,D),pop()}delegate(["click"]);var root_2$1=template('<div class="card"><div class="card-body"><div class="row"><div class="col"><!></div></div> <div class="row"><div class="col"><!></div></div> <div class="row"><div class="col"><!></div> <div class="col"><!></div></div> <div class="row"><div class="col"><!></div> <div class="col"><!></div></div> <div class="row"><div class="col"><!></div> <div class="col"><!></div></div> <div class="row"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div></div></div></div>'),root$6=template('<div><!> <div class="container"><!> <!></div></div>');function NaviEditor(d,m){push(m,!0);let g=state(!1),w=state(void 0);async function I(){set(g,!0);try{const Q=await LinkAnalyzer.writeSync(m.port,"r");set(w,proxy(LinkChip.toObject(Q))),publish("toasts",{type:"success",content:"Navi loaded from Link Analyzer."})}catch(Q){publish("toasts",{type:"success",content:Q.message||Q})}set(g,!1)}async function P(){set(g,!0);try{const Q=LinkChip.toRaw(get(w)),J=128;for(let K=0;K<1024/J;K++){const V=K*(J*2),tt=K*(J*2)+J*2,X=`w:${K*J} ${Q.raw.substring(V,tt)}`;await LinkAnalyzer.writeSync(m.port,X)}set(w,proxy(Q)),publish("toasts",{type:"success",content:"Navi written to Link Analyzer."})}catch(Q){publish("toasts",{type:"error",content:Q.message||Q})}set(g,!1)}async function F(){try{const Q=await FileUtil.openNavi();Q&&(set(w,proxy(Q)),publish("toasts",{type:"success",content:"Loaded Navi from file."}))}catch(Q){publish("toasts",{type:"error",content:Q.message||Q})}}async function $(){try{const Q=await FileUtil.saveNavi(get(w));Q&&publish("toasts",{type:"success",content:`Navi saved to file as ${Q}`})}catch(Q){publish("toasts",{type:"error",content:Q.message||Q})}}var D=root$6(),U=child(D),j=derived(()=>!!get(w));NaviEditorTopBar(U,{get port(){return m.port},get hasNavi(){return get(j)},get loading(){return get(g)},loadNavi:I,writeNavi:P,openNavi:F,saveNavi:$});var Z=sibling(U,2),G=child(Z);{var H=Q=>{VersionUpdate(Q,{get port(){return m.port}})};if_block(G,Q=>{m.port&&Q(H)})}var q=sibling(G,2);{var W=Q=>{var J=root_2$1(),K=child(J),V=child(K),tt=child(V),X=child(tt);NaviField(X,{get value(){return get(w).naviId},set value(ct){get(w).naviId=ct}});var ot=sibling(V,2),it=child(ot),lt=child(it);NumberField(lt,{name:"PET ID",maxValue:"65535",get value(){return get(w).petId},set value(ct){get(w).petId=ct}});var at=sibling(ot,2),ht=child(at),et=child(ht);NumberField(et,{name:"Navi Level",maxValue:"255",get value(){return get(w).level},set value(ct){get(w).level=ct}});var ut=sibling(ht,2),Et=child(ut);NumberField(Et,{name:"Navi EXP",maxValue:"65535",get value(){return get(w).experiance},set value(ct){get(w).experiance=ct}});var gt=sibling(at,2),dt=child(gt),yt=child(dt);NumberField(yt,{name:"Navi HP",maxValue:"255",get value(){return get(w).health},set value(ct){get(w).health=ct}});var Nt=sibling(dt,2),Bt=child(Nt);NumberField(Bt,{name:"Navi ATTK",maxValue:"255",get value(){return get(w).attack},set value(ct){get(w).attack=ct}});var St=sibling(gt,2),zt=child(St),kt=child(zt);NumberField(kt,{name:"Navi Wins",maxValue:"255",get value(){return get(w).wins},set value(ct){get(w).wins=ct}});var Ct=sibling(zt,2),Ut=child(Ct);NumberField(Ut,{name:"Navi Losses",maxValue:"255",get value(){return get(w).losses},set value(ct){get(w).losses=ct}});var Dt=sibling(St,2),Tt=child(Dt),Rt=child(Tt);ImageField(Rt,{name:"Unknown Sprite",get value(){return get(w).unknownSprite},set value(ct){get(w).unknownSprite=ct}});var Lt=sibling(Tt,2),Ht=child(Lt);ImageField(Ht,{name:"Cross Sprite",get value(){return get(w).crossSprite},set value(ct){get(w).crossSprite=ct}});var Wt=sibling(Lt,2),Pt=child(Wt);ImageField(Pt,{name:"Win Sprite",get value(){return get(w).winSprite},set value(ct){get(w).winSprite=ct}});var nt=sibling(Wt,2),Mt=child(nt);ImageField(Mt,{name:"Lose Sprite",get value(){return get(w).loseSprite},set value(ct){get(w).loseSprite=ct}}),append(Q,J)};if_block(q,Q=>{get(w)&&Q(W)})}append(d,D),pop()}var root_3$1=template('<span class="spinner-border spinner-border-sm" role="status"></span>'),on_click$1=(d,m)=>m(""),on_click_1=(d,m)=>m("library"),root$5=template(`<div class="d-flex flex-column flex-shrink-0"><a href="." class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none"><img class="logo svelte-1wcxdbs" src="images/icon.png" alt="Link Analyzer"> <span>Link Analyzer</span></a> <hr> <ul class="nav nav-pills flex-column mb-auto"><a href="#" style="text-align: center;"><!></a></ul> <hr> <ul class="nav nav-pills flex-column mb-auto"><li class="nav-item"><a href="#"><span class="fa-solid fa-pen-to-square"></span> Navi Editor</a></li> <li class="nav-item"><a href="#"><span class="fa-solid fa-book"></span> Chip Catalog</a></li></ul> <hr> <div class="footer svelte-1wcxdbs"><div><span>Zach Lambert  2025</span></div> <div class="margin-top-bottom"><a href="https://ko-fi.com/zarch" target="_blank"><img class="kofi svelte-1wcxdbs" src="images/kofi_symbol.png" title="Zach Lambert's Ko-Fi" alt="Kofi"></a> <a href="https://discord.com/invite/Wa98sZza4g" target="_blank"><img class="kofi svelte-1wcxdbs" src="images/discord.png" title="Megaman Battle Network! Discord" alt="Discord"></a></div></div></div>`);function SideBar(d,m){push(m,!0);let g=prop(m,"port",15),w=prop(m,"page",15),I=state(!1);async function P(){if(!("serial"in navigator)){publish("toasts",{type:"error",content:"Device is not compatible in this browser. Use Chrome, Edge, or Opera."});return}if(g())g().close(),g(null),publish("toasts",{type:"warning",content:"Link Analyzer has disconnected."});else try{set(I,!0);const J=await LinkAnalyzer.connect();await delay(2e3),g(J),g().addEventListener("disconnect",()=>{P()}),publish("toasts",{type:"success",content:"Connected to Link Analyzer."})}catch(J){console.error(J),publish("toasts",{type:"error",content:"No selection made or resource is busy."})}set(I,!1)}var F=root$5(),$=sibling(child(F),4),D=child($);D.__click=P;var U=child(D);{var j=J=>{var K=text("Connect");append(J,K)},Z=J=>{var K=comment(),V=first_child(K);{var tt=ot=>{var it=root_3$1();append(ot,it)},X=ot=>{var it=text("Disconnect");append(ot,it)};if_block(V,ot=>{get(I)?ot(tt):ot(X,!1)},!0)}append(J,K)};if_block(U,J=>{!g()&&!get(I)?J(j):J(Z,!1)})}var G=sibling($,4),H=child(G),q=child(H);q.__click=[on_click$1,w];var W=sibling(H,2),Q=child(W);Q.__click=[on_click_1,w],template_effect(()=>{set_class(D,`nav-link text-black link-cursor ${(g()?"bg-success":"bg-danger")??""} svelte-1wcxdbs`),set_attribute(D,"title",g()?"Disconnect Link Analyzer":"Connect Link Analyzer"),set_class(q,`nav-link link-cursor ${(w()=="library"?"text-warning":"bg-warning text-black")??""} svelte-1wcxdbs`),set_class(Q,`nav-link link-cursor ${(w()=="library"?"bg-warning text-black ":"text-warning")??""} svelte-1wcxdbs`)}),append(d,F),pop()}delegate(["click"]);async function getLinkAnalyzerPinout(d,m,g){const I=(await LinkAnalyzer.writeSync(m.port,"p")).substr(2).slice(0,-1).split("").reverse().join("").padStart(16,"0");set(g,proxy((parseInt(I,2)>>0).toString())),m.filter(get(g))}var on_click=(d,m,g)=>m.filter(get(g)),root$4=template('<div class="search svelte-5ke6jx"><div class="input-group mb-3"><input type="text" class="form-control" placeholder="Chip ID" title="name, id, class, or name:cannon, id:230, class:mega"> <button title="Gets pinout of real chip from Link Analyzer">Read</button> <button class="btn btn-warning svelte-5ke6jx">Search</button></div></div>');function Search(d,m){push(m,!0);let g=state("");var w=root$4(),I=child(w),P=child(I),F=sibling(P,2);F.__click=[getLinkAnalyzerPinout,m,g];var $=sibling(F,2);$.__click=[on_click,m,g],template_effect(()=>set_class(F,`btn btn-warning ${(m.port?"":"disabled")??""} svelte-5ke6jx`)),bind_value(P,()=>get(g),D=>set(g,D)),append(d,w),pop()}delegate(["click"]);var buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=$,base64Js.toByteArray=U,base64Js.fromByteArray=G;for(var d=[],m=[],g=typeof Uint8Array<"u"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=0,P=w.length;I<P;++I)d[I]=w[I],m[w.charCodeAt(I)]=I;m[45]=62,m[95]=63;function F(H){var q=H.length;if(q%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var W=H.indexOf("=");W===-1&&(W=q);var Q=W===q?0:4-W%4;return[W,Q]}function $(H){var q=F(H),W=q[0],Q=q[1];return(W+Q)*3/4-Q}function D(H,q,W){return(q+W)*3/4-W}function U(H){var q,W=F(H),Q=W[0],J=W[1],K=new g(D(H,Q,J)),V=0,tt=J>0?Q-4:Q,X;for(X=0;X<tt;X+=4)q=m[H.charCodeAt(X)]<<18|m[H.charCodeAt(X+1)]<<12|m[H.charCodeAt(X+2)]<<6|m[H.charCodeAt(X+3)],K[V++]=q>>16&255,K[V++]=q>>8&255,K[V++]=q&255;return J===2&&(q=m[H.charCodeAt(X)]<<2|m[H.charCodeAt(X+1)]>>4,K[V++]=q&255),J===1&&(q=m[H.charCodeAt(X)]<<10|m[H.charCodeAt(X+1)]<<4|m[H.charCodeAt(X+2)]>>2,K[V++]=q>>8&255,K[V++]=q&255),K}function j(H){return d[H>>18&63]+d[H>>12&63]+d[H>>6&63]+d[H&63]}function Z(H,q,W){for(var Q,J=[],K=q;K<W;K+=3)Q=(H[K]<<16&16711680)+(H[K+1]<<8&65280)+(H[K+2]&255),J.push(j(Q));return J.join("")}function G(H){for(var q,W=H.length,Q=W%3,J=[],K=16383,V=0,tt=W-Q;V<tt;V+=K)J.push(Z(H,V,V+K>tt?tt:V+K));return Q===1?(q=H[W-1],J.push(d[q>>2]+d[q<<4&63]+"==")):Q===2&&(q=(H[W-2]<<8)+H[W-1],J.push(d[q>>10]+d[q>>4&63]+d[q<<2&63]+"=")),J.join("")}return base64Js}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(d,m,g,w,I){var P,F,$=I*8-w-1,D=(1<<$)-1,U=D>>1,j=-7,Z=g?I-1:0,G=g?-1:1,H=d[m+Z];for(Z+=G,P=H&(1<<-j)-1,H>>=-j,j+=$;j>0;P=P*256+d[m+Z],Z+=G,j-=8);for(F=P&(1<<-j)-1,P>>=-j,j+=w;j>0;F=F*256+d[m+Z],Z+=G,j-=8);if(P===0)P=1-U;else{if(P===D)return F?NaN:(H?-1:1)*(1/0);F=F+Math.pow(2,w),P=P-U}return(H?-1:1)*F*Math.pow(2,P-w)},ieee754.write=function(d,m,g,w,I,P){var F,$,D,U=P*8-I-1,j=(1<<U)-1,Z=j>>1,G=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=w?0:P-1,q=w?1:-1,W=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?($=isNaN(m)?1:0,F=j):(F=Math.floor(Math.log(m)/Math.LN2),m*(D=Math.pow(2,-F))<1&&(F--,D*=2),F+Z>=1?m+=G/D:m+=G*Math.pow(2,1-Z),m*D>=2&&(F++,D/=2),F+Z>=j?($=0,F=j):F+Z>=1?($=(m*D-1)*Math.pow(2,I),F=F+Z):($=m*Math.pow(2,Z-1)*Math.pow(2,I),F=0));I>=8;d[g+H]=$&255,H+=q,$/=256,I-=8);for(F=F<<I|$,U+=I;U>0;d[g+H]=F&255,H+=q,F/=256,U-=8);d[g+H-q]|=W*128}),ieee754}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,function(d){const m=requireBase64Js(),g=requireIeee754(),w=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;d.Buffer=$,d.SlowBuffer=K,d.INSPECT_MAX_BYTES=50;const I=2147483647;d.kMaxLength=I,$.TYPED_ARRAY_SUPPORT=P(),!$.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function P(){try{const At=new Uint8Array(1),st={foo:function(){return 42}};return Object.setPrototypeOf(st,Uint8Array.prototype),Object.setPrototypeOf(At,st),At.foo()===42}catch{return!1}}Object.defineProperty($.prototype,"parent",{enumerable:!0,get:function(){if($.isBuffer(this))return this.buffer}}),Object.defineProperty($.prototype,"offset",{enumerable:!0,get:function(){if($.isBuffer(this))return this.byteOffset}});function F(At){if(At>I)throw new RangeError('The value "'+At+'" is invalid for option "size"');const st=new Uint8Array(At);return Object.setPrototypeOf(st,$.prototype),st}function $(At,st,mt){if(typeof At=="number"){if(typeof st=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Z(At)}return D(At,st,mt)}$.poolSize=8192;function D(At,st,mt){if(typeof At=="string")return G(At,st);if(ArrayBuffer.isView(At))return q(At);if(At==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof At);if(Gt(At,ArrayBuffer)||At&&Gt(At.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Gt(At,SharedArrayBuffer)||At&&Gt(At.buffer,SharedArrayBuffer)))return W(At,st,mt);if(typeof At=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ot=At.valueOf&&At.valueOf();if(Ot!=null&&Ot!==At)return $.from(Ot,st,mt);const qt=Q(At);if(qt)return qt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof At[Symbol.toPrimitive]=="function")return $.from(At[Symbol.toPrimitive]("string"),st,mt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof At)}$.from=function(At,st,mt){return D(At,st,mt)},Object.setPrototypeOf($.prototype,Uint8Array.prototype),Object.setPrototypeOf($,Uint8Array);function U(At){if(typeof At!="number")throw new TypeError('"size" argument must be of type number');if(At<0)throw new RangeError('The value "'+At+'" is invalid for option "size"')}function j(At,st,mt){return U(At),At<=0?F(At):st!==void 0?typeof mt=="string"?F(At).fill(st,mt):F(At).fill(st):F(At)}$.alloc=function(At,st,mt){return j(At,st,mt)};function Z(At){return U(At),F(At<0?0:J(At)|0)}$.allocUnsafe=function(At){return Z(At)},$.allocUnsafeSlow=function(At){return Z(At)};function G(At,st){if((typeof st!="string"||st==="")&&(st="utf8"),!$.isEncoding(st))throw new TypeError("Unknown encoding: "+st);const mt=V(At,st)|0;let Ot=F(mt);const qt=Ot.write(At,st);return qt!==mt&&(Ot=Ot.slice(0,qt)),Ot}function H(At){const st=At.length<0?0:J(At.length)|0,mt=F(st);for(let Ot=0;Ot<st;Ot+=1)mt[Ot]=At[Ot]&255;return mt}function q(At){if(Gt(At,Uint8Array)){const st=new Uint8Array(At);return W(st.buffer,st.byteOffset,st.byteLength)}return H(At)}function W(At,st,mt){if(st<0||At.byteLength<st)throw new RangeError('"offset" is outside of buffer bounds');if(At.byteLength<st+(mt||0))throw new RangeError('"length" is outside of buffer bounds');let Ot;return st===void 0&&mt===void 0?Ot=new Uint8Array(At):mt===void 0?Ot=new Uint8Array(At,st):Ot=new Uint8Array(At,st,mt),Object.setPrototypeOf(Ot,$.prototype),Ot}function Q(At){if($.isBuffer(At)){const st=J(At.length)|0,mt=F(st);return mt.length===0||At.copy(mt,0,0,st),mt}if(At.length!==void 0)return typeof At.length!="number"||Qt(At.length)?F(0):H(At);if(At.type==="Buffer"&&Array.isArray(At.data))return H(At.data)}function J(At){if(At>=I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");return At|0}function K(At){return+At!=At&&(At=0),$.alloc(+At)}$.isBuffer=function(st){return st!=null&&st._isBuffer===!0&&st!==$.prototype},$.compare=function(st,mt){if(Gt(st,Uint8Array)&&(st=$.from(st,st.offset,st.byteLength)),Gt(mt,Uint8Array)&&(mt=$.from(mt,mt.offset,mt.byteLength)),!$.isBuffer(st)||!$.isBuffer(mt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(st===mt)return 0;let Ot=st.length,qt=mt.length;for(let Yt=0,Jt=Math.min(Ot,qt);Yt<Jt;++Yt)if(st[Yt]!==mt[Yt]){Ot=st[Yt],qt=mt[Yt];break}return Ot<qt?-1:qt<Ot?1:0},$.isEncoding=function(st){switch(String(st).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},$.concat=function(st,mt){if(!Array.isArray(st))throw new TypeError('"list" argument must be an Array of Buffers');if(st.length===0)return $.alloc(0);let Ot;if(mt===void 0)for(mt=0,Ot=0;Ot<st.length;++Ot)mt+=st[Ot].length;const qt=$.allocUnsafe(mt);let Yt=0;for(Ot=0;Ot<st.length;++Ot){let Jt=st[Ot];if(Gt(Jt,Uint8Array))Yt+Jt.length>qt.length?($.isBuffer(Jt)||(Jt=$.from(Jt)),Jt.copy(qt,Yt)):Uint8Array.prototype.set.call(qt,Jt,Yt);else if($.isBuffer(Jt))Jt.copy(qt,Yt);else throw new TypeError('"list" argument must be an Array of Buffers');Yt+=Jt.length}return qt};function V(At,st){if($.isBuffer(At))return At.length;if(ArrayBuffer.isView(At)||Gt(At,ArrayBuffer))return At.byteLength;if(typeof At!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof At);const mt=At.length,Ot=arguments.length>2&&arguments[2]===!0;if(!Ot&&mt===0)return 0;let qt=!1;for(;;)switch(st){case"ascii":case"latin1":case"binary":return mt;case"utf8":case"utf-8":return $t(At).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mt*2;case"hex":return mt>>>1;case"base64":return wt(At).length;default:if(qt)return Ot?-1:$t(At).length;st=(""+st).toLowerCase(),qt=!0}}$.byteLength=V;function tt(At,st,mt){let Ot=!1;if((st===void 0||st<0)&&(st=0),st>this.length||((mt===void 0||mt>this.length)&&(mt=this.length),mt<=0)||(mt>>>=0,st>>>=0,mt<=st))return"";for(At||(At="utf8");;)switch(At){case"hex":return St(this,st,mt);case"utf8":case"utf-8":return gt(this,st,mt);case"ascii":return Nt(this,st,mt);case"latin1":case"binary":return Bt(this,st,mt);case"base64":return Et(this,st,mt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zt(this,st,mt);default:if(Ot)throw new TypeError("Unknown encoding: "+At);At=(At+"").toLowerCase(),Ot=!0}}$.prototype._isBuffer=!0;function X(At,st,mt){const Ot=At[st];At[st]=At[mt],At[mt]=Ot}$.prototype.swap16=function(){const st=this.length;if(st%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let mt=0;mt<st;mt+=2)X(this,mt,mt+1);return this},$.prototype.swap32=function(){const st=this.length;if(st%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let mt=0;mt<st;mt+=4)X(this,mt,mt+3),X(this,mt+1,mt+2);return this},$.prototype.swap64=function(){const st=this.length;if(st%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let mt=0;mt<st;mt+=8)X(this,mt,mt+7),X(this,mt+1,mt+6),X(this,mt+2,mt+5),X(this,mt+3,mt+4);return this},$.prototype.toString=function(){const st=this.length;return st===0?"":arguments.length===0?gt(this,0,st):tt.apply(this,arguments)},$.prototype.toLocaleString=$.prototype.toString,$.prototype.equals=function(st){if(!$.isBuffer(st))throw new TypeError("Argument must be a Buffer");return this===st?!0:$.compare(this,st)===0},$.prototype.inspect=function(){let st="";const mt=d.INSPECT_MAX_BYTES;return st=this.toString("hex",0,mt).replace(/(.{2})/g,"$1 ").trim(),this.length>mt&&(st+=" ... "),"<Buffer "+st+">"},w&&($.prototype[w]=$.prototype.inspect),$.prototype.compare=function(st,mt,Ot,qt,Yt){if(Gt(st,Uint8Array)&&(st=$.from(st,st.offset,st.byteLength)),!$.isBuffer(st))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof st);if(mt===void 0&&(mt=0),Ot===void 0&&(Ot=st?st.length:0),qt===void 0&&(qt=0),Yt===void 0&&(Yt=this.length),mt<0||Ot>st.length||qt<0||Yt>this.length)throw new RangeError("out of range index");if(qt>=Yt&&mt>=Ot)return 0;if(qt>=Yt)return-1;if(mt>=Ot)return 1;if(mt>>>=0,Ot>>>=0,qt>>>=0,Yt>>>=0,this===st)return 0;let Jt=Yt-qt,Ft=Ot-mt;const re=Math.min(Jt,Ft),jt=this.slice(qt,Yt),Kt=st.slice(mt,Ot);for(let It=0;It<re;++It)if(jt[It]!==Kt[It]){Jt=jt[It],Ft=Kt[It];break}return Jt<Ft?-1:Ft<Jt?1:0};function ot(At,st,mt,Ot,qt){if(At.length===0)return-1;if(typeof mt=="string"?(Ot=mt,mt=0):mt>2147483647?mt=2147483647:mt<-2147483648&&(mt=-2147483648),mt=+mt,Qt(mt)&&(mt=qt?0:At.length-1),mt<0&&(mt=At.length+mt),mt>=At.length){if(qt)return-1;mt=At.length-1}else if(mt<0)if(qt)mt=0;else return-1;if(typeof st=="string"&&(st=$.from(st,Ot)),$.isBuffer(st))return st.length===0?-1:it(At,st,mt,Ot,qt);if(typeof st=="number")return st=st&255,typeof Uint8Array.prototype.indexOf=="function"?qt?Uint8Array.prototype.indexOf.call(At,st,mt):Uint8Array.prototype.lastIndexOf.call(At,st,mt):it(At,[st],mt,Ot,qt);throw new TypeError("val must be string, number or Buffer")}function it(At,st,mt,Ot,qt){let Yt=1,Jt=At.length,Ft=st.length;if(Ot!==void 0&&(Ot=String(Ot).toLowerCase(),Ot==="ucs2"||Ot==="ucs-2"||Ot==="utf16le"||Ot==="utf-16le")){if(At.length<2||st.length<2)return-1;Yt=2,Jt/=2,Ft/=2,mt/=2}function re(Kt,It){return Yt===1?Kt[It]:Kt.readUInt16BE(It*Yt)}let jt;if(qt){let Kt=-1;for(jt=mt;jt<Jt;jt++)if(re(At,jt)===re(st,Kt===-1?0:jt-Kt)){if(Kt===-1&&(Kt=jt),jt-Kt+1===Ft)return Kt*Yt}else Kt!==-1&&(jt-=jt-Kt),Kt=-1}else for(mt+Ft>Jt&&(mt=Jt-Ft),jt=mt;jt>=0;jt--){let Kt=!0;for(let It=0;It<Ft;It++)if(re(At,jt+It)!==re(st,It)){Kt=!1;break}if(Kt)return jt}return-1}$.prototype.includes=function(st,mt,Ot){return this.indexOf(st,mt,Ot)!==-1},$.prototype.indexOf=function(st,mt,Ot){return ot(this,st,mt,Ot,!0)},$.prototype.lastIndexOf=function(st,mt,Ot){return ot(this,st,mt,Ot,!1)};function lt(At,st,mt,Ot){mt=Number(mt)||0;const qt=At.length-mt;Ot?(Ot=Number(Ot),Ot>qt&&(Ot=qt)):Ot=qt;const Yt=st.length;Ot>Yt/2&&(Ot=Yt/2);let Jt;for(Jt=0;Jt<Ot;++Jt){const Ft=parseInt(st.substr(Jt*2,2),16);if(Qt(Ft))return Jt;At[mt+Jt]=Ft}return Jt}function at(At,st,mt,Ot){return vt($t(st,At.length-mt),At,mt,Ot)}function ht(At,st,mt,Ot){return vt(rt(st),At,mt,Ot)}function et(At,st,mt,Ot){return vt(wt(st),At,mt,Ot)}function ut(At,st,mt,Ot){return vt(ft(st,At.length-mt),At,mt,Ot)}$.prototype.write=function(st,mt,Ot,qt){if(mt===void 0)qt="utf8",Ot=this.length,mt=0;else if(Ot===void 0&&typeof mt=="string")qt=mt,Ot=this.length,mt=0;else if(isFinite(mt))mt=mt>>>0,isFinite(Ot)?(Ot=Ot>>>0,qt===void 0&&(qt="utf8")):(qt=Ot,Ot=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Yt=this.length-mt;if((Ot===void 0||Ot>Yt)&&(Ot=Yt),st.length>0&&(Ot<0||mt<0)||mt>this.length)throw new RangeError("Attempt to write outside buffer bounds");qt||(qt="utf8");let Jt=!1;for(;;)switch(qt){case"hex":return lt(this,st,mt,Ot);case"utf8":case"utf-8":return at(this,st,mt,Ot);case"ascii":case"latin1":case"binary":return ht(this,st,mt,Ot);case"base64":return et(this,st,mt,Ot);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ut(this,st,mt,Ot);default:if(Jt)throw new TypeError("Unknown encoding: "+qt);qt=(""+qt).toLowerCase(),Jt=!0}},$.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Et(At,st,mt){return st===0&&mt===At.length?m.fromByteArray(At):m.fromByteArray(At.slice(st,mt))}function gt(At,st,mt){mt=Math.min(At.length,mt);const Ot=[];let qt=st;for(;qt<mt;){const Yt=At[qt];let Jt=null,Ft=Yt>239?4:Yt>223?3:Yt>191?2:1;if(qt+Ft<=mt){let re,jt,Kt,It;switch(Ft){case 1:Yt<128&&(Jt=Yt);break;case 2:re=At[qt+1],(re&192)===128&&(It=(Yt&31)<<6|re&63,It>127&&(Jt=It));break;case 3:re=At[qt+1],jt=At[qt+2],(re&192)===128&&(jt&192)===128&&(It=(Yt&15)<<12|(re&63)<<6|jt&63,It>2047&&(It<55296||It>57343)&&(Jt=It));break;case 4:re=At[qt+1],jt=At[qt+2],Kt=At[qt+3],(re&192)===128&&(jt&192)===128&&(Kt&192)===128&&(It=(Yt&15)<<18|(re&63)<<12|(jt&63)<<6|Kt&63,It>65535&&It<1114112&&(Jt=It))}}Jt===null?(Jt=65533,Ft=1):Jt>65535&&(Jt-=65536,Ot.push(Jt>>>10&1023|55296),Jt=56320|Jt&1023),Ot.push(Jt),qt+=Ft}return yt(Ot)}const dt=4096;function yt(At){const st=At.length;if(st<=dt)return String.fromCharCode.apply(String,At);let mt="",Ot=0;for(;Ot<st;)mt+=String.fromCharCode.apply(String,At.slice(Ot,Ot+=dt));return mt}function Nt(At,st,mt){let Ot="";mt=Math.min(At.length,mt);for(let qt=st;qt<mt;++qt)Ot+=String.fromCharCode(At[qt]&127);return Ot}function Bt(At,st,mt){let Ot="";mt=Math.min(At.length,mt);for(let qt=st;qt<mt;++qt)Ot+=String.fromCharCode(At[qt]);return Ot}function St(At,st,mt){const Ot=At.length;(!st||st<0)&&(st=0),(!mt||mt<0||mt>Ot)&&(mt=Ot);let qt="";for(let Yt=st;Yt<mt;++Yt)qt+=ae[At[Yt]];return qt}function zt(At,st,mt){const Ot=At.slice(st,mt);let qt="";for(let Yt=0;Yt<Ot.length-1;Yt+=2)qt+=String.fromCharCode(Ot[Yt]+Ot[Yt+1]*256);return qt}$.prototype.slice=function(st,mt){const Ot=this.length;st=~~st,mt=mt===void 0?Ot:~~mt,st<0?(st+=Ot,st<0&&(st=0)):st>Ot&&(st=Ot),mt<0?(mt+=Ot,mt<0&&(mt=0)):mt>Ot&&(mt=Ot),mt<st&&(mt=st);const qt=this.subarray(st,mt);return Object.setPrototypeOf(qt,$.prototype),qt};function kt(At,st,mt){if(At%1!==0||At<0)throw new RangeError("offset is not uint");if(At+st>mt)throw new RangeError("Trying to access beyond buffer length")}$.prototype.readUintLE=$.prototype.readUIntLE=function(st,mt,Ot){st=st>>>0,mt=mt>>>0,Ot||kt(st,mt,this.length);let qt=this[st],Yt=1,Jt=0;for(;++Jt<mt&&(Yt*=256);)qt+=this[st+Jt]*Yt;return qt},$.prototype.readUintBE=$.prototype.readUIntBE=function(st,mt,Ot){st=st>>>0,mt=mt>>>0,Ot||kt(st,mt,this.length);let qt=this[st+--mt],Yt=1;for(;mt>0&&(Yt*=256);)qt+=this[st+--mt]*Yt;return qt},$.prototype.readUint8=$.prototype.readUInt8=function(st,mt){return st=st>>>0,mt||kt(st,1,this.length),this[st]},$.prototype.readUint16LE=$.prototype.readUInt16LE=function(st,mt){return st=st>>>0,mt||kt(st,2,this.length),this[st]|this[st+1]<<8},$.prototype.readUint16BE=$.prototype.readUInt16BE=function(st,mt){return st=st>>>0,mt||kt(st,2,this.length),this[st]<<8|this[st+1]},$.prototype.readUint32LE=$.prototype.readUInt32LE=function(st,mt){return st=st>>>0,mt||kt(st,4,this.length),(this[st]|this[st+1]<<8|this[st+2]<<16)+this[st+3]*16777216},$.prototype.readUint32BE=$.prototype.readUInt32BE=function(st,mt){return st=st>>>0,mt||kt(st,4,this.length),this[st]*16777216+(this[st+1]<<16|this[st+2]<<8|this[st+3])},$.prototype.readBigUInt64LE=se(function(st){st=st>>>0,ct(st,"offset");const mt=this[st],Ot=this[st+7];(mt===void 0||Ot===void 0)&&_t(st,this.length-8);const qt=mt+this[++st]*2**8+this[++st]*2**16+this[++st]*2**24,Yt=this[++st]+this[++st]*2**8+this[++st]*2**16+Ot*2**24;return BigInt(qt)+(BigInt(Yt)<<BigInt(32))}),$.prototype.readBigUInt64BE=se(function(st){st=st>>>0,ct(st,"offset");const mt=this[st],Ot=this[st+7];(mt===void 0||Ot===void 0)&&_t(st,this.length-8);const qt=mt*2**24+this[++st]*2**16+this[++st]*2**8+this[++st],Yt=this[++st]*2**24+this[++st]*2**16+this[++st]*2**8+Ot;return(BigInt(qt)<<BigInt(32))+BigInt(Yt)}),$.prototype.readIntLE=function(st,mt,Ot){st=st>>>0,mt=mt>>>0,Ot||kt(st,mt,this.length);let qt=this[st],Yt=1,Jt=0;for(;++Jt<mt&&(Yt*=256);)qt+=this[st+Jt]*Yt;return Yt*=128,qt>=Yt&&(qt-=Math.pow(2,8*mt)),qt},$.prototype.readIntBE=function(st,mt,Ot){st=st>>>0,mt=mt>>>0,Ot||kt(st,mt,this.length);let qt=mt,Yt=1,Jt=this[st+--qt];for(;qt>0&&(Yt*=256);)Jt+=this[st+--qt]*Yt;return Yt*=128,Jt>=Yt&&(Jt-=Math.pow(2,8*mt)),Jt},$.prototype.readInt8=function(st,mt){return st=st>>>0,mt||kt(st,1,this.length),this[st]&128?(255-this[st]+1)*-1:this[st]},$.prototype.readInt16LE=function(st,mt){st=st>>>0,mt||kt(st,2,this.length);const Ot=this[st]|this[st+1]<<8;return Ot&32768?Ot|4294901760:Ot},$.prototype.readInt16BE=function(st,mt){st=st>>>0,mt||kt(st,2,this.length);const Ot=this[st+1]|this[st]<<8;return Ot&32768?Ot|4294901760:Ot},$.prototype.readInt32LE=function(st,mt){return st=st>>>0,mt||kt(st,4,this.length),this[st]|this[st+1]<<8|this[st+2]<<16|this[st+3]<<24},$.prototype.readInt32BE=function(st,mt){return st=st>>>0,mt||kt(st,4,this.length),this[st]<<24|this[st+1]<<16|this[st+2]<<8|this[st+3]},$.prototype.readBigInt64LE=se(function(st){st=st>>>0,ct(st,"offset");const mt=this[st],Ot=this[st+7];(mt===void 0||Ot===void 0)&&_t(st,this.length-8);const qt=this[st+4]+this[st+5]*2**8+this[st+6]*2**16+(Ot<<24);return(BigInt(qt)<<BigInt(32))+BigInt(mt+this[++st]*2**8+this[++st]*2**16+this[++st]*2**24)}),$.prototype.readBigInt64BE=se(function(st){st=st>>>0,ct(st,"offset");const mt=this[st],Ot=this[st+7];(mt===void 0||Ot===void 0)&&_t(st,this.length-8);const qt=(mt<<24)+this[++st]*2**16+this[++st]*2**8+this[++st];return(BigInt(qt)<<BigInt(32))+BigInt(this[++st]*2**24+this[++st]*2**16+this[++st]*2**8+Ot)}),$.prototype.readFloatLE=function(st,mt){return st=st>>>0,mt||kt(st,4,this.length),g.read(this,st,!0,23,4)},$.prototype.readFloatBE=function(st,mt){return st=st>>>0,mt||kt(st,4,this.length),g.read(this,st,!1,23,4)},$.prototype.readDoubleLE=function(st,mt){return st=st>>>0,mt||kt(st,8,this.length),g.read(this,st,!0,52,8)},$.prototype.readDoubleBE=function(st,mt){return st=st>>>0,mt||kt(st,8,this.length),g.read(this,st,!1,52,8)};function Ct(At,st,mt,Ot,qt,Yt){if(!$.isBuffer(At))throw new TypeError('"buffer" argument must be a Buffer instance');if(st>qt||st<Yt)throw new RangeError('"value" argument is out of bounds');if(mt+Ot>At.length)throw new RangeError("Index out of range")}$.prototype.writeUintLE=$.prototype.writeUIntLE=function(st,mt,Ot,qt){if(st=+st,mt=mt>>>0,Ot=Ot>>>0,!qt){const Ft=Math.pow(2,8*Ot)-1;Ct(this,st,mt,Ot,Ft,0)}let Yt=1,Jt=0;for(this[mt]=st&255;++Jt<Ot&&(Yt*=256);)this[mt+Jt]=st/Yt&255;return mt+Ot},$.prototype.writeUintBE=$.prototype.writeUIntBE=function(st,mt,Ot,qt){if(st=+st,mt=mt>>>0,Ot=Ot>>>0,!qt){const Ft=Math.pow(2,8*Ot)-1;Ct(this,st,mt,Ot,Ft,0)}let Yt=Ot-1,Jt=1;for(this[mt+Yt]=st&255;--Yt>=0&&(Jt*=256);)this[mt+Yt]=st/Jt&255;return mt+Ot},$.prototype.writeUint8=$.prototype.writeUInt8=function(st,mt,Ot){return st=+st,mt=mt>>>0,Ot||Ct(this,st,mt,1,255,0),this[mt]=st&255,mt+1},$.prototype.writeUint16LE=$.prototype.writeUInt16LE=function(st,mt,Ot){return st=+st,mt=mt>>>0,Ot||Ct(this,st,mt,2,65535,0),this[mt]=st&255,this[mt+1]=st>>>8,mt+2},$.prototype.writeUint16BE=$.prototype.writeUInt16BE=function(st,mt,Ot){return st=+st,mt=mt>>>0,Ot||Ct(this,st,mt,2,65535,0),this[mt]=st>>>8,this[mt+1]=st&255,mt+2},$.prototype.writeUint32LE=$.prototype.writeUInt32LE=function(st,mt,Ot){return st=+st,mt=mt>>>0,Ot||Ct(this,st,mt,4,4294967295,0),this[mt+3]=st>>>24,this[mt+2]=st>>>16,this[mt+1]=st>>>8,this[mt]=st&255,mt+4},$.prototype.writeUint32BE=$.prototype.writeUInt32BE=function(st,mt,Ot){return st=+st,mt=mt>>>0,Ot||Ct(this,st,mt,4,4294967295,0),this[mt]=st>>>24,this[mt+1]=st>>>16,this[mt+2]=st>>>8,this[mt+3]=st&255,mt+4};function Ut(At,st,mt,Ot,qt){Mt(st,Ot,qt,At,mt,7);let Yt=Number(st&BigInt(4294967295));At[mt++]=Yt,Yt=Yt>>8,At[mt++]=Yt,Yt=Yt>>8,At[mt++]=Yt,Yt=Yt>>8,At[mt++]=Yt;let Jt=Number(st>>BigInt(32)&BigInt(4294967295));return At[mt++]=Jt,Jt=Jt>>8,At[mt++]=Jt,Jt=Jt>>8,At[mt++]=Jt,Jt=Jt>>8,At[mt++]=Jt,mt}function Dt(At,st,mt,Ot,qt){Mt(st,Ot,qt,At,mt,7);let Yt=Number(st&BigInt(4294967295));At[mt+7]=Yt,Yt=Yt>>8,At[mt+6]=Yt,Yt=Yt>>8,At[mt+5]=Yt,Yt=Yt>>8,At[mt+4]=Yt;let Jt=Number(st>>BigInt(32)&BigInt(4294967295));return At[mt+3]=Jt,Jt=Jt>>8,At[mt+2]=Jt,Jt=Jt>>8,At[mt+1]=Jt,Jt=Jt>>8,At[mt]=Jt,mt+8}$.prototype.writeBigUInt64LE=se(function(st,mt=0){return Ut(this,st,mt,BigInt(0),BigInt("0xffffffffffffffff"))}),$.prototype.writeBigUInt64BE=se(function(st,mt=0){return Dt(this,st,mt,BigInt(0),BigInt("0xffffffffffffffff"))}),$.prototype.writeIntLE=function(st,mt,Ot,qt){if(st=+st,mt=mt>>>0,!qt){const re=Math.pow(2,8*Ot-1);Ct(this,st,mt,Ot,re-1,-re)}let Yt=0,Jt=1,Ft=0;for(this[mt]=st&255;++Yt<Ot&&(Jt*=256);)st<0&&Ft===0&&this[mt+Yt-1]!==0&&(Ft=1),this[mt+Yt]=(st/Jt>>0)-Ft&255;return mt+Ot},$.prototype.writeIntBE=function(st,mt,Ot,qt){if(st=+st,mt=mt>>>0,!qt){const re=Math.pow(2,8*Ot-1);Ct(this,st,mt,Ot,re-1,-re)}let Yt=Ot-1,Jt=1,Ft=0;for(this[mt+Yt]=st&255;--Yt>=0&&(Jt*=256);)st<0&&Ft===0&&this[mt+Yt+1]!==0&&(Ft=1),this[mt+Yt]=(st/Jt>>0)-Ft&255;return mt+Ot},$.prototype.writeInt8=function(st,mt,Ot){return st=+st,mt=mt>>>0,Ot||Ct(this,st,mt,1,127,-128),st<0&&(st=255+st+1),this[mt]=st&255,mt+1},$.prototype.writeInt16LE=function(st,mt,Ot){return st=+st,mt=mt>>>0,Ot||Ct(this,st,mt,2,32767,-32768),this[mt]=st&255,this[mt+1]=st>>>8,mt+2},$.prototype.writeInt16BE=function(st,mt,Ot){return st=+st,mt=mt>>>0,Ot||Ct(this,st,mt,2,32767,-32768),this[mt]=st>>>8,this[mt+1]=st&255,mt+2},$.prototype.writeInt32LE=function(st,mt,Ot){return st=+st,mt=mt>>>0,Ot||Ct(this,st,mt,4,2147483647,-2147483648),this[mt]=st&255,this[mt+1]=st>>>8,this[mt+2]=st>>>16,this[mt+3]=st>>>24,mt+4},$.prototype.writeInt32BE=function(st,mt,Ot){return st=+st,mt=mt>>>0,Ot||Ct(this,st,mt,4,2147483647,-2147483648),st<0&&(st=4294967295+st+1),this[mt]=st>>>24,this[mt+1]=st>>>16,this[mt+2]=st>>>8,this[mt+3]=st&255,mt+4},$.prototype.writeBigInt64LE=se(function(st,mt=0){return Ut(this,st,mt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),$.prototype.writeBigInt64BE=se(function(st,mt=0){return Dt(this,st,mt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Tt(At,st,mt,Ot,qt,Yt){if(mt+Ot>At.length)throw new RangeError("Index out of range");if(mt<0)throw new RangeError("Index out of range")}function Rt(At,st,mt,Ot,qt){return st=+st,mt=mt>>>0,qt||Tt(At,st,mt,4),g.write(At,st,mt,Ot,23,4),mt+4}$.prototype.writeFloatLE=function(st,mt,Ot){return Rt(this,st,mt,!0,Ot)},$.prototype.writeFloatBE=function(st,mt,Ot){return Rt(this,st,mt,!1,Ot)};function Lt(At,st,mt,Ot,qt){return st=+st,mt=mt>>>0,qt||Tt(At,st,mt,8),g.write(At,st,mt,Ot,52,8),mt+8}$.prototype.writeDoubleLE=function(st,mt,Ot){return Lt(this,st,mt,!0,Ot)},$.prototype.writeDoubleBE=function(st,mt,Ot){return Lt(this,st,mt,!1,Ot)},$.prototype.copy=function(st,mt,Ot,qt){if(!$.isBuffer(st))throw new TypeError("argument should be a Buffer");if(Ot||(Ot=0),!qt&&qt!==0&&(qt=this.length),mt>=st.length&&(mt=st.length),mt||(mt=0),qt>0&&qt<Ot&&(qt=Ot),qt===Ot||st.length===0||this.length===0)return 0;if(mt<0)throw new RangeError("targetStart out of bounds");if(Ot<0||Ot>=this.length)throw new RangeError("Index out of range");if(qt<0)throw new RangeError("sourceEnd out of bounds");qt>this.length&&(qt=this.length),st.length-mt<qt-Ot&&(qt=st.length-mt+Ot);const Yt=qt-Ot;return this===st&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(mt,Ot,qt):Uint8Array.prototype.set.call(st,this.subarray(Ot,qt),mt),Yt},$.prototype.fill=function(st,mt,Ot,qt){if(typeof st=="string"){if(typeof mt=="string"?(qt=mt,mt=0,Ot=this.length):typeof Ot=="string"&&(qt=Ot,Ot=this.length),qt!==void 0&&typeof qt!="string")throw new TypeError("encoding must be a string");if(typeof qt=="string"&&!$.isEncoding(qt))throw new TypeError("Unknown encoding: "+qt);if(st.length===1){const Jt=st.charCodeAt(0);(qt==="utf8"&&Jt<128||qt==="latin1")&&(st=Jt)}}else typeof st=="number"?st=st&255:typeof st=="boolean"&&(st=Number(st));if(mt<0||this.length<mt||this.length<Ot)throw new RangeError("Out of range index");if(Ot<=mt)return this;mt=mt>>>0,Ot=Ot===void 0?this.length:Ot>>>0,st||(st=0);let Yt;if(typeof st=="number")for(Yt=mt;Yt<Ot;++Yt)this[Yt]=st;else{const Jt=$.isBuffer(st)?st:$.from(st,qt),Ft=Jt.length;if(Ft===0)throw new TypeError('The value "'+st+'" is invalid for argument "value"');for(Yt=0;Yt<Ot-mt;++Yt)this[Yt+mt]=Jt[Yt%Ft]}return this};const Ht={};function Wt(At,st,mt){Ht[At]=class extends mt{constructor(){super(),Object.defineProperty(this,"message",{value:st.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${At}]`,this.stack,delete this.name}get code(){return At}set code(qt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:qt,writable:!0})}toString(){return`${this.name} [${At}]: ${this.message}`}}}Wt("ERR_BUFFER_OUT_OF_BOUNDS",function(At){return At?`${At} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Wt("ERR_INVALID_ARG_TYPE",function(At,st){return`The "${At}" argument must be of type number. Received type ${typeof st}`},TypeError),Wt("ERR_OUT_OF_RANGE",function(At,st,mt){let Ot=`The value of "${At}" is out of range.`,qt=mt;return Number.isInteger(mt)&&Math.abs(mt)>2**32?qt=Pt(String(mt)):typeof mt=="bigint"&&(qt=String(mt),(mt>BigInt(2)**BigInt(32)||mt<-(BigInt(2)**BigInt(32)))&&(qt=Pt(qt)),qt+="n"),Ot+=` It must be ${st}. Received ${qt}`,Ot},RangeError);function Pt(At){let st="",mt=At.length;const Ot=At[0]==="-"?1:0;for(;mt>=Ot+4;mt-=3)st=`_${At.slice(mt-3,mt)}${st}`;return`${At.slice(0,mt)}${st}`}function nt(At,st,mt){ct(st,"offset"),(At[st]===void 0||At[st+mt]===void 0)&&_t(st,At.length-(mt+1))}function Mt(At,st,mt,Ot,qt,Yt){if(At>mt||At<st){const Jt=typeof st=="bigint"?"n":"";let Ft;throw st===0||st===BigInt(0)?Ft=`>= 0${Jt} and < 2${Jt} ** ${(Yt+1)*8}${Jt}`:Ft=`>= -(2${Jt} ** ${(Yt+1)*8-1}${Jt}) and < 2 ** ${(Yt+1)*8-1}${Jt}`,new Ht.ERR_OUT_OF_RANGE("value",Ft,At)}nt(Ot,qt,Yt)}function ct(At,st){if(typeof At!="number")throw new Ht.ERR_INVALID_ARG_TYPE(st,"number",At)}function _t(At,st,mt){throw Math.floor(At)!==At?(ct(At,mt),new Ht.ERR_OUT_OF_RANGE("offset","an integer",At)):st<0?new Ht.ERR_BUFFER_OUT_OF_BOUNDS:new Ht.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${st}`,At)}const bt=/[^+/0-9A-Za-z-_]/g;function xt(At){if(At=At.split("=")[0],At=At.trim().replace(bt,""),At.length<2)return"";for(;At.length%4!==0;)At=At+"=";return At}function $t(At,st){st=st||1/0;let mt;const Ot=At.length;let qt=null;const Yt=[];for(let Jt=0;Jt<Ot;++Jt){if(mt=At.charCodeAt(Jt),mt>55295&&mt<57344){if(!qt){if(mt>56319){(st-=3)>-1&&Yt.push(239,191,189);continue}else if(Jt+1===Ot){(st-=3)>-1&&Yt.push(239,191,189);continue}qt=mt;continue}if(mt<56320){(st-=3)>-1&&Yt.push(239,191,189),qt=mt;continue}mt=(qt-55296<<10|mt-56320)+65536}else qt&&(st-=3)>-1&&Yt.push(239,191,189);if(qt=null,mt<128){if((st-=1)<0)break;Yt.push(mt)}else if(mt<2048){if((st-=2)<0)break;Yt.push(mt>>6|192,mt&63|128)}else if(mt<65536){if((st-=3)<0)break;Yt.push(mt>>12|224,mt>>6&63|128,mt&63|128)}else if(mt<1114112){if((st-=4)<0)break;Yt.push(mt>>18|240,mt>>12&63|128,mt>>6&63|128,mt&63|128)}else throw new Error("Invalid code point")}return Yt}function rt(At){const st=[];for(let mt=0;mt<At.length;++mt)st.push(At.charCodeAt(mt)&255);return st}function ft(At,st){let mt,Ot,qt;const Yt=[];for(let Jt=0;Jt<At.length&&!((st-=2)<0);++Jt)mt=At.charCodeAt(Jt),Ot=mt>>8,qt=mt%256,Yt.push(qt),Yt.push(Ot);return Yt}function wt(At){return m.toByteArray(xt(At))}function vt(At,st,mt,Ot){let qt;for(qt=0;qt<Ot&&!(qt+mt>=st.length||qt>=At.length);++qt)st[qt+mt]=At[qt];return qt}function Gt(At,st){return At instanceof st||At!=null&&At.constructor!=null&&At.constructor.name!=null&&At.constructor.name===st.name}function Qt(At){return At!==At}const ae=function(){const At="0123456789abcdef",st=new Array(256);for(let mt=0;mt<16;++mt){const Ot=mt*16;for(let qt=0;qt<16;++qt)st[Ot+qt]=At[mt]+At[qt]}return st}();function se(At){return typeof BigInt>"u"?ie:At}function ie(){throw new Error("BigInt not supported")}}(buffer)),buffer}var bufferExports=requireBuffer(),root_1$2=template('<div class="input-group"><span class="input-group-text">TYPE</span> <span class="form-control"> </span></div> <br>',1),root_2=template('<div class="input-group"><span class="input-group-text">DAMAGE</span> <span class="form-control"> </span></div> <br>',1),root_3=template('<div class="card"><div class="card-header">AFFECT</div> <div class="card-body"> </div></div>'),root_4=template("<span>No Data</span>"),root_5=template('<div class="input-group"><span class="input-group-text">TYPE</span> <span class="form-control"> </span></div> <br>',1),root_6=template('<div class="input-group"><span class="input-group-text">DAMAGE</span> <span class="form-control"> </span></div> <br>',1),root_7=template('<div class="card"><div class="card-header">AFFECT</div> <div class="card-body"> </div></div>'),root_8=template("<span>No Data</span>"),root_9=template('<div class="input-group"><span class="input-group-text">TYPE</span> <span class="form-control"> </span></div> <br>',1),root_10=template('<div class="input-group"><span class="input-group-text">DAMAGE</span> <span class="form-control"> </span></div> <br>',1),root_11=template('<div class="card"><div class="card-header">AFFECT</div> <div class="card-body"> </div></div>'),root_12=template("<span>No Data</span>"),root$3=template('<div class="card chip svelte-ltujng"><div class="card-header"><div class="id-container svelte-ltujng"><span>ID -</span><span class="id svelte-ltujng"> </span></div> <div class="name-container svelte-ltujng"> </div> <div class="class-container svelte-ltujng"><span> </span></div></div> <div class="card-body"><div class="image-container card svelte-ltujng"><div class="card-header svelte-ltujng">Chip Art</div> <div class="card-body"><img alt="No Art" class="svelte-ltujng"></div></div> <div class="image-container card svelte-ltujng"><div class="card-header svelte-ltujng">Attack Pattern</div> <div class="card-body"><img alt="No Art" class="svelte-ltujng"></div></div> <div class="info-container svelte-ltujng"><div><span class="title svelte-ltujng">PET</span> <hr> <!> <!> <!> <!></div> <br> <div><span class="title svelte-ltujng">ARCADE</span> <hr> <!> <!> <!> <!></div> <br> <div><span class="title svelte-ltujng">GBA</span> <hr> <!> <!> <!> <!></div></div></div></div>');function Chip(d,m){push(m,!0);let g=prop(m,"chipInfo",15);async function w(){const ct="images/no-data.png";try{const _t=await axios.get(`images/chips-hi-rez/${g().id}.png`,{responseType:"arraybuffer"});if(_t.headers["content-type"]=="image/png"){const xt=`data:image/png;base64,${bufferExports.Buffer.from(_t.data,"binary").toString("base64")}`;g(g().chipArt=xt,!0)}else g(g().chipArt=ct,!0)}catch(_t){console.error(_t),g(g().chipArt=ct,!0)}try{const _t=await axios.get(`images/chips-attack-pattern/${g().id}.png`,{responseType:"arraybuffer"});if(_t.headers["content-type"]=="image/png"){const xt=`data:image/png;base64,${bufferExports.Buffer.from(_t.data,"binary").toString("base64")}`;g(g().attackArt=xt,!0)}else g(g().attackArt=ct,!0)}catch(_t){console.error(_t),g(g().attackArt=ct,!0)}}user_effect(()=>{w()});var I=root$3(),P=child(I),F=child(P),$=sibling(child(F)),D=child($),U=sibling(F,2),j=child(U);template_effect(()=>set_text(j,g().name.toUpperCase()));var Z=sibling(U,2),G=child(Z),H=child(G),q=sibling(P,2),W=child(q),Q=sibling(child(W),2),J=child(Q),K=sibling(W,2),V=sibling(child(K),2),tt=child(V),X=sibling(K,2),ot=child(X),it=sibling(child(ot),4);{var lt=ct=>{var _t=root_1$2(),bt=first_child(_t),xt=sibling(child(bt),2),$t=child(xt);template_effect(()=>set_text($t,g().pet.type)),append(ct,_t)};if_block(it,ct=>{g().pet.type&&ct(lt)})}var at=sibling(it,2);{var ht=ct=>{var _t=root_2(),bt=first_child(_t),xt=sibling(child(bt),2),$t=child(xt);template_effect(()=>set_text($t,g().pet.damage)),append(ct,_t)};if_block(at,ct=>{g().pet.damage>0&&ct(ht)})}var et=sibling(at,2);{var ut=ct=>{var _t=root_3(),bt=sibling(child(_t),2),xt=child(bt);template_effect(()=>set_text(xt,g().pet.affect)),append(ct,_t)};if_block(et,ct=>{g().pet.affect&&ct(ut)})}var Et=sibling(et,2);{var gt=ct=>{var _t=root_4();append(ct,_t)};if_block(Et,ct=>{!g().pet.type&&g().pet.damage==0&&!g().pet.affect&&ct(gt)})}var dt=sibling(ot,4),yt=sibling(child(dt),4);{var Nt=ct=>{var _t=root_5(),bt=first_child(_t),xt=sibling(child(bt),2),$t=child(xt);template_effect(()=>set_text($t,g().bs.type)),append(ct,_t)};if_block(yt,ct=>{g().bcs.type&&ct(Nt)})}var Bt=sibling(yt,2);{var St=ct=>{var _t=root_6(),bt=first_child(_t),xt=sibling(child(bt),2),$t=child(xt);template_effect(()=>set_text($t,g().bcs.damage)),append(ct,_t)};if_block(Bt,ct=>{g().bcs.damage>0&&ct(St)})}var zt=sibling(Bt,2);{var kt=ct=>{var _t=root_7(),bt=sibling(child(_t),2),xt=child(bt);template_effect(()=>set_text(xt,g().bcs.affect)),append(ct,_t)};if_block(zt,ct=>{g().bcs.affect&&ct(kt)})}var Ct=sibling(zt,2);{var Ut=ct=>{var _t=root_8();append(ct,_t)};if_block(Ct,ct=>{!g().bcs.type&&g().bcs.damage==0&&!g().bcs.affect&&ct(Ut)})}var Dt=sibling(dt,4),Tt=sibling(child(Dt),4);{var Rt=ct=>{var _t=root_9(),bt=first_child(_t),xt=sibling(child(bt),2),$t=child(xt);template_effect(()=>set_text($t,g().gba.type)),append(ct,_t)};if_block(Tt,ct=>{g().gba.type&&ct(Rt)})}var Lt=sibling(Tt,2);{var Ht=ct=>{var _t=root_10(),bt=first_child(_t),xt=sibling(child(bt),2),$t=child(xt);template_effect(()=>set_text($t,g().gba.damage)),append(ct,_t)};if_block(Lt,ct=>{g().gba.damage>0&&ct(Ht)})}var Wt=sibling(Lt,2);{var Pt=ct=>{var _t=root_11(),bt=sibling(child(_t),2),xt=child(bt);template_effect(()=>set_text(xt,g().gba.affect)),append(ct,_t)};if_block(Wt,ct=>{g().gba.affect&&ct(Pt)})}var nt=sibling(Wt,2);{var Mt=ct=>{var _t=root_12();append(ct,_t)};if_block(nt,ct=>{!g().gba.type&&g().gba.damage==0&&!g().gba.affect&&ct(Mt)})}template_effect(()=>{set_text(D,g().id),set_text(H,g().class),set_attribute(J,"src",g().chipArt),set_attribute(tt,"src",g().attackArt)}),append(d,I),pop()}var root_1$1=template("<!> <!>",1),root$2=template('<div class="chip-list-container svelte-1r875up"><!></div>');function ChipLibrary(d,m){push(m,!0);let g=state(proxy([])),w=state(proxy([])),I=state(10);async function P(){try{let j=await axios.get("./link-chips.json");set(g,proxy(j.data)),F()}catch(j){console.error(j),publish("toasts",{type:"error",content:"Failed to load chip list."})}}function F(j){set(w,proxy(get(g))),j&&(set(w,proxy(get(w).filter(Z=>{let G,H=j;if(j.includes(":")?(G=[String(Z[j.split(":")[0]]).toLowerCase()],H=j.split(":")[1]):G=[Z.name.toLowerCase(),Z.class.toLowerCase(),Z.id],String(G).includes(H.toLowerCase()))return Z}))),get(w).length<10?set(I,proxy(get(w).length)):set(I,10))}onMount(()=>{window.onscroll=function(){window.innerHeight+Math.round(window.scrollY)>=document.body.offsetHeight&&get(I)+10<=get(w).length&&set(I,get(I)+10)},P()});var $=root$2(),D=child($);{var U=j=>{var Z=root_1$1(),G=first_child(Z);Search(G,{get port(){return m.port},filter:F});var H=sibling(G,2);each(H,17,()=>({length:get(I)}),index,(q,W,Q)=>{Chip(q,{get chipInfo(){return get(w)[Q]},set chipInfo(J){get(w)[Q]=J}})}),append(j,Z)};if_block(D,j=>{get(g).length>0&&j(U)})}append(d,$),pop()}var root_1=template('<div><div><span></span></div> <div class="toast-content svelte-106kavp"> </div></div>'),root$1=template('<div class="toast-container svelte-106kavp"></div>');function Toasts(d,m){push(m,!0);const g={error:{bgColor:"danger",textColor:"white",icon:"fa-circle-xmark"},warning:{bgColor:"warning",textColor:"black",icon:"fa-triangle-exclamation"},success:{bgColor:"success",textColor:"white",icon:"fa-circle-check"},info:{bgColor:"secondary",textColor:"white",icon:"fa-circle-info"}};let w=state(proxy([])),I;const P=setInterval(()=>{const $=Date.now();set(w,proxy(get(w).filter(D=>{if($-D.created<5e3)return D})))},3e3);onMount(()=>{I=subscribe("toasts",$=>{get(w).push({id:crypto.randomUUID(),type:$.type,content:$.content,created:Date.now()})})}),onDestroy(()=>{I(),clearInterval(P)});var F=root$1();each(F,21,()=>[...get(w)].reverse(),index,($,D)=>{var U=root_1(),j=child(U),Z=child(j),G=sibling(j,2),H=child(G);template_effect(()=>{set_attribute(U,"id",`toast-${get(D).id??""}`),set_class(U,`toast-box bg-${g[get(D).type].bgColor??""} svelte-106kavp`),set_attribute(U,"style",`color: ${g[get(D).type].textColor??""}`),set_class(Z,`fa-solid ${g[get(D).type].icon??""} svelte-106kavp`),set_text(H,get(D).content)}),append($,U)}),append(d,F),pop()}var root=template('<div><div class="sidebar p-3 svelte-1jlvkpf"><!></div> <div class="content svelte-1jlvkpf"><!></div> <!></div>');function App(d){let m=state(void 0),g=state("");var w=root(),I=child(w),P=child(I);SideBar(P,{get port(){return get(m)},set port(Z){set(m,proxy(Z))},get page(){return get(g)},set page(Z){set(g,proxy(Z))}});var F=sibling(I,2),$=child(F);{var D=Z=>{ChipLibrary(Z,{get port(){return get(m)}})},U=Z=>{NaviEditor(Z,{get port(){return get(m)}})};if_block($,Z=>{get(g)=="library"?Z(D):Z(U,!1)})}var j=sibling(F,2);Toasts(j,{}),append(d,w)}mount(App,{target:document.getElementById("app")})});export default ze();
