var Fe=Object.defineProperty;var Oe=(d,m,g)=>m in d?Fe(d,m,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[m]=g;var De=(d,m)=>()=>(m||d((m={exports:{}}).exports,m),m.exports);var fe=(d,m,g)=>Oe(d,typeof m!="symbol"?m+"":m,g);var ze=De((exports,module)=>{(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const I of document.querySelectorAll('link[rel="modulepreload"]'))w(I);new MutationObserver(I=>{for(const P of I)if(P.type==="childList")for(const $ of P.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&w($)}).observe(document,{childList:!0,subtree:!0});function g(I){const P={};return I.integrity&&(P.integrity=I.integrity),I.referrerPolicy&&(P.referrerPolicy=I.referrerPolicy),I.crossOrigin==="use-credentials"?P.credentials="include":I.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function w(I){if(I.ep)return;I.ep=!0;const P=g(I);fetch(I.href,P)}})();const DEV=!1;var is_array=Array.isArray,index_of=Array.prototype.indexOf,array_from=Array.from,define_property=Object.defineProperty,get_descriptor=Object.getOwnPropertyDescriptor,get_descriptors=Object.getOwnPropertyDescriptors,object_prototype=Object.prototype,array_prototype=Array.prototype,get_prototype_of=Object.getPrototypeOf;function run(d){return d()}function run_all(d){for(var m=0;m<d.length;m++)d[m]()}const DERIVED=2,EFFECT=4,RENDER_EFFECT=8,BLOCK_EFFECT=16,BRANCH_EFFECT=32,ROOT_EFFECT=64,BOUNDARY_EFFECT=128,UNOWNED=256,DISCONNECTED=512,CLEAN=1024,DIRTY$1=2048,MAYBE_DIRTY=4096,INERT=8192,DESTROYED=16384,EFFECT_RAN=32768,EFFECT_TRANSPARENT=65536,LEGACY_DERIVED_PROP=1<<17,HEAD_EFFECT=1<<19,EFFECT_HAS_DERIVED=1<<20,STATE_SYMBOL=Symbol("$state"),LEGACY_PROPS=Symbol("legacy props");function equals(d){return d===this.v}function safe_not_equal(d,m){return d!=d?m==m:d!==m||d!==null&&typeof d=="object"||typeof d=="function"}function safe_equals(d){return!safe_not_equal(d,this.v)}function effect_in_teardown(d){throw new Error("https://svelte.dev/e/effect_in_teardown")}function effect_in_unowned_derived(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function effect_orphan(d){throw new Error("https://svelte.dev/e/effect_orphan")}function effect_update_depth_exceeded(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function props_invalid_value(d){throw new Error("https://svelte.dev/e/props_invalid_value")}function state_descriptors_fixed(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function state_prototype_fixed(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function state_unsafe_local_read(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function state_unsafe_mutation(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let legacy_mode_flag=!1,tracing_mode_flag=!1;function enable_legacy_mode_flag(){legacy_mode_flag=!0}const EACH_ITEM_REACTIVE=1,EACH_INDEX_REACTIVE=2,EACH_ITEM_IMMUTABLE=16,PROPS_IS_IMMUTABLE=1,PROPS_IS_RUNES=2,PROPS_IS_UPDATED=4,PROPS_IS_BINDABLE=8,PROPS_IS_LAZY_INITIAL=16,TEMPLATE_FRAGMENT=1,TEMPLATE_USE_IMPORT_NODE=2,UNINITIALIZED=Symbol();function source(d,m){var g={f:0,v:d,reactions:null,equals,rv:0,wv:0};return g}function state(d){return push_derived_source(source(d))}function mutable_source(d,m=!1){var w;const g=source(d);return m||(g.equals=safe_equals),legacy_mode_flag&&component_context!==null&&component_context.l!==null&&((w=component_context.l).s??(w.s=[])).push(g),g}function mutable_state(d,m=!1){return push_derived_source(mutable_source(d,m))}function push_derived_source(d){return active_reaction!==null&&active_reaction.f&DERIVED&&(derived_sources===null?set_derived_sources([d]):derived_sources.push(d)),d}function mutate(d,m){return set(d,untrack(()=>get(d))),m}function set(d,m){return active_reaction!==null&&is_runes()&&active_reaction.f&(DERIVED|BLOCK_EFFECT)&&(derived_sources===null||!derived_sources.includes(d))&&state_unsafe_mutation(),internal_set(d,m)}function internal_set(d,m){return d.equals(m)||(d.v,d.v=m,d.wv=increment_write_version(),mark_reactions(d,DIRTY$1),is_runes()&&active_effect!==null&&active_effect.f&CLEAN&&!(active_effect.f&(BRANCH_EFFECT|ROOT_EFFECT))&&(untracked_writes===null?set_untracked_writes([d]):untracked_writes.push(d))),m}function mark_reactions(d,m){var g=d.reactions;if(g!==null)for(var w=is_runes(),I=g.length,P=0;P<I;P++){var $=g[P],F=$.f;F&DIRTY$1||!w&&$===active_effect||(set_signal_status($,m),F&(CLEAN|UNOWNED)&&(F&DERIVED?mark_reactions($,MAYBE_DIRTY):schedule_effect($)))}}let hydrating=!1;function proxy(d,m=null,g){if(typeof d!="object"||d===null||STATE_SYMBOL in d)return d;const w=get_prototype_of(d);if(w!==object_prototype&&w!==array_prototype)return d;var I=new Map,P=is_array(d),$=source(0);P&&I.set("length",source(d.length));var F;return new Proxy(d,{defineProperty(D,U,j){(!("value"in j)||j.configurable===!1||j.enumerable===!1||j.writable===!1)&&state_descriptors_fixed();var Z=I.get(U);return Z===void 0?(Z=source(j.value),I.set(U,Z)):set(Z,proxy(j.value,F)),!0},deleteProperty(D,U){var j=I.get(U);if(j===void 0)U in D&&I.set(U,source(UNINITIALIZED));else{if(P&&typeof U=="string"){var Z=I.get("length"),G=Number(U);Number.isInteger(G)&&G<Z.v&&set(Z,G)}set(j,UNINITIALIZED),update_version($)}return!0},get(D,U,j){var W;if(U===STATE_SYMBOL)return d;var Z=I.get(U),G=U in D;if(Z===void 0&&(!G||(W=get_descriptor(D,U))!=null&&W.writable)&&(Z=source(proxy(G?D[U]:UNINITIALIZED,F)),I.set(U,Z)),Z!==void 0){var H=get(Z);return H===UNINITIALIZED?void 0:H}return Reflect.get(D,U,j)},getOwnPropertyDescriptor(D,U){var j=Reflect.getOwnPropertyDescriptor(D,U);if(j&&"value"in j){var Z=I.get(U);Z&&(j.value=get(Z))}else if(j===void 0){var G=I.get(U),H=G==null?void 0:G.v;if(G!==void 0&&H!==UNINITIALIZED)return{enumerable:!0,configurable:!0,value:H,writable:!0}}return j},has(D,U){var H;if(U===STATE_SYMBOL)return!0;var j=I.get(U),Z=j!==void 0&&j.v!==UNINITIALIZED||Reflect.has(D,U);if(j!==void 0||active_effect!==null&&(!Z||(H=get_descriptor(D,U))!=null&&H.writable)){j===void 0&&(j=source(Z?proxy(D[U],F):UNINITIALIZED),I.set(U,j));var G=get(j);if(G===UNINITIALIZED)return!1}return Z},set(D,U,j,Z){var V;var G=I.get(U),H=U in D;if(P&&U==="length")for(var W=j;W<G.v;W+=1){var q=I.get(W+"");q!==void 0?set(q,UNINITIALIZED):W in D&&(q=source(UNINITIALIZED),I.set(W+"",q))}G===void 0?(!H||(V=get_descriptor(D,U))!=null&&V.writable)&&(G=source(void 0),set(G,proxy(j,F)),I.set(U,G)):(H=G.v!==UNINITIALIZED,set(G,proxy(j,F)));var Q=Reflect.getOwnPropertyDescriptor(D,U);if(Q!=null&&Q.set&&Q.set.call(Z,j),!H){if(P&&typeof U=="string"){var et=I.get("length"),J=Number(U);Number.isInteger(J)&&J>=et.v&&set(et,J+1)}update_version($)}return!0},ownKeys(D){get($);var U=Reflect.ownKeys(D).filter(G=>{var H=I.get(G);return H===void 0||H.v!==UNINITIALIZED});for(var[j,Z]of I)Z.v!==UNINITIALIZED&&!(j in D)&&U.push(j);return U},setPrototypeOf(){state_prototype_fixed()}})}function update_version(d,m=1){set(d,d.v+m)}var $window,first_child_getter,next_sibling_getter;function init_operations(){if($window===void 0){$window=window;var d=Element.prototype,m=Node.prototype;first_child_getter=get_descriptor(m,"firstChild").get,next_sibling_getter=get_descriptor(m,"nextSibling").get,d.__click=void 0,d.__className="",d.__attributes=null,d.__styles=null,d.__e=void 0,Text.prototype.__t=void 0}}function create_text(d=""){return document.createTextNode(d)}function get_first_child(d){return first_child_getter.call(d)}function get_next_sibling(d){return next_sibling_getter.call(d)}function child(d,m){return get_first_child(d)}function first_child(d,m){{var g=get_first_child(d);return g instanceof Comment&&g.data===""?get_next_sibling(g):g}}function sibling(d,m=1,g=!1){let w=d;for(;m--;)w=get_next_sibling(w);return w}function clear_text_content(d){d.textContent=""}function derived(d){var m=DERIVED|DIRTY$1;active_effect===null?m|=UNOWNED:active_effect.f|=EFFECT_HAS_DERIVED;var g=active_reaction!==null&&active_reaction.f&DERIVED?active_reaction:null;const w={children:null,ctx:component_context,deps:null,equals,f:m,fn:d,reactions:null,rv:0,v:null,wv:0,parent:g??active_effect};return g!==null&&(g.children??(g.children=[])).push(w),w}function derived_safe_equal(d){const m=derived(d);return m.equals=safe_equals,m}function destroy_derived_children(d){var m=d.children;if(m!==null){d.children=null;for(var g=0;g<m.length;g+=1){var w=m[g];w.f&DERIVED?destroy_derived(w):destroy_effect(w)}}}function get_derived_parent_effect(d){for(var m=d.parent;m!==null;){if(!(m.f&DERIVED))return m;m=m.parent}return null}function execute_derived(d){var m,g=active_effect;set_active_effect(get_derived_parent_effect(d));try{destroy_derived_children(d),m=update_reaction(d)}finally{set_active_effect(g)}return m}function update_derived(d){var m=execute_derived(d),g=(skip_reaction||d.f&UNOWNED)&&d.deps!==null?MAYBE_DIRTY:CLEAN;set_signal_status(d,g),d.equals(m)||(d.v=m,d.wv=increment_write_version())}function destroy_derived(d){destroy_derived_children(d),remove_reactions(d,0),set_signal_status(d,DESTROYED),d.v=d.children=d.deps=d.ctx=d.reactions=null}function validate_effect(d){active_effect===null&&active_reaction===null&&effect_orphan(),active_reaction!==null&&active_reaction.f&UNOWNED&&effect_in_unowned_derived(),is_destroying_effect&&effect_in_teardown()}function push_effect(d,m){var g=m.last;g===null?m.last=m.first=d:(g.next=d,d.prev=g,m.last=d)}function create_effect(d,m,g,w=!0){var I=(d&ROOT_EFFECT)!==0,P=active_effect,$={ctx:component_context,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:d|DIRTY$1,first:null,fn:m,last:null,next:null,parent:I?null:P,prev:null,teardown:null,transitions:null,wv:0};if(g){var F=is_flushing_effect;try{set_is_flushing_effect(!0),update_effect($),$.f|=EFFECT_RAN}catch(j){throw destroy_effect($),j}finally{set_is_flushing_effect(F)}}else m!==null&&schedule_effect($);var D=g&&$.deps===null&&$.first===null&&$.nodes_start===null&&$.teardown===null&&($.f&(EFFECT_HAS_DERIVED|BOUNDARY_EFFECT))===0;if(!D&&!I&&w&&(P!==null&&push_effect($,P),active_reaction!==null&&active_reaction.f&DERIVED)){var U=active_reaction;(U.children??(U.children=[])).push($)}return $}function teardown(d){const m=create_effect(RENDER_EFFECT,null,!1);return set_signal_status(m,CLEAN),m.teardown=d,m}function user_effect(d){validate_effect();var m=active_effect!==null&&(active_effect.f&BRANCH_EFFECT)!==0&&component_context!==null&&!component_context.m;if(m){var g=component_context;(g.e??(g.e=[])).push({fn:d,effect:active_effect,reaction:active_reaction})}else{var w=effect(d);return w}}function user_pre_effect(d){return validate_effect(),render_effect(d)}function component_root(d){const m=create_effect(ROOT_EFFECT,d,!0);return(g={})=>new Promise(w=>{g.outro?pause_effect(m,()=>{destroy_effect(m),w(void 0)}):(destroy_effect(m),w(void 0))})}function effect(d){return create_effect(EFFECT,d,!1)}function render_effect(d){return create_effect(RENDER_EFFECT,d,!0)}function template_effect(d){return block(d)}function block(d,m=0){return create_effect(RENDER_EFFECT|BLOCK_EFFECT|m,d,!0)}function branch(d,m=!0){return create_effect(RENDER_EFFECT|BRANCH_EFFECT,d,!0,m)}function execute_effect_teardown(d){var m=d.teardown;if(m!==null){const g=is_destroying_effect,w=active_reaction;set_is_destroying_effect(!0),set_active_reaction(null);try{m.call(null)}finally{set_is_destroying_effect(g),set_active_reaction(w)}}}function destroy_effect_deriveds(d){var m=d.deriveds;if(m!==null){d.deriveds=null;for(var g=0;g<m.length;g+=1)destroy_derived(m[g])}}function destroy_effect_children(d,m=!1){var g=d.first;for(d.first=d.last=null;g!==null;){var w=g.next;destroy_effect(g,m),g=w}}function destroy_block_effect_children(d){for(var m=d.first;m!==null;){var g=m.next;m.f&BRANCH_EFFECT||destroy_effect(m),m=g}}function destroy_effect(d,m=!0){var g=!1;if((m||d.f&HEAD_EFFECT)&&d.nodes_start!==null){for(var w=d.nodes_start,I=d.nodes_end;w!==null;){var P=w===I?null:get_next_sibling(w);w.remove(),w=P}g=!0}destroy_effect_children(d,m&&!g),destroy_effect_deriveds(d),remove_reactions(d,0),set_signal_status(d,DESTROYED);var $=d.transitions;if($!==null)for(const D of $)D.stop();execute_effect_teardown(d);var F=d.parent;F!==null&&F.first!==null&&unlink_effect(d),d.next=d.prev=d.teardown=d.ctx=d.deps=d.fn=d.nodes_start=d.nodes_end=null}function unlink_effect(d){var m=d.parent,g=d.prev,w=d.next;g!==null&&(g.next=w),w!==null&&(w.prev=g),m!==null&&(m.first===d&&(m.first=w),m.last===d&&(m.last=g))}function pause_effect(d,m){var g=[];pause_children(d,g,!0),run_out_transitions(g,()=>{destroy_effect(d),m&&m()})}function run_out_transitions(d,m){var g=d.length;if(g>0){var w=()=>--g||m();for(var I of d)I.out(w)}else m()}function pause_children(d,m,g){if(!(d.f&INERT)){if(d.f^=INERT,d.transitions!==null)for(const $ of d.transitions)($.is_global||g)&&m.push($);for(var w=d.first;w!==null;){var I=w.next,P=(w.f&EFFECT_TRANSPARENT)!==0||(w.f&BRANCH_EFFECT)!==0;pause_children(w,m,P?g:!1),w=I}}}function resume_effect(d){resume_children(d,!0)}function resume_children(d,m){if(d.f&INERT){d.f^=INERT,d.f&CLEAN||(d.f^=CLEAN),check_dirtiness(d)&&(set_signal_status(d,DIRTY$1),schedule_effect(d));for(var g=d.first;g!==null;){var w=g.next,I=(g.f&EFFECT_TRANSPARENT)!==0||(g.f&BRANCH_EFFECT)!==0;resume_children(g,I?m:!1),g=w}if(d.transitions!==null)for(const P of d.transitions)(P.is_global||m)&&P.in()}}let is_micro_task_queued$1=!1,current_queued_micro_tasks=[];function process_micro_tasks(){is_micro_task_queued$1=!1;const d=current_queued_micro_tasks.slice();current_queued_micro_tasks=[],run_all(d)}function queue_micro_task(d){is_micro_task_queued$1||(is_micro_task_queued$1=!0,queueMicrotask(process_micro_tasks)),current_queued_micro_tasks.push(d)}let is_throwing_error=!1,is_micro_task_queued=!1,last_scheduled_effect=null,is_flushing_effect=!1,is_destroying_effect=!1;function set_is_flushing_effect(d){is_flushing_effect=d}function set_is_destroying_effect(d){is_destroying_effect=d}let queued_root_effects=[],flush_count=0,dev_effect_stack=[],active_reaction=null;function set_active_reaction(d){active_reaction=d}let active_effect=null;function set_active_effect(d){active_effect=d}let derived_sources=null;function set_derived_sources(d){derived_sources=d}let new_deps=null,skipped_deps=0,untracked_writes=null;function set_untracked_writes(d){untracked_writes=d}let write_version=1,read_version=0,skip_reaction=!1,component_context=null;function increment_write_version(){return++write_version}function is_runes(){return!legacy_mode_flag||component_context!==null&&component_context.l===null}function check_dirtiness(d){var U;var m=d.f;if(m&DIRTY$1)return!0;if(m&MAYBE_DIRTY){var g=d.deps,w=(m&UNOWNED)!==0;if(g!==null){var I,P,$=(m&DISCONNECTED)!==0,F=w&&active_effect!==null&&!skip_reaction,D=g.length;if($||F){for(I=0;I<D;I++)P=g[I],($||!((U=P==null?void 0:P.reactions)!=null&&U.includes(d)))&&(P.reactions??(P.reactions=[])).push(d);$&&(d.f^=DISCONNECTED)}for(I=0;I<D;I++)if(P=g[I],check_dirtiness(P)&&update_derived(P),P.wv>d.wv)return!0}(!w||active_effect!==null&&!skip_reaction)&&set_signal_status(d,CLEAN)}return!1}function propagate_error(d,m){for(var g=m;g!==null;){if(g.f&BOUNDARY_EFFECT)try{g.fn(d);return}catch{g.f^=BOUNDARY_EFFECT}g=g.parent}throw is_throwing_error=!1,d}function should_rethrow_error(d){return(d.f&DESTROYED)===0&&(d.parent===null||(d.parent.f&BOUNDARY_EFFECT)===0)}function handle_error(d,m,g,w){if(is_throwing_error){if(g===null&&(is_throwing_error=!1),should_rethrow_error(m))throw d;return}g!==null&&(is_throwing_error=!0);{propagate_error(d,m);return}}function schedule_possible_effect_self_invalidation(d,m,g=0){var w=d.reactions;if(w!==null)for(var I=0;I<w.length;I++){var P=w[I];P.f&DERIVED?schedule_possible_effect_self_invalidation(P,m,g+1):m===P&&(g===0?set_signal_status(P,DIRTY$1):P.f&CLEAN&&set_signal_status(P,MAYBE_DIRTY),schedule_effect(P))}}function update_reaction(d){var G;var m=new_deps,g=skipped_deps,w=untracked_writes,I=active_reaction,P=skip_reaction,$=derived_sources,F=component_context,D=d.f;new_deps=null,skipped_deps=0,untracked_writes=null,active_reaction=D&(BRANCH_EFFECT|ROOT_EFFECT)?null:d,skip_reaction=!is_flushing_effect&&(D&UNOWNED)!==0,derived_sources=null,component_context=d.ctx,read_version++;try{var U=(0,d.fn)(),j=d.deps;if(new_deps!==null){var Z;if(remove_reactions(d,skipped_deps),j!==null&&skipped_deps>0)for(j.length=skipped_deps+new_deps.length,Z=0;Z<new_deps.length;Z++)j[skipped_deps+Z]=new_deps[Z];else d.deps=j=new_deps;if(!skip_reaction)for(Z=skipped_deps;Z<j.length;Z++)((G=j[Z]).reactions??(G.reactions=[])).push(d)}else j!==null&&skipped_deps<j.length&&(remove_reactions(d,skipped_deps),j.length=skipped_deps);if(is_runes()&&untracked_writes!==null&&!(d.f&(DERIVED|MAYBE_DIRTY|DIRTY$1)))for(Z=0;Z<untracked_writes.length;Z++)schedule_possible_effect_self_invalidation(untracked_writes[Z],d);return I!==null&&read_version++,U}finally{new_deps=m,skipped_deps=g,untracked_writes=w,active_reaction=I,skip_reaction=P,derived_sources=$,component_context=F}}function remove_reaction(d,m){let g=m.reactions;if(g!==null){var w=index_of.call(g,d);if(w!==-1){var I=g.length-1;I===0?g=m.reactions=null:(g[w]=g[I],g.pop())}}g===null&&m.f&DERIVED&&(new_deps===null||!new_deps.includes(m))&&(set_signal_status(m,MAYBE_DIRTY),m.f&(UNOWNED|DISCONNECTED)||(m.f^=DISCONNECTED),remove_reactions(m,0))}function remove_reactions(d,m){var g=d.deps;if(g!==null)for(var w=m;w<g.length;w++)remove_reaction(d,g[w])}function update_effect(d){var m=d.f;if(!(m&DESTROYED)){set_signal_status(d,CLEAN);var g=active_effect,w=component_context;active_effect=d;try{m&BLOCK_EFFECT?destroy_block_effect_children(d):destroy_effect_children(d),destroy_effect_deriveds(d),execute_effect_teardown(d);var I=update_reaction(d);d.teardown=typeof I=="function"?I:null,d.wv=write_version;var P=d.deps,$;DEV&&tracing_mode_flag&&d.f&DIRTY$1}catch(F){handle_error(F,d,g,w||d.ctx)}finally{active_effect=g}}}function infinite_loop_guard(){if(flush_count>1e3){flush_count=0;try{effect_update_depth_exceeded()}catch(d){if(last_scheduled_effect!==null)handle_error(d,last_scheduled_effect,null);else throw d}}flush_count++}function flush_queued_root_effects(d){var m=d.length;if(m!==0){infinite_loop_guard();var g=is_flushing_effect;is_flushing_effect=!0;try{for(var w=0;w<m;w++){var I=d[w];I.f&CLEAN||(I.f^=CLEAN);var P=[];process_effects(I,P),flush_queued_effects(P)}}finally{is_flushing_effect=g}}}function flush_queued_effects(d){var m=d.length;if(m!==0)for(var g=0;g<m;g++){var w=d[g];if(!(w.f&(DESTROYED|INERT)))try{check_dirtiness(w)&&(update_effect(w),w.deps===null&&w.first===null&&w.nodes_start===null&&(w.teardown===null?unlink_effect(w):w.fn=null))}catch(I){handle_error(I,w,null,w.ctx)}}}function process_deferred(){if(is_micro_task_queued=!1,flush_count>1001)return;const d=queued_root_effects;queued_root_effects=[],flush_queued_root_effects(d),is_micro_task_queued||(flush_count=0,last_scheduled_effect=null)}function schedule_effect(d){is_micro_task_queued||(is_micro_task_queued=!0,queueMicrotask(process_deferred)),last_scheduled_effect=d;for(var m=d;m.parent!==null;){m=m.parent;var g=m.f;if(g&(ROOT_EFFECT|BRANCH_EFFECT)){if(!(g&CLEAN))return;m.f^=CLEAN}}queued_root_effects.push(m)}function process_effects(d,m){var g=d.first,w=[];t:for(;g!==null;){var I=g.f,P=(I&BRANCH_EFFECT)!==0,$=P&&(I&CLEAN)!==0,F=g.next;if(!$&&!(I&INERT))if(I&RENDER_EFFECT){if(P)g.f^=CLEAN;else try{check_dirtiness(g)&&update_effect(g)}catch(Z){handle_error(Z,g,null,g.ctx)}var D=g.first;if(D!==null){g=D;continue}}else I&EFFECT&&w.push(g);if(F===null){let Z=g.parent;for(;Z!==null;){if(d===Z)break t;var U=Z.next;if(U!==null){g=U;continue t}Z=Z.parent}}g=F}for(var j=0;j<w.length;j++)D=w[j],m.push(D),process_effects(D,m)}function get(d){var j;var m=d.f,g=(m&DERIVED)!==0;if(g&&m&DESTROYED){var w=execute_derived(d);return destroy_derived(d),w}if(active_reaction!==null){derived_sources!==null&&derived_sources.includes(d)&&state_unsafe_local_read();var I=active_reaction.deps;d.rv<read_version&&(d.rv=read_version,new_deps===null&&I!==null&&I[skipped_deps]===d?skipped_deps++:new_deps===null?new_deps=[d]:new_deps.push(d))}else if(g&&d.deps===null)for(var P=d,$=P.parent,F=P;$!==null;)if($.f&DERIVED){var D=$;F=D,$=D.parent}else{var U=$;(j=U.deriveds)!=null&&j.includes(F)||(U.deriveds??(U.deriveds=[])).push(F);break}return g&&(P=d,check_dirtiness(P)&&update_derived(P)),d.v}function untrack(d){const m=active_reaction;try{return active_reaction=null,d()}finally{active_reaction=m}}const STATUS_MASK=-7169;function set_signal_status(d,m){d.f=d.f&STATUS_MASK|m}function push(d,m=!1,g){component_context={p:component_context,c:null,e:null,m:!1,s:d,x:null,l:null},legacy_mode_flag&&!m&&(component_context.l={s:null,u:null,r1:[],r2:source(!1)})}function pop(d){const m=component_context;if(m!==null){const $=m.e;if($!==null){var g=active_effect,w=active_reaction;m.e=null;try{for(var I=0;I<$.length;I++){var P=$[I];set_active_effect(P.effect),set_active_reaction(P.reaction),effect(P.fn)}}finally{set_active_effect(g),set_active_reaction(w)}}component_context=m.p,m.m=!0}return{}}function deep_read_state(d){if(!(typeof d!="object"||!d||d instanceof EventTarget)){if(STATE_SYMBOL in d)deep_read(d);else if(!Array.isArray(d))for(let m in d){const g=d[m];typeof g=="object"&&g&&STATE_SYMBOL in g&&deep_read(g)}}}function deep_read(d,m=new Set){if(typeof d=="object"&&d!==null&&!(d instanceof EventTarget)&&!m.has(d)){m.add(d),d instanceof Date&&d.getTime();for(let w in d)try{deep_read(d[w],m)}catch{}const g=get_prototype_of(d);if(g!==Object.prototype&&g!==Array.prototype&&g!==Map.prototype&&g!==Set.prototype&&g!==Date.prototype){const w=get_descriptors(g);for(let I in w){const P=w[I].get;if(P)try{P.call(d)}catch{}}}}}const PASSIVE_EVENTS=["touchstart","touchmove"];function is_passive_event(d){return PASSIVE_EVENTS.includes(d)}let listening_to_form_reset=!1;function add_form_reset_listener(){listening_to_form_reset||(listening_to_form_reset=!0,document.addEventListener("reset",d=>{Promise.resolve().then(()=>{var m;if(!d.defaultPrevented)for(const g of d.target.elements)(m=g.__on_r)==null||m.call(g)})},{capture:!0}))}function without_reactive_context(d){var m=active_reaction,g=active_effect;set_active_reaction(null),set_active_effect(null);try{return d()}finally{set_active_reaction(m),set_active_effect(g)}}function listen_to_event_and_reset_event(d,m,g,w=g){d.addEventListener(m,()=>without_reactive_context(g));const I=d.__on_r;I?d.__on_r=()=>{I(),w(!0)}:d.__on_r=()=>w(!0),add_form_reset_listener()}const all_registered_events=new Set,root_event_handles=new Set;function create_event(d,m,g,w){function I(P){if(w.capture||handle_event_propagation.call(m,P),!P.cancelBubble)return without_reactive_context(()=>g.call(this,P))}return d.startsWith("pointer")||d.startsWith("touch")||d==="wheel"?queue_micro_task(()=>{m.addEventListener(d,I,w)}):m.addEventListener(d,I,w),I}function event(d,m,g,w,I){var P={capture:w,passive:I},$=create_event(d,m,g,P);(m===document.body||m===window||m===document)&&teardown(()=>{m.removeEventListener(d,$,P)})}function handle_event_propagation(d){var J;var m=this,g=m.ownerDocument,w=d.type,I=((J=d.composedPath)==null?void 0:J.call(d))||[],P=I[0]||d.target,$=0,F=d.__root;if(F){var D=I.indexOf(F);if(D!==-1&&(m===document||m===window)){d.__root=m;return}var U=I.indexOf(m);if(U===-1)return;D<=U&&($=D)}if(P=I[$]||d.target,P!==m){define_property(d,"currentTarget",{configurable:!0,get(){return P||g}});var j=active_reaction,Z=active_effect;set_active_reaction(null),set_active_effect(null);try{for(var G,H=[];P!==null;){var W=P.assignedSlot||P.parentNode||P.host||null;try{var q=P["__"+w];if(q!==void 0&&!P.disabled)if(is_array(q)){var[Q,...et]=q;Q.apply(P,[d,...et])}else q.call(P,d)}catch(V){G?H.push(V):G=V}if(d.cancelBubble||W===m||W===null)break;P=W}if(G){for(let V of H)queueMicrotask(()=>{throw V});throw G}}finally{d.__root=m,delete d.currentTarget,set_active_reaction(j),set_active_effect(Z)}}}function create_fragment_from_html(d){var m=document.createElement("template");return m.innerHTML=d,m.content}function assign_nodes(d,m){var g=active_effect;g.nodes_start===null&&(g.nodes_start=d,g.nodes_end=m)}function template(d,m){var g=(m&TEMPLATE_FRAGMENT)!==0,w=(m&TEMPLATE_USE_IMPORT_NODE)!==0,I,P=!d.startsWith("<!>");return()=>{I===void 0&&(I=create_fragment_from_html(P?d:"<!>"+d),g||(I=get_first_child(I)));var $=w?document.importNode(I,!0):I.cloneNode(!0);if(g){var F=get_first_child($),D=$.lastChild;assign_nodes(F,D)}else assign_nodes($,$);return $}}function comment(){var d=document.createDocumentFragment(),m=document.createComment(""),g=create_text();return d.append(m,g),assign_nodes(m,g),d}function append(d,m){d!==null&&d.before(m)}function set_text(d,m){var g=m==null?"":typeof m=="object"?m+"":m;g!==(d.__t??(d.__t=d.nodeValue))&&(d.__t=g,d.nodeValue=g==null?"":g+"")}function mount(d,m){return _mount(d,m)}const document_listeners=new Map;function _mount(d,{target:m,anchor:g,props:w={},events:I,context:P,intro:$=!0}){init_operations();var F=new Set,D=Z=>{for(var G=0;G<Z.length;G++){var H=Z[G];if(!F.has(H)){F.add(H);var W=is_passive_event(H);m.addEventListener(H,handle_event_propagation,{passive:W});var q=document_listeners.get(H);q===void 0?(document.addEventListener(H,handle_event_propagation,{passive:W}),document_listeners.set(H,1)):document_listeners.set(H,q+1)}}};D(array_from(all_registered_events)),root_event_handles.add(D);var U=void 0,j=component_root(()=>{var Z=g??m.appendChild(create_text());return branch(()=>{if(P){push({});var G=component_context;G.c=P}I&&(w.$$events=I),U=d(Z,w)||{},P&&pop()}),()=>{var W;for(var G of F){m.removeEventListener(G,handle_event_propagation);var H=document_listeners.get(G);--H===0?(document.removeEventListener(G,handle_event_propagation),document_listeners.delete(G)):document_listeners.set(G,H)}root_event_handles.delete(D),Z!==g&&((W=Z.parentNode)==null||W.removeChild(Z))}});return mounted_components.set(U,j),U}let mounted_components=new WeakMap;function if_block(d,m,g=!1){var w=d,I=null,P=null,$=UNINITIALIZED,F=g?EFFECT_TRANSPARENT:0,D=!1;const U=(Z,G=!0)=>{D=!0,j(G,Z)},j=(Z,G)=>{$!==($=Z)&&($?(I?resume_effect(I):G&&(I=branch(()=>G(w))),P&&pause_effect(P,()=>{P=null})):(P?resume_effect(P):G&&(P=branch(()=>G(w))),I&&pause_effect(I,()=>{I=null})))};block(()=>{D=!1,m(U),D||j(null,null)},F)}function index(d,m){return m}function pause_effects(d,m,g,w){for(var I=[],P=m.length,$=0;$<P;$++)pause_children(m[$].e,I,!0);var F=P>0&&I.length===0&&g!==null;if(F){var D=g.parentNode;clear_text_content(D),D.append(g),w.clear(),link(d,m[0].prev,m[P-1].next)}run_out_transitions(I,()=>{for(var U=0;U<P;U++){var j=m[U];F||(w.delete(j.k),link(d,j.prev,j.next)),destroy_effect(j.e,!F)}})}function each(d,m,g,w,I,P=null){var $=d,F={flags:m,items:new Map,first:null};{var D=d;$=D.appendChild(create_text())}var U=null,j=!1,Z=derived_safe_equal(()=>{var G=g();return is_array(G)?G:G==null?[]:array_from(G)});block(()=>{var G=get(Z),H=G.length;if(!(j&&H===0)){j=H===0;{var W=active_reaction;reconcile(G,F,$,I,m,(W.f&INERT)!==0,w)}P!==null&&(H===0?U?resume_effect(U):U=branch(()=>P($)):U!==null&&pause_effect(U,()=>{U=null})),get(Z)}})}function reconcile(d,m,g,w,I,P,$,F){var D=d.length,U=m.items,j=m.first,Z=j,G,H=null,W=[],q=[],Q,et,J,V;for(V=0;V<D;V+=1){if(Q=d[V],et=$(Q,V),J=U.get(et),J===void 0){var rt=Z?Z.e.nodes_start:g;H=create_item(rt,m,H,H===null?m.first:H.next,Q,et,V,w,I),U.set(et,H),W=[],q=[],Z=H.next;continue}if(update_item(J,Q,V),J.e.f&INERT&&resume_effect(J.e),J!==Z){if(G!==void 0&&G.has(J)){if(W.length<q.length){var X=q[0],ot;H=X.prev;var it=W[0],st=W[W.length-1];for(ot=0;ot<W.length;ot+=1)move(W[ot],X,g);for(ot=0;ot<q.length;ot+=1)G.delete(q[ot]);link(m,it.prev,st.next),link(m,H,it),link(m,st,X),Z=X,H=st,V-=1,W=[],q=[]}else G.delete(J),move(J,Z,g),link(m,J.prev,J.next),link(m,J,H===null?m.first:H.next),link(m,H,J),H=J;continue}for(W=[],q=[];Z!==null&&Z.k!==et;)(P||!(Z.e.f&INERT))&&(G??(G=new Set)).add(Z),q.push(Z),Z=Z.next;if(Z===null)continue;J=Z}W.push(J),H=J,Z=J.next}if(Z!==null||G!==void 0){for(var at=G===void 0?[]:array_from(G);Z!==null;)(P||!(Z.e.f&INERT))&&at.push(Z),Z=Z.next;var ft=at.length;if(ft>0){var K=D===0?g:null;pause_effects(m,at,K,U)}}active_effect.first=m.first&&m.first.e,active_effect.last=H&&H.e}function update_item(d,m,g,w){internal_set(d.v,m),d.i=g}function create_item(d,m,g,w,I,P,$,F,D,U){var j=(D&EACH_ITEM_REACTIVE)!==0,Z=(D&EACH_ITEM_IMMUTABLE)===0,G=j?Z?mutable_source(I):source(I):I,H=D&EACH_INDEX_REACTIVE?source($):$,W={i:H,v:G,k:P,a:null,e:null,prev:g,next:w};try{return W.e=branch(()=>F(d,G,H),hydrating),W.e.prev=g&&g.e,W.e.next=w&&w.e,g===null?m.first=W:(g.next=W,g.e.next=W.e),w!==null&&(w.prev=W,w.e.prev=W.e),W}finally{}}function move(d,m,g){for(var w=d.next?d.next.e.nodes_start:g,I=m?m.e.nodes_start:g,P=d.e.nodes_start;P!==w;){var $=get_next_sibling(P);I.before(P),P=$}}function link(d,m,g){m===null?d.first=g:(m.next=g,m.e.next=g&&g.e),g!==null&&(g.prev=m,g.e.prev=m&&m.e)}function set_attribute(d,m,g,w){var I=d.__attributes??(d.__attributes={});I[m]!==(I[m]=g)&&(g==null?d.removeAttribute(m):typeof g!="string"&&get_setters(d).includes(m)?d[m]=g:d.setAttribute(m,g))}var setters_cache=new Map;function get_setters(d){var m=setters_cache.get(d.nodeName);if(m)return m;setters_cache.set(d.nodeName,m=[]);for(var g,w=d,I=Element.prototype;I!==w;){g=get_descriptors(w);for(var P in g)g[P].set&&m.push(P);w=get_prototype_of(w)}return m}function set_class(d,m,g){var w=d.__className,I=to_class(m);(w!==I||hydrating)&&(m==null?d.removeAttribute("class"):d.className=I,d.__className=I)}function to_class(d,m){return(d??"")+""}function bind_value(d,m,g=m){var w=is_runes();listen_to_event_and_reset_event(d,"input",I=>{var P=I?d.defaultValue:d.value;if(P=is_numberlike_input(d)?to_number(P):P,g(P),w&&P!==(P=m())){var $=d.selectionStart,F=d.selectionEnd;d.value=P??"",F!==null&&(d.selectionStart=$,d.selectionEnd=Math.min(F,d.value.length))}}),untrack(m)==null&&d.value&&g(is_numberlike_input(d)?to_number(d.value):d.value),render_effect(()=>{var I=m();is_numberlike_input(d)&&I===to_number(d.value)||d.type==="date"&&!I&&!d.value||I!==d.value&&(d.value=I??"")})}function is_numberlike_input(d){var m=d.type;return m==="number"||m==="range"}function to_number(d){return d===""?null:+d}function init$1(d=!1){const m=component_context,g=m.l.u;if(!g)return;let w=()=>deep_read_state(m.s);if(d){let I=0,P={};const $=derived(()=>{let F=!1;const D=m.s;for(const U in D)D[U]!==P[U]&&(P[U]=D[U],F=!0);return F&&I++,I});w=()=>get($)}g.b.length&&user_pre_effect(()=>{observe_all(m,w),run_all(g.b)}),user_effect(()=>{const I=untrack(()=>g.m.map(run));return()=>{for(const P of I)typeof P=="function"&&P()}}),g.a.length&&user_effect(()=>{observe_all(m,w),run_all(g.a)})}function observe_all(d,m){if(d.l.s)for(const g of d.l.s)get(g);m()}let is_store_binding=!1;function capture_store_binding(d){var m=is_store_binding;try{return is_store_binding=!1,[d(),is_store_binding]}finally{is_store_binding=m}}function with_parent_branch(d){for(var m=active_effect,g=active_effect;m!==null&&!(m.f&(BRANCH_EFFECT|ROOT_EFFECT));)m=m.parent;try{return set_active_effect(m),d()}finally{set_active_effect(g)}}function prop(d,m,g,w){var it;var I=(g&PROPS_IS_IMMUTABLE)!==0,P=!legacy_mode_flag||(g&PROPS_IS_RUNES)!==0,$=(g&PROPS_IS_BINDABLE)!==0,F=(g&PROPS_IS_LAZY_INITIAL)!==0,D=!1,U;$?[U,D]=capture_store_binding(()=>d[m]):U=d[m];var j=STATE_SYMBOL in d||LEGACY_PROPS in d,Z=$&&(((it=get_descriptor(d,m))==null?void 0:it.set)??(j&&m in d&&(st=>d[m]=st)))||void 0,G=w,H=!0,W=!1,q=()=>(W=!0,H&&(H=!1,F?G=untrack(w):G=w),G);U===void 0&&w!==void 0&&(Z&&P&&props_invalid_value(),U=q(),Z&&Z(U));var Q;if(P)Q=()=>{var st=d[m];return st===void 0?q():(H=!0,W=!1,st)};else{var et=with_parent_branch(()=>(I?derived:derived_safe_equal)(()=>d[m]));et.f|=LEGACY_DERIVED_PROP,Q=()=>{var st=get(et);return st!==void 0&&(G=void 0),st===void 0?G:st}}if(!(g&PROPS_IS_UPDATED))return Q;if(Z){var J=d.$$legacy;return function(st,at){return arguments.length>0?((!P||!at||J||D)&&Z(at?Q():st),st):Q()}}var V=!1,rt=!1,X=mutable_source(U),ot=with_parent_branch(()=>derived(()=>{var st=Q(),at=get(X);return V?(V=!1,rt=!0,at):(rt=!1,X.v=st)}));return I||(ot.equals=safe_equals),function(st,at){if(arguments.length>0){const ft=at?get(ot):P&&$?proxy(st):st;return ot.equals(ft)||(V=!0,set(X,ft),W&&G!==void 0&&(G=ft),untrack(()=>get(ot))),st}return get(ot)}}const PUBLIC_VERSION="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(PUBLIC_VERSION);enable_legacy_mode_flag();var root_1$3=template('<li class="nav-item"><button type="button" class="btn btn-warning">Connect</button></li>'),root_2$1=template('<li class="nav-item"><button type="button" class="btn btn-warning"><i class="fa-solid fa-upload"></i></button></li> <li class="nav-item" style="padding-left: 10px;"><button type="button"><i class="fa-solid fa-download"></i></button></li> <li class="nav-item" style="padding-left: 10px;"><button type="button" class="btn btn-warning"><i class="fa-solid fa-folder-open"></i></button></li> <li class="nav-item" style="padding-left: 10px;"><button type="button"><i class="fa-solid fa-floppy-disk"></i></button></li>',1),root_3=template('<li class="nav-item" style=""><div class="spinner-border text-warning"></div></li>'),root$5=template('<div class="bottom-shadow svelte-18h0elg"><div class="app-title svelte-18h0elg"><span class="h3">Link Analyzer Editor</span></div> <nav class="navbar navbar-expand-sm bg-dark navbar-dark"><div class="container-fluid"><ul class="navbar-nav mr-auto"><!></ul> <ul class="navbar-nav ml-auto"><!></ul></div></nav></div>');function Navi(d,m){let g=prop(m,"port",3,!1);var w=root$5(),I=sibling(child(w),2),P=child(I),$=child(P),F=child($);{var D=H=>{var W=root_1$3(),q=child(W);event("click",q,function(...Q){var et;(et=m.connect)==null||et.apply(this,Q)}),append(H,W)},U=H=>{var W=root_2$1(),q=first_child(W),Q=child(q),et=sibling(q,2),J=child(et),V=sibling(et,2),rt=child(V),X=sibling(V,2),ot=child(X);template_effect(()=>{set_class(J,`btn btn-warning ${(m.hasNavi?"":"disabled")??""}`),set_class(ot,`btn btn-warning ${(m.hasNavi?"":"disabled")??""}`)}),event("click",Q,function(...it){var st;(st=m.loadNavi)==null||st.apply(this,it)}),event("click",J,function(...it){var st;(st=m.writeNavi)==null||st.apply(this,it)}),event("click",rt,function(...it){var st;(st=m.openNavi)==null||st.apply(this,it)}),event("click",ot,function(...it){var st;(st=m.saveNavi)==null||st.apply(this,it)}),append(H,W)};if_block(F,H=>{g()?H(U,!1):H(D)})}var j=sibling($,2),Z=child(j);{var G=H=>{var W=root_3();append(H,W)};if_block(Z,H=>{m.loading&&H(G)})}append(d,w)}function bind(d,m){return function(){return d.apply(m,arguments)}}const{toString:toString$1}=Object.prototype,{getPrototypeOf}=Object,kindOf=(d=>m=>{const g=toString$1.call(m);return d[g]||(d[g]=g.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=d=>(d=d.toLowerCase(),m=>kindOf(m)===d),typeOfTest=d=>m=>typeof m===d,{isArray:isArray$1}=Array,isUndefined=typeOfTest("undefined");function isBuffer$1(d){return d!==null&&!isUndefined(d)&&d.constructor!==null&&!isUndefined(d.constructor)&&isFunction(d.constructor.isBuffer)&&d.constructor.isBuffer(d)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(d){let m;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?m=ArrayBuffer.isView(d):m=d&&d.buffer&&isArrayBuffer(d.buffer),m}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=d=>d!==null&&typeof d=="object",isBoolean=d=>d===!0||d===!1,isPlainObject=d=>{if(kindOf(d)!=="object")return!1;const m=getPrototypeOf(d);return(m===null||m===Object.prototype||Object.getPrototypeOf(m)===null)&&!(Symbol.toStringTag in d)&&!(Symbol.iterator in d)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=d=>isObject(d)&&isFunction(d.pipe),isFormData=d=>{let m;return d&&(typeof FormData=="function"&&d instanceof FormData||isFunction(d.append)&&((m=kindOf(d))==="formdata"||m==="object"&&isFunction(d.toString)&&d.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=d=>d.trim?d.trim():d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(d,m,{allOwnKeys:g=!1}={}){if(d===null||typeof d>"u")return;let w,I;if(typeof d!="object"&&(d=[d]),isArray$1(d))for(w=0,I=d.length;w<I;w++)m.call(null,d[w],w,d);else{const P=g?Object.getOwnPropertyNames(d):Object.keys(d),$=P.length;let F;for(w=0;w<$;w++)F=P[w],m.call(null,d[F],F,d)}}function findKey(d,m){m=m.toLowerCase();const g=Object.keys(d);let w=g.length,I;for(;w-- >0;)if(I=g[w],m===I.toLowerCase())return I;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=d=>!isUndefined(d)&&d!==_global;function merge(){const{caseless:d}=isContextDefined(this)&&this||{},m={},g=(w,I)=>{const P=d&&findKey(m,I)||I;isPlainObject(m[P])&&isPlainObject(w)?m[P]=merge(m[P],w):isPlainObject(w)?m[P]=merge({},w):isArray$1(w)?m[P]=w.slice():m[P]=w};for(let w=0,I=arguments.length;w<I;w++)arguments[w]&&forEach(arguments[w],g);return m}const extend=(d,m,g,{allOwnKeys:w}={})=>(forEach(m,(I,P)=>{g&&isFunction(I)?d[P]=bind(I,g):d[P]=I},{allOwnKeys:w}),d),stripBOM=d=>(d.charCodeAt(0)===65279&&(d=d.slice(1)),d),inherits=(d,m,g,w)=>{d.prototype=Object.create(m.prototype,w),d.prototype.constructor=d,Object.defineProperty(d,"super",{value:m.prototype}),g&&Object.assign(d.prototype,g)},toFlatObject=(d,m,g,w)=>{let I,P,$;const F={};if(m=m||{},d==null)return m;do{for(I=Object.getOwnPropertyNames(d),P=I.length;P-- >0;)$=I[P],(!w||w($,d,m))&&!F[$]&&(m[$]=d[$],F[$]=!0);d=g!==!1&&getPrototypeOf(d)}while(d&&(!g||g(d,m))&&d!==Object.prototype);return m},endsWith=(d,m,g)=>{d=String(d),(g===void 0||g>d.length)&&(g=d.length),g-=m.length;const w=d.indexOf(m,g);return w!==-1&&w===g},toArray=d=>{if(!d)return null;if(isArray$1(d))return d;let m=d.length;if(!isNumber(m))return null;const g=new Array(m);for(;m-- >0;)g[m]=d[m];return g},isTypedArray=(d=>m=>d&&m instanceof d)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(d,m)=>{const w=(d&&d[Symbol.iterator]).call(d);let I;for(;(I=w.next())&&!I.done;){const P=I.value;m.call(d,P[0],P[1])}},matchAll=(d,m)=>{let g;const w=[];for(;(g=d.exec(m))!==null;)w.push(g);return w},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=d=>d.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(g,w,I){return w.toUpperCase()+I}),hasOwnProperty=(({hasOwnProperty:d})=>(m,g)=>d.call(m,g))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(d,m)=>{const g=Object.getOwnPropertyDescriptors(d),w={};forEach(g,(I,P)=>{let $;($=m(I,P,d))!==!1&&(w[P]=$||I)}),Object.defineProperties(d,w)},freezeMethods=d=>{reduceDescriptors(d,(m,g)=>{if(isFunction(d)&&["arguments","caller","callee"].indexOf(g)!==-1)return!1;const w=d[g];if(isFunction(w)){if(m.enumerable=!1,"writable"in m){m.writable=!1;return}m.set||(m.set=()=>{throw Error("Can not rewrite read-only method '"+g+"'")})}})},toObjectSet=(d,m)=>{const g={},w=I=>{I.forEach(P=>{g[P]=!0})};return isArray$1(d)?w(d):w(String(d).split(m)),g},noop=()=>{},toFiniteNumber=(d,m)=>d!=null&&Number.isFinite(d=+d)?d:m,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(d=16,m=ALPHABET.ALPHA_DIGIT)=>{let g="";const{length:w}=m;for(;d--;)g+=m[Math.random()*w|0];return g};function isSpecCompliantForm(d){return!!(d&&isFunction(d.append)&&d[Symbol.toStringTag]==="FormData"&&d[Symbol.iterator])}const toJSONObject=d=>{const m=new Array(10),g=(w,I)=>{if(isObject(w)){if(m.indexOf(w)>=0)return;if(!("toJSON"in w)){m[I]=w;const P=isArray$1(w)?[]:{};return forEach(w,($,F)=>{const D=g($,I+1);!isUndefined(D)&&(P[F]=D)}),m[I]=void 0,P}}return w};return g(d,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=d=>d&&(isObject(d)||isFunction(d))&&isFunction(d.then)&&isFunction(d.catch),_setImmediate=((d,m)=>d?setImmediate:m?((g,w)=>(_global.addEventListener("message",({source:I,data:P})=>{I===_global&&P===g&&w.length&&w.shift()()},!1),I=>{w.push(I),_global.postMessage(g,"*")}))(`axios@${Math.random()}`,[]):g=>setTimeout(g))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray:isArray$1,isArrayBuffer,isBuffer:isBuffer$1,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(d,m,g,w,I){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=d,this.name="AxiosError",m&&(this.code=m),g&&(this.config=g),w&&(this.request=w),I&&(this.response=I,this.status=I.status?I.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(d=>{descriptors[d]={value:d}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(d,m,g,w,I,P)=>{const $=Object.create(prototype$1);return utils$1.toFlatObject(d,$,function(D){return D!==Error.prototype},F=>F!=="isAxiosError"),AxiosError.call($,d.message,m,g,w,I),$.cause=d,$.name=d.name,P&&Object.assign($,P),$};const httpAdapter=null;function isVisitable(d){return utils$1.isPlainObject(d)||utils$1.isArray(d)}function removeBrackets(d){return utils$1.endsWith(d,"[]")?d.slice(0,-2):d}function renderKey(d,m,g){return d?d.concat(m).map(function(I,P){return I=removeBrackets(I),!g&&P?"["+I+"]":I}).join(g?".":""):m}function isFlatArray(d){return utils$1.isArray(d)&&!d.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(m){return/^is[A-Z]/.test(m)});function toFormData(d,m,g){if(!utils$1.isObject(d))throw new TypeError("target must be an object");m=m||new FormData,g=utils$1.toFlatObject(g,{metaTokens:!0,dots:!1,indexes:!1},!1,function(q,Q){return!utils$1.isUndefined(Q[q])});const w=g.metaTokens,I=g.visitor||j,P=g.dots,$=g.indexes,D=(g.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(m);if(!utils$1.isFunction(I))throw new TypeError("visitor must be a function");function U(W){if(W===null)return"";if(utils$1.isDate(W))return W.toISOString();if(!D&&utils$1.isBlob(W))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(W)||utils$1.isTypedArray(W)?D&&typeof Blob=="function"?new Blob([W]):Buffer.from(W):W}function j(W,q,Q){let et=W;if(W&&!Q&&typeof W=="object"){if(utils$1.endsWith(q,"{}"))q=w?q:q.slice(0,-2),W=JSON.stringify(W);else if(utils$1.isArray(W)&&isFlatArray(W)||(utils$1.isFileList(W)||utils$1.endsWith(q,"[]"))&&(et=utils$1.toArray(W)))return q=removeBrackets(q),et.forEach(function(V,rt){!(utils$1.isUndefined(V)||V===null)&&m.append($===!0?renderKey([q],rt,P):$===null?q:q+"[]",U(V))}),!1}return isVisitable(W)?!0:(m.append(renderKey(Q,q,P),U(W)),!1)}const Z=[],G=Object.assign(predicates,{defaultVisitor:j,convertValue:U,isVisitable});function H(W,q){if(!utils$1.isUndefined(W)){if(Z.indexOf(W)!==-1)throw Error("Circular reference detected in "+q.join("."));Z.push(W),utils$1.forEach(W,function(et,J){(!(utils$1.isUndefined(et)||et===null)&&I.call(m,et,utils$1.isString(J)?J.trim():J,q,G))===!0&&H(et,q?q.concat(J):[J])}),Z.pop()}}if(!utils$1.isObject(d))throw new TypeError("data must be an object");return H(d),m}function encode$4(d){const m={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(d).replace(/[!'()~]|%20|%00/g,function(w){return m[w]})}function AxiosURLSearchParams(d,m){this._pairs=[],d&&toFormData(d,this,m)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(m,g){this._pairs.push([m,g])};prototype.toString=function(m){const g=m?function(w){return m.call(this,w,encode$4)}:encode$4;return this._pairs.map(function(I){return g(I[0])+"="+g(I[1])},"").join("&")};function encode$3(d){return encodeURIComponent(d).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(d,m,g){if(!m)return d;const w=g&&g.encode||encode$3;utils$1.isFunction(g)&&(g={serialize:g});const I=g&&g.serialize;let P;if(I?P=I(m,g):P=utils$1.isURLSearchParams(m)?m.toString():new AxiosURLSearchParams(m,g).toString(w),P){const $=d.indexOf("#");$!==-1&&(d=d.slice(0,$)),d+=(d.indexOf("?")===-1?"?":"&")+P}return d}class InterceptorManager{constructor(){this.handlers=[]}use(m,g,w){return this.handlers.push({fulfilled:m,rejected:g,synchronous:w?w.synchronous:!1,runWhen:w?w.runWhen:null}),this.handlers.length-1}eject(m){this.handlers[m]&&(this.handlers[m]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(m){utils$1.forEach(this.handlers,function(w){w!==null&&m(w)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(d,m){return toFormData(d,new platform.classes.URLSearchParams,Object.assign({visitor:function(g,w,I,P){return platform.isNode&&utils$1.isBuffer(g)?(this.append(w,g.toString("base64")),!1):P.defaultVisitor.apply(this,arguments)}},m))}function parsePropPath(d){return utils$1.matchAll(/\w+|\[(\w*)]/g,d).map(m=>m[0]==="[]"?"":m[1]||m[0])}function arrayToObject(d){const m={},g=Object.keys(d);let w;const I=g.length;let P;for(w=0;w<I;w++)P=g[w],m[P]=d[P];return m}function formDataToJSON(d){function m(g,w,I,P){let $=g[P++];if($==="__proto__")return!0;const F=Number.isFinite(+$),D=P>=g.length;return $=!$&&utils$1.isArray(I)?I.length:$,D?(utils$1.hasOwnProp(I,$)?I[$]=[I[$],w]:I[$]=w,!F):((!I[$]||!utils$1.isObject(I[$]))&&(I[$]=[]),m(g,w,I[$],P)&&utils$1.isArray(I[$])&&(I[$]=arrayToObject(I[$])),!F)}if(utils$1.isFormData(d)&&utils$1.isFunction(d.entries)){const g={};return utils$1.forEachEntry(d,(w,I)=>{m(parsePropPath(w),I,g,0)}),g}return null}function stringifySafely(d,m,g){if(utils$1.isString(d))try{return(m||JSON.parse)(d),utils$1.trim(d)}catch(w){if(w.name!=="SyntaxError")throw w}return(0,JSON.stringify)(d)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(m,g){const w=g.getContentType()||"",I=w.indexOf("application/json")>-1,P=utils$1.isObject(m);if(P&&utils$1.isHTMLForm(m)&&(m=new FormData(m)),utils$1.isFormData(m))return I?JSON.stringify(formDataToJSON(m)):m;if(utils$1.isArrayBuffer(m)||utils$1.isBuffer(m)||utils$1.isStream(m)||utils$1.isFile(m)||utils$1.isBlob(m)||utils$1.isReadableStream(m))return m;if(utils$1.isArrayBufferView(m))return m.buffer;if(utils$1.isURLSearchParams(m))return g.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),m.toString();let F;if(P){if(w.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(m,this.formSerializer).toString();if((F=utils$1.isFileList(m))||w.indexOf("multipart/form-data")>-1){const D=this.env&&this.env.FormData;return toFormData(F?{"files[]":m}:m,D&&new D,this.formSerializer)}}return P||I?(g.setContentType("application/json",!1),stringifySafely(m)):m}],transformResponse:[function(m){const g=this.transitional||defaults.transitional,w=g&&g.forcedJSONParsing,I=this.responseType==="json";if(utils$1.isResponse(m)||utils$1.isReadableStream(m))return m;if(m&&utils$1.isString(m)&&(w&&!this.responseType||I)){const $=!(g&&g.silentJSONParsing)&&I;try{return JSON.parse(m)}catch(F){if($)throw F.name==="SyntaxError"?AxiosError.from(F,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):F}}return m}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(m){return m>=200&&m<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],d=>{defaults.headers[d]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=d=>{const m={};let g,w,I;return d&&d.split(`
`).forEach(function($){I=$.indexOf(":"),g=$.substring(0,I).trim().toLowerCase(),w=$.substring(I+1).trim(),!(!g||m[g]&&ignoreDuplicateOf[g])&&(g==="set-cookie"?m[g]?m[g].push(w):m[g]=[w]:m[g]=m[g]?m[g]+", "+w:w)}),m},$internals=Symbol("internals");function normalizeHeader(d){return d&&String(d).trim().toLowerCase()}function normalizeValue$1(d){return d===!1||d==null?d:utils$1.isArray(d)?d.map(normalizeValue$1):String(d)}function parseTokens(d){const m=Object.create(null),g=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let w;for(;w=g.exec(d);)m[w[1]]=w[2];return m}const isValidHeaderName=d=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(d.trim());function matchHeaderValue(d,m,g,w,I){if(utils$1.isFunction(w))return w.call(this,m,g);if(I&&(m=g),!!utils$1.isString(m)){if(utils$1.isString(w))return m.indexOf(w)!==-1;if(utils$1.isRegExp(w))return w.test(m)}}function formatHeader(d){return d.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(m,g,w)=>g.toUpperCase()+w)}function buildAccessors(d,m){const g=utils$1.toCamelCase(" "+m);["get","set","has"].forEach(w=>{Object.defineProperty(d,w+g,{value:function(I,P,$){return this[w].call(this,m,I,P,$)},configurable:!0})})}class AxiosHeaders{constructor(m){m&&this.set(m)}set(m,g,w){const I=this;function P(F,D,U){const j=normalizeHeader(D);if(!j)throw new Error("header name must be a non-empty string");const Z=utils$1.findKey(I,j);(!Z||I[Z]===void 0||U===!0||U===void 0&&I[Z]!==!1)&&(I[Z||D]=normalizeValue$1(F))}const $=(F,D)=>utils$1.forEach(F,(U,j)=>P(U,j,D));if(utils$1.isPlainObject(m)||m instanceof this.constructor)$(m,g);else if(utils$1.isString(m)&&(m=m.trim())&&!isValidHeaderName(m))$(parseHeaders(m),g);else if(utils$1.isHeaders(m))for(const[F,D]of m.entries())P(D,F,w);else m!=null&&P(g,m,w);return this}get(m,g){if(m=normalizeHeader(m),m){const w=utils$1.findKey(this,m);if(w){const I=this[w];if(!g)return I;if(g===!0)return parseTokens(I);if(utils$1.isFunction(g))return g.call(this,I,w);if(utils$1.isRegExp(g))return g.exec(I);throw new TypeError("parser must be boolean|regexp|function")}}}has(m,g){if(m=normalizeHeader(m),m){const w=utils$1.findKey(this,m);return!!(w&&this[w]!==void 0&&(!g||matchHeaderValue(this,this[w],w,g)))}return!1}delete(m,g){const w=this;let I=!1;function P($){if($=normalizeHeader($),$){const F=utils$1.findKey(w,$);F&&(!g||matchHeaderValue(w,w[F],F,g))&&(delete w[F],I=!0)}}return utils$1.isArray(m)?m.forEach(P):P(m),I}clear(m){const g=Object.keys(this);let w=g.length,I=!1;for(;w--;){const P=g[w];(!m||matchHeaderValue(this,this[P],P,m,!0))&&(delete this[P],I=!0)}return I}normalize(m){const g=this,w={};return utils$1.forEach(this,(I,P)=>{const $=utils$1.findKey(w,P);if($){g[$]=normalizeValue$1(I),delete g[P];return}const F=m?formatHeader(P):String(P).trim();F!==P&&delete g[P],g[F]=normalizeValue$1(I),w[F]=!0}),this}concat(...m){return this.constructor.concat(this,...m)}toJSON(m){const g=Object.create(null);return utils$1.forEach(this,(w,I)=>{w!=null&&w!==!1&&(g[I]=m&&utils$1.isArray(w)?w.join(", "):w)}),g}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([m,g])=>m+": "+g).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(m){return m instanceof this?m:new this(m)}static concat(m,...g){const w=new this(m);return g.forEach(I=>w.set(I)),w}static accessor(m){const w=(this[$internals]=this[$internals]={accessors:{}}).accessors,I=this.prototype;function P($){const F=normalizeHeader($);w[F]||(buildAccessors(I,$),w[F]=!0)}return utils$1.isArray(m)?m.forEach(P):P(m),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:d},m)=>{let g=m[0].toUpperCase()+m.slice(1);return{get:()=>d,set(w){this[g]=w}}});utils$1.freezeMethods(AxiosHeaders);function transformData(d,m){const g=this||defaults,w=m||g,I=AxiosHeaders.from(w.headers);let P=w.data;return utils$1.forEach(d,function(F){P=F.call(g,P,I.normalize(),m?m.status:void 0)}),I.normalize(),P}function isCancel(d){return!!(d&&d.__CANCEL__)}function CanceledError(d,m,g){AxiosError.call(this,d??"canceled",AxiosError.ERR_CANCELED,m,g),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(d,m,g){const w=g.config.validateStatus;!g.status||!w||w(g.status)?d(g):m(new AxiosError("Request failed with status code "+g.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(g.status/100)-4],g.config,g.request,g))}function parseProtocol(d){const m=/^([-+\w]{1,25})(:?\/\/|:)/.exec(d);return m&&m[1]||""}function speedometer(d,m){d=d||10;const g=new Array(d),w=new Array(d);let I=0,P=0,$;return m=m!==void 0?m:1e3,function(D){const U=Date.now(),j=w[P];$||($=U),g[I]=D,w[I]=U;let Z=P,G=0;for(;Z!==I;)G+=g[Z++],Z=Z%d;if(I=(I+1)%d,I===P&&(P=(P+1)%d),U-$<m)return;const H=j&&U-j;return H?Math.round(G*1e3/H):void 0}}function throttle(d,m){let g=0,w=1e3/m,I,P;const $=(U,j=Date.now())=>{g=j,I=null,P&&(clearTimeout(P),P=null),d.apply(null,U)};return[(...U)=>{const j=Date.now(),Z=j-g;Z>=w?$(U,j):(I=U,P||(P=setTimeout(()=>{P=null,$(I)},w-Z)))},()=>I&&$(I)]}const progressEventReducer=(d,m,g=3)=>{let w=0;const I=speedometer(50,250);return throttle(P=>{const $=P.loaded,F=P.lengthComputable?P.total:void 0,D=$-w,U=I(D),j=$<=F;w=$;const Z={loaded:$,total:F,progress:F?$/F:void 0,bytes:D,rate:U||void 0,estimated:U&&F&&j?(F-$)/U:void 0,event:P,lengthComputable:F!=null,[m?"download":"upload"]:!0};d(Z)},g)},progressEventDecorator=(d,m)=>{const g=d!=null;return[w=>m[0]({lengthComputable:g,total:d,loaded:w}),m[1]]},asyncDecorator=d=>(...m)=>utils$1.asap(()=>d(...m)),isURLSameOrigin=platform.hasStandardBrowserEnv?((d,m)=>g=>(g=new URL(g,platform.origin),d.protocol===g.protocol&&d.host===g.host&&(m||d.port===g.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(d,m,g,w,I,P){const $=[d+"="+encodeURIComponent(m)];utils$1.isNumber(g)&&$.push("expires="+new Date(g).toGMTString()),utils$1.isString(w)&&$.push("path="+w),utils$1.isString(I)&&$.push("domain="+I),P===!0&&$.push("secure"),document.cookie=$.join("; ")},read(d){const m=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return m?decodeURIComponent(m[3]):null},remove(d){this.write(d,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(d){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(d)}function combineURLs(d,m){return m?d.replace(/\/?\/$/,"")+"/"+m.replace(/^\/+/,""):d}function buildFullPath(d,m){return d&&!isAbsoluteURL(m)?combineURLs(d,m):m}const headersToObject=d=>d instanceof AxiosHeaders?{...d}:d;function mergeConfig(d,m){m=m||{};const g={};function w(U,j,Z,G){return utils$1.isPlainObject(U)&&utils$1.isPlainObject(j)?utils$1.merge.call({caseless:G},U,j):utils$1.isPlainObject(j)?utils$1.merge({},j):utils$1.isArray(j)?j.slice():j}function I(U,j,Z,G){if(utils$1.isUndefined(j)){if(!utils$1.isUndefined(U))return w(void 0,U,Z,G)}else return w(U,j,Z,G)}function P(U,j){if(!utils$1.isUndefined(j))return w(void 0,j)}function $(U,j){if(utils$1.isUndefined(j)){if(!utils$1.isUndefined(U))return w(void 0,U)}else return w(void 0,j)}function F(U,j,Z){if(Z in m)return w(U,j);if(Z in d)return w(void 0,U)}const D={url:P,method:P,data:P,baseURL:$,transformRequest:$,transformResponse:$,paramsSerializer:$,timeout:$,timeoutMessage:$,withCredentials:$,withXSRFToken:$,adapter:$,responseType:$,xsrfCookieName:$,xsrfHeaderName:$,onUploadProgress:$,onDownloadProgress:$,decompress:$,maxContentLength:$,maxBodyLength:$,beforeRedirect:$,transport:$,httpAgent:$,httpsAgent:$,cancelToken:$,socketPath:$,responseEncoding:$,validateStatus:F,headers:(U,j,Z)=>I(headersToObject(U),headersToObject(j),Z,!0)};return utils$1.forEach(Object.keys(Object.assign({},d,m)),function(j){const Z=D[j]||I,G=Z(d[j],m[j],j);utils$1.isUndefined(G)&&Z!==F||(g[j]=G)}),g}const resolveConfig=d=>{const m=mergeConfig({},d);let{data:g,withXSRFToken:w,xsrfHeaderName:I,xsrfCookieName:P,headers:$,auth:F}=m;m.headers=$=AxiosHeaders.from($),m.url=buildURL(buildFullPath(m.baseURL,m.url),d.params,d.paramsSerializer),F&&$.set("Authorization","Basic "+btoa((F.username||"")+":"+(F.password?unescape(encodeURIComponent(F.password)):"")));let D;if(utils$1.isFormData(g)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)$.setContentType(void 0);else if((D=$.getContentType())!==!1){const[U,...j]=D?D.split(";").map(Z=>Z.trim()).filter(Boolean):[];$.setContentType([U||"multipart/form-data",...j].join("; "))}}if(platform.hasStandardBrowserEnv&&(w&&utils$1.isFunction(w)&&(w=w(m)),w||w!==!1&&isURLSameOrigin(m.url))){const U=I&&P&&cookies.read(P);U&&$.set(I,U)}return m},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(d){return new Promise(function(g,w){const I=resolveConfig(d);let P=I.data;const $=AxiosHeaders.from(I.headers).normalize();let{responseType:F,onUploadProgress:D,onDownloadProgress:U}=I,j,Z,G,H,W;function q(){H&&H(),W&&W(),I.cancelToken&&I.cancelToken.unsubscribe(j),I.signal&&I.signal.removeEventListener("abort",j)}let Q=new XMLHttpRequest;Q.open(I.method.toUpperCase(),I.url,!0),Q.timeout=I.timeout;function et(){if(!Q)return;const V=AxiosHeaders.from("getAllResponseHeaders"in Q&&Q.getAllResponseHeaders()),X={data:!F||F==="text"||F==="json"?Q.responseText:Q.response,status:Q.status,statusText:Q.statusText,headers:V,config:d,request:Q};settle(function(it){g(it),q()},function(it){w(it),q()},X),Q=null}"onloadend"in Q?Q.onloadend=et:Q.onreadystatechange=function(){!Q||Q.readyState!==4||Q.status===0&&!(Q.responseURL&&Q.responseURL.indexOf("file:")===0)||setTimeout(et)},Q.onabort=function(){Q&&(w(new AxiosError("Request aborted",AxiosError.ECONNABORTED,d,Q)),Q=null)},Q.onerror=function(){w(new AxiosError("Network Error",AxiosError.ERR_NETWORK,d,Q)),Q=null},Q.ontimeout=function(){let rt=I.timeout?"timeout of "+I.timeout+"ms exceeded":"timeout exceeded";const X=I.transitional||transitionalDefaults;I.timeoutErrorMessage&&(rt=I.timeoutErrorMessage),w(new AxiosError(rt,X.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,d,Q)),Q=null},P===void 0&&$.setContentType(null),"setRequestHeader"in Q&&utils$1.forEach($.toJSON(),function(rt,X){Q.setRequestHeader(X,rt)}),utils$1.isUndefined(I.withCredentials)||(Q.withCredentials=!!I.withCredentials),F&&F!=="json"&&(Q.responseType=I.responseType),U&&([G,W]=progressEventReducer(U,!0),Q.addEventListener("progress",G)),D&&Q.upload&&([Z,H]=progressEventReducer(D),Q.upload.addEventListener("progress",Z),Q.upload.addEventListener("loadend",H)),(I.cancelToken||I.signal)&&(j=V=>{Q&&(w(!V||V.type?new CanceledError(null,d,Q):V),Q.abort(),Q=null)},I.cancelToken&&I.cancelToken.subscribe(j),I.signal&&(I.signal.aborted?j():I.signal.addEventListener("abort",j)));const J=parseProtocol(I.url);if(J&&platform.protocols.indexOf(J)===-1){w(new AxiosError("Unsupported protocol "+J+":",AxiosError.ERR_BAD_REQUEST,d));return}Q.send(P||null)})},composeSignals=(d,m)=>{const{length:g}=d=d?d.filter(Boolean):[];if(m||g){let w=new AbortController,I;const P=function(U){if(!I){I=!0,F();const j=U instanceof Error?U:this.reason;w.abort(j instanceof AxiosError?j:new CanceledError(j instanceof Error?j.message:j))}};let $=m&&setTimeout(()=>{$=null,P(new AxiosError(`timeout ${m} of ms exceeded`,AxiosError.ETIMEDOUT))},m);const F=()=>{d&&($&&clearTimeout($),$=null,d.forEach(U=>{U.unsubscribe?U.unsubscribe(P):U.removeEventListener("abort",P)}),d=null)};d.forEach(U=>U.addEventListener("abort",P));const{signal:D}=w;return D.unsubscribe=()=>utils$1.asap(F),D}},streamChunk=function*(d,m){let g=d.byteLength;if(g<m){yield d;return}let w=0,I;for(;w<g;)I=w+m,yield d.slice(w,I),w=I},readBytes=async function*(d,m){for await(const g of readStream(d))yield*streamChunk(g,m)},readStream=async function*(d){if(d[Symbol.asyncIterator]){yield*d;return}const m=d.getReader();try{for(;;){const{done:g,value:w}=await m.read();if(g)break;yield w}}finally{await m.cancel()}},trackStream=(d,m,g,w)=>{const I=readBytes(d,m);let P=0,$,F=D=>{$||($=!0,w&&w(D))};return new ReadableStream({async pull(D){try{const{done:U,value:j}=await I.next();if(U){F(),D.close();return}let Z=j.byteLength;if(g){let G=P+=Z;g(G)}D.enqueue(new Uint8Array(j))}catch(U){throw F(U),U}},cancel(D){return F(D),I.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(d=>m=>d.encode(m))(new TextEncoder):async d=>new Uint8Array(await new Response(d).arrayBuffer())),test=(d,...m)=>{try{return!!d(...m)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let d=!1;const m=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return d=!0,"half"}}).headers.has("Content-Type");return d&&!m}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(d=>d.body)};isFetchSupported&&(d=>{["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!resolvers[m]&&(resolvers[m]=utils$1.isFunction(d[m])?g=>g[m]():(g,w)=>{throw new AxiosError(`Response type '${m}' is not supported`,AxiosError.ERR_NOT_SUPPORT,w)})})})(new Response);const getBodyLength=async d=>{if(d==null)return 0;if(utils$1.isBlob(d))return d.size;if(utils$1.isSpecCompliantForm(d))return(await new Request(platform.origin,{method:"POST",body:d}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(d)||utils$1.isArrayBuffer(d))return d.byteLength;if(utils$1.isURLSearchParams(d)&&(d=d+""),utils$1.isString(d))return(await encodeText(d)).byteLength},resolveBodyLength=async(d,m)=>{const g=utils$1.toFiniteNumber(d.getContentLength());return g??getBodyLength(m)},fetchAdapter=isFetchSupported&&(async d=>{let{url:m,method:g,data:w,signal:I,cancelToken:P,timeout:$,onDownloadProgress:F,onUploadProgress:D,responseType:U,headers:j,withCredentials:Z="same-origin",fetchOptions:G}=resolveConfig(d);U=U?(U+"").toLowerCase():"text";let H=composeSignals([I,P&&P.toAbortSignal()],$),W;const q=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let Q;try{if(D&&supportsRequestStream&&g!=="get"&&g!=="head"&&(Q=await resolveBodyLength(j,w))!==0){let X=new Request(m,{method:"POST",body:w,duplex:"half"}),ot;if(utils$1.isFormData(w)&&(ot=X.headers.get("content-type"))&&j.setContentType(ot),X.body){const[it,st]=progressEventDecorator(Q,progressEventReducer(asyncDecorator(D)));w=trackStream(X.body,DEFAULT_CHUNK_SIZE,it,st)}}utils$1.isString(Z)||(Z=Z?"include":"omit");const et="credentials"in Request.prototype;W=new Request(m,{...G,signal:H,method:g.toUpperCase(),headers:j.normalize().toJSON(),body:w,duplex:"half",credentials:et?Z:void 0});let J=await fetch(W);const V=supportsResponseStream&&(U==="stream"||U==="response");if(supportsResponseStream&&(F||V&&q)){const X={};["status","statusText","headers"].forEach(at=>{X[at]=J[at]});const ot=utils$1.toFiniteNumber(J.headers.get("content-length")),[it,st]=F&&progressEventDecorator(ot,progressEventReducer(asyncDecorator(F),!0))||[];J=new Response(trackStream(J.body,DEFAULT_CHUNK_SIZE,it,()=>{st&&st(),q&&q()}),X)}U=U||"text";let rt=await resolvers[utils$1.findKey(resolvers,U)||"text"](J,d);return!V&&q&&q(),await new Promise((X,ot)=>{settle(X,ot,{data:rt,headers:AxiosHeaders.from(J.headers),status:J.status,statusText:J.statusText,config:d,request:W})})}catch(et){throw q&&q(),et&&et.name==="TypeError"&&/fetch/i.test(et.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,d,W),{cause:et.cause||et}):AxiosError.from(et,et&&et.code,d,W)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(d,m)=>{if(d){try{Object.defineProperty(d,"name",{value:m})}catch{}Object.defineProperty(d,"adapterName",{value:m})}});const renderReason=d=>`- ${d}`,isResolvedHandle=d=>utils$1.isFunction(d)||d===null||d===!1,adapters={getAdapter:d=>{d=utils$1.isArray(d)?d:[d];const{length:m}=d;let g,w;const I={};for(let P=0;P<m;P++){g=d[P];let $;if(w=g,!isResolvedHandle(g)&&(w=knownAdapters[($=String(g)).toLowerCase()],w===void 0))throw new AxiosError(`Unknown adapter '${$}'`);if(w)break;I[$||"#"+P]=w}if(!w){const P=Object.entries(I).map(([F,D])=>`adapter ${F} `+(D===!1?"is not supported by the environment":"is not available in the build"));let $=m?P.length>1?`since :
`+P.map(renderReason).join(`
`):" "+renderReason(P[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+$,"ERR_NOT_SUPPORT")}return w},adapters:knownAdapters};function throwIfCancellationRequested(d){if(d.cancelToken&&d.cancelToken.throwIfRequested(),d.signal&&d.signal.aborted)throw new CanceledError(null,d)}function dispatchRequest(d){return throwIfCancellationRequested(d),d.headers=AxiosHeaders.from(d.headers),d.data=transformData.call(d,d.transformRequest),["post","put","patch"].indexOf(d.method)!==-1&&d.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(d.adapter||defaults.adapter)(d).then(function(w){return throwIfCancellationRequested(d),w.data=transformData.call(d,d.transformResponse,w),w.headers=AxiosHeaders.from(w.headers),w},function(w){return isCancel(w)||(throwIfCancellationRequested(d),w&&w.response&&(w.response.data=transformData.call(d,d.transformResponse,w.response),w.response.headers=AxiosHeaders.from(w.response.headers))),Promise.reject(w)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((d,m)=>{validators$1[d]=function(w){return typeof w===d||"a"+(m<1?"n ":" ")+d}});const deprecatedWarnings={};validators$1.transitional=function(m,g,w){function I(P,$){return"[Axios v"+VERSION+"] Transitional option '"+P+"'"+$+(w?". "+w:"")}return(P,$,F)=>{if(m===!1)throw new AxiosError(I($," has been removed"+(g?" in "+g:"")),AxiosError.ERR_DEPRECATED);return g&&!deprecatedWarnings[$]&&(deprecatedWarnings[$]=!0,console.warn(I($," has been deprecated since v"+g+" and will be removed in the near future"))),m?m(P,$,F):!0}};validators$1.spelling=function(m){return(g,w)=>(console.warn(`${w} is likely a misspelling of ${m}`),!0)};function assertOptions(d,m,g){if(typeof d!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const w=Object.keys(d);let I=w.length;for(;I-- >0;){const P=w[I],$=m[P];if($){const F=d[P],D=F===void 0||$(F,P,d);if(D!==!0)throw new AxiosError("option "+P+" must be "+D,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(g!==!0)throw new AxiosError("Unknown option "+P,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(m){this.defaults=m,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(m,g){try{return await this._request(m,g)}catch(w){if(w instanceof Error){let I={};Error.captureStackTrace?Error.captureStackTrace(I):I=new Error;const P=I.stack?I.stack.replace(/^.+\n/,""):"";try{w.stack?P&&!String(w.stack).endsWith(P.replace(/^.+\n.+\n/,""))&&(w.stack+=`
`+P):w.stack=P}catch{}}throw w}}_request(m,g){typeof m=="string"?(g=g||{},g.url=m):g=m||{},g=mergeConfig(this.defaults,g);const{transitional:w,paramsSerializer:I,headers:P}=g;w!==void 0&&validator.assertOptions(w,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),I!=null&&(utils$1.isFunction(I)?g.paramsSerializer={serialize:I}:validator.assertOptions(I,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(g,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),g.method=(g.method||this.defaults.method||"get").toLowerCase();let $=P&&utils$1.merge(P.common,P[g.method]);P&&utils$1.forEach(["delete","get","head","post","put","patch","common"],W=>{delete P[W]}),g.headers=AxiosHeaders.concat($,P);const F=[];let D=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(g)===!1||(D=D&&q.synchronous,F.unshift(q.fulfilled,q.rejected))});const U=[];this.interceptors.response.forEach(function(q){U.push(q.fulfilled,q.rejected)});let j,Z=0,G;if(!D){const W=[dispatchRequest.bind(this),void 0];for(W.unshift.apply(W,F),W.push.apply(W,U),G=W.length,j=Promise.resolve(g);Z<G;)j=j.then(W[Z++],W[Z++]);return j}G=F.length;let H=g;for(Z=0;Z<G;){const W=F[Z++],q=F[Z++];try{H=W(H)}catch(Q){q.call(this,Q);break}}try{j=dispatchRequest.call(this,H)}catch(W){return Promise.reject(W)}for(Z=0,G=U.length;Z<G;)j=j.then(U[Z++],U[Z++]);return j}getUri(m){m=mergeConfig(this.defaults,m);const g=buildFullPath(m.baseURL,m.url);return buildURL(g,m.params,m.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(m){Axios.prototype[m]=function(g,w){return this.request(mergeConfig(w||{},{method:m,url:g,data:(w||{}).data}))}});utils$1.forEach(["post","put","patch"],function(m){function g(w){return function(P,$,F){return this.request(mergeConfig(F||{},{method:m,headers:w?{"Content-Type":"multipart/form-data"}:{},url:P,data:$}))}}Axios.prototype[m]=g(),Axios.prototype[m+"Form"]=g(!0)});class CancelToken{constructor(m){if(typeof m!="function")throw new TypeError("executor must be a function.");let g;this.promise=new Promise(function(P){g=P});const w=this;this.promise.then(I=>{if(!w._listeners)return;let P=w._listeners.length;for(;P-- >0;)w._listeners[P](I);w._listeners=null}),this.promise.then=I=>{let P;const $=new Promise(F=>{w.subscribe(F),P=F}).then(I);return $.cancel=function(){w.unsubscribe(P)},$},m(function(P,$,F){w.reason||(w.reason=new CanceledError(P,$,F),g(w.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(m){if(this.reason){m(this.reason);return}this._listeners?this._listeners.push(m):this._listeners=[m]}unsubscribe(m){if(!this._listeners)return;const g=this._listeners.indexOf(m);g!==-1&&this._listeners.splice(g,1)}toAbortSignal(){const m=new AbortController,g=w=>{m.abort(w)};return this.subscribe(g),m.signal.unsubscribe=()=>this.unsubscribe(g),m.signal}static source(){let m;return{token:new CancelToken(function(I){m=I}),cancel:m}}}function spread(d){return function(g){return d.apply(null,g)}}function isAxiosError(d){return utils$1.isObject(d)&&d.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([d,m])=>{HttpStatusCode[m]=d});function createInstance(d){const m=new Axios(d),g=bind(Axios.prototype.request,m);return utils$1.extend(g,Axios.prototype,m,{allOwnKeys:!0}),utils$1.extend(g,m,null,{allOwnKeys:!0}),g.create=function(I){return createInstance(mergeConfig(d,I))},g}const axios=createInstance(defaults);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(m){return Promise.all(m)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=d=>formDataToJSON(utils$1.isHTMLForm(d)?new FormData(d):d);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;var root_1$2=template('<div style="padding-bottom: 10px;"><div class="card all-sides-shadow svelte-ll99s7"><div class="card-body" style="text-align: center;"><p class="h3 text-danger">Your Link Analyzer is not up to date!</p> <p> </p> <p> </p> <p class="text-warning">Your Link Analyzer may not work with this app without updating!</p> <div><button type="button" class="btn btn-warning">Download Firmware</button> <button type="button" class="btn btn-warning">Update Guide</button></div></div></div></div>');function VersionUpdate(d,m){push(m,!0);let g=state(void 0);async function w(){let U=await axios.get("https://api.github.com/repos/zarcha/Link-Analyzer-Firmware/tags");set(g,proxy(U.data[0].name))}function I(){window.open("https://github.com/zarcha/Link-Analyzer-Firmware/releases","_blank").focus()}function P(){window.open("https://github.com/zarcha/Link-Analyzer-Firmware#flashingupdating","_blank").focus()}w();var $=comment(),F=first_child($);{var D=U=>{var j=root_1$2(),Z=child(j),G=child(Z),H=sibling(child(G),2),W=child(H),q=sibling(H,2),Q=child(q),et=sibling(q,4),J=child(et),V=sibling(J,2);template_effect(()=>{set_text(W,`Link Analyzer Version: ${m.version??""}`),set_text(Q,`Current Version: ${get(g)??""}`)}),event("click",J,I),event("click",V,P),append(U,j)};if_block(F,U=>{get(g)&&m.version!=get(g)&&U(D)})}append(d,$),pop()}var root$4=template('<div style="padding-bottom: 10px;"><div class="input-group"><span class="input-group-text" style="width: 120px"> </span> <input type="number" class="form-control"></div></div>');function NumberField(d,m){let g=prop(m,"value",15);var w=root$4(),I=child(w),P=child(I),$=child(P),F=sibling(P,2);template_effect(()=>set_text($,m.name)),bind_value(F,g),append(d,w)}var root_1$1=template('<li class="pointer svelte-3unfp"><a class="dropdown-item navi-size align-center svelte-3unfp"> </a></li>'),root$3=template('<div class="align-center pad-bottom svelte-3unfp"><div class="dropdown"><button type="button" class="btn btn-warning dropdown-toggle navi-size svelte-3unfp" data-bs-toggle="dropdown"> </button> <ul class="dropdown-menu"></ul></div></div>');function NaviField(d,m){let g=prop(m,"value",15),w=["HeatMan","ElecMan","SlashMan","EraseMan","ChargeMan","SpoutMan/AquaMan","TomahawkMan","TenguMan","GroundMan","DustMan","MegaMan","ProtoMan","Dark ProtoMan","Colonel","Forte/Bass","Dark MegaMan"];var I=root$3(),P=child(I),$=child(P),F=child($),D=sibling($,2);each(D,21,()=>w,index,(U,j,Z)=>{var G=root_1$1(),H=child(G),W=child(H);template_effect(()=>set_text(W,get(j))),event("click",H,()=>g(Z+1)),append(U,G)}),template_effect(()=>set_text(F,w[g()-1])),append(d,I)}class LinkAnalyzer{async connect(){let m=await navigator.serial.requestPort();return await m.open({baudRate:9600}),m}async write(m,g){const w=m.writable.getWriter();await w.write(new TextEncoder().encode(g+`
`)),w.releaseLock()}async writeSync(m,g){return new Promise(async(w,I)=>{await this.write(m,g);let P=await this.read(m,3e4);w(P)})}async read(m,g){return new Promise(async(w,I)=>{let P;g&&(P=setTimeout(D=>{D("Timed out waiting")},g,I));const $=m.readable.getReader();let F="";for(;;){const{value:D,done:U}=await $.read();if(F+=new TextDecoder().decode(D),F.includes(`
`))break}$.releaseLock(),clearTimeout(P),w(F.replace(/(\r\n|\n|\r)/gm,""))})}}function hex2int(d,m=!1){if(typeof d!="string"||!/^[0-9A-Fa-f]+$/.test(d))throw new Error("Input must be a valid hexadecimal string.");if(d.length%2!==0)throw new Error("Hexadecimal string length must be even.");return m&&(d=d.match(/.{2}/g).reverse().join("")),parseInt(d,16)}function int2hex(d,m=!1){if(!Number.isInteger(d))throw new Error("Input must be an integer.");if(d<0)throw new Error("This function does not support negative numbers for endianness conversion.");let g=d.toString(16).toUpperCase();return g.length%2!==0&&(g="0"+g),m&&(g=g.match(/.{2}/g).reverse().join("")),g}const delay=d=>new Promise(m=>setTimeout(m,d));let locations={naviId:{start:0,length:1,type:"int",little:!1,multiplier:1},petId:{start:2,length:2,type:"int",little:!1,multiplier:1},owner:{start:4,length:5,type:"int",little:!1,multiplier:1},level:{start:9,length:1,type:"int",little:!1,multiplier:1},experiance:{start:10,length:2,type:"int",little:!0,multiplier:1},health:{start:12,length:1,type:"int",little:!1,multiplier:10},attack:{start:13,length:1,type:"int",little:!1,multiplier:1},wins:{start:16,length:1,type:"int",little:!1,multiplier:1},losses:{start:17,length:1,type:"int",little:!1,multiplier:1},unkownSprite:{start:228,length:122,type:"image"},crossSprite:{start:356,length:122,type:"image"},loseSprite:{start:484,length:122,type:"image"},winSprite:{start:612,length:122,type:"image"}};function toObject(d){return{petId:getIntValue("petId",d),owner:getIntValue("owner",d),naviId:getIntValue("naviId",d),level:getIntValue("level",d),experiance:getIntValue("experiance",d),health:getIntValue("health",d),attack:getIntValue("attack",d),wins:getIntValue("wins",d),losses:getIntValue("losses",d),crossSprite:getRawValue("crossSprite",d),loseSprite:getRawValue("loseSprite",d),winSprite:getRawValue("winSprite",d),raw:d}}function toRaw(d){return Object.keys(d).forEach(g=>{if(g!="raw"&&locations[g].type=="int"){let w=d[g]/locations[g].multiplier;d.raw=setRawValue(g,int2hex(w,locations[g].little),d.raw)}else g!="raw"&&locations[g].type=="image"&&(d.raw=setRawValue(g,d[g],d.raw))}),d}function getIntValue(d,m){return hex2int(getRawValue(d,m),locations[d].little)*locations[d].multiplier}function getRawValue(d,m){return m.substr(locations[d].start*2,locations[d].length*2)}function setRawValue(d,m,g){return g.replaceAt(locations[d].start*2,locations[d].start*2+locations[d].length*2,m)}function pinoutToBin(d){return d.substring(2).slice(0,-1).split("").reverse().join("").padStart(16,"0")}String.prototype.replaceAt=function(d,m,g){return this.substring(0,d)+g+this.substring(d+g.length,this.length)};const linkChip={toObject,toRaw,pinoutToBin};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function getAugmentedNamespace(d){if(d.__esModule)return d;var m=d.default;if(typeof m=="function"){var g=function w(){return this instanceof w?Reflect.construct(m,arguments,this.constructor):m.apply(this,arguments)};g.prototype=m.prototype}else g={};return Object.defineProperty(g,"__esModule",{value:!0}),Object.keys(d).forEach(function(w){var I=Object.getOwnPropertyDescriptor(d,w);Object.defineProperty(g,w,I.get?I:{enumerable:!0,get:function(){return d[w]}})}),g}typeof self>"u"&&typeof commonjsGlobal=="object"&&(commonjsGlobal.self=commonjsGlobal);var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=0;m<64;++m)lookup[m]=d[m],revLookup[d.charCodeAt(m)]=m;revLookup[45]=62,revLookup[95]=63}function toByteArray(d){var m,g,w,I,P,$;inited||init();var F=d.length;if(F%4>0)throw new Error("Invalid string. Length must be a multiple of 4");P=d[F-2]==="="?2:d[F-1]==="="?1:0,$=new Arr(3*F/4-P),w=P>0?F-4:F;var D=0;for(m=0,g=0;m<w;m+=4,g+=3)I=revLookup[d.charCodeAt(m)]<<18|revLookup[d.charCodeAt(m+1)]<<12|revLookup[d.charCodeAt(m+2)]<<6|revLookup[d.charCodeAt(m+3)],$[D++]=I>>16&255,$[D++]=I>>8&255,$[D++]=255&I;return P===2?(I=revLookup[d.charCodeAt(m)]<<2|revLookup[d.charCodeAt(m+1)]>>4,$[D++]=255&I):P===1&&(I=revLookup[d.charCodeAt(m)]<<10|revLookup[d.charCodeAt(m+1)]<<4|revLookup[d.charCodeAt(m+2)]>>2,$[D++]=I>>8&255,$[D++]=255&I),$}function tripletToBase64(d){return lookup[d>>18&63]+lookup[d>>12&63]+lookup[d>>6&63]+lookup[63&d]}function encodeChunk(d,m,g){for(var w,I=[],P=m;P<g;P+=3)w=(d[P]<<16)+(d[P+1]<<8)+d[P+2],I.push(tripletToBase64(w));return I.join("")}function fromByteArray(d){var m;inited||init();for(var g=d.length,w=g%3,I="",P=[],$=16383,F=0,D=g-w;F<D;F+=$)P.push(encodeChunk(d,F,F+$>D?D:F+$));return w===1?(m=d[g-1],I+=lookup[m>>2],I+=lookup[m<<4&63],I+="=="):w===2&&(m=(d[g-2]<<8)+d[g-1],I+=lookup[m>>10],I+=lookup[m>>4&63],I+=lookup[m<<2&63],I+="="),P.push(I),P.join("")}function read(d,m,g,w,I){var P,$,F=8*I-w-1,D=(1<<F)-1,U=D>>1,j=-7,Z=g?I-1:0,G=g?-1:1,H=d[m+Z];for(Z+=G,P=H&(1<<-j)-1,H>>=-j,j+=F;j>0;P=256*P+d[m+Z],Z+=G,j-=8);for($=P&(1<<-j)-1,P>>=-j,j+=w;j>0;$=256*$+d[m+Z],Z+=G,j-=8);if(P===0)P=1-U;else{if(P===D)return $?NaN:1/0*(H?-1:1);$+=Math.pow(2,w),P-=U}return(H?-1:1)*$*Math.pow(2,P-w)}function write(d,m,g,w,I,P){var $,F,D,U=8*P-I-1,j=(1<<U)-1,Z=j>>1,G=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=w?0:P-1,W=w?1:-1,q=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(F=isNaN(m)?1:0,$=j):($=Math.floor(Math.log(m)/Math.LN2),m*(D=Math.pow(2,-$))<1&&($--,D*=2),(m+=$+Z>=1?G/D:G*Math.pow(2,1-Z))*D>=2&&($++,D/=2),$+Z>=j?(F=0,$=j):$+Z>=1?(F=(m*D-1)*Math.pow(2,I),$+=Z):(F=m*Math.pow(2,Z-1)*Math.pow(2,I),$=0));I>=8;d[g+H]=255&F,H+=W,F/=256,I-=8);for($=$<<I|F,U+=I;U>0;d[g+H]=255&$,H+=W,$/=256,U-=8);d[g+H-W]|=128*q}var toString={}.toString,isArray=Array.isArray||function(d){return toString.call(d)=="[object Array]"},INSPECT_MAX_BYTES=50;function kMaxLength(){return Buffer$1.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(d,m){if(kMaxLength()<m)throw new RangeError("Invalid typed array length");return Buffer$1.TYPED_ARRAY_SUPPORT?(d=new Uint8Array(m)).__proto__=Buffer$1.prototype:(d===null&&(d=new Buffer$1(m)),d.length=m),d}function Buffer$1(d,m,g){if(!(Buffer$1.TYPED_ARRAY_SUPPORT||this instanceof Buffer$1))return new Buffer$1(d,m,g);if(typeof d=="number"){if(typeof m=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,d)}return from(this,d,m,g)}function from(d,m,g,w){if(typeof m=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&m instanceof ArrayBuffer?fromArrayBuffer(d,m,g,w):typeof m=="string"?fromString(d,m,g):fromObject(d,m)}function assertSize(d){if(typeof d!="number")throw new TypeError('"size" argument must be a number');if(d<0)throw new RangeError('"size" argument must not be negative')}function alloc(d,m,g,w){return assertSize(m),m<=0?createBuffer(d,m):g!==void 0?typeof w=="string"?createBuffer(d,m).fill(g,w):createBuffer(d,m).fill(g):createBuffer(d,m)}function allocUnsafe(d,m){if(assertSize(m),d=createBuffer(d,m<0?0:0|checked(m)),!Buffer$1.TYPED_ARRAY_SUPPORT)for(var g=0;g<m;++g)d[g]=0;return d}function fromString(d,m,g){if(typeof g=="string"&&g!==""||(g="utf8"),!Buffer$1.isEncoding(g))throw new TypeError('"encoding" must be a valid string encoding');var w=0|byteLength(m,g),I=(d=createBuffer(d,w)).write(m,g);return I!==w&&(d=d.slice(0,I)),d}function fromArrayLike(d,m){var g=m.length<0?0:0|checked(m.length);d=createBuffer(d,g);for(var w=0;w<g;w+=1)d[w]=255&m[w];return d}function fromArrayBuffer(d,m,g,w){if(m.byteLength,g<0||m.byteLength<g)throw new RangeError("'offset' is out of bounds");if(m.byteLength<g+(w||0))throw new RangeError("'length' is out of bounds");return m=g===void 0&&w===void 0?new Uint8Array(m):w===void 0?new Uint8Array(m,g):new Uint8Array(m,g,w),Buffer$1.TYPED_ARRAY_SUPPORT?(d=m).__proto__=Buffer$1.prototype:d=fromArrayLike(d,m),d}function fromObject(d,m){if(internalIsBuffer(m)){var g=0|checked(m.length);return(d=createBuffer(d,g)).length===0||m.copy(d,0,0,g),d}if(m){if(typeof ArrayBuffer<"u"&&m.buffer instanceof ArrayBuffer||"length"in m)return typeof m.length!="number"||isnan(m.length)?createBuffer(d,0):fromArrayLike(d,m);if(m.type==="Buffer"&&isArray(m.data))return fromArrayLike(d,m.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(d){if(d>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|d}function internalIsBuffer(d){return!(d==null||!d._isBuffer)}function byteLength(d,m){if(internalIsBuffer(d))return d.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(d)||d instanceof ArrayBuffer))return d.byteLength;typeof d!="string"&&(d=""+d);var g=d.length;if(g===0)return 0;for(var w=!1;;)switch(m){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":case void 0:return utf8ToBytes(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*g;case"hex":return g>>>1;case"base64":return base64ToBytes(d).length;default:if(w)return utf8ToBytes(d).length;m=(""+m).toLowerCase(),w=!0}}function slowToString(d,m,g){var w=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0)<=(m>>>=0))return"";for(d||(d="utf8");;)switch(d){case"hex":return hexSlice(this,m,g);case"utf8":case"utf-8":return utf8Slice(this,m,g);case"ascii":return asciiSlice(this,m,g);case"latin1":case"binary":return latin1Slice(this,m,g);case"base64":return base64Slice(this,m,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,m,g);default:if(w)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),w=!0}}function swap(d,m,g){var w=d[m];d[m]=d[g],d[g]=w}function bidirectionalIndexOf(d,m,g,w,I){if(d.length===0)return-1;if(typeof g=="string"?(w=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,isNaN(g)&&(g=I?0:d.length-1),g<0&&(g=d.length+g),g>=d.length){if(I)return-1;g=d.length-1}else if(g<0){if(!I)return-1;g=0}if(typeof m=="string"&&(m=Buffer$1.from(m,w)),internalIsBuffer(m))return m.length===0?-1:arrayIndexOf(d,m,g,w,I);if(typeof m=="number")return m&=255,Buffer$1.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(d,m,g):Uint8Array.prototype.lastIndexOf.call(d,m,g):arrayIndexOf(d,[m],g,w,I);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(d,m,g,w,I){var P,$=1,F=d.length,D=m.length;if(w!==void 0&&((w=String(w).toLowerCase())==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(d.length<2||m.length<2)return-1;$=2,F/=2,D/=2,g/=2}function U(H,W){return $===1?H[W]:H.readUInt16BE(W*$)}if(I){var j=-1;for(P=g;P<F;P++)if(U(d,P)===U(m,j===-1?0:P-j)){if(j===-1&&(j=P),P-j+1===D)return j*$}else j!==-1&&(P-=P-j),j=-1}else for(g+D>F&&(g=F-D),P=g;P>=0;P--){for(var Z=!0,G=0;G<D;G++)if(U(d,P+G)!==U(m,G)){Z=!1;break}if(Z)return P}return-1}function hexWrite(d,m,g,w){g=Number(g)||0;var I=d.length-g;w?(w=Number(w))>I&&(w=I):w=I;var P=m.length;if(P%2!=0)throw new TypeError("Invalid hex string");w>P/2&&(w=P/2);for(var $=0;$<w;++$){var F=parseInt(m.substr(2*$,2),16);if(isNaN(F))return $;d[g+$]=F}return $}function utf8Write(d,m,g,w){return blitBuffer(utf8ToBytes(m,d.length-g),d,g,w)}function asciiWrite(d,m,g,w){return blitBuffer(asciiToBytes(m),d,g,w)}function latin1Write(d,m,g,w){return asciiWrite(d,m,g,w)}function base64Write(d,m,g,w){return blitBuffer(base64ToBytes(m),d,g,w)}function ucs2Write(d,m,g,w){return blitBuffer(utf16leToBytes(m,d.length-g),d,g,w)}function base64Slice(d,m,g){return m===0&&g===d.length?fromByteArray(d):fromByteArray(d.slice(m,g))}function utf8Slice(d,m,g){g=Math.min(d.length,g);for(var w=[],I=m;I<g;){var P,$,F,D,U=d[I],j=null,Z=U>239?4:U>223?3:U>191?2:1;if(I+Z<=g)switch(Z){case 1:U<128&&(j=U);break;case 2:(192&(P=d[I+1]))==128&&(D=(31&U)<<6|63&P)>127&&(j=D);break;case 3:P=d[I+1],$=d[I+2],(192&P)==128&&(192&$)==128&&(D=(15&U)<<12|(63&P)<<6|63&$)>2047&&(D<55296||D>57343)&&(j=D);break;case 4:P=d[I+1],$=d[I+2],F=d[I+3],(192&P)==128&&(192&$)==128&&(192&F)==128&&(D=(15&U)<<18|(63&P)<<12|(63&$)<<6|63&F)>65535&&D<1114112&&(j=D)}j===null?(j=65533,Z=1):j>65535&&(j-=65536,w.push(j>>>10&1023|55296),j=56320|1023&j),w.push(j),I+=Z}return decodeCodePointsArray(w)}Buffer$1.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT===void 0||global$1.TYPED_ARRAY_SUPPORT,kMaxLength(),Buffer$1.poolSize=8192,Buffer$1._augment=function(d){return d.__proto__=Buffer$1.prototype,d},Buffer$1.from=function(d,m,g){return from(null,d,m,g)},Buffer$1.TYPED_ARRAY_SUPPORT&&(Buffer$1.prototype.__proto__=Uint8Array.prototype,Buffer$1.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer$1[Symbol.species]),Buffer$1.alloc=function(d,m,g){return alloc(null,d,m,g)},Buffer$1.allocUnsafe=function(d){return allocUnsafe(null,d)},Buffer$1.allocUnsafeSlow=function(d){return allocUnsafe(null,d)},Buffer$1.isBuffer=isBuffer,Buffer$1.compare=function(d,m){if(!internalIsBuffer(d)||!internalIsBuffer(m))throw new TypeError("Arguments must be Buffers");if(d===m)return 0;for(var g=d.length,w=m.length,I=0,P=Math.min(g,w);I<P;++I)if(d[I]!==m[I]){g=d[I],w=m[I];break}return g<w?-1:w<g?1:0},Buffer$1.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer$1.concat=function(d,m){if(!isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return Buffer$1.alloc(0);var g;if(m===void 0)for(m=0,g=0;g<d.length;++g)m+=d[g].length;var w=Buffer$1.allocUnsafe(m),I=0;for(g=0;g<d.length;++g){var P=d[g];if(!internalIsBuffer(P))throw new TypeError('"list" argument must be an Array of Buffers');P.copy(w,I),I+=P.length}return w},Buffer$1.byteLength=byteLength,Buffer$1.prototype._isBuffer=!0,Buffer$1.prototype.swap16=function(){var d=this.length;if(d%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<d;m+=2)swap(this,m,m+1);return this},Buffer$1.prototype.swap32=function(){var d=this.length;if(d%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<d;m+=4)swap(this,m,m+3),swap(this,m+1,m+2);return this},Buffer$1.prototype.swap64=function(){var d=this.length;if(d%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<d;m+=8)swap(this,m,m+7),swap(this,m+1,m+6),swap(this,m+2,m+5),swap(this,m+3,m+4);return this},Buffer$1.prototype.toString=function(){var d=0|this.length;return d===0?"":arguments.length===0?utf8Slice(this,0,d):slowToString.apply(this,arguments)},Buffer$1.prototype.equals=function(d){if(!internalIsBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d||Buffer$1.compare(this,d)===0},Buffer$1.prototype.inspect=function(){var d="",m=INSPECT_MAX_BYTES;return this.length>0&&(d=this.toString("hex",0,m).match(/.{2}/g).join(" "),this.length>m&&(d+=" ... ")),"<Buffer "+d+">"},Buffer$1.prototype.compare=function(d,m,g,w,I){if(!internalIsBuffer(d))throw new TypeError("Argument must be a Buffer");if(m===void 0&&(m=0),g===void 0&&(g=d?d.length:0),w===void 0&&(w=0),I===void 0&&(I=this.length),m<0||g>d.length||w<0||I>this.length)throw new RangeError("out of range index");if(w>=I&&m>=g)return 0;if(w>=I)return-1;if(m>=g)return 1;if(this===d)return 0;for(var P=(I>>>=0)-(w>>>=0),$=(g>>>=0)-(m>>>=0),F=Math.min(P,$),D=this.slice(w,I),U=d.slice(m,g),j=0;j<F;++j)if(D[j]!==U[j]){P=D[j],$=U[j];break}return P<$?-1:$<P?1:0},Buffer$1.prototype.includes=function(d,m,g){return this.indexOf(d,m,g)!==-1},Buffer$1.prototype.indexOf=function(d,m,g){return bidirectionalIndexOf(this,d,m,g,!0)},Buffer$1.prototype.lastIndexOf=function(d,m,g){return bidirectionalIndexOf(this,d,m,g,!1)},Buffer$1.prototype.write=function(d,m,g,w){if(m===void 0)w="utf8",g=this.length,m=0;else if(g===void 0&&typeof m=="string")w=m,g=this.length,m=0;else{if(!isFinite(m))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");m|=0,isFinite(g)?(g|=0,w===void 0&&(w="utf8")):(w=g,g=void 0)}var I=this.length-m;if((g===void 0||g>I)&&(g=I),d.length>0&&(g<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");for(var P=!1;;)switch(w){case"hex":return hexWrite(this,d,m,g);case"utf8":case"utf-8":return utf8Write(this,d,m,g);case"ascii":return asciiWrite(this,d,m,g);case"latin1":case"binary":return latin1Write(this,d,m,g);case"base64":return base64Write(this,d,m,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,d,m,g);default:if(P)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),P=!0}},Buffer$1.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(d){var m=d.length;if(m<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,d);for(var g="",w=0;w<m;)g+=String.fromCharCode.apply(String,d.slice(w,w+=MAX_ARGUMENTS_LENGTH));return g}function asciiSlice(d,m,g){var w="";g=Math.min(d.length,g);for(var I=m;I<g;++I)w+=String.fromCharCode(127&d[I]);return w}function latin1Slice(d,m,g){var w="";g=Math.min(d.length,g);for(var I=m;I<g;++I)w+=String.fromCharCode(d[I]);return w}function hexSlice(d,m,g){var w=d.length;(!m||m<0)&&(m=0),(!g||g<0||g>w)&&(g=w);for(var I="",P=m;P<g;++P)I+=toHex(d[P]);return I}function utf16leSlice(d,m,g){for(var w=d.slice(m,g),I="",P=0;P<w.length;P+=2)I+=String.fromCharCode(w[P]+256*w[P+1]);return I}function checkOffset(d,m,g){if(d%1!=0||d<0)throw new RangeError("offset is not uint");if(d+m>g)throw new RangeError("Trying to access beyond buffer length")}function checkInt(d,m,g,w,I,P){if(!internalIsBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>I||m<P)throw new RangeError('"value" argument is out of bounds');if(g+w>d.length)throw new RangeError("Index out of range")}function objectWriteUInt16(d,m,g,w){m<0&&(m=65535+m+1);for(var I=0,P=Math.min(d.length-g,2);I<P;++I)d[g+I]=(m&255<<8*(w?I:1-I))>>>8*(w?I:1-I)}function objectWriteUInt32(d,m,g,w){m<0&&(m=4294967295+m+1);for(var I=0,P=Math.min(d.length-g,4);I<P;++I)d[g+I]=m>>>8*(w?I:3-I)&255}function checkIEEE754(d,m,g,w,I,P){if(g+w>d.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function writeFloat(d,m,g,w,I){return I||checkIEEE754(d,m,g,4),write(d,m,g,w,23,4),g+4}function writeDouble(d,m,g,w,I){return I||checkIEEE754(d,m,g,8),write(d,m,g,w,52,8),g+8}Buffer$1.prototype.slice=function(d,m){var g,w=this.length;if((d=~~d)<0?(d+=w)<0&&(d=0):d>w&&(d=w),(m=m===void 0?w:~~m)<0?(m+=w)<0&&(m=0):m>w&&(m=w),m<d&&(m=d),Buffer$1.TYPED_ARRAY_SUPPORT)(g=this.subarray(d,m)).__proto__=Buffer$1.prototype;else{var I=m-d;g=new Buffer$1(I,void 0);for(var P=0;P<I;++P)g[P]=this[P+d]}return g},Buffer$1.prototype.readUIntLE=function(d,m,g){d|=0,m|=0,g||checkOffset(d,m,this.length);for(var w=this[d],I=1,P=0;++P<m&&(I*=256);)w+=this[d+P]*I;return w},Buffer$1.prototype.readUIntBE=function(d,m,g){d|=0,m|=0,g||checkOffset(d,m,this.length);for(var w=this[d+--m],I=1;m>0&&(I*=256);)w+=this[d+--m]*I;return w},Buffer$1.prototype.readUInt8=function(d,m){return m||checkOffset(d,1,this.length),this[d]},Buffer$1.prototype.readUInt16LE=function(d,m){return m||checkOffset(d,2,this.length),this[d]|this[d+1]<<8},Buffer$1.prototype.readUInt16BE=function(d,m){return m||checkOffset(d,2,this.length),this[d]<<8|this[d+1]},Buffer$1.prototype.readUInt32LE=function(d,m){return m||checkOffset(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+16777216*this[d+3]},Buffer$1.prototype.readUInt32BE=function(d,m){return m||checkOffset(d,4,this.length),16777216*this[d]+(this[d+1]<<16|this[d+2]<<8|this[d+3])},Buffer$1.prototype.readIntLE=function(d,m,g){d|=0,m|=0,g||checkOffset(d,m,this.length);for(var w=this[d],I=1,P=0;++P<m&&(I*=256);)w+=this[d+P]*I;return w>=(I*=128)&&(w-=Math.pow(2,8*m)),w},Buffer$1.prototype.readIntBE=function(d,m,g){d|=0,m|=0,g||checkOffset(d,m,this.length);for(var w=m,I=1,P=this[d+--w];w>0&&(I*=256);)P+=this[d+--w]*I;return P>=(I*=128)&&(P-=Math.pow(2,8*m)),P},Buffer$1.prototype.readInt8=function(d,m){return m||checkOffset(d,1,this.length),128&this[d]?-1*(255-this[d]+1):this[d]},Buffer$1.prototype.readInt16LE=function(d,m){m||checkOffset(d,2,this.length);var g=this[d]|this[d+1]<<8;return 32768&g?4294901760|g:g},Buffer$1.prototype.readInt16BE=function(d,m){m||checkOffset(d,2,this.length);var g=this[d+1]|this[d]<<8;return 32768&g?4294901760|g:g},Buffer$1.prototype.readInt32LE=function(d,m){return m||checkOffset(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},Buffer$1.prototype.readInt32BE=function(d,m){return m||checkOffset(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},Buffer$1.prototype.readFloatLE=function(d,m){return m||checkOffset(d,4,this.length),read(this,d,!0,23,4)},Buffer$1.prototype.readFloatBE=function(d,m){return m||checkOffset(d,4,this.length),read(this,d,!1,23,4)},Buffer$1.prototype.readDoubleLE=function(d,m){return m||checkOffset(d,8,this.length),read(this,d,!0,52,8)},Buffer$1.prototype.readDoubleBE=function(d,m){return m||checkOffset(d,8,this.length),read(this,d,!1,52,8)},Buffer$1.prototype.writeUIntLE=function(d,m,g,w){d=+d,m|=0,g|=0,w||checkInt(this,d,m,g,Math.pow(2,8*g)-1,0);var I=1,P=0;for(this[m]=255&d;++P<g&&(I*=256);)this[m+P]=d/I&255;return m+g},Buffer$1.prototype.writeUIntBE=function(d,m,g,w){d=+d,m|=0,g|=0,w||checkInt(this,d,m,g,Math.pow(2,8*g)-1,0);var I=g-1,P=1;for(this[m+I]=255&d;--I>=0&&(P*=256);)this[m+I]=d/P&255;return m+g},Buffer$1.prototype.writeUInt8=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,1,255,0),Buffer$1.TYPED_ARRAY_SUPPORT||(d=Math.floor(d)),this[m]=255&d,m+1},Buffer$1.prototype.writeUInt16LE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=255&d,this[m+1]=d>>>8):objectWriteUInt16(this,d,m,!0),m+2},Buffer$1.prototype.writeUInt16BE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=d>>>8,this[m+1]=255&d):objectWriteUInt16(this,d,m,!1),m+2},Buffer$1.prototype.writeUInt32LE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m+3]=d>>>24,this[m+2]=d>>>16,this[m+1]=d>>>8,this[m]=255&d):objectWriteUInt32(this,d,m,!0),m+4},Buffer$1.prototype.writeUInt32BE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=d>>>24,this[m+1]=d>>>16,this[m+2]=d>>>8,this[m+3]=255&d):objectWriteUInt32(this,d,m,!1),m+4},Buffer$1.prototype.writeIntLE=function(d,m,g,w){if(d=+d,m|=0,!w){var I=Math.pow(2,8*g-1);checkInt(this,d,m,g,I-1,-I)}var P=0,$=1,F=0;for(this[m]=255&d;++P<g&&($*=256);)d<0&&F===0&&this[m+P-1]!==0&&(F=1),this[m+P]=(d/$|0)-F&255;return m+g},Buffer$1.prototype.writeIntBE=function(d,m,g,w){if(d=+d,m|=0,!w){var I=Math.pow(2,8*g-1);checkInt(this,d,m,g,I-1,-I)}var P=g-1,$=1,F=0;for(this[m+P]=255&d;--P>=0&&($*=256);)d<0&&F===0&&this[m+P+1]!==0&&(F=1),this[m+P]=(d/$|0)-F&255;return m+g},Buffer$1.prototype.writeInt8=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,1,127,-128),Buffer$1.TYPED_ARRAY_SUPPORT||(d=Math.floor(d)),d<0&&(d=255+d+1),this[m]=255&d,m+1},Buffer$1.prototype.writeInt16LE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=255&d,this[m+1]=d>>>8):objectWriteUInt16(this,d,m,!0),m+2},Buffer$1.prototype.writeInt16BE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=d>>>8,this[m+1]=255&d):objectWriteUInt16(this,d,m,!1),m+2},Buffer$1.prototype.writeInt32LE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,4,2147483647,-2147483648),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=255&d,this[m+1]=d>>>8,this[m+2]=d>>>16,this[m+3]=d>>>24):objectWriteUInt32(this,d,m,!0),m+4},Buffer$1.prototype.writeInt32BE=function(d,m,g){return d=+d,m|=0,g||checkInt(this,d,m,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),Buffer$1.TYPED_ARRAY_SUPPORT?(this[m]=d>>>24,this[m+1]=d>>>16,this[m+2]=d>>>8,this[m+3]=255&d):objectWriteUInt32(this,d,m,!1),m+4},Buffer$1.prototype.writeFloatLE=function(d,m,g){return writeFloat(this,d,m,!0,g)},Buffer$1.prototype.writeFloatBE=function(d,m,g){return writeFloat(this,d,m,!1,g)},Buffer$1.prototype.writeDoubleLE=function(d,m,g){return writeDouble(this,d,m,!0,g)},Buffer$1.prototype.writeDoubleBE=function(d,m,g){return writeDouble(this,d,m,!1,g)},Buffer$1.prototype.copy=function(d,m,g,w){if(g||(g=0),w||w===0||(w=this.length),m>=d.length&&(m=d.length),m||(m=0),w>0&&w<g&&(w=g),w===g||d.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("sourceStart out of bounds");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),d.length-m<w-g&&(w=d.length-m+g);var I,P=w-g;if(this===d&&g<m&&m<w)for(I=P-1;I>=0;--I)d[I+m]=this[I+g];else if(P<1e3||!Buffer$1.TYPED_ARRAY_SUPPORT)for(I=0;I<P;++I)d[I+m]=this[I+g];else Uint8Array.prototype.set.call(d,this.subarray(g,g+P),m);return P},Buffer$1.prototype.fill=function(d,m,g,w){if(typeof d=="string"){if(typeof m=="string"?(w=m,m=0,g=this.length):typeof g=="string"&&(w=g,g=this.length),d.length===1){var I=d.charCodeAt(0);I<256&&(d=I)}if(w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!Buffer$1.isEncoding(w))throw new TypeError("Unknown encoding: "+w)}else typeof d=="number"&&(d&=255);if(m<0||this.length<m||this.length<g)throw new RangeError("Out of range index");if(g<=m)return this;var P;if(m>>>=0,g=g===void 0?this.length:g>>>0,d||(d=0),typeof d=="number")for(P=m;P<g;++P)this[P]=d;else{var $=internalIsBuffer(d)?d:utf8ToBytes(new Buffer$1(d,w).toString()),F=$.length;for(P=0;P<g-m;++P)this[P+m]=$[P%F]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g,HeaderTypes;function base64clean(d){if((d=stringtrim(d).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;d.length%4!=0;)d+="=";return d}function stringtrim(d){return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")}function toHex(d){return d<16?"0"+d.toString(16):d.toString(16)}function utf8ToBytes(d,m){var g;m=m||1/0;for(var w=d.length,I=null,P=[],$=0;$<w;++$){if((g=d.charCodeAt($))>55295&&g<57344){if(!I){if(g>56319){(m-=3)>-1&&P.push(239,191,189);continue}if($+1===w){(m-=3)>-1&&P.push(239,191,189);continue}I=g;continue}if(g<56320){(m-=3)>-1&&P.push(239,191,189),I=g;continue}g=65536+(I-55296<<10|g-56320)}else I&&(m-=3)>-1&&P.push(239,191,189);if(I=null,g<128){if((m-=1)<0)break;P.push(g)}else if(g<2048){if((m-=2)<0)break;P.push(g>>6|192,63&g|128)}else if(g<65536){if((m-=3)<0)break;P.push(g>>12|224,g>>6&63|128,63&g|128)}else{if(!(g<1114112))throw new Error("Invalid code point");if((m-=4)<0)break;P.push(g>>18|240,g>>12&63|128,g>>6&63|128,63&g|128)}}return P}function asciiToBytes(d){for(var m=[],g=0;g<d.length;++g)m.push(255&d.charCodeAt(g));return m}function utf16leToBytes(d,m){for(var g,w,I,P=[],$=0;$<d.length&&!((m-=2)<0);++$)w=(g=d.charCodeAt($))>>8,I=g%256,P.push(I),P.push(w);return P}function base64ToBytes(d){return toByteArray(base64clean(d))}function blitBuffer(d,m,g,w){for(var I=0;I<w&&!(I+g>=m.length||I>=d.length);++I)m[I+g]=d[I];return I}function isnan(d){return d!=d}function isBuffer(d){return d!=null&&(!!d._isBuffer||isFastBuffer(d)||isSlowBuffer(d))}function isFastBuffer(d){return!!d.constructor&&typeof d.constructor.isBuffer=="function"&&d.constructor.isBuffer(d)}function isSlowBuffer(d){return typeof d.readFloatLE=="function"&&typeof d.slice=="function"&&isFastBuffer(d.slice(0,0))}(function(d){d[d.BITMAP_INFO_HEADER=40]="BITMAP_INFO_HEADER",d[d.BITMAP_V2_INFO_HEADER=52]="BITMAP_V2_INFO_HEADER",d[d.BITMAP_V3_INFO_HEADER=56]="BITMAP_V3_INFO_HEADER",d[d.BITMAP_V4_HEADER=108]="BITMAP_V4_HEADER",d[d.BITMAP_V5_HEADER=124]="BITMAP_V5_HEADER"})(HeaderTypes||(HeaderTypes={}));var HeaderTypes$1=HeaderTypes,BmpCompression;function maskColor(d,m,g,w){const I=1+~d&d,P=1+~m&m,$=1+~g&g,F=1+~w&w,D=d/I+1,U=m/P+1,j=g/$+1,Z=w/F+1;return{shiftRed:G=>(G&d)/I*256/D,shiftGreen:G=>(G&m)/P*256/U,shiftBlue:G=>(G&g)/$*256/j,shiftAlpha:w!==0?G=>(G&w)/F*256/Z:()=>255}}(function(d){d[d.NONE=0]="NONE",d[d.BI_RLE8=1]="BI_RLE8",d[d.BI_RLE4=2]="BI_RLE4",d[d.BI_BIT_FIELDS=3]="BI_BIT_FIELDS",d[d.BI_ALPHA_BIT_FIELDS=6]="BI_ALPHA_BIT_FIELDS"})(BmpCompression||(BmpCompression={}));class BmpDecoder{constructor(m,{toRGBA:g}={toRGBA:!1}){fe(this,"flag");fe(this,"fileSize");fe(this,"reserved1");fe(this,"reserved2");fe(this,"offset");fe(this,"headerSize");fe(this,"width");fe(this,"height");fe(this,"planes");fe(this,"bitPP");fe(this,"compression");fe(this,"rawSize");fe(this,"hr");fe(this,"vr");fe(this,"colors");fe(this,"importantColors");fe(this,"palette");fe(this,"data");fe(this,"maskRed");fe(this,"maskGreen");fe(this,"maskBlue");fe(this,"maskAlpha");fe(this,"toRGBA");fe(this,"pos");fe(this,"bottomUp");fe(this,"buffer");fe(this,"locRed");fe(this,"locGreen");fe(this,"locBlue");fe(this,"locAlpha");fe(this,"shiftRed");fe(this,"shiftGreen");fe(this,"shiftBlue");fe(this,"shiftAlpha");if(this.buffer=m,this.toRGBA=!!g,this.pos=0,this.bottomUp=!0,this.flag=this.buffer.toString("utf-8",0,this.pos+=2),this.flag!=="BM")throw new Error("Invalid BMP File");this.locRed=this.toRGBA?0:3,this.locGreen=this.toRGBA?1:2,this.locBlue=this.toRGBA?2:1,this.locAlpha=this.toRGBA?3:0,this.parseHeader(),this.parseRGBA()}parseHeader(){if(this.fileSize=this.readUInt32LE(),this.reserved1=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.reserved2=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.offset=this.readUInt32LE(),this.headerSize=this.readUInt32LE(),!(this.headerSize in HeaderTypes$1))throw new Error(`Unsupported BMP header size ${this.headerSize}`);if(this.width=this.readUInt32LE(),this.height=this.readUInt32LE(),this.height=this.height>2147483647?this.height-4294967296:this.height,this.planes=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.bitPP=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.compression=this.readUInt32LE(),this.rawSize=this.readUInt32LE(),this.hr=this.readUInt32LE(),this.vr=this.readUInt32LE(),this.colors=this.readUInt32LE(),this.importantColors=this.readUInt32LE(),this.bitPP===32?(this.maskAlpha=0,this.maskRed=16711680,this.maskGreen=65280,this.maskBlue=255):this.bitPP===16&&(this.maskAlpha=0,this.maskRed=31744,this.maskGreen=992,this.maskBlue=31),(this.headerSize>HeaderTypes$1.BITMAP_INFO_HEADER||this.compression===BmpCompression.BI_BIT_FIELDS||this.compression===BmpCompression.BI_ALPHA_BIT_FIELDS)&&(this.maskRed=this.readUInt32LE(),this.maskGreen=this.readUInt32LE(),this.maskBlue=this.readUInt32LE()),(this.headerSize>HeaderTypes$1.BITMAP_V2_INFO_HEADER||this.compression===BmpCompression.BI_ALPHA_BIT_FIELDS)&&(this.maskAlpha=this.readUInt32LE()),this.headerSize>HeaderTypes$1.BITMAP_V3_INFO_HEADER&&(this.pos+=HeaderTypes$1.BITMAP_V4_HEADER-HeaderTypes$1.BITMAP_V3_INFO_HEADER),this.headerSize>HeaderTypes$1.BITMAP_V4_HEADER&&(this.pos+=HeaderTypes$1.BITMAP_V5_HEADER-HeaderTypes$1.BITMAP_V4_HEADER),this.bitPP<=8||this.colors>0){const g=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(g);for(let w=0;w<g;w++){const I=this.buffer.readUInt8(this.pos++),P=this.buffer.readUInt8(this.pos++),$=this.buffer.readUInt8(this.pos++),F=this.buffer.readUInt8(this.pos++);this.palette[w]={red:$,green:P,blue:I,quad:F}}}this.height<0&&(this.height*=-1,this.bottomUp=!1);const m=maskColor(this.maskRed,this.maskGreen,this.maskBlue,this.maskAlpha);this.shiftRed=m.shiftRed,this.shiftGreen=m.shiftGreen,this.shiftBlue=m.shiftBlue,this.shiftAlpha=m.shiftAlpha}parseRGBA(){switch(this.data=Buffer$1.alloc(this.width*this.height*4),this.bitPP){case 1:this.bit1();break;case 4:this.bit4();break;case 8:this.bit8();break;case 16:this.bit16();break;case 24:this.bit24();break;default:this.bit32()}}bit1(){const m=Math.ceil(this.width/8),g=m%4,w=g!==0?4-g:0;this.scanImage(w,m,(I,P)=>{const $=this.buffer.readUInt8(this.pos++),F=P*this.width*4+8*I*4;for(let D=0;D<8&&8*I+D<this.width;D++){const U=this.palette[$>>7-D&1];this.data[F+D*this.locAlpha]=0,this.data[F+4*D+this.locBlue]=U.blue,this.data[F+4*D+this.locGreen]=U.green,this.data[F+4*D+this.locRed]=U.red}})}bit4(){if(this.compression===BmpCompression.BI_RLE4){this.data.fill(0);let m=!1,g=this.bottomUp?this.height-1:0,w=0;for(;w<this.data.length;){const I=this.buffer.readUInt8(this.pos++),P=this.buffer.readUInt8(this.pos++);if(I===0){if(P===0){g+=this.bottomUp?-1:1,w=g*this.width*4,m=!1;continue}if(P===1)break;if(P===2){const $=this.buffer.readUInt8(this.pos++),F=this.buffer.readUInt8(this.pos++);g+=this.bottomUp?-F:F,w+=F*this.width*4+4*$}else{let $=this.buffer.readUInt8(this.pos++);for(let F=0;F<P;F++)w=this.setPixelData(w,m?15&$:(240&$)>>4),1&F&&F+1<P&&($=this.buffer.readUInt8(this.pos++)),m=!m;(P+1>>1&1)==1&&this.pos++}}else for(let $=0;$<I;$++)w=this.setPixelData(w,m?15&P:(240&P)>>4),m=!m}}else{const m=Math.ceil(this.width/2),g=m%4,w=g!==0?4-g:0;this.scanImage(w,m,(I,P)=>{const $=this.buffer.readUInt8(this.pos++),F=P*this.width*4+2*I*4,D=$>>4;let U=this.palette[D];if(this.data[F]=0,this.data[F+1]=U.blue,this.data[F+2]=U.green,this.data[F+3]=U.red,2*I+1>=this.width)return!1;const j=15&$;U=this.palette[j],this.data[F+4]=0,this.data[F+4+1]=U.blue,this.data[F+4+2]=U.green,this.data[F+4+3]=U.red})}}bit8(){if(this.compression===BmpCompression.BI_RLE8){this.data.fill(0);let m=this.bottomUp?this.height-1:0,g=0;for(;g<this.data.length;){const w=this.buffer.readUInt8(this.pos++),I=this.buffer.readUInt8(this.pos++);if(w===0){if(I===0){m+=this.bottomUp?-1:1,g=m*this.width*4;continue}if(I===1)break;if(I===2){const P=this.buffer.readUInt8(this.pos++),$=this.buffer.readUInt8(this.pos++);m+=this.bottomUp?-$:$,g+=$*this.width*4+4*P}else{for(let P=0;P<I;P++){const $=this.buffer.readUInt8(this.pos++);g=this.setPixelData(g,$)}!0&I&&this.pos++}}else for(let P=0;P<w;P++)g=this.setPixelData(g,I)}}else{const m=this.width%4,g=m!==0?4-m:0;this.scanImage(g,this.width,(w,I)=>{const P=this.buffer.readUInt8(this.pos++),$=I*this.width*4+4*w;if(P<this.palette.length){const F=this.palette[P];this.data[$]=0,this.data[$+1]=F.blue,this.data[$+2]=F.green,this.data[$+3]=F.red}else this.data[$]=0,this.data[$+1]=255,this.data[$+2]=255,this.data[$+3]=255})}}bit16(){const m=this.width%2*2;this.scanImage(m,this.width,(g,w)=>{const I=w*this.width*4+4*g,P=this.buffer.readUInt16LE(this.pos);this.pos+=2,this.data[I+this.locRed]=this.shiftRed(P),this.data[I+this.locGreen]=this.shiftGreen(P),this.data[I+this.locBlue]=this.shiftBlue(P),this.data[I+this.locAlpha]=this.shiftAlpha(P)})}bit24(){const m=this.width%4;this.scanImage(m,this.width,(g,w)=>{const I=w*this.width*4+4*g,P=this.buffer.readUInt8(this.pos++),$=this.buffer.readUInt8(this.pos++),F=this.buffer.readUInt8(this.pos++);this.data[I+this.locRed]=F,this.data[I+this.locGreen]=$,this.data[I+this.locBlue]=P,this.data[I+this.locAlpha]=0})}bit32(){this.scanImage(0,this.width,(m,g)=>{const w=g*this.width*4+4*m,I=this.readUInt32LE();this.data[w+this.locRed]=this.shiftRed(I),this.data[w+this.locGreen]=this.shiftGreen(I),this.data[w+this.locBlue]=this.shiftBlue(I),this.data[w+this.locAlpha]=this.shiftAlpha(I)})}scanImage(m=0,g=this.width,w){for(let I=this.height-1;I>=0;I--){const P=this.bottomUp?I:this.height-1-I;for(let $=0;$<g;$++)if(w.call(this,$,P)===!1)return;this.pos+=m}}readUInt32LE(){const m=this.buffer.readUInt32LE(this.pos);return this.pos+=4,m}setPixelData(m,g){const{blue:w,green:I,red:P}=this.palette[g];return this.data[m+this.locAlpha]=0,this.data[m+1+this.locBlue]=w,this.data[m+2+this.locGreen]=I,this.data[m+3+this.locRed]=P,m+4}}function createInteger(d){return d.reduce((m,g)=>m<<1|g,0)}function createColor(d){return d.quad<<24|d.red<<16|d.green<<8|d.blue}class BmpEncoder{constructor(m){fe(this,"fileSize");fe(this,"reserved1");fe(this,"reserved2");fe(this,"offset");fe(this,"width");fe(this,"flag");fe(this,"height");fe(this,"planes");fe(this,"bitPP");fe(this,"compress");fe(this,"hr");fe(this,"vr");fe(this,"colors");fe(this,"importantColors");fe(this,"rawSize");fe(this,"headerSize");fe(this,"data");fe(this,"palette");fe(this,"extraBytes");fe(this,"buffer");fe(this,"bytesInColor");fe(this,"pos");switch(this.buffer=m.data,this.width=m.width,this.height=m.height,this.headerSize=HeaderTypes$1.BITMAP_INFO_HEADER,this.flag="BM",this.bitPP=m.bitPP||24,this.offset=54,this.reserved1=m.reserved1||0,this.reserved2=m.reserved2||0,this.planes=1,this.compress=0,this.hr=m.hr||0,this.vr=m.vr||0,this.importantColors=m.importantColors||0,this.colors=Math.min(2**(this.bitPP-1||1),m.colors||1/0),this.palette=m.palette||[],this.colors&&this.bitPP<16?this.offset+=4*this.colors:this.colors=0,this.bitPP){case 32:this.bytesInColor=4;break;case 16:this.bytesInColor=2;break;case 8:this.bytesInColor=1;break;case 4:this.bytesInColor=.5;break;case 1:this.bytesInColor=1/8;break;default:this.bytesInColor=3,this.bitPP=24}const g=this.width*this.bitPP/32,w=Math.ceil(g);this.extraBytes=4*(w-g),this.rawSize=this.height*w*4+2,this.fileSize=this.rawSize+this.offset,this.data=Buffer$1.alloc(this.fileSize,1),this.pos=0,this.encode()}encode(){switch(this.pos=0,this.writeHeader(),this.bitPP){case 32:this.bit32();break;case 16:this.bit16();break;case 8:this.bit8();break;case 4:this.bit4();break;case 1:this.bit1();break;default:this.bit24()}}writeHeader(){this.data.write(this.flag,this.pos,2),this.pos+=2,this.writeUInt32LE(this.fileSize),this.writeUInt32LE(this.reserved1<<16|this.reserved2),this.writeUInt32LE(this.offset),this.writeUInt32LE(this.headerSize),this.writeUInt32LE(this.width),this.writeUInt32LE(this.height),this.data.writeUInt16LE(this.planes,this.pos),this.pos+=2,this.data.writeUInt16LE(this.bitPP,this.pos),this.pos+=2,this.writeUInt32LE(this.compress),this.writeUInt32LE(this.rawSize),this.writeUInt32LE(this.hr),this.writeUInt32LE(this.vr),this.writeUInt32LE(this.colors),this.writeUInt32LE(this.importantColors)}bit1(){this.palette.length&&this.colors===2?this.initColors(1):(this.writeUInt32LE(16777215),this.writeUInt32LE(0)),this.pos+=1;let m=[];this.writeImage((g,w,I)=>{let P=w;P++;const $=this.buffer[P++],F=this.buffer[P++],D=.2126*this.buffer[P++]+.7152*F+.0722*$;return m.push(D>127?0:1),(I+1)%8==0?(this.data[g-1]=createInteger(m),m=[]):I===this.width-1&&m.length>0&&(this.data[g-1]=createInteger(m)<<4,m=[]),P})}bit4(){const m=this.initColors(4);let g=[];this.writeImage((w,I,P)=>{let $=I;const F=createColor({quad:this.buffer[$++],blue:this.buffer[$++],green:this.buffer[$++],red:this.buffer[$++]}),D=m.findIndex(U=>U===F);return D!==-1?g.push(D):g.push(0),(P+1)%2==0&&(this.data[w]=g[0]<<4|g[1],g=[]),$})}bit8(){const m=this.initColors(8);this.writeImage((g,w)=>{let I=w;const P=createColor({quad:this.buffer[I++],blue:this.buffer[I++],green:this.buffer[I++],red:this.buffer[I++]}),$=m.findIndex(F=>F===P);return this.data[g]=$!==-1?$:0,I})}bit16(){this.writeImage((m,g)=>{let w=g+1;const I=this.buffer[w++]/8,P=this.buffer[w++]/8,$=this.buffer[w++]/8<<10|P<<5|I;return this.data[m]=255&$,this.data[m+1]=(65280&$)>>8,w})}bit24(){this.writeImage((m,g)=>{let w=g+1;return this.data[m]=this.buffer[w++],this.data[m+1]=this.buffer[w++],this.data[m+2]=this.buffer[w++],w})}bit32(){this.writeImage((m,g)=>{let w=g;return this.data[m+3]=this.buffer[w++],this.data[m]=this.buffer[w++],this.data[m+1]=this.buffer[w++],this.data[m+2]=this.buffer[w++],w})}writeImage(m){const g=this.extraBytes+this.width*this.bytesInColor;let w=0;for(let I=0;I<this.height;I++)for(let P=0;P<this.width;P++){const $=Math.floor(this.pos+(this.height-1-I)*g+P*this.bytesInColor);w=m.call(this,$,w,P,I)}}initColors(m){const g=[];if(!this.palette.length)throw new Error(`To encode ${m}-bit BMPs a pallette is needed. Please choose up to ${this.colors} colors. Colors must be 32-bit integers.`);for(let w=0;w<this.colors;w++){const I=createColor(this.palette[w]);this.writeUInt32LE(I),g.push(I)}return g}writeUInt32LE(m){this.data.writeUInt32LE(m,this.pos),this.pos+=4}}function decode$2(d,m){return new BmpDecoder(d,m)}function encode$2(d){return new BmpEncoder(d)}function _typeof(d){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},_typeof(d)}var trimLeft=/^\s+/,trimRight=/\s+$/;function tinycolor(d,m){if(m=m||{},(d=d||"")instanceof tinycolor)return d;if(!(this instanceof tinycolor))return new tinycolor(d,m);var g=inputToRGB(d);this._originalInput=d,this._r=g.r,this._g=g.g,this._b=g.b,this._a=g.a,this._roundA=Math.round(100*this._a)/100,this._format=m.format||g.format,this._gradientType=m.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=g.ok}function inputToRGB(d){var m={r:0,g:0,b:0},g=1,w=null,I=null,P=null,$=!1,F=!1;return typeof d=="string"&&(d=stringInputToObject(d)),_typeof(d)=="object"&&(isValidCSSUnit(d.r)&&isValidCSSUnit(d.g)&&isValidCSSUnit(d.b)?(m=rgbToRgb(d.r,d.g,d.b),$=!0,F=String(d.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(d.h)&&isValidCSSUnit(d.s)&&isValidCSSUnit(d.v)?(w=convertToPercentage(d.s),I=convertToPercentage(d.v),m=hsvToRgb(d.h,w,I),$=!0,F="hsv"):isValidCSSUnit(d.h)&&isValidCSSUnit(d.s)&&isValidCSSUnit(d.l)&&(w=convertToPercentage(d.s),P=convertToPercentage(d.l),m=hslToRgb(d.h,w,P),$=!0,F="hsl"),d.hasOwnProperty("a")&&(g=d.a)),g=boundAlpha(g),{ok:$,format:d.format||F,r:Math.min(255,Math.max(m.r,0)),g:Math.min(255,Math.max(m.g,0)),b:Math.min(255,Math.max(m.b,0)),a:g}}function rgbToRgb(d,m,g){return{r:255*bound01(d,255),g:255*bound01(m,255),b:255*bound01(g,255)}}function rgbToHsl(d,m,g){d=bound01(d,255),m=bound01(m,255),g=bound01(g,255);var w,I,P=Math.max(d,m,g),$=Math.min(d,m,g),F=(P+$)/2;if(P==$)w=I=0;else{var D=P-$;switch(I=F>.5?D/(2-P-$):D/(P+$),P){case d:w=(m-g)/D+(m<g?6:0);break;case m:w=(g-d)/D+2;break;case g:w=(d-m)/D+4}w/=6}return{h:w,s:I,l:F}}function hslToRgb(d,m,g){var w,I,P;function $(U,j,Z){return Z<0&&(Z+=1),Z>1&&(Z-=1),Z<1/6?U+6*(j-U)*Z:Z<.5?j:Z<2/3?U+(j-U)*(2/3-Z)*6:U}if(d=bound01(d,360),m=bound01(m,100),g=bound01(g,100),m===0)w=I=P=g;else{var F=g<.5?g*(1+m):g+m-g*m,D=2*g-F;w=$(D,F,d+1/3),I=$(D,F,d),P=$(D,F,d-1/3)}return{r:255*w,g:255*I,b:255*P}}function rgbToHsv(d,m,g){d=bound01(d,255),m=bound01(m,255),g=bound01(g,255);var w,I,P=Math.max(d,m,g),$=Math.min(d,m,g),F=P,D=P-$;if(I=P===0?0:D/P,P==$)w=0;else{switch(P){case d:w=(m-g)/D+(m<g?6:0);break;case m:w=(g-d)/D+2;break;case g:w=(d-m)/D+4}w/=6}return{h:w,s:I,v:F}}function hsvToRgb(d,m,g){d=6*bound01(d,360),m=bound01(m,100),g=bound01(g,100);var w=Math.floor(d),I=d-w,P=g*(1-m),$=g*(1-I*m),F=g*(1-(1-I)*m),D=w%6;return{r:255*[g,$,P,P,F,g][D],g:255*[F,g,g,$,P,P][D],b:255*[P,P,F,g,g,$][D]}}function rgbToHex(d,m,g,w){var I=[pad2(Math.round(d).toString(16)),pad2(Math.round(m).toString(16)),pad2(Math.round(g).toString(16))];return w&&I[0].charAt(0)==I[0].charAt(1)&&I[1].charAt(0)==I[1].charAt(1)&&I[2].charAt(0)==I[2].charAt(1)?I[0].charAt(0)+I[1].charAt(0)+I[2].charAt(0):I.join("")}function rgbaToHex(d,m,g,w,I){var P=[pad2(Math.round(d).toString(16)),pad2(Math.round(m).toString(16)),pad2(Math.round(g).toString(16)),pad2(convertDecimalToHex(w))];return I&&P[0].charAt(0)==P[0].charAt(1)&&P[1].charAt(0)==P[1].charAt(1)&&P[2].charAt(0)==P[2].charAt(1)&&P[3].charAt(0)==P[3].charAt(1)?P[0].charAt(0)+P[1].charAt(0)+P[2].charAt(0)+P[3].charAt(0):P.join("")}function rgbaToArgbHex(d,m,g,w){return[pad2(convertDecimalToHex(w)),pad2(Math.round(d).toString(16)),pad2(Math.round(m).toString(16)),pad2(Math.round(g).toString(16))].join("")}function _desaturate(d,m){m=m===0?0:m||10;var g=tinycolor(d).toHsl();return g.s-=m/100,g.s=clamp01(g.s),tinycolor(g)}function _saturate(d,m){m=m===0?0:m||10;var g=tinycolor(d).toHsl();return g.s+=m/100,g.s=clamp01(g.s),tinycolor(g)}function _greyscale(d){return tinycolor(d).desaturate(100)}function _lighten(d,m){m=m===0?0:m||10;var g=tinycolor(d).toHsl();return g.l+=m/100,g.l=clamp01(g.l),tinycolor(g)}function _brighten(d,m){m=m===0?0:m||10;var g=tinycolor(d).toRgb();return g.r=Math.max(0,Math.min(255,g.r-Math.round(-m/100*255))),g.g=Math.max(0,Math.min(255,g.g-Math.round(-m/100*255))),g.b=Math.max(0,Math.min(255,g.b-Math.round(-m/100*255))),tinycolor(g)}function _darken(d,m){m=m===0?0:m||10;var g=tinycolor(d).toHsl();return g.l-=m/100,g.l=clamp01(g.l),tinycolor(g)}function _spin(d,m){var g=tinycolor(d).toHsl(),w=(g.h+m)%360;return g.h=w<0?360+w:w,tinycolor(g)}function _complement(d){var m=tinycolor(d).toHsl();return m.h=(m.h+180)%360,tinycolor(m)}function polyad(d,m){if(isNaN(m)||m<=0)throw new Error("Argument to polyad must be a positive number");for(var g=tinycolor(d).toHsl(),w=[tinycolor(d)],I=360/m,P=1;P<m;P++)w.push(tinycolor({h:(g.h+P*I)%360,s:g.s,l:g.l}));return w}function _splitcomplement(d){var m=tinycolor(d).toHsl(),g=m.h;return[tinycolor(d),tinycolor({h:(g+72)%360,s:m.s,l:m.l}),tinycolor({h:(g+216)%360,s:m.s,l:m.l})]}function _analogous(d,m,g){m=m||6,g=g||30;var w=tinycolor(d).toHsl(),I=360/g,P=[tinycolor(d)];for(w.h=(w.h-(I*m>>1)+720)%360;--m;)w.h=(w.h+I)%360,P.push(tinycolor(w));return P}function _monochromatic(d,m){m=m||6;for(var g=tinycolor(d).toHsv(),w=g.h,I=g.s,P=g.v,$=[],F=1/m;m--;)$.push(tinycolor({h:w,s:I,v:P})),P=(P+F)%1;return $}tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var d=this.toRgb();return(299*d.r+587*d.g+114*d.b)/1e3},getLuminance:function(){var d,m,g,w=this.toRgb();return d=w.r/255,m=w.g/255,g=w.b/255,.2126*(d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4))+.7152*(m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4))+.0722*(g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4))},setAlpha:function(d){return this._a=boundAlpha(d),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var d=rgbToHsv(this._r,this._g,this._b);return{h:360*d.h,s:d.s,v:d.v,a:this._a}},toHsvString:function(){var d=rgbToHsv(this._r,this._g,this._b),m=Math.round(360*d.h),g=Math.round(100*d.s),w=Math.round(100*d.v);return this._a==1?"hsv("+m+", "+g+"%, "+w+"%)":"hsva("+m+", "+g+"%, "+w+"%, "+this._roundA+")"},toHsl:function(){var d=rgbToHsl(this._r,this._g,this._b);return{h:360*d.h,s:d.s,l:d.l,a:this._a}},toHslString:function(){var d=rgbToHsl(this._r,this._g,this._b),m=Math.round(360*d.h),g=Math.round(100*d.s),w=Math.round(100*d.l);return this._a==1?"hsl("+m+", "+g+"%, "+w+"%)":"hsla("+m+", "+g+"%, "+w+"%, "+this._roundA+")"},toHex:function(d){return rgbToHex(this._r,this._g,this._b,d)},toHexString:function(d){return"#"+this.toHex(d)},toHex8:function(d){return rgbaToHex(this._r,this._g,this._b,this._a,d)},toHex8String:function(d){return"#"+this.toHex8(d)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*bound01(this._r,255))+"%",g:Math.round(100*bound01(this._g,255))+"%",b:Math.round(100*bound01(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(100*bound01(this._r,255))+"%, "+Math.round(100*bound01(this._g,255))+"%, "+Math.round(100*bound01(this._b,255))+"%)":"rgba("+Math.round(100*bound01(this._r,255))+"%, "+Math.round(100*bound01(this._g,255))+"%, "+Math.round(100*bound01(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1)},toFilter:function(d){var m="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),g=m,w=this._gradientType?"GradientType = 1, ":"";if(d){var I=tinycolor(d);g="#"+rgbaToArgbHex(I._r,I._g,I._b,I._a)}return"progid:DXImageTransform.Microsoft.gradient("+w+"startColorstr="+m+",endColorstr="+g+")"},toString:function(d){var m=!!d;d=d||this._format;var g=!1,w=this._a<1&&this._a>=0;return m||!w||d!=="hex"&&d!=="hex6"&&d!=="hex3"&&d!=="hex4"&&d!=="hex8"&&d!=="name"?(d==="rgb"&&(g=this.toRgbString()),d==="prgb"&&(g=this.toPercentageRgbString()),d!=="hex"&&d!=="hex6"||(g=this.toHexString()),d==="hex3"&&(g=this.toHexString(!0)),d==="hex4"&&(g=this.toHex8String(!0)),d==="hex8"&&(g=this.toHex8String()),d==="name"&&(g=this.toName()),d==="hsl"&&(g=this.toHslString()),d==="hsv"&&(g=this.toHsvString()),g||this.toHexString()):d==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return tinycolor(this.toString())},_applyModification:function(d,m){var g=d.apply(null,[this].concat([].slice.call(m)));return this._r=g._r,this._g=g._g,this._b=g._b,this.setAlpha(g._a),this},lighten:function(){return this._applyModification(_lighten,arguments)},brighten:function(){return this._applyModification(_brighten,arguments)},darken:function(){return this._applyModification(_darken,arguments)},desaturate:function(){return this._applyModification(_desaturate,arguments)},saturate:function(){return this._applyModification(_saturate,arguments)},greyscale:function(){return this._applyModification(_greyscale,arguments)},spin:function(){return this._applyModification(_spin,arguments)},_applyCombination:function(d,m){return d.apply(null,[this].concat([].slice.call(m)))},analogous:function(){return this._applyCombination(_analogous,arguments)},complement:function(){return this._applyCombination(_complement,arguments)},monochromatic:function(){return this._applyCombination(_monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(_splitcomplement,arguments)},triad:function(){return this._applyCombination(polyad,[3])},tetrad:function(){return this._applyCombination(polyad,[4])}},tinycolor.fromRatio=function(d,m){if(_typeof(d)=="object"){var g={};for(var w in d)d.hasOwnProperty(w)&&(g[w]=w==="a"?d[w]:convertToPercentage(d[w]));d=g}return tinycolor(d,m)},tinycolor.equals=function(d,m){return!(!d||!m)&&tinycolor(d).toRgbString()==tinycolor(m).toRgbString()},tinycolor.random=function(){return tinycolor.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},tinycolor.mix=function(d,m,g){g=g===0?0:g||50;var w=tinycolor(d).toRgb(),I=tinycolor(m).toRgb(),P=g/100;return tinycolor({r:(I.r-w.r)*P+w.r,g:(I.g-w.g)*P+w.g,b:(I.b-w.b)*P+w.b,a:(I.a-w.a)*P+w.a})},tinycolor.readability=function(d,m){var g=tinycolor(d),w=tinycolor(m);return(Math.max(g.getLuminance(),w.getLuminance())+.05)/(Math.min(g.getLuminance(),w.getLuminance())+.05)},tinycolor.isReadable=function(d,m,g){var w,I,P=tinycolor.readability(d,m);switch(I=!1,(w=validateWCAG2Parms(g)).level+w.size){case"AAsmall":case"AAAlarge":I=P>=4.5;break;case"AAlarge":I=P>=3;break;case"AAAsmall":I=P>=7}return I},tinycolor.mostReadable=function(d,m,g){var w,I,P,$,F=null,D=0;I=(g=g||{}).includeFallbackColors,P=g.level,$=g.size;for(var U=0;U<m.length;U++)(w=tinycolor.readability(d,m[U]))>D&&(D=w,F=tinycolor(m[U]));return tinycolor.isReadable(d,F,{level:P,size:$})||!I?F:(g.includeFallbackColors=!1,tinycolor.mostReadable(d,["#fff","#000"],g))};var names$1=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=flip(names$1);function flip(d){var m={};for(var g in d)d.hasOwnProperty(g)&&(m[d[g]]=g);return m}function boundAlpha(d){return d=parseFloat(d),(isNaN(d)||d<0||d>1)&&(d=1),d}function bound01(d,m){isOnePointZero(d)&&(d="100%");var g=isPercentage(d);return d=Math.min(m,Math.max(0,parseFloat(d))),g&&(d=parseInt(d*m,10)/100),Math.abs(d-m)<1e-6?1:d%m/parseFloat(m)}function clamp01(d){return Math.min(1,Math.max(0,d))}function parseIntFromHex(d){return parseInt(d,16)}function isOnePointZero(d){return typeof d=="string"&&d.indexOf(".")!=-1&&parseFloat(d)===1}function isPercentage(d){return typeof d=="string"&&d.indexOf("%")!=-1}function pad2(d){return d.length==1?"0"+d:""+d}function convertToPercentage(d){return d<=1&&(d=100*d+"%"),d}function convertDecimalToHex(d){return Math.round(255*parseFloat(d)).toString(16)}function convertHexToDecimal(d){return parseIntFromHex(d)/255}var matchers=(CSS_UNIT="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",PERMISSIVE_MATCH3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",{CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}),CSS_UNIT,PERMISSIVE_MATCH3,PERMISSIVE_MATCH4;function isValidCSSUnit(d){return!!matchers.CSS_UNIT.exec(d)}function stringInputToObject(d){d=d.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var m,g=!1;if(names$1[d])d=names$1[d],g=!0;else if(d=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(m=matchers.rgb.exec(d))?{r:m[1],g:m[2],b:m[3]}:(m=matchers.rgba.exec(d))?{r:m[1],g:m[2],b:m[3],a:m[4]}:(m=matchers.hsl.exec(d))?{h:m[1],s:m[2],l:m[3]}:(m=matchers.hsla.exec(d))?{h:m[1],s:m[2],l:m[3],a:m[4]}:(m=matchers.hsv.exec(d))?{h:m[1],s:m[2],v:m[3]}:(m=matchers.hsva.exec(d))?{h:m[1],s:m[2],v:m[3],a:m[4]}:(m=matchers.hex8.exec(d))?{r:parseIntFromHex(m[1]),g:parseIntFromHex(m[2]),b:parseIntFromHex(m[3]),a:convertHexToDecimal(m[4]),format:g?"name":"hex8"}:(m=matchers.hex6.exec(d))?{r:parseIntFromHex(m[1]),g:parseIntFromHex(m[2]),b:parseIntFromHex(m[3]),format:g?"name":"hex"}:(m=matchers.hex4.exec(d))?{r:parseIntFromHex(m[1]+""+m[1]),g:parseIntFromHex(m[2]+""+m[2]),b:parseIntFromHex(m[3]+""+m[3]),a:convertHexToDecimal(m[4]+""+m[4]),format:g?"name":"hex8"}:!!(m=matchers.hex3.exec(d))&&{r:parseIntFromHex(m[1]+""+m[1]),g:parseIntFromHex(m[2]+""+m[2]),b:parseIntFromHex(m[3]+""+m[3]),format:g?"name":"hex"}}function validateWCAG2Parms(d){var m,g;return(m=((d=d||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&m!=="AAA"&&(m="AA"),(g=(d.size||"small").toLowerCase())!=="small"&&g!=="large"&&(g="small"),{level:m,size:g}}function clone(d){const m={width:d.bitmap.width,height:d.bitmap.height,data:Buffer$1.from(d.bitmap.data)};return new d.constructor(m)}function scan(d,m,g,w,I,P){let $,F,D,U,j;if(typeof m=="function")j=m,$=0,F=0,D=d.bitmap.width,U=d.bitmap.height;else{if($=m,typeof g!="number")throw new Error("y must be a number");if(F=g,typeof w!="number")throw new Error("w must be a number");if(D=w,typeof I!="number")throw new Error("h must be a number");if(U=I,typeof P!="function")throw new Error("cb must be a function");j=P}$=Math.round($),F=Math.round(F),D=Math.round(D),U=Math.round(U);const Z=j.bind(d);for(let G=F;G<F+U;G++)for(let H=$;H<$+D;H++)Z(H,G,d.bitmap.width*G+H<<2);return d}function*scanIterator(d,m,g,w,I){m=Math.round(m),g=Math.round(g),w=Math.round(w),I=Math.round(I);for(let P=g;P<g+I;P++)for(let $=m;$<m+w;$++){const F=d.bitmap.width*P+$<<2;yield{x:$,y:P,idx:F,image:d}}}function intToRGBA$1(d){if(typeof d!="number")throw new Error("i must be a number");const m={r:0,g:0,b:0,a:0};return m.r=Math.floor(d/Math.pow(256,3)),m.g=Math.floor((d-m.r*Math.pow(256,3))/Math.pow(256,2)),m.b=Math.floor((d-m.r*Math.pow(256,3)-m.g*Math.pow(256,2))/Math.pow(256,1)),m.a=Math.floor((d-m.r*Math.pow(256,3)-m.g*Math.pow(256,2)-m.b*Math.pow(256,1))/Math.pow(256,0)),m}function colorDiff(d,m){const g=$=>Math.pow($,2),{max:w}=Math,I="a"in d?d.a:255,P="a"in m?m.a:255;return(w(g(d.r-m.r),g(d.r-m.r-I+P))+w(g(d.g-m.g),g(d.g-m.g-I+P))+w(g(d.b-m.b),g(d.b-m.b-I+P)))/195075}function limit255(d){return d=Math.max(d,0),d=Math.min(d,255)}function cssColorToHex(d){return typeof d=="number"?d:parseInt(tinycolor(d).toHex8(),16)}function encode$1(d,m={}){return scan({bitmap:d},0,0,d.width,d.height,function(g,w,I){const P=d.data[I+0],$=d.data[I+1],F=d.data[I+2],D=d.data[I+3];d.data[I+0]=D,d.data[I+1]=F,d.data[I+2]=$,d.data[I+3]=P}),encode$2({...d,...m}).data}function decode$1(d,m){const g=decode$2(d,m);return scan({bitmap:g},0,0,g.width,g.height,function(w,I,P){const $=g.data[P+1],F=g.data[P+2],D=g.data[P+3];g.data[P+0]=D,g.data[P+1]=F,g.data[P+2]=$,g.data[P+3]=255}),g}function msBmp(){return{mime:"image/x-ms-bmp",encode:encode$1,decode:decode$1}}function bmp(){return{mime:"image/bmp",encode:encode$1,decode:decode$1}}var omggif={},GifReader_1,GifWriter_1;function GifWriter(d,m,g,w){var I=0,P=(w=w===void 0?{}:w).loop===void 0?null:w.loop,$=w.palette===void 0?null:w.palette;if(m<=0||g<=0||m>65535||g>65535)throw new Error("Width/Height invalid.");function F(q){var Q=q.length;if(Q<2||Q>256||Q&Q-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return Q}d[I++]=71,d[I++]=73,d[I++]=70,d[I++]=56,d[I++]=57,d[I++]=97;var D=0,U=0;if($!==null){for(var j=F($);j>>=1;)++D;if(j=1<<D,--D,w.background!==void 0){if((U=w.background)>=j)throw new Error("Background index out of range.");if(U===0)throw new Error("Background index explicitly passed as 0.")}}if(d[I++]=255&m,d[I++]=m>>8&255,d[I++]=255&g,d[I++]=g>>8&255,d[I++]=($!==null?128:0)|D,d[I++]=U,d[I++]=0,$!==null)for(var Z=0,G=$.length;Z<G;++Z){var H=$[Z];d[I++]=H>>16&255,d[I++]=H>>8&255,d[I++]=255&H}if(P!==null){if(P<0||P>65535)throw new Error("Loop count invalid.");d[I++]=33,d[I++]=255,d[I++]=11,d[I++]=78,d[I++]=69,d[I++]=84,d[I++]=83,d[I++]=67,d[I++]=65,d[I++]=80,d[I++]=69,d[I++]=50,d[I++]=46,d[I++]=48,d[I++]=3,d[I++]=1,d[I++]=255&P,d[I++]=P>>8&255,d[I++]=0}var W=!1;this.addFrame=function(q,Q,et,J,V,rt){if(W===!0&&(--I,W=!1),rt=rt===void 0?{}:rt,q<0||Q<0||q>65535||Q>65535)throw new Error("x/y invalid.");if(et<=0||J<=0||et>65535||J>65535)throw new Error("Width/Height invalid.");if(V.length<et*J)throw new Error("Not enough pixels for the frame size.");var X=!0,ot=rt.palette;if(ot==null&&(X=!1,ot=$),ot==null)throw new Error("Must supply either a local or global palette.");for(var it=F(ot),st=0;it>>=1;)++st;it=1<<st;var at=rt.delay===void 0?0:rt.delay,ft=rt.disposal===void 0?0:rt.disposal;if(ft<0||ft>3)throw new Error("Disposal out of range.");var K=!1,lt=0;if(rt.transparent!==void 0&&rt.transparent!==null&&(K=!0,(lt=rt.transparent)<0||lt>=it))throw new Error("Transparent color index.");if((ft!==0||K||at!==0)&&(d[I++]=33,d[I++]=249,d[I++]=4,d[I++]=ft<<2|(K===!0?1:0),d[I++]=255&at,d[I++]=at>>8&255,d[I++]=lt,d[I++]=0),d[I++]=44,d[I++]=255&q,d[I++]=q>>8&255,d[I++]=255&Q,d[I++]=Q>>8&255,d[I++]=255&et,d[I++]=et>>8&255,d[I++]=255&J,d[I++]=J>>8&255,d[I++]=X===!0?128|st-1:0,X===!0)for(var vt=0,dt=ot.length;vt<dt;++vt){var ht=ot[vt];d[I++]=ht>>16&255,d[I++]=ht>>8&255,d[I++]=255&ht}return I=GifWriterOutputLZWCodeStream(d,I,st<2?2:st,V)},this.end=function(){return W===!1&&(d[I++]=59,W=!0),I},this.getOutputBuffer=function(){return d},this.setOutputBuffer=function(q){d=q},this.getOutputBufferPosition=function(){return I},this.setOutputBufferPosition=function(q){I=q}}function GifWriterOutputLZWCodeStream(d,m,g,w){d[m++]=g;var I=m++,P=1<<g,$=P-1,F=P+1,D=F+1,U=g+1,j=0,Z=0;function G(X){for(;j>=X;)d[m++]=255&Z,Z>>=8,j-=8,m===I+256&&(d[I]=255,I=m++)}function H(X){Z|=X<<j,j+=U,G(8)}var W=w[0]&$,q={};H(P);for(var Q=1,et=w.length;Q<et;++Q){var J=w[Q]&$,V=W<<8|J,rt=q[V];if(rt===void 0){for(Z|=W<<j,j+=U;j>=8;)d[m++]=255&Z,Z>>=8,j-=8,m===I+256&&(d[I]=255,I=m++);D===4096?(H(P),D=F+1,U=g+1,q={}):(D>=1<<U&&++U,q[V]=D++),W=J}else W=rt}return H(W),H(F),G(1),I+1===m?d[I]=0:(d[I]=m-I-1,d[m++]=0),m}function GifReader(d){var m=0;if(d[m++]!==71||d[m++]!==73||d[m++]!==70||d[m++]!==56||(d[m++]+1&253)!=56||d[m++]!==97)throw new Error("Invalid GIF 87a/89a header.");var g=d[m++]|d[m++]<<8,w=d[m++]|d[m++]<<8,I=d[m++],P=I>>7,$=1<<(7&I)+1;d[m++],d[m++];var F=null,D=null;P&&(F=m,D=$,m+=3*$);var U=!0,j=[],Z=0,G=null,H=0,W=null;for(this.width=g,this.height=w;U&&m<d.length;)switch(d[m++]){case 33:switch(d[m++]){case 255:if(d[m]!==11||d[m+1]==78&&d[m+2]==69&&d[m+3]==84&&d[m+4]==83&&d[m+5]==67&&d[m+6]==65&&d[m+7]==80&&d[m+8]==69&&d[m+9]==50&&d[m+10]==46&&d[m+11]==48&&d[m+12]==3&&d[m+13]==1&&d[m+16]==0)m+=14,W=d[m++]|d[m++]<<8,m++;else for(m+=12;;){if(!((K=d[m++])>=0))throw Error("Invalid block size");if(K===0)break;m+=K}break;case 249:if(d[m++]!==4||d[m+4]!==0)throw new Error("Invalid graphics extension block.");var q=d[m++];Z=d[m++]|d[m++]<<8,G=d[m++],1&q||(G=null),H=q>>2&7,m++;break;case 254:for(;;){if(!((K=d[m++])>=0))throw Error("Invalid block size");if(K===0)break;m+=K}break;default:throw new Error("Unknown graphic control label: 0x"+d[m-1].toString(16))}break;case 44:var Q=d[m++]|d[m++]<<8,et=d[m++]|d[m++]<<8,J=d[m++]|d[m++]<<8,V=d[m++]|d[m++]<<8,rt=d[m++],X=rt>>6&1,ot=1<<(7&rt)+1,it=F,st=D,at=!1;rt>>7&&(at=!0,it=m,st=ot,m+=3*ot);var ft=m;for(m++;;){var K;if(!((K=d[m++])>=0))throw Error("Invalid block size");if(K===0)break;m+=K}j.push({x:Q,y:et,width:J,height:V,has_local_palette:at,palette_offset:it,palette_size:st,data_offset:ft,data_length:m-ft,transparent_index:G,interlaced:!!X,delay:Z,disposal:H});break;case 59:U=!1;break;default:throw new Error("Unknown gif block: 0x"+d[m-1].toString(16))}this.numFrames=function(){return j.length},this.loopCount=function(){return W},this.frameInfo=function(lt){if(lt<0||lt>=j.length)throw new Error("Frame index out of range.");return j[lt]},this.decodeAndBlitFrameBGRA=function(lt,vt){var dt=this.frameInfo(lt),ht=dt.width*dt.height,pt=new Uint8Array(ht);GifReaderLZWOutputIndexStream(d,dt.data_offset,pt,ht);var Rt=dt.palette_offset,Tt=dt.transparent_index;Tt===null&&(Tt=256);var xt=dt.width,$t=g-xt,Et=xt,Pt=4*(dt.y*g+dt.x),Ot=4*((dt.y+dt.height)*g+dt.x),Ct=Pt,St=4*$t;dt.interlaced===!0&&(St+=4*g*7);for(var It=8,Ft=0,Ut=pt.length;Ft<Ut;++Ft){var jt=pt[Ft];if(Et===0&&(Et=xt,(Ct+=St)>=Ot&&(St=4*$t+4*g*(It-1),Ct=Pt+(xt+$t)*(It<<1),It>>=1)),jt===Tt)Ct+=4;else{var Mt=d[Rt+3*jt],nt=d[Rt+3*jt+1],At=d[Rt+3*jt+2];vt[Ct++]=At,vt[Ct++]=nt,vt[Ct++]=Mt,vt[Ct++]=255}--Et}},this.decodeAndBlitFrameRGBA=function(lt,vt){var dt=this.frameInfo(lt),ht=dt.width*dt.height,pt=new Uint8Array(ht);GifReaderLZWOutputIndexStream(d,dt.data_offset,pt,ht);var Rt=dt.palette_offset,Tt=dt.transparent_index;Tt===null&&(Tt=256);var xt=dt.width,$t=g-xt,Et=xt,Pt=4*(dt.y*g+dt.x),Ot=4*((dt.y+dt.height)*g+dt.x),Ct=Pt,St=4*$t;dt.interlaced===!0&&(St+=4*g*7);for(var It=8,Ft=0,Ut=pt.length;Ft<Ut;++Ft){var jt=pt[Ft];if(Et===0&&(Et=xt,(Ct+=St)>=Ot&&(St=4*$t+4*g*(It-1),Ct=Pt+(xt+$t)*(It<<1),It>>=1)),jt===Tt)Ct+=4;else{var Mt=d[Rt+3*jt],nt=d[Rt+3*jt+1],At=d[Rt+3*jt+2];vt[Ct++]=Mt,vt[Ct++]=nt,vt[Ct++]=At,vt[Ct++]=255}--Et}}}function GifReaderLZWOutputIndexStream(d,m,g,w){for(var I=d[m++],P=1<<I,$=P+1,F=$+1,D=I+1,U=(1<<D)-1,j=0,Z=0,G=0,H=d[m++],W=new Int32Array(4096),q=null;;){for(;j<16&&H!==0;)Z|=d[m++]<<j,j+=8,H===1?H=d[m++]:--H;if(j<D)break;var Q=Z&U;if(Z>>=D,j-=D,Q!==P){if(Q===$)break;for(var et=Q<F?Q:q,J=0,V=et;V>P;)V=W[V]>>8,++J;var rt=V;if(G+J+(et!==Q?1:0)>w)return void console.log("Warning, gif stream longer than expected.");g[G++]=rt;var X=G+=J;for(et!==Q&&(g[G++]=rt),V=et;J--;)V=W[V],g[--X]=255&V,V>>=8;q!==null&&F<4096&&(W[F++]=q<<8|rt,F>=U+1&&D<12&&(++D,U=U<<1|1)),q=Q}else F=$+1,U=(1<<(D=I+1))-1,q=null}return G!==w&&console.log("Warning, gif stream shorter than expected."),g}try{GifWriter_1=omggif.GifWriter=GifWriter,GifReader_1=omggif.GifReader=GifReader}catch{}let BitmapImage$2=class Te{constructor(...m){if(m.length===0)throw new Error("constructor requires parameters");const g=m[0];if(g!==null&&typeof g=="object")if(g instanceof Te){const w=g.bitmap;this.bitmap={width:w.width,height:w.height,data:new Buffer$1(w.width*w.height*4)},w.data.copy(this.bitmap.data)}else{if(!(g.width&&g.height&&g.data))throw new Error("unrecognized constructor parameters");this.bitmap=g}else{if(typeof g!="number"||typeof m[1]!="number")throw new Error("unrecognized constructor parameters");{const w=g,I=m[1],P=m[2];this.bitmap={width:w,height:I},Buffer$1.isBuffer(P)?this.bitmap.data=P:(this.bitmap.data=new Buffer$1(w*I*4),typeof P=="number"&&this.fillRGBA(P))}}}blit(m,g,w,I,P,$,F){if(I+$>this.bitmap.width)throw new Error("copy exceeds width of source bitmap");if(g+$>m.bitmap.width)throw new Error("copy exceeds width of target bitmap");if(P+F>this.bitmap.height)throw new Error("copy exceeds height of source bitmap");if(w+F>m.bitmap.height)throw new Erro("copy exceeds height of target bitmap");const D=this.bitmap.data,U=m.bitmap.data,j=4*this.bitmap.width,Z=4*m.bitmap.width,G=4*$;let H=P*j+4*I,W=w*Z+4*g;for(;--F>=0;)D.copy(U,W,H,H+G),H+=j,W+=Z;return this}fillRGBA(m){const g=this.bitmap.data,w=4*this.bitmap.height;let I=0;for(;I<w;)g.writeUInt32BE(m,I),I+=4;for(;I<g.length;)g.copy(g,I,0,w),I+=w;return this}getRGBA(m,g){const w=4*(g*this.bitmap.width+m);return this.bitmap.data.readUInt32BE(w)}getRGBASet(){const m=new Set,g=this.bitmap.data;for(let w=0;w<g.length;w+=4)m.add(g.readUInt32BE(w,!0));return m}greyscale(){const m=this.bitmap.data;return this.scan(0,0,this.bitmap.width,this.bitmap.height,(g,w,I)=>{const P=Math.round(.299*m[I]+.587*m[I+1]+.114*m[I+2]);m[I]=P,m[I+1]=P,m[I+2]=P}),this}reframe(m,g,w,I,P){const $=m<0?0:m,F=g<0?0:g,D=w+$>this.bitmap.width?this.bitmap.width-$:w,U=I+F>this.bitmap.height?this.bitmap.height-F:I,j=m<0?-m:0,Z=g<0?-g:0;let G;if(P===void 0){if($!==m||F!=g||D!==w||U!==I)throw new GifError("fillRGBA required for this reframing");G=new Te(w,I)}else G=new Te(w,I,P);return this.blit(G,j,Z,$,F,D,U),this.bitmap=G.bitmap,this}scale(m){if(m===1)return;if(!Number.isInteger(m)||m<1)throw new Error("the scale must be an integer >= 1");const g=this.bitmap.width,w=this.bitmap.height,I=g*m*4,P=this.bitmap.data,$=new Buffer$1(w*I*m);let F,D=0,U=0;for(let j=0;j<w;++j){F=U;for(let Z=0;Z<g;++Z){const G=P.readUInt32BE(D,!0);for(let H=0;H<m;++H)$.writeUInt32BE(G,U),U+=4;D+=4}for(let Z=1;Z<m;++Z)$.copy($,U,F,U),U+=I,F+=I}return this.bitmap={width:g*m,height:w*m,data:$},this}scanAllCoords(m){const g=this.bitmap.width,w=this.bitmap.data.length;let I=0,P=0;for(let $=0;$<w;$+=4)m(I,P,$),++I===g&&(I=0,++P)}scanAllIndexes(m){const g=this.bitmap.data.length;for(let w=0;w<g;w+=4)m(w)}};var bitmapimage=BitmapImage$2,gif$1={};let Gif$1=class{constructor(d,m,g){this.width=g.width,this.height=g.height,this.loops=g.loops,this.usesTransparency=g.usesTransparency,this.colorScope=g.colorScope,this.frames=m,this.buffer=d}};Gif$1.GlobalColorsPreferred=0,Gif$1.GlobalColorsOnly=1,Gif$1.LocalColorsOnly=2;let GifError$2=class extends Error{constructor(d){super(d),d instanceof Error&&(this.stack="Gif"+d.stack)}};gif$1.Gif=Gif$1,gif$1.GifError=GifError$2;var gifcodec={},gifutil={},_polyfillNode_fs={},_polyfillNode_fs$1=Object.freeze({__proto__:null,default:_polyfillNode_fs}),require$$0=getAugmentedNamespace(_polyfillNode_fs$1),__defProp$3=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__defNormalProp$3=(d,m,g)=>m in d?__defProp$3(d,m,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[m]=g,__markAsModule=d=>__defProp$3(d,"__esModule",{value:!0}),__export$1=(d,m)=>{for(var g in m)__defProp$3(d,g,{get:m[g],enumerable:!0})},__reExport=(d,m,g,w)=>{if(m&&typeof m=="object"||typeof m=="function")for(let I of __getOwnPropNames(m))!__hasOwnProp.call(d,I)&&g&&__defProp$3(d,I,{get:()=>m[I],enumerable:!(w=__getOwnPropDesc(m,I))||w.enumerable});return d},__toCommonJS=(d=>(m,g)=>d&&d.get(m)||(g=__reExport(__markAsModule({}),m,1),d&&d.set(m,g),g))(typeof WeakMap<"u"?new WeakMap:0),__publicField$3=(d,m,g)=>(__defNormalProp$3(d,typeof m!="symbol"?m+"":m,g),g),src_exports={};__export$1(src_exports,{applyPalette:()=>applyPalette,applyPaletteSync:()=>applyPaletteSync$1,buildPalette:()=>buildPalette,buildPaletteSync:()=>buildPaletteSync$1,constants:()=>constants_exports$1,conversion:()=>conversion_exports$1,distance:()=>distance_exports$1,image:()=>image_exports$1,palette:()=>palette_exports$1,quality:()=>quality_exports$1,utils:()=>utils_exports$1});var constants_exports$1={};__export$1(constants_exports$1,{bt709:()=>bt709_exports$1});var bt709_exports$1={};__export$1(bt709_exports$1,{Y:()=>Y$1,x:()=>x$2,y:()=>y$2});var Y$1=(d=>(d[d.RED=.2126]="RED",d[d.GREEN=.7152]="GREEN",d[d.BLUE=.0722]="BLUE",d[d.WHITE=1]="WHITE",d))(Y$1||{}),x$2=(d=>(d[d.RED=.64]="RED",d[d.GREEN=.3]="GREEN",d[d.BLUE=.15]="BLUE",d[d.WHITE=.3127]="WHITE",d))(x$2||{}),y$2=(d=>(d[d.RED=.33]="RED",d[d.GREEN=.6]="GREEN",d[d.BLUE=.06]="BLUE",d[d.WHITE=.329]="WHITE",d))(y$2||{}),conversion_exports$1={};function correctGamma$1(d){return d>.04045?((d+.055)/1.055)**2.4:d/12.92}function rgb2xyz$1(d,m,g){return{x:.4124*(d=correctGamma$1(d/255))+.3576*(m=correctGamma$1(m/255))+.1805*(g=correctGamma$1(g/255)),y:.2126*d+.7152*m+.0722*g,z:.0193*d+.1192*m+.9505*g}}__export$1(conversion_exports$1,{lab2rgb:()=>lab2rgb$1,lab2xyz:()=>lab2xyz$1,rgb2hsl:()=>rgb2hsl$1,rgb2lab:()=>rgb2lab$1,rgb2xyz:()=>rgb2xyz$1,xyz2lab:()=>xyz2lab$1,xyz2rgb:()=>xyz2rgb$1});var arithmetic_exports$1={};function degrees2radians$1(d){return d*(Math.PI/180)}function max3$1(d,m,g){let w=d;return w<m&&(w=m),w<g&&(w=g),w}function min3$1(d,m,g){let w=d;return w>m&&(w=m),w>g&&(w=g),w}function intInRange$1(d,m,g){return d>g&&(d=g),d<m&&(d=m),0|d}function inRange0to255Rounded$1(d){return(d=Math.round(d))>255?d=255:d<0&&(d=0),d}function inRange0to255$1(d){return d>255?d=255:d<0&&(d=0),d}function stableSort$1(d,m){const g=typeof d[0];let w;if(g==="number"||g==="string"){const I=Object.create(null);for(let P=0,$=d.length;P<$;P++){const F=d[P];I[F]||I[F]===0||(I[F]=P)}w=d.sort((P,$)=>m(P,$)||I[P]-I[$])}else{const I=d.slice(0);w=d.sort((P,$)=>m(P,$)||I.indexOf(P)-I.indexOf($))}return w}function rgb2hsl$1(d,m,g){const w=min3$1(d,m,g),I=max3$1(d,m,g),P=I-w,$=(w+I)/510;let F=0;$>0&&$<1&&(F=P/($<.5?I+w:510-I-w));let D=0;return P>0&&(D=I===d?(m-g)/P:I===m?2+(g-d)/P:4+(d-m)/P,D*=60,D<0&&(D+=360)),{h:D,s:F,l:$}}__export$1(arithmetic_exports$1,{degrees2radians:()=>degrees2radians$1,inRange0to255:()=>inRange0to255$1,inRange0to255Rounded:()=>inRange0to255Rounded$1,intInRange:()=>intInRange$1,max3:()=>max3$1,min3:()=>min3$1,stableSort:()=>stableSort$1});var refX$1=.95047,refY$1=1,refZ$1=1.08883;function pivot$1(d){return d>.008856?d**(1/3):7.787*d+16/116}function xyz2lab$1(d,m,g){if(d=pivot$1(d/refX$1),m=pivot$1(m/refY$1),g=pivot$1(g/refZ$1),116*m-16<0)throw new Error("xxx");return{L:Math.max(0,116*m-16),a:500*(d-m),b:200*(m-g)}}function rgb2lab$1(d,m,g){const w=rgb2xyz$1(d,m,g);return xyz2lab$1(w.x,w.y,w.z)}var refX2$1=.95047,refY2$1=1,refZ2$1=1.08883;function pivot2$1(d){return d>.206893034?d**3:(d-16/116)/7.787}function lab2xyz$1(d,m,g){const w=(d+16)/116,I=w-g/200;return{x:refX2$1*pivot2$1(m/500+w),y:refY2$1*pivot2$1(w),z:refZ2$1*pivot2$1(I)}}function correctGamma2$1(d){return d>.0031308?1.055*d**(1/2.4)-.055:12.92*d}function xyz2rgb$1(d,m,g){const w=correctGamma2$1(3.2406*d+-1.5372*m+-.4986*g),I=correctGamma2$1(-.9689*d+1.8758*m+.0415*g),P=correctGamma2$1(.0557*d+-.204*m+1.057*g);return{r:inRange0to255Rounded$1(255*w),g:inRange0to255Rounded$1(255*I),b:inRange0to255Rounded$1(255*P)}}function lab2rgb$1(d,m,g){const w=lab2xyz$1(d,m,g);return xyz2rgb$1(w.x,w.y,w.z)}var distance_exports$1={};__export$1(distance_exports$1,{AbstractDistanceCalculator:()=>AbstractDistanceCalculator$1,AbstractEuclidean:()=>AbstractEuclidean$1,AbstractManhattan:()=>AbstractManhattan$1,CIE94GraphicArts:()=>CIE94GraphicArts$1,CIE94Textiles:()=>CIE94Textiles$1,CIEDE2000:()=>CIEDE2000$1,CMetric:()=>CMetric$1,Euclidean:()=>Euclidean$1,EuclideanBT709:()=>EuclideanBT709$1,EuclideanBT709NoAlpha:()=>EuclideanBT709NoAlpha$1,Manhattan:()=>Manhattan$1,ManhattanBT709:()=>ManhattanBT709$1,ManhattanNommyde:()=>ManhattanNommyde$1,PNGQuant:()=>PNGQuant$1});var AbstractDistanceCalculator$1=class{constructor(){__publicField$3(this,"_maxDistance"),__publicField$3(this,"_whitePoint"),this._setDefaults(),this.setWhitePoint(255,255,255,255)}setWhitePoint(d,m,g,w){this._whitePoint={r:d>0?255/d:0,g:m>0?255/m:0,b:g>0?255/g:0,a:w>0?255/w:0},this._maxDistance=this.calculateRaw(d,m,g,w,0,0,0,0)}calculateNormalized(d,m){return this.calculateRaw(d.r,d.g,d.b,d.a,m.r,m.g,m.b,m.a)/this._maxDistance}},AbstractCIE94$1=class extends AbstractDistanceCalculator$1{calculateRaw(d,m,g,w,I,P,$,F){const D=rgb2lab$1(inRange0to255$1(d*this._whitePoint.r),inRange0to255$1(m*this._whitePoint.g),inRange0to255$1(g*this._whitePoint.b)),U=rgb2lab$1(inRange0to255$1(I*this._whitePoint.r),inRange0to255$1(P*this._whitePoint.g),inRange0to255$1($*this._whitePoint.b)),j=D.L-U.L,Z=D.a-U.a,G=D.b-U.b,H=Math.sqrt(D.a*D.a+D.b*D.b),W=H-Math.sqrt(U.a*U.a+U.b*U.b);let q=Z*Z+G*G-W*W;q=q<0?0:Math.sqrt(q);const Q=(F-w)*this._whitePoint.a*this._kA;return Math.sqrt((j/this._Kl)**2+(W/(1+this._K1*H))**2+(q/(1+this._K2*H))**2+Q**2)}},CIE94Textiles$1=class extends AbstractCIE94$1{_setDefaults(){this._Kl=2,this._K1=.048,this._K2=.014,this._kA=12.5/255}},CIE94GraphicArts$1=class extends AbstractCIE94$1{_setDefaults(){this._Kl=1,this._K1=.045,this._K2=.015,this._kA=25/255}},_CIEDE2000$1=class extends AbstractDistanceCalculator$1{_setDefaults(){}static _calculatehp(d,m){const g=Math.atan2(d,m);return g>=0?g:g+_CIEDE2000$1._deg360InRad}static _calculateRT(d,m){const g=m**7,w=2*Math.sqrt(g/(g+_CIEDE2000$1._pow25to7)),I=_CIEDE2000$1._deg30InRad*Math.exp(-(((d-_CIEDE2000$1._deg275InRad)/_CIEDE2000$1._deg25InRad)**2));return-Math.sin(2*I)*w}static _calculateT(d){return 1-.17*Math.cos(d-_CIEDE2000$1._deg30InRad)+.24*Math.cos(2*d)+.32*Math.cos(3*d+_CIEDE2000$1._deg6InRad)-.2*Math.cos(4*d-_CIEDE2000$1._deg63InRad)}static _calculate_ahp(d,m,g,w){const I=g+w;return d===0?I:m<=_CIEDE2000$1._deg180InRad?I/2:I<_CIEDE2000$1._deg360InRad?(I+_CIEDE2000$1._deg360InRad)/2:(I-_CIEDE2000$1._deg360InRad)/2}static _calculate_dHp(d,m,g,w){let I;return I=d===0?0:m<=_CIEDE2000$1._deg180InRad?g-w:g<=w?g-w+_CIEDE2000$1._deg360InRad:g-w-_CIEDE2000$1._deg360InRad,2*Math.sqrt(d)*Math.sin(I/2)}calculateRaw(d,m,g,w,I,P,$,F){const D=rgb2lab$1(inRange0to255$1(d*this._whitePoint.r),inRange0to255$1(m*this._whitePoint.g),inRange0to255$1(g*this._whitePoint.b)),U=rgb2lab$1(inRange0to255$1(I*this._whitePoint.r),inRange0to255$1(P*this._whitePoint.g),inRange0to255$1($*this._whitePoint.b)),j=(F-w)*this._whitePoint.a*_CIEDE2000$1._kA,Z=this.calculateRawInLab(D,U);return Math.sqrt(Z+j*j)}calculateRawInLab(d,m){const g=d.L,w=d.a,I=d.b,P=m.L,$=m.a,F=m.b,D=((Math.sqrt(w*w+I*I)+Math.sqrt($*$+F*F))/2)**7,U=.5*(1-Math.sqrt(D/(D+_CIEDE2000$1._pow25to7))),j=(1+U)*w,Z=(1+U)*$,G=Math.sqrt(j*j+I*I),H=Math.sqrt(Z*Z+F*F),W=G*H,q=_CIEDE2000$1._calculatehp(I,j),Q=_CIEDE2000$1._calculatehp(F,Z),et=Math.abs(q-Q),J=P-g,V=H-G,rt=_CIEDE2000$1._calculate_dHp(W,et,Q,q),X=_CIEDE2000$1._calculate_ahp(W,et,q,Q),ot=(G+H)/2,it=((g+P)/2-50)**2,st=V/(1+.045*ot),at=rt/(1+.015*_CIEDE2000$1._calculateT(X)*ot);return(J/(1+.015*it/Math.sqrt(20+it)))**2+st**2+at**2+_CIEDE2000$1._calculateRT(X,ot)*st*at}},CIEDE2000$1=_CIEDE2000$1;__publicField$3(CIEDE2000$1,"_kA",25/255),__publicField$3(CIEDE2000$1,"_pow25to7",25**7),__publicField$3(CIEDE2000$1,"_deg360InRad",degrees2radians$1(360)),__publicField$3(CIEDE2000$1,"_deg180InRad",degrees2radians$1(180)),__publicField$3(CIEDE2000$1,"_deg30InRad",degrees2radians$1(30)),__publicField$3(CIEDE2000$1,"_deg6InRad",degrees2radians$1(6)),__publicField$3(CIEDE2000$1,"_deg63InRad",degrees2radians$1(63)),__publicField$3(CIEDE2000$1,"_deg275InRad",degrees2radians$1(275)),__publicField$3(CIEDE2000$1,"_deg25InRad",degrees2radians$1(25));var CMetric$1=class extends AbstractDistanceCalculator$1{calculateRaw(d,m,g,w,I,P,$,F){const D=(d+I)/2*this._whitePoint.r,U=(d-I)*this._whitePoint.r,j=(m-P)*this._whitePoint.g,Z=(g-$)*this._whitePoint.b,G=((512+D)*U*U>>8)+4*j*j+((767-D)*Z*Z>>8),H=(F-w)*this._whitePoint.a;return Math.sqrt(G+H*H)}_setDefaults(){}},AbstractEuclidean$1=class extends AbstractDistanceCalculator$1{calculateRaw(d,m,g,w,I,P,$,F){const D=I-d,U=P-m,j=$-g,Z=F-w;return Math.sqrt(this._kR*D*D+this._kG*U*U+this._kB*j*j+this._kA*Z*Z)}},Euclidean$1=class extends AbstractEuclidean$1{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},EuclideanBT709$1=class extends AbstractEuclidean$1{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},EuclideanBT709NoAlpha$1=class extends AbstractEuclidean$1{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=0}},AbstractManhattan$1=class extends AbstractDistanceCalculator$1{calculateRaw(d,m,g,w,I,P,$,F){let D=I-d,U=P-m,j=$-g,Z=F-w;return D<0&&(D=0-D),U<0&&(U=0-U),j<0&&(j=0-j),Z<0&&(Z=0-Z),this._kR*D+this._kG*U+this._kB*j+this._kA*Z}},Manhattan$1=class extends AbstractManhattan$1{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},ManhattanNommyde$1=class extends AbstractManhattan$1{_setDefaults(){this._kR=.4984,this._kG=.8625,this._kB=.2979,this._kA=1}},ManhattanBT709$1=class extends AbstractManhattan$1{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},PNGQuant$1=class extends AbstractDistanceCalculator$1{calculateRaw(d,m,g,w,I,P,$,F){const D=(F-w)*this._whitePoint.a;return this._colordifferenceCh(d*this._whitePoint.r,I*this._whitePoint.r,D)+this._colordifferenceCh(m*this._whitePoint.g,P*this._whitePoint.g,D)+this._colordifferenceCh(g*this._whitePoint.b,$*this._whitePoint.b,D)}_colordifferenceCh(d,m,g){const w=d-m,I=w+g;return w*w+I*I}_setDefaults(){}},palette_exports$1={};__export$1(palette_exports$1,{AbstractPaletteQuantizer:()=>AbstractPaletteQuantizer$1,ColorHistogram:()=>ColorHistogram$1,NeuQuant:()=>NeuQuant$1,NeuQuantFloat:()=>NeuQuantFloat$1,RGBQuant:()=>RGBQuant$1,WuColorCube:()=>WuColorCube$1,WuQuant:()=>WuQuant$1});var AbstractPaletteQuantizer$1=class{quantizeSync(){for(const d of this.quantize())if(d.palette)return d.palette;throw new Error("unreachable")}},Point$1=class{constructor(){__publicField$3(this,"r"),__publicField$3(this,"g"),__publicField$3(this,"b"),__publicField$3(this,"a"),__publicField$3(this,"uint32"),__publicField$3(this,"rgba"),this.uint32=-1>>>0,this.r=this.g=this.b=this.a=0,this.rgba=new Array(4),this.rgba[0]=0,this.rgba[1]=0,this.rgba[2]=0,this.rgba[3]=0}static createByQuadruplet(d){const m=new Point$1;return m.r=0|d[0],m.g=0|d[1],m.b=0|d[2],m.a=0|d[3],m._loadUINT32(),m._loadQuadruplet(),m}static createByRGBA(d,m,g,w){const I=new Point$1;return I.r=0|d,I.g=0|m,I.b=0|g,I.a=0|w,I._loadUINT32(),I._loadQuadruplet(),I}static createByUint32(d){const m=new Point$1;return m.uint32=d>>>0,m._loadRGBA(),m._loadQuadruplet(),m}from(d){this.r=d.r,this.g=d.g,this.b=d.b,this.a=d.a,this.uint32=d.uint32,this.rgba[0]=d.r,this.rgba[1]=d.g,this.rgba[2]=d.b,this.rgba[3]=d.a}getLuminosity(d){let m=this.r,g=this.g,w=this.b;return d&&(m=Math.min(255,255-this.a+this.a*m/255),g=Math.min(255,255-this.a+this.a*g/255),w=Math.min(255,255-this.a+this.a*w/255)),.2126*m+.7152*g+.0722*w}_loadUINT32(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0}_loadRGBA(){this.r=255&this.uint32,this.g=this.uint32>>>8&255,this.b=this.uint32>>>16&255,this.a=this.uint32>>>24&255}_loadQuadruplet(){this.rgba[0]=this.r,this.rgba[1]=this.g,this.rgba[2]=this.b,this.rgba[3]=this.a}},PointContainer$1=class{constructor(){__publicField$3(this,"_pointArray"),__publicField$3(this,"_width"),__publicField$3(this,"_height"),this._width=0,this._height=0,this._pointArray=[]}getWidth(){return this._width}getHeight(){return this._height}setWidth(d){this._width=d}setHeight(d){this._height=d}getPointArray(){return this._pointArray}clone(){const d=new PointContainer$1;d._width=this._width,d._height=this._height;for(let m=0,g=this._pointArray.length;m<g;m++)d._pointArray[m]=Point$1.createByUint32(0|this._pointArray[m].uint32);return d}toUint32Array(){const d=this._pointArray.length,m=new Uint32Array(d);for(let g=0;g<d;g++)m[g]=this._pointArray[g].uint32;return m}toUint8Array(){return new Uint8Array(this.toUint32Array().buffer)}static fromHTMLImageElement(d){const m=d.naturalWidth,g=d.naturalHeight,w=document.createElement("canvas");return w.width=m,w.height=g,w.getContext("2d").drawImage(d,0,0,m,g,0,0,m,g),PointContainer$1.fromHTMLCanvasElement(w)}static fromHTMLCanvasElement(d){const m=d.width,g=d.height,w=d.getContext("2d").getImageData(0,0,m,g);return PointContainer$1.fromImageData(w)}static fromImageData(d){const m=d.width,g=d.height;return PointContainer$1.fromUint8Array(d.data,m,g)}static fromUint8Array(d,m,g){switch(Object.prototype.toString.call(d)){case"[object Uint8ClampedArray]":case"[object Uint8Array]":break;default:d=new Uint8Array(d)}const w=new Uint32Array(d.buffer);return PointContainer$1.fromUint32Array(w,m,g)}static fromUint32Array(d,m,g){const w=new PointContainer$1;w._width=m,w._height=g;for(let I=0,P=d.length;I<P;I++)w._pointArray[I]=Point$1.createByUint32(0|d[I]);return w}static fromBuffer(d,m,g){const w=new Uint32Array(d.buffer,d.byteOffset,d.byteLength/Uint32Array.BYTES_PER_ELEMENT);return PointContainer$1.fromUint32Array(w,m,g)}},hueGroups$1=10;function hueGroup$1(d,m){const g=360/m;for(let w=1,I=g-g/2;w<m;w++,I+=g)if(d>=I&&d<I+g)return w;return 0}var Palette$1=class{constructor(){__publicField$3(this,"_pointContainer"),__publicField$3(this,"_pointArray",[]),__publicField$3(this,"_i32idx",{}),this._pointContainer=new PointContainer$1,this._pointContainer.setHeight(1),this._pointArray=this._pointContainer.getPointArray()}add(d){this._pointArray.push(d),this._pointContainer.setWidth(this._pointArray.length)}has(d){for(let m=this._pointArray.length-1;m>=0;m--)if(d.uint32===this._pointArray[m].uint32)return!0;return!1}getNearestColor(d,m){return this._pointArray[0|this._getNearestIndex(d,m)]}getPointContainer(){return this._pointContainer}_nearestPointFromCache(d){return typeof this._i32idx[d]=="number"?this._i32idx[d]:-1}_getNearestIndex(d,m){let g=this._nearestPointFromCache(""+m.uint32);if(g>=0)return g;let w=Number.MAX_VALUE;g=0;for(let I=0,P=this._pointArray.length;I<P;I++){const $=this._pointArray[I],F=d.calculateRaw(m.r,m.g,m.b,m.a,$.r,$.g,$.b,$.a);F<w&&(w=F,g=I)}return this._i32idx[m.uint32]=g,g}sort(){this._i32idx={},this._pointArray.sort((d,m)=>{const g=rgb2hsl$1(d.r,d.g,d.b),w=rgb2hsl$1(m.r,m.g,m.b),I=d.r===d.g&&d.g===d.b?0:1+hueGroup$1(g.h,hueGroups$1),P=(m.r===m.g&&m.g===m.b?0:1+hueGroup$1(w.h,hueGroups$1))-I;if(P)return-P;const $=d.getLuminosity(!0),F=m.getLuminosity(!0);if(F-$!=0)return F-$;const D=(100*w.s|0)-(100*g.s|0);return D?-D:0})}},utils_exports$1={};__export$1(utils_exports$1,{HueStatistics:()=>HueStatistics$1,Palette:()=>Palette$1,Point:()=>Point$1,PointContainer:()=>PointContainer$1,ProgressTracker:()=>ProgressTracker$1,arithmetic:()=>arithmetic_exports$1});var HueGroup$1=class{constructor(){__publicField$3(this,"num",0),__publicField$3(this,"cols",[])}},HueStatistics$1=class{constructor(d,m){__publicField$3(this,"_numGroups"),__publicField$3(this,"_minCols"),__publicField$3(this,"_stats"),__publicField$3(this,"_groupsFull"),this._numGroups=d,this._minCols=m,this._stats=[];for(let g=0;g<=d;g++)this._stats[g]=new HueGroup$1;this._groupsFull=0}check(d){this._groupsFull===this._numGroups+1&&(this.check=()=>{});const m=255&d,g=d>>>8&255,w=d>>>16&255,I=m===g&&g===w?0:1+hueGroup$1(rgb2hsl$1(m,g,w).h,this._numGroups),P=this._stats[I],$=this._minCols;P.num++,P.num>$||(P.num===$&&this._groupsFull++,P.num<=$&&this._stats[I].cols.push(d))}injectIntoDictionary(d){for(let m=0;m<=this._numGroups;m++)this._stats[m].num<=this._minCols&&this._stats[m].cols.forEach(g=>{d[g]?d[g]++:d[g]=1})}injectIntoArray(d){for(let m=0;m<=this._numGroups;m++)this._stats[m].num<=this._minCols&&this._stats[m].cols.forEach(g=>{d.indexOf(g)===-1&&d.push(g)})}},_ProgressTracker$1=class{constructor(d,m){__publicField$3(this,"progress"),__publicField$3(this,"_step"),__publicField$3(this,"_range"),__publicField$3(this,"_last"),__publicField$3(this,"_progressRange"),this._range=d,this._progressRange=m,this._step=Math.max(1,this._range/(_ProgressTracker$1.steps+1)|0),this._last=-this._step,this.progress=0}shouldNotify(d){return d-this._last>=this._step&&(this._last=d,this.progress=Math.min(this._progressRange*this._last/this._range,this._progressRange),!0)}},ProgressTracker$1=_ProgressTracker$1;__publicField$3(ProgressTracker$1,"steps",100);var networkBiasShift$1=3,Neuron$1=class{constructor(d){__publicField$3(this,"r"),__publicField$3(this,"g"),__publicField$3(this,"b"),__publicField$3(this,"a"),this.r=this.g=this.b=this.a=d}toPoint(){return Point$1.createByRGBA(this.r>>networkBiasShift$1,this.g>>networkBiasShift$1,this.b>>networkBiasShift$1,this.a>>networkBiasShift$1)}subtract(d,m,g,w){this.r-=0|d,this.g-=0|m,this.b-=0|g,this.a-=0|w}},_NeuQuant$1=class extends AbstractPaletteQuantizer$1{constructor(d,m=256){super(),__publicField$3(this,"_pointArray"),__publicField$3(this,"_networkSize"),__publicField$3(this,"_network"),__publicField$3(this,"_sampleFactor"),__publicField$3(this,"_radPower"),__publicField$3(this,"_freq"),__publicField$3(this,"_bias"),__publicField$3(this,"_distance"),this._distance=d,this._pointArray=[],this._sampleFactor=1,this._networkSize=m,this._distance.setWhitePoint(255<<networkBiasShift$1,255<<networkBiasShift$1,255<<networkBiasShift$1,255<<networkBiasShift$1)}sample(d){this._pointArray=this._pointArray.concat(d.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let d=0;d<this._networkSize;d++)this._network[d]=new Neuron$1((d<<networkBiasShift$1+8)/this._networkSize|0),this._freq[d]=_NeuQuant$1._initialBias/this._networkSize|0,this._bias[d]=0}*_learn(){let d=this._sampleFactor;const m=this._pointArray.length;m<_NeuQuant$1._minpicturebytes&&(d=1);const g=30+(d-1)/3|0,w=m/d|0;let I,P=w/_NeuQuant$1._nCycles|0,$=_NeuQuant$1._initAlpha,F=(this._networkSize>>3)*_NeuQuant$1._radiusBias,D=F>>_NeuQuant$1._radiusBiasShift;D<=1&&(D=0);for(let j=0;j<D;j++)this._radPower[j]=$*((D*D-j*j)*_NeuQuant$1._radBias/(D*D))>>>0;I=m<_NeuQuant$1._minpicturebytes?1:m%_NeuQuant$1._prime1!=0?_NeuQuant$1._prime1:m%_NeuQuant$1._prime2!=0?_NeuQuant$1._prime2:m%_NeuQuant$1._prime3!=0?_NeuQuant$1._prime3:_NeuQuant$1._prime4;const U=new ProgressTracker$1(w,99);for(let j=0,Z=0;j<w;){U.shouldNotify(j)&&(yield{progress:U.progress});const G=this._pointArray[Z],H=G.b<<networkBiasShift$1,W=G.g<<networkBiasShift$1,q=G.r<<networkBiasShift$1,Q=G.a<<networkBiasShift$1,et=this._contest(H,W,q,Q);if(this._alterSingle($,et,H,W,q,Q),D!==0&&this._alterNeighbour(D,et,H,W,q,Q),Z+=I,Z>=m&&(Z-=m),j++,P===0&&(P=1),j%P==0){$-=$/g|0,F-=F/_NeuQuant$1._radiusDecrease|0,D=F>>_NeuQuant$1._radiusBiasShift,D<=1&&(D=0);for(let J=0;J<D;J++)this._radPower[J]=$*((D*D-J*J)*_NeuQuant$1._radBias/(D*D))>>>0}}}_buildPalette(){const d=new Palette$1;return this._network.forEach(m=>{d.add(m.toPoint())}),d.sort(),d}_alterNeighbour(d,m,g,w,I,P){let $=m-d;$<-1&&($=-1);let F=m+d;F>this._networkSize&&(F=this._networkSize);let D=m+1,U=m-1,j=1;for(;D<F||U>$;){const Z=this._radPower[j++]/_NeuQuant$1._alphaRadBias;if(D<F){const G=this._network[D++];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}if(U>$){const G=this._network[U--];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}}}_alterSingle(d,m,g,w,I,P){d/=_NeuQuant$1._initAlpha;const $=this._network[m];$.subtract(d*($.r-I),d*($.g-w),d*($.b-g),d*($.a-P))}_contest(d,m,g,w){const I=1020<<networkBiasShift$1;let P=2147483647,$=P,F=-1,D=F;for(let U=0;U<this._networkSize;U++){const j=this._network[U],Z=this._distance.calculateNormalized(j,{r:g,g:m,b:d,a:w})*I|0;Z<P&&(P=Z,F=U);const G=Z-(this._bias[U]>>_NeuQuant$1._initialBiasShift-networkBiasShift$1);G<$&&($=G,D=U);const H=this._freq[U]>>_NeuQuant$1._betaShift;this._freq[U]-=H,this._bias[U]+=H<<_NeuQuant$1._gammaShift}return this._freq[F]+=_NeuQuant$1._beta,this._bias[F]-=_NeuQuant$1._betaGamma,D}},NeuQuant$1=_NeuQuant$1;__publicField$3(NeuQuant$1,"_prime1",499),__publicField$3(NeuQuant$1,"_prime2",491),__publicField$3(NeuQuant$1,"_prime3",487),__publicField$3(NeuQuant$1,"_prime4",503),__publicField$3(NeuQuant$1,"_minpicturebytes",_NeuQuant$1._prime4),__publicField$3(NeuQuant$1,"_nCycles",100),__publicField$3(NeuQuant$1,"_initialBiasShift",16),__publicField$3(NeuQuant$1,"_initialBias",1<<_NeuQuant$1._initialBiasShift),__publicField$3(NeuQuant$1,"_gammaShift",10),__publicField$3(NeuQuant$1,"_betaShift",10),__publicField$3(NeuQuant$1,"_beta",_NeuQuant$1._initialBias>>_NeuQuant$1._betaShift),__publicField$3(NeuQuant$1,"_betaGamma",_NeuQuant$1._initialBias<<_NeuQuant$1._gammaShift-_NeuQuant$1._betaShift),__publicField$3(NeuQuant$1,"_radiusBiasShift",6),__publicField$3(NeuQuant$1,"_radiusBias",1<<_NeuQuant$1._radiusBiasShift),__publicField$3(NeuQuant$1,"_radiusDecrease",30),__publicField$3(NeuQuant$1,"_alphaBiasShift",10),__publicField$3(NeuQuant$1,"_initAlpha",1<<_NeuQuant$1._alphaBiasShift),__publicField$3(NeuQuant$1,"_radBiasShift",8),__publicField$3(NeuQuant$1,"_radBias",1<<_NeuQuant$1._radBiasShift),__publicField$3(NeuQuant$1,"_alphaRadBiasShift",_NeuQuant$1._alphaBiasShift+_NeuQuant$1._radBiasShift),__publicField$3(NeuQuant$1,"_alphaRadBias",1<<_NeuQuant$1._alphaRadBiasShift);var networkBiasShift2$1=3,NeuronFloat$1=class{constructor(d){__publicField$3(this,"r"),__publicField$3(this,"g"),__publicField$3(this,"b"),__publicField$3(this,"a"),this.r=this.g=this.b=this.a=d}toPoint(){return Point$1.createByRGBA(this.r>>networkBiasShift2$1,this.g>>networkBiasShift2$1,this.b>>networkBiasShift2$1,this.a>>networkBiasShift2$1)}subtract(d,m,g,w){this.r-=d,this.g-=m,this.b-=g,this.a-=w}},_NeuQuantFloat$1=class extends AbstractPaletteQuantizer$1{constructor(d,m=256){super(),__publicField$3(this,"_pointArray"),__publicField$3(this,"_networkSize"),__publicField$3(this,"_network"),__publicField$3(this,"_sampleFactor"),__publicField$3(this,"_radPower"),__publicField$3(this,"_freq"),__publicField$3(this,"_bias"),__publicField$3(this,"_distance"),this._distance=d,this._pointArray=[],this._sampleFactor=1,this._networkSize=m,this._distance.setWhitePoint(255<<networkBiasShift2$1,255<<networkBiasShift2$1,255<<networkBiasShift2$1,255<<networkBiasShift2$1)}sample(d){this._pointArray=this._pointArray.concat(d.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let d=0;d<this._networkSize;d++)this._network[d]=new NeuronFloat$1((d<<networkBiasShift2$1+8)/this._networkSize),this._freq[d]=_NeuQuantFloat$1._initialBias/this._networkSize,this._bias[d]=0}*_learn(){let d=this._sampleFactor;const m=this._pointArray.length;m<_NeuQuantFloat$1._minpicturebytes&&(d=1);const g=30+(d-1)/3,w=m/d;let I,P=w/_NeuQuantFloat$1._nCycles|0,$=_NeuQuantFloat$1._initAlpha,F=(this._networkSize>>3)*_NeuQuantFloat$1._radiusBias,D=F>>_NeuQuantFloat$1._radiusBiasShift;D<=1&&(D=0);for(let j=0;j<D;j++)this._radPower[j]=$*((D*D-j*j)*_NeuQuantFloat$1._radBias/(D*D));I=m<_NeuQuantFloat$1._minpicturebytes?1:m%_NeuQuantFloat$1._prime1!=0?_NeuQuantFloat$1._prime1:m%_NeuQuantFloat$1._prime2!=0?_NeuQuantFloat$1._prime2:m%_NeuQuantFloat$1._prime3!=0?_NeuQuantFloat$1._prime3:_NeuQuantFloat$1._prime4;const U=new ProgressTracker$1(w,99);for(let j=0,Z=0;j<w;){U.shouldNotify(j)&&(yield{progress:U.progress});const G=this._pointArray[Z],H=G.b<<networkBiasShift2$1,W=G.g<<networkBiasShift2$1,q=G.r<<networkBiasShift2$1,Q=G.a<<networkBiasShift2$1,et=this._contest(H,W,q,Q);if(this._alterSingle($,et,H,W,q,Q),D!==0&&this._alterNeighbour(D,et,H,W,q,Q),Z+=I,Z>=m&&(Z-=m),j++,P===0&&(P=1),j%P==0){$-=$/g,F-=F/_NeuQuantFloat$1._radiusDecrease,D=F>>_NeuQuantFloat$1._radiusBiasShift,D<=1&&(D=0);for(let J=0;J<D;J++)this._radPower[J]=$*((D*D-J*J)*_NeuQuantFloat$1._radBias/(D*D))}}}_buildPalette(){const d=new Palette$1;return this._network.forEach(m=>{d.add(m.toPoint())}),d.sort(),d}_alterNeighbour(d,m,g,w,I,P){let $=m-d;$<-1&&($=-1);let F=m+d;F>this._networkSize&&(F=this._networkSize);let D=m+1,U=m-1,j=1;for(;D<F||U>$;){const Z=this._radPower[j++]/_NeuQuantFloat$1._alphaRadBias;if(D<F){const G=this._network[D++];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}if(U>$){const G=this._network[U--];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}}}_alterSingle(d,m,g,w,I,P){d/=_NeuQuantFloat$1._initAlpha;const $=this._network[m];$.subtract(d*($.r-I),d*($.g-w),d*($.b-g),d*($.a-P))}_contest(d,m,g,w){const I=1020<<networkBiasShift2$1;let P=2147483647,$=P,F=-1,D=F;for(let U=0;U<this._networkSize;U++){const j=this._network[U],Z=this._distance.calculateNormalized(j,{r:g,g:m,b:d,a:w})*I;Z<P&&(P=Z,F=U);const G=Z-(this._bias[U]>>_NeuQuantFloat$1._initialBiasShift-networkBiasShift2$1);G<$&&($=G,D=U);const H=this._freq[U]>>_NeuQuantFloat$1._betaShift;this._freq[U]-=H,this._bias[U]+=H<<_NeuQuantFloat$1._gammaShift}return this._freq[F]+=_NeuQuantFloat$1._beta,this._bias[F]-=_NeuQuantFloat$1._betaGamma,D}},NeuQuantFloat$1=_NeuQuantFloat$1;__publicField$3(NeuQuantFloat$1,"_prime1",499),__publicField$3(NeuQuantFloat$1,"_prime2",491),__publicField$3(NeuQuantFloat$1,"_prime3",487),__publicField$3(NeuQuantFloat$1,"_prime4",503),__publicField$3(NeuQuantFloat$1,"_minpicturebytes",_NeuQuantFloat$1._prime4),__publicField$3(NeuQuantFloat$1,"_nCycles",100),__publicField$3(NeuQuantFloat$1,"_initialBiasShift",16),__publicField$3(NeuQuantFloat$1,"_initialBias",1<<_NeuQuantFloat$1._initialBiasShift),__publicField$3(NeuQuantFloat$1,"_gammaShift",10),__publicField$3(NeuQuantFloat$1,"_betaShift",10),__publicField$3(NeuQuantFloat$1,"_beta",_NeuQuantFloat$1._initialBias>>_NeuQuantFloat$1._betaShift),__publicField$3(NeuQuantFloat$1,"_betaGamma",_NeuQuantFloat$1._initialBias<<_NeuQuantFloat$1._gammaShift-_NeuQuantFloat$1._betaShift),__publicField$3(NeuQuantFloat$1,"_radiusBiasShift",6),__publicField$3(NeuQuantFloat$1,"_radiusBias",1<<_NeuQuantFloat$1._radiusBiasShift),__publicField$3(NeuQuantFloat$1,"_radiusDecrease",30),__publicField$3(NeuQuantFloat$1,"_alphaBiasShift",10),__publicField$3(NeuQuantFloat$1,"_initAlpha",1<<_NeuQuantFloat$1._alphaBiasShift),__publicField$3(NeuQuantFloat$1,"_radBiasShift",8),__publicField$3(NeuQuantFloat$1,"_radBias",1<<_NeuQuantFloat$1._radBiasShift),__publicField$3(NeuQuantFloat$1,"_alphaRadBiasShift",_NeuQuantFloat$1._alphaBiasShift+_NeuQuantFloat$1._radBiasShift),__publicField$3(NeuQuantFloat$1,"_alphaRadBias",1<<_NeuQuantFloat$1._alphaRadBiasShift);var _ColorHistogram$1=class{constructor(d,m){__publicField$3(this,"_method"),__publicField$3(this,"_hueStats"),__publicField$3(this,"_histogram"),__publicField$3(this,"_initColors"),__publicField$3(this,"_minHueCols"),this._method=d,this._minHueCols=m<<2,this._initColors=m<<2,this._hueStats=new HueStatistics$1(_ColorHistogram$1._hueGroups,this._minHueCols),this._histogram=Object.create(null)}sample(d){switch(this._method){case 1:this._colorStats1D(d);break;case 2:this._colorStats2D(d)}}getImportanceSortedColorsIDXI32(){const d=stableSort$1(Object.keys(this._histogram),(g,w)=>this._histogram[w]-this._histogram[g]);if(d.length===0)return[];let m;switch(this._method){case 1:const g=Math.min(d.length,this._initColors),w=d[g-1],I=this._histogram[w];m=d.slice(0,g);let P=g;const $=d.length;for(;P<$&&this._histogram[d[P]]===I;)m.push(d[P++]);this._hueStats.injectIntoArray(m);break;case 2:m=d;break;default:throw new Error("Incorrect method")}return m.map(g=>+g)}_colorStats1D(d){const m=this._histogram,g=d.getPointArray(),w=g.length;for(let I=0;I<w;I++){const P=g[I].uint32;this._hueStats.check(P),P in m?m[P]++:m[P]=1}}_colorStats2D(d){const m=d.getWidth(),g=d.getHeight(),w=d.getPointArray(),I=_ColorHistogram$1._boxSize[0],P=_ColorHistogram$1._boxSize[1],$=I*P,F=this._makeBoxes(m,g,I,P),D=this._histogram;F.forEach(U=>{let j=Math.round(U.w*U.h/$)*_ColorHistogram$1._boxPixels;j<2&&(j=2);const Z={};this._iterateBox(U,m,G=>{const H=w[G].uint32;this._hueStats.check(H),H in D?D[H]++:H in Z?++Z[H]>=j&&(D[H]=Z[H]):Z[H]=1})}),this._hueStats.injectIntoDictionary(D)}_iterateBox(d,m,g){const w=d,I=w.y*m+w.x,P=(w.y+w.h-1)*m+(w.x+w.w-1),$=m-w.w+1;let F=0,D=I;do g.call(this,D),D+=++F%w.w==0?$:1;while(D<=P)}_makeBoxes(d,m,g,w){const I=d%g,P=m%w,$=d-I,F=m-P,D=[];for(let U=0;U<m;U+=w)for(let j=0;j<d;j+=g)D.push({x:j,y:U,w:j===$?I:g,h:U===F?P:w});return D}},ColorHistogram$1=_ColorHistogram$1;__publicField$3(ColorHistogram$1,"_boxSize",[64,64]),__publicField$3(ColorHistogram$1,"_boxPixels",2),__publicField$3(ColorHistogram$1,"_hueGroups",10);var RemovedColor$1=class{constructor(d,m,g){__publicField$3(this,"index"),__publicField$3(this,"color"),__publicField$3(this,"distance"),this.index=d,this.color=m,this.distance=g}},RGBQuant$1=class extends AbstractPaletteQuantizer$1{constructor(d,m=256,g=2){super(),__publicField$3(this,"_colors"),__publicField$3(this,"_initialDistance"),__publicField$3(this,"_distanceIncrement"),__publicField$3(this,"_histogram"),__publicField$3(this,"_distance"),this._distance=d,this._colors=m,this._histogram=new ColorHistogram$1(g,m),this._initialDistance=.01,this._distanceIncrement=.005}sample(d){this._histogram.sample(d)}*quantize(){const d=this._histogram.getImportanceSortedColorsIDXI32();if(d.length===0)throw new Error("No colors in image");yield*this._buildPalette(d)}*_buildPalette(d){const m=new Palette$1,g=m.getPointContainer().getPointArray(),w=new Array(d.length);for(let j=0;j<d.length;j++)g.push(Point$1.createByUint32(d[j])),w[j]=1;const I=g.length,P=[];let $=I,F=this._initialDistance;const D=new ProgressTracker$1($-this._colors,99);for(;$>this._colors;){P.length=0;for(let j=0;j<I;j++){if(D.shouldNotify(I-$)&&(yield{progress:D.progress}),w[j]===0)continue;const Z=g[j];for(let G=j+1;G<I;G++){if(w[G]===0)continue;const H=g[G],W=this._distance.calculateNormalized(Z,H);W<F&&(P.push(new RemovedColor$1(G,H,W)),w[G]=0,$--)}}F+=$>3*this._colors?this._initialDistance:this._distanceIncrement}if($<this._colors){stableSort$1(P,(Z,G)=>G.distance-Z.distance);let j=0;for(;$<this._colors&&j<P.length;)w[P[j].index]=1,$++,j++}let U=g.length;for(let j=U-1;j>=0;j--)w[j]===0&&(j!==U-1&&(g[j]=g[U-1]),--U);g.length=U,m.sort(),yield{palette:m,progress:100}}};function createArray1D$1(d){const m=[];for(let g=0;g<d;g++)m[g]=0;return m}function createArray4D$1(d,m,g,w){const I=new Array(d);for(let P=0;P<d;P++){I[P]=new Array(m);for(let $=0;$<m;$++){I[P][$]=new Array(g);for(let F=0;F<g;F++){I[P][$][F]=new Array(w);for(let D=0;D<w;D++)I[P][$][F][D]=0}}}return I}function createArray3D$1(d,m,g){const w=new Array(d);for(let I=0;I<d;I++){w[I]=new Array(m);for(let P=0;P<m;P++){w[I][P]=new Array(g);for(let $=0;$<g;$++)w[I][P][$]=0}}return w}function fillArray3D$1(d,m,g,w,I){for(let P=0;P<m;P++){d[P]=[];for(let $=0;$<g;$++){d[P][$]=[];for(let F=0;F<w;F++)d[P][$][F]=I}}}function fillArray1D$1(d,m,g){for(let w=0;w<m;w++)d[w]=g}var WuColorCube$1=class{constructor(){__publicField$3(this,"redMinimum"),__publicField$3(this,"redMaximum"),__publicField$3(this,"greenMinimum"),__publicField$3(this,"greenMaximum"),__publicField$3(this,"blueMinimum"),__publicField$3(this,"blueMaximum"),__publicField$3(this,"volume"),__publicField$3(this,"alphaMinimum"),__publicField$3(this,"alphaMaximum")}},_WuQuant$1=class extends AbstractPaletteQuantizer$1{constructor(d,m=256,g=5){super(),__publicField$3(this,"_reds"),__publicField$3(this,"_greens"),__publicField$3(this,"_blues"),__publicField$3(this,"_alphas"),__publicField$3(this,"_sums"),__publicField$3(this,"_weights"),__publicField$3(this,"_momentsRed"),__publicField$3(this,"_momentsGreen"),__publicField$3(this,"_momentsBlue"),__publicField$3(this,"_momentsAlpha"),__publicField$3(this,"_moments"),__publicField$3(this,"_table"),__publicField$3(this,"_pixels"),__publicField$3(this,"_cubes"),__publicField$3(this,"_colors"),__publicField$3(this,"_significantBitsPerChannel"),__publicField$3(this,"_maxSideIndex"),__publicField$3(this,"_alphaMaxSideIndex"),__publicField$3(this,"_sideSize"),__publicField$3(this,"_alphaSideSize"),__publicField$3(this,"_distance"),this._distance=d,this._setQuality(g),this._initialize(m)}sample(d){const m=d.getPointArray();for(let g=0,w=m.length;g<w;g++)this._addColor(m[g]);this._pixels=this._pixels.concat(m)}*quantize(){yield*this._preparePalette();const d=new Palette$1;for(let m=0;m<this._colors;m++)if(this._sums[m]>0){const g=this._sums[m],w=this._reds[m]/g,I=this._greens[m]/g,P=this._blues[m]/g,$=this._alphas[m]/g,F=Point$1.createByRGBA(0|w,0|I,0|P,0|$);d.add(F)}d.sort(),yield{palette:d,progress:100}}*_preparePalette(){yield*this._calculateMoments();let d=0;const m=createArray1D$1(this._colors);for(let $=1;$<this._colors;++$){this._cut(this._cubes[d],this._cubes[$])?(m[d]=this._cubes[d].volume>1?this._calculateVariance(this._cubes[d]):0,m[$]=this._cubes[$].volume>1?this._calculateVariance(this._cubes[$]):0):(m[d]=0,$--),d=0;let F=m[0];for(let D=1;D<=$;++D)m[D]>F&&(F=m[D],d=D);if(F<=0){this._colors=$+1;break}}const g=[],w=[],I=[],P=[];for(let $=0;$<this._colors;++$){const F=_WuQuant$1._volume(this._cubes[$],this._weights);F>0?(g[$]=_WuQuant$1._volume(this._cubes[$],this._momentsRed)/F|0,w[$]=_WuQuant$1._volume(this._cubes[$],this._momentsGreen)/F|0,I[$]=_WuQuant$1._volume(this._cubes[$],this._momentsBlue)/F|0,P[$]=_WuQuant$1._volume(this._cubes[$],this._momentsAlpha)/F|0):(g[$]=0,w[$]=0,I[$]=0,P[$]=0)}this._reds=createArray1D$1(this._colors+1),this._greens=createArray1D$1(this._colors+1),this._blues=createArray1D$1(this._colors+1),this._alphas=createArray1D$1(this._colors+1),this._sums=createArray1D$1(this._colors+1);for(let $=0,F=this._pixels.length;$<F;$++){const D=this._pixels[$];let U=-1,j=Number.MAX_VALUE;for(let Z=0;Z<this._colors;Z++){const G=g[Z],H=w[Z],W=I[Z],q=P[Z],Q=this._distance.calculateRaw(G,H,W,q,D.r,D.g,D.b,D.a);Q<j&&(j=Q,U=Z)}this._reds[U]+=D.r,this._greens[U]+=D.g,this._blues[U]+=D.b,this._alphas[U]+=D.a,this._sums[U]++}}_addColor(d){const m=8-this._significantBitsPerChannel,g=1+(d.r>>m),w=1+(d.g>>m),I=1+(d.b>>m),P=1+(d.a>>m);this._weights[P][g][w][I]++,this._momentsRed[P][g][w][I]+=d.r,this._momentsGreen[P][g][w][I]+=d.g,this._momentsBlue[P][g][w][I]+=d.b,this._momentsAlpha[P][g][w][I]+=d.a,this._moments[P][g][w][I]+=this._table[d.r]+this._table[d.g]+this._table[d.b]+this._table[d.a]}*_calculateMoments(){const d=[],m=[],g=[],w=[],I=[],P=[],$=createArray3D$1(this._sideSize,this._sideSize,this._sideSize),F=createArray3D$1(this._sideSize,this._sideSize,this._sideSize),D=createArray3D$1(this._sideSize,this._sideSize,this._sideSize),U=createArray3D$1(this._sideSize,this._sideSize,this._sideSize),j=createArray3D$1(this._sideSize,this._sideSize,this._sideSize),Z=createArray3D$1(this._sideSize,this._sideSize,this._sideSize);let G=0;const H=new ProgressTracker$1(this._alphaMaxSideIndex*this._maxSideIndex,99);for(let W=1;W<=this._alphaMaxSideIndex;++W){fillArray3D$1($,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D$1(F,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D$1(D,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D$1(U,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D$1(j,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D$1(Z,this._sideSize,this._sideSize,this._sideSize,0);for(let q=1;q<=this._maxSideIndex;++q,++G){H.shouldNotify(G)&&(yield{progress:H.progress}),fillArray1D$1(d,this._sideSize,0),fillArray1D$1(m,this._sideSize,0),fillArray1D$1(g,this._sideSize,0),fillArray1D$1(w,this._sideSize,0),fillArray1D$1(I,this._sideSize,0),fillArray1D$1(P,this._sideSize,0);for(let Q=1;Q<=this._maxSideIndex;++Q){let et=0,J=0,V=0,rt=0,X=0,ot=0;for(let it=1;it<=this._maxSideIndex;++it)et+=this._weights[W][q][Q][it],J+=this._momentsRed[W][q][Q][it],V+=this._momentsGreen[W][q][Q][it],rt+=this._momentsBlue[W][q][Q][it],X+=this._momentsAlpha[W][q][Q][it],ot+=this._moments[W][q][Q][it],d[it]+=et,m[it]+=J,g[it]+=V,w[it]+=rt,I[it]+=X,P[it]+=ot,$[q][Q][it]=$[q-1][Q][it]+d[it],F[q][Q][it]=F[q-1][Q][it]+m[it],D[q][Q][it]=D[q-1][Q][it]+g[it],U[q][Q][it]=U[q-1][Q][it]+w[it],j[q][Q][it]=j[q-1][Q][it]+I[it],Z[q][Q][it]=Z[q-1][Q][it]+P[it],this._weights[W][q][Q][it]=this._weights[W-1][q][Q][it]+$[q][Q][it],this._momentsRed[W][q][Q][it]=this._momentsRed[W-1][q][Q][it]+F[q][Q][it],this._momentsGreen[W][q][Q][it]=this._momentsGreen[W-1][q][Q][it]+D[q][Q][it],this._momentsBlue[W][q][Q][it]=this._momentsBlue[W-1][q][Q][it]+U[q][Q][it],this._momentsAlpha[W][q][Q][it]=this._momentsAlpha[W-1][q][Q][it]+j[q][Q][it],this._moments[W][q][Q][it]=this._moments[W-1][q][Q][it]+Z[q][Q][it]}}}}static _volumeFloat(d,m){return m[d.alphaMaximum][d.redMaximum][d.greenMaximum][d.blueMaximum]-m[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMaximum]-m[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMaximum]+m[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMaximum]-m[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMaximum]+m[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMaximum]+m[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMaximum]-m[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(m[d.alphaMaximum][d.redMaximum][d.greenMaximum][d.blueMinimum]-m[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMinimum]-m[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMinimum]+m[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]-m[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMinimum]+m[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]+m[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]-m[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum])}static _volume(d,m){return 0|_WuQuant$1._volumeFloat(d,m)}static _top(d,m,g,w){let I;switch(m){case _WuQuant$1._alpha:I=w[g][d.redMaximum][d.greenMaximum][d.blueMaximum]-w[g][d.redMaximum][d.greenMinimum][d.blueMaximum]-w[g][d.redMinimum][d.greenMaximum][d.blueMaximum]+w[g][d.redMinimum][d.greenMinimum][d.blueMaximum]-(w[g][d.redMaximum][d.greenMaximum][d.blueMinimum]-w[g][d.redMaximum][d.greenMinimum][d.blueMinimum]-w[g][d.redMinimum][d.greenMaximum][d.blueMinimum]+w[g][d.redMinimum][d.greenMinimum][d.blueMinimum]);break;case _WuQuant$1._red:I=w[d.alphaMaximum][g][d.greenMaximum][d.blueMaximum]-w[d.alphaMaximum][g][d.greenMinimum][d.blueMaximum]-w[d.alphaMinimum][g][d.greenMaximum][d.blueMaximum]+w[d.alphaMinimum][g][d.greenMinimum][d.blueMaximum]-(w[d.alphaMaximum][g][d.greenMaximum][d.blueMinimum]-w[d.alphaMaximum][g][d.greenMinimum][d.blueMinimum]-w[d.alphaMinimum][g][d.greenMaximum][d.blueMinimum]+w[d.alphaMinimum][g][d.greenMinimum][d.blueMinimum]);break;case _WuQuant$1._green:I=w[d.alphaMaximum][d.redMaximum][g][d.blueMaximum]-w[d.alphaMaximum][d.redMinimum][g][d.blueMaximum]-w[d.alphaMinimum][d.redMaximum][g][d.blueMaximum]+w[d.alphaMinimum][d.redMinimum][g][d.blueMaximum]-(w[d.alphaMaximum][d.redMaximum][g][d.blueMinimum]-w[d.alphaMaximum][d.redMinimum][g][d.blueMinimum]-w[d.alphaMinimum][d.redMaximum][g][d.blueMinimum]+w[d.alphaMinimum][d.redMinimum][g][d.blueMinimum]);break;case _WuQuant$1._blue:I=w[d.alphaMaximum][d.redMaximum][d.greenMaximum][g]-w[d.alphaMaximum][d.redMaximum][d.greenMinimum][g]-w[d.alphaMaximum][d.redMinimum][d.greenMaximum][g]+w[d.alphaMaximum][d.redMinimum][d.greenMinimum][g]-(w[d.alphaMinimum][d.redMaximum][d.greenMaximum][g]-w[d.alphaMinimum][d.redMaximum][d.greenMinimum][g]-w[d.alphaMinimum][d.redMinimum][d.greenMaximum][g]+w[d.alphaMinimum][d.redMinimum][d.greenMinimum][g]);break;default:throw new Error("impossible")}return 0|I}static _bottom(d,m,g){switch(m){case _WuQuant$1._alpha:return-g[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMaximum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMaximum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMaximum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(-g[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMinimum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);case _WuQuant$1._red:return-g[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMaximum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMaximum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMaximum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(-g[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMinimum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);case _WuQuant$1._green:return-g[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMaximum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMaximum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMaximum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(-g[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);case _WuQuant$1._blue:return-g[d.alphaMaximum][d.redMaximum][d.greenMaximum][d.blueMinimum]+g[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]-(-g[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMinimum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);default:return 0}}_calculateVariance(d){const m=_WuQuant$1._volume(d,this._momentsRed),g=_WuQuant$1._volume(d,this._momentsGreen),w=_WuQuant$1._volume(d,this._momentsBlue),I=_WuQuant$1._volume(d,this._momentsAlpha);return _WuQuant$1._volumeFloat(d,this._moments)-(m*m+g*g+w*w+I*I)/_WuQuant$1._volume(d,this._weights)}_maximize(d,m,g,w,I,P,$,F,D){const U=0|_WuQuant$1._bottom(d,m,this._momentsRed),j=0|_WuQuant$1._bottom(d,m,this._momentsGreen),Z=0|_WuQuant$1._bottom(d,m,this._momentsBlue),G=0|_WuQuant$1._bottom(d,m,this._momentsAlpha),H=0|_WuQuant$1._bottom(d,m,this._weights);let W=0,q=-1;for(let Q=g;Q<w;++Q){let et=U+_WuQuant$1._top(d,m,Q,this._momentsRed),J=j+_WuQuant$1._top(d,m,Q,this._momentsGreen),V=Z+_WuQuant$1._top(d,m,Q,this._momentsBlue),rt=G+_WuQuant$1._top(d,m,Q,this._momentsAlpha),X=H+_WuQuant$1._top(d,m,Q,this._weights);if(X!==0){let ot=et*et+J*J+V*V+rt*rt,it=ot/X;et=I-et,J=P-J,V=$-V,rt=F-rt,X=D-X,X!==0&&(ot=et*et+J*J+V*V+rt*rt,it+=ot/X,it>W&&(W=it,q=Q))}}return{max:W,position:q}}_cut(d,m){let g;const w=_WuQuant$1._volume(d,this._momentsRed),I=_WuQuant$1._volume(d,this._momentsGreen),P=_WuQuant$1._volume(d,this._momentsBlue),$=_WuQuant$1._volume(d,this._momentsAlpha),F=_WuQuant$1._volume(d,this._weights),D=this._maximize(d,_WuQuant$1._red,d.redMinimum+1,d.redMaximum,w,I,P,$,F),U=this._maximize(d,_WuQuant$1._green,d.greenMinimum+1,d.greenMaximum,w,I,P,$,F),j=this._maximize(d,_WuQuant$1._blue,d.blueMinimum+1,d.blueMaximum,w,I,P,$,F),Z=this._maximize(d,_WuQuant$1._alpha,d.alphaMinimum+1,d.alphaMaximum,w,I,P,$,F);if(Z.max>=D.max&&Z.max>=U.max&&Z.max>=j.max){if(g=_WuQuant$1._alpha,Z.position<0)return!1}else g=D.max>=Z.max&&D.max>=U.max&&D.max>=j.max?_WuQuant$1._red:U.max>=Z.max&&U.max>=D.max&&U.max>=j.max?_WuQuant$1._green:_WuQuant$1._blue;switch(m.redMaximum=d.redMaximum,m.greenMaximum=d.greenMaximum,m.blueMaximum=d.blueMaximum,m.alphaMaximum=d.alphaMaximum,g){case _WuQuant$1._red:m.redMinimum=d.redMaximum=D.position,m.greenMinimum=d.greenMinimum,m.blueMinimum=d.blueMinimum,m.alphaMinimum=d.alphaMinimum;break;case _WuQuant$1._green:m.greenMinimum=d.greenMaximum=U.position,m.redMinimum=d.redMinimum,m.blueMinimum=d.blueMinimum,m.alphaMinimum=d.alphaMinimum;break;case _WuQuant$1._blue:m.blueMinimum=d.blueMaximum=j.position,m.redMinimum=d.redMinimum,m.greenMinimum=d.greenMinimum,m.alphaMinimum=d.alphaMinimum;break;case _WuQuant$1._alpha:m.alphaMinimum=d.alphaMaximum=Z.position,m.blueMinimum=d.blueMinimum,m.redMinimum=d.redMinimum,m.greenMinimum=d.greenMinimum}return d.volume=(d.redMaximum-d.redMinimum)*(d.greenMaximum-d.greenMinimum)*(d.blueMaximum-d.blueMinimum)*(d.alphaMaximum-d.alphaMinimum),m.volume=(m.redMaximum-m.redMinimum)*(m.greenMaximum-m.greenMinimum)*(m.blueMaximum-m.blueMinimum)*(m.alphaMaximum-m.alphaMinimum),!0}_initialize(d){this._colors=d,this._cubes=[];for(let m=0;m<d;m++)this._cubes[m]=new WuColorCube$1;this._cubes[0].redMinimum=0,this._cubes[0].greenMinimum=0,this._cubes[0].blueMinimum=0,this._cubes[0].alphaMinimum=0,this._cubes[0].redMaximum=this._maxSideIndex,this._cubes[0].greenMaximum=this._maxSideIndex,this._cubes[0].blueMaximum=this._maxSideIndex,this._cubes[0].alphaMaximum=this._alphaMaxSideIndex,this._weights=createArray4D$1(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsRed=createArray4D$1(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsGreen=createArray4D$1(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsBlue=createArray4D$1(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsAlpha=createArray4D$1(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._moments=createArray4D$1(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._table=[];for(let m=0;m<256;++m)this._table[m]=m*m;this._pixels=[]}_setQuality(d=5){this._significantBitsPerChannel=d,this._maxSideIndex=1<<this._significantBitsPerChannel,this._alphaMaxSideIndex=this._maxSideIndex,this._sideSize=this._maxSideIndex+1,this._alphaSideSize=this._alphaMaxSideIndex+1}},WuQuant$1=_WuQuant$1;__publicField$3(WuQuant$1,"_alpha",3),__publicField$3(WuQuant$1,"_red",2),__publicField$3(WuQuant$1,"_green",1),__publicField$3(WuQuant$1,"_blue",0);var image_exports$1={};__export$1(image_exports$1,{AbstractImageQuantizer:()=>AbstractImageQuantizer$1,ErrorDiffusionArray:()=>ErrorDiffusionArray$1,ErrorDiffusionArrayKernel:()=>ErrorDiffusionArrayKernel$1,ErrorDiffusionRiemersma:()=>ErrorDiffusionRiemersma$1,NearestColor:()=>NearestColor$1});var AbstractImageQuantizer$1=class{quantizeSync(d,m){for(const g of this.quantize(d,m))if(g.pointContainer)return g.pointContainer;throw new Error("unreachable")}},NearestColor$1=class extends AbstractImageQuantizer$1{constructor(d){super(),__publicField$3(this,"_distance"),this._distance=d}*quantize(d,m){const g=d.getPointArray(),w=d.getWidth(),I=d.getHeight(),P=new ProgressTracker$1(I,99);for(let $=0;$<I;$++){P.shouldNotify($)&&(yield{progress:P.progress});for(let F=0,D=$*w;F<w;F++,D++){const U=g[D];U.from(m.getNearestColor(this._distance,U))}}yield{pointContainer:d,progress:100}}},ErrorDiffusionArrayKernel$1=(d=>(d[d.FloydSteinberg=0]="FloydSteinberg",d[d.FalseFloydSteinberg=1]="FalseFloydSteinberg",d[d.Stucki=2]="Stucki",d[d.Atkinson=3]="Atkinson",d[d.Jarvis=4]="Jarvis",d[d.Burkes=5]="Burkes",d[d.Sierra=6]="Sierra",d[d.TwoSierra=7]="TwoSierra",d[d.SierraLite=8]="SierraLite",d))(ErrorDiffusionArrayKernel$1||{}),ErrorDiffusionArray$1=class extends AbstractImageQuantizer$1{constructor(d,m,g=!0,w=0,I=!1){super(),__publicField$3(this,"_minColorDistance"),__publicField$3(this,"_serpentine"),__publicField$3(this,"_kernel"),__publicField$3(this,"_calculateErrorLikeGIMP"),__publicField$3(this,"_distance"),this._setKernel(m),this._distance=d,this._minColorDistance=w,this._serpentine=g,this._calculateErrorLikeGIMP=I}*quantize(d,m){const g=d.getPointArray(),w=new Point$1,I=d.getWidth(),P=d.getHeight(),$=[];let F=1,D=1;for(const j of this._kernel){const Z=j[2]+1;D<Z&&(D=Z)}for(let j=0;j<D;j++)this._fillErrorLine($[j]=[],I);const U=new ProgressTracker$1(P,99);for(let j=0;j<P;j++){U.shouldNotify(j)&&(yield{progress:U.progress}),this._serpentine&&(F*=-1);const Z=j*I,G=F===1?0:I-1,H=F===1?I:-1;this._fillErrorLine($[0],I),$.push($.shift());const W=$[0];for(let q=G,Q=Z+G;q!==H;q+=F,Q+=F){const et=g[Q],J=W[q];w.from(et);const V=Point$1.createByRGBA(inRange0to255Rounded$1(et.r+J[0]),inRange0to255Rounded$1(et.g+J[1]),inRange0to255Rounded$1(et.b+J[2]),inRange0to255Rounded$1(et.a+J[3])),rt=m.getNearestColor(this._distance,V);if(et.from(rt),this._minColorDistance&&this._distance.calculateNormalized(w,rt)<this._minColorDistance)continue;let X,ot,it,st;this._calculateErrorLikeGIMP?(X=V.r-rt.r,ot=V.g-rt.g,it=V.b-rt.b,st=V.a-rt.a):(X=w.r-rt.r,ot=w.g-rt.g,it=w.b-rt.b,st=w.a-rt.a);const at=F===1?0:this._kernel.length-1,ft=F===1?this._kernel.length:-1;for(let K=at;K!==ft;K+=F){const lt=this._kernel[K][1]*F,vt=this._kernel[K][2];if(lt+q>=0&&lt+q<I&&vt+j>=0&&vt+j<P){const dt=this._kernel[K][0],ht=$[vt][lt+q];ht[0]+=X*dt,ht[1]+=ot*dt,ht[2]+=it*dt,ht[3]+=st*dt}}}}yield{pointContainer:d,progress:100}}_fillErrorLine(d,m){d.length>m&&(d.length=m);const g=d.length;for(let w=0;w<g;w++){const I=d[w];I[0]=I[1]=I[2]=I[3]=0}for(let w=g;w<m;w++)d[w]=[0,0,0,0]}_setKernel(d){switch(d){case 0:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case 1:this._kernel=[[3/8,1,0],[3/8,0,1],[2/8,1,1]];break;case 2:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case 3:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case 4:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case 5:this._kernel=[[.25,1,0],[4/32,2,0],[2/32,-2,1],[4/32,-1,1],[.25,0,1],[4/32,1,1],[2/32,2,1]];break;case 6:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[4/32,-1,1],[5/32,0,1],[4/32,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case 7:this._kernel=[[.25,1,0],[3/16,2,0],[1/16,-2,1],[2/16,-1,1],[3/16,0,1],[2/16,1,1],[1/16,2,1]];break;case 8:this._kernel=[[.5,1,0],[1/4,-1,1],[1/4,0,1]];break;default:throw new Error(`ErrorDiffusionArray: unknown kernel = ${d}`)}}};function*hilbertCurve$1(d,m,g){const w=Math.max(d,m),I={width:d,height:m,level:Math.floor(Math.log(w)/Math.log(2)+1),callback:g,tracker:new ProgressTracker$1(d*m,99),index:0,x:0,y:0};yield*walkHilbert$1(I,1),visit$1(I,0)}function*walkHilbert$1(d,m){if(!(d.level<1)){switch(d.tracker.shouldNotify(d.index)&&(yield{progress:d.tracker.progress}),d.level--,m){case 2:yield*walkHilbert$1(d,1),visit$1(d,3),yield*walkHilbert$1(d,2),visit$1(d,4),yield*walkHilbert$1(d,2),visit$1(d,2),yield*walkHilbert$1(d,4);break;case 3:yield*walkHilbert$1(d,4),visit$1(d,2),yield*walkHilbert$1(d,3),visit$1(d,1),yield*walkHilbert$1(d,3),visit$1(d,3),yield*walkHilbert$1(d,1);break;case 1:yield*walkHilbert$1(d,2),visit$1(d,4),yield*walkHilbert$1(d,1),visit$1(d,3),yield*walkHilbert$1(d,1),visit$1(d,1),yield*walkHilbert$1(d,3);break;case 4:yield*walkHilbert$1(d,3),visit$1(d,1),yield*walkHilbert$1(d,4),visit$1(d,2),yield*walkHilbert$1(d,4),visit$1(d,4),yield*walkHilbert$1(d,2)}d.level++}}function visit$1(d,m){switch(d.x>=0&&d.x<d.width&&d.y>=0&&d.y<d.height&&(d.callback(d.x,d.y),d.index++),m){case 2:d.x--;break;case 3:d.x++;break;case 1:d.y--;break;case 4:d.y++}}var ErrorDiffusionRiemersma$1=class extends AbstractImageQuantizer$1{constructor(d,m=16,g=1){super(),__publicField$3(this,"_distance"),__publicField$3(this,"_weights"),__publicField$3(this,"_errorQueueSize"),this._distance=d,this._errorQueueSize=m,this._weights=ErrorDiffusionRiemersma$1._createWeights(g,m)}*quantize(d,m){const g=d.getPointArray(),w=d.getWidth(),I=d.getHeight(),P=[];let $=0;for(let F=0;F<this._errorQueueSize;F++)P[F]={r:0,g:0,b:0,a:0};yield*hilbertCurve$1(w,I,(F,D)=>{const U=g[F+D*w];let{r:j,g:Z,b:G,a:H}=U;for(let et=0;et<this._errorQueueSize;et++){const J=this._weights[et],V=P[(et+$)%this._errorQueueSize];j+=V.r*J,Z+=V.g*J,G+=V.b*J,H+=V.a*J}const W=Point$1.createByRGBA(inRange0to255Rounded$1(j),inRange0to255Rounded$1(Z),inRange0to255Rounded$1(G),inRange0to255Rounded$1(H)),q=m.getNearestColor(this._distance,W);$=($+1)%this._errorQueueSize;const Q=($+this._errorQueueSize-1)%this._errorQueueSize;P[Q].r=U.r-q.r,P[Q].g=U.g-q.g,P[Q].b=U.b-q.b,P[Q].a=U.a-q.a,U.from(q)}),yield{pointContainer:d,progress:100}}static _createWeights(d,m){const g=[],w=Math.exp(Math.log(m)/(m-1));for(let I=0,P=1;I<m;I++)g[I]=(P+.5|0)/m*d,P*=w;return g}},quality_exports$1={};__export$1(quality_exports$1,{ssim:()=>ssim$1});var K1$1=.01,K2$1=.03;function ssim$1(d,m){if(d.getHeight()!==m.getHeight()||d.getWidth()!==m.getWidth())throw new Error("Images have different sizes!");const g=(255*K1$1)**2,w=(255*K2$1)**2;let I=0,P=0;return iterate$1(d,m,($,F,D,U)=>{let j=0,Z=0,G=0;for(let W=0;W<$.length;W++)Z+=($[W]-D)**2,G+=(F[W]-U)**2,j+=($[W]-D)*(F[W]-U);const H=$.length-1;Z/=H,G/=H,j/=H,P+=(2*D*U+g)*(2*j+w)/((D**2+U**2+g)*(Z+G+w)),I++}),P/I}function iterate$1(d,m,g){const w=d.getWidth(),I=d.getHeight();for(let P=0;P<I;P+=8)for(let $=0;$<w;$+=8){const F=Math.min(8,w-$),D=Math.min(8,I-P),U=calculateLumaValuesForWindow$1(d,$,P,F,D),j=calculateLumaValuesForWindow$1(m,$,P,F,D);g(U,j,calculateAverageLuma$1(U),calculateAverageLuma$1(j))}}function calculateLumaValuesForWindow$1(d,m,g,w,I){const P=d.getPointArray(),$=[];let F=0;for(let D=g;D<g+I;D++){const U=D*d.getWidth();for(let j=m;j<m+w;j++){const Z=P[U+j];$[F]=.2126*Z.r+.7152*Z.g+.0722*Z.b,F++}}return $}function calculateAverageLuma$1(d){let m=0;for(const g of d)m+=g;return m/d.length}var setImmediateImpl=typeof setImmediate=="function"?setImmediate:typeof process<"u"&&typeof(process==null?void 0:process.nextTick)=="function"?d=>process.nextTick(d):d=>setTimeout(d,0);function buildPaletteSync$1(d,{colorDistanceFormula:m,paletteQuantization:g,colors:w}={}){const I=paletteQuantizationToPaletteQuantizer$1(colorDistanceFormulaToColorDistance$1(m),g,w);return d.forEach(P=>I.sample(P)),I.quantizeSync()}async function buildPalette(d,{colorDistanceFormula:m,paletteQuantization:g,colors:w,onProgress:I}={}){return new Promise((P,$)=>{const F=paletteQuantizationToPaletteQuantizer$1(colorDistanceFormulaToColorDistance$1(m),g,w);let D;d.forEach(Z=>F.sample(Z));const U=F.quantize(),j=()=>{try{const Z=U.next();Z.done?P(D):(Z.value.palette&&(D=Z.value.palette),I&&I(Z.value.progress),setImmediateImpl(j))}catch(Z){$(Z)}};setImmediateImpl(j)})}function applyPaletteSync$1(d,m,{colorDistanceFormula:g,imageQuantization:w}={}){return imageQuantizationToImageQuantizer$1(colorDistanceFormulaToColorDistance$1(g),w).quantizeSync(d,m)}async function applyPalette(d,m,{colorDistanceFormula:g,imageQuantization:w,onProgress:I}={}){return new Promise((P,$)=>{let F;const D=imageQuantizationToImageQuantizer$1(colorDistanceFormulaToColorDistance$1(g),w).quantize(d,m),U=()=>{try{const j=D.next();j.done?P(F):(j.value.pointContainer&&(F=j.value.pointContainer),I&&I(j.value.progress),setImmediateImpl(U))}catch(j){$(j)}};setImmediateImpl(U)})}function colorDistanceFormulaToColorDistance$1(d="euclidean-bt709"){switch(d){case"cie94-graphic-arts":return new CIE94GraphicArts$1;case"cie94-textiles":return new CIE94Textiles$1;case"ciede2000":return new CIEDE2000$1;case"color-metric":return new CMetric$1;case"euclidean":return new Euclidean$1;case"euclidean-bt709":return new EuclideanBT709$1;case"euclidean-bt709-noalpha":return new EuclideanBT709NoAlpha$1;case"manhattan":return new Manhattan$1;case"manhattan-bt709":return new ManhattanBT709$1;case"manhattan-nommyde":return new ManhattanNommyde$1;case"pngquant":return new PNGQuant$1;default:throw new Error(`Unknown colorDistanceFormula ${d}`)}}function imageQuantizationToImageQuantizer$1(d,m="floyd-steinberg"){switch(m){case"nearest":return new NearestColor$1(d);case"riemersma":return new ErrorDiffusionRiemersma$1(d);case"floyd-steinberg":return new ErrorDiffusionArray$1(d,0);case"false-floyd-steinberg":return new ErrorDiffusionArray$1(d,1);case"stucki":return new ErrorDiffusionArray$1(d,2);case"atkinson":return new ErrorDiffusionArray$1(d,3);case"jarvis":return new ErrorDiffusionArray$1(d,4);case"burkes":return new ErrorDiffusionArray$1(d,5);case"sierra":return new ErrorDiffusionArray$1(d,6);case"two-sierra":return new ErrorDiffusionArray$1(d,7);case"sierra-lite":return new ErrorDiffusionArray$1(d,8);default:throw new Error(`Unknown imageQuantization ${m}`)}}function paletteQuantizationToPaletteQuantizer$1(d,m="wuquant",g=256){switch(m){case"neuquant":return new NeuQuant$1(d,g);case"rgbquant":return new RGBQuant$1(d,g);case"wuquant":return new WuQuant$1(d,g);case"neuquant-float":return new NeuQuantFloat$1(d,g);default:throw new Error(`Unknown paletteQuantization ${m}`)}}var imageQ=__toCommonJS(src_exports),gifframe={};const BitmapImage$1=bitmapimage;let GifFrame$1=class Ie extends BitmapImage$1{constructor(...m){if(super(...m),m[0]instanceof Ie){const g=m[0];this.xOffset=g.xOffset,this.yOffset=g.yOffset,this.disposalMethod=g.disposalMethod,this.delayCentisecs=g.delayCentisecs,this.interlaced=g.interlaced}else{const g=m[m.length-1];let w={};typeof g!="object"||g instanceof BitmapImage$1||(w=g),this.xOffset=w.xOffset||0,this.yOffset=w.yOffset||0,this.disposalMethod=w.disposalMethod!==void 0?w.disposalMethod:Ie.DisposeToBackgroundColor,this.delayCentisecs=w.delayCentisecs||8,this.interlaced=w.interlaced||!1}}getPalette(){const m=new Set,g=this.bitmap.data;let w=0,I=!1;for(;w<g.length;){if(g[w+3]===0)I=!0;else{const D=g.readUInt32BE(w,!0)>>8&16777215;m.add(D)}w+=4}const P=new Array(m.size),$=m.values();for(w=0;w<P.length;++w)P[w]=$.next().value;P.sort((D,U)=>D-U);let F=P.length;return I&&++F,{colors:P,usesTransparency:I,indexCount:F}}};var hasRequiredGifutil,hasRequiredGifcodec;function requireGifutil(){return hasRequiredGifutil||(hasRequiredGifutil=1,function(d){const m=require$$0,g=imageQ,w=bitmapimage,{GifFrame:I}=gifframe,{GifError:P}=gif$1,{GifCodec:$}=requireGifcodec(),F=[".jpg",".jpeg",".png",".bmp"],D=new $;function U(j,Z,G,H,W){const q=Array.isArray(j)?j:[j];if(W){if(["FloydSteinberg","FalseFloydSteinberg","Stucki","Atkinson","Jarvis","Burkes","Sierra","TwoSierra","SierraLite"].indexOf(W.ditherAlgorithm)<0)throw new Error(`Invalid ditherAlgorithm '${W.ditherAlgorithm}'`);W.serpentine===void 0&&(W.serpentine=!0),W.minimumColorDistanceToDither===void 0&&(W.minimumColorDistanceToDither=0),W.calculateErrorLikeGIMP===void 0&&(W.calculateErrorLikeGIMP=!1)}const Q=new g.distance.Euclidean,et=new g.palette[Z](Q,G,H);let J;J=W?new g.image.ErrorDiffusionArray(Q,g.image.ErrorDiffusionArrayKernel[W.ditherAlgorithm],W.serpentine,W.minimumColorDistanceToDither,W.calculateErrorLikeGIMP):new g.image.NearestColor(Q);const V=[];q.forEach(X=>{const ot=X.bitmap.data,it=new ArrayBuffer(ot.length),st=new Uint32Array(it);for(let ft=0,K=0;ft<ot.length;ft+=4,++K)st[K]=ot.readUInt32LE(ft,!0);const at=g.utils.PointContainer.fromUint32Array(st,X.bitmap.width,X.bitmap.height);et.sample(at),V.push(at)});const rt=et.quantizeSync();for(let X=0;X<q.length;++X){const ot=q[X].bitmap.data,it=J.quantizeSync(V[X],rt).toUint32Array();for(let st=0,at=0;st<ot.length;st+=4,++at)ot.writeUInt32LE(it[at],st)}}d.cloneFrames=function(j){let Z=[];return j.forEach(G=>{Z.push(new I(G))}),Z},d.getColorInfo=function(j,Z){let G=!1;const H=[];for(let J=0;J<j.length;++J){let V=j[J].getPalette();if(V.usesTransparency&&(G=!0),V.indexCount>256)throw new P(`Frame ${J} uses more than 256 color indexes`);H.push(V)}if(Z===0)return{usesTransparency:G,palettes:H};const W=new Set;H.forEach(J=>{J.colors.forEach(V=>{W.add(V)})});let q=W.size;if(G&&++q,Z&&q>Z)return{usesTransparency:G,palettes:H};const Q=new Array(W.size),et=W.values();for(let J=0;J<Q.length;++J)Q[J]=et.next().value;return Q.sort((J,V)=>J-V),{colors:Q,indexCount:q,usesTransparency:G,palettes:H}},d.copyAsJimp=function(j,Z){return d.shareAsJimp(j,new w(Z))},d.getMaxDimensions=function(j){let Z=0,G=0;return j.forEach(H=>{const W=H.xOffset+H.bitmap.width;W>Z&&(Z=W);const q=H.yOffset+H.bitmap.height;q>G&&(G=q)}),{maxWidth:Z,maxHeight:G}},d.quantizeDekker=function(j,Z,G){U(j,"NeuQuantFloat",Z=Z||256,0,G)},d.quantizeSorokin=function(j,Z,G,H){let W;switch(Z=Z||256,G=G||"min-pop"){case"min-pop":W=2;break;case"top-pop":W=1;break;default:throw new Error(`Invalid quantizeSorokin histogram '${G}'`)}U(j,"RGBQuant",Z,W,H)},d.quantizeWu=function(j,Z,G,H){if(Z=Z||256,(G=G||5)<1||G>8)throw new Error("Invalid quantization quality");U(j,"WuQuant",Z,G,H)},d.read=function(j,Z){return Z=Z||D,Buffer$1.isBuffer(j)?Z.decodeGif(j):function(G){return new Promise((H,W)=>{m.readFile(G,(q,Q)=>q?W(q):H(Q))})}(j).then(G=>Z.decodeGif(G))},d.shareAsJimp=function(j,Z){const G=new j(Z.bitmap.width,Z.bitmap.height,0);return G.bitmap.data=Z.bitmap.data,G},d.write=function(j,Z,G,H){H=H||D;const W=j.match(/\.[a-zA-Z]+$/);if(W!==null&&F.includes(W[0].toLowerCase()))throw new Error(`GIF '${j}' has an unexpected suffix`);return H.encodeGif(Z,G).then(q=>function(Q,et){return new Promise((J,V)=>{m.writeFile(Q,et,rt=>rt?V(rt):J())})}(j,q.buffer).then(()=>q))}}(gifutil)),gifutil}function requireGifcodec(){if(hasRequiredGifcodec)return gifcodec;hasRequiredGifcodec=1;const d=omggif,{Gif:m,GifError:g}=gif$1;function w(){const Z=requireGifutil();return w=function(){return Z},Z}const{GifFrame:I}=gifframe;function P(Z,G){const H=Z.indexOf(G);return H===-1?null:H}function $(Z,G){for(var H,W=0,q=Z.length-1;W<=q;)if(Z[H=Math.floor((W+q)/2)]>G)q=H-1;else{if(!(Z[H]<G))return H;W=H+1}return null}function F(Z){const G=Z.colors;Z.usesTransparency&&G.push(0);const H=G.length;let W=2;for(;H>W;)W<<=1;G.length=W,G.fill(0,H)}function D(Z,G){let H=Z.bitmap.width*Z.bitmap.height;return H=Math.ceil(H*G/8),H+=Math.ceil(H/255),100+H+768}function U(Z){let G=Z.indexCount,H=0;for(--G;G;)++H,G>>=1;return H>0?H:1}function j(Z,G,H,W,q){if(H.interlaced)throw new g("writing interlaced GIFs is not supported");const Q=function(J,V,rt){const X=rt.colors,ot=X.length<=8?P:$,it=V.bitmap.data,st=new Buffer$1(it.length/4);let at=X.length,ft=0,K=0;for(;ft<it.length;){if(it[ft+3]!==0){const lt=it.readUInt32BE(ft,!0)>>8&16777215;st[K]=ot(X,lt)}else st[K]=at;ft+=4,++K}if(rt.usesTransparency){if(at===256)throw new g(`Frame ${J} already has 256 colorsand so can't use transparency`)}else at=null;return{buffer:st,transparentIndex:at}}(G,H,W),et={delay:H.delayCentisecs,disposal:H.disposalMethod,transparent:Q.transparentIndex};q&&(F(W),et.palette=W.colors);try{let J,V=Z.getOutputBuffer(),rt=Z.getOutputBufferPosition(),X=!0;for(;X;)if(J=Z.addFrame(H.xOffset,H.yOffset,H.bitmap.width,H.bitmap.height,Q.buffer,et),X=!1,J>=V.length-1){const ot=new Buffer$1(1.5*V.length);V.copy(ot),Z.setOutputBuffer(ot),Z.setOutputBufferPosition(rt),V=ot,X=!0}return V}catch(J){throw new g(J)}}return gifcodec.GifCodec=class{constructor(Z={}){this._transparentRGB=null,typeof Z.transparentRGB=="number"&&Z.transparentRGB!==0&&(this._transparentRGBA=256*Z.transparentRGB),this._testInitialBufferSize=0}decodeGif(Z){try{let G;try{G=new d.GifReader(Z)}catch(Q){throw new g(Q)}const H=G.numFrames(),W=[],q={width:G.width,height:G.height,loops:G.loopCount(),usesTransparency:!1};for(let Q=0;Q<H;++Q){const et=this._decodeFrame(G,Q,q.usesTransparency);W.push(et.frame),et.usesTransparency&&(q.usesTransparency=!0)}return Promise.resolve(new m(Z,W,q))}catch(G){return Promise.reject(G)}}encodeGif(Z,G={}){try{if(Z===null||Z.length===0)throw new g("there are no frames");const H=w().getMaxDimensions(Z);return(G=Object.assign({},G)).width=H.maxWidth,G.height=H.maxHeight,G.loops===void 0&&(G.loops=0),G.colorScope=G.colorScope||m.GlobalColorsPreferred,Promise.resolve(this._encodeGif(Z,G))}catch(H){return Promise.reject(H)}}_decodeFrame(Z,G,H){let W,q;try{if(W=Z.frameInfo(G),q=new Buffer$1(Z.width*Z.height*4),Z.decodeAndBlitFrameRGBA(G,q),W.width!==Z.width||W.height!==Z.height){if(W.y&&(q=q.slice(W.y*Z.width*4)),Z.width>W.width)for(let et=0;et<W.height;++et)q.copy(q,et*W.width*4,4*(W.x+et*Z.width),4*(W.x+et*Z.width)+4*W.width);q=q.slice(0,W.width*W.height*4)}}catch(et){throw new g(et)}let Q=!1;if(this._transparentRGBA===null){if(!H)for(let et=3;et<q.length;et+=4)q[et]===0&&(Q=!0,et=q.length)}else for(let et=3;et<q.length;et+=4)q[et]===0&&(q.writeUInt32BE(this._transparentRGBA,et-3),Q=!0);return{frame:new I(W.width,W.height,q,{xOffset:W.x,yOffset:W.y,disposalMethod:W.disposal,interlaced:W.interlaced,delayCentisecs:W.delay}),usesTransparency:Q}}_encodeGif(Z,G){let H;if(G.colorScope===m.LocalColorsOnly)H=w().getColorInfo(Z,0);else if(H=w().getColorInfo(Z,256),!H.colors){if(G.colorScope===m.GlobalColorsOnly)throw new g("Too many color indexes for global color table");G.colorScope=m.LocalColorsOnly}G.usesTransparency=H.usesTransparency;const W=H.palettes;return G.colorScope===m.LocalColorsOnly?function(q,Q,et,J){const V={loop:Q.loops};let rt,X=new Buffer$1(et);try{rt=new d.GifWriter(X,Q.width,Q.height,V)}catch(ot){throw new g(ot)}for(let ot=0;ot<q.length;++ot)X=j(rt,ot,q[ot],J[ot],!0);return new m(X.slice(0,rt.end()),q,Q)}(Z,G,2e3,W):function(q,Q,et,J){const V={colors:J.colors.slice(),usesTransparency:J.usesTransparency};F(V);const rt={palette:V.colors,loop:Q.loops};let X,ot=new Buffer$1(et);try{X=new d.GifWriter(ot,Q.width,Q.height,rt)}catch(it){throw new g(it)}for(let it=0;it<q.length;++it)ot=j(X,it,q[it],J,!1);return new m(ot.slice(0,X.end()),q,Q)}(Z,G,2e3,H)}_getSizeEstimateGlobal(Z,G){if(this._testInitialBufferSize>0)return this._testInitialBufferSize;let H=968;const W=U(Z);return G.forEach(q=>{H+=D(q,W)}),H}_getSizeEstimateLocal(Z,G){if(this._testInitialBufferSize>0)return this._testInitialBufferSize;let H=200;for(let W=0;W<G.length;++W){const q=U(Z[W]);H+=D(G[W],q)}return H}},gifcodec}GifFrame$1.DisposeToAnything=0,GifFrame$1.DisposeNothing=1,GifFrame$1.DisposeToBackgroundColor=2,GifFrame$1.DisposeToPrevious=3,gifframe.GifFrame=GifFrame$1;const BitmapImage=bitmapimage,{Gif,GifError:GifError$1}=gif$1,{GifCodec}=requireGifcodec(),{GifFrame}=gifframe,GifUtil=requireGifutil();var src={BitmapImage,Gif,GifCodec,GifFrame,GifUtil,GifError:GifError$1};function gif(){return{mime:"image/gif",encode:async d=>{const m=new src.BitmapImage(d);src.GifUtil.quantizeDekker(m,256);const g=new src.GifFrame(d);return(await new src.GifCodec().encodeGif([g],{})).buffer},decode:d=>{const m=new omggif.GifReader(d),g=Buffer$1.alloc(m.width*m.height*4);return m.decodeAndBlitFrameRGBA(0,g),{data:g,width:m.width,height:m.height}}}}var encoder={exports:{}};(function(d){function m(g){var w,I,P,$,F,D=Math.floor,U=new Array(64),j=new Array(64),Z=new Array(64),G=new Array(64),H=new Array(65535),W=new Array(65535),q=new Array(64),Q=new Array(64),et=[],J=0,V=7,rt=new Array(64),X=new Array(64),ot=new Array(64),it=new Array(256),st=new Array(2048),at=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ft=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],lt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],vt=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],dt=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ht=[0,1,2,3,4,5,6,7,8,9,10,11],pt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Rt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Tt(Ct,St){for(var It=0,Ft=0,Ut=new Array,jt=1;jt<=16;jt++){for(var Mt=1;Mt<=Ct[jt];Mt++)Ut[St[Ft]]=[],Ut[St[Ft]][0]=It,Ut[St[Ft]][1]=jt,Ft++,It++;It*=2}return Ut}function xt(Ct){for(var St=Ct[0],It=Ct[1]-1;It>=0;)St&1<<It&&(J|=1<<V),It--,--V<0&&(J==255?($t(255),$t(0)):$t(J),V=7,J=0)}function $t(Ct){et.push(Ct)}function Et(Ct){$t(Ct>>8&255),$t(255&Ct)}function Pt(Ct,St,It,Ft,Ut){for(var jt,Mt=Ut[0],nt=Ut[240],At=function(wt,zt){var Zt,Kt,te,Vt,ee,Jt,oe,ne,ae,ce,ie=0;for(ae=0;ae<8;++ae){Zt=wt[ie],Kt=wt[ie+1],te=wt[ie+2],Vt=wt[ie+3],ee=wt[ie+4],Jt=wt[ie+5],oe=wt[ie+6];var Nt=Zt+(ne=wt[ie+7]),Xt=Zt-ne,Lt=Kt+oe,qt=Kt-oe,kt=te+Jt,Yt=te-Jt,ue=Vt+ee,ct=Vt-ee,Qt=Nt+ue,Gt=Nt-ue,Dt=Lt+kt,Ht=Lt-kt;wt[ie]=Qt+Dt,wt[ie+4]=Qt-Dt;var Wt=.707106781*(Ht+Gt);wt[ie+2]=Gt+Wt,wt[ie+6]=Gt-Wt;var le=.382683433*((Qt=ct+Yt)-(Ht=qt+Xt)),re=.5411961*Qt+le,se=1.306562965*Ht+le,he=.707106781*(Dt=Yt+qt),xe=Xt+he,de=Xt-he;wt[ie+5]=de+re,wt[ie+3]=de-re,wt[ie+1]=xe+se,wt[ie+7]=xe-se,ie+=8}for(ie=0,ae=0;ae<8;++ae){Zt=wt[ie],Kt=wt[ie+8],te=wt[ie+16],Vt=wt[ie+24],ee=wt[ie+32],Jt=wt[ie+40],oe=wt[ie+48];var pe=Zt+(ne=wt[ie+56]),ge=Zt-ne,be=Kt+oe,ke=Kt-oe,Se=te+Jt,me=te-Jt,we=Vt+ee,Ee=Vt-ee,ve=pe+we,ye=pe-we,_e=be+Se,Ae=be-Se;wt[ie]=ve+_e,wt[ie+32]=ve-_e;var Me=.707106781*(Ae+ye);wt[ie+16]=ye+Me,wt[ie+48]=ye-Me;var Re=.382683433*((ve=Ee+me)-(Ae=ke+ge)),Pe=.5411961*ve+Re,Ce=1.306562965*Ae+Re,Be=.707106781*(_e=me+ke),Ne=ge+Be,$e=ge-Be;wt[ie+40]=$e+Pe,wt[ie+24]=$e-Pe,wt[ie+8]=Ne+Ce,wt[ie+56]=Ne-Ce,ie++}for(ae=0;ae<64;++ae)ce=wt[ae]*zt[ae],q[ae]=ce>0?ce+.5|0:ce-.5|0;return q}(Ct,St),mt=0;mt<64;++mt)Q[at[mt]]=At[mt];var gt=Q[0]-It;It=Q[0],gt==0?xt(Ft[0]):(xt(Ft[W[jt=32767+gt]]),xt(H[jt]));for(var _t=63;_t>0&&Q[_t]==0;_t--);if(_t==0)return xt(Mt),It;for(var yt,Bt=1;Bt<=_t;){for(var tt=Bt;Q[Bt]==0&&Bt<=_t;++Bt);var ut=Bt-tt;if(ut>=16){yt=ut>>4;for(var bt=1;bt<=yt;++bt)xt(nt);ut&=15}jt=32767+Q[Bt],xt(Ut[(ut<<4)+W[jt]]),xt(H[jt]),Bt++}return _t!=63&&xt(Mt),It}function Ot(Ct){Ct<=0&&(Ct=1),Ct>100&&(Ct=100),F!=Ct&&(function(St){for(var It=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ft=0;Ft<64;Ft++){var Ut=D((It[Ft]*St+50)/100);Ut<1?Ut=1:Ut>255&&(Ut=255),U[at[Ft]]=Ut}for(var jt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Mt=0;Mt<64;Mt++){var nt=D((jt[Mt]*St+50)/100);nt<1?nt=1:nt>255&&(nt=255),j[at[Mt]]=nt}for(var At=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],mt=0,gt=0;gt<8;gt++)for(var _t=0;_t<8;_t++)Z[mt]=1/(U[at[mt]]*At[gt]*At[_t]*8),G[mt]=1/(j[at[mt]]*At[gt]*At[_t]*8),mt++}(Ct<50?Math.floor(5e3/Ct):Math.floor(200-2*Ct)),F=Ct)}this.encode=function(Ct,St){var It;new Date().getTime(),St&&Ot(St),et=new Array,J=0,V=7,Et(65496),Et(65504),Et(16),$t(74),$t(70),$t(73),$t(70),$t(0),$t(1),$t(1),$t(0),Et(1),Et(1),$t(0),$t(0),(It=Ct.comments)!==void 0&&It.constructor===Array&&It.forEach(te=>{if(typeof te=="string"){Et(65534);var Vt,ee=te.length;for(Et(ee+2),Vt=0;Vt<ee;Vt++)$t(te.charCodeAt(Vt))}}),function(te){if(te){Et(65505),te[0]===69&&te[1]===120&&te[2]===105&&te[3]===102?Et(te.length+2):(Et(te.length+5+2),$t(69),$t(120),$t(105),$t(102),$t(0));for(var Vt=0;Vt<te.length;Vt++)$t(te[Vt])}}(Ct.exifBuffer),function(){Et(65499),Et(132),$t(0);for(var te=0;te<64;te++)$t(U[te]);$t(1);for(var Vt=0;Vt<64;Vt++)$t(j[Vt])}(),function(te,Vt){Et(65472),Et(17),$t(8),Et(Vt),Et(te),$t(3),$t(1),$t(17),$t(0),$t(2),$t(17),$t(1),$t(3),$t(17),$t(1)}(Ct.width,Ct.height),function(){Et(65476),Et(418),$t(0);for(var te=0;te<16;te++)$t(ft[te+1]);for(var Vt=0;Vt<=11;Vt++)$t(K[Vt]);$t(16);for(var ee=0;ee<16;ee++)$t(lt[ee+1]);for(var Jt=0;Jt<=161;Jt++)$t(vt[Jt]);$t(1);for(var oe=0;oe<16;oe++)$t(dt[oe+1]);for(var ne=0;ne<=11;ne++)$t(ht[ne]);$t(17);for(var ae=0;ae<16;ae++)$t(pt[ae+1]);for(var ce=0;ce<=161;ce++)$t(Rt[ce])}(),Et(65498),Et(12),$t(3),$t(1),$t(0),$t(2),$t(17),$t(3),$t(17),$t(0),$t(63),$t(0);var Ft=0,Ut=0,jt=0;J=0,V=7,this.encode.displayName="_encode_";for(var Mt,nt,At,mt,gt,_t,yt,Bt,tt,ut=Ct.data,bt=Ct.width,wt=Ct.height,zt=4*bt,Zt=0;Zt<wt;){for(Mt=0;Mt<zt;){for(_t=gt=zt*Zt+Mt,yt=-1,Bt=0,tt=0;tt<64;tt++)_t=gt+(Bt=tt>>3)*zt+(yt=4*(7&tt)),Zt+Bt>=wt&&(_t-=zt*(Zt+1+Bt-wt)),Mt+yt>=zt&&(_t-=Mt+yt-zt+4),nt=ut[_t++],At=ut[_t++],mt=ut[_t++],rt[tt]=(st[nt]+st[At+256|0]+st[mt+512|0]>>16)-128,X[tt]=(st[nt+768|0]+st[At+1024|0]+st[mt+1280|0]>>16)-128,ot[tt]=(st[nt+1280|0]+st[At+1536|0]+st[mt+1792|0]>>16)-128;Ft=Pt(rt,Z,Ft,w,P),Ut=Pt(X,G,Ut,I,$),jt=Pt(ot,G,jt,I,$),Mt+=32}Zt+=8}if(V>=0){var Kt=[];Kt[1]=V+1,Kt[0]=(1<<V+1)-1,xt(Kt)}return Et(65497),Buffer$1.from(et)},new Date().getTime(),g||(g=50),function(){for(var Ct=String.fromCharCode,St=0;St<256;St++)it[St]=Ct(St)}(),w=Tt(ft,K),I=Tt(dt,ht),P=Tt(lt,vt),$=Tt(pt,Rt),function(){for(var Ct=1,St=2,It=1;It<=15;It++){for(var Ft=Ct;Ft<St;Ft++)W[32767+Ft]=It,H[32767+Ft]=[],H[32767+Ft][1]=It,H[32767+Ft][0]=Ft;for(var Ut=-(St-1);Ut<=-Ct;Ut++)W[32767+Ut]=It,H[32767+Ut]=[],H[32767+Ut][1]=It,H[32767+Ut][0]=St-1+Ut;Ct<<=1,St<<=1}}(),function(){for(var Ct=0;Ct<256;Ct++)st[Ct]=19595*Ct,st[Ct+256|0]=38470*Ct,st[Ct+512|0]=7471*Ct+32768,st[Ct+768|0]=-11059*Ct,st[Ct+1024|0]=-21709*Ct,st[Ct+1280|0]=32768*Ct+8421375,st[Ct+1536|0]=-27439*Ct,st[Ct+1792|0]=-5329*Ct}(),Ot(g),new Date().getTime()}encoder.exports=function(g,w){w===void 0&&(w=50);var I=new m(w),P=I.encode(g,w);return{data:P,width:g.width,height:g.height}}})();var encoderExports=encoder.exports,decoder={exports:{}},module,JpegImage;module=decoder,JpegImage=function(){var d=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),m=4017,g=799,w=3406,I=2276,P=1567,$=3784,F=5793,D=2896;function U(){}function j(et,J){for(var V,rt,X=0,ot=[],it=16;it>0&&!et[it-1];)it--;ot.push({children:[],index:0});var st,at=ot[0];for(V=0;V<it;V++){for(rt=0;rt<et[V];rt++){for((at=ot.pop()).children[at.index]=J[X];at.index>0;){if(ot.length===0)throw new Error("Could not recreate Huffman Table");at=ot.pop()}for(at.index++,ot.push(at);ot.length<=V;)ot.push(st={children:[],index:0}),at.children[at.index]=st.children,at=st;X++}V+1<it&&(ot.push(st={children:[],index:0}),at.children[at.index]=st.children,at=st)}return ot[0].children}function Z(et,J,V,rt,X,ot,it,st,at,ft){V.precision,V.samplesPerLine,V.scanLines;var K=V.mcusPerLine,lt=V.progressive;V.maxH,V.maxV;var vt=J,dt=0,ht=0;function pt(){if(ht>0)return ht--,dt>>ht&1;if((dt=et[J++])==255){var Bt=et[J++];if(Bt)throw new Error("unexpected marker: "+(dt<<8|Bt).toString(16))}return ht=7,dt>>>7}function Rt(Bt){for(var tt,ut=Bt;(tt=pt())!==null;){if(typeof(ut=ut[tt])=="number")return ut;if(typeof ut!="object")throw new Error("invalid huffman sequence")}return null}function Tt(Bt){for(var tt=0;Bt>0;){var ut=pt();if(ut===null)return;tt=tt<<1|ut,Bt--}return tt}function xt(Bt){var tt=Tt(Bt);return tt>=1<<Bt-1?tt:tt+(-1<<Bt)+1}var $t,Et=0,Pt=0;function Ot(Bt,tt,ut,bt,wt){var zt=ut%K,Zt=(ut/K|0)*Bt.v+bt,Kt=zt*Bt.h+wt;Bt.blocks[Zt]===void 0&&ft.tolerantDecoding||tt(Bt,Bt.blocks[Zt][Kt])}function Ct(Bt,tt,ut){var bt=ut/Bt.blocksPerLine|0,wt=ut%Bt.blocksPerLine;Bt.blocks[bt]===void 0&&ft.tolerantDecoding||tt(Bt,Bt.blocks[bt][wt])}var St,It,Ft,Ut,jt,Mt,nt=rt.length;Mt=lt?ot===0?st===0?function(Bt,tt){var ut=Rt(Bt.huffmanTableDC),bt=ut===0?0:xt(ut)<<at;tt[0]=Bt.pred+=bt}:function(Bt,tt){tt[0]|=pt()<<at}:st===0?function(Bt,tt){if(Et>0)Et--;else for(var ut=ot,bt=it;ut<=bt;){var wt=Rt(Bt.huffmanTableAC),zt=15&wt,Zt=wt>>4;if(zt!==0)tt[d[ut+=Zt]]=xt(zt)*(1<<at),ut++;else{if(Zt<15){Et=Tt(Zt)+(1<<Zt)-1;break}ut+=16}}}:function(Bt,tt){for(var ut=ot,bt=it,wt=0;ut<=bt;){var zt=d[ut],Zt=tt[zt]<0?-1:1;switch(Pt){case 0:var Kt=Rt(Bt.huffmanTableAC),te=15&Kt;if(wt=Kt>>4,te===0)wt<15?(Et=Tt(wt)+(1<<wt),Pt=4):(wt=16,Pt=1);else{if(te!==1)throw new Error("invalid ACn encoding");$t=xt(te),Pt=wt?2:3}continue;case 1:case 2:tt[zt]?tt[zt]+=(pt()<<at)*Zt:--wt==0&&(Pt=Pt==2?3:0);break;case 3:tt[zt]?tt[zt]+=(pt()<<at)*Zt:(tt[zt]=$t<<at,Pt=0);break;case 4:tt[zt]&&(tt[zt]+=(pt()<<at)*Zt)}ut++}Pt===4&&--Et==0&&(Pt=0)}:function(Bt,tt){var ut=Rt(Bt.huffmanTableDC),bt=ut===0?0:xt(ut);tt[0]=Bt.pred+=bt;for(var wt=1;wt<64;){var zt=Rt(Bt.huffmanTableAC),Zt=15&zt,Kt=zt>>4;if(Zt!==0)tt[d[wt+=Kt]]=xt(Zt),wt++;else{if(Kt<15)break;wt+=16}}};var At,mt,gt,_t,yt=0;for(mt=nt==1?rt[0].blocksPerLine*rt[0].blocksPerColumn:K*V.mcusPerColumn,X||(X=mt);yt<mt;){for(It=0;It<nt;It++)rt[It].pred=0;if(Et=0,nt==1)for(St=rt[0],jt=0;jt<X;jt++)Ct(St,Mt,yt),yt++;else for(jt=0;jt<X;jt++){for(It=0;It<nt;It++)for(gt=(St=rt[It]).h,_t=St.v,Ft=0;Ft<_t;Ft++)for(Ut=0;Ut<gt;Ut++)Ot(St,Mt,yt,Ft,Ut);if(++yt===mt)break}if(yt===mt)do{if(et[J]===255&&et[J+1]!==0)break;J+=1}while(J<et.length-2);if(ht=0,(At=et[J]<<8|et[J+1])<65280)throw new Error("marker was not found");if(!(At>=65488&&At<=65495))break;J+=2}return J-vt}function G(et,J){var V,rt,X=[],ot=J.blocksPerLine,it=J.blocksPerColumn,st=ot<<3,at=new Int32Array(64),ft=new Uint8Array(64);function K(Tt,xt,$t){var Et,Pt,Ot,Ct,St,It,Ft,Ut,jt,Mt,nt=J.quantizationTable,At=$t;for(Mt=0;Mt<64;Mt++)At[Mt]=Tt[Mt]*nt[Mt];for(Mt=0;Mt<8;++Mt){var mt=8*Mt;At[1+mt]!=0||At[2+mt]!=0||At[3+mt]!=0||At[4+mt]!=0||At[5+mt]!=0||At[6+mt]!=0||At[7+mt]!=0?(Et=F*At[0+mt]+128>>8,Pt=F*At[4+mt]+128>>8,Ot=At[2+mt],Ct=At[6+mt],St=D*(At[1+mt]-At[7+mt])+128>>8,Ut=D*(At[1+mt]+At[7+mt])+128>>8,It=At[3+mt]<<4,Ft=At[5+mt]<<4,jt=Et-Pt+1>>1,Et=Et+Pt+1>>1,Pt=jt,jt=Ot*$+Ct*P+128>>8,Ot=Ot*P-Ct*$+128>>8,Ct=jt,jt=St-Ft+1>>1,St=St+Ft+1>>1,Ft=jt,jt=Ut+It+1>>1,It=Ut-It+1>>1,Ut=jt,jt=Et-Ct+1>>1,Et=Et+Ct+1>>1,Ct=jt,jt=Pt-Ot+1>>1,Pt=Pt+Ot+1>>1,Ot=jt,jt=St*I+Ut*w+2048>>12,St=St*w-Ut*I+2048>>12,Ut=jt,jt=It*g+Ft*m+2048>>12,It=It*m-Ft*g+2048>>12,Ft=jt,At[0+mt]=Et+Ut,At[7+mt]=Et-Ut,At[1+mt]=Pt+Ft,At[6+mt]=Pt-Ft,At[2+mt]=Ot+It,At[5+mt]=Ot-It,At[3+mt]=Ct+St,At[4+mt]=Ct-St):(jt=F*At[0+mt]+512>>10,At[0+mt]=jt,At[1+mt]=jt,At[2+mt]=jt,At[3+mt]=jt,At[4+mt]=jt,At[5+mt]=jt,At[6+mt]=jt,At[7+mt]=jt)}for(Mt=0;Mt<8;++Mt){var gt=Mt;At[8+gt]!=0||At[16+gt]!=0||At[24+gt]!=0||At[32+gt]!=0||At[40+gt]!=0||At[48+gt]!=0||At[56+gt]!=0?(Et=F*At[0+gt]+2048>>12,Pt=F*At[32+gt]+2048>>12,Ot=At[16+gt],Ct=At[48+gt],St=D*(At[8+gt]-At[56+gt])+2048>>12,Ut=D*(At[8+gt]+At[56+gt])+2048>>12,It=At[24+gt],Ft=At[40+gt],jt=Et-Pt+1>>1,Et=Et+Pt+1>>1,Pt=jt,jt=Ot*$+Ct*P+2048>>12,Ot=Ot*P-Ct*$+2048>>12,Ct=jt,jt=St-Ft+1>>1,St=St+Ft+1>>1,Ft=jt,jt=Ut+It+1>>1,It=Ut-It+1>>1,Ut=jt,jt=Et-Ct+1>>1,Et=Et+Ct+1>>1,Ct=jt,jt=Pt-Ot+1>>1,Pt=Pt+Ot+1>>1,Ot=jt,jt=St*I+Ut*w+2048>>12,St=St*w-Ut*I+2048>>12,Ut=jt,jt=It*g+Ft*m+2048>>12,It=It*m-Ft*g+2048>>12,Ft=jt,At[0+gt]=Et+Ut,At[56+gt]=Et-Ut,At[8+gt]=Pt+Ft,At[48+gt]=Pt-Ft,At[16+gt]=Ot+It,At[40+gt]=Ot-It,At[24+gt]=Ct+St,At[32+gt]=Ct-St):(jt=F*$t[Mt+0]+8192>>14,At[0+gt]=jt,At[8+gt]=jt,At[16+gt]=jt,At[24+gt]=jt,At[32+gt]=jt,At[40+gt]=jt,At[48+gt]=jt,At[56+gt]=jt)}for(Mt=0;Mt<64;++Mt){var _t=128+(At[Mt]+8>>4);xt[Mt]=_t<0?0:_t>255?255:_t}}Q(st*it*8);for(var lt=0;lt<it;lt++){var vt=lt<<3;for(V=0;V<8;V++)X.push(new Uint8Array(st));for(var dt=0;dt<ot;dt++){K(J.blocks[lt][dt],ft,at);var ht=0,pt=dt<<3;for(rt=0;rt<8;rt++){var Rt=X[vt+rt];for(V=0;V<8;V++)Rt[pt+V]=ft[ht++]}}}return X}function H(et){return et<0?0:et>255?255:et}U.prototype={load:function(et){var J=new XMLHttpRequest;J.open("GET",et,!0),J.responseType="arraybuffer",J.onload=(function(){var V=new Uint8Array(J.response||J.mozResponseArrayBuffer);this.parse(V),this.onload&&this.onload()}).bind(this),J.send(null)},parse:function(et){var J=1e3*this.opts.maxResolutionInMP*1e3,V=0;function rt(){var Vt=et[V]<<8|et[V+1];return V+=2,Vt}function X(Vt){var ee,Jt,oe=1,ne=1;for(Jt in Vt.components)Vt.components.hasOwnProperty(Jt)&&(oe<(ee=Vt.components[Jt]).h&&(oe=ee.h),ne<ee.v&&(ne=ee.v));var ae=Math.ceil(Vt.samplesPerLine/8/oe),ce=Math.ceil(Vt.scanLines/8/ne);for(Jt in Vt.components)if(Vt.components.hasOwnProperty(Jt)){ee=Vt.components[Jt];var ie=Math.ceil(Math.ceil(Vt.samplesPerLine/8)*ee.h/oe),Nt=Math.ceil(Math.ceil(Vt.scanLines/8)*ee.v/ne),Xt=ae*ee.h,Lt=ce*ee.v,qt=[];Q(Lt*Xt*256);for(var kt=0;kt<Lt;kt++){for(var Yt=[],ue=0;ue<Xt;ue++)Yt.push(new Int32Array(64));qt.push(Yt)}ee.blocksPerLine=ie,ee.blocksPerColumn=Nt,ee.blocks=qt}Vt.maxH=oe,Vt.maxV=ne,Vt.mcusPerLine=ae,Vt.mcusPerColumn=ce}et.length;var ot,it,st,at,ft=null,K=null,lt=[],vt=[],dt=[],ht=[],pt=rt(),Rt=-1;if(this.comments=[],pt!=65496)throw new Error("SOI not found");for(pt=rt();pt!=65497;){switch(pt){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var Tt=(st=void 0,at=void 0,st=rt(),at=et.subarray(V,V+st-2),V+=at.length,at);if(pt===65534){var xt=String.fromCharCode.apply(null,Tt);this.comments.push(xt)}pt===65504&&Tt[0]===74&&Tt[1]===70&&Tt[2]===73&&Tt[3]===70&&Tt[4]===0&&(ft={version:{major:Tt[5],minor:Tt[6]},densityUnits:Tt[7],xDensity:Tt[8]<<8|Tt[9],yDensity:Tt[10]<<8|Tt[11],thumbWidth:Tt[12],thumbHeight:Tt[13],thumbData:Tt.subarray(14,14+3*Tt[12]*Tt[13])}),pt===65505&&Tt[0]===69&&Tt[1]===120&&Tt[2]===105&&Tt[3]===102&&Tt[4]===0&&(this.exifBuffer=Tt.subarray(5,Tt.length)),pt===65518&&Tt[0]===65&&Tt[1]===100&&Tt[2]===111&&Tt[3]===98&&Tt[4]===101&&Tt[5]===0&&(K={version:Tt[6],flags0:Tt[7]<<8|Tt[8],flags1:Tt[9]<<8|Tt[10],transformCode:Tt[11]});break;case 65499:for(var $t=rt()+V-2;V<$t;){var Et=et[V++];Q(256);var Pt=new Int32Array(64);if(Et>>4){if(Et>>4!=1)throw new Error("DQT: invalid table spec");for(Kt=0;Kt<64;Kt++)Pt[d[Kt]]=rt()}else for(Kt=0;Kt<64;Kt++)Pt[d[Kt]]=et[V++];lt[15&Et]=Pt}break;case 65472:case 65473:case 65474:rt(),(ot={}).extended=pt===65473,ot.progressive=pt===65474,ot.precision=et[V++],ot.scanLines=rt(),ot.samplesPerLine=rt(),ot.components={},ot.componentsOrder=[];var Ot=ot.scanLines*ot.samplesPerLine;if(Ot>J){var Ct=Math.ceil((Ot-J)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${Ct}MP`)}var St,It=et[V++];for(zt=0;zt<It;zt++){St=et[V];var Ft=et[V+1]>>4,Ut=15&et[V+1],jt=et[V+2];if(Ft<=0||Ut<=0)throw new Error("Invalid sampling factor, expected values above 0");ot.componentsOrder.push(St),ot.components[St]={h:Ft,v:Ut,quantizationIdx:jt},V+=3}X(ot),vt.push(ot);break;case 65476:var Mt=rt();for(zt=2;zt<Mt;){var nt=et[V++],At=new Uint8Array(16),mt=0;for(Kt=0;Kt<16;Kt++,V++)mt+=At[Kt]=et[V];Q(16+mt);var gt=new Uint8Array(mt);for(Kt=0;Kt<mt;Kt++,V++)gt[Kt]=et[V];zt+=17+mt,(nt>>4?dt:ht)[15&nt]=j(At,gt)}break;case 65501:rt(),it=rt();break;case 65500:rt(),rt();break;case 65498:rt();var _t=et[V++],yt=[];for(zt=0;zt<_t;zt++){te=ot.components[et[V++]];var Bt=et[V++];te.huffmanTableDC=ht[Bt>>4],te.huffmanTableAC=dt[15&Bt],yt.push(te)}var tt=et[V++],ut=et[V++],bt=et[V++],wt=Z(et,V,ot,yt,it,tt,ut,bt>>4,15&bt,this.opts);V+=wt;break;case 65535:et[V]!==255&&V--;break;default:if(et[V-3]==255&&et[V-2]>=192&&et[V-2]<=254){V-=3;break}if(pt===224||pt==225){if(Rt!==-1)throw new Error(`first unknown JPEG marker at offset ${Rt.toString(16)}, second unknown JPEG marker ${pt.toString(16)} at offset ${(V-1).toString(16)}`);Rt=V-1;const Vt=rt();if(et[V+Vt-2]===255){V+=Vt-2;break}}throw new Error("unknown JPEG marker "+pt.toString(16))}pt=rt()}if(vt.length!=1)throw new Error("only single frame JPEGs supported");for(var zt=0;zt<vt.length;zt++){var Zt=vt[zt].components;for(var Kt in Zt)Zt[Kt].quantizationTable=lt[Zt[Kt].quantizationIdx],delete Zt[Kt].quantizationIdx}for(this.width=ot.samplesPerLine,this.height=ot.scanLines,this.jfif=ft,this.adobe=K,this.components=[],zt=0;zt<ot.componentsOrder.length;zt++){var te=ot.components[ot.componentsOrder[zt]];this.components.push({lines:G(0,te),scaleX:te.h/ot.maxH,scaleY:te.v/ot.maxV})}},getData:function(et,J){var V,rt,X,ot,it,st,at,ft,K,lt,vt,dt,ht,pt,Rt,Tt,xt,$t,Et,Pt,Ot,Ct=this.width/et,St=this.height/J,It=0,Ft=et*J*this.components.length;Q(Ft);var Ut=new Uint8Array(Ft);switch(this.components.length){case 1:for(V=this.components[0],lt=0;lt<J;lt++)for(it=V.lines[0|lt*V.scaleY*St],K=0;K<et;K++)vt=it[0|K*V.scaleX*Ct],Ut[It++]=vt;break;case 2:for(V=this.components[0],rt=this.components[1],lt=0;lt<J;lt++)for(it=V.lines[0|lt*V.scaleY*St],st=rt.lines[0|lt*rt.scaleY*St],K=0;K<et;K++)vt=it[0|K*V.scaleX*Ct],Ut[It++]=vt,vt=st[0|K*rt.scaleX*Ct],Ut[It++]=vt;break;case 3:for(Ot=!0,this.adobe&&this.adobe.transformCode?Ot=!0:this.opts.colorTransform!==void 0&&(Ot=!!this.opts.colorTransform),V=this.components[0],rt=this.components[1],X=this.components[2],lt=0;lt<J;lt++)for(it=V.lines[0|lt*V.scaleY*St],st=rt.lines[0|lt*rt.scaleY*St],at=X.lines[0|lt*X.scaleY*St],K=0;K<et;K++)Ot?(vt=it[0|K*V.scaleX*Ct],dt=st[0|K*rt.scaleX*Ct],$t=H(vt+1.402*((ht=at[0|K*X.scaleX*Ct])-128)),Et=H(vt-.3441363*(dt-128)-.71413636*(ht-128)),Pt=H(vt+1.772*(dt-128))):($t=it[0|K*V.scaleX*Ct],Et=st[0|K*rt.scaleX*Ct],Pt=at[0|K*X.scaleX*Ct]),Ut[It++]=$t,Ut[It++]=Et,Ut[It++]=Pt;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(Ot=!1,this.adobe&&this.adobe.transformCode?Ot=!0:this.opts.colorTransform!==void 0&&(Ot=!!this.opts.colorTransform),V=this.components[0],rt=this.components[1],X=this.components[2],ot=this.components[3],lt=0;lt<J;lt++)for(it=V.lines[0|lt*V.scaleY*St],st=rt.lines[0|lt*rt.scaleY*St],at=X.lines[0|lt*X.scaleY*St],ft=ot.lines[0|lt*ot.scaleY*St],K=0;K<et;K++)Ot?(vt=it[0|K*V.scaleX*Ct],dt=st[0|K*rt.scaleX*Ct],ht=at[0|K*X.scaleX*Ct],pt=ft[0|K*ot.scaleX*Ct],Rt=255-H(vt+1.402*(ht-128)),Tt=255-H(vt-.3441363*(dt-128)-.71413636*(ht-128)),xt=255-H(vt+1.772*(dt-128))):(Rt=it[0|K*V.scaleX*Ct],Tt=st[0|K*rt.scaleX*Ct],xt=at[0|K*X.scaleX*Ct],pt=ft[0|K*ot.scaleX*Ct]),Ut[It++]=255-Rt,Ut[It++]=255-Tt,Ut[It++]=255-xt,Ut[It++]=255-pt;break;default:throw new Error("Unsupported color mode")}return Ut},copyToImageData:function(et,J){var V,rt,X,ot,it,st,at,ft,K,lt=et.width,vt=et.height,dt=et.data,ht=this.getData(lt,vt),pt=0,Rt=0;switch(this.components.length){case 1:for(rt=0;rt<vt;rt++)for(V=0;V<lt;V++)X=ht[pt++],dt[Rt++]=X,dt[Rt++]=X,dt[Rt++]=X,J&&(dt[Rt++]=255);break;case 3:for(rt=0;rt<vt;rt++)for(V=0;V<lt;V++)at=ht[pt++],ft=ht[pt++],K=ht[pt++],dt[Rt++]=at,dt[Rt++]=ft,dt[Rt++]=K,J&&(dt[Rt++]=255);break;case 4:for(rt=0;rt<vt;rt++)for(V=0;V<lt;V++)it=ht[pt++],st=ht[pt++],X=ht[pt++],at=255-H(it*(1-(ot=ht[pt++])/255)+ot),ft=255-H(st*(1-ot/255)+ot),K=255-H(X*(1-ot/255)+ot),dt[Rt++]=at,dt[Rt++]=ft,dt[Rt++]=K,J&&(dt[Rt++]=255);break;default:throw new Error("Unsupported color mode")}}};var W=0,q=0;function Q(et=0){var J=W+et;if(J>q){var V=Math.ceil((J-q)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${V}MB`)}W=J}return U.resetMaxMemoryUsage=function(et){W=0,q=et},U.getBytesAllocated=function(){return W},U.requestMemoryAllocation=Q,U}(),module.exports=function(d,m={}){var g={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512,...m},w=new Uint8Array(d),I=new JpegImage;I.opts=g,JpegImage.resetMaxMemoryUsage(1024*g.maxMemoryUsageInMB*1024),I.parse(w);var P=g.formatAsRGBA?4:3,$=I.width*I.height*P;try{JpegImage.requestMemoryAllocation($);var F={width:I.width,height:I.height,exifBuffer:I.exifBuffer,data:g.useTArray?new Uint8Array($):Buffer$1.alloc($)};I.comments.length>0&&(F.comments=I.comments)}catch(D){throw D instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+$):D instanceof ReferenceError&&D.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):D}return I.copyToImageData(F,g.formatAsRGBA),F};var decoderExports=decoder.exports,encode=encoderExports,decode=decoderExports,jpegJs={encode,decode},JPEG=getDefaultExportFromCjs(jpegJs);function jpeg$2(){return{mime:"image/jpeg",encode:(d,{quality:m=100}={})=>JPEG.encode(d,m).data,decode:(d,m)=>JPEG.decode(d,m)}}function commonjsRequire(d){throw new Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var browser$1={exports:{}};browser$1.exports=function(){function d(m,g,w){function I(F,D){if(!g[F]){if(!m[F]){var U=typeof commonjsRequire=="function"&&commonjsRequire;if(!D&&U)return U(F,!0);if(P)return P(F,!0);var j=new Error("Cannot find module '"+F+"'");throw j.code="MODULE_NOT_FOUND",j}var Z=g[F]={exports:{}};m[F][0].call(Z.exports,function(G){return I(m[F][1][G]||G)},Z,Z.exports,d,m,g,w)}return g[F].exports}for(var P=typeof commonjsRequire=="function"&&commonjsRequire,$=0;$<w.length;$++)I(w[$]);return I}return d}()({1:[function(d,m,g){(function(w){(function(){let I=d("./interlace"),P=[function(){},function(j,Z,G,H){if(H===Z.length)throw new Error("Ran out of data");let W=Z[H];j[G]=W,j[G+1]=W,j[G+2]=W,j[G+3]=255},function(j,Z,G,H){if(H+1>=Z.length)throw new Error("Ran out of data");let W=Z[H];j[G]=W,j[G+1]=W,j[G+2]=W,j[G+3]=Z[H+1]},function(j,Z,G,H){if(H+2>=Z.length)throw new Error("Ran out of data");j[G]=Z[H],j[G+1]=Z[H+1],j[G+2]=Z[H+2],j[G+3]=255},function(j,Z,G,H){if(H+3>=Z.length)throw new Error("Ran out of data");j[G]=Z[H],j[G+1]=Z[H+1],j[G+2]=Z[H+2],j[G+3]=Z[H+3]}],$=[function(){},function(j,Z,G,H){let W=Z[0];j[G]=W,j[G+1]=W,j[G+2]=W,j[G+3]=H},function(j,Z,G){let H=Z[0];j[G]=H,j[G+1]=H,j[G+2]=H,j[G+3]=Z[1]},function(j,Z,G,H){j[G]=Z[0],j[G+1]=Z[1],j[G+2]=Z[2],j[G+3]=H},function(j,Z,G){j[G]=Z[0],j[G+1]=Z[1],j[G+2]=Z[2],j[G+3]=Z[3]}];function F(j,Z){let G=[],H=0;function W(){if(H===j.length)throw new Error("Ran out of data");let q,Q,et,J,V,rt,X,ot,it=j[H];switch(H++,Z){default:throw new Error("unrecognised depth");case 16:X=j[H],H++,G.push((it<<8)+X);break;case 4:X=15&it,ot=it>>4,G.push(ot,X);break;case 2:V=3&it,rt=it>>2&3,X=it>>4&3,ot=it>>6&3,G.push(ot,X,rt,V);break;case 1:q=1&it,Q=it>>1&1,et=it>>2&1,J=it>>3&1,V=it>>4&1,rt=it>>5&1,X=it>>6&1,ot=it>>7&1,G.push(ot,X,rt,V,J,et,Q,q)}}return{get:function(q){for(;G.length<q;)W();let Q=G.slice(0,q);return G=G.slice(q),Q},resetAfterLine:function(){G.length=0},end:function(){if(H!==j.length)throw new Error("extra data found")}}}function D(j,Z,G,H,W,q){let Q=j.width,et=j.height,J=j.index;for(let V=0;V<et;V++)for(let rt=0;rt<Q;rt++){let X=G(rt,V,J);P[H](Z,W,X,q),q+=H}return q}function U(j,Z,G,H,W,q){let Q=j.width,et=j.height,J=j.index;for(let V=0;V<et;V++){for(let rt=0;rt<Q;rt++){let X=W.get(H),ot=G(rt,V,J);$[H](Z,X,ot,q)}W.resetAfterLine()}}g.dataToBitMap=function(j,Z){let G,H,W=Z.width,q=Z.height,Q=Z.depth,et=Z.bpp,J=Z.interlace;Q!==8&&(G=F(j,Q)),H=Q<=8?w.alloc(W*q*4):new Uint16Array(W*q*4);let V,rt,X=Math.pow(2,Q)-1,ot=0;if(J)V=I.getImagePasses(W,q),rt=I.getInterlaceIterator(W,q);else{let it=0;rt=function(){let st=it;return it+=4,st},V=[{width:W,height:q}]}for(let it=0;it<V.length;it++)Q===8?ot=D(V[it],H,rt,et,j,ot):U(V[it],H,rt,et,G,X);if(Q===8){if(ot!==j.length)throw new Error("extra data found")}else G.end();return H}}).call(this)}).call(this,d("buffer").Buffer)},{"./interlace":11,buffer:32}],2:[function(d,m,g){(function(w){(function(){let I=d("./constants");m.exports=function(P,$,F,D){let U=[I.COLORTYPE_COLOR_ALPHA,I.COLORTYPE_ALPHA].indexOf(D.colorType)!==-1;if(D.colorType===D.inputColorType){let V=function(){let rt=new ArrayBuffer(2);return new DataView(rt).setInt16(0,256,!0),new Int16Array(rt)[0]!==256}();if(D.bitDepth===8||D.bitDepth===16&&V)return P}let j=D.bitDepth!==16?P:new Uint16Array(P.buffer),Z=255,G=I.COLORTYPE_TO_BPP_MAP[D.inputColorType];G!==4||D.inputHasAlpha||(G=3);let H=I.COLORTYPE_TO_BPP_MAP[D.colorType];D.bitDepth===16&&(Z=65535,H*=2);let W=w.alloc($*F*H),q=0,Q=0,et=D.bgColor||{};function J(){let V,rt,X,ot=Z;switch(D.inputColorType){case I.COLORTYPE_COLOR_ALPHA:ot=j[q+3],V=j[q],rt=j[q+1],X=j[q+2];break;case I.COLORTYPE_COLOR:V=j[q],rt=j[q+1],X=j[q+2];break;case I.COLORTYPE_ALPHA:ot=j[q+1],V=j[q],rt=V,X=V;break;case I.COLORTYPE_GRAYSCALE:V=j[q],rt=V,X=V;break;default:throw new Error("input color type:"+D.inputColorType+" is not supported at present")}return D.inputHasAlpha&&(U||(ot/=Z,V=Math.min(Math.max(Math.round((1-ot)*et.red+ot*V),0),Z),rt=Math.min(Math.max(Math.round((1-ot)*et.green+ot*rt),0),Z),X=Math.min(Math.max(Math.round((1-ot)*et.blue+ot*X),0),Z))),{red:V,green:rt,blue:X,alpha:ot}}et.red===void 0&&(et.red=Z),et.green===void 0&&(et.green=Z),et.blue===void 0&&(et.blue=Z);for(let V=0;V<F;V++)for(let rt=0;rt<$;rt++){let X=J();switch(D.colorType){case I.COLORTYPE_COLOR_ALPHA:case I.COLORTYPE_COLOR:D.bitDepth===8?(W[Q]=X.red,W[Q+1]=X.green,W[Q+2]=X.blue,U&&(W[Q+3]=X.alpha)):(W.writeUInt16BE(X.red,Q),W.writeUInt16BE(X.green,Q+2),W.writeUInt16BE(X.blue,Q+4),U&&W.writeUInt16BE(X.alpha,Q+6));break;case I.COLORTYPE_ALPHA:case I.COLORTYPE_GRAYSCALE:{let ot=(X.red+X.green+X.blue)/3;D.bitDepth===8?(W[Q]=ot,U&&(W[Q+1]=X.alpha)):(W.writeUInt16BE(ot,Q),U&&W.writeUInt16BE(X.alpha,Q+2));break}default:throw new Error("unrecognised color Type "+D.colorType)}q+=G,Q+=H}return W}}).call(this)}).call(this,d("buffer").Buffer)},{"./constants":4,buffer:32}],3:[function(d,m,g){(function(w,I){(function(){let P=d("util"),$=d("stream"),F=m.exports=function(){$.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};P.inherits(F,$),F.prototype.read=function(D,U){this._reads.push({length:Math.abs(D),allowLess:D<0,func:U}),w.nextTick((function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}).bind(this))},F.prototype.write=function(D,U){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let j;return j=I.isBuffer(D)?D:I.from(D,U||this._encoding),this._buffers.push(j),this._buffered+=j.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused},F.prototype.end=function(D,U){D&&this.write(D,U),this.writable=!1,this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))},F.prototype.destroySoon=F.prototype.end,F.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()},F.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},F.prototype._processReadAllowingLess=function(D){this._reads.shift();let U=this._buffers[0];U.length>D.length?(this._buffered-=D.length,this._buffers[0]=U.slice(D.length),D.func.call(this,U.slice(0,D.length))):(this._buffered-=U.length,this._buffers.shift(),D.func.call(this,U))},F.prototype._processRead=function(D){this._reads.shift();let U=0,j=0,Z=I.alloc(D.length);for(;U<D.length;){let G=this._buffers[j++],H=Math.min(G.length,D.length-U);G.copy(Z,U,0,H),U+=H,H!==G.length&&(this._buffers[--j]=G.slice(H))}j>0&&this._buffers.splice(0,j),this._buffered-=D.length,D.func.call(this,Z)},F.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let D=this._reads[0];if(D.allowLess)this._processReadAllowingLess(D);else{if(!(this._buffered>=D.length))break;this._processRead(D)}}this._buffers&&!this.writable&&this._end()}catch(D){this.emit("error",D)}}}).call(this)}).call(this,d("_process"),d("buffer").Buffer)},{_process:63,buffer:32,stream:65,util:84}],4:[function(d,m,g){m.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},{}],5:[function(d,m,g){let w=[];(function(){for(let P=0;P<256;P++){let $=P;for(let F=0;F<8;F++)1&$?$=3988292384^$>>>1:$>>>=1;w[P]=$}})();let I=m.exports=function(){this._crc=-1};I.prototype.write=function(P){for(let $=0;$<P.length;$++)this._crc=w[255&(this._crc^P[$])]^this._crc>>>8;return!0},I.prototype.crc32=function(){return~this._crc},I.crc32=function(P){let $=-1;for(let F=0;F<P.length;F++)$=w[255&($^P[F])]^$>>>8;return~$}},{}],6:[function(d,m,g){(function(w){(function(){let I=d("./paeth-predictor");function P(et,J,V,rt,X){for(let ot=0;ot<V;ot++)rt[X+ot]=et[J+ot]}function $(et,J,V){let rt=0,X=J+V;for(let ot=J;ot<X;ot++)rt+=Math.abs(et[ot]);return rt}function F(et,J,V,rt,X,ot){for(let it=0;it<V;it++){let st=it>=ot?et[J+it-ot]:0,at=et[J+it]-st;rt[X+it]=at}}function D(et,J,V,rt){let X=0;for(let ot=0;ot<V;ot++){let it=ot>=rt?et[J+ot-rt]:0,st=et[J+ot]-it;X+=Math.abs(st)}return X}function U(et,J,V,rt,X){for(let ot=0;ot<V;ot++){let it=J>0?et[J+ot-V]:0,st=et[J+ot]-it;rt[X+ot]=st}}function j(et,J,V){let rt=0,X=J+V;for(let ot=J;ot<X;ot++){let it=J>0?et[ot-V]:0,st=et[ot]-it;rt+=Math.abs(st)}return rt}function Z(et,J,V,rt,X,ot){for(let it=0;it<V;it++){let st=it>=ot?et[J+it-ot]:0,at=J>0?et[J+it-V]:0,ft=et[J+it]-(st+at>>1);rt[X+it]=ft}}function G(et,J,V,rt){let X=0;for(let ot=0;ot<V;ot++){let it=ot>=rt?et[J+ot-rt]:0,st=J>0?et[J+ot-V]:0,at=et[J+ot]-(it+st>>1);X+=Math.abs(at)}return X}function H(et,J,V,rt,X,ot){for(let it=0;it<V;it++){let st=it>=ot?et[J+it-ot]:0,at=J>0?et[J+it-V]:0,ft=J>0&&it>=ot?et[J+it-(V+ot)]:0,K=et[J+it]-I(st,at,ft);rt[X+it]=K}}function W(et,J,V,rt){let X=0;for(let ot=0;ot<V;ot++){let it=ot>=rt?et[J+ot-rt]:0,st=J>0?et[J+ot-V]:0,at=J>0&&ot>=rt?et[J+ot-(V+rt)]:0,ft=et[J+ot]-I(it,st,at);X+=Math.abs(ft)}return X}let q={0:P,1:F,2:U,3:Z,4:H},Q={0:$,1:D,2:j,3:G,4:W};m.exports=function(et,J,V,rt,X){let ot;if("filterType"in rt&&rt.filterType!==-1){if(typeof rt.filterType!="number")throw new Error("unrecognised filter types");ot=[rt.filterType]}else ot=[0,1,2,3,4];rt.bitDepth===16&&(X*=2);let it=J*X,st=0,at=0,ft=w.alloc((it+1)*V),K=ot[0];for(let lt=0;lt<V;lt++){if(ot.length>1){let vt=1/0;for(let dt=0;dt<ot.length;dt++){let ht=Q[ot[dt]](et,at,it,X);ht<vt&&(K=ot[dt],vt=ht)}}ft[st]=K,st++,q[K](et,at,it,ft,st,X),st+=it,at+=it}return ft}}).call(this)}).call(this,d("buffer").Buffer)},{"./paeth-predictor":15,buffer:32}],7:[function(d,m,g){(function(w){(function(){let I=d("util"),P=d("./chunkstream"),$=d("./filter-parse"),F=m.exports=function(D){P.call(this);let U=[],j=this;this._filter=new $(D,{read:this.read.bind(this),write:function(Z){U.push(Z)},complete:function(){j.emit("complete",w.concat(U))}}),this._filter.start()};I.inherits(F,P)}).call(this)}).call(this,d("buffer").Buffer)},{"./chunkstream":3,"./filter-parse":9,buffer:32,util:84}],8:[function(d,m,g){(function(w){(function(){let I=d("./sync-reader"),P=d("./filter-parse");g.process=function($,F){let D=[],U=new I($);return new P(F,{read:U.read.bind(U),write:function(j){D.push(j)},complete:function(){}}).start(),U.process(),w.concat(D)}}).call(this)}).call(this,d("buffer").Buffer)},{"./filter-parse":9,"./sync-reader":22,buffer:32}],9:[function(d,m,g){(function(w){(function(){let I=d("./interlace"),P=d("./paeth-predictor");function $(D,U,j){let Z=D*U;return j!==8&&(Z=Math.ceil(Z/(8/j))),Z}let F=m.exports=function(D,U){let j=D.width,Z=D.height,G=D.interlace,H=D.bpp,W=D.depth;if(this.read=U.read,this.write=U.write,this.complete=U.complete,this._imageIndex=0,this._images=[],G){let q=I.getImagePasses(j,Z);for(let Q=0;Q<q.length;Q++)this._images.push({byteWidth:$(q[Q].width,H,W),height:q[Q].height,lineIndex:0})}else this._images.push({byteWidth:$(j,H,W),height:Z,lineIndex:0});this._xComparison=W===8?H:W===16?2*H:1};F.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},F.prototype._unFilterType1=function(D,U,j){let Z=this._xComparison,G=Z-1;for(let H=0;H<j;H++){let W=D[1+H],q=H>G?U[H-Z]:0;U[H]=W+q}},F.prototype._unFilterType2=function(D,U,j){let Z=this._lastLine;for(let G=0;G<j;G++){let H=D[1+G],W=Z?Z[G]:0;U[G]=H+W}},F.prototype._unFilterType3=function(D,U,j){let Z=this._xComparison,G=Z-1,H=this._lastLine;for(let W=0;W<j;W++){let q=D[1+W],Q=H?H[W]:0,et=W>G?U[W-Z]:0,J=Math.floor((et+Q)/2);U[W]=q+J}},F.prototype._unFilterType4=function(D,U,j){let Z=this._xComparison,G=Z-1,H=this._lastLine;for(let W=0;W<j;W++){let q=D[1+W],Q=H?H[W]:0,et=W>G?U[W-Z]:0,J=W>G&&H?H[W-Z]:0,V=P(et,Q,J);U[W]=q+V}},F.prototype._reverseFilterLine=function(D){let U,j=D[0],Z=this._images[this._imageIndex],G=Z.byteWidth;if(j===0)U=D.slice(1,G+1);else switch(U=w.alloc(G),j){case 1:this._unFilterType1(D,U,G);break;case 2:this._unFilterType2(D,U,G);break;case 3:this._unFilterType3(D,U,G);break;case 4:this._unFilterType4(D,U,G);break;default:throw new Error("Unrecognised filter type - "+j)}this.write(U),Z.lineIndex++,Z.lineIndex>=Z.height?(this._lastLine=null,this._imageIndex++,Z=this._images[this._imageIndex]):this._lastLine=U,Z?this.read(Z.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}}).call(this)}).call(this,d("buffer").Buffer)},{"./interlace":11,"./paeth-predictor":15,buffer:32}],10:[function(d,m,g){(function(w){(function(){function I(F,D,U,j,Z){let G=0;for(let H=0;H<j;H++)for(let W=0;W<U;W++){let q=Z[F[G]];if(!q)throw new Error("index "+F[G]+" not in palette");for(let Q=0;Q<4;Q++)D[G+Q]=q[Q];G+=4}}function P(F,D,U,j,Z){let G=0;for(let H=0;H<j;H++)for(let W=0;W<U;W++){let q=!1;if(Z.length===1?Z[0]===F[G]&&(q=!0):Z[0]===F[G]&&Z[1]===F[G+1]&&Z[2]===F[G+2]&&(q=!0),q)for(let Q=0;Q<4;Q++)D[G+Q]=0;G+=4}}function $(F,D,U,j,Z){let G=255,H=Math.pow(2,Z)-1,W=0;for(let q=0;q<j;q++)for(let Q=0;Q<U;Q++){for(let et=0;et<4;et++)D[W+et]=Math.floor(F[W+et]*G/H+.5);W+=4}}m.exports=function(F,D,U=!1){let j=D.depth,Z=D.width,G=D.height,H=D.colorType,W=D.transColor,q=D.palette,Q=F;return H===3?I(F,Q,Z,G,q):(W&&P(F,Q,Z,G,W),j===8||U||(j===16&&(Q=w.alloc(Z*G*4)),$(F,Q,Z,G,j))),Q}}).call(this)}).call(this,d("buffer").Buffer)},{buffer:32}],11:[function(d,m,g){let w=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];g.getImagePasses=function(I,P){let $=[],F=I%8,D=P%8,U=(I-F)/8,j=(P-D)/8;for(let Z=0;Z<w.length;Z++){let G=w[Z],H=U*G.x.length,W=j*G.y.length;for(let q=0;q<G.x.length&&G.x[q]<F;q++)H++;for(let q=0;q<G.y.length&&G.y[q]<D;q++)W++;H>0&&W>0&&$.push({width:H,height:W,index:Z})}return $},g.getInterlaceIterator=function(I){return function(P,$,F){let D=P%w[F].x.length,U=(P-D)/w[F].x.length*8+w[F].x[D],j=$%w[F].y.length;return 4*U+(($-j)/w[F].y.length*8+w[F].y[j])*I*4}}},{}],12:[function(d,m,g){(function(w){(function(){let I=d("util"),P=d("stream"),$=d("./constants"),F=d("./packer"),D=m.exports=function(U){P.call(this);let j=U||{};this._packer=new F(j),this._deflate=this._packer.createDeflate(),this.readable=!0};I.inherits(D,P),D.prototype.pack=function(U,j,Z,G){this.emit("data",w.from($.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(j,Z)),G&&this.emit("data",this._packer.packGAMA(G));let H=this._packer.filterData(U,j,Z);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",(function(W){this.emit("data",this._packer.packIDAT(W))}).bind(this)),this._deflate.on("end",(function(){this.emit("data",this._packer.packIEND()),this.emit("end")}).bind(this)),this._deflate.end(H)}}).call(this)}).call(this,d("buffer").Buffer)},{"./constants":4,"./packer":14,buffer:32,stream:65,util:84}],13:[function(d,m,g){(function(w){(function(){let I=!0,P=d("zlib");P.deflateSync||(I=!1);let $=d("./constants"),F=d("./packer");m.exports=function(D,U){if(!I)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let j=new F(U||{}),Z=[];Z.push(w.from($.PNG_SIGNATURE)),Z.push(j.packIHDR(D.width,D.height)),D.gamma&&Z.push(j.packGAMA(D.gamma));let G=j.filterData(D.data,D.width,D.height),H=P.deflateSync(G,j.getDeflateOptions());if(G=null,!H||!H.length)throw new Error("bad png - invalid compressed data response");return Z.push(j.packIDAT(H)),Z.push(j.packIEND()),w.concat(Z)}}).call(this)}).call(this,d("buffer").Buffer)},{"./constants":4,"./packer":14,buffer:32,zlib:31}],14:[function(d,m,g){(function(w){(function(){let I=d("./constants"),P=d("./crc"),$=d("./bitpacker"),F=d("./filter-pack"),D=d("zlib"),U=m.exports=function(j){if(this._options=j,j.deflateChunkSize=j.deflateChunkSize||32768,j.deflateLevel=j.deflateLevel!=null?j.deflateLevel:9,j.deflateStrategy=j.deflateStrategy!=null?j.deflateStrategy:3,j.inputHasAlpha=j.inputHasAlpha==null||j.inputHasAlpha,j.deflateFactory=j.deflateFactory||D.createDeflate,j.bitDepth=j.bitDepth||8,j.colorType=typeof j.colorType=="number"?j.colorType:I.COLORTYPE_COLOR_ALPHA,j.inputColorType=typeof j.inputColorType=="number"?j.inputColorType:I.COLORTYPE_COLOR_ALPHA,[I.COLORTYPE_GRAYSCALE,I.COLORTYPE_COLOR,I.COLORTYPE_COLOR_ALPHA,I.COLORTYPE_ALPHA].indexOf(j.colorType)===-1)throw new Error("option color type:"+j.colorType+" is not supported at present");if([I.COLORTYPE_GRAYSCALE,I.COLORTYPE_COLOR,I.COLORTYPE_COLOR_ALPHA,I.COLORTYPE_ALPHA].indexOf(j.inputColorType)===-1)throw new Error("option input color type:"+j.inputColorType+" is not supported at present");if(j.bitDepth!==8&&j.bitDepth!==16)throw new Error("option bit depth:"+j.bitDepth+" is not supported at present")};U.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},U.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},U.prototype.filterData=function(j,Z,G){let H=$(j,Z,G,this._options),W=I.COLORTYPE_TO_BPP_MAP[this._options.colorType];return F(H,Z,G,this._options,W)},U.prototype._packChunk=function(j,Z){let G=Z?Z.length:0,H=w.alloc(G+12);return H.writeUInt32BE(G,0),H.writeUInt32BE(j,4),Z&&Z.copy(H,8),H.writeInt32BE(P.crc32(H.slice(4,H.length-4)),H.length-4),H},U.prototype.packGAMA=function(j){let Z=w.alloc(4);return Z.writeUInt32BE(Math.floor(j*I.GAMMA_DIVISION),0),this._packChunk(I.TYPE_gAMA,Z)},U.prototype.packIHDR=function(j,Z){let G=w.alloc(13);return G.writeUInt32BE(j,0),G.writeUInt32BE(Z,4),G[8]=this._options.bitDepth,G[9]=this._options.colorType,G[10]=0,G[11]=0,G[12]=0,this._packChunk(I.TYPE_IHDR,G)},U.prototype.packIDAT=function(j){return this._packChunk(I.TYPE_IDAT,j)},U.prototype.packIEND=function(){return this._packChunk(I.TYPE_IEND,null)}}).call(this)}).call(this,d("buffer").Buffer)},{"./bitpacker":2,"./constants":4,"./crc":5,"./filter-pack":6,buffer:32,zlib:31}],15:[function(d,m,g){m.exports=function(w,I,P){let $=w+I-P,F=Math.abs($-w),D=Math.abs($-I),U=Math.abs($-P);return F<=D&&F<=U?w:D<=U?I:P}},{}],16:[function(d,m,g){let w=d("util"),I=d("zlib"),P=d("./chunkstream"),$=d("./filter-parse-async"),F=d("./parser"),D=d("./bitmapper"),U=d("./format-normaliser"),j=m.exports=function(Z){P.call(this),this._parser=new F(Z,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=Z,this.writable=!0,this._parser.start()};w.inherits(j,P),j.prototype._handleError=function(Z){this.emit("error",Z),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0},j.prototype._inflateData=function(Z){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=I.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let G=(1+(this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3))*this._bitmapInfo.height,H=Math.max(G,I.Z_MIN_CHUNK);this._inflate=I.createInflate({chunkSize:H});let W=G,q=this.emit.bind(this,"error");this._inflate.on("error",function(et){W&&q(et)}),this._filter.on("complete",this._complete.bind(this));let Q=this._filter.write.bind(this._filter);this._inflate.on("data",function(et){W&&(et.length>W&&(et=et.slice(0,W)),W-=et.length,Q(et))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(Z)},j.prototype._handleMetaData=function(Z){this._metaData=Z,this._bitmapInfo=Object.create(Z),this._filter=new $(this._bitmapInfo)},j.prototype._handleTransColor=function(Z){this._bitmapInfo.transColor=Z},j.prototype._handlePalette=function(Z){this._bitmapInfo.palette=Z},j.prototype._simpleTransparency=function(){this._metaData.alpha=!0},j.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},j.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))},j.prototype._complete=function(Z){if(this.errord)return;let G;try{let H=D.dataToBitMap(Z,this._bitmapInfo);G=U(H,this._bitmapInfo,this._options.skipRescale),H=null}catch(H){return void this._handleError(H)}this.emit("parsed",G)}},{"./bitmapper":1,"./chunkstream":3,"./filter-parse-async":7,"./format-normaliser":10,"./parser":18,util:84,zlib:31}],17:[function(d,m,g){(function(w){(function(){let I=!0,P=d("zlib"),$=d("./sync-inflate");P.deflateSync||(I=!1);let F=d("./sync-reader"),D=d("./filter-parse-sync"),U=d("./parser"),j=d("./bitmapper"),Z=d("./format-normaliser");m.exports=function(G,H){if(!I)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let W,q,Q;function et(ht){W=ht}function J(ht){q=ht}function V(ht){q.transColor=ht}function rt(ht){q.palette=ht}function X(){q.alpha=!0}function ot(ht){Q=ht}let it=[];function st(ht){it.push(ht)}let at=new F(G);if(new U(H,{read:at.read.bind(at),error:et,metadata:J,gamma:ot,palette:rt,transColor:V,inflateData:st,simpleTransparency:X}).start(),at.process(),W)throw W;let ft,K=w.concat(it);if(it.length=0,q.interlace)ft=P.inflateSync(K);else{let ht=(1+(q.width*q.bpp*q.depth+7>>3))*q.height;ft=$(K,{chunkSize:ht,maxLength:ht})}if(K=null,!ft||!ft.length)throw new Error("bad png - invalid inflate data response");let lt=D.process(ft,q);K=null;let vt=j.dataToBitMap(lt,q);lt=null;let dt=Z(vt,q,H.skipRescale);return q.data=dt,q.gamma=Q||0,q}}).call(this)}).call(this,d("buffer").Buffer)},{"./bitmapper":1,"./filter-parse-sync":8,"./format-normaliser":10,"./parser":18,"./sync-inflate":21,"./sync-reader":22,buffer:32,zlib:31}],18:[function(d,m,g){(function(w){(function(){let I=d("./constants"),P=d("./crc"),$=m.exports=function(F,D){this._options=F,F.checkCRC=F.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[I.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[I.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[I.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[I.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[I.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[I.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=D.read,this.error=D.error,this.metadata=D.metadata,this.gamma=D.gamma,this.transColor=D.transColor,this.palette=D.palette,this.parsed=D.parsed,this.inflateData=D.inflateData,this.finished=D.finished,this.simpleTransparency=D.simpleTransparency,this.headersFinished=D.headersFinished||function(){}};$.prototype.start=function(){this.read(I.PNG_SIGNATURE.length,this._parseSignature.bind(this))},$.prototype._parseSignature=function(F){let D=I.PNG_SIGNATURE;for(let U=0;U<D.length;U++)if(F[U]!==D[U])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},$.prototype._parseChunkBegin=function(F){let D=F.readUInt32BE(0),U=F.readUInt32BE(4),j="";for(let G=4;G<8;G++)j+=String.fromCharCode(F[G]);let Z=!!(32&F[4]);if(this._hasIHDR||U===I.TYPE_IHDR){if(this._crc=new P,this._crc.write(w.from(j)),this._chunks[U])return this._chunks[U](D);Z?this.read(D+4,this._skipChunk.bind(this)):this.error(new Error("Unsupported critical chunk type "+j))}else this.error(new Error("Expected IHDR on beggining"))},$.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},$.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},$.prototype._parseChunkEnd=function(F){let D=F.readInt32BE(0),U=this._crc.crc32();this._options.checkCRC&&U!==D?this.error(new Error("Crc error - "+D+" - "+U)):this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},$.prototype._handleIHDR=function(F){this.read(F,this._parseIHDR.bind(this))},$.prototype._parseIHDR=function(F){this._crc.write(F);let D=F.readUInt32BE(0),U=F.readUInt32BE(4),j=F[8],Z=F[9],G=F[10],H=F[11],W=F[12];if(j!==8&&j!==4&&j!==2&&j!==1&&j!==16)return void this.error(new Error("Unsupported bit depth "+j));if(!(Z in I.COLORTYPE_TO_BPP_MAP))return void this.error(new Error("Unsupported color type"));if(G!==0)return void this.error(new Error("Unsupported compression method"));if(H!==0)return void this.error(new Error("Unsupported filter method"));if(W!==0&&W!==1)return void this.error(new Error("Unsupported interlace method"));this._colorType=Z;let q=I.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:D,height:U,depth:j,interlace:!!W,palette:!!(Z&I.COLORTYPE_PALETTE),color:!!(Z&I.COLORTYPE_COLOR),alpha:!!(Z&I.COLORTYPE_ALPHA),bpp:q,colorType:Z}),this._handleChunkEnd()},$.prototype._handlePLTE=function(F){this.read(F,this._parsePLTE.bind(this))},$.prototype._parsePLTE=function(F){this._crc.write(F);let D=Math.floor(F.length/3);for(let U=0;U<D;U++)this._palette.push([F[3*U],F[3*U+1],F[3*U+2],255]);this.palette(this._palette),this._handleChunkEnd()},$.prototype._handleTRNS=function(F){this.simpleTransparency(),this.read(F,this._parseTRNS.bind(this))},$.prototype._parseTRNS=function(F){if(this._crc.write(F),this._colorType===I.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0)return void this.error(new Error("Transparency chunk must be after palette"));if(F.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(let D=0;D<F.length;D++)this._palette[D][3]=F[D];this.palette(this._palette)}this._colorType===I.COLORTYPE_GRAYSCALE&&this.transColor([F.readUInt16BE(0)]),this._colorType===I.COLORTYPE_COLOR&&this.transColor([F.readUInt16BE(0),F.readUInt16BE(2),F.readUInt16BE(4)]),this._handleChunkEnd()},$.prototype._handleGAMA=function(F){this.read(F,this._parseGAMA.bind(this))},$.prototype._parseGAMA=function(F){this._crc.write(F),this.gamma(F.readUInt32BE(0)/I.GAMMA_DIVISION),this._handleChunkEnd()},$.prototype._handleIDAT=function(F){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-F,this._parseIDAT.bind(this,F))},$.prototype._parseIDAT=function(F,D){if(this._crc.write(D),this._colorType===I.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(D);let U=F-D.length;U>0?this._handleIDAT(U):this._handleChunkEnd()},$.prototype._handleIEND=function(F){this.read(F,this._parseIEND.bind(this))},$.prototype._parseIEND=function(F){this._crc.write(F),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}}).call(this)}).call(this,d("buffer").Buffer)},{"./constants":4,"./crc":5,buffer:32}],19:[function(d,m,g){let w=d("./parser-sync"),I=d("./packer-sync");g.read=function(P,$){return w(P,$||{})},g.write=function(P,$){return I(P,$)}},{"./packer-sync":13,"./parser-sync":17}],20:[function(d,m,g){(function(w,I){(function(){let P=d("util"),$=d("stream"),F=d("./parser-async"),D=d("./packer-async"),U=d("./png-sync"),j=g.PNG=function(Z){$.call(this),Z=Z||{},this.width=0|Z.width,this.height=0|Z.height,this.data=this.width>0&&this.height>0?I.alloc(4*this.width*this.height):null,Z.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new F(Z),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",(function(G){this.data=G,this.emit("parsed",G)}).bind(this)),this._packer=new D(Z),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};P.inherits(j,$),j.sync=U,j.prototype.pack=function(){return this.data&&this.data.length?(w.nextTick((function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}).bind(this)),this):(this.emit("error","No data provided"),this)},j.prototype.parse=function(Z,G){if(G){let H,W;H=(function(q){this.removeListener("error",W),this.data=q,G(null,this)}).bind(this),W=(function(q){this.removeListener("parsed",H),G(q,null)}).bind(this),this.once("parsed",H),this.once("error",W)}return this.end(Z),this},j.prototype.write=function(Z){return this._parser.write(Z),!0},j.prototype.end=function(Z){this._parser.end(Z)},j.prototype._metadata=function(Z){this.width=Z.width,this.height=Z.height,this.emit("metadata",Z)},j.prototype._gamma=function(Z){this.gamma=Z},j.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},j.bitblt=function(Z,G,H,W,q,Q,et,J){if(W|=0,q|=0,Q|=0,et|=0,J|=0,(H|=0)>Z.width||W>Z.height||H+q>Z.width||W+Q>Z.height)throw new Error("bitblt reading outside image");if(et>G.width||J>G.height||et+q>G.width||J+Q>G.height)throw new Error("bitblt writing outside image");for(let V=0;V<Q;V++)Z.data.copy(G.data,(J+V)*G.width+et<<2,(W+V)*Z.width+H<<2,(W+V)*Z.width+H+q<<2)},j.prototype.bitblt=function(Z,G,H,W,q,Q,et){return j.bitblt(this,Z,G,H,W,q,Q,et),this},j.adjustGamma=function(Z){if(Z.gamma){for(let G=0;G<Z.height;G++)for(let H=0;H<Z.width;H++){let W=Z.width*G+H<<2;for(let q=0;q<3;q++){let Q=Z.data[W+q]/255;Q=Math.pow(Q,1/2.2/Z.gamma),Z.data[W+q]=Math.round(255*Q)}}Z.gamma=0}},j.prototype.adjustGamma=function(){j.adjustGamma(this)}}).call(this)}).call(this,d("_process"),d("buffer").Buffer)},{"./packer-async":12,"./parser-async":16,"./png-sync":19,_process:63,buffer:32,stream:65,util:84}],21:[function(d,m,g){(function(w,I){(function(){let P=d("assert").ok,$=d("zlib"),F=d("util"),D=d("buffer").kMaxLength;function U(W){if(!(this instanceof U))return new U(W);W&&W.chunkSize<$.Z_MIN_CHUNK&&(W.chunkSize=$.Z_MIN_CHUNK),$.Inflate.call(this,W),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,W&&W.maxLength!=null&&(this._maxLength=W.maxLength)}function j(W){return new U(W)}function Z(W,q){W._handle&&(W._handle.close(),W._handle=null)}function G(W,q){if(typeof q=="string"&&(q=I.from(q)),!(q instanceof I))throw new TypeError("Not a string or buffer");let Q=W._finishFlushFlag;return Q==null&&(Q=$.Z_FINISH),W._processChunk(q,Q)}function H(W,q){return G(new U(q),W)}U.prototype._processChunk=function(W,q,Q){if(typeof Q=="function")return $.Inflate._processChunk.call(this,W,q,Q);let et,J,V=this,rt=W&&W.length,X=this._chunkSize-this._offset,ot=this._maxLength,it=0,st=[],at=0;function ft(lt,vt){if(V._hadError)return;let dt=X-vt;if(P(dt>=0,"have should not go down"),dt>0){let ht=V._buffer.slice(V._offset,V._offset+dt);if(V._offset+=dt,ht.length>ot&&(ht=ht.slice(0,ot)),st.push(ht),at+=ht.length,ot-=ht.length,ot===0)return!1}return(vt===0||V._offset>=V._chunkSize)&&(X=V._chunkSize,V._offset=0,V._buffer=I.allocUnsafe(V._chunkSize)),vt===0&&(it+=rt-lt,rt=lt,!0)}this.on("error",function(lt){et=lt}),P(this._handle,"zlib binding closed");do J=this._handle.writeSync(q,W,it,rt,this._buffer,this._offset,X),J=J||this._writeState;while(!this._hadError&&ft(J[0],J[1]));if(this._hadError)throw et;if(at>=D)throw Z(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+D.toString(16)+" bytes");let K=I.concat(st,at);return Z(this),K},F.inherits(U,$.Inflate),m.exports=g=H,g.Inflate=U,g.createInflate=j,g.inflateSync=H}).call(this)}).call(this,d("_process"),d("buffer").Buffer)},{_process:63,assert:23,buffer:32,util:84,zlib:31}],22:[function(d,m,g){let w=m.exports=function(I){this._buffer=I,this._reads=[]};w.prototype.read=function(I,P){this._reads.push({length:Math.abs(I),allowLess:I<0,func:P})},w.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let I=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=I.length||I.allowLess))break;{this._reads.shift();let P=this._buffer;this._buffer=P.slice(I.length),I.func.call(this,P.slice(0,I.length))}}if(this._reads.length>0)throw new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)throw new Error("unrecognised content at end of stream")}},{}],23:[function(d,m,g){(function(w){(function(){var I=d("object-assign");/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */function P(dt,ht){if(dt===ht)return 0;for(var pt=dt.length,Rt=ht.length,Tt=0,xt=Math.min(pt,Rt);Tt<xt;++Tt)if(dt[Tt]!==ht[Tt]){pt=dt[Tt],Rt=ht[Tt];break}return pt<Rt?-1:Rt<pt?1:0}function $(dt){return w.Buffer&&typeof w.Buffer.isBuffer=="function"?w.Buffer.isBuffer(dt):!(dt==null||!dt._isBuffer)}var F=d("util/"),D=Object.prototype.hasOwnProperty,U=Array.prototype.slice,j=(function(){}).name==="foo";function Z(dt){return Object.prototype.toString.call(dt)}function G(dt){return!$(dt)&&typeof w.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(dt):!!dt&&(dt instanceof DataView||!!(dt.buffer&&dt.buffer instanceof ArrayBuffer)))}var H=m.exports=rt,W=/\s*function\s+([^\(\s]*)\s*/;function q(dt){if(F.isFunction(dt)){if(j)return dt.name;var ht=dt.toString().match(W);return ht&&ht[1]}}function Q(dt,ht){return typeof dt=="string"?dt.length<ht?dt:dt.slice(0,ht):dt}function et(dt){if(j||!F.isFunction(dt))return F.inspect(dt);var ht=q(dt);return"[Function"+(ht?": "+ht:"")+"]"}function J(dt){return Q(et(dt.actual),128)+" "+dt.operator+" "+Q(et(dt.expected),128)}function V(dt,ht,pt,Rt,Tt){throw new H.AssertionError({message:pt,actual:dt,expected:ht,operator:Rt,stackStartFunction:Tt})}function rt(dt,ht){dt||V(dt,!0,ht,"==",H.ok)}function X(dt,ht,pt,Rt){if(dt===ht)return!0;if($(dt)&&$(ht))return P(dt,ht)===0;if(F.isDate(dt)&&F.isDate(ht))return dt.getTime()===ht.getTime();if(F.isRegExp(dt)&&F.isRegExp(ht))return dt.source===ht.source&&dt.global===ht.global&&dt.multiline===ht.multiline&&dt.lastIndex===ht.lastIndex&&dt.ignoreCase===ht.ignoreCase;if(dt!==null&&typeof dt=="object"||ht!==null&&typeof ht=="object"){if(G(dt)&&G(ht)&&Z(dt)===Z(ht)&&!(dt instanceof Float32Array||dt instanceof Float64Array))return P(new Uint8Array(dt.buffer),new Uint8Array(ht.buffer))===0;if($(dt)!==$(ht))return!1;var Tt=(Rt=Rt||{actual:[],expected:[]}).actual.indexOf(dt);return Tt!==-1&&Tt===Rt.expected.indexOf(ht)||(Rt.actual.push(dt),Rt.expected.push(ht),it(dt,ht,pt,Rt))}return pt?dt===ht:dt==ht}function ot(dt){return Object.prototype.toString.call(dt)=="[object Arguments]"}function it(dt,ht,pt,Rt){if(dt==null||ht==null)return!1;if(F.isPrimitive(dt)||F.isPrimitive(ht))return dt===ht;if(pt&&Object.getPrototypeOf(dt)!==Object.getPrototypeOf(ht))return!1;var Tt=ot(dt),xt=ot(ht);if(Tt&&!xt||!Tt&&xt)return!1;if(Tt)return X(dt=U.call(dt),ht=U.call(ht),pt);var $t,Et,Pt=vt(dt),Ot=vt(ht);if(Pt.length!==Ot.length)return!1;for(Pt.sort(),Ot.sort(),Et=Pt.length-1;Et>=0;Et--)if(Pt[Et]!==Ot[Et])return!1;for(Et=Pt.length-1;Et>=0;Et--)if(!X(dt[$t=Pt[Et]],ht[$t],pt,Rt))return!1;return!0}function st(dt,ht,pt){X(dt,ht,!0)&&V(dt,ht,pt,"notDeepStrictEqual",st)}function at(dt,ht){if(!dt||!ht)return!1;if(Object.prototype.toString.call(ht)=="[object RegExp]")return ht.test(dt);try{if(dt instanceof ht)return!0}catch{}return!Error.isPrototypeOf(ht)&&ht.call({},dt)===!0}function ft(dt){var ht;try{dt()}catch(pt){ht=pt}return ht}function K(dt,ht,pt,Rt){var Tt;if(typeof ht!="function")throw new TypeError('"block" argument must be a function');typeof pt=="string"&&(Rt=pt,pt=null),Tt=ft(ht),Rt=(pt&&pt.name?" ("+pt.name+").":".")+(Rt?" "+Rt:"."),dt&&!Tt&&V(Tt,pt,"Missing expected exception"+Rt);var xt=typeof Rt=="string",$t=!dt&&Tt&&!pt;if((!dt&&F.isError(Tt)&&xt&&at(Tt,pt)||$t)&&V(Tt,pt,"Got unwanted exception"+Rt),dt&&Tt&&pt&&!at(Tt,pt)||!dt&&Tt)throw Tt}function lt(dt,ht){dt||V(dt,!0,ht,"==",lt)}H.AssertionError=function(dt){this.name="AssertionError",this.actual=dt.actual,this.expected=dt.expected,this.operator=dt.operator,dt.message?(this.message=dt.message,this.generatedMessage=!1):(this.message=J(this),this.generatedMessage=!0);var ht=dt.stackStartFunction||V;if(Error.captureStackTrace)Error.captureStackTrace(this,ht);else{var pt=new Error;if(pt.stack){var Rt=pt.stack,Tt=q(ht),xt=Rt.indexOf(`
`+Tt);if(xt>=0){var $t=Rt.indexOf(`
`,xt+1);Rt=Rt.substring($t+1)}this.stack=Rt}}},F.inherits(H.AssertionError,Error),H.fail=V,H.ok=rt,H.equal=function(dt,ht,pt){dt!=ht&&V(dt,ht,pt,"==",H.equal)},H.notEqual=function(dt,ht,pt){dt==ht&&V(dt,ht,pt,"!=",H.notEqual)},H.deepEqual=function(dt,ht,pt){X(dt,ht,!1)||V(dt,ht,pt,"deepEqual",H.deepEqual)},H.deepStrictEqual=function(dt,ht,pt){X(dt,ht,!0)||V(dt,ht,pt,"deepStrictEqual",H.deepStrictEqual)},H.notDeepEqual=function(dt,ht,pt){X(dt,ht,!1)&&V(dt,ht,pt,"notDeepEqual",H.notDeepEqual)},H.notDeepStrictEqual=st,H.strictEqual=function(dt,ht,pt){dt!==ht&&V(dt,ht,pt,"===",H.strictEqual)},H.notStrictEqual=function(dt,ht,pt){dt===ht&&V(dt,ht,pt,"!==",H.notStrictEqual)},H.throws=function(dt,ht,pt){K(!0,dt,ht,pt)},H.doesNotThrow=function(dt,ht,pt){K(!1,dt,ht,pt)},H.ifError=function(dt){if(dt)throw dt},H.strict=I(lt,H,{equal:H.strictEqual,deepEqual:H.deepStrictEqual,notEqual:H.notStrictEqual,notDeepEqual:H.notDeepStrictEqual}),H.strict.strict=H.strict;var vt=Object.keys||function(dt){var ht=[];for(var pt in dt)D.call(dt,pt)&&ht.push(pt);return ht}}).call(this)}).call(this,commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":51,"util/":26}],24:[function(d,m,g){typeof Object.create=="function"?m.exports=function(w,I){w.super_=I,w.prototype=Object.create(I.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}})}:m.exports=function(w,I){w.super_=I;var P=function(){};P.prototype=I.prototype,w.prototype=new P,w.prototype.constructor=w}},{}],25:[function(d,m,g){m.exports=function(w){return w&&typeof w=="object"&&typeof w.copy=="function"&&typeof w.fill=="function"&&typeof w.readUInt8=="function"}},{}],26:[function(d,m,g){(function(w,I){(function(){var P=/%[sdj%]/g;g.format=function(Et){if(!it(Et)){for(var Pt=[],Ot=0;Ot<arguments.length;Ot++)Pt.push(D(arguments[Ot]));return Pt.join(" ")}Ot=1;for(var Ct=arguments,St=Ct.length,It=String(Et).replace(P,function(Ut){if(Ut==="%%")return"%";if(Ot>=St)return Ut;switch(Ut){case"%s":return String(Ct[Ot++]);case"%d":return Number(Ct[Ot++]);case"%j":try{return JSON.stringify(Ct[Ot++])}catch{return"[Circular]"}default:return Ut}}),Ft=Ct[Ot];Ot<St;Ft=Ct[++Ot])rt(Ft)||!K(Ft)?It+=" "+Ft:It+=" "+D(Ft);return It},g.deprecate=function(Et,Pt){if(at(I.process))return function(){return g.deprecate(Et,Pt).apply(this,arguments)};if(w.noDeprecation===!0)return Et;var Ot=!1;function Ct(){if(!Ot){if(w.throwDeprecation)throw new Error(Pt);w.traceDeprecation?console.trace(Pt):console.error(Pt),Ot=!0}return Et.apply(this,arguments)}return Ct};var $,F={};function D(Et,Pt){var Ot={seen:[],stylize:j};return arguments.length>=3&&(Ot.depth=arguments[2]),arguments.length>=4&&(Ot.colors=arguments[3]),V(Pt)?Ot.showHidden=Pt:Pt&&g._extend(Ot,Pt),at(Ot.showHidden)&&(Ot.showHidden=!1),at(Ot.depth)&&(Ot.depth=2),at(Ot.colors)&&(Ot.colors=!1),at(Ot.customInspect)&&(Ot.customInspect=!0),Ot.colors&&(Ot.stylize=U),G(Ot,Et,Ot.depth)}function U(Et,Pt){var Ot=D.styles[Pt];return Ot?"\x1B["+D.colors[Ot][0]+"m"+Et+"\x1B["+D.colors[Ot][1]+"m":Et}function j(Et,Pt){return Et}function Z(Et){var Pt={};return Et.forEach(function(Ot,Ct){Pt[Ot]=!0}),Pt}function G(Et,Pt,Ot){if(Et.customInspect&&Pt&&dt(Pt.inspect)&&Pt.inspect!==g.inspect&&(!Pt.constructor||Pt.constructor.prototype!==Pt)){var Ct=Pt.inspect(Ot,Et);return it(Ct)||(Ct=G(Et,Ct,Ot)),Ct}var St=H(Et,Pt);if(St)return St;var It=Object.keys(Pt),Ft=Z(It);if(Et.showHidden&&(It=Object.getOwnPropertyNames(Pt)),vt(Pt)&&(It.indexOf("message")>=0||It.indexOf("description")>=0))return W(Pt);if(It.length===0){if(dt(Pt)){var Ut=Pt.name?": "+Pt.name:"";return Et.stylize("[Function"+Ut+"]","special")}if(ft(Pt))return Et.stylize(RegExp.prototype.toString.call(Pt),"regexp");if(lt(Pt))return Et.stylize(Date.prototype.toString.call(Pt),"date");if(vt(Pt))return W(Pt)}var jt,Mt="",nt=!1,At=["{","}"];return J(Pt)&&(nt=!0,At=["[","]"]),dt(Pt)&&(Mt=" [Function"+(Pt.name?": "+Pt.name:"")+"]"),ft(Pt)&&(Mt=" "+RegExp.prototype.toString.call(Pt)),lt(Pt)&&(Mt=" "+Date.prototype.toUTCString.call(Pt)),vt(Pt)&&(Mt=" "+W(Pt)),It.length!==0||nt&&Pt.length!=0?Ot<0?ft(Pt)?Et.stylize(RegExp.prototype.toString.call(Pt),"regexp"):Et.stylize("[Object]","special"):(Et.seen.push(Pt),jt=nt?q(Et,Pt,Ot,Ft,It):It.map(function(mt){return Q(Et,Pt,Ot,Ft,mt,nt)}),Et.seen.pop(),et(jt,Mt,At)):At[0]+Mt+At[1]}function H(Et,Pt){if(at(Pt))return Et.stylize("undefined","undefined");if(it(Pt)){var Ot="'"+JSON.stringify(Pt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Et.stylize(Ot,"string")}return ot(Pt)?Et.stylize(""+Pt,"number"):V(Pt)?Et.stylize(""+Pt,"boolean"):rt(Pt)?Et.stylize("null","null"):void 0}function W(Et){return"["+Error.prototype.toString.call(Et)+"]"}function q(Et,Pt,Ot,Ct,St){for(var It=[],Ft=0,Ut=Pt.length;Ft<Ut;++Ft)$t(Pt,String(Ft))?It.push(Q(Et,Pt,Ot,Ct,String(Ft),!0)):It.push("");return St.forEach(function(jt){jt.match(/^\d+$/)||It.push(Q(Et,Pt,Ot,Ct,jt,!0))}),It}function Q(Et,Pt,Ot,Ct,St,It){var Ft,Ut,jt;if((jt=Object.getOwnPropertyDescriptor(Pt,St)||{value:Pt[St]}).get?Ut=jt.set?Et.stylize("[Getter/Setter]","special"):Et.stylize("[Getter]","special"):jt.set&&(Ut=Et.stylize("[Setter]","special")),$t(Ct,St)||(Ft="["+St+"]"),Ut||(Et.seen.indexOf(jt.value)<0?(Ut=rt(Ot)?G(Et,jt.value,null):G(Et,jt.value,Ot-1)).indexOf(`
`)>-1&&(Ut=It?Ut.split(`
`).map(function(Mt){return"  "+Mt}).join(`
`).substr(2):`
`+Ut.split(`
`).map(function(Mt){return"   "+Mt}).join(`
`)):Ut=Et.stylize("[Circular]","special")),at(Ft)){if(It&&St.match(/^\d+$/))return Ut;(Ft=JSON.stringify(""+St)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ft=Ft.substr(1,Ft.length-2),Ft=Et.stylize(Ft,"name")):(Ft=Ft.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Ft=Et.stylize(Ft,"string"))}return Ft+": "+Ut}function et(Et,Pt,Ot){return Et.reduce(function(Ct,St){return St.indexOf(`
`),Ct+St.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Ot[0]+(Pt===""?"":Pt+`
 `)+" "+Et.join(`,
  `)+" "+Ot[1]:Ot[0]+Pt+" "+Et.join(", ")+" "+Ot[1]}function J(Et){return Array.isArray(Et)}function V(Et){return typeof Et=="boolean"}function rt(Et){return Et===null}function X(Et){return Et==null}function ot(Et){return typeof Et=="number"}function it(Et){return typeof Et=="string"}function st(Et){return typeof Et=="symbol"}function at(Et){return Et===void 0}function ft(Et){return K(Et)&&pt(Et)==="[object RegExp]"}function K(Et){return typeof Et=="object"&&Et!==null}function lt(Et){return K(Et)&&pt(Et)==="[object Date]"}function vt(Et){return K(Et)&&(pt(Et)==="[object Error]"||Et instanceof Error)}function dt(Et){return typeof Et=="function"}function ht(Et){return Et===null||typeof Et=="boolean"||typeof Et=="number"||typeof Et=="string"||typeof Et=="symbol"||Et===void 0}function pt(Et){return Object.prototype.toString.call(Et)}function Rt(Et){return Et<10?"0"+Et.toString(10):Et.toString(10)}g.debuglog=function(Et){if(at($)&&($=w.env.NODE_DEBUG||""),Et=Et.toUpperCase(),!F[Et])if(new RegExp("\\b"+Et+"\\b","i").test($)){var Pt=w.pid;F[Et]=function(){var Ot=g.format.apply(g,arguments);console.error("%s %d: %s",Et,Pt,Ot)}}else F[Et]=function(){};return F[Et]},g.inspect=D,D.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},D.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},g.isArray=J,g.isBoolean=V,g.isNull=rt,g.isNullOrUndefined=X,g.isNumber=ot,g.isString=it,g.isSymbol=st,g.isUndefined=at,g.isRegExp=ft,g.isObject=K,g.isDate=lt,g.isError=vt,g.isFunction=dt,g.isPrimitive=ht,g.isBuffer=d("./support/isBuffer");var Tt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function xt(){var Et=new Date,Pt=[Rt(Et.getHours()),Rt(Et.getMinutes()),Rt(Et.getSeconds())].join(":");return[Et.getDate(),Tt[Et.getMonth()],Pt].join(" ")}function $t(Et,Pt){return Object.prototype.hasOwnProperty.call(Et,Pt)}g.log=function(){console.log("%s - %s",xt(),g.format.apply(g,arguments))},g.inherits=d("inherits"),g._extend=function(Et,Pt){if(!Pt||!K(Pt))return Et;for(var Ot=Object.keys(Pt),Ct=Ot.length;Ct--;)Et[Ot[Ct]]=Pt[Ot[Ct]];return Et}}).call(this)}).call(this,d("_process"),commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":25,_process:63,inherits:24}],27:[function(d,m,g){(function(w){(function(){var I=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],P=typeof globalThis>"u"?w:globalThis;m.exports=function(){for(var $=[],F=0;F<I.length;F++)typeof P[I[F]]=="function"&&($[$.length]=I[F]);return $}}).call(this)}).call(this,commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],28:[function(d,m,g){g.byteLength=j,g.toByteArray=G,g.fromByteArray=q;for(var w=[],I=[],P=typeof Uint8Array<"u"?Uint8Array:Array,$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=0,D=$.length;F<D;++F)w[F]=$[F],I[$.charCodeAt(F)]=F;function U(Q){var et=Q.length;if(et%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var J=Q.indexOf("=");return J===-1&&(J=et),[J,J===et?0:4-J%4]}function j(Q){var et=U(Q),J=et[0],V=et[1];return 3*(J+V)/4-V}function Z(Q,et,J){return 3*(et+J)/4-J}function G(Q){var et,J,V=U(Q),rt=V[0],X=V[1],ot=new P(Z(Q,rt,X)),it=0,st=X>0?rt-4:rt;for(J=0;J<st;J+=4)et=I[Q.charCodeAt(J)]<<18|I[Q.charCodeAt(J+1)]<<12|I[Q.charCodeAt(J+2)]<<6|I[Q.charCodeAt(J+3)],ot[it++]=et>>16&255,ot[it++]=et>>8&255,ot[it++]=255&et;return X===2&&(et=I[Q.charCodeAt(J)]<<2|I[Q.charCodeAt(J+1)]>>4,ot[it++]=255&et),X===1&&(et=I[Q.charCodeAt(J)]<<10|I[Q.charCodeAt(J+1)]<<4|I[Q.charCodeAt(J+2)]>>2,ot[it++]=et>>8&255,ot[it++]=255&et),ot}function H(Q){return w[Q>>18&63]+w[Q>>12&63]+w[Q>>6&63]+w[63&Q]}function W(Q,et,J){for(var V,rt=[],X=et;X<J;X+=3)V=(Q[X]<<16&16711680)+(Q[X+1]<<8&65280)+(255&Q[X+2]),rt.push(H(V));return rt.join("")}function q(Q){for(var et,J=Q.length,V=J%3,rt=[],X=16383,ot=0,it=J-V;ot<it;ot+=X)rt.push(W(Q,ot,ot+X>it?it:ot+X));return V===1?(et=Q[J-1],rt.push(w[et>>2]+w[et<<4&63]+"==")):V===2&&(et=(Q[J-2]<<8)+Q[J-1],rt.push(w[et>>10]+w[et>>4&63]+w[et<<2&63]+"=")),rt.join("")}I[45]=62,I[95]=63},{}],29:[function(d,m,g){},{}],30:[function(d,m,g){(function(w,I){(function(){var P=d("assert"),$=d("pako/lib/zlib/zstream"),F=d("pako/lib/zlib/deflate.js"),D=d("pako/lib/zlib/inflate.js"),U=d("pako/lib/zlib/constants");for(var j in U)g[j]=U[j];g.NONE=0,g.DEFLATE=1,g.INFLATE=2,g.GZIP=3,g.GUNZIP=4,g.DEFLATERAW=5,g.INFLATERAW=6,g.UNZIP=7;var Z=31,G=139;function H(W){if(typeof W!="number"||W<g.DEFLATE||W>g.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=W,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}H.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,P(this.init_done,"close before init"),P(this.mode<=g.UNZIP),this.mode===g.DEFLATE||this.mode===g.GZIP||this.mode===g.DEFLATERAW?F.deflateEnd(this.strm):this.mode!==g.INFLATE&&this.mode!==g.GUNZIP&&this.mode!==g.INFLATERAW&&this.mode!==g.UNZIP||D.inflateEnd(this.strm),this.mode=g.NONE,this.dictionary=null)},H.prototype.write=function(W,q,Q,et,J,V,rt){return this._write(!0,W,q,Q,et,J,V,rt)},H.prototype.writeSync=function(W,q,Q,et,J,V,rt){return this._write(!1,W,q,Q,et,J,V,rt)},H.prototype._write=function(W,q,Q,et,J,V,rt,X){if(P.equal(arguments.length,8),P(this.init_done,"write before init"),P(this.mode!==g.NONE,"already finalized"),P.equal(!1,this.write_in_progress,"write already in progress"),P.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,P.equal(!1,q===void 0,"must provide flush value"),this.write_in_progress=!0,q!==g.Z_NO_FLUSH&&q!==g.Z_PARTIAL_FLUSH&&q!==g.Z_SYNC_FLUSH&&q!==g.Z_FULL_FLUSH&&q!==g.Z_FINISH&&q!==g.Z_BLOCK)throw new Error("Invalid flush value");if(Q==null&&(Q=I.alloc(0),J=0,et=0),this.strm.avail_in=J,this.strm.input=Q,this.strm.next_in=et,this.strm.avail_out=X,this.strm.output=V,this.strm.next_out=rt,this.flush=q,!W)return this._process(),this._checkError()?this._afterSync():void 0;var ot=this;return w.nextTick(function(){ot._process(),ot._after()}),this},H.prototype._afterSync=function(){var W=this.strm.avail_out,q=this.strm.avail_in;return this.write_in_progress=!1,[q,W]},H.prototype._process=function(){var W=null;switch(this.mode){case g.DEFLATE:case g.GZIP:case g.DEFLATERAW:this.err=F.deflate(this.strm,this.flush);break;case g.UNZIP:switch(this.strm.avail_in>0&&(W=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(W===null)break;if(this.strm.input[W]!==Z){this.mode=g.INFLATE;break}if(this.gzip_id_bytes_read=1,W++,this.strm.avail_in===1)break;case 1:if(W===null)break;this.strm.input[W]===G?(this.gzip_id_bytes_read=2,this.mode=g.GUNZIP):this.mode=g.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case g.INFLATE:case g.GUNZIP:case g.INFLATERAW:for(this.err=D.inflate(this.strm,this.flush),this.err===g.Z_NEED_DICT&&this.dictionary&&(this.err=D.inflateSetDictionary(this.strm,this.dictionary),this.err===g.Z_OK?this.err=D.inflate(this.strm,this.flush):this.err===g.Z_DATA_ERROR&&(this.err=g.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===g.GUNZIP&&this.err===g.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=D.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},H.prototype._checkError=function(){switch(this.err){case g.Z_OK:case g.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===g.Z_FINISH)return this._error("unexpected end of file"),!1;break;case g.Z_STREAM_END:break;case g.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},H.prototype._after=function(){if(this._checkError()){var W=this.strm.avail_out,q=this.strm.avail_in;this.write_in_progress=!1,this.callback(q,W),this.pending_close&&this.close()}},H.prototype._error=function(W){this.strm.msg&&(W=this.strm.msg),this.onerror(W,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},H.prototype.init=function(W,q,Q,et,J){P(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),P(W>=8&&W<=15,"invalid windowBits"),P(q>=-1&&q<=9,"invalid compression level"),P(Q>=1&&Q<=9,"invalid memlevel"),P(et===g.Z_FILTERED||et===g.Z_HUFFMAN_ONLY||et===g.Z_RLE||et===g.Z_FIXED||et===g.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(q,W,Q,et,J),this._setDictionary()},H.prototype.params=function(){throw new Error("deflateParams Not supported")},H.prototype.reset=function(){this._reset(),this._setDictionary()},H.prototype._init=function(W,q,Q,et,J){switch(this.level=W,this.windowBits=q,this.memLevel=Q,this.strategy=et,this.flush=g.Z_NO_FLUSH,this.err=g.Z_OK,this.mode!==g.GZIP&&this.mode!==g.GUNZIP||(this.windowBits+=16),this.mode===g.UNZIP&&(this.windowBits+=32),this.mode!==g.DEFLATERAW&&this.mode!==g.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new $,this.mode){case g.DEFLATE:case g.GZIP:case g.DEFLATERAW:this.err=F.deflateInit2(this.strm,this.level,g.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case g.INFLATE:case g.GUNZIP:case g.INFLATERAW:case g.UNZIP:this.err=D.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==g.Z_OK&&this._error("Init error"),this.dictionary=J,this.write_in_progress=!1,this.init_done=!0},H.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=g.Z_OK,this.mode){case g.DEFLATE:case g.DEFLATERAW:this.err=F.deflateSetDictionary(this.strm,this.dictionary)}this.err!==g.Z_OK&&this._error("Failed to set dictionary")}},H.prototype._reset=function(){switch(this.err=g.Z_OK,this.mode){case g.DEFLATE:case g.DEFLATERAW:case g.GZIP:this.err=F.deflateReset(this.strm);break;case g.INFLATE:case g.INFLATERAW:case g.GUNZIP:this.err=D.inflateReset(this.strm)}this.err!==g.Z_OK&&this._error("Failed to reset stream")},g.Zlib=H}).call(this)}).call(this,d("_process"),d("buffer").Buffer)},{_process:63,assert:23,buffer:32,"pako/lib/zlib/constants":54,"pako/lib/zlib/deflate.js":56,"pako/lib/zlib/inflate.js":58,"pako/lib/zlib/zstream":62}],31:[function(d,m,g){(function(w){(function(){var I=d("buffer").Buffer,P=d("stream").Transform,$=d("./binding"),F=d("util"),D=d("assert").ok,U=d("buffer").kMaxLength,j="Cannot create final Buffer. It would be larger than 0x"+U.toString(16)+" bytes";$.Z_MIN_WINDOWBITS=8,$.Z_MAX_WINDOWBITS=15,$.Z_DEFAULT_WINDOWBITS=15,$.Z_MIN_CHUNK=64,$.Z_MAX_CHUNK=1/0,$.Z_DEFAULT_CHUNK=16384,$.Z_MIN_MEMLEVEL=1,$.Z_MAX_MEMLEVEL=9,$.Z_DEFAULT_MEMLEVEL=8,$.Z_MIN_LEVEL=-1,$.Z_MAX_LEVEL=9,$.Z_DEFAULT_LEVEL=$.Z_DEFAULT_COMPRESSION;for(var Z=Object.keys($),G=0;G<Z.length;G++){var H=Z[G];H.match(/^Z/)&&Object.defineProperty(g,H,{enumerable:!0,value:$[H],writable:!1})}for(var W={Z_OK:$.Z_OK,Z_STREAM_END:$.Z_STREAM_END,Z_NEED_DICT:$.Z_NEED_DICT,Z_ERRNO:$.Z_ERRNO,Z_STREAM_ERROR:$.Z_STREAM_ERROR,Z_DATA_ERROR:$.Z_DATA_ERROR,Z_MEM_ERROR:$.Z_MEM_ERROR,Z_BUF_ERROR:$.Z_BUF_ERROR,Z_VERSION_ERROR:$.Z_VERSION_ERROR},q=Object.keys(W),Q=0;Q<q.length;Q++){var et=q[Q];W[W[et]]=et}function J(ht,pt,Rt){var Tt=[],xt=0;function $t(){for(var Ot;(Ot=ht.read())!==null;)Tt.push(Ot),xt+=Ot.length;ht.once("readable",$t)}function Et(Ot){ht.removeListener("end",Pt),ht.removeListener("readable",$t),Rt(Ot)}function Pt(){var Ot,Ct=null;xt>=U?Ct=new RangeError(j):Ot=I.concat(Tt,xt),Tt=[],ht.close(),Rt(Ct,Ot)}ht.on("error",Et),ht.on("end",Pt),ht.end(pt),$t()}function V(ht,pt){if(typeof pt=="string"&&(pt=I.from(pt)),!I.isBuffer(pt))throw new TypeError("Not a string or buffer");var Rt=ht._finishFlushFlag;return ht._processChunk(pt,Rt)}function rt(ht){if(!(this instanceof rt))return new rt(ht);lt.call(this,ht,$.DEFLATE)}function X(ht){if(!(this instanceof X))return new X(ht);lt.call(this,ht,$.INFLATE)}function ot(ht){if(!(this instanceof ot))return new ot(ht);lt.call(this,ht,$.GZIP)}function it(ht){if(!(this instanceof it))return new it(ht);lt.call(this,ht,$.GUNZIP)}function st(ht){if(!(this instanceof st))return new st(ht);lt.call(this,ht,$.DEFLATERAW)}function at(ht){if(!(this instanceof at))return new at(ht);lt.call(this,ht,$.INFLATERAW)}function ft(ht){if(!(this instanceof ft))return new ft(ht);lt.call(this,ht,$.UNZIP)}function K(ht){return ht===$.Z_NO_FLUSH||ht===$.Z_PARTIAL_FLUSH||ht===$.Z_SYNC_FLUSH||ht===$.Z_FULL_FLUSH||ht===$.Z_FINISH||ht===$.Z_BLOCK}function lt(ht,pt){var Rt=this;if(this._opts=ht=ht||{},this._chunkSize=ht.chunkSize||g.Z_DEFAULT_CHUNK,P.call(this,ht),ht.flush&&!K(ht.flush))throw new Error("Invalid flush flag: "+ht.flush);if(ht.finishFlush&&!K(ht.finishFlush))throw new Error("Invalid flush flag: "+ht.finishFlush);if(this._flushFlag=ht.flush||$.Z_NO_FLUSH,this._finishFlushFlag=ht.finishFlush!==void 0?ht.finishFlush:$.Z_FINISH,ht.chunkSize&&(ht.chunkSize<g.Z_MIN_CHUNK||ht.chunkSize>g.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+ht.chunkSize);if(ht.windowBits&&(ht.windowBits<g.Z_MIN_WINDOWBITS||ht.windowBits>g.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+ht.windowBits);if(ht.level&&(ht.level<g.Z_MIN_LEVEL||ht.level>g.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+ht.level);if(ht.memLevel&&(ht.memLevel<g.Z_MIN_MEMLEVEL||ht.memLevel>g.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+ht.memLevel);if(ht.strategy&&ht.strategy!=g.Z_FILTERED&&ht.strategy!=g.Z_HUFFMAN_ONLY&&ht.strategy!=g.Z_RLE&&ht.strategy!=g.Z_FIXED&&ht.strategy!=g.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+ht.strategy);if(ht.dictionary&&!I.isBuffer(ht.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new $.Zlib(pt);var Tt=this;this._hadError=!1,this._handle.onerror=function(Et,Pt){vt(Tt),Tt._hadError=!0;var Ot=new Error(Et);Ot.errno=Pt,Ot.code=g.codes[Pt],Tt.emit("error",Ot)};var xt=g.Z_DEFAULT_COMPRESSION;typeof ht.level=="number"&&(xt=ht.level);var $t=g.Z_DEFAULT_STRATEGY;typeof ht.strategy=="number"&&($t=ht.strategy),this._handle.init(ht.windowBits||g.Z_DEFAULT_WINDOWBITS,xt,ht.memLevel||g.Z_DEFAULT_MEMLEVEL,$t,ht.dictionary),this._buffer=I.allocUnsafe(this._chunkSize),this._offset=0,this._level=xt,this._strategy=$t,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!Rt._handle},configurable:!0,enumerable:!0})}function vt(ht,pt){pt&&w.nextTick(pt),ht._handle&&(ht._handle.close(),ht._handle=null)}function dt(ht){ht.emit("close")}Object.defineProperty(g,"codes",{enumerable:!0,value:Object.freeze(W),writable:!1}),g.Deflate=rt,g.Inflate=X,g.Gzip=ot,g.Gunzip=it,g.DeflateRaw=st,g.InflateRaw=at,g.Unzip=ft,g.createDeflate=function(ht){return new rt(ht)},g.createInflate=function(ht){return new X(ht)},g.createDeflateRaw=function(ht){return new st(ht)},g.createInflateRaw=function(ht){return new at(ht)},g.createGzip=function(ht){return new ot(ht)},g.createGunzip=function(ht){return new it(ht)},g.createUnzip=function(ht){return new ft(ht)},g.deflate=function(ht,pt,Rt){return typeof pt=="function"&&(Rt=pt,pt={}),J(new rt(pt),ht,Rt)},g.deflateSync=function(ht,pt){return V(new rt(pt),ht)},g.gzip=function(ht,pt,Rt){return typeof pt=="function"&&(Rt=pt,pt={}),J(new ot(pt),ht,Rt)},g.gzipSync=function(ht,pt){return V(new ot(pt),ht)},g.deflateRaw=function(ht,pt,Rt){return typeof pt=="function"&&(Rt=pt,pt={}),J(new st(pt),ht,Rt)},g.deflateRawSync=function(ht,pt){return V(new st(pt),ht)},g.unzip=function(ht,pt,Rt){return typeof pt=="function"&&(Rt=pt,pt={}),J(new ft(pt),ht,Rt)},g.unzipSync=function(ht,pt){return V(new ft(pt),ht)},g.inflate=function(ht,pt,Rt){return typeof pt=="function"&&(Rt=pt,pt={}),J(new X(pt),ht,Rt)},g.inflateSync=function(ht,pt){return V(new X(pt),ht)},g.gunzip=function(ht,pt,Rt){return typeof pt=="function"&&(Rt=pt,pt={}),J(new it(pt),ht,Rt)},g.gunzipSync=function(ht,pt){return V(new it(pt),ht)},g.inflateRaw=function(ht,pt,Rt){return typeof pt=="function"&&(Rt=pt,pt={}),J(new at(pt),ht,Rt)},g.inflateRawSync=function(ht,pt){return V(new at(pt),ht)},F.inherits(lt,P),lt.prototype.params=function(ht,pt,Rt){if(ht<g.Z_MIN_LEVEL||ht>g.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+ht);if(pt!=g.Z_FILTERED&&pt!=g.Z_HUFFMAN_ONLY&&pt!=g.Z_RLE&&pt!=g.Z_FIXED&&pt!=g.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+pt);if(this._level!==ht||this._strategy!==pt){var Tt=this;this.flush($.Z_SYNC_FLUSH,function(){D(Tt._handle,"zlib binding closed"),Tt._handle.params(ht,pt),Tt._hadError||(Tt._level=ht,Tt._strategy=pt,Rt&&Rt())})}else w.nextTick(Rt)},lt.prototype.reset=function(){return D(this._handle,"zlib binding closed"),this._handle.reset()},lt.prototype._flush=function(ht){this._transform(I.alloc(0),"",ht)},lt.prototype.flush=function(ht,pt){var Rt=this,Tt=this._writableState;(typeof ht=="function"||ht===void 0&&!pt)&&(pt=ht,ht=$.Z_FULL_FLUSH),Tt.ended?pt&&w.nextTick(pt):Tt.ending?pt&&this.once("end",pt):Tt.needDrain?pt&&this.once("drain",function(){return Rt.flush(ht,pt)}):(this._flushFlag=ht,this.write(I.alloc(0),"",pt))},lt.prototype.close=function(ht){vt(this,ht),w.nextTick(dt,this)},lt.prototype._transform=function(ht,pt,Rt){var Tt,xt=this._writableState,$t=(xt.ending||xt.ended)&&(!ht||xt.length===ht.length);return ht===null||I.isBuffer(ht)?this._handle?($t?Tt=this._finishFlushFlag:(Tt=this._flushFlag,ht.length>=xt.length&&(this._flushFlag=this._opts.flush||$.Z_NO_FLUSH)),void this._processChunk(ht,Tt,Rt)):Rt(new Error("zlib binding closed")):Rt(new Error("invalid input"))},lt.prototype._processChunk=function(ht,pt,Rt){var Tt=ht&&ht.length,xt=this._chunkSize-this._offset,$t=0,Et=this,Pt=typeof Rt=="function";if(!Pt){var Ot,Ct=[],St=0;this.on("error",function(Mt){Ot=Mt}),D(this._handle,"zlib binding closed");do var It=this._handle.writeSync(pt,ht,$t,Tt,this._buffer,this._offset,xt);while(!this._hadError&&jt(It[0],It[1]));if(this._hadError)throw Ot;if(St>=U)throw vt(this),new RangeError(j);var Ft=I.concat(Ct,St);return vt(this),Ft}D(this._handle,"zlib binding closed");var Ut=this._handle.write(pt,ht,$t,Tt,this._buffer,this._offset,xt);function jt(Mt,nt){if(this&&(this.buffer=null,this.callback=null),!Et._hadError){var At=xt-nt;if(D(At>=0,"have should not go down"),At>0){var mt=Et._buffer.slice(Et._offset,Et._offset+At);Et._offset+=At,Pt?Et.push(mt):(Ct.push(mt),St+=mt.length)}if((nt===0||Et._offset>=Et._chunkSize)&&(xt=Et._chunkSize,Et._offset=0,Et._buffer=I.allocUnsafe(Et._chunkSize)),nt===0){if($t+=Tt-Mt,Tt=Mt,!Pt)return!0;var gt=Et._handle.write(pt,ht,$t,Tt,Et._buffer,Et._offset,Et._chunkSize);return gt.callback=jt,void(gt.buffer=ht)}if(!Pt)return!1;Rt()}}Ut.buffer=ht,Ut.callback=jt},F.inherits(rt,lt),F.inherits(X,lt),F.inherits(ot,lt),F.inherits(it,lt),F.inherits(st,lt),F.inherits(at,lt),F.inherits(ft,lt)}).call(this)}).call(this,d("_process"))},{"./binding":30,_process:63,assert:23,buffer:32,stream:65,util:84}],32:[function(d,m,g){(function(w){(function(){var I=d("base64-js"),P=d("ieee754");g.Buffer=U,g.SlowBuffer=V,g.INSPECT_MAX_BYTES=50;var $=2147483647;function F(){try{var tt=new Uint8Array(1);return tt.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},tt.foo()===42}catch{return!1}}function D(tt){if(tt>$)throw new RangeError('The value "'+tt+'" is invalid for option "size"');var ut=new Uint8Array(tt);return ut.__proto__=U.prototype,ut}function U(tt,ut,bt){if(typeof tt=="number"){if(typeof ut=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return H(tt)}return j(tt,ut,bt)}function j(tt,ut,bt){if(typeof tt=="string")return W(tt,ut);if(ArrayBuffer.isView(tt))return q(tt);if(tt==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof tt);if(yt(tt,ArrayBuffer)||tt&&yt(tt.buffer,ArrayBuffer))return Q(tt,ut,bt);if(typeof tt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var wt=tt.valueOf&&tt.valueOf();if(wt!=null&&wt!==tt)return U.from(wt,ut,bt);var zt=et(tt);if(zt)return zt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof tt[Symbol.toPrimitive]=="function")return U.from(tt[Symbol.toPrimitive]("string"),ut,bt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof tt)}function Z(tt){if(typeof tt!="number")throw new TypeError('"size" argument must be of type number');if(tt<0)throw new RangeError('The value "'+tt+'" is invalid for option "size"')}function G(tt,ut,bt){return Z(tt),tt<=0?D(tt):ut!==void 0?typeof bt=="string"?D(tt).fill(ut,bt):D(tt).fill(ut):D(tt)}function H(tt){return Z(tt),D(tt<0?0:0|J(tt))}function W(tt,ut){if(typeof ut=="string"&&ut!==""||(ut="utf8"),!U.isEncoding(ut))throw new TypeError("Unknown encoding: "+ut);var bt=0|rt(tt,ut),wt=D(bt),zt=wt.write(tt,ut);return zt!==bt&&(wt=wt.slice(0,zt)),wt}function q(tt){for(var ut=tt.length<0?0:0|J(tt.length),bt=D(ut),wt=0;wt<ut;wt+=1)bt[wt]=255&tt[wt];return bt}function Q(tt,ut,bt){if(ut<0||tt.byteLength<ut)throw new RangeError('"offset" is outside of buffer bounds');if(tt.byteLength<ut+(bt||0))throw new RangeError('"length" is outside of buffer bounds');var wt;return(wt=ut===void 0&&bt===void 0?new Uint8Array(tt):bt===void 0?new Uint8Array(tt,ut):new Uint8Array(tt,ut,bt)).__proto__=U.prototype,wt}function et(tt){if(U.isBuffer(tt)){var ut=0|J(tt.length),bt=D(ut);return bt.length===0||tt.copy(bt,0,0,ut),bt}return tt.length!==void 0?typeof tt.length!="number"||Bt(tt.length)?D(0):q(tt):tt.type==="Buffer"&&Array.isArray(tt.data)?q(tt.data):void 0}function J(tt){if(tt>=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$.toString(16)+" bytes");return 0|tt}function V(tt){return+tt!=tt&&(tt=0),U.alloc(+tt)}function rt(tt,ut){if(U.isBuffer(tt))return tt.length;if(ArrayBuffer.isView(tt)||yt(tt,ArrayBuffer))return tt.byteLength;if(typeof tt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof tt);var bt=tt.length,wt=arguments.length>2&&arguments[2]===!0;if(!wt&&bt===0)return 0;for(var zt=!1;;)switch(ut){case"ascii":case"latin1":case"binary":return bt;case"utf8":case"utf-8":return nt(tt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*bt;case"hex":return bt>>>1;case"base64":return gt(tt).length;default:if(zt)return wt?-1:nt(tt).length;ut=(""+ut).toLowerCase(),zt=!0}}function X(tt,ut,bt){var wt=!1;if((ut===void 0||ut<0)&&(ut=0),ut>this.length||((bt===void 0||bt>this.length)&&(bt=this.length),bt<=0)||(bt>>>=0)<=(ut>>>=0))return"";for(tt||(tt="utf8");;)switch(tt){case"hex":return Et(this,ut,bt);case"utf8":case"utf-8":return pt(this,ut,bt);case"ascii":return xt(this,ut,bt);case"latin1":case"binary":return $t(this,ut,bt);case"base64":return ht(this,ut,bt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pt(this,ut,bt);default:if(wt)throw new TypeError("Unknown encoding: "+tt);tt=(tt+"").toLowerCase(),wt=!0}}function ot(tt,ut,bt){var wt=tt[ut];tt[ut]=tt[bt],tt[bt]=wt}function it(tt,ut,bt,wt,zt){if(tt.length===0)return-1;if(typeof bt=="string"?(wt=bt,bt=0):bt>2147483647?bt=2147483647:bt<-2147483648&&(bt=-2147483648),Bt(bt=+bt)&&(bt=zt?0:tt.length-1),bt<0&&(bt=tt.length+bt),bt>=tt.length){if(zt)return-1;bt=tt.length-1}else if(bt<0){if(!zt)return-1;bt=0}if(typeof ut=="string"&&(ut=U.from(ut,wt)),U.isBuffer(ut))return ut.length===0?-1:st(tt,ut,bt,wt,zt);if(typeof ut=="number")return ut&=255,typeof Uint8Array.prototype.indexOf=="function"?zt?Uint8Array.prototype.indexOf.call(tt,ut,bt):Uint8Array.prototype.lastIndexOf.call(tt,ut,bt):st(tt,[ut],bt,wt,zt);throw new TypeError("val must be string, number or Buffer")}function st(tt,ut,bt,wt,zt){var Zt,Kt=1,te=tt.length,Vt=ut.length;if(wt!==void 0&&((wt=String(wt).toLowerCase())==="ucs2"||wt==="ucs-2"||wt==="utf16le"||wt==="utf-16le")){if(tt.length<2||ut.length<2)return-1;Kt=2,te/=2,Vt/=2,bt/=2}function ee(ae,ce){return Kt===1?ae[ce]:ae.readUInt16BE(ce*Kt)}if(zt){var Jt=-1;for(Zt=bt;Zt<te;Zt++)if(ee(tt,Zt)===ee(ut,Jt===-1?0:Zt-Jt)){if(Jt===-1&&(Jt=Zt),Zt-Jt+1===Vt)return Jt*Kt}else Jt!==-1&&(Zt-=Zt-Jt),Jt=-1}else for(bt+Vt>te&&(bt=te-Vt),Zt=bt;Zt>=0;Zt--){for(var oe=!0,ne=0;ne<Vt;ne++)if(ee(tt,Zt+ne)!==ee(ut,ne)){oe=!1;break}if(oe)return Zt}return-1}function at(tt,ut,bt,wt){bt=Number(bt)||0;var zt=tt.length-bt;wt?(wt=Number(wt))>zt&&(wt=zt):wt=zt;var Zt=ut.length;wt>Zt/2&&(wt=Zt/2);for(var Kt=0;Kt<wt;++Kt){var te=parseInt(ut.substr(2*Kt,2),16);if(Bt(te))return Kt;tt[bt+Kt]=te}return Kt}function ft(tt,ut,bt,wt){return _t(nt(ut,tt.length-bt),tt,bt,wt)}function K(tt,ut,bt,wt){return _t(At(ut),tt,bt,wt)}function lt(tt,ut,bt,wt){return K(tt,ut,bt,wt)}function vt(tt,ut,bt,wt){return _t(gt(ut),tt,bt,wt)}function dt(tt,ut,bt,wt){return _t(mt(ut,tt.length-bt),tt,bt,wt)}function ht(tt,ut,bt){return ut===0&&bt===tt.length?I.fromByteArray(tt):I.fromByteArray(tt.slice(ut,bt))}function pt(tt,ut,bt){bt=Math.min(tt.length,bt);for(var wt=[],zt=ut;zt<bt;){var Zt,Kt,te,Vt,ee=tt[zt],Jt=null,oe=ee>239?4:ee>223?3:ee>191?2:1;if(zt+oe<=bt)switch(oe){case 1:ee<128&&(Jt=ee);break;case 2:(192&(Zt=tt[zt+1]))==128&&(Vt=(31&ee)<<6|63&Zt)>127&&(Jt=Vt);break;case 3:Zt=tt[zt+1],Kt=tt[zt+2],(192&Zt)==128&&(192&Kt)==128&&(Vt=(15&ee)<<12|(63&Zt)<<6|63&Kt)>2047&&(Vt<55296||Vt>57343)&&(Jt=Vt);break;case 4:Zt=tt[zt+1],Kt=tt[zt+2],te=tt[zt+3],(192&Zt)==128&&(192&Kt)==128&&(192&te)==128&&(Vt=(15&ee)<<18|(63&Zt)<<12|(63&Kt)<<6|63&te)>65535&&Vt<1114112&&(Jt=Vt)}Jt===null?(Jt=65533,oe=1):Jt>65535&&(Jt-=65536,wt.push(Jt>>>10&1023|55296),Jt=56320|1023&Jt),wt.push(Jt),zt+=oe}return Tt(wt)}g.kMaxLength=$,U.TYPED_ARRAY_SUPPORT=F(),U.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(U.prototype,"parent",{enumerable:!0,get:function(){if(U.isBuffer(this))return this.buffer}}),Object.defineProperty(U.prototype,"offset",{enumerable:!0,get:function(){if(U.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&U[Symbol.species]===U&&Object.defineProperty(U,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),U.poolSize=8192,U.from=function(tt,ut,bt){return j(tt,ut,bt)},U.prototype.__proto__=Uint8Array.prototype,U.__proto__=Uint8Array,U.alloc=function(tt,ut,bt){return G(tt,ut,bt)},U.allocUnsafe=function(tt){return H(tt)},U.allocUnsafeSlow=function(tt){return H(tt)},U.isBuffer=function(tt){return tt!=null&&tt._isBuffer===!0&&tt!==U.prototype},U.compare=function(tt,ut){if(yt(tt,Uint8Array)&&(tt=U.from(tt,tt.offset,tt.byteLength)),yt(ut,Uint8Array)&&(ut=U.from(ut,ut.offset,ut.byteLength)),!U.isBuffer(tt)||!U.isBuffer(ut))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(tt===ut)return 0;for(var bt=tt.length,wt=ut.length,zt=0,Zt=Math.min(bt,wt);zt<Zt;++zt)if(tt[zt]!==ut[zt]){bt=tt[zt],wt=ut[zt];break}return bt<wt?-1:wt<bt?1:0},U.isEncoding=function(tt){switch(String(tt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},U.concat=function(tt,ut){if(!Array.isArray(tt))throw new TypeError('"list" argument must be an Array of Buffers');if(tt.length===0)return U.alloc(0);var bt;if(ut===void 0)for(ut=0,bt=0;bt<tt.length;++bt)ut+=tt[bt].length;var wt=U.allocUnsafe(ut),zt=0;for(bt=0;bt<tt.length;++bt){var Zt=tt[bt];if(yt(Zt,Uint8Array)&&(Zt=U.from(Zt)),!U.isBuffer(Zt))throw new TypeError('"list" argument must be an Array of Buffers');Zt.copy(wt,zt),zt+=Zt.length}return wt},U.byteLength=rt,U.prototype._isBuffer=!0,U.prototype.swap16=function(){var tt=this.length;if(tt%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ut=0;ut<tt;ut+=2)ot(this,ut,ut+1);return this},U.prototype.swap32=function(){var tt=this.length;if(tt%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ut=0;ut<tt;ut+=4)ot(this,ut,ut+3),ot(this,ut+1,ut+2);return this},U.prototype.swap64=function(){var tt=this.length;if(tt%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ut=0;ut<tt;ut+=8)ot(this,ut,ut+7),ot(this,ut+1,ut+6),ot(this,ut+2,ut+5),ot(this,ut+3,ut+4);return this},U.prototype.toString=function(){var tt=this.length;return tt===0?"":arguments.length===0?pt(this,0,tt):X.apply(this,arguments)},U.prototype.toLocaleString=U.prototype.toString,U.prototype.equals=function(tt){if(!U.isBuffer(tt))throw new TypeError("Argument must be a Buffer");return this===tt||U.compare(this,tt)===0},U.prototype.inspect=function(){var tt="",ut=g.INSPECT_MAX_BYTES;return tt=this.toString("hex",0,ut).replace(/(.{2})/g,"$1 ").trim(),this.length>ut&&(tt+=" ... "),"<Buffer "+tt+">"},U.prototype.compare=function(tt,ut,bt,wt,zt){if(yt(tt,Uint8Array)&&(tt=U.from(tt,tt.offset,tt.byteLength)),!U.isBuffer(tt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof tt);if(ut===void 0&&(ut=0),bt===void 0&&(bt=tt?tt.length:0),wt===void 0&&(wt=0),zt===void 0&&(zt=this.length),ut<0||bt>tt.length||wt<0||zt>this.length)throw new RangeError("out of range index");if(wt>=zt&&ut>=bt)return 0;if(wt>=zt)return-1;if(ut>=bt)return 1;if(this===tt)return 0;for(var Zt=(zt>>>=0)-(wt>>>=0),Kt=(bt>>>=0)-(ut>>>=0),te=Math.min(Zt,Kt),Vt=this.slice(wt,zt),ee=tt.slice(ut,bt),Jt=0;Jt<te;++Jt)if(Vt[Jt]!==ee[Jt]){Zt=Vt[Jt],Kt=ee[Jt];break}return Zt<Kt?-1:Kt<Zt?1:0},U.prototype.includes=function(tt,ut,bt){return this.indexOf(tt,ut,bt)!==-1},U.prototype.indexOf=function(tt,ut,bt){return it(this,tt,ut,bt,!0)},U.prototype.lastIndexOf=function(tt,ut,bt){return it(this,tt,ut,bt,!1)},U.prototype.write=function(tt,ut,bt,wt){if(ut===void 0)wt="utf8",bt=this.length,ut=0;else if(bt===void 0&&typeof ut=="string")wt=ut,bt=this.length,ut=0;else{if(!isFinite(ut))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ut>>>=0,isFinite(bt)?(bt>>>=0,wt===void 0&&(wt="utf8")):(wt=bt,bt=void 0)}var zt=this.length-ut;if((bt===void 0||bt>zt)&&(bt=zt),tt.length>0&&(bt<0||ut<0)||ut>this.length)throw new RangeError("Attempt to write outside buffer bounds");wt||(wt="utf8");for(var Zt=!1;;)switch(wt){case"hex":return at(this,tt,ut,bt);case"utf8":case"utf-8":return ft(this,tt,ut,bt);case"ascii":return K(this,tt,ut,bt);case"latin1":case"binary":return lt(this,tt,ut,bt);case"base64":return vt(this,tt,ut,bt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return dt(this,tt,ut,bt);default:if(Zt)throw new TypeError("Unknown encoding: "+wt);wt=(""+wt).toLowerCase(),Zt=!0}},U.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Rt=4096;function Tt(tt){var ut=tt.length;if(ut<=Rt)return String.fromCharCode.apply(String,tt);for(var bt="",wt=0;wt<ut;)bt+=String.fromCharCode.apply(String,tt.slice(wt,wt+=Rt));return bt}function xt(tt,ut,bt){var wt="";bt=Math.min(tt.length,bt);for(var zt=ut;zt<bt;++zt)wt+=String.fromCharCode(127&tt[zt]);return wt}function $t(tt,ut,bt){var wt="";bt=Math.min(tt.length,bt);for(var zt=ut;zt<bt;++zt)wt+=String.fromCharCode(tt[zt]);return wt}function Et(tt,ut,bt){var wt=tt.length;(!ut||ut<0)&&(ut=0),(!bt||bt<0||bt>wt)&&(bt=wt);for(var zt="",Zt=ut;Zt<bt;++Zt)zt+=Mt(tt[Zt]);return zt}function Pt(tt,ut,bt){for(var wt=tt.slice(ut,bt),zt="",Zt=0;Zt<wt.length;Zt+=2)zt+=String.fromCharCode(wt[Zt]+256*wt[Zt+1]);return zt}function Ot(tt,ut,bt){if(tt%1!=0||tt<0)throw new RangeError("offset is not uint");if(tt+ut>bt)throw new RangeError("Trying to access beyond buffer length")}function Ct(tt,ut,bt,wt,zt,Zt){if(!U.isBuffer(tt))throw new TypeError('"buffer" argument must be a Buffer instance');if(ut>zt||ut<Zt)throw new RangeError('"value" argument is out of bounds');if(bt+wt>tt.length)throw new RangeError("Index out of range")}function St(tt,ut,bt,wt,zt,Zt){if(bt+wt>tt.length)throw new RangeError("Index out of range");if(bt<0)throw new RangeError("Index out of range")}function It(tt,ut,bt,wt,zt){return ut=+ut,bt>>>=0,zt||St(tt,ut,bt,4),P.write(tt,ut,bt,wt,23,4),bt+4}function Ft(tt,ut,bt,wt,zt){return ut=+ut,bt>>>=0,zt||St(tt,ut,bt,8),P.write(tt,ut,bt,wt,52,8),bt+8}U.prototype.slice=function(tt,ut){var bt=this.length;(tt=~~tt)<0?(tt+=bt)<0&&(tt=0):tt>bt&&(tt=bt),(ut=ut===void 0?bt:~~ut)<0?(ut+=bt)<0&&(ut=0):ut>bt&&(ut=bt),ut<tt&&(ut=tt);var wt=this.subarray(tt,ut);return wt.__proto__=U.prototype,wt},U.prototype.readUIntLE=function(tt,ut,bt){tt>>>=0,ut>>>=0,bt||Ot(tt,ut,this.length);for(var wt=this[tt],zt=1,Zt=0;++Zt<ut&&(zt*=256);)wt+=this[tt+Zt]*zt;return wt},U.prototype.readUIntBE=function(tt,ut,bt){tt>>>=0,ut>>>=0,bt||Ot(tt,ut,this.length);for(var wt=this[tt+--ut],zt=1;ut>0&&(zt*=256);)wt+=this[tt+--ut]*zt;return wt},U.prototype.readUInt8=function(tt,ut){return tt>>>=0,ut||Ot(tt,1,this.length),this[tt]},U.prototype.readUInt16LE=function(tt,ut){return tt>>>=0,ut||Ot(tt,2,this.length),this[tt]|this[tt+1]<<8},U.prototype.readUInt16BE=function(tt,ut){return tt>>>=0,ut||Ot(tt,2,this.length),this[tt]<<8|this[tt+1]},U.prototype.readUInt32LE=function(tt,ut){return tt>>>=0,ut||Ot(tt,4,this.length),(this[tt]|this[tt+1]<<8|this[tt+2]<<16)+16777216*this[tt+3]},U.prototype.readUInt32BE=function(tt,ut){return tt>>>=0,ut||Ot(tt,4,this.length),16777216*this[tt]+(this[tt+1]<<16|this[tt+2]<<8|this[tt+3])},U.prototype.readIntLE=function(tt,ut,bt){tt>>>=0,ut>>>=0,bt||Ot(tt,ut,this.length);for(var wt=this[tt],zt=1,Zt=0;++Zt<ut&&(zt*=256);)wt+=this[tt+Zt]*zt;return wt>=(zt*=128)&&(wt-=Math.pow(2,8*ut)),wt},U.prototype.readIntBE=function(tt,ut,bt){tt>>>=0,ut>>>=0,bt||Ot(tt,ut,this.length);for(var wt=ut,zt=1,Zt=this[tt+--wt];wt>0&&(zt*=256);)Zt+=this[tt+--wt]*zt;return Zt>=(zt*=128)&&(Zt-=Math.pow(2,8*ut)),Zt},U.prototype.readInt8=function(tt,ut){return tt>>>=0,ut||Ot(tt,1,this.length),128&this[tt]?-1*(255-this[tt]+1):this[tt]},U.prototype.readInt16LE=function(tt,ut){tt>>>=0,ut||Ot(tt,2,this.length);var bt=this[tt]|this[tt+1]<<8;return 32768&bt?4294901760|bt:bt},U.prototype.readInt16BE=function(tt,ut){tt>>>=0,ut||Ot(tt,2,this.length);var bt=this[tt+1]|this[tt]<<8;return 32768&bt?4294901760|bt:bt},U.prototype.readInt32LE=function(tt,ut){return tt>>>=0,ut||Ot(tt,4,this.length),this[tt]|this[tt+1]<<8|this[tt+2]<<16|this[tt+3]<<24},U.prototype.readInt32BE=function(tt,ut){return tt>>>=0,ut||Ot(tt,4,this.length),this[tt]<<24|this[tt+1]<<16|this[tt+2]<<8|this[tt+3]},U.prototype.readFloatLE=function(tt,ut){return tt>>>=0,ut||Ot(tt,4,this.length),P.read(this,tt,!0,23,4)},U.prototype.readFloatBE=function(tt,ut){return tt>>>=0,ut||Ot(tt,4,this.length),P.read(this,tt,!1,23,4)},U.prototype.readDoubleLE=function(tt,ut){return tt>>>=0,ut||Ot(tt,8,this.length),P.read(this,tt,!0,52,8)},U.prototype.readDoubleBE=function(tt,ut){return tt>>>=0,ut||Ot(tt,8,this.length),P.read(this,tt,!1,52,8)},U.prototype.writeUIntLE=function(tt,ut,bt,wt){tt=+tt,ut>>>=0,bt>>>=0,wt||Ct(this,tt,ut,bt,Math.pow(2,8*bt)-1,0);var zt=1,Zt=0;for(this[ut]=255&tt;++Zt<bt&&(zt*=256);)this[ut+Zt]=tt/zt&255;return ut+bt},U.prototype.writeUIntBE=function(tt,ut,bt,wt){tt=+tt,ut>>>=0,bt>>>=0,wt||Ct(this,tt,ut,bt,Math.pow(2,8*bt)-1,0);var zt=bt-1,Zt=1;for(this[ut+zt]=255&tt;--zt>=0&&(Zt*=256);)this[ut+zt]=tt/Zt&255;return ut+bt},U.prototype.writeUInt8=function(tt,ut,bt){return tt=+tt,ut>>>=0,bt||Ct(this,tt,ut,1,255,0),this[ut]=255&tt,ut+1},U.prototype.writeUInt16LE=function(tt,ut,bt){return tt=+tt,ut>>>=0,bt||Ct(this,tt,ut,2,65535,0),this[ut]=255&tt,this[ut+1]=tt>>>8,ut+2},U.prototype.writeUInt16BE=function(tt,ut,bt){return tt=+tt,ut>>>=0,bt||Ct(this,tt,ut,2,65535,0),this[ut]=tt>>>8,this[ut+1]=255&tt,ut+2},U.prototype.writeUInt32LE=function(tt,ut,bt){return tt=+tt,ut>>>=0,bt||Ct(this,tt,ut,4,4294967295,0),this[ut+3]=tt>>>24,this[ut+2]=tt>>>16,this[ut+1]=tt>>>8,this[ut]=255&tt,ut+4},U.prototype.writeUInt32BE=function(tt,ut,bt){return tt=+tt,ut>>>=0,bt||Ct(this,tt,ut,4,4294967295,0),this[ut]=tt>>>24,this[ut+1]=tt>>>16,this[ut+2]=tt>>>8,this[ut+3]=255&tt,ut+4},U.prototype.writeIntLE=function(tt,ut,bt,wt){if(tt=+tt,ut>>>=0,!wt){var zt=Math.pow(2,8*bt-1);Ct(this,tt,ut,bt,zt-1,-zt)}var Zt=0,Kt=1,te=0;for(this[ut]=255&tt;++Zt<bt&&(Kt*=256);)tt<0&&te===0&&this[ut+Zt-1]!==0&&(te=1),this[ut+Zt]=(tt/Kt|0)-te&255;return ut+bt},U.prototype.writeIntBE=function(tt,ut,bt,wt){if(tt=+tt,ut>>>=0,!wt){var zt=Math.pow(2,8*bt-1);Ct(this,tt,ut,bt,zt-1,-zt)}var Zt=bt-1,Kt=1,te=0;for(this[ut+Zt]=255&tt;--Zt>=0&&(Kt*=256);)tt<0&&te===0&&this[ut+Zt+1]!==0&&(te=1),this[ut+Zt]=(tt/Kt|0)-te&255;return ut+bt},U.prototype.writeInt8=function(tt,ut,bt){return tt=+tt,ut>>>=0,bt||Ct(this,tt,ut,1,127,-128),tt<0&&(tt=255+tt+1),this[ut]=255&tt,ut+1},U.prototype.writeInt16LE=function(tt,ut,bt){return tt=+tt,ut>>>=0,bt||Ct(this,tt,ut,2,32767,-32768),this[ut]=255&tt,this[ut+1]=tt>>>8,ut+2},U.prototype.writeInt16BE=function(tt,ut,bt){return tt=+tt,ut>>>=0,bt||Ct(this,tt,ut,2,32767,-32768),this[ut]=tt>>>8,this[ut+1]=255&tt,ut+2},U.prototype.writeInt32LE=function(tt,ut,bt){return tt=+tt,ut>>>=0,bt||Ct(this,tt,ut,4,2147483647,-2147483648),this[ut]=255&tt,this[ut+1]=tt>>>8,this[ut+2]=tt>>>16,this[ut+3]=tt>>>24,ut+4},U.prototype.writeInt32BE=function(tt,ut,bt){return tt=+tt,ut>>>=0,bt||Ct(this,tt,ut,4,2147483647,-2147483648),tt<0&&(tt=4294967295+tt+1),this[ut]=tt>>>24,this[ut+1]=tt>>>16,this[ut+2]=tt>>>8,this[ut+3]=255&tt,ut+4},U.prototype.writeFloatLE=function(tt,ut,bt){return It(this,tt,ut,!0,bt)},U.prototype.writeFloatBE=function(tt,ut,bt){return It(this,tt,ut,!1,bt)},U.prototype.writeDoubleLE=function(tt,ut,bt){return Ft(this,tt,ut,!0,bt)},U.prototype.writeDoubleBE=function(tt,ut,bt){return Ft(this,tt,ut,!1,bt)},U.prototype.copy=function(tt,ut,bt,wt){if(!U.isBuffer(tt))throw new TypeError("argument should be a Buffer");if(bt||(bt=0),wt||wt===0||(wt=this.length),ut>=tt.length&&(ut=tt.length),ut||(ut=0),wt>0&&wt<bt&&(wt=bt),wt===bt||tt.length===0||this.length===0)return 0;if(ut<0)throw new RangeError("targetStart out of bounds");if(bt<0||bt>=this.length)throw new RangeError("Index out of range");if(wt<0)throw new RangeError("sourceEnd out of bounds");wt>this.length&&(wt=this.length),tt.length-ut<wt-bt&&(wt=tt.length-ut+bt);var zt=wt-bt;if(this===tt&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ut,bt,wt);else if(this===tt&&bt<ut&&ut<wt)for(var Zt=zt-1;Zt>=0;--Zt)tt[Zt+ut]=this[Zt+bt];else Uint8Array.prototype.set.call(tt,this.subarray(bt,wt),ut);return zt},U.prototype.fill=function(tt,ut,bt,wt){if(typeof tt=="string"){if(typeof ut=="string"?(wt=ut,ut=0,bt=this.length):typeof bt=="string"&&(wt=bt,bt=this.length),wt!==void 0&&typeof wt!="string")throw new TypeError("encoding must be a string");if(typeof wt=="string"&&!U.isEncoding(wt))throw new TypeError("Unknown encoding: "+wt);if(tt.length===1){var zt=tt.charCodeAt(0);(wt==="utf8"&&zt<128||wt==="latin1")&&(tt=zt)}}else typeof tt=="number"&&(tt&=255);if(ut<0||this.length<ut||this.length<bt)throw new RangeError("Out of range index");if(bt<=ut)return this;var Zt;if(ut>>>=0,bt=bt===void 0?this.length:bt>>>0,tt||(tt=0),typeof tt=="number")for(Zt=ut;Zt<bt;++Zt)this[Zt]=tt;else{var Kt=U.isBuffer(tt)?tt:U.from(tt,wt),te=Kt.length;if(te===0)throw new TypeError('The value "'+tt+'" is invalid for argument "value"');for(Zt=0;Zt<bt-ut;++Zt)this[Zt+ut]=Kt[Zt%te]}return this};var Ut=/[^+/0-9A-Za-z-_]/g;function jt(tt){if((tt=(tt=tt.split("=")[0]).trim().replace(Ut,"")).length<2)return"";for(;tt.length%4!=0;)tt+="=";return tt}function Mt(tt){return tt<16?"0"+tt.toString(16):tt.toString(16)}function nt(tt,ut){var bt;ut=ut||1/0;for(var wt=tt.length,zt=null,Zt=[],Kt=0;Kt<wt;++Kt){if((bt=tt.charCodeAt(Kt))>55295&&bt<57344){if(!zt){if(bt>56319){(ut-=3)>-1&&Zt.push(239,191,189);continue}if(Kt+1===wt){(ut-=3)>-1&&Zt.push(239,191,189);continue}zt=bt;continue}if(bt<56320){(ut-=3)>-1&&Zt.push(239,191,189),zt=bt;continue}bt=65536+(zt-55296<<10|bt-56320)}else zt&&(ut-=3)>-1&&Zt.push(239,191,189);if(zt=null,bt<128){if((ut-=1)<0)break;Zt.push(bt)}else if(bt<2048){if((ut-=2)<0)break;Zt.push(bt>>6|192,63&bt|128)}else if(bt<65536){if((ut-=3)<0)break;Zt.push(bt>>12|224,bt>>6&63|128,63&bt|128)}else{if(!(bt<1114112))throw new Error("Invalid code point");if((ut-=4)<0)break;Zt.push(bt>>18|240,bt>>12&63|128,bt>>6&63|128,63&bt|128)}}return Zt}function At(tt){for(var ut=[],bt=0;bt<tt.length;++bt)ut.push(255&tt.charCodeAt(bt));return ut}function mt(tt,ut){for(var bt,wt,zt,Zt=[],Kt=0;Kt<tt.length&&!((ut-=2)<0);++Kt)wt=(bt=tt.charCodeAt(Kt))>>8,zt=bt%256,Zt.push(zt),Zt.push(wt);return Zt}function gt(tt){return I.toByteArray(jt(tt))}function _t(tt,ut,bt,wt){for(var zt=0;zt<wt&&!(zt+bt>=ut.length||zt>=tt.length);++zt)ut[zt+bt]=tt[zt];return zt}function yt(tt,ut){return tt instanceof ut||tt!=null&&tt.constructor!=null&&tt.constructor.name!=null&&tt.constructor.name===ut.name}function Bt(tt){return tt!=tt}}).call(this)}).call(this,d("buffer").Buffer)},{"base64-js":28,buffer:32,ieee754:45}],33:[function(d,m,g){var w=d("get-intrinsic"),I=d("./"),P=I(w("String.prototype.indexOf"));m.exports=function($,F){var D=w($,!!F);return typeof D=="function"&&P($,".prototype.")>-1?I(D):D}},{"./":34,"get-intrinsic":39}],34:[function(d,m,g){var w=d("function-bind"),I=d("get-intrinsic"),P=I("%Function.prototype.apply%"),$=I("%Function.prototype.call%"),F=I("%Reflect.apply%",!0)||w.call($,P),D=I("%Object.getOwnPropertyDescriptor%",!0),U=I("%Object.defineProperty%",!0),j=I("%Math.max%");if(U)try{U({},"a",{value:1})}catch{U=null}m.exports=function(G){var H=F(w,$,arguments);return D&&U&&D(H,"length").configurable&&U(H,"length",{value:1+j(0,G.length-(arguments.length-1))}),H};var Z=function(){return F(w,P,arguments)};U?U(m.exports,"apply",{value:Z}):m.exports.apply=Z},{"function-bind":38,"get-intrinsic":39}],35:[function(d,m,g){var w,I=typeof Reflect=="object"?Reflect:null,P=I&&typeof I.apply=="function"?I.apply:function(it,st,at){return Function.prototype.apply.call(it,st,at)};function $(it){console&&console.warn&&console.warn(it)}w=I&&typeof I.ownKeys=="function"?I.ownKeys:Object.getOwnPropertySymbols?function(it){return Object.getOwnPropertyNames(it).concat(Object.getOwnPropertySymbols(it))}:function(it){return Object.getOwnPropertyNames(it)};var F=Number.isNaN||function(it){return it!=it};function D(){D.init.call(this)}m.exports=D,m.exports.once=rt,D.EventEmitter=D,D.prototype._events=void 0,D.prototype._eventsCount=0,D.prototype._maxListeners=void 0;var U=10;function j(it){if(typeof it!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof it)}function Z(it){return it._maxListeners===void 0?D.defaultMaxListeners:it._maxListeners}function G(it,st,at,ft){var K,lt,vt;if(j(at),(lt=it._events)===void 0?(lt=it._events=Object.create(null),it._eventsCount=0):(lt.newListener!==void 0&&(it.emit("newListener",st,at.listener?at.listener:at),lt=it._events),vt=lt[st]),vt===void 0)vt=lt[st]=at,++it._eventsCount;else if(typeof vt=="function"?vt=lt[st]=ft?[at,vt]:[vt,at]:ft?vt.unshift(at):vt.push(at),(K=Z(it))>0&&vt.length>K&&!vt.warned){vt.warned=!0;var dt=new Error("Possible EventEmitter memory leak detected. "+vt.length+" "+String(st)+" listeners added. Use emitter.setMaxListeners() to increase limit");dt.name="MaxListenersExceededWarning",dt.emitter=it,dt.type=st,dt.count=vt.length,$(dt)}return it}function H(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function W(it,st,at){var ft={fired:!1,wrapFn:void 0,target:it,type:st,listener:at},K=H.bind(ft);return K.listener=at,ft.wrapFn=K,K}function q(it,st,at){var ft=it._events;if(ft===void 0)return[];var K=ft[st];return K===void 0?[]:typeof K=="function"?at?[K.listener||K]:[K]:at?V(K):et(K,K.length)}function Q(it){var st=this._events;if(st!==void 0){var at=st[it];if(typeof at=="function")return 1;if(at!==void 0)return at.length}return 0}function et(it,st){for(var at=new Array(st),ft=0;ft<st;++ft)at[ft]=it[ft];return at}function J(it,st){for(;st+1<it.length;st++)it[st]=it[st+1];it.pop()}function V(it){for(var st=new Array(it.length),at=0;at<st.length;++at)st[at]=it[at].listener||it[at];return st}function rt(it,st){return new Promise(function(at,ft){function K(vt){it.removeListener(st,lt),ft(vt)}function lt(){typeof it.removeListener=="function"&&it.removeListener("error",K),at([].slice.call(arguments))}ot(it,st,lt,{once:!0}),st!=="error"&&X(it,K,{once:!0})})}function X(it,st,at){typeof it.on=="function"&&ot(it,"error",st,at)}function ot(it,st,at,ft){if(typeof it.on=="function")ft.once?it.once(st,at):it.on(st,at);else{if(typeof it.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof it);it.addEventListener(st,function K(lt){ft.once&&it.removeEventListener(st,K),at(lt)})}}Object.defineProperty(D,"defaultMaxListeners",{enumerable:!0,get:function(){return U},set:function(it){if(typeof it!="number"||it<0||F(it))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+it+".");U=it}}),D.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},D.prototype.setMaxListeners=function(it){if(typeof it!="number"||it<0||F(it))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+it+".");return this._maxListeners=it,this},D.prototype.getMaxListeners=function(){return Z(this)},D.prototype.emit=function(it){for(var st=[],at=1;at<arguments.length;at++)st.push(arguments[at]);var ft=it==="error",K=this._events;if(K!==void 0)ft=ft&&K.error===void 0;else if(!ft)return!1;if(ft){var lt;if(st.length>0&&(lt=st[0]),lt instanceof Error)throw lt;var vt=new Error("Unhandled error."+(lt?" ("+lt.message+")":""));throw vt.context=lt,vt}var dt=K[it];if(dt===void 0)return!1;if(typeof dt=="function")P(dt,this,st);else{var ht=dt.length,pt=et(dt,ht);for(at=0;at<ht;++at)P(pt[at],this,st)}return!0},D.prototype.addListener=function(it,st){return G(this,it,st,!1)},D.prototype.on=D.prototype.addListener,D.prototype.prependListener=function(it,st){return G(this,it,st,!0)},D.prototype.once=function(it,st){return j(st),this.on(it,W(this,it,st)),this},D.prototype.prependOnceListener=function(it,st){return j(st),this.prependListener(it,W(this,it,st)),this},D.prototype.removeListener=function(it,st){var at,ft,K,lt,vt;if(j(st),(ft=this._events)===void 0)return this;if((at=ft[it])===void 0)return this;if(at===st||at.listener===st)--this._eventsCount==0?this._events=Object.create(null):(delete ft[it],ft.removeListener&&this.emit("removeListener",it,at.listener||st));else if(typeof at!="function"){for(K=-1,lt=at.length-1;lt>=0;lt--)if(at[lt]===st||at[lt].listener===st){vt=at[lt].listener,K=lt;break}if(K<0)return this;K===0?at.shift():J(at,K),at.length===1&&(ft[it]=at[0]),ft.removeListener!==void 0&&this.emit("removeListener",it,vt||st)}return this},D.prototype.off=D.prototype.removeListener,D.prototype.removeAllListeners=function(it){var st,at,ft;if((at=this._events)===void 0)return this;if(at.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):at[it]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete at[it]),this;if(arguments.length===0){var K,lt=Object.keys(at);for(ft=0;ft<lt.length;++ft)(K=lt[ft])!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(st=at[it])=="function")this.removeListener(it,st);else if(st!==void 0)for(ft=st.length-1;ft>=0;ft--)this.removeListener(it,st[ft]);return this},D.prototype.listeners=function(it){return q(this,it,!0)},D.prototype.rawListeners=function(it){return q(this,it,!1)},D.listenerCount=function(it,st){return typeof it.listenerCount=="function"?it.listenerCount(st):Q.call(it,st)},D.prototype.listenerCount=Q,D.prototype.eventNames=function(){return this._eventsCount>0?w(this._events):[]}},{}],36:[function(d,m,g){var w=d("is-callable"),I=Object.prototype.toString,P=Object.prototype.hasOwnProperty,$=function(j,Z,G){for(var H=0,W=j.length;H<W;H++)P.call(j,H)&&(G==null?Z(j[H],H,j):Z.call(G,j[H],H,j))},F=function(j,Z,G){for(var H=0,W=j.length;H<W;H++)G==null?Z(j.charAt(H),H,j):Z.call(G,j.charAt(H),H,j)},D=function(j,Z,G){for(var H in j)P.call(j,H)&&(G==null?Z(j[H],H,j):Z.call(G,j[H],H,j))},U=function(j,Z,G){if(!w(Z))throw new TypeError("iterator must be a function");var H;arguments.length>=3&&(H=G),I.call(j)==="[object Array]"?$(j,Z,H):typeof j=="string"?F(j,Z,H):D(j,Z,H)};m.exports=U},{"is-callable":48}],37:[function(d,m,g){var w="Function.prototype.bind called on incompatible ",I=Array.prototype.slice,P=Object.prototype.toString,$="[object Function]";m.exports=function(F){var D=this;if(typeof D!="function"||P.call(D)!==$)throw new TypeError(w+D);for(var U,j=I.call(arguments,1),Z=function(){if(this instanceof U){var Q=D.apply(this,j.concat(I.call(arguments)));return Object(Q)===Q?Q:this}return D.apply(F,j.concat(I.call(arguments)))},G=Math.max(0,D.length-j.length),H=[],W=0;W<G;W++)H.push("$"+W);if(U=Function("binder","return function ("+H.join(",")+"){ return binder.apply(this,arguments); }")(Z),D.prototype){var q=function(){};q.prototype=D.prototype,U.prototype=new q,q.prototype=null}return U}},{}],38:[function(d,m,g){var w=d("./implementation");m.exports=Function.prototype.bind||w},{"./implementation":37}],39:[function(d,m,g){var w,I=SyntaxError,P=Function,$=TypeError,F=function(dt){try{return P('"use strict"; return ('+dt+").constructor;")()}catch{}},D=Object.getOwnPropertyDescriptor;if(D)try{D({},"")}catch{D=null}var U=function(){throw new $},j=D?function(){try{return U}catch{try{return D(arguments,"callee").get}catch{return U}}}():U,Z=d("has-symbols")(),G=Object.getPrototypeOf||function(dt){return dt.__proto__},H={},W=typeof Uint8Array>"u"?w:G(Uint8Array),q={"%AggregateError%":typeof AggregateError>"u"?w:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?w:ArrayBuffer,"%ArrayIteratorPrototype%":Z?G([][Symbol.iterator]()):w,"%AsyncFromSyncIteratorPrototype%":w,"%AsyncFunction%":H,"%AsyncGenerator%":H,"%AsyncGeneratorFunction%":H,"%AsyncIteratorPrototype%":H,"%Atomics%":typeof Atomics>"u"?w:Atomics,"%BigInt%":typeof BigInt>"u"?w:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?w:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?w:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?w:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?w:Float32Array,"%Float64Array%":typeof Float64Array>"u"?w:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?w:FinalizationRegistry,"%Function%":P,"%GeneratorFunction%":H,"%Int8Array%":typeof Int8Array>"u"?w:Int8Array,"%Int16Array%":typeof Int16Array>"u"?w:Int16Array,"%Int32Array%":typeof Int32Array>"u"?w:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Z?G(G([][Symbol.iterator]())):w,"%JSON%":typeof JSON=="object"?JSON:w,"%Map%":typeof Map>"u"?w:Map,"%MapIteratorPrototype%":typeof Map<"u"&&Z?G(new Map()[Symbol.iterator]()):w,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?w:Promise,"%Proxy%":typeof Proxy>"u"?w:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?w:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?w:Set,"%SetIteratorPrototype%":typeof Set<"u"&&Z?G(new Set()[Symbol.iterator]()):w,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?w:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Z?G(""[Symbol.iterator]()):w,"%Symbol%":Z?Symbol:w,"%SyntaxError%":I,"%ThrowTypeError%":j,"%TypedArray%":W,"%TypeError%":$,"%Uint8Array%":typeof Uint8Array>"u"?w:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?w:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?w:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?w:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?w:WeakMap,"%WeakRef%":typeof WeakRef>"u"?w:WeakRef,"%WeakSet%":typeof WeakSet>"u"?w:WeakSet};try{null.error}catch(dt){var Q=G(G(dt));q["%Error.prototype%"]=Q}var et=function dt(ht){var pt;if(ht==="%AsyncFunction%")pt=F("async function () {}");else if(ht==="%GeneratorFunction%")pt=F("function* () {}");else if(ht==="%AsyncGeneratorFunction%")pt=F("async function* () {}");else if(ht==="%AsyncGenerator%"){var Rt=dt("%AsyncGeneratorFunction%");Rt&&(pt=Rt.prototype)}else if(ht==="%AsyncIteratorPrototype%"){var Tt=dt("%AsyncGenerator%");Tt&&(pt=G(Tt.prototype))}return q[ht]=pt,pt},J={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},V=d("function-bind"),rt=d("has"),X=V.call(Function.call,Array.prototype.concat),ot=V.call(Function.apply,Array.prototype.splice),it=V.call(Function.call,String.prototype.replace),st=V.call(Function.call,String.prototype.slice),at=V.call(Function.call,RegExp.prototype.exec),ft=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,K=/\\(\\)?/g,lt=function(dt){var ht=st(dt,0,1),pt=st(dt,-1);if(ht==="%"&&pt!=="%")throw new I("invalid intrinsic syntax, expected closing `%`");if(pt==="%"&&ht!=="%")throw new I("invalid intrinsic syntax, expected opening `%`");var Rt=[];return it(dt,ft,function(Tt,xt,$t,Et){Rt[Rt.length]=$t?it(Et,K,"$1"):xt||Tt}),Rt},vt=function(dt,ht){var pt,Rt=dt;if(rt(J,Rt)&&(Rt="%"+(pt=J[Rt])[0]+"%"),rt(q,Rt)){var Tt=q[Rt];if(Tt===H&&(Tt=et(Rt)),Tt===void 0&&!ht)throw new $("intrinsic "+dt+" exists, but is not available. Please file an issue!");return{alias:pt,name:Rt,value:Tt}}throw new I("intrinsic "+dt+" does not exist!")};m.exports=function(dt,ht){if(typeof dt!="string"||dt.length===0)throw new $("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ht!="boolean")throw new $('"allowMissing" argument must be a boolean');if(at(/^%?[^%]*%?$/,dt)===null)throw new I("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var pt=lt(dt),Rt=pt.length>0?pt[0]:"",Tt=vt("%"+Rt+"%",ht),xt=Tt.name,$t=Tt.value,Et=!1,Pt=Tt.alias;Pt&&(Rt=Pt[0],ot(pt,X([0,1],Pt)));for(var Ot=1,Ct=!0;Ot<pt.length;Ot+=1){var St=pt[Ot],It=st(St,0,1),Ft=st(St,-1);if((It==='"'||It==="'"||It==="`"||Ft==='"'||Ft==="'"||Ft==="`")&&It!==Ft)throw new I("property names with quotes must have matching quotes");if(St!=="constructor"&&Ct||(Et=!0),rt(q,xt="%"+(Rt+="."+St)+"%"))$t=q[xt];else if($t!=null){if(!(St in $t)){if(!ht)throw new $("base intrinsic for "+dt+" exists, but the property is not available.");return}if(D&&Ot+1>=pt.length){var Ut=D($t,St);$t=(Ct=!!Ut)&&"get"in Ut&&!("originalValue"in Ut.get)?Ut.get:$t[St]}else Ct=rt($t,St),$t=$t[St];Ct&&!Et&&(q[xt]=$t)}}return $t}},{"function-bind":38,has:44,"has-symbols":41}],40:[function(d,m,g){var w=d("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(w)try{w([],"length")}catch{w=null}m.exports=w},{"get-intrinsic":39}],41:[function(d,m,g){var w=typeof Symbol<"u"&&Symbol,I=d("./shams");m.exports=function(){return typeof w=="function"&&typeof Symbol=="function"&&typeof w("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&I()}},{"./shams":42}],42:[function(d,m,g){m.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var w={},I=Symbol("test"),P=Object(I);if(typeof I=="string"||Object.prototype.toString.call(I)!=="[object Symbol]"||Object.prototype.toString.call(P)!=="[object Symbol]")return!1;var $=42;for(I in w[I]=$,w)return!1;if(typeof Object.keys=="function"&&Object.keys(w).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(w).length!==0)return!1;var F=Object.getOwnPropertySymbols(w);if(F.length!==1||F[0]!==I||!Object.prototype.propertyIsEnumerable.call(w,I))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var D=Object.getOwnPropertyDescriptor(w,I);if(D.value!==$||D.enumerable!==!0)return!1}return!0}},{}],43:[function(d,m,g){var w=d("has-symbols/shams");m.exports=function(){return w()&&!!Symbol.toStringTag}},{"has-symbols/shams":42}],44:[function(d,m,g){var w=d("function-bind");m.exports=w.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":38}],45:[function(d,m,g){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */g.read=function(w,I,P,$,F){var D,U,j=8*F-$-1,Z=(1<<j)-1,G=Z>>1,H=-7,W=P?F-1:0,q=P?-1:1,Q=w[I+W];for(W+=q,D=Q&(1<<-H)-1,Q>>=-H,H+=j;H>0;D=256*D+w[I+W],W+=q,H-=8);for(U=D&(1<<-H)-1,D>>=-H,H+=$;H>0;U=256*U+w[I+W],W+=q,H-=8);if(D===0)D=1-G;else{if(D===Z)return U?NaN:1/0*(Q?-1:1);U+=Math.pow(2,$),D-=G}return(Q?-1:1)*U*Math.pow(2,D-$)},g.write=function(w,I,P,$,F,D){var U,j,Z,G=8*D-F-1,H=(1<<G)-1,W=H>>1,q=F===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=$?0:D-1,et=$?1:-1,J=I<0||I===0&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(j=isNaN(I)?1:0,U=H):(U=Math.floor(Math.log(I)/Math.LN2),I*(Z=Math.pow(2,-U))<1&&(U--,Z*=2),(I+=U+W>=1?q/Z:q*Math.pow(2,1-W))*Z>=2&&(U++,Z/=2),U+W>=H?(j=0,U=H):U+W>=1?(j=(I*Z-1)*Math.pow(2,F),U+=W):(j=I*Math.pow(2,W-1)*Math.pow(2,F),U=0));F>=8;w[P+Q]=255&j,Q+=et,j/=256,F-=8);for(U=U<<F|j,G+=F;G>0;w[P+Q]=255&U,Q+=et,U/=256,G-=8);w[P+Q-et]|=128*J}},{}],46:[function(d,m,g){typeof Object.create=="function"?m.exports=function(w,I){I&&(w.super_=I,w.prototype=Object.create(I.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}))}:m.exports=function(w,I){if(I){w.super_=I;var P=function(){};P.prototype=I.prototype,w.prototype=new P,w.prototype.constructor=w}}},{}],47:[function(d,m,g){var w=d("has-tostringtag/shams")(),I=d("call-bind/callBound")("Object.prototype.toString"),P=function(D){return!(w&&D&&typeof D=="object"&&Symbol.toStringTag in D)&&I(D)==="[object Arguments]"},$=function(D){return!!P(D)||D!==null&&typeof D=="object"&&typeof D.length=="number"&&D.length>=0&&I(D)!=="[object Array]"&&I(D.callee)==="[object Function]"},F=function(){return P(arguments)}();P.isLegacyArguments=$,m.exports=F?P:$},{"call-bind/callBound":33,"has-tostringtag/shams":43}],48:[function(d,m,g){var w,I,P=Function.prototype.toString,$=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof $=="function"&&typeof Object.defineProperty=="function")try{w=Object.defineProperty({},"length",{get:function(){throw I}}),I={},$(function(){throw 42},null,w)}catch(X){X!==I&&($=null)}else $=null;var F=/^\s*class\b/,D=function(X){try{var ot=P.call(X);return F.test(ot)}catch{return!1}},U=function(X){try{return!D(X)&&(P.call(X),!0)}catch{return!1}},j=Object.prototype.toString,Z="[object Object]",G="[object Function]",H="[object GeneratorFunction]",W="[object HTMLAllCollection]",q="[object HTML document.all class]",Q="[object HTMLCollection]",et=typeof Symbol=="function"&&!!Symbol.toStringTag,J=!(0 in[,]),V=function(){return!1};if(typeof document=="object"){var rt=document.all;j.call(rt)===j.call(document.all)&&(V=function(X){if((J||!X)&&(X===void 0||typeof X=="object"))try{var ot=j.call(X);return(ot===W||ot===q||ot===Q||ot===Z)&&X("")==null}catch{}return!1})}m.exports=$?function(X){if(V(X))return!0;if(!X||typeof X!="function"&&typeof X!="object")return!1;try{$(X,null,w)}catch(ot){if(ot!==I)return!1}return!D(X)&&U(X)}:function(X){if(V(X))return!0;if(!X||typeof X!="function"&&typeof X!="object")return!1;if(et)return U(X);if(D(X))return!1;var ot=j.call(X);return!(ot!==G&&ot!==H&&!/^\[object HTML/.test(ot))&&U(X)}},{}],49:[function(d,m,g){var w,I=Object.prototype.toString,P=Function.prototype.toString,$=/^\s*(?:function)?\*/,F=d("has-tostringtag/shams")(),D=Object.getPrototypeOf,U=function(){if(!F)return!1;try{return Function("return function*() {}")()}catch{}};m.exports=function(j){if(typeof j!="function")return!1;if($.test(P.call(j)))return!0;if(!F)return I.call(j)==="[object GeneratorFunction]";if(!D)return!1;if(w===void 0){var Z=U();w=!!Z&&D(Z)}return D(j)===w}},{"has-tostringtag/shams":43}],50:[function(d,m,g){(function(w){(function(){var I=d("for-each"),P=d("available-typed-arrays"),$=d("call-bind/callBound"),F=$("Object.prototype.toString"),D=d("has-tostringtag/shams")(),U=d("gopd"),j=typeof globalThis>"u"?w:globalThis,Z=P(),G=$("Array.prototype.indexOf",!0)||function(et,J){for(var V=0;V<et.length;V+=1)if(et[V]===J)return V;return-1},H=$("String.prototype.slice"),W={},q=Object.getPrototypeOf;D&&U&&q&&I(Z,function(et){var J=new j[et];if(Symbol.toStringTag in J){var V=q(J),rt=U(V,Symbol.toStringTag);if(!rt){var X=q(V);rt=U(X,Symbol.toStringTag)}W[et]=rt.get}});var Q=function(et){var J=!1;return I(W,function(V,rt){if(!J)try{J=V.call(et)===rt}catch{}}),J};m.exports=function(et){if(!et||typeof et!="object")return!1;if(!D||!(Symbol.toStringTag in et)){var J=H(F(et),8,-1);return G(Z,J)>-1}return!!U&&Q(et)}}).call(this)}).call(this,commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":27,"call-bind/callBound":33,"for-each":36,gopd:40,"has-tostringtag/shams":43}],51:[function(d,m,g){var w=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;function $(D){if(D==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(D)}function F(){try{if(!Object.assign)return!1;var D=new String("abc");if(D[5]="de",Object.getOwnPropertyNames(D)[0]==="5")return!1;for(var U={},j=0;j<10;j++)U["_"+String.fromCharCode(j)]=j;var Z=Object.getOwnPropertyNames(U).map(function(H){return U[H]});if(Z.join("")!=="0123456789")return!1;var G={};return"abcdefghijklmnopqrst".split("").forEach(function(H){G[H]=H}),Object.keys(Object.assign({},G)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}m.exports=F()?Object.assign:function(D,U){for(var j,Z,G=$(D),H=1;H<arguments.length;H++){for(var W in j=Object(arguments[H]))I.call(j,W)&&(G[W]=j[W]);if(w){Z=w(j);for(var q=0;q<Z.length;q++)P.call(j,Z[q])&&(G[Z[q]]=j[Z[q]])}}return G}},{}],52:[function(d,m,g){var w=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function I(F,D){return Object.prototype.hasOwnProperty.call(F,D)}g.assign=function(F){for(var D=Array.prototype.slice.call(arguments,1);D.length;){var U=D.shift();if(U){if(typeof U!="object")throw new TypeError(U+"must be non-object");for(var j in U)I(U,j)&&(F[j]=U[j])}}return F},g.shrinkBuf=function(F,D){return F.length===D?F:F.subarray?F.subarray(0,D):(F.length=D,F)};var P={arraySet:function(F,D,U,j,Z){if(D.subarray&&F.subarray)F.set(D.subarray(U,U+j),Z);else for(var G=0;G<j;G++)F[Z+G]=D[U+G]},flattenChunks:function(F){var D,U,j,Z,G,H;for(j=0,D=0,U=F.length;D<U;D++)j+=F[D].length;for(H=new Uint8Array(j),Z=0,D=0,U=F.length;D<U;D++)G=F[D],H.set(G,Z),Z+=G.length;return H}},$={arraySet:function(F,D,U,j,Z){for(var G=0;G<j;G++)F[Z+G]=D[U+G]},flattenChunks:function(F){return[].concat.apply([],F)}};g.setTyped=function(F){F?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,P)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,$))},g.setTyped(w)},{}],53:[function(d,m,g){function w(I,P,$,F){for(var D=65535&I,U=I>>>16&65535,j=0;$!==0;){$-=j=$>2e3?2e3:$;do U=U+(D=D+P[F++]|0)|0;while(--j);D%=65521,U%=65521}return D|U<<16}m.exports=w},{}],54:[function(d,m,g){m.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],55:[function(d,m,g){function w(){for(var $,F=[],D=0;D<256;D++){$=D;for(var U=0;U<8;U++)$=1&$?3988292384^$>>>1:$>>>1;F[D]=$}return F}var I=w();function P($,F,D,U){var j=I,Z=U+D;$^=-1;for(var G=U;G<Z;G++)$=$>>>8^j[255&($^F[G])];return~$}m.exports=P},{}],56:[function(d,m,g){var w,I=d("../utils/common"),P=d("./trees"),$=d("./adler32"),F=d("./crc32"),D=d("./messages"),U=0,j=1,Z=3,G=4,H=5,W=0,q=1,Q=-2,et=-3,J=-5,V=-1,rt=1,X=2,ot=3,it=4,st=0,at=2,ft=8,K=9,lt=15,vt=8,dt=286,ht=30,pt=19,Rt=2*dt+1,Tt=15,xt=3,$t=258,Et=$t+xt+1,Pt=32,Ot=42,Ct=69,St=73,It=91,Ft=103,Ut=113,jt=666,Mt=1,nt=2,At=3,mt=4,gt=3;function _t(ct,Qt){return ct.msg=D[Qt],Qt}function yt(ct){return(ct<<1)-(ct>4?9:0)}function Bt(ct){for(var Qt=ct.length;--Qt>=0;)ct[Qt]=0}function tt(ct){var Qt=ct.state,Gt=Qt.pending;Gt>ct.avail_out&&(Gt=ct.avail_out),Gt!==0&&(I.arraySet(ct.output,Qt.pending_buf,Qt.pending_out,Gt,ct.next_out),ct.next_out+=Gt,Qt.pending_out+=Gt,ct.total_out+=Gt,ct.avail_out-=Gt,Qt.pending-=Gt,Qt.pending===0&&(Qt.pending_out=0))}function ut(ct,Qt){P._tr_flush_block(ct,ct.block_start>=0?ct.block_start:-1,ct.strstart-ct.block_start,Qt),ct.block_start=ct.strstart,tt(ct.strm)}function bt(ct,Qt){ct.pending_buf[ct.pending++]=Qt}function wt(ct,Qt){ct.pending_buf[ct.pending++]=Qt>>>8&255,ct.pending_buf[ct.pending++]=255&Qt}function zt(ct,Qt,Gt,Dt){var Ht=ct.avail_in;return Ht>Dt&&(Ht=Dt),Ht===0?0:(ct.avail_in-=Ht,I.arraySet(Qt,ct.input,ct.next_in,Ht,Gt),ct.state.wrap===1?ct.adler=$(ct.adler,Qt,Ht,Gt):ct.state.wrap===2&&(ct.adler=F(ct.adler,Qt,Ht,Gt)),ct.next_in+=Ht,ct.total_in+=Ht,Ht)}function Zt(ct,Qt){var Gt,Dt,Ht=ct.max_chain_length,Wt=ct.strstart,le=ct.prev_length,re=ct.nice_match,se=ct.strstart>ct.w_size-Et?ct.strstart-(ct.w_size-Et):0,he=ct.window,xe=ct.w_mask,de=ct.prev,pe=ct.strstart+$t,ge=he[Wt+le-1],be=he[Wt+le];ct.prev_length>=ct.good_match&&(Ht>>=2),re>ct.lookahead&&(re=ct.lookahead);do if(he[(Gt=Qt)+le]===be&&he[Gt+le-1]===ge&&he[Gt]===he[Wt]&&he[++Gt]===he[Wt+1]){Wt+=2,Gt++;do;while(he[++Wt]===he[++Gt]&&he[++Wt]===he[++Gt]&&he[++Wt]===he[++Gt]&&he[++Wt]===he[++Gt]&&he[++Wt]===he[++Gt]&&he[++Wt]===he[++Gt]&&he[++Wt]===he[++Gt]&&he[++Wt]===he[++Gt]&&Wt<pe);if(Dt=$t-(pe-Wt),Wt=pe-$t,Dt>le){if(ct.match_start=Qt,le=Dt,Dt>=re)break;ge=he[Wt+le-1],be=he[Wt+le]}}while((Qt=de[Qt&xe])>se&&--Ht!=0);return le<=ct.lookahead?le:ct.lookahead}function Kt(ct){var Qt,Gt,Dt,Ht,Wt,le=ct.w_size;do{if(Ht=ct.window_size-ct.lookahead-ct.strstart,ct.strstart>=le+(le-Et)){I.arraySet(ct.window,ct.window,le,le,0),ct.match_start-=le,ct.strstart-=le,ct.block_start-=le,Qt=Gt=ct.hash_size;do Dt=ct.head[--Qt],ct.head[Qt]=Dt>=le?Dt-le:0;while(--Gt);Qt=Gt=le;do Dt=ct.prev[--Qt],ct.prev[Qt]=Dt>=le?Dt-le:0;while(--Gt);Ht+=le}if(ct.strm.avail_in===0)break;if(Gt=zt(ct.strm,ct.window,ct.strstart+ct.lookahead,Ht),ct.lookahead+=Gt,ct.lookahead+ct.insert>=xt)for(Wt=ct.strstart-ct.insert,ct.ins_h=ct.window[Wt],ct.ins_h=(ct.ins_h<<ct.hash_shift^ct.window[Wt+1])&ct.hash_mask;ct.insert&&(ct.ins_h=(ct.ins_h<<ct.hash_shift^ct.window[Wt+xt-1])&ct.hash_mask,ct.prev[Wt&ct.w_mask]=ct.head[ct.ins_h],ct.head[ct.ins_h]=Wt,Wt++,ct.insert--,!(ct.lookahead+ct.insert<xt)););}while(ct.lookahead<Et&&ct.strm.avail_in!==0)}function te(ct,Qt){var Gt=65535;for(Gt>ct.pending_buf_size-5&&(Gt=ct.pending_buf_size-5);;){if(ct.lookahead<=1){if(Kt(ct),ct.lookahead===0&&Qt===U)return Mt;if(ct.lookahead===0)break}ct.strstart+=ct.lookahead,ct.lookahead=0;var Dt=ct.block_start+Gt;if((ct.strstart===0||ct.strstart>=Dt)&&(ct.lookahead=ct.strstart-Dt,ct.strstart=Dt,ut(ct,!1),ct.strm.avail_out===0)||ct.strstart-ct.block_start>=ct.w_size-Et&&(ut(ct,!1),ct.strm.avail_out===0))return Mt}return ct.insert=0,Qt===G?(ut(ct,!0),ct.strm.avail_out===0?At:mt):(ct.strstart>ct.block_start&&(ut(ct,!1),ct.strm.avail_out),Mt)}function Vt(ct,Qt){for(var Gt,Dt;;){if(ct.lookahead<Et){if(Kt(ct),ct.lookahead<Et&&Qt===U)return Mt;if(ct.lookahead===0)break}if(Gt=0,ct.lookahead>=xt&&(ct.ins_h=(ct.ins_h<<ct.hash_shift^ct.window[ct.strstart+xt-1])&ct.hash_mask,Gt=ct.prev[ct.strstart&ct.w_mask]=ct.head[ct.ins_h],ct.head[ct.ins_h]=ct.strstart),Gt!==0&&ct.strstart-Gt<=ct.w_size-Et&&(ct.match_length=Zt(ct,Gt)),ct.match_length>=xt)if(Dt=P._tr_tally(ct,ct.strstart-ct.match_start,ct.match_length-xt),ct.lookahead-=ct.match_length,ct.match_length<=ct.max_lazy_match&&ct.lookahead>=xt){ct.match_length--;do ct.strstart++,ct.ins_h=(ct.ins_h<<ct.hash_shift^ct.window[ct.strstart+xt-1])&ct.hash_mask,Gt=ct.prev[ct.strstart&ct.w_mask]=ct.head[ct.ins_h],ct.head[ct.ins_h]=ct.strstart;while(--ct.match_length!=0);ct.strstart++}else ct.strstart+=ct.match_length,ct.match_length=0,ct.ins_h=ct.window[ct.strstart],ct.ins_h=(ct.ins_h<<ct.hash_shift^ct.window[ct.strstart+1])&ct.hash_mask;else Dt=P._tr_tally(ct,0,ct.window[ct.strstart]),ct.lookahead--,ct.strstart++;if(Dt&&(ut(ct,!1),ct.strm.avail_out===0))return Mt}return ct.insert=ct.strstart<xt-1?ct.strstart:xt-1,Qt===G?(ut(ct,!0),ct.strm.avail_out===0?At:mt):ct.last_lit&&(ut(ct,!1),ct.strm.avail_out===0)?Mt:nt}function ee(ct,Qt){for(var Gt,Dt,Ht;;){if(ct.lookahead<Et){if(Kt(ct),ct.lookahead<Et&&Qt===U)return Mt;if(ct.lookahead===0)break}if(Gt=0,ct.lookahead>=xt&&(ct.ins_h=(ct.ins_h<<ct.hash_shift^ct.window[ct.strstart+xt-1])&ct.hash_mask,Gt=ct.prev[ct.strstart&ct.w_mask]=ct.head[ct.ins_h],ct.head[ct.ins_h]=ct.strstart),ct.prev_length=ct.match_length,ct.prev_match=ct.match_start,ct.match_length=xt-1,Gt!==0&&ct.prev_length<ct.max_lazy_match&&ct.strstart-Gt<=ct.w_size-Et&&(ct.match_length=Zt(ct,Gt),ct.match_length<=5&&(ct.strategy===rt||ct.match_length===xt&&ct.strstart-ct.match_start>4096)&&(ct.match_length=xt-1)),ct.prev_length>=xt&&ct.match_length<=ct.prev_length){Ht=ct.strstart+ct.lookahead-xt,Dt=P._tr_tally(ct,ct.strstart-1-ct.prev_match,ct.prev_length-xt),ct.lookahead-=ct.prev_length-1,ct.prev_length-=2;do++ct.strstart<=Ht&&(ct.ins_h=(ct.ins_h<<ct.hash_shift^ct.window[ct.strstart+xt-1])&ct.hash_mask,Gt=ct.prev[ct.strstart&ct.w_mask]=ct.head[ct.ins_h],ct.head[ct.ins_h]=ct.strstart);while(--ct.prev_length!=0);if(ct.match_available=0,ct.match_length=xt-1,ct.strstart++,Dt&&(ut(ct,!1),ct.strm.avail_out===0))return Mt}else if(ct.match_available){if((Dt=P._tr_tally(ct,0,ct.window[ct.strstart-1]))&&ut(ct,!1),ct.strstart++,ct.lookahead--,ct.strm.avail_out===0)return Mt}else ct.match_available=1,ct.strstart++,ct.lookahead--}return ct.match_available&&(Dt=P._tr_tally(ct,0,ct.window[ct.strstart-1]),ct.match_available=0),ct.insert=ct.strstart<xt-1?ct.strstart:xt-1,Qt===G?(ut(ct,!0),ct.strm.avail_out===0?At:mt):ct.last_lit&&(ut(ct,!1),ct.strm.avail_out===0)?Mt:nt}function Jt(ct,Qt){for(var Gt,Dt,Ht,Wt,le=ct.window;;){if(ct.lookahead<=$t){if(Kt(ct),ct.lookahead<=$t&&Qt===U)return Mt;if(ct.lookahead===0)break}if(ct.match_length=0,ct.lookahead>=xt&&ct.strstart>0&&(Dt=le[Ht=ct.strstart-1])===le[++Ht]&&Dt===le[++Ht]&&Dt===le[++Ht]){Wt=ct.strstart+$t;do;while(Dt===le[++Ht]&&Dt===le[++Ht]&&Dt===le[++Ht]&&Dt===le[++Ht]&&Dt===le[++Ht]&&Dt===le[++Ht]&&Dt===le[++Ht]&&Dt===le[++Ht]&&Ht<Wt);ct.match_length=$t-(Wt-Ht),ct.match_length>ct.lookahead&&(ct.match_length=ct.lookahead)}if(ct.match_length>=xt?(Gt=P._tr_tally(ct,1,ct.match_length-xt),ct.lookahead-=ct.match_length,ct.strstart+=ct.match_length,ct.match_length=0):(Gt=P._tr_tally(ct,0,ct.window[ct.strstart]),ct.lookahead--,ct.strstart++),Gt&&(ut(ct,!1),ct.strm.avail_out===0))return Mt}return ct.insert=0,Qt===G?(ut(ct,!0),ct.strm.avail_out===0?At:mt):ct.last_lit&&(ut(ct,!1),ct.strm.avail_out===0)?Mt:nt}function oe(ct,Qt){for(var Gt;;){if(ct.lookahead===0&&(Kt(ct),ct.lookahead===0)){if(Qt===U)return Mt;break}if(ct.match_length=0,Gt=P._tr_tally(ct,0,ct.window[ct.strstart]),ct.lookahead--,ct.strstart++,Gt&&(ut(ct,!1),ct.strm.avail_out===0))return Mt}return ct.insert=0,Qt===G?(ut(ct,!0),ct.strm.avail_out===0?At:mt):ct.last_lit&&(ut(ct,!1),ct.strm.avail_out===0)?Mt:nt}function ne(ct,Qt,Gt,Dt,Ht){this.good_length=ct,this.max_lazy=Qt,this.nice_length=Gt,this.max_chain=Dt,this.func=Ht}function ae(ct){ct.window_size=2*ct.w_size,Bt(ct.head),ct.max_lazy_match=w[ct.level].max_lazy,ct.good_match=w[ct.level].good_length,ct.nice_match=w[ct.level].nice_length,ct.max_chain_length=w[ct.level].max_chain,ct.strstart=0,ct.block_start=0,ct.lookahead=0,ct.insert=0,ct.match_length=ct.prev_length=xt-1,ct.match_available=0,ct.ins_h=0}function ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ft,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new I.Buf16(2*Rt),this.dyn_dtree=new I.Buf16(2*(2*ht+1)),this.bl_tree=new I.Buf16(2*(2*pt+1)),Bt(this.dyn_ltree),Bt(this.dyn_dtree),Bt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new I.Buf16(Tt+1),this.heap=new I.Buf16(2*dt+1),Bt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new I.Buf16(2*dt+1),Bt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ie(ct){var Qt;return ct&&ct.state?(ct.total_in=ct.total_out=0,ct.data_type=at,(Qt=ct.state).pending=0,Qt.pending_out=0,Qt.wrap<0&&(Qt.wrap=-Qt.wrap),Qt.status=Qt.wrap?Ot:Ut,ct.adler=Qt.wrap===2?0:1,Qt.last_flush=U,P._tr_init(Qt),W):_t(ct,Q)}function Nt(ct){var Qt=ie(ct);return Qt===W&&ae(ct.state),Qt}function Xt(ct,Qt){return ct&&ct.state?ct.state.wrap!==2?Q:(ct.state.gzhead=Qt,W):Q}function Lt(ct,Qt,Gt,Dt,Ht,Wt){if(!ct)return Q;var le=1;if(Qt===V&&(Qt=6),Dt<0?(le=0,Dt=-Dt):Dt>15&&(le=2,Dt-=16),Ht<1||Ht>K||Gt!==ft||Dt<8||Dt>15||Qt<0||Qt>9||Wt<0||Wt>it)return _t(ct,Q);Dt===8&&(Dt=9);var re=new ce;return ct.state=re,re.strm=ct,re.wrap=le,re.gzhead=null,re.w_bits=Dt,re.w_size=1<<re.w_bits,re.w_mask=re.w_size-1,re.hash_bits=Ht+7,re.hash_size=1<<re.hash_bits,re.hash_mask=re.hash_size-1,re.hash_shift=~~((re.hash_bits+xt-1)/xt),re.window=new I.Buf8(2*re.w_size),re.head=new I.Buf16(re.hash_size),re.prev=new I.Buf16(re.w_size),re.lit_bufsize=1<<Ht+6,re.pending_buf_size=4*re.lit_bufsize,re.pending_buf=new I.Buf8(re.pending_buf_size),re.d_buf=1*re.lit_bufsize,re.l_buf=3*re.lit_bufsize,re.level=Qt,re.strategy=Wt,re.method=Gt,Nt(ct)}function qt(ct,Qt){return Lt(ct,Qt,ft,lt,vt,st)}function kt(ct,Qt){var Gt,Dt,Ht,Wt;if(!ct||!ct.state||Qt>H||Qt<0)return ct?_t(ct,Q):Q;if(Dt=ct.state,!ct.output||!ct.input&&ct.avail_in!==0||Dt.status===jt&&Qt!==G)return _t(ct,ct.avail_out===0?J:Q);if(Dt.strm=ct,Gt=Dt.last_flush,Dt.last_flush=Qt,Dt.status===Ot)if(Dt.wrap===2)ct.adler=0,bt(Dt,31),bt(Dt,139),bt(Dt,8),Dt.gzhead?(bt(Dt,(Dt.gzhead.text?1:0)+(Dt.gzhead.hcrc?2:0)+(Dt.gzhead.extra?4:0)+(Dt.gzhead.name?8:0)+(Dt.gzhead.comment?16:0)),bt(Dt,255&Dt.gzhead.time),bt(Dt,Dt.gzhead.time>>8&255),bt(Dt,Dt.gzhead.time>>16&255),bt(Dt,Dt.gzhead.time>>24&255),bt(Dt,Dt.level===9?2:Dt.strategy>=X||Dt.level<2?4:0),bt(Dt,255&Dt.gzhead.os),Dt.gzhead.extra&&Dt.gzhead.extra.length&&(bt(Dt,255&Dt.gzhead.extra.length),bt(Dt,Dt.gzhead.extra.length>>8&255)),Dt.gzhead.hcrc&&(ct.adler=F(ct.adler,Dt.pending_buf,Dt.pending,0)),Dt.gzindex=0,Dt.status=Ct):(bt(Dt,0),bt(Dt,0),bt(Dt,0),bt(Dt,0),bt(Dt,0),bt(Dt,Dt.level===9?2:Dt.strategy>=X||Dt.level<2?4:0),bt(Dt,gt),Dt.status=Ut);else{var le=ft+(Dt.w_bits-8<<4)<<8;le|=(Dt.strategy>=X||Dt.level<2?0:Dt.level<6?1:Dt.level===6?2:3)<<6,Dt.strstart!==0&&(le|=Pt),le+=31-le%31,Dt.status=Ut,wt(Dt,le),Dt.strstart!==0&&(wt(Dt,ct.adler>>>16),wt(Dt,65535&ct.adler)),ct.adler=1}if(Dt.status===Ct)if(Dt.gzhead.extra){for(Ht=Dt.pending;Dt.gzindex<(65535&Dt.gzhead.extra.length)&&(Dt.pending!==Dt.pending_buf_size||(Dt.gzhead.hcrc&&Dt.pending>Ht&&(ct.adler=F(ct.adler,Dt.pending_buf,Dt.pending-Ht,Ht)),tt(ct),Ht=Dt.pending,Dt.pending!==Dt.pending_buf_size));)bt(Dt,255&Dt.gzhead.extra[Dt.gzindex]),Dt.gzindex++;Dt.gzhead.hcrc&&Dt.pending>Ht&&(ct.adler=F(ct.adler,Dt.pending_buf,Dt.pending-Ht,Ht)),Dt.gzindex===Dt.gzhead.extra.length&&(Dt.gzindex=0,Dt.status=St)}else Dt.status=St;if(Dt.status===St)if(Dt.gzhead.name){Ht=Dt.pending;do{if(Dt.pending===Dt.pending_buf_size&&(Dt.gzhead.hcrc&&Dt.pending>Ht&&(ct.adler=F(ct.adler,Dt.pending_buf,Dt.pending-Ht,Ht)),tt(ct),Ht=Dt.pending,Dt.pending===Dt.pending_buf_size)){Wt=1;break}Wt=Dt.gzindex<Dt.gzhead.name.length?255&Dt.gzhead.name.charCodeAt(Dt.gzindex++):0,bt(Dt,Wt)}while(Wt!==0);Dt.gzhead.hcrc&&Dt.pending>Ht&&(ct.adler=F(ct.adler,Dt.pending_buf,Dt.pending-Ht,Ht)),Wt===0&&(Dt.gzindex=0,Dt.status=It)}else Dt.status=It;if(Dt.status===It)if(Dt.gzhead.comment){Ht=Dt.pending;do{if(Dt.pending===Dt.pending_buf_size&&(Dt.gzhead.hcrc&&Dt.pending>Ht&&(ct.adler=F(ct.adler,Dt.pending_buf,Dt.pending-Ht,Ht)),tt(ct),Ht=Dt.pending,Dt.pending===Dt.pending_buf_size)){Wt=1;break}Wt=Dt.gzindex<Dt.gzhead.comment.length?255&Dt.gzhead.comment.charCodeAt(Dt.gzindex++):0,bt(Dt,Wt)}while(Wt!==0);Dt.gzhead.hcrc&&Dt.pending>Ht&&(ct.adler=F(ct.adler,Dt.pending_buf,Dt.pending-Ht,Ht)),Wt===0&&(Dt.status=Ft)}else Dt.status=Ft;if(Dt.status===Ft&&(Dt.gzhead.hcrc?(Dt.pending+2>Dt.pending_buf_size&&tt(ct),Dt.pending+2<=Dt.pending_buf_size&&(bt(Dt,255&ct.adler),bt(Dt,ct.adler>>8&255),ct.adler=0,Dt.status=Ut)):Dt.status=Ut),Dt.pending!==0){if(tt(ct),ct.avail_out===0)return Dt.last_flush=-1,W}else if(ct.avail_in===0&&yt(Qt)<=yt(Gt)&&Qt!==G)return _t(ct,J);if(Dt.status===jt&&ct.avail_in!==0)return _t(ct,J);if(ct.avail_in!==0||Dt.lookahead!==0||Qt!==U&&Dt.status!==jt){var re=Dt.strategy===X?oe(Dt,Qt):Dt.strategy===ot?Jt(Dt,Qt):w[Dt.level].func(Dt,Qt);if(re!==At&&re!==mt||(Dt.status=jt),re===Mt||re===At)return ct.avail_out===0&&(Dt.last_flush=-1),W;if(re===nt&&(Qt===j?P._tr_align(Dt):Qt!==H&&(P._tr_stored_block(Dt,0,0,!1),Qt===Z&&(Bt(Dt.head),Dt.lookahead===0&&(Dt.strstart=0,Dt.block_start=0,Dt.insert=0))),tt(ct),ct.avail_out===0))return Dt.last_flush=-1,W}return Qt!==G?W:Dt.wrap<=0?q:(Dt.wrap===2?(bt(Dt,255&ct.adler),bt(Dt,ct.adler>>8&255),bt(Dt,ct.adler>>16&255),bt(Dt,ct.adler>>24&255),bt(Dt,255&ct.total_in),bt(Dt,ct.total_in>>8&255),bt(Dt,ct.total_in>>16&255),bt(Dt,ct.total_in>>24&255)):(wt(Dt,ct.adler>>>16),wt(Dt,65535&ct.adler)),tt(ct),Dt.wrap>0&&(Dt.wrap=-Dt.wrap),Dt.pending!==0?W:q)}function Yt(ct){var Qt;return ct&&ct.state?(Qt=ct.state.status)!==Ot&&Qt!==Ct&&Qt!==St&&Qt!==It&&Qt!==Ft&&Qt!==Ut&&Qt!==jt?_t(ct,Q):(ct.state=null,Qt===Ut?_t(ct,et):W):Q}function ue(ct,Qt){var Gt,Dt,Ht,Wt,le,re,se,he,xe=Qt.length;if(!ct||!ct.state||(Wt=(Gt=ct.state).wrap)===2||Wt===1&&Gt.status!==Ot||Gt.lookahead)return Q;for(Wt===1&&(ct.adler=$(ct.adler,Qt,xe,0)),Gt.wrap=0,xe>=Gt.w_size&&(Wt===0&&(Bt(Gt.head),Gt.strstart=0,Gt.block_start=0,Gt.insert=0),he=new I.Buf8(Gt.w_size),I.arraySet(he,Qt,xe-Gt.w_size,Gt.w_size,0),Qt=he,xe=Gt.w_size),le=ct.avail_in,re=ct.next_in,se=ct.input,ct.avail_in=xe,ct.next_in=0,ct.input=Qt,Kt(Gt);Gt.lookahead>=xt;){Dt=Gt.strstart,Ht=Gt.lookahead-(xt-1);do Gt.ins_h=(Gt.ins_h<<Gt.hash_shift^Gt.window[Dt+xt-1])&Gt.hash_mask,Gt.prev[Dt&Gt.w_mask]=Gt.head[Gt.ins_h],Gt.head[Gt.ins_h]=Dt,Dt++;while(--Ht);Gt.strstart=Dt,Gt.lookahead=xt-1,Kt(Gt)}return Gt.strstart+=Gt.lookahead,Gt.block_start=Gt.strstart,Gt.insert=Gt.lookahead,Gt.lookahead=0,Gt.match_length=Gt.prev_length=xt-1,Gt.match_available=0,ct.next_in=re,ct.input=se,ct.avail_in=le,Gt.wrap=Wt,W}w=[new ne(0,0,0,0,te),new ne(4,4,8,4,Vt),new ne(4,5,16,8,Vt),new ne(4,6,32,32,Vt),new ne(4,4,16,16,ee),new ne(8,16,32,32,ee),new ne(8,16,128,128,ee),new ne(8,32,128,256,ee),new ne(32,128,258,1024,ee),new ne(32,258,258,4096,ee)],g.deflateInit=qt,g.deflateInit2=Lt,g.deflateReset=Nt,g.deflateResetKeep=ie,g.deflateSetHeader=Xt,g.deflate=kt,g.deflateEnd=Yt,g.deflateSetDictionary=ue,g.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":52,"./adler32":53,"./crc32":55,"./messages":60,"./trees":61}],57:[function(d,m,g){var w=30,I=12;m.exports=function(P,$){var F,D,U,j,Z,G,H,W,q,Q,et,J,V,rt,X,ot,it,st,at,ft,K,lt,vt,dt,ht;F=P.state,D=P.next_in,dt=P.input,U=D+(P.avail_in-5),j=P.next_out,ht=P.output,Z=j-($-P.avail_out),G=j+(P.avail_out-257),H=F.dmax,W=F.wsize,q=F.whave,Q=F.wnext,et=F.window,J=F.hold,V=F.bits,rt=F.lencode,X=F.distcode,ot=(1<<F.lenbits)-1,it=(1<<F.distbits)-1;t:do{V<15&&(J+=dt[D++]<<V,V+=8,J+=dt[D++]<<V,V+=8),st=rt[J&ot];e:for(;;){if(J>>>=at=st>>>24,V-=at,(at=st>>>16&255)==0)ht[j++]=65535&st;else{if(!(16&at)){if(64&at){if(32&at){F.mode=I;break t}P.msg="invalid literal/length code",F.mode=w;break t}st=rt[(65535&st)+(J&(1<<at)-1)];continue e}for(ft=65535&st,(at&=15)&&(V<at&&(J+=dt[D++]<<V,V+=8),ft+=J&(1<<at)-1,J>>>=at,V-=at),V<15&&(J+=dt[D++]<<V,V+=8,J+=dt[D++]<<V,V+=8),st=X[J&it];;){if(J>>>=at=st>>>24,V-=at,16&(at=st>>>16&255)){if(K=65535&st,V<(at&=15)&&(J+=dt[D++]<<V,(V+=8)<at&&(J+=dt[D++]<<V,V+=8)),(K+=J&(1<<at)-1)>H){P.msg="invalid distance too far back",F.mode=w;break t}if(J>>>=at,V-=at,K>(at=j-Z)){if((at=K-at)>q&&F.sane){P.msg="invalid distance too far back",F.mode=w;break t}if(lt=0,vt=et,Q===0){if(lt+=W-at,at<ft){ft-=at;do ht[j++]=et[lt++];while(--at);lt=j-K,vt=ht}}else if(Q<at){if(lt+=W+Q-at,(at-=Q)<ft){ft-=at;do ht[j++]=et[lt++];while(--at);if(lt=0,Q<ft){ft-=at=Q;do ht[j++]=et[lt++];while(--at);lt=j-K,vt=ht}}}else if(lt+=Q-at,at<ft){ft-=at;do ht[j++]=et[lt++];while(--at);lt=j-K,vt=ht}for(;ft>2;)ht[j++]=vt[lt++],ht[j++]=vt[lt++],ht[j++]=vt[lt++],ft-=3;ft&&(ht[j++]=vt[lt++],ft>1&&(ht[j++]=vt[lt++]))}else{lt=j-K;do ht[j++]=ht[lt++],ht[j++]=ht[lt++],ht[j++]=ht[lt++],ft-=3;while(ft>2);ft&&(ht[j++]=ht[lt++],ft>1&&(ht[j++]=ht[lt++]))}break}if(64&at){P.msg="invalid distance code",F.mode=w;break t}st=X[(65535&st)+(J&(1<<at)-1)]}}break}}while(D<U&&j<G);D-=ft=V>>3,J&=(1<<(V-=ft<<3))-1,P.next_in=D,P.next_out=j,P.avail_in=D<U?U-D+5:5-(D-U),P.avail_out=j<G?G-j+257:257-(j-G),F.hold=J,F.bits=V}},{}],58:[function(d,m,g){var w=d("../utils/common"),I=d("./adler32"),P=d("./crc32"),$=d("./inffast"),F=d("./inftrees"),D=0,U=1,j=2,Z=4,G=5,H=6,W=0,q=1,Q=2,et=-2,J=-3,V=-4,rt=-5,X=8,ot=1,it=2,st=3,at=4,ft=5,K=6,lt=7,vt=8,dt=9,ht=10,pt=11,Rt=12,Tt=13,xt=14,$t=15,Et=16,Pt=17,Ot=18,Ct=19,St=20,It=21,Ft=22,Ut=23,jt=24,Mt=25,nt=26,At=27,mt=28,gt=29,_t=30,yt=31,Bt=852,tt=592,ut=15;function bt(Lt){return(Lt>>>24&255)+(Lt>>>8&65280)+((65280&Lt)<<8)+((255&Lt)<<24)}function wt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new w.Buf16(320),this.work=new w.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function zt(Lt){var qt;return Lt&&Lt.state?(qt=Lt.state,Lt.total_in=Lt.total_out=qt.total=0,Lt.msg="",qt.wrap&&(Lt.adler=1&qt.wrap),qt.mode=ot,qt.last=0,qt.havedict=0,qt.dmax=32768,qt.head=null,qt.hold=0,qt.bits=0,qt.lencode=qt.lendyn=new w.Buf32(Bt),qt.distcode=qt.distdyn=new w.Buf32(tt),qt.sane=1,qt.back=-1,W):et}function Zt(Lt){var qt;return Lt&&Lt.state?((qt=Lt.state).wsize=0,qt.whave=0,qt.wnext=0,zt(Lt)):et}function Kt(Lt,qt){var kt,Yt;return Lt&&Lt.state?(Yt=Lt.state,qt<0?(kt=0,qt=-qt):(kt=1+(qt>>4),qt<48&&(qt&=15)),qt&&(qt<8||qt>15)?et:(Yt.window!==null&&Yt.wbits!==qt&&(Yt.window=null),Yt.wrap=kt,Yt.wbits=qt,Zt(Lt))):et}function te(Lt,qt){var kt,Yt;return Lt?(Yt=new wt,Lt.state=Yt,Yt.window=null,(kt=Kt(Lt,qt))!==W&&(Lt.state=null),kt):et}function Vt(Lt){return te(Lt,ut)}var ee,Jt,oe=!0;function ne(Lt){if(oe){var qt;for(ee=new w.Buf32(512),Jt=new w.Buf32(32),qt=0;qt<144;)Lt.lens[qt++]=8;for(;qt<256;)Lt.lens[qt++]=9;for(;qt<280;)Lt.lens[qt++]=7;for(;qt<288;)Lt.lens[qt++]=8;for(F(U,Lt.lens,0,288,ee,0,Lt.work,{bits:9}),qt=0;qt<32;)Lt.lens[qt++]=5;F(j,Lt.lens,0,32,Jt,0,Lt.work,{bits:5}),oe=!1}Lt.lencode=ee,Lt.lenbits=9,Lt.distcode=Jt,Lt.distbits=5}function ae(Lt,qt,kt,Yt){var ue,ct=Lt.state;return ct.window===null&&(ct.wsize=1<<ct.wbits,ct.wnext=0,ct.whave=0,ct.window=new w.Buf8(ct.wsize)),Yt>=ct.wsize?(w.arraySet(ct.window,qt,kt-ct.wsize,ct.wsize,0),ct.wnext=0,ct.whave=ct.wsize):((ue=ct.wsize-ct.wnext)>Yt&&(ue=Yt),w.arraySet(ct.window,qt,kt-Yt,ue,ct.wnext),(Yt-=ue)?(w.arraySet(ct.window,qt,kt-Yt,Yt,0),ct.wnext=Yt,ct.whave=ct.wsize):(ct.wnext+=ue,ct.wnext===ct.wsize&&(ct.wnext=0),ct.whave<ct.wsize&&(ct.whave+=ue))),0}function ce(Lt,qt){var kt,Yt,ue,ct,Qt,Gt,Dt,Ht,Wt,le,re,se,he,xe,de,pe,ge,be,ke,Se,me,we,Ee,ve,ye=0,_e=new w.Buf8(4),Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Lt||!Lt.state||!Lt.output||!Lt.input&&Lt.avail_in!==0)return et;(kt=Lt.state).mode===Rt&&(kt.mode=Tt),Qt=Lt.next_out,ue=Lt.output,Dt=Lt.avail_out,ct=Lt.next_in,Yt=Lt.input,Gt=Lt.avail_in,Ht=kt.hold,Wt=kt.bits,le=Gt,re=Dt,we=W;t:for(;;)switch(kt.mode){case ot:if(kt.wrap===0){kt.mode=Tt;break}for(;Wt<16;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}if(2&kt.wrap&&Ht===35615){kt.check=0,_e[0]=255&Ht,_e[1]=Ht>>>8&255,kt.check=P(kt.check,_e,2,0),Ht=0,Wt=0,kt.mode=it;break}if(kt.flags=0,kt.head&&(kt.head.done=!1),!(1&kt.wrap)||(((255&Ht)<<8)+(Ht>>8))%31){Lt.msg="incorrect header check",kt.mode=_t;break}if((15&Ht)!==X){Lt.msg="unknown compression method",kt.mode=_t;break}if(Wt-=4,me=8+(15&(Ht>>>=4)),kt.wbits===0)kt.wbits=me;else if(me>kt.wbits){Lt.msg="invalid window size",kt.mode=_t;break}kt.dmax=1<<me,Lt.adler=kt.check=1,kt.mode=512&Ht?ht:Rt,Ht=0,Wt=0;break;case it:for(;Wt<16;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}if(kt.flags=Ht,(255&kt.flags)!==X){Lt.msg="unknown compression method",kt.mode=_t;break}if(57344&kt.flags){Lt.msg="unknown header flags set",kt.mode=_t;break}kt.head&&(kt.head.text=Ht>>8&1),512&kt.flags&&(_e[0]=255&Ht,_e[1]=Ht>>>8&255,kt.check=P(kt.check,_e,2,0)),Ht=0,Wt=0,kt.mode=st;case st:for(;Wt<32;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}kt.head&&(kt.head.time=Ht),512&kt.flags&&(_e[0]=255&Ht,_e[1]=Ht>>>8&255,_e[2]=Ht>>>16&255,_e[3]=Ht>>>24&255,kt.check=P(kt.check,_e,4,0)),Ht=0,Wt=0,kt.mode=at;case at:for(;Wt<16;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}kt.head&&(kt.head.xflags=255&Ht,kt.head.os=Ht>>8),512&kt.flags&&(_e[0]=255&Ht,_e[1]=Ht>>>8&255,kt.check=P(kt.check,_e,2,0)),Ht=0,Wt=0,kt.mode=ft;case ft:if(1024&kt.flags){for(;Wt<16;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}kt.length=Ht,kt.head&&(kt.head.extra_len=Ht),512&kt.flags&&(_e[0]=255&Ht,_e[1]=Ht>>>8&255,kt.check=P(kt.check,_e,2,0)),Ht=0,Wt=0}else kt.head&&(kt.head.extra=null);kt.mode=K;case K:if(1024&kt.flags&&((se=kt.length)>Gt&&(se=Gt),se&&(kt.head&&(me=kt.head.extra_len-kt.length,kt.head.extra||(kt.head.extra=new Array(kt.head.extra_len)),w.arraySet(kt.head.extra,Yt,ct,se,me)),512&kt.flags&&(kt.check=P(kt.check,Yt,se,ct)),Gt-=se,ct+=se,kt.length-=se),kt.length))break t;kt.length=0,kt.mode=lt;case lt:if(2048&kt.flags){if(Gt===0)break t;se=0;do me=Yt[ct+se++],kt.head&&me&&kt.length<65536&&(kt.head.name+=String.fromCharCode(me));while(me&&se<Gt);if(512&kt.flags&&(kt.check=P(kt.check,Yt,se,ct)),Gt-=se,ct+=se,me)break t}else kt.head&&(kt.head.name=null);kt.length=0,kt.mode=vt;case vt:if(4096&kt.flags){if(Gt===0)break t;se=0;do me=Yt[ct+se++],kt.head&&me&&kt.length<65536&&(kt.head.comment+=String.fromCharCode(me));while(me&&se<Gt);if(512&kt.flags&&(kt.check=P(kt.check,Yt,se,ct)),Gt-=se,ct+=se,me)break t}else kt.head&&(kt.head.comment=null);kt.mode=dt;case dt:if(512&kt.flags){for(;Wt<16;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}if(Ht!==(65535&kt.check)){Lt.msg="header crc mismatch",kt.mode=_t;break}Ht=0,Wt=0}kt.head&&(kt.head.hcrc=kt.flags>>9&1,kt.head.done=!0),Lt.adler=kt.check=0,kt.mode=Rt;break;case ht:for(;Wt<32;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}Lt.adler=kt.check=bt(Ht),Ht=0,Wt=0,kt.mode=pt;case pt:if(kt.havedict===0)return Lt.next_out=Qt,Lt.avail_out=Dt,Lt.next_in=ct,Lt.avail_in=Gt,kt.hold=Ht,kt.bits=Wt,Q;Lt.adler=kt.check=1,kt.mode=Rt;case Rt:if(qt===G||qt===H)break t;case Tt:if(kt.last){Ht>>>=7&Wt,Wt-=7&Wt,kt.mode=At;break}for(;Wt<3;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}switch(kt.last=1&Ht,Wt-=1,3&(Ht>>>=1)){case 0:kt.mode=xt;break;case 1:if(ne(kt),kt.mode=St,qt===H){Ht>>>=2,Wt-=2;break t}break;case 2:kt.mode=Pt;break;case 3:Lt.msg="invalid block type",kt.mode=_t}Ht>>>=2,Wt-=2;break;case xt:for(Ht>>>=7&Wt,Wt-=7&Wt;Wt<32;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}if((65535&Ht)!=(Ht>>>16^65535)){Lt.msg="invalid stored block lengths",kt.mode=_t;break}if(kt.length=65535&Ht,Ht=0,Wt=0,kt.mode=$t,qt===H)break t;case $t:kt.mode=Et;case Et:if(se=kt.length){if(se>Gt&&(se=Gt),se>Dt&&(se=Dt),se===0)break t;w.arraySet(ue,Yt,ct,se,Qt),Gt-=se,ct+=se,Dt-=se,Qt+=se,kt.length-=se;break}kt.mode=Rt;break;case Pt:for(;Wt<14;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}if(kt.nlen=257+(31&Ht),Ht>>>=5,Wt-=5,kt.ndist=1+(31&Ht),Ht>>>=5,Wt-=5,kt.ncode=4+(15&Ht),Ht>>>=4,Wt-=4,kt.nlen>286||kt.ndist>30){Lt.msg="too many length or distance symbols",kt.mode=_t;break}kt.have=0,kt.mode=Ot;case Ot:for(;kt.have<kt.ncode;){for(;Wt<3;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}kt.lens[Ae[kt.have++]]=7&Ht,Ht>>>=3,Wt-=3}for(;kt.have<19;)kt.lens[Ae[kt.have++]]=0;if(kt.lencode=kt.lendyn,kt.lenbits=7,Ee={bits:kt.lenbits},we=F(D,kt.lens,0,19,kt.lencode,0,kt.work,Ee),kt.lenbits=Ee.bits,we){Lt.msg="invalid code lengths set",kt.mode=_t;break}kt.have=0,kt.mode=Ct;case Ct:for(;kt.have<kt.nlen+kt.ndist;){for(;pe=(ye=kt.lencode[Ht&(1<<kt.lenbits)-1])>>>16&255,ge=65535&ye,!((de=ye>>>24)<=Wt);){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}if(ge<16)Ht>>>=de,Wt-=de,kt.lens[kt.have++]=ge;else{if(ge===16){for(ve=de+2;Wt<ve;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}if(Ht>>>=de,Wt-=de,kt.have===0){Lt.msg="invalid bit length repeat",kt.mode=_t;break}me=kt.lens[kt.have-1],se=3+(3&Ht),Ht>>>=2,Wt-=2}else if(ge===17){for(ve=de+3;Wt<ve;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}Wt-=de,me=0,se=3+(7&(Ht>>>=de)),Ht>>>=3,Wt-=3}else{for(ve=de+7;Wt<ve;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}Wt-=de,me=0,se=11+(127&(Ht>>>=de)),Ht>>>=7,Wt-=7}if(kt.have+se>kt.nlen+kt.ndist){Lt.msg="invalid bit length repeat",kt.mode=_t;break}for(;se--;)kt.lens[kt.have++]=me}}if(kt.mode===_t)break;if(kt.lens[256]===0){Lt.msg="invalid code -- missing end-of-block",kt.mode=_t;break}if(kt.lenbits=9,Ee={bits:kt.lenbits},we=F(U,kt.lens,0,kt.nlen,kt.lencode,0,kt.work,Ee),kt.lenbits=Ee.bits,we){Lt.msg="invalid literal/lengths set",kt.mode=_t;break}if(kt.distbits=6,kt.distcode=kt.distdyn,Ee={bits:kt.distbits},we=F(j,kt.lens,kt.nlen,kt.ndist,kt.distcode,0,kt.work,Ee),kt.distbits=Ee.bits,we){Lt.msg="invalid distances set",kt.mode=_t;break}if(kt.mode=St,qt===H)break t;case St:kt.mode=It;case It:if(Gt>=6&&Dt>=258){Lt.next_out=Qt,Lt.avail_out=Dt,Lt.next_in=ct,Lt.avail_in=Gt,kt.hold=Ht,kt.bits=Wt,$(Lt,re),Qt=Lt.next_out,ue=Lt.output,Dt=Lt.avail_out,ct=Lt.next_in,Yt=Lt.input,Gt=Lt.avail_in,Ht=kt.hold,Wt=kt.bits,kt.mode===Rt&&(kt.back=-1);break}for(kt.back=0;pe=(ye=kt.lencode[Ht&(1<<kt.lenbits)-1])>>>16&255,ge=65535&ye,!((de=ye>>>24)<=Wt);){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}if(pe&&!(240&pe)){for(be=de,ke=pe,Se=ge;pe=(ye=kt.lencode[Se+((Ht&(1<<be+ke)-1)>>be)])>>>16&255,ge=65535&ye,!(be+(de=ye>>>24)<=Wt);){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}Ht>>>=be,Wt-=be,kt.back+=be}if(Ht>>>=de,Wt-=de,kt.back+=de,kt.length=ge,pe===0){kt.mode=nt;break}if(32&pe){kt.back=-1,kt.mode=Rt;break}if(64&pe){Lt.msg="invalid literal/length code",kt.mode=_t;break}kt.extra=15&pe,kt.mode=Ft;case Ft:if(kt.extra){for(ve=kt.extra;Wt<ve;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}kt.length+=Ht&(1<<kt.extra)-1,Ht>>>=kt.extra,Wt-=kt.extra,kt.back+=kt.extra}kt.was=kt.length,kt.mode=Ut;case Ut:for(;pe=(ye=kt.distcode[Ht&(1<<kt.distbits)-1])>>>16&255,ge=65535&ye,!((de=ye>>>24)<=Wt);){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}if(!(240&pe)){for(be=de,ke=pe,Se=ge;pe=(ye=kt.distcode[Se+((Ht&(1<<be+ke)-1)>>be)])>>>16&255,ge=65535&ye,!(be+(de=ye>>>24)<=Wt);){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}Ht>>>=be,Wt-=be,kt.back+=be}if(Ht>>>=de,Wt-=de,kt.back+=de,64&pe){Lt.msg="invalid distance code",kt.mode=_t;break}kt.offset=ge,kt.extra=15&pe,kt.mode=jt;case jt:if(kt.extra){for(ve=kt.extra;Wt<ve;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}kt.offset+=Ht&(1<<kt.extra)-1,Ht>>>=kt.extra,Wt-=kt.extra,kt.back+=kt.extra}if(kt.offset>kt.dmax){Lt.msg="invalid distance too far back",kt.mode=_t;break}kt.mode=Mt;case Mt:if(Dt===0)break t;if(se=re-Dt,kt.offset>se){if((se=kt.offset-se)>kt.whave&&kt.sane){Lt.msg="invalid distance too far back",kt.mode=_t;break}se>kt.wnext?(se-=kt.wnext,he=kt.wsize-se):he=kt.wnext-se,se>kt.length&&(se=kt.length),xe=kt.window}else xe=ue,he=Qt-kt.offset,se=kt.length;se>Dt&&(se=Dt),Dt-=se,kt.length-=se;do ue[Qt++]=xe[he++];while(--se);kt.length===0&&(kt.mode=It);break;case nt:if(Dt===0)break t;ue[Qt++]=kt.length,Dt--,kt.mode=It;break;case At:if(kt.wrap){for(;Wt<32;){if(Gt===0)break t;Gt--,Ht|=Yt[ct++]<<Wt,Wt+=8}if(re-=Dt,Lt.total_out+=re,kt.total+=re,re&&(Lt.adler=kt.check=kt.flags?P(kt.check,ue,re,Qt-re):I(kt.check,ue,re,Qt-re)),re=Dt,(kt.flags?Ht:bt(Ht))!==kt.check){Lt.msg="incorrect data check",kt.mode=_t;break}Ht=0,Wt=0}kt.mode=mt;case mt:if(kt.wrap&&kt.flags){for(;Wt<32;){if(Gt===0)break t;Gt--,Ht+=Yt[ct++]<<Wt,Wt+=8}if(Ht!==(4294967295&kt.total)){Lt.msg="incorrect length check",kt.mode=_t;break}Ht=0,Wt=0}kt.mode=gt;case gt:we=q;break t;case _t:we=J;break t;case yt:return V;default:return et}return Lt.next_out=Qt,Lt.avail_out=Dt,Lt.next_in=ct,Lt.avail_in=Gt,kt.hold=Ht,kt.bits=Wt,(kt.wsize||re!==Lt.avail_out&&kt.mode<_t&&(kt.mode<At||qt!==Z))&&ae(Lt,Lt.output,Lt.next_out,re-Lt.avail_out),le-=Lt.avail_in,re-=Lt.avail_out,Lt.total_in+=le,Lt.total_out+=re,kt.total+=re,kt.wrap&&re&&(Lt.adler=kt.check=kt.flags?P(kt.check,ue,re,Lt.next_out-re):I(kt.check,ue,re,Lt.next_out-re)),Lt.data_type=kt.bits+(kt.last?64:0)+(kt.mode===Rt?128:0)+(kt.mode===St||kt.mode===$t?256:0),(le===0&&re===0||qt===Z)&&we===W&&(we=rt),we}function ie(Lt){if(!Lt||!Lt.state)return et;var qt=Lt.state;return qt.window&&(qt.window=null),Lt.state=null,W}function Nt(Lt,qt){var kt;return Lt&&Lt.state&&2&(kt=Lt.state).wrap?(kt.head=qt,qt.done=!1,W):et}function Xt(Lt,qt){var kt,Yt=qt.length;return Lt&&Lt.state?(kt=Lt.state).wrap!==0&&kt.mode!==pt?et:kt.mode===pt&&I(1,qt,Yt,0)!==kt.check?J:ae(Lt,qt,Yt,Yt)?(kt.mode=yt,V):(kt.havedict=1,W):et}g.inflateReset=Zt,g.inflateReset2=Kt,g.inflateResetKeep=zt,g.inflateInit=Vt,g.inflateInit2=te,g.inflate=ce,g.inflateEnd=ie,g.inflateGetHeader=Nt,g.inflateSetDictionary=Xt,g.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":52,"./adler32":53,"./crc32":55,"./inffast":57,"./inftrees":59}],59:[function(d,m,g){var w=d("../utils/common"),I=15,P=852,$=592,F=0,D=1,U=2,j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Z=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],G=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],H=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];m.exports=function(W,q,Q,et,J,V,rt,X){var ot,it,st,at,ft,K,lt,vt,dt,ht=X.bits,pt=0,Rt=0,Tt=0,xt=0,$t=0,Et=0,Pt=0,Ot=0,Ct=0,St=0,It=null,Ft=0,Ut=new w.Buf16(I+1),jt=new w.Buf16(I+1),Mt=null,nt=0;for(pt=0;pt<=I;pt++)Ut[pt]=0;for(Rt=0;Rt<et;Rt++)Ut[q[Q+Rt]]++;for($t=ht,xt=I;xt>=1&&Ut[xt]===0;xt--);if($t>xt&&($t=xt),xt===0)return J[V++]=20971520,J[V++]=20971520,X.bits=1,0;for(Tt=1;Tt<xt&&Ut[Tt]===0;Tt++);for($t<Tt&&($t=Tt),Ot=1,pt=1;pt<=I;pt++)if(Ot<<=1,(Ot-=Ut[pt])<0)return-1;if(Ot>0&&(W===F||xt!==1))return-1;for(jt[1]=0,pt=1;pt<I;pt++)jt[pt+1]=jt[pt]+Ut[pt];for(Rt=0;Rt<et;Rt++)q[Q+Rt]!==0&&(rt[jt[q[Q+Rt]]++]=Rt);if(W===F?(It=Mt=rt,K=19):W===D?(It=j,Ft-=257,Mt=Z,nt-=257,K=256):(It=G,Mt=H,K=-1),St=0,Rt=0,pt=Tt,ft=V,Et=$t,Pt=0,st=-1,at=(Ct=1<<$t)-1,W===D&&Ct>P||W===U&&Ct>$)return 1;for(;;){lt=pt-Pt,rt[Rt]<K?(vt=0,dt=rt[Rt]):rt[Rt]>K?(vt=Mt[nt+rt[Rt]],dt=It[Ft+rt[Rt]]):(vt=96,dt=0),ot=1<<pt-Pt,Tt=it=1<<Et;do J[ft+(St>>Pt)+(it-=ot)]=lt<<24|vt<<16|dt;while(it!==0);for(ot=1<<pt-1;St&ot;)ot>>=1;if(ot!==0?(St&=ot-1,St+=ot):St=0,Rt++,--Ut[pt]==0){if(pt===xt)break;pt=q[Q+rt[Rt]]}if(pt>$t&&(St&at)!==st){for(Pt===0&&(Pt=$t),ft+=Tt,Ot=1<<(Et=pt-Pt);Et+Pt<xt&&!((Ot-=Ut[Et+Pt])<=0);)Et++,Ot<<=1;if(Ct+=1<<Et,W===D&&Ct>P||W===U&&Ct>$)return 1;J[st=St&at]=$t<<24|Et<<16|ft-V}}return St!==0&&(J[ft+St]=pt-Pt<<24|64<<16),X.bits=$t,0}},{"../utils/common":52}],60:[function(d,m,g){m.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],61:[function(d,m,g){var w=d("../utils/common"),I=4,P=0,$=1,F=2;function D(Nt){for(var Xt=Nt.length;--Xt>=0;)Nt[Xt]=0}var U=0,j=1,Z=2,G=3,H=258,W=29,q=256,Q=q+1+W,et=30,J=19,V=2*Q+1,rt=15,X=16,ot=7,it=256,st=16,at=17,ft=18,K=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],lt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],vt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],dt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ht=512,pt=new Array(2*(Q+2));D(pt);var Rt=new Array(2*et);D(Rt);var Tt=new Array(ht);D(Tt);var xt=new Array(H-G+1);D(xt);var $t=new Array(W);D($t);var Et,Pt,Ot,Ct=new Array(et);function St(Nt,Xt,Lt,qt,kt){this.static_tree=Nt,this.extra_bits=Xt,this.extra_base=Lt,this.elems=qt,this.max_length=kt,this.has_stree=Nt&&Nt.length}function It(Nt,Xt){this.dyn_tree=Nt,this.max_code=0,this.stat_desc=Xt}function Ft(Nt){return Nt<256?Tt[Nt]:Tt[256+(Nt>>>7)]}function Ut(Nt,Xt){Nt.pending_buf[Nt.pending++]=255&Xt,Nt.pending_buf[Nt.pending++]=Xt>>>8&255}function jt(Nt,Xt,Lt){Nt.bi_valid>X-Lt?(Nt.bi_buf|=Xt<<Nt.bi_valid&65535,Ut(Nt,Nt.bi_buf),Nt.bi_buf=Xt>>X-Nt.bi_valid,Nt.bi_valid+=Lt-X):(Nt.bi_buf|=Xt<<Nt.bi_valid&65535,Nt.bi_valid+=Lt)}function Mt(Nt,Xt,Lt){jt(Nt,Lt[2*Xt],Lt[2*Xt+1])}function nt(Nt,Xt){var Lt=0;do Lt|=1&Nt,Nt>>>=1,Lt<<=1;while(--Xt>0);return Lt>>>1}function At(Nt){Nt.bi_valid===16?(Ut(Nt,Nt.bi_buf),Nt.bi_buf=0,Nt.bi_valid=0):Nt.bi_valid>=8&&(Nt.pending_buf[Nt.pending++]=255&Nt.bi_buf,Nt.bi_buf>>=8,Nt.bi_valid-=8)}function mt(Nt,Xt){var Lt,qt,kt,Yt,ue,ct,Qt=Xt.dyn_tree,Gt=Xt.max_code,Dt=Xt.stat_desc.static_tree,Ht=Xt.stat_desc.has_stree,Wt=Xt.stat_desc.extra_bits,le=Xt.stat_desc.extra_base,re=Xt.stat_desc.max_length,se=0;for(Yt=0;Yt<=rt;Yt++)Nt.bl_count[Yt]=0;for(Qt[2*Nt.heap[Nt.heap_max]+1]=0,Lt=Nt.heap_max+1;Lt<V;Lt++)(Yt=Qt[2*Qt[2*(qt=Nt.heap[Lt])+1]+1]+1)>re&&(Yt=re,se++),Qt[2*qt+1]=Yt,qt>Gt||(Nt.bl_count[Yt]++,ue=0,qt>=le&&(ue=Wt[qt-le]),ct=Qt[2*qt],Nt.opt_len+=ct*(Yt+ue),Ht&&(Nt.static_len+=ct*(Dt[2*qt+1]+ue)));if(se!==0){do{for(Yt=re-1;Nt.bl_count[Yt]===0;)Yt--;Nt.bl_count[Yt]--,Nt.bl_count[Yt+1]+=2,Nt.bl_count[re]--,se-=2}while(se>0);for(Yt=re;Yt!==0;Yt--)for(qt=Nt.bl_count[Yt];qt!==0;)(kt=Nt.heap[--Lt])>Gt||(Qt[2*kt+1]!==Yt&&(Nt.opt_len+=(Yt-Qt[2*kt+1])*Qt[2*kt],Qt[2*kt+1]=Yt),qt--)}}function gt(Nt,Xt,Lt){var qt,kt,Yt=new Array(rt+1),ue=0;for(qt=1;qt<=rt;qt++)Yt[qt]=ue=ue+Lt[qt-1]<<1;for(kt=0;kt<=Xt;kt++){var ct=Nt[2*kt+1];ct!==0&&(Nt[2*kt]=nt(Yt[ct]++,ct))}}function _t(){var Nt,Xt,Lt,qt,kt,Yt=new Array(rt+1);for(Lt=0,qt=0;qt<W-1;qt++)for($t[qt]=Lt,Nt=0;Nt<1<<K[qt];Nt++)xt[Lt++]=qt;for(xt[Lt-1]=qt,kt=0,qt=0;qt<16;qt++)for(Ct[qt]=kt,Nt=0;Nt<1<<lt[qt];Nt++)Tt[kt++]=qt;for(kt>>=7;qt<et;qt++)for(Ct[qt]=kt<<7,Nt=0;Nt<1<<lt[qt]-7;Nt++)Tt[256+kt++]=qt;for(Xt=0;Xt<=rt;Xt++)Yt[Xt]=0;for(Nt=0;Nt<=143;)pt[2*Nt+1]=8,Nt++,Yt[8]++;for(;Nt<=255;)pt[2*Nt+1]=9,Nt++,Yt[9]++;for(;Nt<=279;)pt[2*Nt+1]=7,Nt++,Yt[7]++;for(;Nt<=287;)pt[2*Nt+1]=8,Nt++,Yt[8]++;for(gt(pt,Q+1,Yt),Nt=0;Nt<et;Nt++)Rt[2*Nt+1]=5,Rt[2*Nt]=nt(Nt,5);Et=new St(pt,K,q+1,Q,rt),Pt=new St(Rt,lt,0,et,rt),Ot=new St(new Array(0),vt,0,J,ot)}function yt(Nt){var Xt;for(Xt=0;Xt<Q;Xt++)Nt.dyn_ltree[2*Xt]=0;for(Xt=0;Xt<et;Xt++)Nt.dyn_dtree[2*Xt]=0;for(Xt=0;Xt<J;Xt++)Nt.bl_tree[2*Xt]=0;Nt.dyn_ltree[2*it]=1,Nt.opt_len=Nt.static_len=0,Nt.last_lit=Nt.matches=0}function Bt(Nt){Nt.bi_valid>8?Ut(Nt,Nt.bi_buf):Nt.bi_valid>0&&(Nt.pending_buf[Nt.pending++]=Nt.bi_buf),Nt.bi_buf=0,Nt.bi_valid=0}function tt(Nt,Xt,Lt,qt){Bt(Nt),Ut(Nt,Lt),Ut(Nt,~Lt),w.arraySet(Nt.pending_buf,Nt.window,Xt,Lt,Nt.pending),Nt.pending+=Lt}function ut(Nt,Xt,Lt,qt){var kt=2*Xt,Yt=2*Lt;return Nt[kt]<Nt[Yt]||Nt[kt]===Nt[Yt]&&qt[Xt]<=qt[Lt]}function bt(Nt,Xt,Lt){for(var qt=Nt.heap[Lt],kt=Lt<<1;kt<=Nt.heap_len&&(kt<Nt.heap_len&&ut(Xt,Nt.heap[kt+1],Nt.heap[kt],Nt.depth)&&kt++,!ut(Xt,qt,Nt.heap[kt],Nt.depth));)Nt.heap[Lt]=Nt.heap[kt],Lt=kt,kt<<=1;Nt.heap[Lt]=qt}function wt(Nt,Xt,Lt){var qt,kt,Yt,ue,ct=0;if(Nt.last_lit!==0)do qt=Nt.pending_buf[Nt.d_buf+2*ct]<<8|Nt.pending_buf[Nt.d_buf+2*ct+1],kt=Nt.pending_buf[Nt.l_buf+ct],ct++,qt===0?Mt(Nt,kt,Xt):(Mt(Nt,(Yt=xt[kt])+q+1,Xt),(ue=K[Yt])!==0&&jt(Nt,kt-=$t[Yt],ue),Mt(Nt,Yt=Ft(--qt),Lt),(ue=lt[Yt])!==0&&jt(Nt,qt-=Ct[Yt],ue));while(ct<Nt.last_lit);Mt(Nt,it,Xt)}function zt(Nt,Xt){var Lt,qt,kt,Yt=Xt.dyn_tree,ue=Xt.stat_desc.static_tree,ct=Xt.stat_desc.has_stree,Qt=Xt.stat_desc.elems,Gt=-1;for(Nt.heap_len=0,Nt.heap_max=V,Lt=0;Lt<Qt;Lt++)Yt[2*Lt]!==0?(Nt.heap[++Nt.heap_len]=Gt=Lt,Nt.depth[Lt]=0):Yt[2*Lt+1]=0;for(;Nt.heap_len<2;)Yt[2*(kt=Nt.heap[++Nt.heap_len]=Gt<2?++Gt:0)]=1,Nt.depth[kt]=0,Nt.opt_len--,ct&&(Nt.static_len-=ue[2*kt+1]);for(Xt.max_code=Gt,Lt=Nt.heap_len>>1;Lt>=1;Lt--)bt(Nt,Yt,Lt);kt=Qt;do Lt=Nt.heap[1],Nt.heap[1]=Nt.heap[Nt.heap_len--],bt(Nt,Yt,1),qt=Nt.heap[1],Nt.heap[--Nt.heap_max]=Lt,Nt.heap[--Nt.heap_max]=qt,Yt[2*kt]=Yt[2*Lt]+Yt[2*qt],Nt.depth[kt]=(Nt.depth[Lt]>=Nt.depth[qt]?Nt.depth[Lt]:Nt.depth[qt])+1,Yt[2*Lt+1]=Yt[2*qt+1]=kt,Nt.heap[1]=kt++,bt(Nt,Yt,1);while(Nt.heap_len>=2);Nt.heap[--Nt.heap_max]=Nt.heap[1],mt(Nt,Xt),gt(Yt,Gt,Nt.bl_count)}function Zt(Nt,Xt,Lt){var qt,kt,Yt=-1,ue=Xt[1],ct=0,Qt=7,Gt=4;for(ue===0&&(Qt=138,Gt=3),Xt[2*(Lt+1)+1]=65535,qt=0;qt<=Lt;qt++)kt=ue,ue=Xt[2*(qt+1)+1],++ct<Qt&&kt===ue||(ct<Gt?Nt.bl_tree[2*kt]+=ct:kt!==0?(kt!==Yt&&Nt.bl_tree[2*kt]++,Nt.bl_tree[2*st]++):ct<=10?Nt.bl_tree[2*at]++:Nt.bl_tree[2*ft]++,ct=0,Yt=kt,ue===0?(Qt=138,Gt=3):kt===ue?(Qt=6,Gt=3):(Qt=7,Gt=4))}function Kt(Nt,Xt,Lt){var qt,kt,Yt=-1,ue=Xt[1],ct=0,Qt=7,Gt=4;for(ue===0&&(Qt=138,Gt=3),qt=0;qt<=Lt;qt++)if(kt=ue,ue=Xt[2*(qt+1)+1],!(++ct<Qt&&kt===ue)){if(ct<Gt)do Mt(Nt,kt,Nt.bl_tree);while(--ct!=0);else kt!==0?(kt!==Yt&&(Mt(Nt,kt,Nt.bl_tree),ct--),Mt(Nt,st,Nt.bl_tree),jt(Nt,ct-3,2)):ct<=10?(Mt(Nt,at,Nt.bl_tree),jt(Nt,ct-3,3)):(Mt(Nt,ft,Nt.bl_tree),jt(Nt,ct-11,7));ct=0,Yt=kt,ue===0?(Qt=138,Gt=3):kt===ue?(Qt=6,Gt=3):(Qt=7,Gt=4)}}function te(Nt){var Xt;for(Zt(Nt,Nt.dyn_ltree,Nt.l_desc.max_code),Zt(Nt,Nt.dyn_dtree,Nt.d_desc.max_code),zt(Nt,Nt.bl_desc),Xt=J-1;Xt>=3&&Nt.bl_tree[2*dt[Xt]+1]===0;Xt--);return Nt.opt_len+=3*(Xt+1)+5+5+4,Xt}function Vt(Nt,Xt,Lt,qt){var kt;for(jt(Nt,Xt-257,5),jt(Nt,Lt-1,5),jt(Nt,qt-4,4),kt=0;kt<qt;kt++)jt(Nt,Nt.bl_tree[2*dt[kt]+1],3);Kt(Nt,Nt.dyn_ltree,Xt-1),Kt(Nt,Nt.dyn_dtree,Lt-1)}function ee(Nt){var Xt,Lt=4093624447;for(Xt=0;Xt<=31;Xt++,Lt>>>=1)if(1&Lt&&Nt.dyn_ltree[2*Xt]!==0)return P;if(Nt.dyn_ltree[18]!==0||Nt.dyn_ltree[20]!==0||Nt.dyn_ltree[26]!==0)return $;for(Xt=32;Xt<q;Xt++)if(Nt.dyn_ltree[2*Xt]!==0)return $;return P}D(Ct);var Jt=!1;function oe(Nt){Jt||(_t(),Jt=!0),Nt.l_desc=new It(Nt.dyn_ltree,Et),Nt.d_desc=new It(Nt.dyn_dtree,Pt),Nt.bl_desc=new It(Nt.bl_tree,Ot),Nt.bi_buf=0,Nt.bi_valid=0,yt(Nt)}function ne(Nt,Xt,Lt,qt){jt(Nt,(U<<1)+(qt?1:0),3),tt(Nt,Xt,Lt)}function ae(Nt){jt(Nt,j<<1,3),Mt(Nt,it,pt),At(Nt)}function ce(Nt,Xt,Lt,qt){var kt,Yt,ue=0;Nt.level>0?(Nt.strm.data_type===F&&(Nt.strm.data_type=ee(Nt)),zt(Nt,Nt.l_desc),zt(Nt,Nt.d_desc),ue=te(Nt),kt=Nt.opt_len+3+7>>>3,(Yt=Nt.static_len+3+7>>>3)<=kt&&(kt=Yt)):kt=Yt=Lt+5,Lt+4<=kt&&Xt!==-1?ne(Nt,Xt,Lt,qt):Nt.strategy===I||Yt===kt?(jt(Nt,(j<<1)+(qt?1:0),3),wt(Nt,pt,Rt)):(jt(Nt,(Z<<1)+(qt?1:0),3),Vt(Nt,Nt.l_desc.max_code+1,Nt.d_desc.max_code+1,ue+1),wt(Nt,Nt.dyn_ltree,Nt.dyn_dtree)),yt(Nt),qt&&Bt(Nt)}function ie(Nt,Xt,Lt){return Nt.pending_buf[Nt.d_buf+2*Nt.last_lit]=Xt>>>8&255,Nt.pending_buf[Nt.d_buf+2*Nt.last_lit+1]=255&Xt,Nt.pending_buf[Nt.l_buf+Nt.last_lit]=255&Lt,Nt.last_lit++,Xt===0?Nt.dyn_ltree[2*Lt]++:(Nt.matches++,Xt--,Nt.dyn_ltree[2*(xt[Lt]+q+1)]++,Nt.dyn_dtree[2*Ft(Xt)]++),Nt.last_lit===Nt.lit_bufsize-1}g._tr_init=oe,g._tr_stored_block=ne,g._tr_flush_block=ce,g._tr_tally=ie,g._tr_align=ae},{"../utils/common":52}],62:[function(d,m,g){function w(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}m.exports=w},{}],63:[function(d,m,g){var w,I,P=m.exports={};function $(){throw new Error("setTimeout has not been defined")}function F(){throw new Error("clearTimeout has not been defined")}function D(J){if(w===setTimeout)return setTimeout(J,0);if((w===$||!w)&&setTimeout)return w=setTimeout,setTimeout(J,0);try{return w(J,0)}catch{try{return w.call(null,J,0)}catch{return w.call(this,J,0)}}}function U(J){if(I===clearTimeout)return clearTimeout(J);if((I===F||!I)&&clearTimeout)return I=clearTimeout,clearTimeout(J);try{return I(J)}catch{try{return I.call(null,J)}catch{return I.call(this,J)}}}(function(){try{w=typeof setTimeout=="function"?setTimeout:$}catch{w=$}try{I=typeof clearTimeout=="function"?clearTimeout:F}catch{I=F}})();var j,Z=[],G=!1,H=-1;function W(){G&&j&&(G=!1,j.length?Z=j.concat(Z):H=-1,Z.length&&q())}function q(){if(!G){var J=D(W);G=!0;for(var V=Z.length;V;){for(j=Z,Z=[];++H<V;)j&&j[H].run();H=-1,V=Z.length}j=null,G=!1,U(J)}}function Q(J,V){this.fun=J,this.array=V}function et(){}P.nextTick=function(J){var V=new Array(arguments.length-1);if(arguments.length>1)for(var rt=1;rt<arguments.length;rt++)V[rt-1]=arguments[rt];Z.push(new Q(J,V)),Z.length!==1||G||D(q)},Q.prototype.run=function(){this.fun.apply(null,this.array)},P.title="browser",P.browser=!0,P.env={},P.argv=[],P.version="",P.versions={},P.on=et,P.addListener=et,P.once=et,P.off=et,P.removeListener=et,P.removeAllListeners=et,P.emit=et,P.prependListener=et,P.prependOnceListener=et,P.listeners=function(J){return[]},P.binding=function(J){throw new Error("process.binding is not supported")},P.cwd=function(){return"/"},P.chdir=function(J){throw new Error("process.chdir is not supported")},P.umask=function(){return 0}},{}],64:[function(d,m,g){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var w=d("buffer"),I=w.Buffer;function P(F,D){for(var U in F)D[U]=F[U]}function $(F,D,U){return I(F,D,U)}I.from&&I.alloc&&I.allocUnsafe&&I.allocUnsafeSlow?m.exports=w:(P(w,g),g.Buffer=$),$.prototype=Object.create(I.prototype),P(I,$),$.from=function(F,D,U){if(typeof F=="number")throw new TypeError("Argument must not be a number");return I(F,D,U)},$.alloc=function(F,D,U){if(typeof F!="number")throw new TypeError("Argument must be a number");var j=I(F);return D!==void 0?typeof U=="string"?j.fill(D,U):j.fill(D):j.fill(0),j},$.allocUnsafe=function(F){if(typeof F!="number")throw new TypeError("Argument must be a number");return I(F)},$.allocUnsafeSlow=function(F){if(typeof F!="number")throw new TypeError("Argument must be a number");return w.SlowBuffer(F)}},{buffer:32}],65:[function(d,m,g){m.exports=I;var w=d("events").EventEmitter;function I(){w.call(this)}d("inherits")(I,w),I.Readable=d("readable-stream/lib/_stream_readable.js"),I.Writable=d("readable-stream/lib/_stream_writable.js"),I.Duplex=d("readable-stream/lib/_stream_duplex.js"),I.Transform=d("readable-stream/lib/_stream_transform.js"),I.PassThrough=d("readable-stream/lib/_stream_passthrough.js"),I.finished=d("readable-stream/lib/internal/streams/end-of-stream.js"),I.pipeline=d("readable-stream/lib/internal/streams/pipeline.js"),I.Stream=I,I.prototype.pipe=function(P,$){var F=this;function D(q){P.writable&&P.write(q)===!1&&F.pause&&F.pause()}function U(){F.readable&&F.resume&&F.resume()}F.on("data",D),P.on("drain",U),P._isStdio||$&&$.end===!1||(F.on("end",Z),F.on("close",G));var j=!1;function Z(){j||(j=!0,P.end())}function G(){j||(j=!0,typeof P.destroy=="function"&&P.destroy())}function H(q){if(W(),w.listenerCount(this,"error")===0)throw q}function W(){F.removeListener("data",D),P.removeListener("drain",U),F.removeListener("end",Z),F.removeListener("close",G),F.removeListener("error",H),P.removeListener("error",H),F.removeListener("end",W),F.removeListener("close",W),P.removeListener("close",W)}return F.on("error",H),P.on("error",H),F.on("end",W),F.on("close",W),P.on("close",W),P.emit("pipe",F),P}},{events:35,inherits:46,"readable-stream/lib/_stream_duplex.js":67,"readable-stream/lib/_stream_passthrough.js":68,"readable-stream/lib/_stream_readable.js":69,"readable-stream/lib/_stream_transform.js":70,"readable-stream/lib/_stream_writable.js":71,"readable-stream/lib/internal/streams/end-of-stream.js":75,"readable-stream/lib/internal/streams/pipeline.js":77}],66:[function(d,m,g){function w(j,Z){j.prototype=Object.create(Z.prototype),j.prototype.constructor=j,j.__proto__=Z}var I={};function P(j,Z,G){function H(q,Q,et){return typeof Z=="string"?Z:Z(q,Q,et)}G||(G=Error);var W=function(q){function Q(et,J,V){return q.call(this,H(et,J,V))||this}return w(Q,q),Q}(G);W.prototype.name=G.name,W.prototype.code=j,I[j]=W}function $(j,Z){if(Array.isArray(j)){var G=j.length;return j=j.map(function(H){return String(H)}),G>2?"one of ".concat(Z," ").concat(j.slice(0,G-1).join(", "),", or ")+j[G-1]:G===2?"one of ".concat(Z," ").concat(j[0]," or ").concat(j[1]):"of ".concat(Z," ").concat(j[0])}return"of ".concat(Z," ").concat(String(j))}function F(j,Z,G){return j.substr(0,Z.length)===Z}function D(j,Z,G){return(G===void 0||G>j.length)&&(G=j.length),j.substring(G-Z.length,G)===Z}function U(j,Z,G){return typeof G!="number"&&(G=0),!(G+Z.length>j.length)&&j.indexOf(Z,G)!==-1}P("ERR_INVALID_OPT_VALUE",function(j,Z){return'The value "'+Z+'" is invalid for option "'+j+'"'},TypeError),P("ERR_INVALID_ARG_TYPE",function(j,Z,G){var H,W;if(typeof Z=="string"&&F(Z,"not ")?(H="must not be",Z=Z.replace(/^not /,"")):H="must be",D(j," argument"))W="The ".concat(j," ").concat(H," ").concat($(Z,"type"));else{var q=U(j,".")?"property":"argument";W='The "'.concat(j,'" ').concat(q," ").concat(H," ").concat($(Z,"type"))}return W+=". Received type ".concat(typeof G)},TypeError),P("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),P("ERR_METHOD_NOT_IMPLEMENTED",function(j){return"The "+j+" method is not implemented"}),P("ERR_STREAM_PREMATURE_CLOSE","Premature close"),P("ERR_STREAM_DESTROYED",function(j){return"Cannot call "+j+" after a stream was destroyed"}),P("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),P("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),P("ERR_STREAM_WRITE_AFTER_END","write after end"),P("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),P("ERR_UNKNOWN_ENCODING",function(j){return"Unknown encoding: "+j},TypeError),P("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),m.exports.codes=I},{}],67:[function(d,m,g){(function(w){(function(){var I=Object.keys||function(H){var W=[];for(var q in H)W.push(q);return W};m.exports=j;var P=d("./_stream_readable"),$=d("./_stream_writable");d("inherits")(j,P);for(var F=I($.prototype),D=0;D<F.length;D++){var U=F[D];j.prototype[U]||(j.prototype[U]=$.prototype[U])}function j(H){if(!(this instanceof j))return new j(H);P.call(this,H),$.call(this,H),this.allowHalfOpen=!0,H&&(H.readable===!1&&(this.readable=!1),H.writable===!1&&(this.writable=!1),H.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Z)))}function Z(){this._writableState.ended||w.nextTick(G,this)}function G(H){H.end()}Object.defineProperty(j.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(j.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(j.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(H){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=H,this._writableState.destroyed=H)}})}).call(this)}).call(this,d("_process"))},{"./_stream_readable":69,"./_stream_writable":71,_process:63,inherits:46}],68:[function(d,m,g){m.exports=I;var w=d("./_stream_transform");function I(P){if(!(this instanceof I))return new I(P);w.call(this,P)}d("inherits")(I,w),I.prototype._transform=function(P,$,F){F(null,P)}},{"./_stream_transform":70,inherits:46}],69:[function(d,m,g){(function(w,I){(function(){var P;m.exports=vt,vt.ReadableState=lt,d("events").EventEmitter;var $=function(_t,yt){return _t.listeners(yt).length},F=d("./internal/streams/stream"),D=d("buffer").Buffer,U=I.Uint8Array||function(){};function j(_t){return D.from(_t)}function Z(_t){return D.isBuffer(_t)||_t instanceof U}var G,H=d("util");G=H&&H.debuglog?H.debuglog("stream"):function(){};var W,q,Q,et=d("./internal/streams/buffer_list"),J=d("./internal/streams/destroy"),V=d("./internal/streams/state").getHighWaterMark,rt=d("../errors").codes,X=rt.ERR_INVALID_ARG_TYPE,ot=rt.ERR_STREAM_PUSH_AFTER_EOF,it=rt.ERR_METHOD_NOT_IMPLEMENTED,st=rt.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;d("inherits")(vt,F);var at=J.errorOrDestroy,ft=["error","close","destroy","pause","resume"];function K(_t,yt,Bt){if(typeof _t.prependListener=="function")return _t.prependListener(yt,Bt);_t._events&&_t._events[yt]?Array.isArray(_t._events[yt])?_t._events[yt].unshift(Bt):_t._events[yt]=[Bt,_t._events[yt]]:_t.on(yt,Bt)}function lt(_t,yt,Bt){P=P||d("./_stream_duplex"),_t=_t||{},typeof Bt!="boolean"&&(Bt=yt instanceof P),this.objectMode=!!_t.objectMode,Bt&&(this.objectMode=this.objectMode||!!_t.readableObjectMode),this.highWaterMark=V(this,_t,"readableHighWaterMark",Bt),this.buffer=new et,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=_t.emitClose!==!1,this.autoDestroy=!!_t.autoDestroy,this.destroyed=!1,this.defaultEncoding=_t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,_t.encoding&&(W||(W=d("string_decoder/").StringDecoder),this.decoder=new W(_t.encoding),this.encoding=_t.encoding)}function vt(_t){if(P=P||d("./_stream_duplex"),!(this instanceof vt))return new vt(_t);var yt=this instanceof P;this._readableState=new lt(_t,this,yt),this.readable=!0,_t&&(typeof _t.read=="function"&&(this._read=_t.read),typeof _t.destroy=="function"&&(this._destroy=_t.destroy)),F.call(this)}function dt(_t,yt,Bt,tt,ut){G("readableAddChunk",yt);var bt,wt=_t._readableState;if(yt===null)wt.reading=!1,$t(_t,wt);else if(ut||(bt=pt(wt,yt)),bt)at(_t,bt);else if(wt.objectMode||yt&&yt.length>0)if(typeof yt=="string"||wt.objectMode||Object.getPrototypeOf(yt)===D.prototype||(yt=j(yt)),tt)wt.endEmitted?at(_t,new st):ht(_t,wt,yt,!0);else if(wt.ended)at(_t,new ot);else{if(wt.destroyed)return!1;wt.reading=!1,wt.decoder&&!Bt?(yt=wt.decoder.write(yt),wt.objectMode||yt.length!==0?ht(_t,wt,yt,!1):Ot(_t,wt)):ht(_t,wt,yt,!1)}else tt||(wt.reading=!1,Ot(_t,wt));return!wt.ended&&(wt.length<wt.highWaterMark||wt.length===0)}function ht(_t,yt,Bt,tt){yt.flowing&&yt.length===0&&!yt.sync?(yt.awaitDrain=0,_t.emit("data",Bt)):(yt.length+=yt.objectMode?1:Bt.length,tt?yt.buffer.unshift(Bt):yt.buffer.push(Bt),yt.needReadable&&Et(_t)),Ot(_t,yt)}function pt(_t,yt){var Bt;return Z(yt)||typeof yt=="string"||yt===void 0||_t.objectMode||(Bt=new X("chunk",["string","Buffer","Uint8Array"],yt)),Bt}Object.defineProperty(vt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(_t){this._readableState&&(this._readableState.destroyed=_t)}}),vt.prototype.destroy=J.destroy,vt.prototype._undestroy=J.undestroy,vt.prototype._destroy=function(_t,yt){yt(_t)},vt.prototype.push=function(_t,yt){var Bt,tt=this._readableState;return tt.objectMode?Bt=!0:typeof _t=="string"&&((yt=yt||tt.defaultEncoding)!==tt.encoding&&(_t=D.from(_t,yt),yt=""),Bt=!0),dt(this,_t,yt,!1,Bt)},vt.prototype.unshift=function(_t){return dt(this,_t,null,!0,!1)},vt.prototype.isPaused=function(){return this._readableState.flowing===!1},vt.prototype.setEncoding=function(_t){W||(W=d("string_decoder/").StringDecoder);var yt=new W(_t);this._readableState.decoder=yt,this._readableState.encoding=this._readableState.decoder.encoding;for(var Bt=this._readableState.buffer.head,tt="";Bt!==null;)tt+=yt.write(Bt.data),Bt=Bt.next;return this._readableState.buffer.clear(),tt!==""&&this._readableState.buffer.push(tt),this._readableState.length=tt.length,this};var Rt=1073741824;function Tt(_t){return _t>=Rt?_t=Rt:(_t--,_t|=_t>>>1,_t|=_t>>>2,_t|=_t>>>4,_t|=_t>>>8,_t|=_t>>>16,_t++),_t}function xt(_t,yt){return _t<=0||yt.length===0&&yt.ended?0:yt.objectMode?1:_t!=_t?yt.flowing&&yt.length?yt.buffer.head.data.length:yt.length:(_t>yt.highWaterMark&&(yt.highWaterMark=Tt(_t)),_t<=yt.length?_t:yt.ended?yt.length:(yt.needReadable=!0,0))}function $t(_t,yt){if(G("onEofChunk"),!yt.ended){if(yt.decoder){var Bt=yt.decoder.end();Bt&&Bt.length&&(yt.buffer.push(Bt),yt.length+=yt.objectMode?1:Bt.length)}yt.ended=!0,yt.sync?Et(_t):(yt.needReadable=!1,yt.emittedReadable||(yt.emittedReadable=!0,Pt(_t)))}}function Et(_t){var yt=_t._readableState;G("emitReadable",yt.needReadable,yt.emittedReadable),yt.needReadable=!1,yt.emittedReadable||(G("emitReadable",yt.flowing),yt.emittedReadable=!0,w.nextTick(Pt,_t))}function Pt(_t){var yt=_t._readableState;G("emitReadable_",yt.destroyed,yt.length,yt.ended),yt.destroyed||!yt.length&&!yt.ended||(_t.emit("readable"),yt.emittedReadable=!1),yt.needReadable=!yt.flowing&&!yt.ended&&yt.length<=yt.highWaterMark,Mt(_t)}function Ot(_t,yt){yt.readingMore||(yt.readingMore=!0,w.nextTick(Ct,_t,yt))}function Ct(_t,yt){for(;!yt.reading&&!yt.ended&&(yt.length<yt.highWaterMark||yt.flowing&&yt.length===0);){var Bt=yt.length;if(G("maybeReadMore read 0"),_t.read(0),Bt===yt.length)break}yt.readingMore=!1}function St(_t){return function(){var yt=_t._readableState;G("pipeOnDrain",yt.awaitDrain),yt.awaitDrain&&yt.awaitDrain--,yt.awaitDrain===0&&$(_t,"data")&&(yt.flowing=!0,Mt(_t))}}function It(_t){var yt=_t._readableState;yt.readableListening=_t.listenerCount("readable")>0,yt.resumeScheduled&&!yt.paused?yt.flowing=!0:_t.listenerCount("data")>0&&_t.resume()}function Ft(_t){G("readable nexttick read 0"),_t.read(0)}function Ut(_t,yt){yt.resumeScheduled||(yt.resumeScheduled=!0,w.nextTick(jt,_t,yt))}function jt(_t,yt){G("resume",yt.reading),yt.reading||_t.read(0),yt.resumeScheduled=!1,_t.emit("resume"),Mt(_t),yt.flowing&&!yt.reading&&_t.read(0)}function Mt(_t){var yt=_t._readableState;for(G("flow",yt.flowing);yt.flowing&&_t.read()!==null;);}function nt(_t,yt){return yt.length===0?null:(yt.objectMode?Bt=yt.buffer.shift():!_t||_t>=yt.length?(Bt=yt.decoder?yt.buffer.join(""):yt.buffer.length===1?yt.buffer.first():yt.buffer.concat(yt.length),yt.buffer.clear()):Bt=yt.buffer.consume(_t,yt.decoder),Bt);var Bt}function At(_t){var yt=_t._readableState;G("endReadable",yt.endEmitted),yt.endEmitted||(yt.ended=!0,w.nextTick(mt,yt,_t))}function mt(_t,yt){if(G("endReadableNT",_t.endEmitted,_t.length),!_t.endEmitted&&_t.length===0&&(_t.endEmitted=!0,yt.readable=!1,yt.emit("end"),_t.autoDestroy)){var Bt=yt._writableState;(!Bt||Bt.autoDestroy&&Bt.finished)&&yt.destroy()}}function gt(_t,yt){for(var Bt=0,tt=_t.length;Bt<tt;Bt++)if(_t[Bt]===yt)return Bt;return-1}vt.prototype.read=function(_t){G("read",_t),_t=parseInt(_t,10);var yt=this._readableState,Bt=_t;if(_t!==0&&(yt.emittedReadable=!1),_t===0&&yt.needReadable&&((yt.highWaterMark!==0?yt.length>=yt.highWaterMark:yt.length>0)||yt.ended))return G("read: emitReadable",yt.length,yt.ended),yt.length===0&&yt.ended?At(this):Et(this),null;if((_t=xt(_t,yt))===0&&yt.ended)return yt.length===0&&At(this),null;var tt,ut=yt.needReadable;return G("need readable",ut),(yt.length===0||yt.length-_t<yt.highWaterMark)&&G("length less than watermark",ut=!0),yt.ended||yt.reading?G("reading or ended",ut=!1):ut&&(G("do read"),yt.reading=!0,yt.sync=!0,yt.length===0&&(yt.needReadable=!0),this._read(yt.highWaterMark),yt.sync=!1,yt.reading||(_t=xt(Bt,yt))),(tt=_t>0?nt(_t,yt):null)===null?(yt.needReadable=yt.length<=yt.highWaterMark,_t=0):(yt.length-=_t,yt.awaitDrain=0),yt.length===0&&(yt.ended||(yt.needReadable=!0),Bt!==_t&&yt.ended&&At(this)),tt!==null&&this.emit("data",tt),tt},vt.prototype._read=function(_t){at(this,new it("_read()"))},vt.prototype.pipe=function(_t,yt){var Bt=this,tt=this._readableState;switch(tt.pipesCount){case 0:tt.pipes=_t;break;case 1:tt.pipes=[tt.pipes,_t];break;default:tt.pipes.push(_t)}tt.pipesCount+=1,G("pipe count=%d opts=%j",tt.pipesCount,yt);var ut=yt&&yt.end===!1||_t===w.stdout||_t===w.stderr?oe:wt;function bt(ne,ae){G("onunpipe"),ne===Bt&&ae&&ae.hasUnpiped===!1&&(ae.hasUnpiped=!0,Kt())}function wt(){G("onend"),_t.end()}tt.endEmitted?w.nextTick(ut):Bt.once("end",ut),_t.on("unpipe",bt);var zt=St(Bt);_t.on("drain",zt);var Zt=!1;function Kt(){G("cleanup"),_t.removeListener("close",ee),_t.removeListener("finish",Jt),_t.removeListener("drain",zt),_t.removeListener("error",Vt),_t.removeListener("unpipe",bt),Bt.removeListener("end",wt),Bt.removeListener("end",oe),Bt.removeListener("data",te),Zt=!0,!tt.awaitDrain||_t._writableState&&!_t._writableState.needDrain||zt()}function te(ne){G("ondata");var ae=_t.write(ne);G("dest.write",ae),ae===!1&&((tt.pipesCount===1&&tt.pipes===_t||tt.pipesCount>1&&gt(tt.pipes,_t)!==-1)&&!Zt&&(G("false write response, pause",tt.awaitDrain),tt.awaitDrain++),Bt.pause())}function Vt(ne){G("onerror",ne),oe(),_t.removeListener("error",Vt),$(_t,"error")===0&&at(_t,ne)}function ee(){_t.removeListener("finish",Jt),oe()}function Jt(){G("onfinish"),_t.removeListener("close",ee),oe()}function oe(){G("unpipe"),Bt.unpipe(_t)}return Bt.on("data",te),K(_t,"error",Vt),_t.once("close",ee),_t.once("finish",Jt),_t.emit("pipe",Bt),tt.flowing||(G("pipe resume"),Bt.resume()),_t},vt.prototype.unpipe=function(_t){var yt=this._readableState,Bt={hasUnpiped:!1};if(yt.pipesCount===0)return this;if(yt.pipesCount===1)return _t&&_t!==yt.pipes||(_t||(_t=yt.pipes),yt.pipes=null,yt.pipesCount=0,yt.flowing=!1,_t&&_t.emit("unpipe",this,Bt)),this;if(!_t){var tt=yt.pipes,ut=yt.pipesCount;yt.pipes=null,yt.pipesCount=0,yt.flowing=!1;for(var bt=0;bt<ut;bt++)tt[bt].emit("unpipe",this,{hasUnpiped:!1});return this}var wt=gt(yt.pipes,_t);return wt===-1||(yt.pipes.splice(wt,1),yt.pipesCount-=1,yt.pipesCount===1&&(yt.pipes=yt.pipes[0]),_t.emit("unpipe",this,Bt)),this},vt.prototype.on=function(_t,yt){var Bt=F.prototype.on.call(this,_t,yt),tt=this._readableState;return _t==="data"?(tt.readableListening=this.listenerCount("readable")>0,tt.flowing!==!1&&this.resume()):_t==="readable"&&(tt.endEmitted||tt.readableListening||(tt.readableListening=tt.needReadable=!0,tt.flowing=!1,tt.emittedReadable=!1,G("on readable",tt.length,tt.reading),tt.length?Et(this):tt.reading||w.nextTick(Ft,this))),Bt},vt.prototype.addListener=vt.prototype.on,vt.prototype.removeListener=function(_t,yt){var Bt=F.prototype.removeListener.call(this,_t,yt);return _t==="readable"&&w.nextTick(It,this),Bt},vt.prototype.removeAllListeners=function(_t){var yt=F.prototype.removeAllListeners.apply(this,arguments);return _t!=="readable"&&_t!==void 0||w.nextTick(It,this),yt},vt.prototype.resume=function(){var _t=this._readableState;return _t.flowing||(G("resume"),_t.flowing=!_t.readableListening,Ut(this,_t)),_t.paused=!1,this},vt.prototype.pause=function(){return G("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(G("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},vt.prototype.wrap=function(_t){var yt=this,Bt=this._readableState,tt=!1;for(var ut in _t.on("end",function(){if(G("wrapped end"),Bt.decoder&&!Bt.ended){var wt=Bt.decoder.end();wt&&wt.length&&yt.push(wt)}yt.push(null)}),_t.on("data",function(wt){G("wrapped data"),Bt.decoder&&(wt=Bt.decoder.write(wt)),Bt.objectMode&&wt==null||(Bt.objectMode||wt&&wt.length)&&(yt.push(wt)||(tt=!0,_t.pause()))}),_t)this[ut]===void 0&&typeof _t[ut]=="function"&&(this[ut]=function(wt){return function(){return _t[wt].apply(_t,arguments)}}(ut));for(var bt=0;bt<ft.length;bt++)_t.on(ft[bt],this.emit.bind(this,ft[bt]));return this._read=function(wt){G("wrapped _read",wt),tt&&(tt=!1,_t.resume())},this},typeof Symbol=="function"&&(vt.prototype[Symbol.asyncIterator]=function(){return q===void 0&&(q=d("./internal/streams/async_iterator")),q(this)}),Object.defineProperty(vt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(vt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(vt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(_t){this._readableState&&(this._readableState.flowing=_t)}}),vt._fromList=nt,Object.defineProperty(vt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(vt.from=function(_t,yt){return Q===void 0&&(Q=d("./internal/streams/from")),Q(vt,_t,yt)})}).call(this)}).call(this,d("_process"),commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":66,"./_stream_duplex":67,"./internal/streams/async_iterator":72,"./internal/streams/buffer_list":73,"./internal/streams/destroy":74,"./internal/streams/from":76,"./internal/streams/state":78,"./internal/streams/stream":79,_process:63,buffer:32,events:35,inherits:46,"string_decoder/":80,util:29}],70:[function(d,m,g){m.exports=j;var w=d("../errors").codes,I=w.ERR_METHOD_NOT_IMPLEMENTED,P=w.ERR_MULTIPLE_CALLBACK,$=w.ERR_TRANSFORM_ALREADY_TRANSFORMING,F=w.ERR_TRANSFORM_WITH_LENGTH_0,D=d("./_stream_duplex");function U(H,W){var q=this._transformState;q.transforming=!1;var Q=q.writecb;if(Q===null)return this.emit("error",new P);q.writechunk=null,q.writecb=null,W!=null&&this.push(W),Q(H);var et=this._readableState;et.reading=!1,(et.needReadable||et.length<et.highWaterMark)&&this._read(et.highWaterMark)}function j(H){if(!(this instanceof j))return new j(H);D.call(this,H),this._transformState={afterTransform:U.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,H&&(typeof H.transform=="function"&&(this._transform=H.transform),typeof H.flush=="function"&&(this._flush=H.flush)),this.on("prefinish",Z)}function Z(){var H=this;typeof this._flush!="function"||this._readableState.destroyed?G(this,null,null):this._flush(function(W,q){G(H,W,q)})}function G(H,W,q){if(W)return H.emit("error",W);if(q!=null&&H.push(q),H._writableState.length)throw new F;if(H._transformState.transforming)throw new $;return H.push(null)}d("inherits")(j,D),j.prototype.push=function(H,W){return this._transformState.needTransform=!1,D.prototype.push.call(this,H,W)},j.prototype._transform=function(H,W,q){q(new I("_transform()"))},j.prototype._write=function(H,W,q){var Q=this._transformState;if(Q.writecb=q,Q.writechunk=H,Q.writeencoding=W,!Q.transforming){var et=this._readableState;(Q.needTransform||et.needReadable||et.length<et.highWaterMark)&&this._read(et.highWaterMark)}},j.prototype._read=function(H){var W=this._transformState;W.writechunk===null||W.transforming?W.needTransform=!0:(W.transforming=!0,this._transform(W.writechunk,W.writeencoding,W.afterTransform))},j.prototype._destroy=function(H,W){D.prototype._destroy.call(this,H,function(q){W(q)})}},{"../errors":66,"./_stream_duplex":67,inherits:46}],71:[function(d,m,g){(function(w,I){(function(){function P(Mt){var nt=this;this.next=null,this.entry=null,this.finish=function(){jt(nt,Mt)}}var $;m.exports=lt,lt.WritableState=K;var F={deprecate:d("util-deprecate")},D=d("./internal/streams/stream"),U=d("buffer").Buffer,j=I.Uint8Array||function(){};function Z(Mt){return U.from(Mt)}function G(Mt){return U.isBuffer(Mt)||Mt instanceof j}var H,W=d("./internal/streams/destroy"),q=d("./internal/streams/state").getHighWaterMark,Q=d("../errors").codes,et=Q.ERR_INVALID_ARG_TYPE,J=Q.ERR_METHOD_NOT_IMPLEMENTED,V=Q.ERR_MULTIPLE_CALLBACK,rt=Q.ERR_STREAM_CANNOT_PIPE,X=Q.ERR_STREAM_DESTROYED,ot=Q.ERR_STREAM_NULL_VALUES,it=Q.ERR_STREAM_WRITE_AFTER_END,st=Q.ERR_UNKNOWN_ENCODING,at=W.errorOrDestroy;function ft(){}function K(Mt,nt,At){$=$||d("./_stream_duplex"),Mt=Mt||{},typeof At!="boolean"&&(At=nt instanceof $),this.objectMode=!!Mt.objectMode,At&&(this.objectMode=this.objectMode||!!Mt.writableObjectMode),this.highWaterMark=q(this,Mt,"writableHighWaterMark",At),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var mt=Mt.decodeStrings===!1;this.decodeStrings=!mt,this.defaultEncoding=Mt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(gt){$t(nt,gt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Mt.emitClose!==!1,this.autoDestroy=!!Mt.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new P(this)}function lt(Mt){var nt=this instanceof($=$||d("./_stream_duplex"));if(!nt&&!H.call(lt,this))return new lt(Mt);this._writableState=new K(Mt,this,nt),this.writable=!0,Mt&&(typeof Mt.write=="function"&&(this._write=Mt.write),typeof Mt.writev=="function"&&(this._writev=Mt.writev),typeof Mt.destroy=="function"&&(this._destroy=Mt.destroy),typeof Mt.final=="function"&&(this._final=Mt.final)),D.call(this)}function vt(Mt,nt){var At=new it;at(Mt,At),w.nextTick(nt,At)}function dt(Mt,nt,At,mt){var gt;return At===null?gt=new ot:typeof At=="string"||nt.objectMode||(gt=new et("chunk",["string","Buffer"],At)),!gt||(at(Mt,gt),w.nextTick(mt,gt),!1)}function ht(Mt,nt,At){return Mt.objectMode||Mt.decodeStrings===!1||typeof nt!="string"||(nt=U.from(nt,At)),nt}function pt(Mt,nt,At,mt,gt,_t){if(!At){var yt=ht(nt,mt,gt);mt!==yt&&(At=!0,gt="buffer",mt=yt)}var Bt=nt.objectMode?1:mt.length;nt.length+=Bt;var tt=nt.length<nt.highWaterMark;if(tt||(nt.needDrain=!0),nt.writing||nt.corked){var ut=nt.lastBufferedRequest;nt.lastBufferedRequest={chunk:mt,encoding:gt,isBuf:At,callback:_t,next:null},ut?ut.next=nt.lastBufferedRequest:nt.bufferedRequest=nt.lastBufferedRequest,nt.bufferedRequestCount+=1}else Rt(Mt,nt,!1,Bt,mt,gt,_t);return tt}function Rt(Mt,nt,At,mt,gt,_t,yt){nt.writelen=mt,nt.writecb=yt,nt.writing=!0,nt.sync=!0,nt.destroyed?nt.onwrite(new X("write")):At?Mt._writev(gt,nt.onwrite):Mt._write(gt,_t,nt.onwrite),nt.sync=!1}function Tt(Mt,nt,At,mt,gt){--nt.pendingcb,At?(w.nextTick(gt,mt),w.nextTick(Ft,Mt,nt),Mt._writableState.errorEmitted=!0,at(Mt,mt)):(gt(mt),Mt._writableState.errorEmitted=!0,at(Mt,mt),Ft(Mt,nt))}function xt(Mt){Mt.writing=!1,Mt.writecb=null,Mt.length-=Mt.writelen,Mt.writelen=0}function $t(Mt,nt){var At=Mt._writableState,mt=At.sync,gt=At.writecb;if(typeof gt!="function")throw new V;if(xt(At),nt)Tt(Mt,At,mt,nt,gt);else{var _t=Ct(At)||Mt.destroyed;_t||At.corked||At.bufferProcessing||!At.bufferedRequest||Ot(Mt,At),mt?w.nextTick(Et,Mt,At,_t,gt):Et(Mt,At,_t,gt)}}function Et(Mt,nt,At,mt){At||Pt(Mt,nt),nt.pendingcb--,mt(),Ft(Mt,nt)}function Pt(Mt,nt){nt.length===0&&nt.needDrain&&(nt.needDrain=!1,Mt.emit("drain"))}function Ot(Mt,nt){nt.bufferProcessing=!0;var At=nt.bufferedRequest;if(Mt._writev&&At&&At.next){var mt=nt.bufferedRequestCount,gt=new Array(mt),_t=nt.corkedRequestsFree;_t.entry=At;for(var yt=0,Bt=!0;At;)gt[yt]=At,At.isBuf||(Bt=!1),At=At.next,yt+=1;gt.allBuffers=Bt,Rt(Mt,nt,!0,nt.length,gt,"",_t.finish),nt.pendingcb++,nt.lastBufferedRequest=null,_t.next?(nt.corkedRequestsFree=_t.next,_t.next=null):nt.corkedRequestsFree=new P(nt),nt.bufferedRequestCount=0}else{for(;At;){var tt=At.chunk,ut=At.encoding,bt=At.callback;if(Rt(Mt,nt,!1,nt.objectMode?1:tt.length,tt,ut,bt),At=At.next,nt.bufferedRequestCount--,nt.writing)break}At===null&&(nt.lastBufferedRequest=null)}nt.bufferedRequest=At,nt.bufferProcessing=!1}function Ct(Mt){return Mt.ending&&Mt.length===0&&Mt.bufferedRequest===null&&!Mt.finished&&!Mt.writing}function St(Mt,nt){Mt._final(function(At){nt.pendingcb--,At&&at(Mt,At),nt.prefinished=!0,Mt.emit("prefinish"),Ft(Mt,nt)})}function It(Mt,nt){nt.prefinished||nt.finalCalled||(typeof Mt._final!="function"||nt.destroyed?(nt.prefinished=!0,Mt.emit("prefinish")):(nt.pendingcb++,nt.finalCalled=!0,w.nextTick(St,Mt,nt)))}function Ft(Mt,nt){var At=Ct(nt);if(At&&(It(Mt,nt),nt.pendingcb===0&&(nt.finished=!0,Mt.emit("finish"),nt.autoDestroy))){var mt=Mt._readableState;(!mt||mt.autoDestroy&&mt.endEmitted)&&Mt.destroy()}return At}function Ut(Mt,nt,At){nt.ending=!0,Ft(Mt,nt),At&&(nt.finished?w.nextTick(At):Mt.once("finish",At)),nt.ended=!0,Mt.writable=!1}function jt(Mt,nt,At){var mt=Mt.entry;for(Mt.entry=null;mt;){var gt=mt.callback;nt.pendingcb--,gt(At),mt=mt.next}nt.corkedRequestsFree.next=Mt}d("inherits")(lt,D),K.prototype.getBuffer=function(){for(var Mt=this.bufferedRequest,nt=[];Mt;)nt.push(Mt),Mt=Mt.next;return nt},function(){try{Object.defineProperty(K.prototype,"buffer",{get:F.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(H=Function.prototype[Symbol.hasInstance],Object.defineProperty(lt,Symbol.hasInstance,{value:function(Mt){return!!H.call(this,Mt)||this===lt&&Mt&&Mt._writableState instanceof K}})):H=function(Mt){return Mt instanceof this},lt.prototype.pipe=function(){at(this,new rt)},lt.prototype.write=function(Mt,nt,At){var mt=this._writableState,gt=!1,_t=!mt.objectMode&&G(Mt);return _t&&!U.isBuffer(Mt)&&(Mt=Z(Mt)),typeof nt=="function"&&(At=nt,nt=null),_t?nt="buffer":nt||(nt=mt.defaultEncoding),typeof At!="function"&&(At=ft),mt.ending?vt(this,At):(_t||dt(this,mt,Mt,At))&&(mt.pendingcb++,gt=pt(this,mt,_t,Mt,nt,At)),gt},lt.prototype.cork=function(){this._writableState.corked++},lt.prototype.uncork=function(){var Mt=this._writableState;Mt.corked&&(Mt.corked--,Mt.writing||Mt.corked||Mt.bufferProcessing||!Mt.bufferedRequest||Ot(this,Mt))},lt.prototype.setDefaultEncoding=function(Mt){if(typeof Mt=="string"&&(Mt=Mt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Mt+"").toLowerCase())>-1))throw new st(Mt);return this._writableState.defaultEncoding=Mt,this},Object.defineProperty(lt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(lt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),lt.prototype._write=function(Mt,nt,At){At(new J("_write()"))},lt.prototype._writev=null,lt.prototype.end=function(Mt,nt,At){var mt=this._writableState;return typeof Mt=="function"?(At=Mt,Mt=null,nt=null):typeof nt=="function"&&(At=nt,nt=null),Mt!=null&&this.write(Mt,nt),mt.corked&&(mt.corked=1,this.uncork()),mt.ending||Ut(this,mt,At),this},Object.defineProperty(lt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(lt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Mt){this._writableState&&(this._writableState.destroyed=Mt)}}),lt.prototype.destroy=W.destroy,lt.prototype._undestroy=W.undestroy,lt.prototype._destroy=function(Mt,nt){nt(Mt)}}).call(this)}).call(this,d("_process"),commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":66,"./_stream_duplex":67,"./internal/streams/destroy":74,"./internal/streams/state":78,"./internal/streams/stream":79,_process:63,buffer:32,inherits:46,"util-deprecate":81}],72:[function(d,m,g){(function(w){(function(){var I;function P(X,ot,it){return ot in X?Object.defineProperty(X,ot,{value:it,enumerable:!0,configurable:!0,writable:!0}):X[ot]=it,X}var $=d("./end-of-stream"),F=Symbol("lastResolve"),D=Symbol("lastReject"),U=Symbol("error"),j=Symbol("ended"),Z=Symbol("lastPromise"),G=Symbol("handlePromise"),H=Symbol("stream");function W(X,ot){return{value:X,done:ot}}function q(X){var ot=X[F];if(ot!==null){var it=X[H].read();it!==null&&(X[Z]=null,X[F]=null,X[D]=null,ot(W(it,!1)))}}function Q(X){w.nextTick(q,X)}function et(X,ot){return function(it,st){X.then(function(){ot[j]?it(W(void 0,!0)):ot[G](it,st)},st)}}var J=Object.getPrototypeOf(function(){}),V=Object.setPrototypeOf((I={get stream(){return this[H]},next:function(){var X=this,ot=this[U];if(ot!==null)return Promise.reject(ot);if(this[j])return Promise.resolve(W(void 0,!0));if(this[H].destroyed)return new Promise(function(ft,K){w.nextTick(function(){X[U]?K(X[U]):ft(W(void 0,!0))})});var it,st=this[Z];if(st)it=new Promise(et(st,this));else{var at=this[H].read();if(at!==null)return Promise.resolve(W(at,!1));it=new Promise(this[G])}return this[Z]=it,it}},P(I,Symbol.asyncIterator,function(){return this}),P(I,"return",function(){var X=this;return new Promise(function(ot,it){X[H].destroy(null,function(st){st?it(st):ot(W(void 0,!0))})})}),I),J),rt=function(X){var ot,it=Object.create(V,(P(ot={},H,{value:X,writable:!0}),P(ot,F,{value:null,writable:!0}),P(ot,D,{value:null,writable:!0}),P(ot,U,{value:null,writable:!0}),P(ot,j,{value:X._readableState.endEmitted,writable:!0}),P(ot,G,{value:function(st,at){var ft=it[H].read();ft?(it[Z]=null,it[F]=null,it[D]=null,st(W(ft,!1))):(it[F]=st,it[D]=at)},writable:!0}),ot));return it[Z]=null,$(X,function(st){if(st&&st.code!=="ERR_STREAM_PREMATURE_CLOSE"){var at=it[D];return at!==null&&(it[Z]=null,it[F]=null,it[D]=null,at(st)),void(it[U]=st)}var ft=it[F];ft!==null&&(it[Z]=null,it[F]=null,it[D]=null,ft(W(void 0,!0))),it[j]=!0}),X.on("readable",Q.bind(null,it)),it};m.exports=rt}).call(this)}).call(this,d("_process"))},{"./end-of-stream":75,_process:63}],73:[function(d,m,g){function w(H,W){var q=Object.keys(H);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(H);W&&(Q=Q.filter(function(et){return Object.getOwnPropertyDescriptor(H,et).enumerable})),q.push.apply(q,Q)}return q}function I(H){for(var W=1;W<arguments.length;W++){var q=arguments[W]!=null?arguments[W]:{};W%2?w(Object(q),!0).forEach(function(Q){P(H,Q,q[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(q)):w(Object(q)).forEach(function(Q){Object.defineProperty(H,Q,Object.getOwnPropertyDescriptor(q,Q))})}return H}function P(H,W,q){return W in H?Object.defineProperty(H,W,{value:q,enumerable:!0,configurable:!0,writable:!0}):H[W]=q,H}function $(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")}function F(H,W){for(var q=0;q<W.length;q++){var Q=W[q];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(H,Q.key,Q)}}function D(H,W,q){return F(H.prototype,W),H}var U=d("buffer").Buffer,j=d("util").inspect,Z=j&&j.custom||"inspect";function G(H,W,q){U.prototype.copy.call(H,W,q)}m.exports=function(){function H(){$(this,H),this.head=null,this.tail=null,this.length=0}return D(H,[{key:"push",value:function(W){var q={data:W,next:null};this.length>0?this.tail.next=q:this.head=q,this.tail=q,++this.length}},{key:"unshift",value:function(W){var q={data:W,next:this.head};this.length===0&&(this.tail=q),this.head=q,++this.length}},{key:"shift",value:function(){if(this.length!==0){var W=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,W}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(W){if(this.length===0)return"";for(var q=this.head,Q=""+q.data;q=q.next;)Q+=W+q.data;return Q}},{key:"concat",value:function(W){if(this.length===0)return U.alloc(0);for(var q=U.allocUnsafe(W>>>0),Q=this.head,et=0;Q;)G(Q.data,q,et),et+=Q.data.length,Q=Q.next;return q}},{key:"consume",value:function(W,q){var Q;return W<this.head.data.length?(Q=this.head.data.slice(0,W),this.head.data=this.head.data.slice(W)):Q=W===this.head.data.length?this.shift():q?this._getString(W):this._getBuffer(W),Q}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(W){var q=this.head,Q=1,et=q.data;for(W-=et.length;q=q.next;){var J=q.data,V=W>J.length?J.length:W;if(V===J.length?et+=J:et+=J.slice(0,W),(W-=V)==0){V===J.length?(++Q,q.next?this.head=q.next:this.head=this.tail=null):(this.head=q,q.data=J.slice(V));break}++Q}return this.length-=Q,et}},{key:"_getBuffer",value:function(W){var q=U.allocUnsafe(W),Q=this.head,et=1;for(Q.data.copy(q),W-=Q.data.length;Q=Q.next;){var J=Q.data,V=W>J.length?J.length:W;if(J.copy(q,q.length-W,0,V),(W-=V)==0){V===J.length?(++et,Q.next?this.head=Q.next:this.head=this.tail=null):(this.head=Q,Q.data=J.slice(V));break}++et}return this.length-=et,q}},{key:Z,value:function(W,q){return j(this,I({},q,{depth:0,customInspect:!1}))}}]),H}()},{buffer:32,util:29}],74:[function(d,m,g){(function(w){(function(){function I(j,Z){var G=this,H=this._readableState&&this._readableState.destroyed,W=this._writableState&&this._writableState.destroyed;return H||W?(Z?Z(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,w.nextTick(D,this,j)):w.nextTick(D,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(q){!Z&&q?G._writableState?G._writableState.errorEmitted?w.nextTick($,G):(G._writableState.errorEmitted=!0,w.nextTick(P,G,q)):w.nextTick(P,G,q):Z?(w.nextTick($,G),Z(q)):w.nextTick($,G)}),this)}function P(j,Z){D(j,Z),$(j)}function $(j){j._writableState&&!j._writableState.emitClose||j._readableState&&!j._readableState.emitClose||j.emit("close")}function F(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function D(j,Z){j.emit("error",Z)}function U(j,Z){var G=j._readableState,H=j._writableState;G&&G.autoDestroy||H&&H.autoDestroy?j.destroy(Z):j.emit("error",Z)}m.exports={destroy:I,undestroy:F,errorOrDestroy:U}}).call(this)}).call(this,d("_process"))},{_process:63}],75:[function(d,m,g){var w=d("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function I(D){var U=!1;return function(){if(!U){U=!0;for(var j=arguments.length,Z=new Array(j),G=0;G<j;G++)Z[G]=arguments[G];D.apply(this,Z)}}}function P(){}function $(D){return D.setHeader&&typeof D.abort=="function"}function F(D,U,j){if(typeof U=="function")return F(D,null,U);U||(U={}),j=I(j||P);var Z=U.readable||U.readable!==!1&&D.readable,G=U.writable||U.writable!==!1&&D.writable,H=function(){D.writable||q()},W=D._writableState&&D._writableState.finished,q=function(){G=!1,W=!0,Z||j.call(D)},Q=D._readableState&&D._readableState.endEmitted,et=function(){Z=!1,Q=!0,G||j.call(D)},J=function(X){j.call(D,X)},V=function(){var X;return Z&&!Q?(D._readableState&&D._readableState.ended||(X=new w),j.call(D,X)):G&&!W?(D._writableState&&D._writableState.ended||(X=new w),j.call(D,X)):void 0},rt=function(){D.req.on("finish",q)};return $(D)?(D.on("complete",q),D.on("abort",V),D.req?rt():D.on("request",rt)):G&&!D._writableState&&(D.on("end",H),D.on("close",H)),D.on("end",et),D.on("finish",q),U.error!==!1&&D.on("error",J),D.on("close",V),function(){D.removeListener("complete",q),D.removeListener("abort",V),D.removeListener("request",rt),D.req&&D.req.removeListener("finish",q),D.removeListener("end",H),D.removeListener("close",H),D.removeListener("finish",q),D.removeListener("end",et),D.removeListener("error",J),D.removeListener("close",V)}}m.exports=F},{"../../../errors":66}],76:[function(d,m,g){m.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],77:[function(d,m,g){var w;function I(q){var Q=!1;return function(){Q||(Q=!0,q.apply(void 0,arguments))}}var P=d("../../../errors").codes,$=P.ERR_MISSING_ARGS,F=P.ERR_STREAM_DESTROYED;function D(q){if(q)throw q}function U(q){return q.setHeader&&typeof q.abort=="function"}function j(q,Q,et,J){J=I(J);var V=!1;q.on("close",function(){V=!0}),w===void 0&&(w=d("./end-of-stream")),w(q,{readable:Q,writable:et},function(X){if(X)return J(X);V=!0,J()});var rt=!1;return function(X){if(!V&&!rt)return rt=!0,U(q)?q.abort():typeof q.destroy=="function"?q.destroy():void J(X||new F("pipe"))}}function Z(q){q()}function G(q,Q){return q.pipe(Q)}function H(q){return q.length?typeof q[q.length-1]!="function"?D:q.pop():D}function W(){for(var q=arguments.length,Q=new Array(q),et=0;et<q;et++)Q[et]=arguments[et];var J,V=H(Q);if(Array.isArray(Q[0])&&(Q=Q[0]),Q.length<2)throw new $("streams");var rt=Q.map(function(X,ot){var it=ot<Q.length-1;return j(X,it,ot>0,function(st){J||(J=st),st&&rt.forEach(Z),it||(rt.forEach(Z),V(J))})});return Q.reduce(G)}m.exports=W},{"../../../errors":66,"./end-of-stream":75}],78:[function(d,m,g){var w=d("../../../errors").codes.ERR_INVALID_OPT_VALUE;function I($,F,D){return $.highWaterMark!=null?$.highWaterMark:F?$[D]:null}function P($,F,D,U){var j=I(F,U,D);if(j!=null){if(!isFinite(j)||Math.floor(j)!==j||j<0)throw new w(U?D:"highWaterMark",j);return Math.floor(j)}return $.objectMode?16:16384}m.exports={getHighWaterMark:P}},{"../../../errors":66}],79:[function(d,m,g){m.exports=d("events").EventEmitter},{events:35}],80:[function(d,m,g){var w=d("safe-buffer").Buffer,I=w.isEncoding||function(rt){switch((rt=""+rt)&&rt.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function P(rt){if(!rt)return"utf8";for(var X;;)switch(rt){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return rt;default:if(X)return;rt=(""+rt).toLowerCase(),X=!0}}function $(rt){var X=P(rt);if(typeof X!="string"&&(w.isEncoding===I||!I(rt)))throw new Error("Unknown encoding: "+rt);return X||rt}function F(rt){var X;switch(this.encoding=$(rt),this.encoding){case"utf16le":this.text=W,this.end=q,X=4;break;case"utf8":this.fillLast=Z,X=4;break;case"base64":this.text=Q,this.end=et,X=3;break;default:return this.write=J,void(this.end=V)}this.lastNeed=0,this.lastTotal=0,this.lastChar=w.allocUnsafe(X)}function D(rt){return rt<=127?0:rt>>5==6?2:rt>>4==14?3:rt>>3==30?4:rt>>6==2?-1:-2}function U(rt,X,ot){var it=X.length-1;if(it<ot)return 0;var st=D(X[it]);return st>=0?(st>0&&(rt.lastNeed=st-1),st):--it<ot||st===-2?0:(st=D(X[it]))>=0?(st>0&&(rt.lastNeed=st-2),st):--it<ot||st===-2?0:(st=D(X[it]))>=0?(st>0&&(st===2?st=0:rt.lastNeed=st-3),st):0}function j(rt,X,ot){if((192&X[0])!=128)return rt.lastNeed=0,"";if(rt.lastNeed>1&&X.length>1){if((192&X[1])!=128)return rt.lastNeed=1,"";if(rt.lastNeed>2&&X.length>2&&(192&X[2])!=128)return rt.lastNeed=2,""}}function Z(rt){var X=this.lastTotal-this.lastNeed,ot=j(this,rt);return ot!==void 0?ot:this.lastNeed<=rt.length?(rt.copy(this.lastChar,X,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(rt.copy(this.lastChar,X,0,rt.length),void(this.lastNeed-=rt.length))}function G(rt,X){var ot=U(this,rt,X);if(!this.lastNeed)return rt.toString("utf8",X);this.lastTotal=ot;var it=rt.length-(ot-this.lastNeed);return rt.copy(this.lastChar,0,it),rt.toString("utf8",X,it)}function H(rt){var X=rt&&rt.length?this.write(rt):"";return this.lastNeed?X+"":X}function W(rt,X){if((rt.length-X)%2==0){var ot=rt.toString("utf16le",X);if(ot){var it=ot.charCodeAt(ot.length-1);if(it>=55296&&it<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=rt[rt.length-2],this.lastChar[1]=rt[rt.length-1],ot.slice(0,-1)}return ot}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=rt[rt.length-1],rt.toString("utf16le",X,rt.length-1)}function q(rt){var X=rt&&rt.length?this.write(rt):"";if(this.lastNeed){var ot=this.lastTotal-this.lastNeed;return X+this.lastChar.toString("utf16le",0,ot)}return X}function Q(rt,X){var ot=(rt.length-X)%3;return ot===0?rt.toString("base64",X):(this.lastNeed=3-ot,this.lastTotal=3,ot===1?this.lastChar[0]=rt[rt.length-1]:(this.lastChar[0]=rt[rt.length-2],this.lastChar[1]=rt[rt.length-1]),rt.toString("base64",X,rt.length-ot))}function et(rt){var X=rt&&rt.length?this.write(rt):"";return this.lastNeed?X+this.lastChar.toString("base64",0,3-this.lastNeed):X}function J(rt){return rt.toString(this.encoding)}function V(rt){return rt&&rt.length?this.write(rt):""}g.StringDecoder=F,F.prototype.write=function(rt){if(rt.length===0)return"";var X,ot;if(this.lastNeed){if((X=this.fillLast(rt))===void 0)return"";ot=this.lastNeed,this.lastNeed=0}else ot=0;return ot<rt.length?X?X+this.text(rt,ot):this.text(rt,ot):X||""},F.prototype.end=H,F.prototype.text=G,F.prototype.fillLast=function(rt){if(this.lastNeed<=rt.length)return rt.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);rt.copy(this.lastChar,this.lastTotal-this.lastNeed,0,rt.length),this.lastNeed-=rt.length}},{"safe-buffer":64}],81:[function(d,m,g){(function(w){(function(){function I($,F){if(P("noDeprecation"))return $;var D=!1;function U(){if(!D){if(P("throwDeprecation"))throw new Error(F);P("traceDeprecation")?console.trace(F):console.warn(F),D=!0}return $.apply(this,arguments)}return U}function P($){try{if(!w.localStorage)return!1}catch{return!1}var F=w.localStorage[$];return F!=null&&String(F).toLowerCase()==="true"}m.exports=I}).call(this)}).call(this,commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],82:[function(d,m,g){arguments[4][25][0].apply(g,arguments)},{dup:25}],83:[function(d,m,g){var w=d("is-arguments"),I=d("is-generator-function"),P=d("which-typed-array"),$=d("is-typed-array");function F(wt){return wt.call.bind(wt)}var D=typeof BigInt<"u",U=typeof Symbol<"u",j=F(Object.prototype.toString),Z=F(Number.prototype.valueOf),G=F(String.prototype.valueOf),H=F(Boolean.prototype.valueOf);if(D)var W=F(BigInt.prototype.valueOf);if(U)var q=F(Symbol.prototype.valueOf);function Q(wt,zt){if(typeof wt!="object")return!1;try{return zt(wt),!0}catch{return!1}}function et(wt){return typeof Promise<"u"&&wt instanceof Promise||wt!==null&&typeof wt=="object"&&typeof wt.then=="function"&&typeof wt.catch=="function"}function J(wt){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(wt):$(wt)||St(wt)}function V(wt){return P(wt)==="Uint8Array"}function rt(wt){return P(wt)==="Uint8ClampedArray"}function X(wt){return P(wt)==="Uint16Array"}function ot(wt){return P(wt)==="Uint32Array"}function it(wt){return P(wt)==="Int8Array"}function st(wt){return P(wt)==="Int16Array"}function at(wt){return P(wt)==="Int32Array"}function ft(wt){return P(wt)==="Float32Array"}function K(wt){return P(wt)==="Float64Array"}function lt(wt){return P(wt)==="BigInt64Array"}function vt(wt){return P(wt)==="BigUint64Array"}function dt(wt){return j(wt)==="[object Map]"}function ht(wt){return typeof Map<"u"&&(dt.working?dt(wt):wt instanceof Map)}function pt(wt){return j(wt)==="[object Set]"}function Rt(wt){return typeof Set<"u"&&(pt.working?pt(wt):wt instanceof Set)}function Tt(wt){return j(wt)==="[object WeakMap]"}function xt(wt){return typeof WeakMap<"u"&&(Tt.working?Tt(wt):wt instanceof WeakMap)}function $t(wt){return j(wt)==="[object WeakSet]"}function Et(wt){return $t(wt)}function Pt(wt){return j(wt)==="[object ArrayBuffer]"}function Ot(wt){return typeof ArrayBuffer<"u"&&(Pt.working?Pt(wt):wt instanceof ArrayBuffer)}function Ct(wt){return j(wt)==="[object DataView]"}function St(wt){return typeof DataView<"u"&&(Ct.working?Ct(wt):wt instanceof DataView)}g.isArgumentsObject=w,g.isGeneratorFunction=I,g.isTypedArray=$,g.isPromise=et,g.isArrayBufferView=J,g.isUint8Array=V,g.isUint8ClampedArray=rt,g.isUint16Array=X,g.isUint32Array=ot,g.isInt8Array=it,g.isInt16Array=st,g.isInt32Array=at,g.isFloat32Array=ft,g.isFloat64Array=K,g.isBigInt64Array=lt,g.isBigUint64Array=vt,dt.working=typeof Map<"u"&&dt(new Map),g.isMap=ht,pt.working=typeof Set<"u"&&pt(new Set),g.isSet=Rt,Tt.working=typeof WeakMap<"u"&&Tt(new WeakMap),g.isWeakMap=xt,$t.working=typeof WeakSet<"u"&&$t(new WeakSet),g.isWeakSet=Et,Pt.working=typeof ArrayBuffer<"u"&&Pt(new ArrayBuffer),g.isArrayBuffer=Ot,Ct.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Ct(new DataView(new ArrayBuffer(1),0,1)),g.isDataView=St;var It=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Ft(wt){return j(wt)==="[object SharedArrayBuffer]"}function Ut(wt){return It!==void 0&&(Ft.working===void 0&&(Ft.working=Ft(new It)),Ft.working?Ft(wt):wt instanceof It)}function jt(wt){return j(wt)==="[object AsyncFunction]"}function Mt(wt){return j(wt)==="[object Map Iterator]"}function nt(wt){return j(wt)==="[object Set Iterator]"}function At(wt){return j(wt)==="[object Generator]"}function mt(wt){return j(wt)==="[object WebAssembly.Module]"}function gt(wt){return Q(wt,Z)}function _t(wt){return Q(wt,G)}function yt(wt){return Q(wt,H)}function Bt(wt){return D&&Q(wt,W)}function tt(wt){return U&&Q(wt,q)}function ut(wt){return gt(wt)||_t(wt)||yt(wt)||Bt(wt)||tt(wt)}function bt(wt){return typeof Uint8Array<"u"&&(Ot(wt)||Ut(wt))}g.isSharedArrayBuffer=Ut,g.isAsyncFunction=jt,g.isMapIterator=Mt,g.isSetIterator=nt,g.isGeneratorObject=At,g.isWebAssemblyCompiledModule=mt,g.isNumberObject=gt,g.isStringObject=_t,g.isBooleanObject=yt,g.isBigIntObject=Bt,g.isSymbolObject=tt,g.isBoxedPrimitive=ut,g.isAnyArrayBuffer=bt,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(wt){Object.defineProperty(g,wt,{enumerable:!1,value:function(){throw new Error(wt+" is not supported in userland")}})})},{"is-arguments":47,"is-generator-function":49,"is-typed-array":50,"which-typed-array":85}],84:[function(d,m,g){(function(w){(function(){var I=Object.getOwnPropertyDescriptors||function(St){for(var It=Object.keys(St),Ft={},Ut=0;Ut<It.length;Ut++)Ft[It[Ut]]=Object.getOwnPropertyDescriptor(St,It[Ut]);return Ft},P=/%[sdj%]/g;g.format=function(St){if(!st(St)){for(var It=[],Ft=0;Ft<arguments.length;Ft++)It.push(U(arguments[Ft]));return It.join(" ")}Ft=1;for(var Ut=arguments,jt=Ut.length,Mt=String(St).replace(P,function(At){if(At==="%%")return"%";if(Ft>=jt)return At;switch(At){case"%s":return String(Ut[Ft++]);case"%d":return Number(Ut[Ft++]);case"%j":try{return JSON.stringify(Ut[Ft++])}catch{return"[Circular]"}default:return At}}),nt=Ut[Ft];Ft<jt;nt=Ut[++Ft])X(nt)||!lt(nt)?Mt+=" "+nt:Mt+=" "+U(nt);return Mt},g.deprecate=function(St,It){if(w!==void 0&&w.noDeprecation===!0)return St;if(w===void 0)return function(){return g.deprecate(St,It).apply(this,arguments)};var Ft=!1;function Ut(){if(!Ft){if(w.throwDeprecation)throw new Error(It);w.traceDeprecation?console.trace(It):console.error(It),Ft=!0}return St.apply(this,arguments)}return Ut};var $={},F=/^$/;if(w.env.NODE_DEBUG){var D=w.env.NODE_DEBUG;D=D.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),F=new RegExp("^"+D+"$","i")}function U(St,It){var Ft={seen:[],stylize:Z};return arguments.length>=3&&(Ft.depth=arguments[2]),arguments.length>=4&&(Ft.colors=arguments[3]),rt(It)?Ft.showHidden=It:It&&g._extend(Ft,It),ft(Ft.showHidden)&&(Ft.showHidden=!1),ft(Ft.depth)&&(Ft.depth=2),ft(Ft.colors)&&(Ft.colors=!1),ft(Ft.customInspect)&&(Ft.customInspect=!0),Ft.colors&&(Ft.stylize=j),H(Ft,St,Ft.depth)}function j(St,It){var Ft=U.styles[It];return Ft?"\x1B["+U.colors[Ft][0]+"m"+St+"\x1B["+U.colors[Ft][1]+"m":St}function Z(St,It){return St}function G(St){var It={};return St.forEach(function(Ft,Ut){It[Ft]=!0}),It}function H(St,It,Ft){if(St.customInspect&&It&&ht(It.inspect)&&It.inspect!==g.inspect&&(!It.constructor||It.constructor.prototype!==It)){var Ut=It.inspect(Ft,St);return st(Ut)||(Ut=H(St,Ut,Ft)),Ut}var jt=W(St,It);if(jt)return jt;var Mt=Object.keys(It),nt=G(Mt);if(St.showHidden&&(Mt=Object.getOwnPropertyNames(It)),dt(It)&&(Mt.indexOf("message")>=0||Mt.indexOf("description")>=0))return q(It);if(Mt.length===0){if(ht(It)){var At=It.name?": "+It.name:"";return St.stylize("[Function"+At+"]","special")}if(K(It))return St.stylize(RegExp.prototype.toString.call(It),"regexp");if(vt(It))return St.stylize(Date.prototype.toString.call(It),"date");if(dt(It))return q(It)}var mt,gt="",_t=!1,yt=["{","}"];return V(It)&&(_t=!0,yt=["[","]"]),ht(It)&&(gt=" [Function"+(It.name?": "+It.name:"")+"]"),K(It)&&(gt=" "+RegExp.prototype.toString.call(It)),vt(It)&&(gt=" "+Date.prototype.toUTCString.call(It)),dt(It)&&(gt=" "+q(It)),Mt.length!==0||_t&&It.length!=0?Ft<0?K(It)?St.stylize(RegExp.prototype.toString.call(It),"regexp"):St.stylize("[Object]","special"):(St.seen.push(It),mt=_t?Q(St,It,Ft,nt,Mt):Mt.map(function(Bt){return et(St,It,Ft,nt,Bt,_t)}),St.seen.pop(),J(mt,gt,yt)):yt[0]+gt+yt[1]}function W(St,It){if(ft(It))return St.stylize("undefined","undefined");if(st(It)){var Ft="'"+JSON.stringify(It).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return St.stylize(Ft,"string")}return it(It)?St.stylize(""+It,"number"):rt(It)?St.stylize(""+It,"boolean"):X(It)?St.stylize("null","null"):void 0}function q(St){return"["+Error.prototype.toString.call(St)+"]"}function Q(St,It,Ft,Ut,jt){for(var Mt=[],nt=0,At=It.length;nt<At;++nt)Et(It,String(nt))?Mt.push(et(St,It,Ft,Ut,String(nt),!0)):Mt.push("");return jt.forEach(function(mt){mt.match(/^\d+$/)||Mt.push(et(St,It,Ft,Ut,mt,!0))}),Mt}function et(St,It,Ft,Ut,jt,Mt){var nt,At,mt;if((mt=Object.getOwnPropertyDescriptor(It,jt)||{value:It[jt]}).get?At=mt.set?St.stylize("[Getter/Setter]","special"):St.stylize("[Getter]","special"):mt.set&&(At=St.stylize("[Setter]","special")),Et(Ut,jt)||(nt="["+jt+"]"),At||(St.seen.indexOf(mt.value)<0?(At=X(Ft)?H(St,mt.value,null):H(St,mt.value,Ft-1)).indexOf(`
`)>-1&&(At=Mt?At.split(`
`).map(function(gt){return"  "+gt}).join(`
`).slice(2):`
`+At.split(`
`).map(function(gt){return"   "+gt}).join(`
`)):At=St.stylize("[Circular]","special")),ft(nt)){if(Mt&&jt.match(/^\d+$/))return At;(nt=JSON.stringify(""+jt)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(nt=nt.slice(1,-1),nt=St.stylize(nt,"name")):(nt=nt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),nt=St.stylize(nt,"string"))}return nt+": "+At}function J(St,It,Ft){return St.reduce(function(Ut,jt){return jt.indexOf(`
`),Ut+jt.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Ft[0]+(It===""?"":It+`
 `)+" "+St.join(`,
  `)+" "+Ft[1]:Ft[0]+It+" "+St.join(", ")+" "+Ft[1]}function V(St){return Array.isArray(St)}function rt(St){return typeof St=="boolean"}function X(St){return St===null}function ot(St){return St==null}function it(St){return typeof St=="number"}function st(St){return typeof St=="string"}function at(St){return typeof St=="symbol"}function ft(St){return St===void 0}function K(St){return lt(St)&&Rt(St)==="[object RegExp]"}function lt(St){return typeof St=="object"&&St!==null}function vt(St){return lt(St)&&Rt(St)==="[object Date]"}function dt(St){return lt(St)&&(Rt(St)==="[object Error]"||St instanceof Error)}function ht(St){return typeof St=="function"}function pt(St){return St===null||typeof St=="boolean"||typeof St=="number"||typeof St=="string"||typeof St=="symbol"||St===void 0}function Rt(St){return Object.prototype.toString.call(St)}function Tt(St){return St<10?"0"+St.toString(10):St.toString(10)}g.debuglog=function(St){if(St=St.toUpperCase(),!$[St])if(F.test(St)){var It=w.pid;$[St]=function(){var Ft=g.format.apply(g,arguments);console.error("%s %d: %s",St,It,Ft)}}else $[St]=function(){};return $[St]},g.inspect=U,U.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},U.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},g.types=d("./support/types"),g.isArray=V,g.isBoolean=rt,g.isNull=X,g.isNullOrUndefined=ot,g.isNumber=it,g.isString=st,g.isSymbol=at,g.isUndefined=ft,g.isRegExp=K,g.types.isRegExp=K,g.isObject=lt,g.isDate=vt,g.types.isDate=vt,g.isError=dt,g.types.isNativeError=dt,g.isFunction=ht,g.isPrimitive=pt,g.isBuffer=d("./support/isBuffer");var xt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function $t(){var St=new Date,It=[Tt(St.getHours()),Tt(St.getMinutes()),Tt(St.getSeconds())].join(":");return[St.getDate(),xt[St.getMonth()],It].join(" ")}function Et(St,It){return Object.prototype.hasOwnProperty.call(St,It)}g.log=function(){console.log("%s - %s",$t(),g.format.apply(g,arguments))},g.inherits=d("inherits"),g._extend=function(St,It){if(!It||!lt(It))return St;for(var Ft=Object.keys(It),Ut=Ft.length;Ut--;)St[Ft[Ut]]=It[Ft[Ut]];return St};var Pt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function Ot(St,It){if(!St){var Ft=new Error("Promise was rejected with a falsy value");Ft.reason=St,St=Ft}return It(St)}function Ct(St){if(typeof St!="function")throw new TypeError('The "original" argument must be of type Function');function It(){for(var Ft=[],Ut=0;Ut<arguments.length;Ut++)Ft.push(arguments[Ut]);var jt=Ft.pop();if(typeof jt!="function")throw new TypeError("The last argument must be of type Function");var Mt=this,nt=function(){return jt.apply(Mt,arguments)};St.apply(this,Ft).then(function(At){w.nextTick(nt.bind(null,null,At))},function(At){w.nextTick(Ot.bind(null,At,nt))})}return Object.setPrototypeOf(It,Object.getPrototypeOf(St)),Object.defineProperties(It,I(St)),It}g.promisify=function(St){if(typeof St!="function")throw new TypeError('The "original" argument must be of type Function');if(Pt&&St[Pt]){var It;if(typeof(It=St[Pt])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(It,Pt,{value:It,enumerable:!1,writable:!1,configurable:!0}),It}function It(){for(var Ft,Ut,jt=new Promise(function(At,mt){Ft=At,Ut=mt}),Mt=[],nt=0;nt<arguments.length;nt++)Mt.push(arguments[nt]);Mt.push(function(At,mt){At?Ut(At):Ft(mt)});try{St.apply(this,Mt)}catch(At){Ut(At)}return jt}return Object.setPrototypeOf(It,Object.getPrototypeOf(St)),Pt&&Object.defineProperty(It,Pt,{value:It,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(It,I(St))},g.promisify.custom=Pt,g.callbackify=Ct}).call(this)}).call(this,d("_process"))},{"./support/isBuffer":82,"./support/types":83,_process:63,inherits:46}],85:[function(d,m,g){(function(w){(function(){var I=d("for-each"),P=d("available-typed-arrays"),$=d("call-bind/callBound"),F=d("gopd"),D=$("Object.prototype.toString"),U=d("has-tostringtag/shams")(),j=typeof globalThis>"u"?w:globalThis,Z=P(),G=$("String.prototype.slice"),H={},W=Object.getPrototypeOf;U&&F&&W&&I(Z,function(et){if(typeof j[et]=="function"){var J=new j[et];if(Symbol.toStringTag in J){var V=W(J),rt=F(V,Symbol.toStringTag);if(!rt){var X=W(V);rt=F(X,Symbol.toStringTag)}H[et]=rt.get}}});var q=function(et){var J=!1;return I(H,function(V,rt){if(!J)try{var X=V.call(et);X===rt&&(J=X)}catch{}}),J},Q=d("is-typed-array");m.exports=function(et){return!!Q(et)&&(U&&Symbol.toStringTag in et?q(et):G(D(et),8,-1))}}).call(this)}).call(this,commonjsGlobal!==void 0?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":27,"call-bind/callBound":33,"for-each":36,gopd:40,"has-tostringtag/shams":43,"is-typed-array":50}]},{},[20])(20);var browserExports=browser$1.exports,PNGFilterType,PNGFilterType2,PNGColorType,PNGColorType2;function png(){return{mime:"image/png",hasAlpha:!0,encode:(d,{deflateLevel:m=9,deflateStrategy:g=3,filterType:w=PNGFilterType.AUTO,colorType:I,inputHasAlpha:P=!0,...$}={})=>{const F=new browserExports.PNG({width:d.width,height:d.height});return F.data=d.data,browserExports.PNG.sync.write(F,{...$,deflateLevel:m,deflateStrategy:g,filterType:w,colorType:I!==void 0?I:P?PNGColorType.COLOR_ALPHA:PNGColorType.COLOR,inputHasAlpha:P})},decode:(d,m)=>{const g=browserExports.PNG.sync.read(d,m);return{data:g.data,width:g.width,height:g.height}}}}PNGFilterType2=PNGFilterType||(PNGFilterType={}),PNGFilterType2[PNGFilterType2.AUTO=-1]="AUTO",PNGFilterType2[PNGFilterType2.NONE=0]="NONE",PNGFilterType2[PNGFilterType2.SUB=1]="SUB",PNGFilterType2[PNGFilterType2.UP=2]="UP",PNGFilterType2[PNGFilterType2.AVERAGE=3]="AVERAGE",PNGFilterType2[PNGFilterType2.PATH=4]="PATH",PNGColorType2=PNGColorType||(PNGColorType={}),PNGColorType2[PNGColorType2.GRAYSCALE=0]="GRAYSCALE",PNGColorType2[PNGColorType2.COLOR=2]="COLOR",PNGColorType2[PNGColorType2.GRAYSCALE_ALPHA=4]="GRAYSCALE_ALPHA",PNGColorType2[PNGColorType2.COLOR_ALPHA=6]="COLOR_ALPHA";var UTIF={exports:{}},common={},hasRequiredCommon;function requireCommon(){return hasRequiredCommon||(hasRequiredCommon=1,function(d){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function g(P,$){return Object.prototype.hasOwnProperty.call(P,$)}d.assign=function(P){for(var $=Array.prototype.slice.call(arguments,1);$.length;){var F=$.shift();if(F){if(typeof F!="object")throw new TypeError(F+"must be non-object");for(var D in F)g(F,D)&&(P[D]=F[D])}}return P},d.shrinkBuf=function(P,$){return P.length===$?P:P.subarray?P.subarray(0,$):(P.length=$,P)};var w={arraySet:function(P,$,F,D,U){if($.subarray&&P.subarray)P.set($.subarray(F,F+D),U);else for(var j=0;j<D;j++)P[U+j]=$[F+j]},flattenChunks:function(P){var $,F,D,U,j,Z;for(D=0,$=0,F=P.length;$<F;$++)D+=P[$].length;for(Z=new Uint8Array(D),U=0,$=0,F=P.length;$<F;$++)j=P[$],Z.set(j,U),U+=j.length;return Z}},I={arraySet:function(P,$,F,D,U){for(var j=0;j<D;j++)P[U+j]=$[F+j]},flattenChunks:function(P){return[].concat.apply([],P)}};d.setTyped=function(P){P?(d.Buf8=Uint8Array,d.Buf16=Uint16Array,d.Buf32=Int32Array,d.assign(d,w)):(d.Buf8=Array,d.Buf16=Array,d.Buf32=Array,d.assign(d,I))},d.setTyped(m)}(common)),common}var deflate$1={},deflate={},trees={},hasRequiredTrees,adler32_1,hasRequiredAdler32,crc32_1,hasRequiredCrc32,messages,hasRequiredMessages,hasRequiredDeflate$1;function requireTrees(){if(hasRequiredTrees)return trees;hasRequiredTrees=1;var d=requireCommon(),m=0,g=1;function w(mt){for(var gt=mt.length;--gt>=0;)mt[gt]=0}var I=0,P=29,$=256,F=$+1+P,D=30,U=19,j=2*F+1,Z=15,G=16,H=7,W=256,q=16,Q=17,et=18,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],V=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ot=new Array(2*(F+2));w(ot);var it=new Array(2*D);w(it);var st=new Array(512);w(st);var at=new Array(256);w(at);var ft=new Array(P);w(ft);var K,lt,vt,dt=new Array(D);function ht(mt,gt,_t,yt,Bt){this.static_tree=mt,this.extra_bits=gt,this.extra_base=_t,this.elems=yt,this.max_length=Bt,this.has_stree=mt&&mt.length}function pt(mt,gt){this.dyn_tree=mt,this.max_code=0,this.stat_desc=gt}function Rt(mt){return mt<256?st[mt]:st[256+(mt>>>7)]}function Tt(mt,gt){mt.pending_buf[mt.pending++]=255&gt,mt.pending_buf[mt.pending++]=gt>>>8&255}function xt(mt,gt,_t){mt.bi_valid>G-_t?(mt.bi_buf|=gt<<mt.bi_valid&65535,Tt(mt,mt.bi_buf),mt.bi_buf=gt>>G-mt.bi_valid,mt.bi_valid+=_t-G):(mt.bi_buf|=gt<<mt.bi_valid&65535,mt.bi_valid+=_t)}function $t(mt,gt,_t){xt(mt,_t[2*gt],_t[2*gt+1])}function Et(mt,gt){var _t=0;do _t|=1&mt,mt>>>=1,_t<<=1;while(--gt>0);return _t>>>1}function Pt(mt,gt,_t){var yt,Bt,tt=new Array(Z+1),ut=0;for(yt=1;yt<=Z;yt++)tt[yt]=ut=ut+_t[yt-1]<<1;for(Bt=0;Bt<=gt;Bt++){var bt=mt[2*Bt+1];bt!==0&&(mt[2*Bt]=Et(tt[bt]++,bt))}}function Ot(mt){var gt;for(gt=0;gt<F;gt++)mt.dyn_ltree[2*gt]=0;for(gt=0;gt<D;gt++)mt.dyn_dtree[2*gt]=0;for(gt=0;gt<U;gt++)mt.bl_tree[2*gt]=0;mt.dyn_ltree[2*W]=1,mt.opt_len=mt.static_len=0,mt.last_lit=mt.matches=0}function Ct(mt){mt.bi_valid>8?Tt(mt,mt.bi_buf):mt.bi_valid>0&&(mt.pending_buf[mt.pending++]=mt.bi_buf),mt.bi_buf=0,mt.bi_valid=0}function St(mt,gt,_t,yt){var Bt=2*gt,tt=2*_t;return mt[Bt]<mt[tt]||mt[Bt]===mt[tt]&&yt[gt]<=yt[_t]}function It(mt,gt,_t){for(var yt=mt.heap[_t],Bt=_t<<1;Bt<=mt.heap_len&&(Bt<mt.heap_len&&St(gt,mt.heap[Bt+1],mt.heap[Bt],mt.depth)&&Bt++,!St(gt,yt,mt.heap[Bt],mt.depth));)mt.heap[_t]=mt.heap[Bt],_t=Bt,Bt<<=1;mt.heap[_t]=yt}function Ft(mt,gt,_t){var yt,Bt,tt,ut,bt=0;if(mt.last_lit!==0)do yt=mt.pending_buf[mt.d_buf+2*bt]<<8|mt.pending_buf[mt.d_buf+2*bt+1],Bt=mt.pending_buf[mt.l_buf+bt],bt++,yt===0?$t(mt,Bt,gt):($t(mt,(tt=at[Bt])+$+1,gt),(ut=J[tt])!==0&&xt(mt,Bt-=ft[tt],ut),$t(mt,tt=Rt(--yt),_t),(ut=V[tt])!==0&&xt(mt,yt-=dt[tt],ut));while(bt<mt.last_lit);$t(mt,W,gt)}function Ut(mt,gt){var _t,yt,Bt,tt=gt.dyn_tree,ut=gt.stat_desc.static_tree,bt=gt.stat_desc.has_stree,wt=gt.stat_desc.elems,zt=-1;for(mt.heap_len=0,mt.heap_max=j,_t=0;_t<wt;_t++)tt[2*_t]!==0?(mt.heap[++mt.heap_len]=zt=_t,mt.depth[_t]=0):tt[2*_t+1]=0;for(;mt.heap_len<2;)tt[2*(Bt=mt.heap[++mt.heap_len]=zt<2?++zt:0)]=1,mt.depth[Bt]=0,mt.opt_len--,bt&&(mt.static_len-=ut[2*Bt+1]);for(gt.max_code=zt,_t=mt.heap_len>>1;_t>=1;_t--)It(mt,tt,_t);Bt=wt;do _t=mt.heap[1],mt.heap[1]=mt.heap[mt.heap_len--],It(mt,tt,1),yt=mt.heap[1],mt.heap[--mt.heap_max]=_t,mt.heap[--mt.heap_max]=yt,tt[2*Bt]=tt[2*_t]+tt[2*yt],mt.depth[Bt]=(mt.depth[_t]>=mt.depth[yt]?mt.depth[_t]:mt.depth[yt])+1,tt[2*_t+1]=tt[2*yt+1]=Bt,mt.heap[1]=Bt++,It(mt,tt,1);while(mt.heap_len>=2);mt.heap[--mt.heap_max]=mt.heap[1],function(Zt,Kt){var te,Vt,ee,Jt,oe,ne,ae=Kt.dyn_tree,ce=Kt.max_code,ie=Kt.stat_desc.static_tree,Nt=Kt.stat_desc.has_stree,Xt=Kt.stat_desc.extra_bits,Lt=Kt.stat_desc.extra_base,qt=Kt.stat_desc.max_length,kt=0;for(Jt=0;Jt<=Z;Jt++)Zt.bl_count[Jt]=0;for(ae[2*Zt.heap[Zt.heap_max]+1]=0,te=Zt.heap_max+1;te<j;te++)(Jt=ae[2*ae[2*(Vt=Zt.heap[te])+1]+1]+1)>qt&&(Jt=qt,kt++),ae[2*Vt+1]=Jt,Vt>ce||(Zt.bl_count[Jt]++,oe=0,Vt>=Lt&&(oe=Xt[Vt-Lt]),ne=ae[2*Vt],Zt.opt_len+=ne*(Jt+oe),Nt&&(Zt.static_len+=ne*(ie[2*Vt+1]+oe)));if(kt!==0){do{for(Jt=qt-1;Zt.bl_count[Jt]===0;)Jt--;Zt.bl_count[Jt]--,Zt.bl_count[Jt+1]+=2,Zt.bl_count[qt]--,kt-=2}while(kt>0);for(Jt=qt;Jt!==0;Jt--)for(Vt=Zt.bl_count[Jt];Vt!==0;)(ee=Zt.heap[--te])>ce||(ae[2*ee+1]!==Jt&&(Zt.opt_len+=(Jt-ae[2*ee+1])*ae[2*ee],ae[2*ee+1]=Jt),Vt--)}}(mt,gt),Pt(tt,zt,mt.bl_count)}function jt(mt,gt,_t){var yt,Bt,tt=-1,ut=gt[1],bt=0,wt=7,zt=4;for(ut===0&&(wt=138,zt=3),gt[2*(_t+1)+1]=65535,yt=0;yt<=_t;yt++)Bt=ut,ut=gt[2*(yt+1)+1],++bt<wt&&Bt===ut||(bt<zt?mt.bl_tree[2*Bt]+=bt:Bt!==0?(Bt!==tt&&mt.bl_tree[2*Bt]++,mt.bl_tree[2*q]++):bt<=10?mt.bl_tree[2*Q]++:mt.bl_tree[2*et]++,bt=0,tt=Bt,ut===0?(wt=138,zt=3):Bt===ut?(wt=6,zt=3):(wt=7,zt=4))}function Mt(mt,gt,_t){var yt,Bt,tt=-1,ut=gt[1],bt=0,wt=7,zt=4;for(ut===0&&(wt=138,zt=3),yt=0;yt<=_t;yt++)if(Bt=ut,ut=gt[2*(yt+1)+1],!(++bt<wt&&Bt===ut)){if(bt<zt)do $t(mt,Bt,mt.bl_tree);while(--bt!=0);else Bt!==0?(Bt!==tt&&($t(mt,Bt,mt.bl_tree),bt--),$t(mt,q,mt.bl_tree),xt(mt,bt-3,2)):bt<=10?($t(mt,Q,mt.bl_tree),xt(mt,bt-3,3)):($t(mt,et,mt.bl_tree),xt(mt,bt-11,7));bt=0,tt=Bt,ut===0?(wt=138,zt=3):Bt===ut?(wt=6,zt=3):(wt=7,zt=4)}}w(dt);var nt=!1;function At(mt,gt,_t,yt){xt(mt,(I<<1)+(yt?1:0),3),function(Bt,tt,ut,bt){Ct(Bt),Tt(Bt,ut),Tt(Bt,~ut),d.arraySet(Bt.pending_buf,Bt.window,tt,ut,Bt.pending),Bt.pending+=ut}(mt,gt,_t)}return trees._tr_init=function(mt){nt||(function(){var gt,_t,yt,Bt,tt,ut=new Array(Z+1);for(yt=0,Bt=0;Bt<P-1;Bt++)for(ft[Bt]=yt,gt=0;gt<1<<J[Bt];gt++)at[yt++]=Bt;for(at[yt-1]=Bt,tt=0,Bt=0;Bt<16;Bt++)for(dt[Bt]=tt,gt=0;gt<1<<V[Bt];gt++)st[tt++]=Bt;for(tt>>=7;Bt<D;Bt++)for(dt[Bt]=tt<<7,gt=0;gt<1<<V[Bt]-7;gt++)st[256+tt++]=Bt;for(_t=0;_t<=Z;_t++)ut[_t]=0;for(gt=0;gt<=143;)ot[2*gt+1]=8,gt++,ut[8]++;for(;gt<=255;)ot[2*gt+1]=9,gt++,ut[9]++;for(;gt<=279;)ot[2*gt+1]=7,gt++,ut[7]++;for(;gt<=287;)ot[2*gt+1]=8,gt++,ut[8]++;for(Pt(ot,F+1,ut),gt=0;gt<D;gt++)it[2*gt+1]=5,it[2*gt]=Et(gt,5);K=new ht(ot,J,$+1,F,Z),lt=new ht(it,V,0,D,Z),vt=new ht(new Array(0),rt,0,U,H)}(),nt=!0),mt.l_desc=new pt(mt.dyn_ltree,K),mt.d_desc=new pt(mt.dyn_dtree,lt),mt.bl_desc=new pt(mt.bl_tree,vt),mt.bi_buf=0,mt.bi_valid=0,Ot(mt)},trees._tr_stored_block=At,trees._tr_flush_block=function(mt,gt,_t,yt){var Bt,tt,ut=0;mt.level>0?(mt.strm.data_type===2&&(mt.strm.data_type=function(bt){var wt,zt=4093624447;for(wt=0;wt<=31;wt++,zt>>>=1)if(1&zt&&bt.dyn_ltree[2*wt]!==0)return m;if(bt.dyn_ltree[18]!==0||bt.dyn_ltree[20]!==0||bt.dyn_ltree[26]!==0)return g;for(wt=32;wt<$;wt++)if(bt.dyn_ltree[2*wt]!==0)return g;return m}(mt)),Ut(mt,mt.l_desc),Ut(mt,mt.d_desc),ut=function(bt){var wt;for(jt(bt,bt.dyn_ltree,bt.l_desc.max_code),jt(bt,bt.dyn_dtree,bt.d_desc.max_code),Ut(bt,bt.bl_desc),wt=U-1;wt>=3&&bt.bl_tree[2*X[wt]+1]===0;wt--);return bt.opt_len+=3*(wt+1)+5+5+4,wt}(mt),Bt=mt.opt_len+3+7>>>3,(tt=mt.static_len+3+7>>>3)<=Bt&&(Bt=tt)):Bt=tt=_t+5,_t+4<=Bt&&gt!==-1?At(mt,gt,_t,yt):mt.strategy===4||tt===Bt?(xt(mt,2+(yt?1:0),3),Ft(mt,ot,it)):(xt(mt,4+(yt?1:0),3),function(bt,wt,zt,Zt){var Kt;for(xt(bt,wt-257,5),xt(bt,zt-1,5),xt(bt,Zt-4,4),Kt=0;Kt<Zt;Kt++)xt(bt,bt.bl_tree[2*X[Kt]+1],3);Mt(bt,bt.dyn_ltree,wt-1),Mt(bt,bt.dyn_dtree,zt-1)}(mt,mt.l_desc.max_code+1,mt.d_desc.max_code+1,ut+1),Ft(mt,mt.dyn_ltree,mt.dyn_dtree)),Ot(mt),yt&&Ct(mt)},trees._tr_tally=function(mt,gt,_t){return mt.pending_buf[mt.d_buf+2*mt.last_lit]=gt>>>8&255,mt.pending_buf[mt.d_buf+2*mt.last_lit+1]=255&gt,mt.pending_buf[mt.l_buf+mt.last_lit]=255&_t,mt.last_lit++,gt===0?mt.dyn_ltree[2*_t]++:(mt.matches++,gt--,mt.dyn_ltree[2*(at[_t]+$+1)]++,mt.dyn_dtree[2*Rt(gt)]++),mt.last_lit===mt.lit_bufsize-1},trees._tr_align=function(mt){xt(mt,2,3),$t(mt,W,ot),function(gt){gt.bi_valid===16?(Tt(gt,gt.bi_buf),gt.bi_buf=0,gt.bi_valid=0):gt.bi_valid>=8&&(gt.pending_buf[gt.pending++]=255&gt.bi_buf,gt.bi_buf>>=8,gt.bi_valid-=8)}(mt)},trees}function requireAdler32(){return hasRequiredAdler32||(hasRequiredAdler32=1,adler32_1=function(d,m,g,w){for(var I=65535&d,P=d>>>16&65535,$=0;g!==0;){g-=$=g>2e3?2e3:g;do P=P+(I=I+m[w++]|0)|0;while(--$);I%=65521,P%=65521}return I|P<<16}),adler32_1}function requireCrc32(){if(hasRequiredCrc32)return crc32_1;hasRequiredCrc32=1;var d=function(){for(var m,g=[],w=0;w<256;w++){m=w;for(var I=0;I<8;I++)m=1&m?3988292384^m>>>1:m>>>1;g[w]=m}return g}();return crc32_1=function(m,g,w,I){var P=d,$=I+w;m^=-1;for(var F=I;F<$;F++)m=m>>>8^P[255&(m^g[F])];return~m},crc32_1}function requireMessages(){return hasRequiredMessages?messages:(hasRequiredMessages=1,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"})}function requireDeflate$1(){if(hasRequiredDeflate$1)return deflate;hasRequiredDeflate$1=1;var d,m=requireCommon(),g=requireTrees(),w=requireAdler32(),I=requireCrc32(),P=requireMessages(),$=0,F=4,D=0,U=-2,j=-1,Z=4,G=2,H=8,W=9,q=286,Q=30,et=19,J=2*q+1,V=15,rt=3,X=258,ot=X+rt+1,it=42,st=103,at=113,ft=666,K=1,lt=2,vt=3,dt=4;function ht(nt,At){return nt.msg=P[At],At}function pt(nt){return(nt<<1)-(nt>4?9:0)}function Rt(nt){for(var At=nt.length;--At>=0;)nt[At]=0}function Tt(nt){var At=nt.state,mt=At.pending;mt>nt.avail_out&&(mt=nt.avail_out),mt!==0&&(m.arraySet(nt.output,At.pending_buf,At.pending_out,mt,nt.next_out),nt.next_out+=mt,At.pending_out+=mt,nt.total_out+=mt,nt.avail_out-=mt,At.pending-=mt,At.pending===0&&(At.pending_out=0))}function xt(nt,At){g._tr_flush_block(nt,nt.block_start>=0?nt.block_start:-1,nt.strstart-nt.block_start,At),nt.block_start=nt.strstart,Tt(nt.strm)}function $t(nt,At){nt.pending_buf[nt.pending++]=At}function Et(nt,At){nt.pending_buf[nt.pending++]=At>>>8&255,nt.pending_buf[nt.pending++]=255&At}function Pt(nt,At){var mt,gt,_t=nt.max_chain_length,yt=nt.strstart,Bt=nt.prev_length,tt=nt.nice_match,ut=nt.strstart>nt.w_size-ot?nt.strstart-(nt.w_size-ot):0,bt=nt.window,wt=nt.w_mask,zt=nt.prev,Zt=nt.strstart+X,Kt=bt[yt+Bt-1],te=bt[yt+Bt];nt.prev_length>=nt.good_match&&(_t>>=2),tt>nt.lookahead&&(tt=nt.lookahead);do if(bt[(mt=At)+Bt]===te&&bt[mt+Bt-1]===Kt&&bt[mt]===bt[yt]&&bt[++mt]===bt[yt+1]){yt+=2,mt++;do;while(bt[++yt]===bt[++mt]&&bt[++yt]===bt[++mt]&&bt[++yt]===bt[++mt]&&bt[++yt]===bt[++mt]&&bt[++yt]===bt[++mt]&&bt[++yt]===bt[++mt]&&bt[++yt]===bt[++mt]&&bt[++yt]===bt[++mt]&&yt<Zt);if(gt=X-(Zt-yt),yt=Zt-X,gt>Bt){if(nt.match_start=At,Bt=gt,gt>=tt)break;Kt=bt[yt+Bt-1],te=bt[yt+Bt]}}while((At=zt[At&wt])>ut&&--_t!=0);return Bt<=nt.lookahead?Bt:nt.lookahead}function Ot(nt){var At,mt,gt,_t,yt,Bt,tt,ut,bt,wt,zt=nt.w_size;do{if(_t=nt.window_size-nt.lookahead-nt.strstart,nt.strstart>=zt+(zt-ot)){m.arraySet(nt.window,nt.window,zt,zt,0),nt.match_start-=zt,nt.strstart-=zt,nt.block_start-=zt,At=mt=nt.hash_size;do gt=nt.head[--At],nt.head[At]=gt>=zt?gt-zt:0;while(--mt);At=mt=zt;do gt=nt.prev[--At],nt.prev[At]=gt>=zt?gt-zt:0;while(--mt);_t+=zt}if(nt.strm.avail_in===0)break;if(Bt=nt.strm,tt=nt.window,ut=nt.strstart+nt.lookahead,bt=_t,wt=void 0,(wt=Bt.avail_in)>bt&&(wt=bt),mt=wt===0?0:(Bt.avail_in-=wt,m.arraySet(tt,Bt.input,Bt.next_in,wt,ut),Bt.state.wrap===1?Bt.adler=w(Bt.adler,tt,wt,ut):Bt.state.wrap===2&&(Bt.adler=I(Bt.adler,tt,wt,ut)),Bt.next_in+=wt,Bt.total_in+=wt,wt),nt.lookahead+=mt,nt.lookahead+nt.insert>=rt)for(yt=nt.strstart-nt.insert,nt.ins_h=nt.window[yt],nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[yt+1])&nt.hash_mask;nt.insert&&(nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[yt+rt-1])&nt.hash_mask,nt.prev[yt&nt.w_mask]=nt.head[nt.ins_h],nt.head[nt.ins_h]=yt,yt++,nt.insert--,!(nt.lookahead+nt.insert<rt)););}while(nt.lookahead<ot&&nt.strm.avail_in!==0)}function Ct(nt,At){for(var mt,gt;;){if(nt.lookahead<ot){if(Ot(nt),nt.lookahead<ot&&At===$)return K;if(nt.lookahead===0)break}if(mt=0,nt.lookahead>=rt&&(nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[nt.strstart+rt-1])&nt.hash_mask,mt=nt.prev[nt.strstart&nt.w_mask]=nt.head[nt.ins_h],nt.head[nt.ins_h]=nt.strstart),mt!==0&&nt.strstart-mt<=nt.w_size-ot&&(nt.match_length=Pt(nt,mt)),nt.match_length>=rt)if(gt=g._tr_tally(nt,nt.strstart-nt.match_start,nt.match_length-rt),nt.lookahead-=nt.match_length,nt.match_length<=nt.max_lazy_match&&nt.lookahead>=rt){nt.match_length--;do nt.strstart++,nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[nt.strstart+rt-1])&nt.hash_mask,mt=nt.prev[nt.strstart&nt.w_mask]=nt.head[nt.ins_h],nt.head[nt.ins_h]=nt.strstart;while(--nt.match_length!=0);nt.strstart++}else nt.strstart+=nt.match_length,nt.match_length=0,nt.ins_h=nt.window[nt.strstart],nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[nt.strstart+1])&nt.hash_mask;else gt=g._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++;if(gt&&(xt(nt,!1),nt.strm.avail_out===0))return K}return nt.insert=nt.strstart<rt-1?nt.strstart:rt-1,At===F?(xt(nt,!0),nt.strm.avail_out===0?vt:dt):nt.last_lit&&(xt(nt,!1),nt.strm.avail_out===0)?K:lt}function St(nt,At){for(var mt,gt,_t;;){if(nt.lookahead<ot){if(Ot(nt),nt.lookahead<ot&&At===$)return K;if(nt.lookahead===0)break}if(mt=0,nt.lookahead>=rt&&(nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[nt.strstart+rt-1])&nt.hash_mask,mt=nt.prev[nt.strstart&nt.w_mask]=nt.head[nt.ins_h],nt.head[nt.ins_h]=nt.strstart),nt.prev_length=nt.match_length,nt.prev_match=nt.match_start,nt.match_length=rt-1,mt!==0&&nt.prev_length<nt.max_lazy_match&&nt.strstart-mt<=nt.w_size-ot&&(nt.match_length=Pt(nt,mt),nt.match_length<=5&&(nt.strategy===1||nt.match_length===rt&&nt.strstart-nt.match_start>4096)&&(nt.match_length=rt-1)),nt.prev_length>=rt&&nt.match_length<=nt.prev_length){_t=nt.strstart+nt.lookahead-rt,gt=g._tr_tally(nt,nt.strstart-1-nt.prev_match,nt.prev_length-rt),nt.lookahead-=nt.prev_length-1,nt.prev_length-=2;do++nt.strstart<=_t&&(nt.ins_h=(nt.ins_h<<nt.hash_shift^nt.window[nt.strstart+rt-1])&nt.hash_mask,mt=nt.prev[nt.strstart&nt.w_mask]=nt.head[nt.ins_h],nt.head[nt.ins_h]=nt.strstart);while(--nt.prev_length!=0);if(nt.match_available=0,nt.match_length=rt-1,nt.strstart++,gt&&(xt(nt,!1),nt.strm.avail_out===0))return K}else if(nt.match_available){if((gt=g._tr_tally(nt,0,nt.window[nt.strstart-1]))&&xt(nt,!1),nt.strstart++,nt.lookahead--,nt.strm.avail_out===0)return K}else nt.match_available=1,nt.strstart++,nt.lookahead--}return nt.match_available&&(gt=g._tr_tally(nt,0,nt.window[nt.strstart-1]),nt.match_available=0),nt.insert=nt.strstart<rt-1?nt.strstart:rt-1,At===F?(xt(nt,!0),nt.strm.avail_out===0?vt:dt):nt.last_lit&&(xt(nt,!1),nt.strm.avail_out===0)?K:lt}function It(nt,At,mt,gt,_t){this.good_length=nt,this.max_lazy=At,this.nice_length=mt,this.max_chain=gt,this.func=_t}function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=H,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new m.Buf16(2*J),this.dyn_dtree=new m.Buf16(2*(2*Q+1)),this.bl_tree=new m.Buf16(2*(2*et+1)),Rt(this.dyn_ltree),Rt(this.dyn_dtree),Rt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new m.Buf16(V+1),this.heap=new m.Buf16(2*q+1),Rt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new m.Buf16(2*q+1),Rt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ut(nt){var At;return nt&&nt.state?(nt.total_in=nt.total_out=0,nt.data_type=G,(At=nt.state).pending=0,At.pending_out=0,At.wrap<0&&(At.wrap=-At.wrap),At.status=At.wrap?it:at,nt.adler=At.wrap===2?0:1,At.last_flush=$,g._tr_init(At),D):ht(nt,U)}function jt(nt){var At=Ut(nt);return At===D&&function(mt){mt.window_size=2*mt.w_size,Rt(mt.head),mt.max_lazy_match=d[mt.level].max_lazy,mt.good_match=d[mt.level].good_length,mt.nice_match=d[mt.level].nice_length,mt.max_chain_length=d[mt.level].max_chain,mt.strstart=0,mt.block_start=0,mt.lookahead=0,mt.insert=0,mt.match_length=mt.prev_length=rt-1,mt.match_available=0,mt.ins_h=0}(nt.state),At}function Mt(nt,At,mt,gt,_t,yt){if(!nt)return U;var Bt=1;if(At===j&&(At=6),gt<0?(Bt=0,gt=-gt):gt>15&&(Bt=2,gt-=16),_t<1||_t>W||mt!==H||gt<8||gt>15||At<0||At>9||yt<0||yt>Z)return ht(nt,U);gt===8&&(gt=9);var tt=new Ft;return nt.state=tt,tt.strm=nt,tt.wrap=Bt,tt.gzhead=null,tt.w_bits=gt,tt.w_size=1<<tt.w_bits,tt.w_mask=tt.w_size-1,tt.hash_bits=_t+7,tt.hash_size=1<<tt.hash_bits,tt.hash_mask=tt.hash_size-1,tt.hash_shift=~~((tt.hash_bits+rt-1)/rt),tt.window=new m.Buf8(2*tt.w_size),tt.head=new m.Buf16(tt.hash_size),tt.prev=new m.Buf16(tt.w_size),tt.lit_bufsize=1<<_t+6,tt.pending_buf_size=4*tt.lit_bufsize,tt.pending_buf=new m.Buf8(tt.pending_buf_size),tt.d_buf=1*tt.lit_bufsize,tt.l_buf=3*tt.lit_bufsize,tt.level=At,tt.strategy=yt,tt.method=mt,jt(nt)}return d=[new It(0,0,0,0,function(nt,At){var mt=65535;for(mt>nt.pending_buf_size-5&&(mt=nt.pending_buf_size-5);;){if(nt.lookahead<=1){if(Ot(nt),nt.lookahead===0&&At===$)return K;if(nt.lookahead===0)break}nt.strstart+=nt.lookahead,nt.lookahead=0;var gt=nt.block_start+mt;if((nt.strstart===0||nt.strstart>=gt)&&(nt.lookahead=nt.strstart-gt,nt.strstart=gt,xt(nt,!1),nt.strm.avail_out===0)||nt.strstart-nt.block_start>=nt.w_size-ot&&(xt(nt,!1),nt.strm.avail_out===0))return K}return nt.insert=0,At===F?(xt(nt,!0),nt.strm.avail_out===0?vt:dt):(nt.strstart>nt.block_start&&(xt(nt,!1),nt.strm.avail_out),K)}),new It(4,4,8,4,Ct),new It(4,5,16,8,Ct),new It(4,6,32,32,Ct),new It(4,4,16,16,St),new It(8,16,32,32,St),new It(8,16,128,128,St),new It(8,32,128,256,St),new It(32,128,258,1024,St),new It(32,258,258,4096,St)],deflate.deflateInit=function(nt,At){return Mt(nt,At,H,15,8,0)},deflate.deflateInit2=Mt,deflate.deflateReset=jt,deflate.deflateResetKeep=Ut,deflate.deflateSetHeader=function(nt,At){return nt&&nt.state?nt.state.wrap!==2?U:(nt.state.gzhead=At,D):U},deflate.deflate=function(nt,At){var mt,gt,_t,yt;if(!nt||!nt.state||At>5||At<0)return nt?ht(nt,U):U;if(gt=nt.state,!nt.output||!nt.input&&nt.avail_in!==0||gt.status===ft&&At!==F)return ht(nt,nt.avail_out===0?-5:U);if(gt.strm=nt,mt=gt.last_flush,gt.last_flush=At,gt.status===it)if(gt.wrap===2)nt.adler=0,$t(gt,31),$t(gt,139),$t(gt,8),gt.gzhead?($t(gt,(gt.gzhead.text?1:0)+(gt.gzhead.hcrc?2:0)+(gt.gzhead.extra?4:0)+(gt.gzhead.name?8:0)+(gt.gzhead.comment?16:0)),$t(gt,255&gt.gzhead.time),$t(gt,gt.gzhead.time>>8&255),$t(gt,gt.gzhead.time>>16&255),$t(gt,gt.gzhead.time>>24&255),$t(gt,gt.level===9?2:gt.strategy>=2||gt.level<2?4:0),$t(gt,255&gt.gzhead.os),gt.gzhead.extra&&gt.gzhead.extra.length&&($t(gt,255&gt.gzhead.extra.length),$t(gt,gt.gzhead.extra.length>>8&255)),gt.gzhead.hcrc&&(nt.adler=I(nt.adler,gt.pending_buf,gt.pending,0)),gt.gzindex=0,gt.status=69):($t(gt,0),$t(gt,0),$t(gt,0),$t(gt,0),$t(gt,0),$t(gt,gt.level===9?2:gt.strategy>=2||gt.level<2?4:0),$t(gt,3),gt.status=at);else{var Bt=H+(gt.w_bits-8<<4)<<8;Bt|=(gt.strategy>=2||gt.level<2?0:gt.level<6?1:gt.level===6?2:3)<<6,gt.strstart!==0&&(Bt|=32),Bt+=31-Bt%31,gt.status=at,Et(gt,Bt),gt.strstart!==0&&(Et(gt,nt.adler>>>16),Et(gt,65535&nt.adler)),nt.adler=1}if(gt.status===69)if(gt.gzhead.extra){for(_t=gt.pending;gt.gzindex<(65535&gt.gzhead.extra.length)&&(gt.pending!==gt.pending_buf_size||(gt.gzhead.hcrc&&gt.pending>_t&&(nt.adler=I(nt.adler,gt.pending_buf,gt.pending-_t,_t)),Tt(nt),_t=gt.pending,gt.pending!==gt.pending_buf_size));)$t(gt,255&gt.gzhead.extra[gt.gzindex]),gt.gzindex++;gt.gzhead.hcrc&&gt.pending>_t&&(nt.adler=I(nt.adler,gt.pending_buf,gt.pending-_t,_t)),gt.gzindex===gt.gzhead.extra.length&&(gt.gzindex=0,gt.status=73)}else gt.status=73;if(gt.status===73)if(gt.gzhead.name){_t=gt.pending;do{if(gt.pending===gt.pending_buf_size&&(gt.gzhead.hcrc&&gt.pending>_t&&(nt.adler=I(nt.adler,gt.pending_buf,gt.pending-_t,_t)),Tt(nt),_t=gt.pending,gt.pending===gt.pending_buf_size)){yt=1;break}yt=gt.gzindex<gt.gzhead.name.length?255&gt.gzhead.name.charCodeAt(gt.gzindex++):0,$t(gt,yt)}while(yt!==0);gt.gzhead.hcrc&&gt.pending>_t&&(nt.adler=I(nt.adler,gt.pending_buf,gt.pending-_t,_t)),yt===0&&(gt.gzindex=0,gt.status=91)}else gt.status=91;if(gt.status===91)if(gt.gzhead.comment){_t=gt.pending;do{if(gt.pending===gt.pending_buf_size&&(gt.gzhead.hcrc&&gt.pending>_t&&(nt.adler=I(nt.adler,gt.pending_buf,gt.pending-_t,_t)),Tt(nt),_t=gt.pending,gt.pending===gt.pending_buf_size)){yt=1;break}yt=gt.gzindex<gt.gzhead.comment.length?255&gt.gzhead.comment.charCodeAt(gt.gzindex++):0,$t(gt,yt)}while(yt!==0);gt.gzhead.hcrc&&gt.pending>_t&&(nt.adler=I(nt.adler,gt.pending_buf,gt.pending-_t,_t)),yt===0&&(gt.status=st)}else gt.status=st;if(gt.status===st&&(gt.gzhead.hcrc?(gt.pending+2>gt.pending_buf_size&&Tt(nt),gt.pending+2<=gt.pending_buf_size&&($t(gt,255&nt.adler),$t(gt,nt.adler>>8&255),nt.adler=0,gt.status=at)):gt.status=at),gt.pending!==0){if(Tt(nt),nt.avail_out===0)return gt.last_flush=-1,D}else if(nt.avail_in===0&&pt(At)<=pt(mt)&&At!==F)return ht(nt,-5);if(gt.status===ft&&nt.avail_in!==0)return ht(nt,-5);if(nt.avail_in!==0||gt.lookahead!==0||At!==$&&gt.status!==ft){var tt=gt.strategy===2?function(ut,bt){for(var wt;;){if(ut.lookahead===0&&(Ot(ut),ut.lookahead===0)){if(bt===$)return K;break}if(ut.match_length=0,wt=g._tr_tally(ut,0,ut.window[ut.strstart]),ut.lookahead--,ut.strstart++,wt&&(xt(ut,!1),ut.strm.avail_out===0))return K}return ut.insert=0,bt===F?(xt(ut,!0),ut.strm.avail_out===0?vt:dt):ut.last_lit&&(xt(ut,!1),ut.strm.avail_out===0)?K:lt}(gt,At):gt.strategy===3?function(ut,bt){for(var wt,zt,Zt,Kt,te=ut.window;;){if(ut.lookahead<=X){if(Ot(ut),ut.lookahead<=X&&bt===$)return K;if(ut.lookahead===0)break}if(ut.match_length=0,ut.lookahead>=rt&&ut.strstart>0&&(zt=te[Zt=ut.strstart-1])===te[++Zt]&&zt===te[++Zt]&&zt===te[++Zt]){Kt=ut.strstart+X;do;while(zt===te[++Zt]&&zt===te[++Zt]&&zt===te[++Zt]&&zt===te[++Zt]&&zt===te[++Zt]&&zt===te[++Zt]&&zt===te[++Zt]&&zt===te[++Zt]&&Zt<Kt);ut.match_length=X-(Kt-Zt),ut.match_length>ut.lookahead&&(ut.match_length=ut.lookahead)}if(ut.match_length>=rt?(wt=g._tr_tally(ut,1,ut.match_length-rt),ut.lookahead-=ut.match_length,ut.strstart+=ut.match_length,ut.match_length=0):(wt=g._tr_tally(ut,0,ut.window[ut.strstart]),ut.lookahead--,ut.strstart++),wt&&(xt(ut,!1),ut.strm.avail_out===0))return K}return ut.insert=0,bt===F?(xt(ut,!0),ut.strm.avail_out===0?vt:dt):ut.last_lit&&(xt(ut,!1),ut.strm.avail_out===0)?K:lt}(gt,At):d[gt.level].func(gt,At);if(tt!==vt&&tt!==dt||(gt.status=ft),tt===K||tt===vt)return nt.avail_out===0&&(gt.last_flush=-1),D;if(tt===lt&&(At===1?g._tr_align(gt):At!==5&&(g._tr_stored_block(gt,0,0,!1),At===3&&(Rt(gt.head),gt.lookahead===0&&(gt.strstart=0,gt.block_start=0,gt.insert=0))),Tt(nt),nt.avail_out===0))return gt.last_flush=-1,D}return At!==F?D:gt.wrap<=0?1:(gt.wrap===2?($t(gt,255&nt.adler),$t(gt,nt.adler>>8&255),$t(gt,nt.adler>>16&255),$t(gt,nt.adler>>24&255),$t(gt,255&nt.total_in),$t(gt,nt.total_in>>8&255),$t(gt,nt.total_in>>16&255),$t(gt,nt.total_in>>24&255)):(Et(gt,nt.adler>>>16),Et(gt,65535&nt.adler)),Tt(nt),gt.wrap>0&&(gt.wrap=-gt.wrap),gt.pending!==0?D:1)},deflate.deflateEnd=function(nt){var At;return nt&&nt.state?(At=nt.state.status)!==it&&At!==69&&At!==73&&At!==91&&At!==st&&At!==at&&At!==ft?ht(nt,U):(nt.state=null,At===at?ht(nt,-3):D):U},deflate.deflateSetDictionary=function(nt,At){var mt,gt,_t,yt,Bt,tt,ut,bt,wt=At.length;if(!nt||!nt.state||(yt=(mt=nt.state).wrap)===2||yt===1&&mt.status!==it||mt.lookahead)return U;for(yt===1&&(nt.adler=w(nt.adler,At,wt,0)),mt.wrap=0,wt>=mt.w_size&&(yt===0&&(Rt(mt.head),mt.strstart=0,mt.block_start=0,mt.insert=0),bt=new m.Buf8(mt.w_size),m.arraySet(bt,At,wt-mt.w_size,mt.w_size,0),At=bt,wt=mt.w_size),Bt=nt.avail_in,tt=nt.next_in,ut=nt.input,nt.avail_in=wt,nt.next_in=0,nt.input=At,Ot(mt);mt.lookahead>=rt;){gt=mt.strstart,_t=mt.lookahead-(rt-1);do mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[gt+rt-1])&mt.hash_mask,mt.prev[gt&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=gt,gt++;while(--_t);mt.strstart=gt,mt.lookahead=rt-1,Ot(mt)}return mt.strstart+=mt.lookahead,mt.block_start=mt.strstart,mt.insert=mt.lookahead,mt.lookahead=0,mt.match_length=mt.prev_length=rt-1,mt.match_available=0,nt.next_in=tt,nt.input=ut,nt.avail_in=Bt,mt.wrap=yt,D},deflate.deflateInfo="pako deflate (from Nodeca project)",deflate}var strings={},hasRequiredStrings,zstream,hasRequiredZstream,hasRequiredDeflate;function requireStrings(){if(hasRequiredStrings)return strings;hasRequiredStrings=1;var d=requireCommon(),m=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch{m=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{g=!1}for(var w=new d.Buf8(256),I=0;I<256;I++)w[I]=I>=252?6:I>=248?5:I>=240?4:I>=224?3:I>=192?2:1;function P($,F){if(F<65534&&($.subarray&&g||!$.subarray&&m))return String.fromCharCode.apply(null,d.shrinkBuf($,F));for(var D="",U=0;U<F;U++)D+=String.fromCharCode($[U]);return D}return w[254]=w[254]=1,strings.string2buf=function($){var F,D,U,j,Z,G=$.length,H=0;for(j=0;j<G;j++)(64512&(D=$.charCodeAt(j)))==55296&&j+1<G&&(64512&(U=$.charCodeAt(j+1)))==56320&&(D=65536+(D-55296<<10)+(U-56320),j++),H+=D<128?1:D<2048?2:D<65536?3:4;for(F=new d.Buf8(H),Z=0,j=0;Z<H;j++)(64512&(D=$.charCodeAt(j)))==55296&&j+1<G&&(64512&(U=$.charCodeAt(j+1)))==56320&&(D=65536+(D-55296<<10)+(U-56320),j++),D<128?F[Z++]=D:D<2048?(F[Z++]=192|D>>>6,F[Z++]=128|63&D):D<65536?(F[Z++]=224|D>>>12,F[Z++]=128|D>>>6&63,F[Z++]=128|63&D):(F[Z++]=240|D>>>18,F[Z++]=128|D>>>12&63,F[Z++]=128|D>>>6&63,F[Z++]=128|63&D);return F},strings.buf2binstring=function($){return P($,$.length)},strings.binstring2buf=function($){for(var F=new d.Buf8($.length),D=0,U=F.length;D<U;D++)F[D]=$.charCodeAt(D);return F},strings.buf2string=function($,F){var D,U,j,Z,G=F||$.length,H=new Array(2*G);for(U=0,D=0;D<G;)if((j=$[D++])<128)H[U++]=j;else if((Z=w[j])>4)H[U++]=65533,D+=Z-1;else{for(j&=Z===2?31:Z===3?15:7;Z>1&&D<G;)j=j<<6|63&$[D++],Z--;Z>1?H[U++]=65533:j<65536?H[U++]=j:(j-=65536,H[U++]=55296|j>>10&1023,H[U++]=56320|1023&j)}return P(H,U)},strings.utf8border=function($,F){var D;for((F=F||$.length)>$.length&&(F=$.length),D=F-1;D>=0&&(192&$[D])==128;)D--;return D<0||D===0?F:D+w[$[D]]>F?D:F},strings}function requireZstream(){return hasRequiredZstream?zstream:(hasRequiredZstream=1,zstream=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0})}function requireDeflate(){if(hasRequiredDeflate)return deflate$1;hasRequiredDeflate=1;var d=requireDeflate$1(),m=requireCommon(),g=requireStrings(),w=requireMessages(),I=requireZstream(),P=Object.prototype.toString,$=0,F=-1,D=0,U=8;function j(G){if(!(this instanceof j))return new j(G);this.options=m.assign({level:F,method:U,chunkSize:16384,windowBits:15,memLevel:8,strategy:D,to:""},G||{});var H=this.options;H.raw&&H.windowBits>0?H.windowBits=-H.windowBits:H.gzip&&H.windowBits>0&&H.windowBits<16&&(H.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new I,this.strm.avail_out=0;var W=d.deflateInit2(this.strm,H.level,H.method,H.windowBits,H.memLevel,H.strategy);if(W!==$)throw new Error(w[W]);if(H.header&&d.deflateSetHeader(this.strm,H.header),H.dictionary){var q;if(q=typeof H.dictionary=="string"?g.string2buf(H.dictionary):P.call(H.dictionary)==="[object ArrayBuffer]"?new Uint8Array(H.dictionary):H.dictionary,(W=d.deflateSetDictionary(this.strm,q))!==$)throw new Error(w[W]);this._dict_set=!0}}function Z(G,H){var W=new j(H);if(W.push(G,!0),W.err)throw W.msg||w[W.err];return W.result}return j.prototype.push=function(G,H){var W,q,Q=this.strm,et=this.options.chunkSize;if(this.ended)return!1;q=H===~~H?H:H===!0?4:0,typeof G=="string"?Q.input=g.string2buf(G):P.call(G)==="[object ArrayBuffer]"?Q.input=new Uint8Array(G):Q.input=G,Q.next_in=0,Q.avail_in=Q.input.length;do{if(Q.avail_out===0&&(Q.output=new m.Buf8(et),Q.next_out=0,Q.avail_out=et),(W=d.deflate(Q,q))!==1&&W!==$)return this.onEnd(W),this.ended=!0,!1;Q.avail_out!==0&&(Q.avail_in!==0||q!==4&&q!==2)||(this.options.to==="string"?this.onData(g.buf2binstring(m.shrinkBuf(Q.output,Q.next_out))):this.onData(m.shrinkBuf(Q.output,Q.next_out)))}while((Q.avail_in>0||Q.avail_out===0)&&W!==1);return q===4?(W=d.deflateEnd(this.strm),this.onEnd(W),this.ended=!0,W===$):q!==2||(this.onEnd($),Q.avail_out=0,!0)},j.prototype.onData=function(G){this.chunks.push(G)},j.prototype.onEnd=function(G){G===$&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m.flattenChunks(this.chunks)),this.chunks=[],this.err=G,this.msg=this.strm.msg},deflate$1.Deflate=j,deflate$1.deflate=Z,deflate$1.deflateRaw=function(G,H){return(H=H||{}).raw=!0,Z(G,H)},deflate$1.gzip=function(G,H){return(H=H||{}).gzip=!0,Z(G,H)},deflate$1}var inflate$1={},inflate={},inffast,hasRequiredInffast,inftrees,hasRequiredInftrees,hasRequiredInflate$1,constants,hasRequiredConstants,gzheader,hasRequiredGzheader,hasRequiredInflate,pako_1,hasRequiredPako;function requireInffast(){return hasRequiredInffast?inffast:(hasRequiredInffast=1,inffast=function(d,m){var g,w,I,P,$,F,D,U,j,Z,G,H,W,q,Q,et,J,V,rt,X,ot,it,st,at,ft;g=d.state,w=d.next_in,at=d.input,I=w+(d.avail_in-5),P=d.next_out,ft=d.output,$=P-(m-d.avail_out),F=P+(d.avail_out-257),D=g.dmax,U=g.wsize,j=g.whave,Z=g.wnext,G=g.window,H=g.hold,W=g.bits,q=g.lencode,Q=g.distcode,et=(1<<g.lenbits)-1,J=(1<<g.distbits)-1;t:do{W<15&&(H+=at[w++]<<W,W+=8,H+=at[w++]<<W,W+=8),V=q[H&et];e:for(;;){if(H>>>=rt=V>>>24,W-=rt,(rt=V>>>16&255)===0)ft[P++]=65535&V;else{if(!(16&rt)){if(64&rt){if(32&rt){g.mode=12;break t}d.msg="invalid literal/length code",g.mode=30;break t}V=q[(65535&V)+(H&(1<<rt)-1)];continue e}for(X=65535&V,(rt&=15)&&(W<rt&&(H+=at[w++]<<W,W+=8),X+=H&(1<<rt)-1,H>>>=rt,W-=rt),W<15&&(H+=at[w++]<<W,W+=8,H+=at[w++]<<W,W+=8),V=Q[H&J];;){if(H>>>=rt=V>>>24,W-=rt,16&(rt=V>>>16&255)){if(ot=65535&V,W<(rt&=15)&&(H+=at[w++]<<W,(W+=8)<rt&&(H+=at[w++]<<W,W+=8)),(ot+=H&(1<<rt)-1)>D){d.msg="invalid distance too far back",g.mode=30;break t}if(H>>>=rt,W-=rt,ot>(rt=P-$)){if((rt=ot-rt)>j&&g.sane){d.msg="invalid distance too far back",g.mode=30;break t}if(it=0,st=G,Z===0){if(it+=U-rt,rt<X){X-=rt;do ft[P++]=G[it++];while(--rt);it=P-ot,st=ft}}else if(Z<rt){if(it+=U+Z-rt,(rt-=Z)<X){X-=rt;do ft[P++]=G[it++];while(--rt);if(it=0,Z<X){X-=rt=Z;do ft[P++]=G[it++];while(--rt);it=P-ot,st=ft}}}else if(it+=Z-rt,rt<X){X-=rt;do ft[P++]=G[it++];while(--rt);it=P-ot,st=ft}for(;X>2;)ft[P++]=st[it++],ft[P++]=st[it++],ft[P++]=st[it++],X-=3;X&&(ft[P++]=st[it++],X>1&&(ft[P++]=st[it++]))}else{it=P-ot;do ft[P++]=ft[it++],ft[P++]=ft[it++],ft[P++]=ft[it++],X-=3;while(X>2);X&&(ft[P++]=ft[it++],X>1&&(ft[P++]=ft[it++]))}break}if(64&rt){d.msg="invalid distance code",g.mode=30;break t}V=Q[(65535&V)+(H&(1<<rt)-1)]}}break}}while(w<I&&P<F);w-=X=W>>3,H&=(1<<(W-=X<<3))-1,d.next_in=w,d.next_out=P,d.avail_in=w<I?I-w+5:5-(w-I),d.avail_out=P<F?F-P+257:257-(P-F),g.hold=H,g.bits=W},inffast)}function requireInftrees(){if(hasRequiredInftrees)return inftrees;hasRequiredInftrees=1;var d=requireCommon(),m=15,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],w=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],I=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return inftrees=function($,F,D,U,j,Z,G,H){var W,q,Q,et,J,V,rt,X,ot,it=H.bits,st=0,at=0,ft=0,K=0,lt=0,vt=0,dt=0,ht=0,pt=0,Rt=0,Tt=null,xt=0,$t=new d.Buf16(16),Et=new d.Buf16(16),Pt=null,Ot=0;for(st=0;st<=m;st++)$t[st]=0;for(at=0;at<U;at++)$t[F[D+at]]++;for(lt=it,K=m;K>=1&&$t[K]===0;K--);if(lt>K&&(lt=K),K===0)return j[Z++]=20971520,j[Z++]=20971520,H.bits=1,0;for(ft=1;ft<K&&$t[ft]===0;ft++);for(lt<ft&&(lt=ft),ht=1,st=1;st<=m;st++)if(ht<<=1,(ht-=$t[st])<0)return-1;if(ht>0&&($===0||K!==1))return-1;for(Et[1]=0,st=1;st<m;st++)Et[st+1]=Et[st]+$t[st];for(at=0;at<U;at++)F[D+at]!==0&&(G[Et[F[D+at]]++]=at);if($===0?(Tt=Pt=G,V=19):$===1?(Tt=g,xt-=257,Pt=w,Ot-=257,V=256):(Tt=I,Pt=P,V=-1),Rt=0,at=0,st=ft,J=Z,vt=lt,dt=0,Q=-1,et=(pt=1<<lt)-1,$===1&&pt>852||$===2&&pt>592)return 1;for(;;){rt=st-dt,G[at]<V?(X=0,ot=G[at]):G[at]>V?(X=Pt[Ot+G[at]],ot=Tt[xt+G[at]]):(X=96,ot=0),W=1<<st-dt,ft=q=1<<vt;do j[J+(Rt>>dt)+(q-=W)]=rt<<24|X<<16|ot;while(q!==0);for(W=1<<st-1;Rt&W;)W>>=1;if(W!==0?(Rt&=W-1,Rt+=W):Rt=0,at++,--$t[st]==0){if(st===K)break;st=F[D+G[at]]}if(st>lt&&(Rt&et)!==Q){for(dt===0&&(dt=lt),J+=ft,ht=1<<(vt=st-dt);vt+dt<K&&!((ht-=$t[vt+dt])<=0);)vt++,ht<<=1;if(pt+=1<<vt,$===1&&pt>852||$===2&&pt>592)return 1;j[Q=Rt&et]=lt<<24|vt<<16|J-Z}}return Rt!==0&&(j[J+Rt]=st-dt<<24|64<<16),H.bits=lt,0}}function requireInflate$1(){if(hasRequiredInflate$1)return inflate;hasRequiredInflate$1=1;var d=requireCommon(),m=requireAdler32(),g=requireCrc32(),w=requireInffast(),I=requireInftrees(),P=1,$=2,F=0,D=-2,U=1,j=12,Z=30,G=852,H=592;function W(at){return(at>>>24&255)+(at>>>8&65280)+((65280&at)<<8)+((255&at)<<24)}function q(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Q(at){var ft;return at&&at.state?(ft=at.state,at.total_in=at.total_out=ft.total=0,at.msg="",ft.wrap&&(at.adler=1&ft.wrap),ft.mode=U,ft.last=0,ft.havedict=0,ft.dmax=32768,ft.head=null,ft.hold=0,ft.bits=0,ft.lencode=ft.lendyn=new d.Buf32(G),ft.distcode=ft.distdyn=new d.Buf32(H),ft.sane=1,ft.back=-1,F):D}function et(at){var ft;return at&&at.state?((ft=at.state).wsize=0,ft.whave=0,ft.wnext=0,Q(at)):D}function J(at,ft){var K,lt;return at&&at.state?(lt=at.state,ft<0?(K=0,ft=-ft):(K=1+(ft>>4),ft<48&&(ft&=15)),ft&&(ft<8||ft>15)?D:(lt.window!==null&&lt.wbits!==ft&&(lt.window=null),lt.wrap=K,lt.wbits=ft,et(at))):D}function V(at,ft){var K,lt;return at?(lt=new q,at.state=lt,lt.window=null,(K=J(at,ft))!==F&&(at.state=null),K):D}var rt,X,ot=!0;function it(at){if(ot){var ft;for(rt=new d.Buf32(512),X=new d.Buf32(32),ft=0;ft<144;)at.lens[ft++]=8;for(;ft<256;)at.lens[ft++]=9;for(;ft<280;)at.lens[ft++]=7;for(;ft<288;)at.lens[ft++]=8;for(I(P,at.lens,0,288,rt,0,at.work,{bits:9}),ft=0;ft<32;)at.lens[ft++]=5;I($,at.lens,0,32,X,0,at.work,{bits:5}),ot=!1}at.lencode=rt,at.lenbits=9,at.distcode=X,at.distbits=5}function st(at,ft,K,lt){var vt,dt=at.state;return dt.window===null&&(dt.wsize=1<<dt.wbits,dt.wnext=0,dt.whave=0,dt.window=new d.Buf8(dt.wsize)),lt>=dt.wsize?(d.arraySet(dt.window,ft,K-dt.wsize,dt.wsize,0),dt.wnext=0,dt.whave=dt.wsize):((vt=dt.wsize-dt.wnext)>lt&&(vt=lt),d.arraySet(dt.window,ft,K-lt,vt,dt.wnext),(lt-=vt)?(d.arraySet(dt.window,ft,K-lt,lt,0),dt.wnext=lt,dt.whave=dt.wsize):(dt.wnext+=vt,dt.wnext===dt.wsize&&(dt.wnext=0),dt.whave<dt.wsize&&(dt.whave+=vt))),0}return inflate.inflateReset=et,inflate.inflateReset2=J,inflate.inflateResetKeep=Q,inflate.inflateInit=function(at){return V(at,15)},inflate.inflateInit2=V,inflate.inflate=function(at,ft){var K,lt,vt,dt,ht,pt,Rt,Tt,xt,$t,Et,Pt,Ot,Ct,St,It,Ft,Ut,jt,Mt,nt,At,mt,gt,_t=0,yt=new d.Buf8(4),Bt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!at||!at.state||!at.output||!at.input&&at.avail_in!==0)return D;(K=at.state).mode===j&&(K.mode=13),ht=at.next_out,vt=at.output,Rt=at.avail_out,dt=at.next_in,lt=at.input,pt=at.avail_in,Tt=K.hold,xt=K.bits,$t=pt,Et=Rt,At=F;t:for(;;)switch(K.mode){case U:if(K.wrap===0){K.mode=13;break}for(;xt<16;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}if(2&K.wrap&&Tt===35615){K.check=0,yt[0]=255&Tt,yt[1]=Tt>>>8&255,K.check=g(K.check,yt,2,0),Tt=0,xt=0,K.mode=2;break}if(K.flags=0,K.head&&(K.head.done=!1),!(1&K.wrap)||(((255&Tt)<<8)+(Tt>>8))%31){at.msg="incorrect header check",K.mode=Z;break}if((15&Tt)!=8){at.msg="unknown compression method",K.mode=Z;break}if(xt-=4,nt=8+(15&(Tt>>>=4)),K.wbits===0)K.wbits=nt;else if(nt>K.wbits){at.msg="invalid window size",K.mode=Z;break}K.dmax=1<<nt,at.adler=K.check=1,K.mode=512&Tt?10:j,Tt=0,xt=0;break;case 2:for(;xt<16;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}if(K.flags=Tt,(255&K.flags)!=8){at.msg="unknown compression method",K.mode=Z;break}if(57344&K.flags){at.msg="unknown header flags set",K.mode=Z;break}K.head&&(K.head.text=Tt>>8&1),512&K.flags&&(yt[0]=255&Tt,yt[1]=Tt>>>8&255,K.check=g(K.check,yt,2,0)),Tt=0,xt=0,K.mode=3;case 3:for(;xt<32;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}K.head&&(K.head.time=Tt),512&K.flags&&(yt[0]=255&Tt,yt[1]=Tt>>>8&255,yt[2]=Tt>>>16&255,yt[3]=Tt>>>24&255,K.check=g(K.check,yt,4,0)),Tt=0,xt=0,K.mode=4;case 4:for(;xt<16;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}K.head&&(K.head.xflags=255&Tt,K.head.os=Tt>>8),512&K.flags&&(yt[0]=255&Tt,yt[1]=Tt>>>8&255,K.check=g(K.check,yt,2,0)),Tt=0,xt=0,K.mode=5;case 5:if(1024&K.flags){for(;xt<16;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}K.length=Tt,K.head&&(K.head.extra_len=Tt),512&K.flags&&(yt[0]=255&Tt,yt[1]=Tt>>>8&255,K.check=g(K.check,yt,2,0)),Tt=0,xt=0}else K.head&&(K.head.extra=null);K.mode=6;case 6:if(1024&K.flags&&((Pt=K.length)>pt&&(Pt=pt),Pt&&(K.head&&(nt=K.head.extra_len-K.length,K.head.extra||(K.head.extra=new Array(K.head.extra_len)),d.arraySet(K.head.extra,lt,dt,Pt,nt)),512&K.flags&&(K.check=g(K.check,lt,Pt,dt)),pt-=Pt,dt+=Pt,K.length-=Pt),K.length))break t;K.length=0,K.mode=7;case 7:if(2048&K.flags){if(pt===0)break t;Pt=0;do nt=lt[dt+Pt++],K.head&&nt&&K.length<65536&&(K.head.name+=String.fromCharCode(nt));while(nt&&Pt<pt);if(512&K.flags&&(K.check=g(K.check,lt,Pt,dt)),pt-=Pt,dt+=Pt,nt)break t}else K.head&&(K.head.name=null);K.length=0,K.mode=8;case 8:if(4096&K.flags){if(pt===0)break t;Pt=0;do nt=lt[dt+Pt++],K.head&&nt&&K.length<65536&&(K.head.comment+=String.fromCharCode(nt));while(nt&&Pt<pt);if(512&K.flags&&(K.check=g(K.check,lt,Pt,dt)),pt-=Pt,dt+=Pt,nt)break t}else K.head&&(K.head.comment=null);K.mode=9;case 9:if(512&K.flags){for(;xt<16;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}if(Tt!==(65535&K.check)){at.msg="header crc mismatch",K.mode=Z;break}Tt=0,xt=0}K.head&&(K.head.hcrc=K.flags>>9&1,K.head.done=!0),at.adler=K.check=0,K.mode=j;break;case 10:for(;xt<32;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}at.adler=K.check=W(Tt),Tt=0,xt=0,K.mode=11;case 11:if(K.havedict===0)return at.next_out=ht,at.avail_out=Rt,at.next_in=dt,at.avail_in=pt,K.hold=Tt,K.bits=xt,2;at.adler=K.check=1,K.mode=j;case j:if(ft===5||ft===6)break t;case 13:if(K.last){Tt>>>=7&xt,xt-=7&xt,K.mode=27;break}for(;xt<3;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}switch(K.last=1&Tt,xt-=1,3&(Tt>>>=1)){case 0:K.mode=14;break;case 1:if(it(K),K.mode=20,ft===6){Tt>>>=2,xt-=2;break t}break;case 2:K.mode=17;break;case 3:at.msg="invalid block type",K.mode=Z}Tt>>>=2,xt-=2;break;case 14:for(Tt>>>=7&xt,xt-=7&xt;xt<32;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}if((65535&Tt)!=(Tt>>>16^65535)){at.msg="invalid stored block lengths",K.mode=Z;break}if(K.length=65535&Tt,Tt=0,xt=0,K.mode=15,ft===6)break t;case 15:K.mode=16;case 16:if(Pt=K.length){if(Pt>pt&&(Pt=pt),Pt>Rt&&(Pt=Rt),Pt===0)break t;d.arraySet(vt,lt,dt,Pt,ht),pt-=Pt,dt+=Pt,Rt-=Pt,ht+=Pt,K.length-=Pt;break}K.mode=j;break;case 17:for(;xt<14;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}if(K.nlen=257+(31&Tt),Tt>>>=5,xt-=5,K.ndist=1+(31&Tt),Tt>>>=5,xt-=5,K.ncode=4+(15&Tt),Tt>>>=4,xt-=4,K.nlen>286||K.ndist>30){at.msg="too many length or distance symbols",K.mode=Z;break}K.have=0,K.mode=18;case 18:for(;K.have<K.ncode;){for(;xt<3;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}K.lens[Bt[K.have++]]=7&Tt,Tt>>>=3,xt-=3}for(;K.have<19;)K.lens[Bt[K.have++]]=0;if(K.lencode=K.lendyn,K.lenbits=7,mt={bits:K.lenbits},At=I(0,K.lens,0,19,K.lencode,0,K.work,mt),K.lenbits=mt.bits,At){at.msg="invalid code lengths set",K.mode=Z;break}K.have=0,K.mode=19;case 19:for(;K.have<K.nlen+K.ndist;){for(;It=(_t=K.lencode[Tt&(1<<K.lenbits)-1])>>>16&255,Ft=65535&_t,!((St=_t>>>24)<=xt);){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}if(Ft<16)Tt>>>=St,xt-=St,K.lens[K.have++]=Ft;else{if(Ft===16){for(gt=St+2;xt<gt;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}if(Tt>>>=St,xt-=St,K.have===0){at.msg="invalid bit length repeat",K.mode=Z;break}nt=K.lens[K.have-1],Pt=3+(3&Tt),Tt>>>=2,xt-=2}else if(Ft===17){for(gt=St+3;xt<gt;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}xt-=St,nt=0,Pt=3+(7&(Tt>>>=St)),Tt>>>=3,xt-=3}else{for(gt=St+7;xt<gt;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}xt-=St,nt=0,Pt=11+(127&(Tt>>>=St)),Tt>>>=7,xt-=7}if(K.have+Pt>K.nlen+K.ndist){at.msg="invalid bit length repeat",K.mode=Z;break}for(;Pt--;)K.lens[K.have++]=nt}}if(K.mode===Z)break;if(K.lens[256]===0){at.msg="invalid code -- missing end-of-block",K.mode=Z;break}if(K.lenbits=9,mt={bits:K.lenbits},At=I(P,K.lens,0,K.nlen,K.lencode,0,K.work,mt),K.lenbits=mt.bits,At){at.msg="invalid literal/lengths set",K.mode=Z;break}if(K.distbits=6,K.distcode=K.distdyn,mt={bits:K.distbits},At=I($,K.lens,K.nlen,K.ndist,K.distcode,0,K.work,mt),K.distbits=mt.bits,At){at.msg="invalid distances set",K.mode=Z;break}if(K.mode=20,ft===6)break t;case 20:K.mode=21;case 21:if(pt>=6&&Rt>=258){at.next_out=ht,at.avail_out=Rt,at.next_in=dt,at.avail_in=pt,K.hold=Tt,K.bits=xt,w(at,Et),ht=at.next_out,vt=at.output,Rt=at.avail_out,dt=at.next_in,lt=at.input,pt=at.avail_in,Tt=K.hold,xt=K.bits,K.mode===j&&(K.back=-1);break}for(K.back=0;It=(_t=K.lencode[Tt&(1<<K.lenbits)-1])>>>16&255,Ft=65535&_t,!((St=_t>>>24)<=xt);){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}if(It&&!(240&It)){for(Ut=St,jt=It,Mt=Ft;It=(_t=K.lencode[Mt+((Tt&(1<<Ut+jt)-1)>>Ut)])>>>16&255,Ft=65535&_t,!(Ut+(St=_t>>>24)<=xt);){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}Tt>>>=Ut,xt-=Ut,K.back+=Ut}if(Tt>>>=St,xt-=St,K.back+=St,K.length=Ft,It===0){K.mode=26;break}if(32&It){K.back=-1,K.mode=j;break}if(64&It){at.msg="invalid literal/length code",K.mode=Z;break}K.extra=15&It,K.mode=22;case 22:if(K.extra){for(gt=K.extra;xt<gt;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}K.length+=Tt&(1<<K.extra)-1,Tt>>>=K.extra,xt-=K.extra,K.back+=K.extra}K.was=K.length,K.mode=23;case 23:for(;It=(_t=K.distcode[Tt&(1<<K.distbits)-1])>>>16&255,Ft=65535&_t,!((St=_t>>>24)<=xt);){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}if(!(240&It)){for(Ut=St,jt=It,Mt=Ft;It=(_t=K.distcode[Mt+((Tt&(1<<Ut+jt)-1)>>Ut)])>>>16&255,Ft=65535&_t,!(Ut+(St=_t>>>24)<=xt);){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}Tt>>>=Ut,xt-=Ut,K.back+=Ut}if(Tt>>>=St,xt-=St,K.back+=St,64&It){at.msg="invalid distance code",K.mode=Z;break}K.offset=Ft,K.extra=15&It,K.mode=24;case 24:if(K.extra){for(gt=K.extra;xt<gt;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}K.offset+=Tt&(1<<K.extra)-1,Tt>>>=K.extra,xt-=K.extra,K.back+=K.extra}if(K.offset>K.dmax){at.msg="invalid distance too far back",K.mode=Z;break}K.mode=25;case 25:if(Rt===0)break t;if(Pt=Et-Rt,K.offset>Pt){if((Pt=K.offset-Pt)>K.whave&&K.sane){at.msg="invalid distance too far back",K.mode=Z;break}Pt>K.wnext?(Pt-=K.wnext,Ot=K.wsize-Pt):Ot=K.wnext-Pt,Pt>K.length&&(Pt=K.length),Ct=K.window}else Ct=vt,Ot=ht-K.offset,Pt=K.length;Pt>Rt&&(Pt=Rt),Rt-=Pt,K.length-=Pt;do vt[ht++]=Ct[Ot++];while(--Pt);K.length===0&&(K.mode=21);break;case 26:if(Rt===0)break t;vt[ht++]=K.length,Rt--,K.mode=21;break;case 27:if(K.wrap){for(;xt<32;){if(pt===0)break t;pt--,Tt|=lt[dt++]<<xt,xt+=8}if(Et-=Rt,at.total_out+=Et,K.total+=Et,Et&&(at.adler=K.check=K.flags?g(K.check,vt,Et,ht-Et):m(K.check,vt,Et,ht-Et)),Et=Rt,(K.flags?Tt:W(Tt))!==K.check){at.msg="incorrect data check",K.mode=Z;break}Tt=0,xt=0}K.mode=28;case 28:if(K.wrap&&K.flags){for(;xt<32;){if(pt===0)break t;pt--,Tt+=lt[dt++]<<xt,xt+=8}if(Tt!==(4294967295&K.total)){at.msg="incorrect length check",K.mode=Z;break}Tt=0,xt=0}K.mode=29;case 29:At=1;break t;case Z:At=-3;break t;case 31:return-4;default:return D}return at.next_out=ht,at.avail_out=Rt,at.next_in=dt,at.avail_in=pt,K.hold=Tt,K.bits=xt,(K.wsize||Et!==at.avail_out&&K.mode<Z&&(K.mode<27||ft!==4))&&st(at,at.output,at.next_out,Et-at.avail_out),$t-=at.avail_in,Et-=at.avail_out,at.total_in+=$t,at.total_out+=Et,K.total+=Et,K.wrap&&Et&&(at.adler=K.check=K.flags?g(K.check,vt,Et,at.next_out-Et):m(K.check,vt,Et,at.next_out-Et)),at.data_type=K.bits+(K.last?64:0)+(K.mode===j?128:0)+(K.mode===20||K.mode===15?256:0),($t===0&&Et===0||ft===4)&&At===F&&(At=-5),At},inflate.inflateEnd=function(at){if(!at||!at.state)return D;var ft=at.state;return ft.window&&(ft.window=null),at.state=null,F},inflate.inflateGetHeader=function(at,ft){var K;return at&&at.state&&2&(K=at.state).wrap?(K.head=ft,ft.done=!1,F):D},inflate.inflateSetDictionary=function(at,ft){var K,lt=ft.length;return at&&at.state?(K=at.state).wrap!==0&&K.mode!==11?D:K.mode===11&&m(1,ft,lt,0)!==K.check?-3:st(at,ft,lt,lt)?(K.mode=31,-4):(K.havedict=1,F):D},inflate.inflateInfo="pako inflate (from Nodeca project)",inflate}function requireConstants(){return hasRequiredConstants?constants:(hasRequiredConstants=1,constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8})}function requireGzheader(){return hasRequiredGzheader?gzheader:(hasRequiredGzheader=1,gzheader=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1})}function requireInflate(){if(hasRequiredInflate)return inflate$1;hasRequiredInflate=1;var d=requireInflate$1(),m=requireCommon(),g=requireStrings(),w=requireConstants(),I=requireMessages(),P=requireZstream(),$=requireGzheader(),F=Object.prototype.toString;function D(j){if(!(this instanceof D))return new D(j);this.options=m.assign({chunkSize:16384,windowBits:0,to:""},j||{});var Z=this.options;Z.raw&&Z.windowBits>=0&&Z.windowBits<16&&(Z.windowBits=-Z.windowBits,Z.windowBits===0&&(Z.windowBits=-15)),!(Z.windowBits>=0&&Z.windowBits<16)||j&&j.windowBits||(Z.windowBits+=32),Z.windowBits>15&&Z.windowBits<48&&(15&Z.windowBits||(Z.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new P,this.strm.avail_out=0;var G=d.inflateInit2(this.strm,Z.windowBits);if(G!==w.Z_OK)throw new Error(I[G]);if(this.header=new $,d.inflateGetHeader(this.strm,this.header),Z.dictionary&&(typeof Z.dictionary=="string"?Z.dictionary=g.string2buf(Z.dictionary):F.call(Z.dictionary)==="[object ArrayBuffer]"&&(Z.dictionary=new Uint8Array(Z.dictionary)),Z.raw&&(G=d.inflateSetDictionary(this.strm,Z.dictionary))!==w.Z_OK))throw new Error(I[G])}function U(j,Z){var G=new D(Z);if(G.push(j,!0),G.err)throw G.msg||I[G.err];return G.result}return D.prototype.push=function(j,Z){var G,H,W,q,Q,et=this.strm,J=this.options.chunkSize,V=this.options.dictionary,rt=!1;if(this.ended)return!1;H=Z===~~Z?Z:Z===!0?w.Z_FINISH:w.Z_NO_FLUSH,typeof j=="string"?et.input=g.binstring2buf(j):F.call(j)==="[object ArrayBuffer]"?et.input=new Uint8Array(j):et.input=j,et.next_in=0,et.avail_in=et.input.length;do{if(et.avail_out===0&&(et.output=new m.Buf8(J),et.next_out=0,et.avail_out=J),(G=d.inflate(et,w.Z_NO_FLUSH))===w.Z_NEED_DICT&&V&&(G=d.inflateSetDictionary(this.strm,V)),G===w.Z_BUF_ERROR&&rt===!0&&(G=w.Z_OK,rt=!1),G!==w.Z_STREAM_END&&G!==w.Z_OK)return this.onEnd(G),this.ended=!0,!1;et.next_out&&(et.avail_out!==0&&G!==w.Z_STREAM_END&&(et.avail_in!==0||H!==w.Z_FINISH&&H!==w.Z_SYNC_FLUSH)||(this.options.to==="string"?(W=g.utf8border(et.output,et.next_out),q=et.next_out-W,Q=g.buf2string(et.output,W),et.next_out=q,et.avail_out=J-q,q&&m.arraySet(et.output,et.output,W,q,0),this.onData(Q)):this.onData(m.shrinkBuf(et.output,et.next_out)))),et.avail_in===0&&et.avail_out===0&&(rt=!0)}while((et.avail_in>0||et.avail_out===0)&&G!==w.Z_STREAM_END);return G===w.Z_STREAM_END&&(H=w.Z_FINISH),H===w.Z_FINISH?(G=d.inflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===w.Z_OK):H!==w.Z_SYNC_FLUSH||(this.onEnd(w.Z_OK),et.avail_out=0,!0)},D.prototype.onData=function(j){this.chunks.push(j)},D.prototype.onEnd=function(j){j===w.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m.flattenChunks(this.chunks)),this.chunks=[],this.err=j,this.msg=this.strm.msg},inflate$1.Inflate=D,inflate$1.inflate=U,inflate$1.inflateRaw=function(j,Z){return(Z=Z||{}).raw=!0,U(j,Z)},inflate$1.ungzip=U,inflate$1}function requirePako(){if(hasRequiredPako)return pako_1;hasRequiredPako=1;var d={};return(0,requireCommon().assign)(d,requireDeflate(),requireInflate(),requireConstants()),pako_1=d}(function(d){(function(){var m={};function g(){typeof process<"u"||console.log.apply(console,arguments)}d.exports=m,function(w,I){(function(){var P=function(){function D(U){this.message="JPEG error: "+U}return D.prototype=new Error,D.prototype.name="JpegError",D.constructor=D,D}(),$=function(){var D=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),U=4017,j=799,Z=3406,G=2276,H=1567,W=3784,q=5793,Q=2896;function et(st){st==null&&(st={}),st.w==null&&(st.w=-1),this.V=st.n,this.N=st.w}function J(st,at){for(var ft,K,lt,vt=0,dt=[],ht=16;ht>0&&!st[ht-1];)ht--;dt.push({children:[],index:0});var pt=dt[0];for(ft=0;ft<ht;ft++){for(K=0;K<st[ft];K++){for((pt=dt.pop()).children[pt.index]=at[vt];pt.index>0;)pt=dt.pop();for(pt.index++,dt.push(pt);dt.length<=ft;)dt.push(lt={children:[],index:0}),pt.children[pt.index]=lt.children,pt=lt;vt++}ft+1<ht&&(dt.push(lt={children:[],index:0}),pt.children[pt.index]=lt.children,pt=lt)}return dt[0].children}function V(st,at,ft){return 64*((st.P+1)*at+ft)}function rt(st,at,ft,K,lt,vt,dt,ht,pt,Rt){Rt==null&&(Rt=!1);var Tt,xt,$t,Et,Pt,Ot,Ct,St,It,Ft,Ut,jt=ft.m,Mt=ft.Z,nt=at,At=0,mt=0,gt=0,_t=0,yt=0,Bt=0;function tt(){if(mt>0)return mt--,At>>mt&1;if((At=st[at++])===255){var Vt=st[at++];if(Vt){if(Vt===220&&Rt){var ee=F(st,at+=2);if(at+=2,ee>0&&ee!==ft.s)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",ee)}else if(Vt===217){if(Rt){var Jt=8*yt;if(Jt>0&&Jt<ft.s/10)throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",Jt)}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data")}throw new P("unexpected marker")}}return mt=7,At>>>7}function ut(Vt){for(var ee=Vt;;){switch(typeof(ee=ee[tt()])){case"number":return ee;case"object":continue}throw new P("invalid huffman sequence")}}function bt(Vt){for(var ee=0;Vt>0;)ee=ee<<1|tt(),Vt--;return ee}function wt(Vt){if(Vt===1)return tt()===1?1:-1;var ee=bt(Vt);return ee>=1<<Vt-1?ee:ee+(-1<<Vt)+1}function zt(Vt,ee,Jt,oe,ne){var ae=Jt%jt;yt=(Jt/jt|0)*Vt.A+oe;var ce=ae*Vt.h+ne;ee(Vt,V(Vt,yt,ce))}function Zt(Vt,ee,Jt){yt=Jt/Vt.P|0;var oe=Jt%Vt.P;ee(Vt,V(Vt,yt,oe))}var Kt=K.length;for(Ct=Mt?vt===0?ht===0?function(Vt,ee){var Jt=ut(Vt.J),oe=Jt===0?0:wt(Jt)<<pt;Vt.D[ee]=Vt.Q+=oe}:function(Vt,ee){Vt.D[ee]|=tt()<<pt}:ht===0?function(Vt,ee){if(gt>0)gt--;else for(var Jt=vt,oe=dt;Jt<=oe;){var ne=ut(Vt.i),ae=15&ne,ce=ne>>4;if(ae!==0){var ie=D[Jt+=ce];Vt.D[ee+ie]=wt(ae)*(1<<pt),Jt++}else{if(ce<15){gt=bt(ce)+(1<<ce)-1;break}Jt+=16}}}:function(Vt,ee){for(var Jt,oe,ne=vt,ae=dt,ce=0;ne<=ae;){var ie=ee+D[ne],Nt=Vt.D[ie]<0?-1:1;switch(_t){case 0:if(ce=(oe=ut(Vt.i))>>4,(Jt=15&oe)==0)ce<15?(gt=bt(ce)+(1<<ce),_t=4):(ce=16,_t=1);else{if(Jt!==1)throw new P("invalid ACn encoding");Tt=wt(Jt),_t=ce?2:3}continue;case 1:case 2:Vt.D[ie]?Vt.D[ie]+=Nt*(tt()<<pt):--ce==0&&(_t=_t===2?3:0);break;case 3:Vt.D[ie]?Vt.D[ie]+=Nt*(tt()<<pt):(Vt.D[ie]=Tt<<pt,_t=0);break;case 4:Vt.D[ie]&&(Vt.D[ie]+=Nt*(tt()<<pt))}ne++}_t===4&&--gt==0&&(_t=0)}:function(Vt,ee){var Jt=ut(Vt.J),oe=Jt===0?0:wt(Jt),ne=1;for(Vt.D[ee]=Vt.Q+=oe;ne<64;){var ae=ut(Vt.i),ce=15&ae,ie=ae>>4;if(ce!==0){var Nt=D[ne+=ie];Vt.D[ee+Nt]=wt(ce),ne++}else{if(ie<15)break;ne+=16}}},It=Kt===1?K[0].P*K[0].c:jt*ft.R;Bt<=It;){var te=lt?Math.min(It-Bt,lt):It;if(te>0){for($t=0;$t<Kt;$t++)K[$t].Q=0;if(gt=0,Kt===1)for(xt=K[0],Ot=0;Ot<te;Ot++)Zt(xt,Ct,Bt),Bt++;else for(Ot=0;Ot<te;Ot++){for($t=0;$t<Kt;$t++)for(Ft=(xt=K[$t]).h,Ut=xt.A,Et=0;Et<Ut;Et++)for(Pt=0;Pt<Ft;Pt++)zt(xt,Ct,Bt,Et,Pt);Bt++}}if(mt=0,!(St=it(st,at))||(St.u&&(at=St.offset),!(St.M>=65488&&St.M<=65495)))break;at+=2}return at-nt}function X(st,at,ft){var K,lt,vt,dt,ht,pt,Rt,Tt,xt,$t,Et,Pt,Ot,Ct,St,It,Ft,Ut=st.$,jt=st.D;if(!Ut)throw new P("missing required Quantization Table.");for(var Mt=0;Mt<64;Mt+=8)xt=jt[at+Mt],$t=jt[at+Mt+1],Et=jt[at+Mt+2],Pt=jt[at+Mt+3],Ot=jt[at+Mt+4],Ct=jt[at+Mt+5],St=jt[at+Mt+6],It=jt[at+Mt+7],xt*=Ut[Mt],$t|Et|Pt|Ot|Ct|St|It?($t*=Ut[Mt+1],Et*=Ut[Mt+2],Pt*=Ut[Mt+3],Ot*=Ut[Mt+4],Ct*=Ut[Mt+5],St*=Ut[Mt+6],It*=Ut[Mt+7],lt=(K=(K=q*xt+128>>8)+(lt=q*Ot+128>>8)+1>>1)-lt,Ft=(vt=Et)*W+(dt=St)*H+128>>8,vt=vt*H-dt*W+128>>8,Rt=(ht=(ht=Q*($t-It)+128>>8)+(Rt=Ct<<4)+1>>1)-Rt,pt=(Tt=(Tt=Q*($t+It)+128>>8)+(pt=Pt<<4)+1>>1)-pt,dt=(K=K+(dt=Ft)+1>>1)-dt,vt=(lt=lt+vt+1>>1)-vt,Ft=ht*G+Tt*Z+2048>>12,ht=ht*Z-Tt*G+2048>>12,Tt=Ft,Ft=pt*j+Rt*U+2048>>12,pt=pt*U-Rt*j+2048>>12,Rt=Ft,ft[Mt]=K+Tt,ft[Mt+7]=K-Tt,ft[Mt+1]=lt+Rt,ft[Mt+6]=lt-Rt,ft[Mt+2]=vt+pt,ft[Mt+5]=vt-pt,ft[Mt+3]=dt+ht,ft[Mt+4]=dt-ht):(Ft=q*xt+512>>10,ft[Mt]=Ft,ft[Mt+1]=Ft,ft[Mt+2]=Ft,ft[Mt+3]=Ft,ft[Mt+4]=Ft,ft[Mt+5]=Ft,ft[Mt+6]=Ft,ft[Mt+7]=Ft);for(var nt=0;nt<8;++nt)xt=ft[nt],($t=ft[nt+8])|(Et=ft[nt+16])|(Pt=ft[nt+24])|(Ot=ft[nt+32])|(Ct=ft[nt+40])|(St=ft[nt+48])|(It=ft[nt+56])?(lt=(K=4112+((K=q*xt+2048>>12)+(lt=q*Ot+2048>>12)+1>>1))-lt,Ft=(vt=Et)*W+(dt=St)*H+2048>>12,vt=vt*H-dt*W+2048>>12,dt=Ft,Rt=(ht=(ht=Q*($t-It)+2048>>12)+(Rt=Ct)+1>>1)-Rt,pt=(Tt=(Tt=Q*($t+It)+2048>>12)+(pt=Pt)+1>>1)-pt,Ft=ht*G+Tt*Z+2048>>12,ht=ht*Z-Tt*G+2048>>12,Tt=Ft,Ft=pt*j+Rt*U+2048>>12,pt=pt*U-Rt*j+2048>>12,(xt=(K=K+dt+1>>1)+Tt)<16?xt=0:xt>=4080?xt=255:xt>>=4,($t=(lt=lt+vt+1>>1)+(Rt=Ft))<16?$t=0:$t>=4080?$t=255:$t>>=4,(Et=(vt=lt-vt)+pt)<16?Et=0:Et>=4080?Et=255:Et>>=4,(Pt=(dt=K-dt)+ht)<16?Pt=0:Pt>=4080?Pt=255:Pt>>=4,(Ot=dt-ht)<16?Ot=0:Ot>=4080?Ot=255:Ot>>=4,(Ct=vt-pt)<16?Ct=0:Ct>=4080?Ct=255:Ct>>=4,(St=lt-Rt)<16?St=0:St>=4080?St=255:St>>=4,(It=K-Tt)<16?It=0:It>=4080?It=255:It>>=4,jt[at+nt]=xt,jt[at+nt+8]=$t,jt[at+nt+16]=Et,jt[at+nt+24]=Pt,jt[at+nt+32]=Ot,jt[at+nt+40]=Ct,jt[at+nt+48]=St,jt[at+nt+56]=It):(Ft=(Ft=q*xt+8192>>14)<-2040?0:Ft>=2024?255:Ft+2056>>4,jt[at+nt]=Ft,jt[at+nt+8]=Ft,jt[at+nt+16]=Ft,jt[at+nt+24]=Ft,jt[at+nt+32]=Ft,jt[at+nt+40]=Ft,jt[at+nt+48]=Ft,jt[at+nt+56]=Ft)}function ot(st,at){for(var ft=at.P,K=at.c,lt=new Int16Array(64),vt=0;vt<K;vt++)for(var dt=0;dt<ft;dt++)X(at,V(at,vt,dt),lt);return at.D}function it(st,at,ft){ft==null&&(ft=at);var K=st.length-1,lt=ft<at?ft:at;if(at>=K)return null;var vt=F(st,at);if(vt>=65472&&vt<=65534)return{u:null,M:vt,offset:at};for(var dt=F(st,lt);!(dt>=65472&&dt<=65534);){if(++lt>=K)return null;dt=F(st,lt)}return{u:vt.toString(16),M:dt,offset:lt}}return et.prototype={parse(st,at){at==null&&(at={});var ft,K,lt=at.F,vt=0,dt=null,ht=null,pt=0;function Rt(){var Lt=F(st,vt),qt=(vt+=2)+Lt-2,kt=it(st,qt,vt);kt&&kt.u&&(qt=kt.offset);var Yt=st.subarray(vt,qt);return vt+=Yt.length,Yt}function Tt(Lt){for(var qt=Math.ceil(Lt.o/8/Lt.X),kt=Math.ceil(Lt.s/8/Lt.B),Yt=0;Yt<Lt.W.length;Yt++){Zt=Lt.W[Yt];var ue=Math.ceil(Math.ceil(Lt.o/8)*Zt.h/Lt.X),ct=Math.ceil(Math.ceil(Lt.s/8)*Zt.A/Lt.B),Qt=qt*Zt.h,Gt=64*(kt*Zt.A)*(Qt+1);Zt.D=new Int16Array(Gt),Zt.P=ue,Zt.c=ct}Lt.m=qt,Lt.R=kt}var xt=[],$t=[],Et=[],Pt=F(st,vt);if(vt+=2,Pt!==65496)throw new P("SOI not found");Pt=F(st,vt),vt+=2;t:for(;Pt!==65497;){var Ot,Ct,St;switch(Pt){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var It=Rt();Pt===65504&&It[0]===74&&It[1]===70&&It[2]===73&&It[3]===70&&It[4]===0&&(dt={version:{d:It[5],T:It[6]},K:It[7],j:It[8]<<8|It[9],H:It[10]<<8|It[11],S:It[12],I:It[13],C:It.subarray(14,14+3*It[12]*It[13])}),Pt===65518&&It[0]===65&&It[1]===100&&It[2]===111&&It[3]===98&&It[4]===101&&(ht={version:It[5]<<8|It[6],k:It[7]<<8|It[8],q:It[9]<<8|It[10],a:It[11]});break;case 65499:for(var Ft=F(st,vt)+(vt+=2)-2;vt<Ft;){var Ut=st[vt++],jt=new Uint16Array(64);if(Ut>>4){if(Ut>>4!=1)throw new P("DQT - invalid table spec");for(Ct=0;Ct<64;Ct++)jt[D[Ct]]=F(st,vt),vt+=2}else for(Ct=0;Ct<64;Ct++)jt[D[Ct]]=st[vt++];xt[15&Ut]=jt}break;case 65472:case 65473:case 65474:if(ft)throw new P("Only single frame JPEGs supported");vt+=2,(ft={}).G=Pt===65473,ft.Z=Pt===65474,ft.precision=st[vt++];var Mt,nt=F(st,vt),At=0,mt=0;vt+=2,ft.s=lt||nt,ft.o=F(st,vt),vt+=2,ft.W=[],ft._={};var gt=st[vt++];for(Ot=0;Ot<gt;Ot++){Mt=st[vt];var _t=st[vt+1]>>4,yt=15&st[vt+1];At<_t&&(At=_t),mt<yt&&(mt=yt);var Bt=st[vt+2];St=ft.W.push({h:_t,A:yt,L:Bt,$:null}),ft._[Mt]=St-1,vt+=3}ft.X=At,ft.B=mt,Tt(ft);break;case 65476:var tt=F(st,vt);for(vt+=2,Ot=2;Ot<tt;){var ut=st[vt++],bt=new Uint8Array(16),wt=0;for(Ct=0;Ct<16;Ct++,vt++)wt+=bt[Ct]=st[vt];var zt=new Uint8Array(wt);for(Ct=0;Ct<wt;Ct++,vt++)zt[Ct]=st[vt];Ot+=17+wt,(ut>>4?$t:Et)[15&ut]=J(bt,zt)}break;case 65501:K=F(st,vt+=2),vt+=2;break;case 65498:var Zt,Kt=++pt==1&&!lt;vt+=2;var te=st[vt++],Vt=[];for(Ot=0;Ot<te;Ot++){var ee=st[vt++],Jt=ft._[ee];(Zt=ft.W[Jt]).index=ee;var oe=st[vt++];Zt.J=Et[oe>>4],Zt.i=$t[15&oe],Vt.push(Zt)}var ne=st[vt++],ae=st[vt++],ce=st[vt++];try{var ie=rt(st,vt,ft,Vt,K,ne,ae,ce>>4,15&ce,Kt);vt+=ie}catch(Lt){if(Lt instanceof DNLMarkerError)return this.parse(st,{F:Lt.s});if(Lt instanceof EOIMarkerError)break t;throw Lt}break;case 65500:vt+=4;break;case 65535:st[vt]!==255&&vt--;break;default:var Nt=it(st,vt-2,vt-3);if(Nt&&Nt.u){vt=Nt.offset;break}if(vt>=st.length-1)break t;throw new P("JpegImage.parse - unknown marker: "+Pt.toString(16))}Pt=F(st,vt),vt+=2}for(this.width=ft.o,this.height=ft.s,this.g=dt,this.b=ht,this.W=[],Ot=0;Ot<ft.W.length;Ot++){var Xt=xt[(Zt=ft.W[Ot]).L];Xt&&(Zt.$=Xt),this.W.push({index:Zt.index,e:ot(0,Zt),l:Zt.h/ft.X,t:Zt.A/ft.B,P:Zt.P,c:Zt.c})}this.p=this.W.length},Y(st,at,ft){ft==null&&(ft=!1);var K,lt,vt,dt,ht,pt,Rt,Tt,xt,$t,Et,Pt,Ot=this.width/st,Ct=this.height/at,St=0,It=this.W.length,Ft=st*at*It,Ut=new Uint8ClampedArray(Ft),jt=new Uint32Array(st),Mt=4294967288;for(Rt=0;Rt<It;Rt++){if(lt=(K=this.W[Rt]).l*Ot,vt=K.t*Ct,St=Rt,Et=K.e,dt=K.P+1<<3,lt!==Pt){for(ht=0;ht<st;ht++)Tt=0|ht*lt,jt[ht]=(Tt&Mt)<<3|7&Tt;Pt=lt}for(pt=0;pt<at;pt++)for($t=dt*((Tt=0|pt*vt)&Mt)|(7&Tt)<<3,ht=0;ht<st;ht++)Ut[St]=Et[$t+jt[ht]],St+=It}var nt=this.V;if(ft||It!==4||nt||(nt=new Int32Array([-256,255,-256,255,-256,255,-256,255])),nt)for(Rt=0;Rt<Ft;)for(Tt=0,xt=0;Tt<It;Tt++,Rt++,xt+=2)Ut[Rt]=(Ut[Rt]*nt[xt]>>8)+nt[xt+1];return Ut},get f(){return this.b?!!this.b.a:this.p===3?this.N!==0&&(this.W[0].index!==82||this.W[1].index!==71||this.W[2].index!==66):this.N===1},z:function(st){for(var at,ft,K,lt=0,vt=st.length;lt<vt;lt+=3)at=st[lt],ft=st[lt+1],K=st[lt+2],st[lt]=at-179.456+1.402*K,st[lt+1]=at+135.459-.344*ft-.714*K,st[lt+2]=at-226.816+1.772*ft;return st},O:function(st){for(var at,ft,K,lt,vt=0,dt=0,ht=st.length;dt<ht;dt+=4)at=st[dt],ft=st[dt+1],K=st[dt+2],lt=st[dt+3],st[vt++]=ft*(-660635669420364e-19*ft+.000437130475926232*K-54080610064599e-18*at+.00048449797120281*lt-.154362151871126)-122.67195406894+K*(-.000957964378445773*K+.000817076911346625*at-.00477271405408747*lt+1.53380253221734)+at*(.000961250184130688*at-.00266257332283933*lt+.48357088451265)+lt*(-.000336197177618394*lt+.484791561490776),st[vt++]=107.268039397724+ft*(219927104525741e-19*ft-.000640992018297945*K+.000659397001245577*at+.000426105652938837*lt-.176491792462875)+K*(-.000778269941513683*K+.00130872261408275*at+.000770482631801132*lt-.151051492775562)+at*(.00126935368114843*at-.00265090189010898*lt+.25802910206845)+lt*(-.000318913117588328*lt-.213742400323665),st[vt++]=ft*(-.000570115196973677*ft-263409051004589e-19*K+.0020741088115012*at-.00288260236853442*lt+.814272968359295)-20.810012546947+K*(-153496057440975e-19*K-.000132689043961446*at+.000560833691242812*lt-.195152027534049)+at*(.00174418132927582*at-.00255243321439347*lt+.116935020465145)+lt*(-.000343531996510555*lt+.24165260232407);return st.subarray(0,vt)},r:function(st){for(var at,ft,K,lt=0,vt=st.length;lt<vt;lt+=4)at=st[lt],ft=st[lt+1],K=st[lt+2],st[lt]=434.456-at-1.402*K,st[lt+1]=119.541-at+.344*ft+.714*K,st[lt+2]=481.816-at-1.772*ft;return st},U:function(st){for(var at,ft,K,lt,vt=0,dt=0,ht=st.length;dt<ht;dt+=4)at=st[dt],ft=st[dt+1],K=st[dt+2],lt=st[dt+3],st[vt++]=255+at*(-6747147073602441e-20*at+.0008379262121013727*ft+.0002894718188643294*K+.003264231057537806*lt-1.1185611867203937)+ft*(26374107616089405e-21*ft-8626949158638572e-20*K-.0002748769067499491*lt-.02155688794978967)+K*(-3878099212869363e-20*K-.0003267808279485286*lt+.0686742238595345)-lt*(.0003361971776183937*lt+.7430659151342254),st[vt++]=255+at*(.00013596372813588848*at+.000924537132573585*ft+.00010567359618683593*K+.0004791864687436512*lt-.3109689587515875)+ft*(-.00023545346108370344*ft+.0002702845253534714*K+.0020200308977307156*lt-.7488052167015494)+K*(6834815998235662e-20*K+.00015168452363460973*lt-.09751927774728933)-lt*(.0003189131175883281*lt+.7364883807733168),st[vt++]=255+at*(13598650411385307e-21*at+.00012423956175490851*ft+.0004751985097583589*K-36729317476630422e-22*lt-.05562186980264034)+ft*(.00016141380598724676*ft+.0009692239130725186*K+.0007782692450036253*lt-.44015232367526463)+K*(5068882914068769e-22*K+.0017778369011375071*lt-.7591454649749609)-lt*(.0003435319965105553*lt+.7063770186160144);return st.subarray(0,vt)},getData:function(st){var at=st.width,ft=st.height,K=st.forceRGB,lt=st.isSourcePDF;if(this.p>4)throw new P("Unsupported color mode");var vt=this.Y(at,ft,lt);if(this.p===1&&K){for(var dt=vt.length,ht=new Uint8ClampedArray(3*dt),pt=0,Rt=0;Rt<dt;Rt++){var Tt=vt[Rt];ht[pt++]=Tt,ht[pt++]=Tt,ht[pt++]=Tt}return ht}if(this.p===3&&this.f)return this.z(vt);if(this.p===4){if(this.f)return K?this.O(vt):this.r(vt);if(K)return this.U(vt)}return vt}},et}();function F(D,U){return D[U]<<8|D[U+1]}w.JpegDecoder=$})(),w.encodeImage=function(P,$,F,D){var U={t256:[$],t257:[F],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1e3],t277:[4],t278:[F],t279:[$*F*4],t282:[[72,1]],t283:[[72,1]],t284:[1],t286:[[0,1]],t287:[[0,1]],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(D)for(var j in D)U[j]=D[j];var Z=new Uint8Array(w.encode([U])),G=new Uint8Array(P),H=new Uint8Array(1e3+$*F*4);for(j=0;j<Z.length;j++)H[j]=Z[j];for(j=0;j<G.length;j++)H[1e3+j]=G[j];return H.buffer},w.encode=function(P){var $=new Uint8Array(2e4),F=4,D=w._binBE;$[0]=$[1]=77,D.writeUshort($,2,42);var U=8;D.writeUint($,F,U),F+=4;for(var j=0;j<P.length;j++){var Z=w._writeIFD(D,w._types.basic,$,U,P[j]);U=Z[1],j<P.length-1&&(3&U&&(U+=4-(3&U)),D.writeUint($,Z[0],U))}return $.slice(0,U).buffer},w.decode=function(P,$){$==null&&($={parseMN:!0,debug:!1});var F=new Uint8Array(P),D=0,U=w._binBE.readASCII(F,D,2);D+=2;var j=U=="II"?w._binLE:w._binBE;j.readUshort(F,D),D+=2;var Z=j.readUint(F,D);D+=4;for(var G=[];;){var H=j.readUshort(F,Z),W=j.readUshort(F,Z+4);if(H!=0&&(W<1||13<W)){g("error in TIFF");break}if(w._readIFD(j,F,Z,G,0,$),(Z=j.readUint(F,Z+2+12*H))==0)break}return G},w.decodeImage=function(P,$,F){if(!$.data){var D=new Uint8Array(P),U=w._binBE.readASCII(D,0,2);if($.t256!=null){$.isLE=U=="II",$.width=$.t256[0],$.height=$.t257[0];var j=$.t259?$.t259[0]:1,Z=$.t266?$.t266[0]:1;$.t284&&$.t284[0]==2&&g("PlanarConfiguration 2 should not be used!"),j==7&&$.t258&&$.t258.length>3&&($.t258=$.t258.slice(0,3));var G=$.t277?$.t277[0]:1,H=($.t258?$.t258[0]:1)*G;j==1&&$.t279!=null&&$.t278&&$.t262[0]==32803&&(H=Math.round(8*$.t279[0]/($.width*$.t278[0]))),$.t50885&&$.t50885[0]==4&&(H=3*$.t258[0]);var W=8*Math.ceil($.width*H/8),q=$.t273;(q==null||$.t322)&&(q=$.t324);var Q=$.t279;j==1&&q.length==1&&(Q=[$.height*(W>>>3)]),(Q==null||$.t322)&&(Q=$.t325);var et=new Uint8Array($.height*(W>>>3)),J=0;if($.t322!=null){var V=$.t322[0],rt=$.t323[0],X=Math.floor(($.width+V-1)/V),ot=Math.floor(($.height+rt-1)/rt),it=new Uint8Array(0|Math.ceil(V*rt*H/8));console.log("====",X,ot);for(var st=0;st<ot;st++)for(var at=0;at<X;at++){var ft=st*X+at;it.fill(0),w.decode._decompress($,F,D,q[ft],Q[ft],j,it,0,Z,V,rt),j==6?et=it:w._copyTile(it,0|Math.ceil(V*H/8),rt,et,0|Math.ceil($.width*H/8),$.height,0|Math.ceil(at*V*H/8),st*rt)}J=8*et.length}else{if(q==null)return;var K=$.t278?$.t278[0]:$.height;for(K=Math.min(K,$.height),ft=0;ft<q.length;ft++)w.decode._decompress($,F,D,q[ft],Q[ft],j,et,0|Math.ceil(J/8),Z,$.width,K),J+=W*K;J=Math.min(J,8*et.length)}$.data=new Uint8Array(et.buffer,0,0|Math.ceil(J/8))}}},w.decode._decompress=function(P,$,F,D,U,j,Z,G,H,W,q){if(P.t271&&P.t271[0]=="Panasonic"&&P.t45&&P.t45[0]==6&&(j=34316),j==1)for(var Q=0;Q<U;Q++)Z[G+Q]=F[D+Q];else if(j==2)w.decode._decodeG2(F,D,U,Z,G,W,H);else if(j==3)w.decode._decodeG3(F,D,U,Z,G,W,H,!!P.t292&&!(1&~P.t292[0]));else if(j==4)w.decode._decodeG4(F,D,U,Z,G,W,H);else if(j==5)w.decode._decodeLZW(F,D,U,Z,G,8);else if(j==6)w.decode._decodeOldJPEG(P,F,D,U,Z,G);else if(j==7||j==34892)w.decode._decodeNewJPEG(P,F,D,U,Z,G);else if(j==8||j==32946){var et=new Uint8Array(F.buffer,D+2,U-6),J=I.inflateRaw(et);G+J.length<=Z.length&&Z.set(J,G)}else j==9?w.decode._decodeVC5(F,D,U,Z,G,P.t33422):j==32767?w.decode._decodeARW(P,F,D,U,Z,G):j==32773?w.decode._decodePackBits(F,D,U,Z,G):j==32809?w.decode._decodeThunder(F,D,U,Z,G):j==34316?w.decode._decodePanasonic(P,F,D,U,Z,G):j==34713?w.decode._decodeNikon(P,$,F,D,U,Z,G):j==34676?w.decode._decodeLogLuv32(P,F,D,U,Z,G):g("Unknown compression",j);var V=P.t258?Math.min(32,P.t258[0]):1,rt=P.t277?P.t277[0]:1,X=V*rt>>>3,ot=Math.ceil(V*rt*W/8);if(V==16&&!P.isLE&&P.t33422==null)for(var it=0;it<q;it++)for(var st=G+it*ot,at=1;at<ot;at+=2){var ft=Z[st+at];Z[st+at]=Z[st+at-1],Z[st+at-1]=ft}if(P.t317&&P.t317[0]==2)for(it=0;it<q;it++){var K=G+it*ot;if(V==16)for(Q=X;Q<ot;Q+=2){var lt=(Z[K+Q+1]<<8|Z[K+Q])+(Z[K+Q-X+1]<<8|Z[K+Q-X]);Z[K+Q]=255&lt,Z[K+Q+1]=lt>>>8&255}else if(rt==3)for(Q=3;Q<ot;Q+=3)Z[K+Q]=Z[K+Q]+Z[K+Q-3]&255,Z[K+Q+1]=Z[K+Q+1]+Z[K+Q-2]&255,Z[K+Q+2]=Z[K+Q+2]+Z[K+Q-1]&255;else for(Q=X;Q<ot;Q++)Z[K+Q]=Z[K+Q]+Z[K+Q-X]&255}},w.decode._decodePanasonic=function(P,$,F,D,U,j){var Z,G,H,W,q,Q,et,J,V=$.buffer,rt=P.t2[0],X=P.t3[0],ot=P.t10[0],it=P.t45[0],st=0,at=0,ft=0,K=0,lt=it==6?new Uint32Array(18):new Uint8Array(16),vt=[0,0],dt=[0,0],ht=0,pt=new Uint8Array(16384),Rt=new Uint16Array(U.buffer);function Tt(Bt){if(ft==0){var tt=new Uint8Array(V,F+at+8184,8200),ut=new Uint8Array(V,F+at,8184);pt.set(tt),pt.set(ut,tt.length),at+=16384}if(it!=5)return(pt[K=(ft=ft-Bt&131071)>>3^16368]|pt[K+1]<<8)>>(7&ft)&~(-1<<Bt);for(Z=0;Z<16;Z++)lt[Z]=pt[ft++],ft&=16383}function xt(Bt){return pt[ft+15-Bt]}function $t(){vt[0]=0,vt[1]=0,dt[0]=0,dt[1]=0}if(it==7)throw it;if(it==6){var Et=ot==12,Pt=Et?function(){lt[0]=xt(0)<<4|xt(1)>>4,lt[1]=4095&((15&xt(1))<<8|xt(2)),lt[2]=xt(3)>>6&3,lt[3]=(63&xt(3))<<2|xt(4)>>6,lt[4]=(63&xt(4))<<2|xt(5)>>6,lt[5]=(63&xt(5))<<2|xt(6)>>6,lt[6]=xt(6)>>4&3,lt[7]=(15&xt(6))<<4|xt(7)>>4,lt[8]=(15&xt(7))<<4|xt(8)>>4,lt[9]=(15&xt(8))<<4|xt(9)>>4,lt[10]=xt(9)>>2&3,lt[11]=(3&xt(9))<<6|xt(10)>>2,lt[12]=(3&xt(10))<<6|xt(11)>>2,lt[13]=(3&xt(11))<<6|xt(12)>>2,lt[14]=3&xt(12),lt[15]=xt(13),lt[16]=xt(14),lt[17]=xt(15),ft+=16,K=0}:function(){lt[0]=xt(0)<<6|xt(1)>>2,lt[1]=16383&((3&xt(1))<<12|xt(2)<<4|xt(3)>>4),lt[2]=xt(3)>>2&3,lt[3]=(3&xt(3))<<8|xt(4),lt[4]=xt(5)<<2|xt(6)>>6,lt[5]=(63&xt(6))<<4|xt(7)>>4,lt[6]=xt(7)>>2&3,lt[7]=(3&xt(7))<<8|xt(8),lt[8]=xt(9)<<2&1020|xt(10)>>6,lt[9]=1023&(xt(10)<<4|xt(11)>>4),lt[10]=xt(11)>>2&3,lt[11]=(3&xt(11))<<8|xt(12),lt[12]=1023&(xt(13)<<2&1020|xt(14)>>6),lt[13]=1023&(xt(14)<<4|xt(15)>>4),ft+=16,K=0},Ot=Et?14:11,Ct=Et?128:512,St=Et?2048:8192,It=Et?16383:65535,Ft=Et?4095:16383,Ut=rt/Ot,jt=16*Ut,Mt=Et?18:14;for(Q=0;Q<X-15;Q+=16){var nt=Math.min(16,X-Q),At=jt*nt;for(pt=new Uint8Array(V,F+st,At),ft=0,st+=At,J=0,et=0;J<nt;J++,et=0){ht=(Q+J)*rt;for(var mt=0;mt<Ut;mt++)for(Pt(),$t(),H=0,q=0,Z=0;Z<Ot;Z++){if(W=1&Z,Z%3==2){var gt=K<Mt?lt[K++]:0;gt==3&&(gt=4),q=Ct<<gt,H=1<<gt}var _t=K<Mt?lt[K++]:0;vt[W]?(_t*=H,q<St&&dt[W]>q&&(_t+=dt[W]-q),dt[W]=_t):(vt[W]=_t,_t?dt[W]=_t:_t=dt[W]),Rt[ht+et++]=_t-15<=It?_t-15&It:_t+2147483633>>31&Ft}}}}else if(it==5){var yt=ot==12?10:9;for(Q=0;Q<X;Q++)for(et=0;et<rt;et+=yt)Tt(0),ot==12?(Rt[ht++]=((15&lt[1])<<8)+lt[0],Rt[ht++]=16*lt[2]+(lt[1]>>4),Rt[ht++]=((15&lt[4])<<8)+lt[3],Rt[ht++]=16*lt[5]+(lt[4]>>4),Rt[ht++]=((15&lt[7])<<8)+lt[6],Rt[ht++]=16*lt[8]+(lt[7]>>4),Rt[ht++]=((15&lt[10])<<8)+lt[9],Rt[ht++]=16*lt[11]+(lt[10]>>4),Rt[ht++]=((15&lt[13])<<8)+lt[12],Rt[ht++]=16*lt[14]+(lt[13]>>4)):ot==14&&(Rt[ht++]=lt[0]+((63&lt[1])<<8),Rt[ht++]=(lt[1]>>6)+4*lt[2]+((15&lt[3])<<10),Rt[ht++]=(lt[3]>>4)+16*lt[4]+((3&lt[5])<<12),Rt[ht++]=((252&lt[5])>>2)+(lt[6]<<6),Rt[ht++]=lt[7]+((63&lt[8])<<8),Rt[ht++]=(lt[8]>>6)+4*lt[9]+((15&lt[10])<<10),Rt[ht++]=(lt[10]>>4)+16*lt[11]+((3&lt[12])<<12),Rt[ht++]=((252&lt[12])>>2)+(lt[13]<<6),Rt[ht++]=lt[14]+((63&lt[15])<<8))}else{if(it!=4)throw it;for(Q=0;Q<X;Q++)for(et=0;et<rt;et++)W=1&(Z=et%14),Z==0&&$t(),Z%3==2&&(H=4>>3-Tt(2)),dt[W]?(G=Tt(8))!=0&&(vt[W]-=128<<H,(vt[W]<0||H==4)&&(vt[W]&=~(-1<<H)),vt[W]+=G<<H):(dt[W]=Tt(8),(dt[W]||Z>11)&&(vt[W]=dt[W]<<4|Tt(4))),Rt[ht++]=vt[1&et]}},w.decode._decodeVC5=function(){var P,$,F,D=[1,0,1,0,2,2,1,1,3,7,1,2,5,25,1,3,6,48,1,4,6,54,1,5,7,111,1,8,7,99,1,6,7,105,12,0,7,107,1,7,8,209,20,0,8,212,1,9,8,220,1,10,9,393,1,11,9,394,32,0,9,416,1,12,9,427,1,13,10,887,1,18,10,784,1,14,10,790,1,15,10,835,60,0,10,852,1,16,10,885,1,17,11,1571,1,19,11,1668,1,20,11,1669,100,0,11,1707,1,21,11,1772,1,22,12,3547,1,29,12,3164,1,24,12,3166,1,25,12,3140,1,23,12,3413,1,26,12,3537,1,27,12,3539,1,28,13,7093,1,35,13,6283,1,30,13,6331,1,31,13,6335,180,0,13,6824,1,32,13,7072,1,33,13,7077,320,0,13,7076,1,34,14,12565,1,36,14,12661,1,37,14,12669,1,38,14,13651,1,39,14,14184,1,40,15,28295,1,46,15,28371,1,47,15,25320,1,42,15,25336,1,43,15,25128,1,41,15,27300,1,44,15,28293,1,45,16,50259,1,48,16,50643,1,49,16,50675,1,50,16,56740,1,53,16,56584,1,51,16,56588,1,52,17,113483,1,61,17,113482,1,60,17,101285,1,55,17,101349,1,56,17,109205,1,57,17,109207,1,58,17,100516,1,54,17,113171,1,59,18,202568,1,62,18,202696,1,63,18,218408,1,64,18,218412,1,65,18,226340,1,66,18,226356,1,67,18,226358,1,68,19,402068,1,69,19,405138,1,70,19,405394,1,71,19,436818,1,72,19,436826,1,73,19,452714,1,75,19,452718,1,76,19,452682,1,74,20,804138,1,77,20,810279,1,78,20,810790,1,79,20,873638,1,80,20,873654,1,81,20,905366,1,82,20,905430,1,83,20,905438,1,84,21,1608278,1,85,21,1620557,1,86,21,1621582,1,87,21,1621583,1,88,21,1747310,1,89,21,1810734,1,90,21,1810735,1,91,21,1810863,1,92,21,1810879,1,93,22,3621725,1,99,22,3621757,1,100,22,3241112,1,94,22,3494556,1,95,22,3494557,1,96,22,3494622,1,97,22,3494623,1,98,23,6482227,1,102,23,6433117,1,101,23,6989117,1,103,23,6989119,1,105,23,6989118,1,104,23,7243449,1,106,23,7243512,1,107,24,13978233,1,111,24,12964453,1,109,24,12866232,1,108,24,14486897,1,113,24,13978232,1,110,24,14486896,1,112,24,14487026,1,114,24,14487027,1,115,25,25732598,1,225,25,25732597,1,189,25,25732596,1,188,25,25732595,1,203,25,25732594,1,202,25,25732593,1,197,25,25732592,1,207,25,25732591,1,169,25,25732590,1,223,25,25732589,1,159,25,25732522,1,235,25,25732579,1,152,25,25732575,1,192,25,25732489,1,179,25,25732573,1,201,25,25732472,1,172,25,25732576,1,149,25,25732488,1,178,25,25732566,1,120,25,25732571,1,219,25,25732577,1,150,25,25732487,1,127,25,25732506,1,211,25,25732548,1,125,25,25732588,1,158,25,25732486,1,247,25,25732467,1,238,25,25732508,1,163,25,25732552,1,228,25,25732603,1,183,25,25732513,1,217,25,25732587,1,168,25,25732520,1,122,25,25732484,1,128,25,25732562,1,249,25,25732505,1,187,25,25732504,1,186,25,25732483,1,136,25,25928905,1,181,25,25732560,1,255,25,25732500,1,230,25,25732482,1,135,25,25732555,1,233,25,25732568,1,222,25,25732583,1,145,25,25732481,1,134,25,25732586,1,167,25,25732521,1,248,25,25732518,1,209,25,25732480,1,243,25,25732512,1,216,25,25732509,1,164,25,25732547,1,140,25,25732479,1,157,25,25732544,1,239,25,25732574,1,191,25,25732564,1,251,25,25732478,1,156,25,25732546,1,139,25,25732498,1,242,25,25732557,1,133,25,25732477,1,162,25,25732515,1,213,25,25732584,1,165,25,25732514,1,212,25,25732476,1,227,25,25732494,1,198,25,25732531,1,236,25,25732530,1,234,25,25732529,1,117,25,25732528,1,215,25,25732527,1,124,25,25732526,1,123,25,25732525,1,254,25,25732524,1,253,25,25732523,1,148,25,25732570,1,218,25,25732580,1,146,25,25732581,1,147,25,25732569,1,224,25,25732533,1,143,25,25732540,1,184,25,25732541,1,185,25,25732585,1,166,25,25732556,1,132,25,25732485,1,129,25,25732563,1,250,25,25732578,1,151,25,25732501,1,119,25,25732502,1,193,25,25732536,1,176,25,25732496,1,245,25,25732553,1,229,25,25732516,1,206,25,25732582,1,144,25,25732517,1,208,25,25732558,1,137,25,25732543,1,241,25,25732466,1,237,25,25732507,1,190,25,25732542,1,240,25,25732551,1,131,25,25732554,1,232,25,25732565,1,252,25,25732475,1,171,25,25732493,1,205,25,25732492,1,204,25,25732491,1,118,25,25732490,1,214,25,25928904,1,180,25,25732549,1,126,25,25732602,1,182,25,25732539,1,175,25,25732545,1,141,25,25732559,1,138,25,25732537,1,177,25,25732534,1,153,25,25732503,1,194,25,25732606,1,160,25,25732567,1,121,25,25732538,1,174,25,25732497,1,246,25,25732550,1,130,25,25732572,1,200,25,25732474,1,170,25,25732511,1,221,25,25732601,1,196,25,25732532,1,142,25,25732519,1,210,25,25732495,1,199,25,25732605,1,155,25,25732535,1,154,25,25732499,1,244,25,25732510,1,220,25,25732600,1,195,25,25732607,1,161,25,25732604,1,231,25,25732473,1,173,25,25732599,1,226,26,51465122,1,116,26,51465123,0,1],U=[3,3,3,3,2,2,2,1,1,1];function j(J){var V=J[1],rt=J[0][V>>>3]>>>7-(7&V)&1;return J[1]++,rt}function Z(J,V){if(P==null){P={};for(var rt=0;rt<D.length;rt+=4)P[D[rt+1]]=D.slice(rt,rt+4)}for(var X=j(J),ot=P[X];ot==null;)X=X<<1|j(J),ot=P[X];var it=ot[3];it!=0&&(it=j(J)==0?it:-it),V[0]=ot[2],V[1]=it}function G(J,V){for(var rt=0;rt<V;rt++)1&~J||J++,J>>>=1;return J}function H(J,V){return J>>V}function W(J,V,rt,X,ot,it){V[rt]=H(H(11*J[ot]-4*J[ot+it]+J[ot+it+it]+4,3)+J[X],1),V[rt+it]=H(H(5*J[ot]+4*J[ot+it]-J[ot+it+it]+4,3)-J[X],1)}function q(J,V,rt,X,ot,it){var st=J[ot-it]-J[ot+it],at=J[ot],ft=J[X];V[rt]=H(H(st+4,3)+at+ft,1),V[rt+it]=H(H(4-st,3)+at-ft,1)}function Q(J,V,rt,X,ot,it){V[rt]=H(H(5*J[ot]+4*J[ot-it]-J[ot-it-it]+4,3)+J[X],1),V[rt+it]=H(H(11*J[ot]-4*J[ot-it]+J[ot-it-it]+4,3)-J[X],1)}function et(J){return J=F[J=J<0?0:J>4095?4095:J]>>>2}return function(J,V,rt,X,ot,it){X=new Uint16Array(X.buffer);var st,at,ft,K,lt,vt,dt,ht,pt=Date.now(),Rt=w._binBE,Tt=V+rt;V+=4;for(var xt=it[0]==1;V<Tt;){var $t=Rt.readShort(J,V),Et=Rt.readUshort(J,V+2);if(V+=4,$t==12)Ut=Et;else if($t==20)st=Et;else if($t==21)at=Et;else if($t==48)ft=Et;else if($t==53)K=Et;else if($t!=35){if($t==62)lt=Et;else if($t!=101){if($t==109)vt=Et;else if($t!=84){if($t!=106){if($t!=107){if($t!=108){if($t!=102){if($t==104)Jt=Et;else if($t!=105){var Pt=$t<0?-$t:$t,Ot=65280&Pt,Ct=0;if(24576&Pt&&(8192&Pt?(Ct=65535&Et,Ct+=(255&Pt)<<16):Ct=65535&Et),24576&~Pt){if(Pt==16388)V+=4*Ct;else if(Ot!=8192&&Ot!=8448&&Ot!=9216)throw Pt.toString(16)}else{if(dt==null){dt=[];for(var St=0;St<4;St++)dt[St]=new Int16Array((st>>>1)*(at>>>1));for(ht=new Int16Array((st>>>1)*(at>>>1)),$=new Int16Array(1024),St=0;St<1024;St++){var It=St-512,Ft=Math.abs(It),Ut=Math.floor(768*Ft*Ft*Ft/16581375)+Ft;$[St]=Math.sign(It)*Ut}for(F=new Uint16Array(4096),St=0;St<4096;St++){var jt=St,Mt=65535*(Math.pow(113,jt/4095)-1)/112;F[St]=Math.min(Mt,65535)}}var nt=dt[lt],At=G(st,1+U[ft]),mt=G(at,1+U[ft]);if(ft==0)for(var gt=0;gt<mt;gt++)for(var _t=0;_t<At;_t++){var yt=V+2*(gt*At+_t);nt[gt*(st>>>1)+_t]=J[yt]<<8|J[yt+1]}else{var Bt=[J,8*V],tt=[],ut=0,bt=At*mt,wt=[0,0],zt=0;for(Et=0;ut<bt;)for(Z(Bt,wt),zt=wt[0],Et=wt[1];zt>0;)tt[ut++]=Et,zt--;var Zt=(ft-1)%3,Kt=Zt!=1?At:0,te=Zt!=0?mt:0;for(gt=0;gt<mt;gt++){var Vt=(gt+te)*(st>>>1)+Kt,ee=gt*At;for(_t=0;_t<At;_t++)nt[Vt+_t]=$[tt[ee+_t]+512]*K}if(Zt==2){var Jt=st>>>1,oe=2*At,ne=2*mt;for(gt=0;gt<mt;gt++)for(_t=0;_t<oe;_t++){St=2*gt*Jt+_t;var ae=mt*Jt+(ie=gt*Jt+_t);gt==0?W(nt,ht,St,ae,ie,Jt):gt==mt-1?Q(nt,ht,St,ae,ie,Jt):q(nt,ht,St,ae,ie,Jt)}var ce=nt;for(nt=ht,ht=ce,gt=0;gt<ne;gt++)for(_t=0;_t<At;_t++){var ie;St=gt*Jt+2*_t,ae=At+(ie=gt*Jt+_t),_t==0?W(nt,ht,St,ae,ie,1):_t==At-1?Q(nt,ht,St,ae,ie,1):q(nt,ht,St,ae,ie,1)}ce=nt,nt=ht,ht=ce;for(var Nt=[],Xt=2-~~((ft-1)/3),Lt=0;Lt<3;Lt++)Nt[Lt]=vt>>14-2*Lt&3;var qt=Nt[Xt];if(qt!=0)for(gt=0;gt<ne;gt++)for(_t=0;_t<oe;_t++)nt[St=gt*Jt+_t]=nt[St]<<qt}}if(ft==9&&lt==3){var kt=dt[0],Yt=dt[1],ue=dt[2],ct=dt[3];for(gt=0;gt<at;gt+=2)for(_t=0;_t<st;_t+=2){var Qt=gt*st+_t,Gt=kt[yt=(gt>>>1)*(st>>>1)+(_t>>>1)],Dt=Yt[yt]-2048,Ht=ue[yt]-2048,Wt=ct[yt]-2048,le=(Dt<<1)+Gt,re=(Ht<<1)+Gt,se=Gt+Wt,he=Gt-Wt;xt?(X[Qt]=et(se),X[Qt+1]=et(re),X[Qt+st]=et(le),X[Qt+st+1]=et(he)):(X[Qt]=et(le),X[Qt+1]=et(se),X[Qt+st]=et(he),X[Qt+st+1]=et(re))}}V+=4*Ct}}}}}}}}}}console.log(Date.now()-pt)}}(),w.decode._decodeLogLuv32=function(P,$,F,D,U,j){for(var Z=P.width,G=4*Z,H=0,W=new Uint8Array(G);H<D;){for(var q=0;q<G;){var Q=$[F+H];if(H++,Q<128){for(var et=0;et<Q;et++)W[q+et]=$[F+H+et];q+=Q,H+=Q}else{for(Q-=126,et=0;et<Q;et++)W[q+et]=$[F+H];q+=Q,H++}}for(var J=0;J<Z;J++)U[j+0]=W[J],U[j+1]=W[J+Z],U[j+2]=W[J+2*Z],U[j+4]=W[J+3*Z],j+=6}},w.decode._ljpeg_diff=function(P,$,F){var D,U,j=w.decode._getbithuff;return D=j(P,$,F[0],F),(U=j(P,$,D,0))&1<<D-1||(U-=(1<<D)-1),U},w.decode._decodeARW=function(P,$,F,D,U,j){var Z=P.t256[0],G=P.t257[0],H=P.t258[0],W=P.isLE?w._binLE:w._binBE;if(Z*G==D||Z*G*1.5==D)if(Z*G*1.5!=D){var q,Q,et,J,V,rt,X,ot,it=new Uint16Array(16),st=new Uint8Array(Z+1);for(pt=0;pt<G;pt++){for(var at=0;at<Z;at++)st[at]=$[F++];for(ot=0,ht=0;ht<Z-30;ot+=16){for(Q=2047&(q=W.readUint(st,ot)),et=2047&q>>>11,J=15&q>>>22,V=15&q>>>26,rt=0;rt<4&&128<<rt<=Q-et;rt++);for(X=30,ft=0;ft<16;ft++)ft==J?it[ft]=Q:ft==V?it[ft]=et:(it[ft]=((W.readUshort(st,ot+(X>>3))>>>(7&X)&127)<<rt)+et,it[ft]>2047&&(it[ft]=2047),X+=7);for(ft=0;ft<16;ft++,ht+=2)Ct=it[ft]<<1,w.decode._putsF(U,(pt*Z+ht)*H,Ct<<16-H);ht-=1&ht?1:31}}}else for(var ft=0;ft<D;ft+=3){var K=$[F+ft+0],lt=$[F+ft+1],vt=$[F+ft+2];U[j+ft]=lt<<4|K>>>4,U[j+ft+1]=K<<4|vt>>>4,U[j+ft+2]=vt<<4|lt>>>4}else{G+=8;var dt,ht,pt,Rt=[F,0,0,0],Tt=new Uint16Array(32770),xt=[3857,3856,3599,3342,3085,2828,2571,2314,2057,1800,1543,1286,1029,772,771,768,514,513],$t=0,Et=w.decode._ljpeg_diff;for(Tt[0]=15,dt=ft=0;ft<18;ft++)for(var Pt=32768>>>(xt[ft]>>>8),Ot=0;Ot<Pt;Ot++)Tt[++dt]=xt[ft];for(ht=Z;ht--;)for(pt=0;pt<G+1;pt+=2)if(pt==G&&(pt=1),$t+=Et($,Rt,Tt),pt<G){var Ct=4095&$t;w.decode._putsF(U,(pt*Z+ht)*H,Ct<<16-H)}}},w.decode._decodeNikon=function(P,$,F,D,U,j,Z){var G=[[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,5,4,3,6,2,7,1,0,8,9,11,10,12],[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,57,90,56,39,22,5,4,3,2,1,0,11,12,12],[0,0,1,4,2,3,1,2,0,0,0,0,0,0,0,0,0,5,4,6,3,7,2,8,1,9,0,10,11,12],[0,0,1,4,3,1,1,1,1,1,2,0,0,0,0,0,0,5,6,4,7,8,3,9,2,1,0,10,11,12,13,14],[0,0,1,5,1,1,1,1,1,1,1,2,0,0,0,0,0,8,92,75,58,41,7,6,5,4,3,2,1,0,13,14],[0,0,1,4,2,2,3,1,2,0,0,0,0,0,0,0,0,7,6,8,5,9,4,10,3,11,12,2,0,1,13,14]],H=P.t256[0],W=P.t257[0],q=P.t258[0],Q=0,et=0,J=w.decode._make_decoder,V=w.decode._getbithuff,rt=$[0].exifIFD.makerNote,X=rt.t150?rt.t150:rt.t140,ot=0,it=X[ot++],st=X[ot++];it!=73&&st!=88||(ot+=2110),it==70&&(Q=2),q==14&&(Q+=3);for(var at=[[0,0],[0,0]],ft=P.isLE?w._binLE:w._binBE,K=0;K<2;K++)for(var lt=0;lt<2;lt++)at[K][lt]=ft.readShort(X,ot),ot+=2;var vt,dt,ht,pt,Rt,Tt=1<<q&32767,xt=0,$t=ft.readShort(X,ot);ot+=2,$t>1&&(xt=Math.floor(Tt/($t-1))),it==68&&st==32&&xt>0&&(et=ft.readShort(X,562));var Et=[0,0],Pt=J(G[Q]),Ot=[D,0,0,0];for(vt=0;vt<W;vt++)for(et&&vt==et&&(Pt=J(G[Q+1])),dt=0;dt<H;dt++){K=V(F,Ot,Pt[0],Pt),(Rt=1+(V(F,Ot,(ht=15&K)-(pt=K>>>4),0)<<1)<<pt>>>1)&1<<ht-1||(Rt-=(1<<ht)-(pt==0?1:0)),dt<2?Et[dt]=at[1&vt][dt]+=Rt:Et[1&dt]+=Rt;var Ct=Math.min(Math.max(Et[1&dt],0),(1<<q)-1),St=(vt*H+dt)*q;w.decode._putsF(j,St,Ct<<16-q)}},w.decode._putsF=function(P,$,F){F<<=8-(7&$);var D=$>>>3;P[D]|=F>>>16,P[D+1]|=F>>>8,P[D+2]|=F},w.decode._getbithuff=function(P,$,F,D){var U;w.decode._get_byte;var j=$[0],Z=$[1],G=$[2],H=$[3];if(F==0||G<0)return 0;for(;!H&&G<F&&(U=P[j++])!=-1&&!(H=0);)Z=(Z<<8)+U,G+=8;if(U=Z<<32-G>>>32-F,D?(G-=D[U+1]>>>8,U=255&D[U+1]):G-=F,G<0)throw"e";return $[0]=j,$[1]=Z,$[2]=G,$[3]=H,U},w.decode._make_decoder=function(P){var $,F,D,U,j,Z=[];for($=16;$!=0&&!P[$];$--);var G=17;for(Z[0]=$,D=F=1;F<=$;F++)for(U=0;U<P[F];U++,++G)for(j=0;j<1<<$-F;j++)D<=1<<$&&(Z[D++]=F<<8|P[G]);return Z},w.decode._decodeNewJPEG=function(P,$,F,D,U,j){D=Math.min(D,$.length-F);var Z=P.t347,G=Z?Z.length:0,H=new Uint8Array(G+D);if(Z){for(var W=0,q=0;q<G-1&&(Z[q]!=255||Z[q+1]!=217);q++)H[W++]=Z[q];var Q=$[F],et=$[F+1];for(Q==255&&et==216||(H[W++]=Q,H[W++]=et),q=2;q<D;q++)H[W++]=$[F+q]}else for(q=0;q<D;q++)H[q]=$[F+q];if(P.t262[0]==32803||P.t259[0]==7&&P.t262[0]==34892){var J=P.t258[0],V=w.LosslessJpegDecode(H),rt=V.length;if(J==16)if(P.isLE)for(q=0;q<rt;q++)U[j+(q<<1)]=255&V[q],U[j+(q<<1)+1]=V[q]>>>8;else for(q=0;q<rt;q++)U[j+(q<<1)]=V[q]>>>8,U[j+(q<<1)+1]=255&V[q];else if(J==14||J==12||J==10){var X=16-J;for(q=0;q<rt;q++)w.decode._putsF(U,q*J,V[q]<<X)}else{if(J!=8)throw new Error("unsupported bit depth "+J);for(q=0;q<rt;q++)U[j+q]=V[q]}}else{var ot=new w.JpegDecoder;ot.parse(H);var it=ot.getData({width:ot.width,height:ot.height,forceRGB:!0,isSourcePDF:!1});for(q=0;q<it.length;q++)U[j+q]=it[q]}P.t262[0]==6&&(P.t262[0]=2)},w.decode._decodeOldJPEGInit=function(P,$,F,D){var U,j,Z,G,H,W=216,q=0,Q=0,et=!1,J=P.t513,V=J?J[0]:0,rt=P.t514,X=rt?rt[0]:0,ot=P.t324||P.t273||J,it=P.t530,st=0,at=0,ft=P.t277?P.t277[0]:1,K=P.t515;if(ot&&(Q=ot[0],et=ot.length>1),!et){if($[F]==255&&$[F+1]==W)return{jpegOffset:F};if(J!=null&&($[F+V]==255&&$[F+V+1]==W?q=F+V:g("JPEGInterchangeFormat does not point to SOI"),rt==null?g("JPEGInterchangeFormatLength field is missing"):(V>=Q||V+X<=Q)&&g("JPEGInterchangeFormatLength field value is invalid"),q!=null))return{jpegOffset:q}}if(it!=null&&(st=it[0],at=it[1]),J!=null&&rt!=null)if(X>=2&&V+X<=Q){for(U=$[F+V+X-2]==255&&$[F+V+X-1]==W?new Uint8Array(X-2):new Uint8Array(X),Z=0;Z<U.length;Z++)U[Z]=$[F+V+Z];g("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else g("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile");if(U==null){var lt=0,vt=[];vt[lt++]=255,vt[lt++]=W;var dt=P.t519;if(dt==null)throw new Error("JPEGQTables tag is missing");for(Z=0;Z<dt.length;Z++)for(vt[lt++]=255,vt[lt++]=219,vt[lt++]=0,vt[lt++]=67,vt[lt++]=Z,G=0;G<64;G++)vt[lt++]=$[F+dt[Z]+G];for(H=0;H<2;H++){var ht=P[H==0?"t520":"t521"];if(ht==null)throw new Error((H==0?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(Z=0;Z<ht.length;Z++){vt[lt++]=255,vt[lt++]=196;var pt=19;for(G=0;G<16;G++)pt+=$[F+ht[Z]+G];for(vt[lt++]=pt>>>8,vt[lt++]=255&pt,vt[lt++]=Z|H<<4,G=0;G<16;G++)vt[lt++]=$[F+ht[Z]+G];for(G=0;G<pt;G++)vt[lt++]=$[F+ht[Z]+16+G]}}if(vt[lt++]=255,vt[lt++]=192,vt[lt++]=0,vt[lt++]=8+3*ft,vt[lt++]=8,vt[lt++]=P.height>>>8&255,vt[lt++]=255&P.height,vt[lt++]=P.width>>>8&255,vt[lt++]=255&P.width,vt[lt++]=ft,ft==1)vt[lt++]=1,vt[lt++]=17,vt[lt++]=0;else for(Z=0;Z<3;Z++)vt[lt++]=Z+1,vt[lt++]=Z!=0?17:(15&st)<<4|15&at,vt[lt++]=Z;K!=null&&K[0]!=0&&(vt[lt++]=255,vt[lt++]=221,vt[lt++]=0,vt[lt++]=4,vt[lt++]=K[0]>>>8&255,vt[lt++]=255&K[0]),U=new Uint8Array(vt)}var Rt=-1;for(Z=0;Z<U.length-1;){if(U[Z]==255&&U[Z+1]==192){Rt=Z;break}Z++}if(Rt==-1){var Tt=new Uint8Array(U.length+10+3*ft);Tt.set(U);var xt=U.length;if(Rt=U.length,(U=Tt)[xt++]=255,U[xt++]=192,U[xt++]=0,U[xt++]=8+3*ft,U[xt++]=8,U[xt++]=P.height>>>8&255,U[xt++]=255&P.height,U[xt++]=P.width>>>8&255,U[xt++]=255&P.width,U[xt++]=ft,ft==1)U[xt++]=1,U[xt++]=17,U[xt++]=0;else for(Z=0;Z<3;Z++)U[xt++]=Z+1,U[xt++]=Z!=0?17:(15&st)<<4|15&at,U[xt++]=Z}if($[Q]==255&&$[Q+1]==218){var $t=$[Q+2]<<8|$[Q+3];for((j=new Uint8Array($t+2))[0]=$[Q],j[1]=$[Q+1],j[2]=$[Q+2],j[3]=$[Q+3],Z=0;Z<$t-2;Z++)j[Z+4]=$[Q+Z+4]}else{var Et=0;if((j=new Uint8Array(8+2*ft))[Et++]=255,j[Et++]=218,j[Et++]=0,j[Et++]=6+2*ft,j[Et++]=ft,ft==1)j[Et++]=1,j[Et++]=0;else for(Z=0;Z<3;Z++)j[Et++]=Z+1,j[Et++]=Z<<4|Z;j[Et++]=0,j[Et++]=63,j[Et++]=0}return{jpegOffset:F,tables:U,sosMarker:j,sofPosition:Rt}},w.decode._decodeOldJPEG=function(P,$,F,D,U,j){var Z,G,H,W,q=w.decode._decodeOldJPEGInit(P,$,F,D);if(q.jpegOffset!=null)for(Z=F+D-q.jpegOffset,H=new Uint8Array(Z),J=0;J<Z;J++)H[J]=$[q.jpegOffset+J];else{for(G=q.tables.length,(H=new Uint8Array(G+q.sosMarker.length+D+2)).set(q.tables),W=G,H[q.sofPosition+5]=P.height>>>8&255,H[q.sofPosition+6]=255&P.height,H[q.sofPosition+7]=P.width>>>8&255,H[q.sofPosition+8]=255&P.width,$[F]==255&&$[F+1]==SOS||(H.set(q.sosMarker,W),W+=sosMarker.length),J=0;J<D;J++)H[W++]=$[F+J];H[W++]=255,H[W++]=EOI}var Q=new w.JpegDecoder;Q.parse(H);for(var et=Q.getData({width:Q.width,height:Q.height,forceRGB:!0,isSourcePDF:!1}),J=0;J<et.length;J++)U[j+J]=et[J];P.t262&&P.t262[0]==6&&(P.t262[0]=2)},w.decode._decodePackBits=function(P,$,F,D,U){for(var j=new Int8Array(P.buffer),Z=new Int8Array(D.buffer),G=$+F;$<G;){var H=j[$];if($++,H>=0&&H<128)for(var W=0;W<H+1;W++)Z[U]=j[$],U++,$++;if(H>=-127&&H<0){for(W=0;W<1-H;W++)Z[U]=j[$],U++;$++}}return U},w.decode._decodeThunder=function(P,$,F,D,U){for(var j=[0,1,0,-1],Z=[0,1,2,3,0,-3,-2,-1],G=$+F,H=2*U,W=0;$<G;){var q=P[$],Q=q>>>6,et=63&q;if($++,Q==3&&(W=15&et,D[H>>>1]|=W<<4*(1-H&1),H++),Q==0)for(var J=0;J<et;J++)D[H>>>1]|=W<<4*(1-H&1),H++;if(Q==2)for(J=0;J<2;J++)(V=et>>>3*(1-J)&7)!=4&&(W+=Z[V],D[H>>>1]|=W<<4*(1-H&1),H++);if(Q==1)for(J=0;J<3;J++){var V;(V=et>>>2*(2-J)&3)!=2&&(W+=j[V],D[H>>>1]|=W<<4*(1-H&1),H++)}}},w.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},w.decode._lens=function(){var P=function(H,W,q,Q){for(var et=0;et<W.length;et++)H[W[et]]=q+et*Q},$="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",F="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",D="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",U="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",j="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";$=$.split(","),F=F.split(","),D=D.split(","),U=U.split(","),j=j.split(",");var Z={},G={};return P(Z,$,0,1),P(Z,D,64,64),P(Z,j,1792,64),P(G,F,0,1),P(G,U,64,64),P(G,j,1792,64),[Z,G]}(),w.decode._decodeG4=function(P,$,F,D,U,j,Z){for(var G=w.decode,H=$<<3,W=0,q="",Q=[],et=[],J=0;J<j;J++)et.push(0);et=G._makeDiff(et);for(var V=0,rt=0,X=0,ot=0,it=0,st=0,at="",ft=0,K=8*Math.ceil(j/8);H>>>3<$+F;){X=G._findDiff(et,V+(V==0?0:1),1-it),ot=G._findDiff(et,X,it);var lt=0;if(Z==1&&(lt=P[H>>>3]>>>7-(7&H)&1),Z==2&&(lt=P[H>>>3]>>>(7&H)&1),H++,q+=lt,at=="H"){if(G._lens[it][q]!=null){var vt=G._lens[it][q];q="",W+=vt,vt<64&&(G._addNtimes(Q,W,it),V+=W,it=1-it,W=0,--ft==0&&(at=""))}}else q=="0001"&&(q="",G._addNtimes(Q,ot-V,it),V=ot),q=="001"&&(q="",at="H",ft=2),G._dmap[q]!=null&&(rt=X+G._dmap[q],G._addNtimes(Q,rt-V,it),V=rt,q="",it=1-it);Q.length==j&&at==""&&(G._writeBits(Q,D,8*U+st*K),it=0,st++,V=0,et=G._makeDiff(Q),Q=[])}},w.decode._findDiff=function(P,$,F){for(var D=0;D<P.length;D+=2)if(P[D]>=$&&P[D+1]==F)return P[D]},w.decode._makeDiff=function(P){var $=[];P[0]==1&&$.push(0,1);for(var F=1;F<P.length;F++)P[F-1]!=P[F]&&$.push(F,P[F]);return $.push(P.length,0,P.length,1),$},w.decode._decodeG2=function(P,$,F,D,U,j,Z){for(var G=w.decode,H=$<<3,W=0,q="",Q=[],et=0,J=0,V=8*Math.ceil(j/8);H>>>3<$+F;){var rt=0;Z==1&&(rt=P[H>>>3]>>>7-(7&H)&1),Z==2&&(rt=P[H>>>3]>>>(7&H)&1),H++,q+=rt,(W=G._lens[et][q])!=null&&(G._addNtimes(Q,W,et),q="",W<64&&(et=1-et),Q.length==j&&(G._writeBits(Q,D,8*U+J*V),Q=[],J++,et=0,7&H&&(H+=8-(7&H)),W>=64&&(H+=8)))}},w.decode._decodeG3=function(P,$,F,D,U,j,Z,G){for(var H=w.decode,W=$<<3,q=0,Q="",et=[],J=[],V=0;V<j;V++)et.push(0);for(var rt=0,X=0,ot=0,it=0,st=0,at=-1,ft="",K=0,lt=!0,vt=8*Math.ceil(j/8);W>>>3<$+F;){ot=H._findDiff(J,rt+(rt==0?0:1),1-st),it=H._findDiff(J,ot,st);var dt=0;if(Z==1&&(dt=P[W>>>3]>>>7-(7&W)&1),Z==2&&(dt=P[W>>>3]>>>(7&W)&1),W++,Q+=dt,lt){if(H._lens[st][Q]!=null){var ht=H._lens[st][Q];Q="",q+=ht,ht<64&&(H._addNtimes(et,q,st),st=1-st,q=0)}}else ft=="H"?H._lens[st][Q]!=null&&(ht=H._lens[st][Q],Q="",q+=ht,ht<64&&(H._addNtimes(et,q,st),rt+=q,st=1-st,q=0,--K==0&&(ft=""))):(Q=="0001"&&(Q="",H._addNtimes(et,it-rt,st),rt=it),Q=="001"&&(Q="",ft="H",K=2),H._dmap[Q]!=null&&(X=ot+H._dmap[Q],H._addNtimes(et,X-rt,st),rt=X,Q="",st=1-st));Q.endsWith("000000000001")&&(at>=0&&H._writeBits(et,D,8*U+at*vt),G&&(Z==1&&(lt=(P[W>>>3]>>>7-(7&W)&1)==1),Z==2&&(lt=(P[W>>>3]>>>(7&W)&1)==1),W++),Q="",st=0,at++,rt=0,J=H._makeDiff(et),et=[])}et.length==j&&H._writeBits(et,D,8*U+at*vt)},w.decode._addNtimes=function(P,$,F){for(var D=0;D<$;D++)P.push(F)},w.decode._writeBits=function(P,$,F){for(var D=0;D<P.length;D++)$[F+D>>>3]|=P[D]<<7-(F+D&7)},w.decode._decodeLZW=w.decode._decodeLZW=function(){var P,$,F,D,U=0,j=0,Z=0,G=0,H=function(){var V=P>>>3,rt=($[V]<<16|$[V+1]<<8|$[V+2])>>>24-(7&P)-j&(1<<j)-1;return P+=j,rt},W=new Uint32Array(16384),q=0,Q=function(V){j=V+1,U=G+1},et=function(V){for(var rt=V<<2,X=W[rt+2],ot=D+X-1;rt!=65535;)F[ot--]=W[rt],rt=W[rt+1];D+=X},J=function(V,rt){var X=U<<2,ot=V<<2;W[X]=W[3+(rt<<2)],W[X+1]=ot,W[X+2]=W[ot+2]+1,W[X+3]=W[ot+3],++U+1==1<<j&&j!=12&&j++};return function(V,rt,X,ot,it,st){P=rt<<3,$=V,F=ot,D=it;var at=rt+X<<3,ft=0,K=0;for(function(lt){if(lt!=q){q=lt,G=1+(Z=1<<lt);for(var vt=0;vt<G+1;vt++)W[4*vt]=W[4*vt+3]=vt,W[4*vt+1]=65535,W[4*vt+2]=1}}(st),Q(st);P<at&&(ft=H())!=G;){if(ft==Z){if(Q(st),(ft=H())==G)break;et(ft)}else ft<U?(et(ft),J(K,ft)):(J(K,K),et(U-1));K=ft}return D}}(),w.tags={},w._types=function(){var P=new Array(250);return P.fill(0),{basic:{main:P=P.concat([0,0,0,0,4,3,3,3,3,3,0,0,3,0,0,0,3,0,0,2,2,2,2,4,3,0,0,3,4,4,3,3,5,5,3,2,5,5,0,0,0,0,4,4,0,0,3,3,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,2,2,3,5,5,3,0,3,3,4,4,4,3,4,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),rest:{33432:2,33434:5,33437:5,34665:4,34850:3,34853:4,34855:3,34864:3,34866:4,36864:7,36867:2,36868:2,37121:7,37377:10,37378:5,37380:10,37381:5,37383:3,37384:3,37385:3,37386:5,37510:7,37520:2,37521:2,37522:2,40960:7,40961:3,40962:4,40963:4,40965:4,41486:5,41487:5,41488:3,41985:3,41986:3,41987:3,41988:5,41989:3,41990:3,41993:3,41994:3,41995:7,41996:3,42032:2,42033:2,42034:5,42036:2,42037:2,59932:7}},gps:{main:[1,2,5,2,5,1,5,5,0,9],rest:{18:2,29:2}}}}(),w._readIFD=function(P,$,F,D,U,j){var Z=P.readUshort($,F);F+=2;var G={};j.debug&&g("   ".repeat(U),D.length-1,">>>----------------");for(var H=0;H<Z;H++){var W=P.readUshort($,F);F+=2;var q=P.readUshort($,F);F+=2;var Q=P.readUint($,F);F+=4;var et=P.readUint($,F);F+=4;var J=[];if(q==1||q==7){var V=Q<5?F-4:et;V+Q>$.buffer.byteLength&&(Q=$.buffer.byteLength-V),J=new Uint8Array($.buffer,V,Q)}if(q==2){var rt=Q<5?F-4:et,X=$[rt],ot=Math.max(0,Math.min(Q-1,$.length-rt));X<128||ot==0?J.push(P.readASCII($,rt,ot)):J=new Uint8Array($.buffer,rt,ot)}if(q==3)for(var it=0;it<Q;it++)J.push(P.readUshort($,(Q<3?F-4:et)+2*it));if(q==4||q==13)for(it=0;it<Q;it++)J.push(P.readUint($,(Q<2?F-4:et)+4*it));if(q==5||q==10){var st=q==5?P.readUint:P.readInt;for(it=0;it<Q;it++)J.push([st($,et+8*it),st($,et+8*it+4)])}if(q==8)for(it=0;it<Q;it++)J.push(P.readShort($,(Q<3?F-4:et)+2*it));if(q==9)for(it=0;it<Q;it++)J.push(P.readInt($,(Q<2?F-4:et)+4*it));if(q==11)for(it=0;it<Q;it++)J.push(P.readFloat($,et+4*it));if(q==12)for(it=0;it<Q;it++)J.push(P.readDouble($,et+8*it));if(Q==0||J.length!=0){if(j.debug&&g("   ".repeat(U),W,q,w.tags[W],J),G["t"+W]=J,!(W==330&&G.t272&&G.t272[0]=="DSLR-A100")){if(W==330||W==34665||W==34853||W==50740&&P.readUshort($,P.readUint(J,0))<300||W==61440){var at=W==50740?[P.readUint(J,0)]:J,ft=[];for(it=0;it<at.length;it++)w._readIFD(P,$,at[it],ft,U+1,j);W==330&&(G.subIFD=ft),W==34665&&(G.exifIFD=ft[0]),W==34853&&(G.gpsiIFD=ft[0]),W==50740&&(G.dngPrvt=ft[0]),W==61440&&(G.fujiIFD=ft[0])}}if(W==37500&&j.parseMN){var K=J;if(P.readASCII(K,0,5)=="Nikon")G.makerNote=w.decode(K.slice(10).buffer)[0];else if(P.readASCII(K,0,5)=="OLYMP"||P.readASCII(K,0,9)=="OM SYSTEM"){var lt=[8208,8224,8240,8256,8272],vt=[];w._readIFD(P,K,K[1]==77?16:K[5]==85?12:8,vt,U+1,j);var dt=G.makerNote=vt.pop();for(it=0;it<lt.length;it++){var ht="t"+lt[it];dt[ht]!=null&&(w._readIFD(P,K,dt[ht][0],vt,U+1,j),dt[ht]=vt.pop())}dt.t12288&&(w._readIFD(P,dt.t12288,0,vt,U+1,j),dt.t12288=vt.pop())}else P.readUshort($,et)<300&&P.readUshort($,et+4)<=12&&(vt=[],w._readIFD(P,$,et,vt,U+1,j),G.makerNote=vt[0])}}else if(g(W,"unknown TIFF tag type: ",q,"num:",Q),H==0)return}return D.push(G),j.debug&&g("   ".repeat(U),"<<<---------------"),F},w._writeIFD=function(P,$,F,D,U){var j=Object.keys(U),Z=j.length;U.exifIFD&&Z--,U.gpsiIFD&&Z--,P.writeUshort(F,D,Z);for(var G=(D+=2)+12*Z+4,H=0;H<j.length;H++){var W=j[H];if(W!="t34665"&&W!="t34853"){W=="exifIFD"&&(W="t34665"),W=="gpsiIFD"&&(W="t34853");var q=parseInt(W.slice(1)),Q=$.main[q];if(Q==null&&(Q=$.rest[q]),Q==null||Q==0)throw new Error("unknown type of tag: "+q);var et=U[W];q==34665&&(et=[G],G=w._writeIFD(P,$,F,G,U.exifIFD)[1]),q==34853&&(et=[G],G=w._writeIFD(P,w._types.gps,F,G,U.gpsiIFD)[1]),Q==2&&(et=et[0]+"\0");var J=et.length;P.writeUshort(F,D,q),D+=2,P.writeUshort(F,D,Q),D+=2,P.writeUint(F,D,J);var V=[-1,1,1,2,4,8,0,1,0,4,8,0,8][Q]*J,rt=D+=4;if(V>4&&(P.writeUint(F,D,G),rt=G),Q==1||Q==7)for(var X=0;X<J;X++)F[rt+X]=et[X];else if(Q==2)P.writeASCII(F,rt,et);else if(Q==3)for(X=0;X<J;X++)P.writeUshort(F,rt+2*X,et[X]);else if(Q==4)for(X=0;X<J;X++)P.writeUint(F,rt+4*X,et[X]);else if(Q==5||Q==10){var ot=Q==5?P.writeUint:P.writeInt;for(X=0;X<J;X++){var it=et[X],st=it[0],at=it[1];if(st==null)throw"e";ot(F,rt+8*X,st),ot(F,rt+8*X+4,at)}}else if(Q==9)for(X=0;X<J;X++)P.writeInt(F,rt+4*X,et[X]);else{if(Q!=12)throw Q;for(X=0;X<J;X++)P.writeDouble(F,rt+8*X,et[X])}V>4&&(G+=V+=1&V),D+=4}}return[D,G]},w.toRGBA8=function(P,$){function F(Kt){return Kt<.0031308?12.92*Kt:1.055*Math.pow(Kt,1/2.4)-.055}var D=P.width,U=P.height,j=D*U,Z=P.data,G=new Uint8Array(4*j),H=P.t262?P.t262[0]:2,W=P.t258?Math.min(32,P.t258[0]):1;P.t262==null&&W==1&&(H=0);var q=P.t277?P.t277[0]:P.t258?P.t258.length:[1,1,3,1,1,4,3][H],Q=P.t339?P.t339[0]:null;if(H==1&&W==32&&Q!=3)throw"e";var et=Math.ceil(q*W*D/8);if(H==0){$=1/256;for(var J=0;J<U;J++){var V=J*et,rt=J*D;if(W==1)for(var X=0;X<D;X++){var ot=rt+X<<2,it=Z[V+(X>>3)]>>7-(7&X)&1;G[ot]=G[ot+1]=G[ot+2]=255*(1-it),G[ot+3]=255}if(W==4)for(X=0;X<D;X++)ot=rt+X<<2,it=Z[V+(X>>1)]>>4-4*(1&X)&15,G[ot]=G[ot+1]=G[ot+2]=17*(15-it),G[ot+3]=255;if(W==8)for(X=0;X<D;X++)ot=rt+X<<2,it=Z[V+X],G[ot]=G[ot+1]=G[ot+2]=255-it,G[ot+3]=255;if(W==16)for(X=0;X<D;X++)ot=rt+X<<2,it=Z[(at=V+2*X)+1]<<8|Z[at],G[ot]=G[ot+1]=G[ot+2]=Math.min(255,255-~~(it*$)),G[ot+3]=255}}else if(H==1){$==null&&($=1/256);var st=3&Z.length?null:new Float32Array(Z.buffer);for(J=0;J<U;J++){if(V=J*et,rt=J*D,W==1)for(X=0;X<D;X++)ot=rt+X<<2,it=Z[V+(X>>3)]>>7-(7&X)&1,G[ot]=G[ot+1]=G[ot+2]=255*it,G[ot+3]=255;if(W==2)for(X=0;X<D;X++)ot=rt+X<<2,it=Z[V+(X>>2)]>>6-2*(3&X)&3,G[ot]=G[ot+1]=G[ot+2]=85*it,G[ot+3]=255;if(W==8)for(X=0;X<D;X++)ot=rt+X<<2,it=Z[V+X*q],G[ot]=G[ot+1]=G[ot+2]=it,G[ot+3]=255;if(W==16)for(X=0;X<D;X++)ot=rt+X<<2,it=Z[(at=V+2*X)+1]<<8|Z[at],G[ot]=G[ot+1]=G[ot+2]=Math.min(255,~~(it*$)),G[ot+3]=255;if(W==32)for(X=0;X<D;X++){var at;ot=rt+X<<2,it=st[at=(V>>>2)+X],G[ot]=G[ot+1]=G[ot+2]=~~(.5+255*it),G[ot+3]=255}}}else if(H==2)if(W==8){if(q==1)for(X=0;X<j;X++)G[4*X]=G[4*X+1]=G[4*X+2]=Z[X],G[4*X+3]=255;if(q==3)for(X=0;X<j;X++){var ft=3*X;G[ot=X<<2]=Z[ft],G[ot+1]=Z[ft+1],G[ot+2]=Z[ft+2],G[ot+3]=255}if(q>=4)for(X=0;X<j;X++)ft=X*q,G[ot=X<<2]=Z[ft],G[ot+1]=Z[ft+1],G[ot+2]=Z[ft+2],G[ot+3]=Z[ft+3]}else if(W==16){if(q==4)for(X=0;X<j;X++)ft=8*X+1,G[ot=X<<2]=Z[ft],G[ot+1]=Z[ft+2],G[ot+2]=Z[ft+4],G[ot+3]=Z[ft+6];if(q==3)for(X=0;X<j;X++)ft=6*X+1,G[ot=X<<2]=Z[ft],G[ot+1]=Z[ft+2],G[ot+2]=Z[ft+4],G[ot+3]=255}else{if(W!=32)throw W;var K=new Float32Array(Z.buffer),lt=0;for(X=0;X<K.length;X++)lt=Math.min(lt,K[X]);if(lt<0)for(X=0;X<Z.length;X+=4){var vt=Z[X];Z[X]=Z[X+3],Z[X+3]=vt,vt=Z[X+1],Z[X+1]=Z[X+2],Z[X+2]=vt}var dt=[];for(X=0;X<65536;X++)dt.push(F(X/65535));for(X=0;X<K.length;X++){var ht=Math.max(0,Math.min(1,K[X]));K[X]=dt[~~(.5+65535*ht)]}if(q==3)for(X=0;X<j;X++)ft=3*X,G[ot=X<<2]=~~(.5+255*K[ft]),G[ot+1]=~~(.5+255*K[ft+1]),G[ot+2]=~~(.5+255*K[ft+2]),G[ot+3]=255;else{if(q!=4)throw q;for(X=0;X<j;X++)ft=4*X,G[ot=X<<2]=~~(.5+255*K[ft]),G[ot+1]=~~(.5+255*K[ft+1]),G[ot+2]=~~(.5+255*K[ft+2]),G[ot+3]=~~(.5+255*K[ft+3])}}else if(H==3){var pt=P.t320,Rt=1<<W,Tt=W==8&&q>1&&P.t338&&P.t338[0]!=0;for(J=0;J<U;J++)for(var xt=0;xt<D;xt++){ot=(X=J*D+xt)<<2;var $t=0,Et=J*et;if(W==1)$t=Z[Et+(xt>>>3)]>>>7-(7&xt)&1;else if(W==2)$t=Z[Et+(xt>>>2)]>>>6-2*(3&xt)&3;else if(W==4)$t=Z[Et+(xt>>>1)]>>>4-4*(1&xt)&15;else{if(W!=8)throw W;$t=Z[Et+xt*q]}G[ot]=pt[$t]>>8,G[ot+1]=pt[Rt+$t]>>8,G[ot+2]=pt[Rt+Rt+$t]>>8,G[ot+3]=Tt?Z[Et+xt*q+1]:255}}else if(H==5){var Pt=q>4?1:0;for(X=0;X<j;X++){ot=X<<2;var Ot=X*q;if(window.UDOC){var Ct=Z[Ot],St=Z[Ot+1],It=Z[Ot+2],Ft=Z[Ot+3],Ut=UDOC.C.cmykToRgb([Ct*(1/255),St*(1/255),It*(1/255),Ft*(1/255)]);G[ot]=~~(.5+255*Ut[0]),G[ot+1]=~~(.5+255*Ut[1]),G[ot+2]=~~(.5+255*Ut[2])}else Ct=255-Z[Ot],St=255-Z[Ot+1],It=255-Z[Ot+2],Ft=(255-Z[Ot+3])*(1/255),G[ot]=~~(Ct*Ft+.5),G[ot+1]=~~(St*Ft+.5),G[ot+2]=~~(It*Ft+.5);G[ot+3]=255*(1-Pt)+Z[Ot+4]*Pt}}else if(H==6&&P.t278){var jt=P.t278[0];for(J=0;J<U;J+=jt){X=J*D;for(var Mt=jt*D,nt=0;nt<Mt;nt++){ot=4*(X+nt),It=Z[(Ot=3*X+4*(nt>>>1))+(1&nt)];var At=Z[Ot+2]-128,mt=Z[Ot+3]-128,gt=It+((mt>>2)+(mt>>3)+(mt>>5)),_t=It-((At>>2)+(At>>4)+(At>>5))-((mt>>1)+(mt>>3)+(mt>>4)+(mt>>5)),yt=It+(At+(At>>1)+(At>>2)+(At>>6));G[ot]=Math.max(0,Math.min(255,gt)),G[ot+1]=Math.max(0,Math.min(255,_t)),G[ot+2]=Math.max(0,Math.min(255,yt)),G[ot+3]=255}}}else if(H==32845)for(J=0;J<U;J++)for(xt=0;xt<D;xt++){ot=4*(J*D+xt);var Bt=Z[(Ot=6*(J*D+xt))+1]<<8|Z[Ot],tt=(Bt=Math.pow(2,(Bt+.5)/256-64),(Z[Ot+3]+.5)/410),ut=(Z[Ot+5]+.5)/410,bt=9*tt/(6*tt-16*ut+12),wt=4*ut/(6*tt-16*ut+12),zt=bt*Bt/wt,Zt=(1-bt-wt)*Bt/wt;gt=2.69*zt-1.276*(It=Bt)-.414*Zt,_t=-1.022*zt+1.978*It+.044*Zt,yt=.061*zt-.224*It+1.163*Zt,G[ot]=255*F(Math.min(gt,1)),G[ot+1]=255*F(Math.min(_t,1)),G[ot+2]=255*F(Math.min(yt,1)),G[ot+3]=255}else g("Unknown Photometric interpretation: "+H);return G},w.replaceIMG=function(P){P==null&&(P=document.getElementsByTagName("img"));for(var $=["tif","tiff","dng","cr2","nef"],F=0;F<P.length;F++){var D=P[F],U=D.getAttribute("src");if(U!=null){var j=U.split(".").pop().toLowerCase();if($.indexOf(j)!=-1){var Z=new XMLHttpRequest;w._xhrs.push(Z),w._imgs.push(D),Z.open("GET",U),Z.responseType="arraybuffer",Z.onload=w._imgLoaded,Z.send()}}}},w._xhrs=[],w._imgs=[],w._imgLoaded=function(P){var $=w._xhrs.indexOf(P.target),F=w._imgs[$];w._xhrs.splice($,1),w._imgs.splice($,1),F.setAttribute("src",w.bufferToURI(P.target.response))},w.bufferToURI=function(P){var $=w.decode(P),F=$,D=0,U=F[0];$[0].subIFD&&(F=F.concat($[0].subIFD));for(var j=0;j<F.length;j++){var Z=F[j];if(!(Z.t258==null||Z.t258.length<3)){var G=Z.t256*Z.t257;G>D&&(D=G,U=Z)}}w.decodeImage(P,U,$);var H=w.toRGBA8(U),W=U.width,q=U.height,Q=document.createElement("canvas");Q.width=W,Q.height=q;var et=Q.getContext("2d"),J=new ImageData(new Uint8ClampedArray(H.buffer),W,q);return et.putImageData(J,0,0),Q.toDataURL()},w._binBE={nextZero:function(P,$){for(;P[$]!=0;)$++;return $},readUshort:function(P,$){return P[$]<<8|P[$+1]},readShort:function(P,$){var F=w._binBE.ui8;return F[0]=P[$+1],F[1]=P[$+0],w._binBE.i16[0]},readInt:function(P,$){var F=w._binBE.ui8;return F[0]=P[$+3],F[1]=P[$+2],F[2]=P[$+1],F[3]=P[$+0],w._binBE.i32[0]},readUint:function(P,$){var F=w._binBE.ui8;return F[0]=P[$+3],F[1]=P[$+2],F[2]=P[$+1],F[3]=P[$+0],w._binBE.ui32[0]},readASCII:function(P,$,F){for(var D="",U=0;U<F;U++)D+=String.fromCharCode(P[$+U]);return D},readFloat:function(P,$){for(var F=w._binBE.ui8,D=0;D<4;D++)F[D]=P[$+3-D];return w._binBE.fl32[0]},readDouble:function(P,$){for(var F=w._binBE.ui8,D=0;D<8;D++)F[D]=P[$+7-D];return w._binBE.fl64[0]},writeUshort:function(P,$,F){P[$]=F>>8&255,P[$+1]=255&F},writeInt:function(P,$,F){var D=w._binBE.ui8;w._binBE.i32[0]=F,P[$+3]=D[0],P[$+2]=D[1],P[$+1]=D[2],P[$+0]=D[3]},writeUint:function(P,$,F){P[$]=F>>24&255,P[$+1]=F>>16&255,P[$+2]=F>>8&255,P[$+3]=255&F},writeASCII:function(P,$,F){for(var D=0;D<F.length;D++)P[$+D]=F.charCodeAt(D)},writeDouble:function(P,$,F){w._binBE.fl64[0]=F;for(var D=0;D<8;D++)P[$+D]=w._binBE.ui8[7-D]}},w._binBE.ui8=new Uint8Array(8),w._binBE.i16=new Int16Array(w._binBE.ui8.buffer),w._binBE.i32=new Int32Array(w._binBE.ui8.buffer),w._binBE.ui32=new Uint32Array(w._binBE.ui8.buffer),w._binBE.fl32=new Float32Array(w._binBE.ui8.buffer),w._binBE.fl64=new Float64Array(w._binBE.ui8.buffer),w._binLE={nextZero:w._binBE.nextZero,readUshort:function(P,$){return P[$+1]<<8|P[$]},readShort:function(P,$){var F=w._binBE.ui8;return F[0]=P[$+0],F[1]=P[$+1],w._binBE.i16[0]},readInt:function(P,$){var F=w._binBE.ui8;return F[0]=P[$+0],F[1]=P[$+1],F[2]=P[$+2],F[3]=P[$+3],w._binBE.i32[0]},readUint:function(P,$){var F=w._binBE.ui8;return F[0]=P[$+0],F[1]=P[$+1],F[2]=P[$+2],F[3]=P[$+3],w._binBE.ui32[0]},readASCII:w._binBE.readASCII,readFloat:function(P,$){for(var F=w._binBE.ui8,D=0;D<4;D++)F[D]=P[$+D];return w._binBE.fl32[0]},readDouble:function(P,$){for(var F=w._binBE.ui8,D=0;D<8;D++)F[D]=P[$+D];return w._binBE.fl64[0]},writeUshort:function(P,$,F){P[$]=255&F,P[$+1]=F>>8&255},writeInt:function(P,$,F){var D=w._binBE.ui8;w._binBE.i32[0]=F,P[$+0]=D[0],P[$+1]=D[1],P[$+2]=D[2],P[$+3]=D[3]},writeUint:function(P,$,F){P[$]=F>>>0&255,P[$+1]=F>>>8&255,P[$+2]=F>>>16&255,P[$+3]=F>>>24&255},writeASCII:w._binBE.writeASCII},w._copyTile=function(P,$,F,D,U,j,Z,G){for(var H=Math.min($,U-Z),W=Math.min(F,j-G),q=0;q<W;q++)for(var Q=(G+q)*U+Z,et=q*$,J=0;J<H;J++)D[Q+J]=P[et+J]},w.LosslessJpegDecode=function(){var P,$;function F(){return P[$++]}function D(){return P[$++]<<8|P[$++]}function U(V){for(var rt=F(),X=[0,0,0,255],ot=[],it=0;it<16;it++)ot[it]=F();for(it=0;it<16;it++)for(var st=0;st<ot[it];st++)X[j(X,0,it+1,1)+3]=F();var at=new Uint8Array(256);for(V[rt]=[new Uint8Array(X),at],it=0;it<256;it++){for(var ft=8,K=it,lt=0;X[lt+3]==255&&ft!=0;)lt=X[lt+(K>>--ft&1)];at[it]=lt}}function j(V,rt,X,ot){if(V[rt+3]!=255)return 0;if(X==0)return rt;for(var it=0;it<2;it++){V[rt+it]==0&&(V[rt+it]=V.length,V.push(0,0,ot,255));var st=j(V,V[rt+it],X-1,ot+1);if(st!=0)return st}return 0}function Z(V){for(var rt=V.b,X=V.f;rt<25&&V.a<V.d;){var ot=V.data[V.a++];ot!=255||V.c||V.a++,X=X<<8|ot,rt+=8}if(rt<0)throw"e";V.b=rt,V.f=X}function G(V,rt){return rt.b<V&&Z(rt),rt.f>>(rt.b-=V)&65535>>16-V}function H(V,rt){var X=V[0],ot=0,it=255;rt.b<16&&Z(rt);var st=rt.f>>rt.b-8&255;for(it=X[(ot=V[1][st])+3],rt.b-=X[ot+2];it==255;)it=X[(ot=X[ot+(rt.f>>--rt.b&1)])+3];return it}function W(V,rt){return V<32768>>16-rt&&(V+=1-(1<<rt)),V}function q(V,rt){var X=H(V,rt);return X==0?0:X==16?-32768:W(G(X,rt),X)}function Q(V,rt,X,ot,it,st){for(var at=0,ft=0;ft<st;ft++){for(var K=ft*rt,lt=0;lt<rt;lt+=it){at++;for(var vt=0;vt<it;vt++)V[K+lt+vt]=q(ot[vt],X)}if(X.e!=0&&at%X.e==0&&ft!=0){for(var dt=X.a,ht=X.data;ht[dt]!=255||!(208<=ht[dt+1]&&ht[dt+1]<=215);)dt--;X.a=dt+2,X.f=0,X.b=0}}}function et(V,rt){return W(G(V,rt),V)}function J(V,rt,X,ot,it,st,at,ft){for(var K=X*at,lt=it;lt<st;lt++)V[lt]+=1<<ft-1;for(var vt=at;vt<K;vt+=at)for(lt=it;lt<st;lt++)V[vt+lt]+=V[vt+lt-at];for(var dt=1;dt<ot;dt++){var ht=dt*K;for(lt=it;lt<st;lt++)V[ht+lt]+=V[ht+lt-K];for(vt=at;vt<K;vt+=at)for(lt=it;lt<st;lt++){var pt=ht+vt+lt,Rt=pt-K,Tt=V[pt-at],xt=0;if(rt==0)xt=0;else if(rt==1)xt=Tt;else if(rt==2)xt=V[Rt];else if(rt==3)xt=V[Rt-at];else if(rt==4)xt=Tt+(V[Rt]-V[Rt-at]);else if(rt==5)xt=Tt+(V[Rt]-V[Rt-at]>>>1);else if(rt==6)xt=V[Rt]+(Tt-V[Rt-at]>>>1);else{if(rt!=7)throw rt;xt=Tt+V[Rt]>>>1}V[pt]+=xt}}}return function(V){if(P=V,$=0,D()!=65496)throw"e";for(var rt=[],X=0,ot=0,it=0,st=[],at=[],ft=[],K=0,lt=0,vt=0;;){var dt=D();if(dt!=65535){var ht=D();if(dt==65475){ot=F(),lt=D(),vt=D(),K=F();for(var pt=0;pt<K;pt++){var Rt=F(),Tt=F();if(F()!=0)throw"e";rt[Rt]=[pt,Tt>>4,15&Tt]}}else if(dt==65476)for(var xt=$+ht-2;$<xt;)U(at);else{if(dt==65498){for($++,pt=0;pt<K;pt++){var $t=rt[F()];ft[$t[0]]=at[F()>>>4],st[$t[0]]=$t.slice(1)}X=F(),$+=2;break}dt==65501?it=D():$+=ht-2}}else $--}var Et=new(ot>8?Uint16Array:Uint8Array)(lt*vt*K),Pt={b:0,f:0,c:X==8,a:$,data:P,d:P.length,e:it};if(Pt.c)(function(zt,Zt,Kt,te,Vt){for(var ee=P.length-$,Jt=0;Jt<ee;Jt+=4){var oe=P[$+Jt];P[$+Jt]=P[$+Jt+3],P[$+Jt+3]=oe,oe=P[$+Jt+1],P[$+Jt+1]=P[$+Jt+2],P[$+Jt+2]=oe}for(var ne=0;ne<Vt;ne++)for(var ae=32768,ce=32768,ie=0;ie<Zt;ie+=2){var Nt=H(te,Kt),Xt=H(te,Kt);Nt!=0&&(ae+=et(Nt,Kt)),Xt!=0&&(ce+=et(Xt,Kt)),zt[ne*Zt+ie]=65535&ae,zt[ne*Zt+ie+1]=65535&ce}})(Et,vt*K,Pt,ft[0],lt);else{var Ot=[],Ct=0,St=0;for(pt=0;pt<K;pt++){var It=st[pt];(yt=It[0])>Ct&&(Ct=yt),(_t=It[1])>St&&(St=_t),Ot.push(yt*_t)}if(Ct!=1||St!=1){if(K!=3||Ot[1]!=1||Ot[2]!=1||Ct!=2||St!=1&&St!=2)throw"e";var Ft=[],Ut=0;for(pt=0;pt<K;pt++){for(var jt=0;jt<Ot[pt];jt++)Ft.push(ft[pt]);Ut+=Ot[pt]}var Mt=vt/Ct,nt=lt/St,At=Mt*nt;Q(Et,Mt*Ut,Pt,Ft,Ut,nt),J(Et,X,Mt,nt,Ut-2,Ut,Ut,ot);var mt=new Uint16Array(At*Ot[0]);if(Ct==2&&St==2){for(pt=0;pt<At;pt++)mt[4*pt]=Et[6*pt],mt[4*pt+1]=Et[6*pt+1],mt[4*pt+2]=Et[6*pt+2],mt[4*pt+3]=Et[6*pt+3];for(J(mt,X,4*Mt,nt,0,1,1,ot),pt=0;pt<At;pt++)Et[6*pt]=mt[4*pt],Et[6*pt+1]=mt[4*pt+1],Et[6*pt+2]=mt[4*pt+2],Et[6*pt+3]=mt[4*pt+3]}if(Ct==2&&St==1){for(pt=0;pt<At;pt++)mt[2*pt]=Et[4*pt],mt[2*pt+1]=Et[4*pt+1];for(J(mt,X,2*Mt,nt,0,1,1,ot),pt=0;pt<At;pt++)Et[4*pt]=mt[2*pt],Et[4*pt+1]=mt[2*pt+1]}for(var gt=Et.slice(0),_t=0;_t<lt;_t++)if(St==2)for(var yt=0;yt<vt;yt++){var Bt=((_t>>>1)*Mt+(yt>>>1))*Ut,tt=2*(1&_t)+(1&yt);Et[ut=(_t*vt+yt)*K]=gt[Bt+tt],Et[ut+1]=gt[Bt+4],Et[ut+2]=gt[Bt+5]}else for(yt=0;yt<vt;yt++){var ut;Bt=(_t*Mt+(yt>>>1))*Ut,tt=1&yt,Et[ut=(_t*vt+yt)*K]=gt[Bt+tt],Et[ut+1]=gt[Bt+2],Et[ut+2]=gt[Bt+3]}}else if(Q(Et,vt*K,Pt,ft,K,lt),it==0)J(Et,X,vt,lt,0,K,K,ot);else{var bt=Math.floor(it/vt);for(_t=0;_t<lt;_t+=bt){var wt=Et.slice(_t*vt*K,(_t+bt)*vt*K);J(wt,X,vt,bt,0,K,K,ot),Et.set(wt,_t*vt*K)}}}return Et}}(),function(){var P=2,$=4,F=5,D=6,U=7,j=12,Z=13,G=14,H=15,W=17;function q(st){var at={c:new Int8Array(2<<st.u)};return function(ft,K,lt){var vt=[K,3*K+18,5*K+67,7*K+276,lt];ft.o=K,ft.w=(vt[4]+2*K)/(2*K+1)+1|0,ft.v=Math.ceil(Math.log2(ft.w)),ft.t=9,function(dt,ht){for(var pt=-ht[4],Rt=0;pt<=ht[4];Rt++,pt++)dt[Rt]=pt<=-ht[3]?-4:pt<=-ht[2]?-3:pt<=-ht[1]?-2:pt<-ht[0]?-1:pt<=ht[0]?0:pt<ht[1]?1:pt<ht[2]?2:pt<ht[3]?3:4}(ft.c,vt)}(at,0,st.g),at}function Q(st){for(var at=[[],[],[]],ft=Math.max(2,st.w+32>>>6),K=0;K<3;K++)for(var lt=0;lt<41;lt++)at[K][lt]=[ft,1];return at}function et(st,at){var ft=0,K=8-st.a;if(st.j,st.a,at){if(at>=K)do ft<<=K,at-=K,ft|=st[st.j]&(1<<K)-1,st.j++,K=8;while(at>=8);at&&(ft<<=at,K-=at,ft|=st[st.j]>>>K&(1<<at)-1),st.a=8-K}return ft}function J(st,at,ft,K,lt,vt,dt,ht){ht==null&&(ht=0);var pt,Rt,Tt,xt,$t,Et,Pt=vt+1,Ot=Pt%2,Ct=0,St=K[lt],It=K[lt-1],Ft=K[lt-2][Pt],Ut=It[Pt-1],jt=It[Pt],Mt=It[Pt+1],nt=St[Pt-1],At=St[Pt+1],mt=Math.abs;if(Ot&&(Tt=mt(Mt-jt),xt=mt(Ft-jt),$t=mt(Ut-jt)),Ot){if(Et=(Et=Tt>$t&&xt<Tt?Ft+Ut:Tt<$t&&xt<$t?Ft+Mt:Mt+Ut)+2*jt>>>2,ht)return void(St[Pt]=Et);pt=at.t*at.c[st.g+jt-Ft]+at.c[st.g+Ut-jt]}else Et=jt>Ut&&jt>Mt||jt<Ut&&jt<Mt?At+nt+2*jt>>>2:nt+At>>>1,pt=at.t*at.c[st.g+jt-Ut]+at.c[st.g+Ut-nt];Rt=mt(pt);var gt=function(yt){for(var Bt=-1,tt=0;!tt;Bt++)tt=yt[yt.j]>>>7-yt.a&1,yt.a++,yt.a&=7,yt.a||yt.j++;return Bt}(ft);if(gt<st.n-at.v-1){var _t=function(yt,Bt){var tt=0;if(Bt<yt)for(;tt<=14&&Bt<<++tt<yt;);return tt}(dt[Rt][0],dt[Rt][1]);Ct=et(ft,_t)+(gt<<_t)}else Ct=et(ft,at.v)+1;Ct=1&Ct?-1-(Ct>>>1):Ct>>>1,dt[Rt][0]+=mt(Ct),dt[Rt][1]==st.f&&(dt[Rt][0]>>>=1,dt[Rt][1]>>>=1),dt[Rt][1]++,Et=pt<0?Et-Ct:Et+Ct,st.i&&(Et<0?Et+=at.w:Et>st.g&&(Et-=at.w)),St[Pt]=Et>=0?Math.min(Et,st.g):0}function V(st,at,ft){for(var K=st[0].length,lt=at;lt<=ft;lt++)st[lt][0]=st[lt-1][1],st[lt][K-1]=st[lt-1][K-2]}function rt(st){V(st,U,j),V(st,P,$),V(st,H,W)}function X(st,at,ft,K,lt,vt,dt,ht,pt,Rt,Tt,xt,$t){for(var Et=0,Pt=1,Ot=lt<Z&&lt>$;Pt<st.m;)Et<st.m&&(J(st,at,ft,K,lt,Et,dt[pt],st.h&&(Ot&&Rt||!Ot&&(Tt||(Et&xt)==$t))),J(st,at,ft,K,vt,Et,dt[pt],st.h&&(!Ot&&Rt||Ot&&(Tt||(Et&xt)==$t))),Et+=2),Et>8&&(J(st,at,ft,K,lt,Pt,ht[pt]),J(st,at,ft,K,vt,Pt,ht[pt]),Pt+=2);rt(K)}function ot(st,at,ft,K,lt,vt){X(st,at,ft,K,P,U,lt,vt,0,0,1,0,8),X(st,at,ft,K,8,H,lt,vt,1,0,1,0,8),X(st,at,ft,K,3,9,lt,vt,2,1,0,3,0),X(st,at,ft,K,10,16,lt,vt,0,0,0,3,2),X(st,at,ft,K,$,11,lt,vt,1,0,0,3,2),X(st,at,ft,K,j,W,lt,vt,2,1,0,3,0)}function it(st,at,ft,K,lt,vt){var dt=vt.length,ht=st.l;lt+1==st.s&&(ht=st.e-lt*st.l);for(var pt=6*st.e*K+lt*st.l,Rt=0;Rt<6;Rt++){for(var Tt=0;Tt<ht;Tt++){var xt,$t=vt[Rt%dt][Tt%dt];xt=$t==0?P+(Rt>>>1):$t==2?H+(Rt>>>1):U+Rt;var Et=st.h?(2*Tt/3&2147483646|Tt%3&1)+(Tt%3>>>1):Tt>>>1;at[pt+Tt]=ft[xt][Et+1]}pt+=st.e}}w._decompressRAF=function(st,at){var ft=function(Pt){var Ot=w._binBE.readUshort,Ct={b:Ot(Pt,0),i:Pt[2],C:Pt[3],u:Pt[4],q:Ot(Pt,5),k:Ot(Pt,7),e:Ot(Pt,9),l:Ot(Pt,11),s:Pt[13],d:Ot(Pt,14)};if(Ct.b!=18771||Ct.i>1||Ct.q<6||Ct.q%6||Ct.e<768||Ct.e%24||Ct.l!=768||Ct.k<Ct.l||Ct.k%Ct.l||Ct.k-Ct.e>=Ct.l||Ct.s>16||Ct.s!=Ct.k/Ct.l||Ct.s!=Math.ceil(Ct.e/Ct.l)||Ct.d!=Ct.q/6||Ct.u!=12&&Ct.u!=14&&Ct.u!=16||Ct.C!=16&&Ct.C!=0)throw"Invalid data";if(Ct.i==0)throw"Not implemented. We need this file!";return Ct.h=Ct.C==16,Ct.m=0|(Ct.h?2*Ct.l/3:Ct.l>>>1),Ct.A=Ct.m+2,Ct.f=64,Ct.g=(1<<Ct.u)-1,Ct.n=4*Ct.u,Ct}(st),K=function(Pt,Ot){var Ct=new Array(Ot.s),St=4*Ot.s,It=16+St;12&St&&(It+=16-(12&St));for(var Ft=0,Ut=16;Ft<Ot.s;Ut+=4){var jt=w._binBE.readUint(Pt,Ut);Ct[Ft]=Pt.slice(It,It+jt),Ct[Ft].j=0,Ct[Ft].a=0,It+=jt,Ft++}if(It!=Pt.length)throw"Invalid data";return Ct}(st,ft),lt=q(ft),vt=new Int16Array(ft.e*ft.q);at==null&&(at=ft.h?[[1,1,0,1,1,2],[1,1,2,1,1,0],[2,0,1,0,2,1],[1,1,2,1,1,0],[1,1,0,1,1,2],[0,2,1,2,0,1]]:[[0,1],[3,2]]);for(var dt=[[0,3],[1,$],[F,11],[D,j],[Z,16],[G,W]],ht=[],pt=0;pt<18;pt++)ht[pt]=new Uint16Array(ft.A);for(var Rt=0;Rt<ft.s;Rt++){var Tt=Q(lt),xt=Q(lt);for(pt=0;pt<18;pt++)for(var $t=0;$t<ft.A;$t++)ht[pt][$t]=0;for(var Et=0;Et<ft.d;Et++){for(ot(ft,lt,K[Rt],ht,Tt,xt),pt=0;pt<6;pt++)for($t=0;$t<ft.A;$t++)ht[dt[pt][0]][$t]=ht[dt[pt][1]][$t];for(it(ft,vt,ht,Et,Rt,at),pt=P;pt<18;pt++)if([F,D,Z,G].indexOf(pt)==-1)for($t=0;$t<ft.A;$t++)ht[pt][$t]=0;rt(ht)}}return vt}}()}(m,typeof commonjsRequire=="function"?requirePako():self.pako)})()})(UTIF);var UTIFExports=UTIF.exports,utif=getDefaultExportFromCjs(UTIFExports),util$1,objectUtil;function getDimensionValue(d){return typeof d=="number"?d:d instanceof Uint8Array?d[0]:typeof d[0]=="string"?parseInt(d[0]):d[0]}function tiff(){return{mime:"image/tiff",encode:d=>{const m=utif.encodeImage(d.data,d.width,d.height);return Buffer$1.from(m)},decode:d=>{const m=utif.decode(d),g=m[0];if(!g)throw new Error("No page found in TIFF");if(!g.t256)throw new Error("No image width found in TIFF");if(!g.t257)throw new Error("No image height found in TIFF");m.forEach(I=>{utif.decodeImage(d,I)});const w=utif.toRGBA8(g);return{data:Buffer$1.from(w),width:getDimensionValue(g.t256),height:getDimensionValue(g.t257)}}}}(function(d){d.assertEqual=m=>m,d.assertIs=function(m){},d.assertNever=function(m){throw new Error},d.arrayToEnum=m=>{const g={};for(const w of m)g[w]=w;return g},d.getValidEnumValues=m=>{const g=d.objectKeys(m).filter(I=>typeof m[m[I]]!="number"),w={};for(const I of g)w[I]=m[I];return d.objectValues(w)},d.objectValues=m=>d.objectKeys(m).map(function(g){return m[g]}),d.objectKeys=typeof Object.keys=="function"?m=>Object.keys(m):m=>{const g=[];for(const w in m)Object.prototype.hasOwnProperty.call(m,w)&&g.push(w);return g},d.find=(m,g)=>{for(const w of m)if(g(w))return w},d.isInteger=typeof Number.isInteger=="function"?m=>Number.isInteger(m):m=>typeof m=="number"&&isFinite(m)&&Math.floor(m)===m,d.joinValues=function(m,g=" | "){return m.map(w=>typeof w=="string"?`'${w}'`:w).join(g)},d.jsonStringifyReplacer=(m,g)=>typeof g=="bigint"?g.toString():g})(util$1||(util$1={})),function(d){d.mergeShapes=(m,g)=>({...m,...g})}(objectUtil||(objectUtil={}));const ZodParsedType=util$1.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=d=>{switch(typeof d){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(d)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(d)?ZodParsedType.array:d===null?ZodParsedType.null:d.then&&typeof d.then=="function"&&d.catch&&typeof d.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&d instanceof Map?ZodParsedType.map:typeof Set<"u"&&d instanceof Set?ZodParsedType.set:typeof Date<"u"&&d instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util$1.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=d=>JSON.stringify(d,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(m){super(),this.issues=[],this.addIssue=w=>{this.issues=[...this.issues,w]},this.addIssues=(w=[])=>{this.issues=[...this.issues,...w]};const g=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,g):this.__proto__=g,this.name="ZodError",this.issues=m}get errors(){return this.issues}format(m){const g=m||function(P){return P.message},w={_errors:[]},I=P=>{for(const $ of P.issues)if($.code==="invalid_union")$.unionErrors.map(I);else if($.code==="invalid_return_type")I($.returnTypeError);else if($.code==="invalid_arguments")I($.argumentsError);else if($.path.length===0)w._errors.push(g($));else{let F=w,D=0;for(;D<$.path.length;){const U=$.path[D];D===$.path.length-1?(F[U]=F[U]||{_errors:[]},F[U]._errors.push(g($))):F[U]=F[U]||{_errors:[]},F=F[U],D++}}};return I(this),w}static assert(m){if(!(m instanceof ZodError))throw new Error(`Not a ZodError: ${m}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util$1.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(m=g=>g.message){const g={},w=[];for(const I of this.issues)I.path.length>0?(g[I.path[0]]=g[I.path[0]]||[],g[I.path[0]].push(m(I))):w.push(m(I));return{formErrors:w,fieldErrors:g}}get formErrors(){return this.flatten()}}ZodError.create=d=>new ZodError(d);const errorMap=(d,m)=>{let g;switch(d.code){case ZodIssueCode.invalid_type:g=d.received===ZodParsedType.undefined?"Required":`Expected ${d.expected}, received ${d.received}`;break;case ZodIssueCode.invalid_literal:g=`Invalid literal value, expected ${JSON.stringify(d.expected,util$1.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:g=`Unrecognized key(s) in object: ${util$1.joinValues(d.keys,", ")}`;break;case ZodIssueCode.invalid_union:g="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:g=`Invalid discriminator value. Expected ${util$1.joinValues(d.options)}`;break;case ZodIssueCode.invalid_enum_value:g=`Invalid enum value. Expected ${util$1.joinValues(d.options)}, received '${d.received}'`;break;case ZodIssueCode.invalid_arguments:g="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:g="Invalid function return type";break;case ZodIssueCode.invalid_date:g="Invalid date";break;case ZodIssueCode.invalid_string:typeof d.validation=="object"?"includes"in d.validation?(g=`Invalid input: must include "${d.validation.includes}"`,typeof d.validation.position=="number"&&(g=`${g} at one or more positions greater than or equal to ${d.validation.position}`)):"startsWith"in d.validation?g=`Invalid input: must start with "${d.validation.startsWith}"`:"endsWith"in d.validation?g=`Invalid input: must end with "${d.validation.endsWith}"`:util$1.assertNever(d.validation):g=d.validation!=="regex"?`Invalid ${d.validation}`:"Invalid";break;case ZodIssueCode.too_small:g=d.type==="array"?`Array must contain ${d.exact?"exactly":d.inclusive?"at least":"more than"} ${d.minimum} element(s)`:d.type==="string"?`String must contain ${d.exact?"exactly":d.inclusive?"at least":"over"} ${d.minimum} character(s)`:d.type==="number"?`Number must be ${d.exact?"exactly equal to ":d.inclusive?"greater than or equal to ":"greater than "}${d.minimum}`:d.type==="date"?`Date must be ${d.exact?"exactly equal to ":d.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(d.minimum))}`:"Invalid input";break;case ZodIssueCode.too_big:g=d.type==="array"?`Array must contain ${d.exact?"exactly":d.inclusive?"at most":"less than"} ${d.maximum} element(s)`:d.type==="string"?`String must contain ${d.exact?"exactly":d.inclusive?"at most":"under"} ${d.maximum} character(s)`:d.type==="number"?`Number must be ${d.exact?"exactly":d.inclusive?"less than or equal to":"less than"} ${d.maximum}`:d.type==="bigint"?`BigInt must be ${d.exact?"exactly":d.inclusive?"less than or equal to":"less than"} ${d.maximum}`:d.type==="date"?`Date must be ${d.exact?"exactly":d.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(d.maximum))}`:"Invalid input";break;case ZodIssueCode.custom:g="Invalid input";break;case ZodIssueCode.invalid_intersection_types:g="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:g=`Number must be a multiple of ${d.multipleOf}`;break;case ZodIssueCode.not_finite:g="Number must be finite";break;default:g=m.defaultError,util$1.assertNever(d)}return{message:g}};let overrideErrorMap=errorMap;function setErrorMap(d){overrideErrorMap=d}function getErrorMap(){return overrideErrorMap}const makeIssue=d=>{const{data:m,path:g,errorMaps:w,issueData:I}=d,P=[...g,...I.path||[]],$={...I,path:P};if(I.message!==void 0)return{...I,path:P,message:I.message};let F="";const D=w.filter(U=>!!U).slice().reverse();for(const U of D)F=U($,{data:m,defaultError:F}).message;return{...I,path:P,message:F}},EMPTY_PATH=[];function addIssueToContext(d,m){const g=getErrorMap(),w=makeIssue({issueData:m,data:d.data,path:d.path,errorMaps:[d.common.contextualErrorMap,d.schemaErrorMap,g,g===errorMap?void 0:errorMap].filter(I=>!!I)});d.common.issues.push(w)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(m,g){const w=[];for(const I of g){if(I.status==="aborted")return INVALID;I.status==="dirty"&&m.dirty(),w.push(I.value)}return{status:m.value,value:w}}static async mergeObjectAsync(m,g){const w=[];for(const I of g){const P=await I.key,$=await I.value;w.push({key:P,value:$})}return ParseStatus.mergeObjectSync(m,w)}static mergeObjectSync(m,g){const w={};for(const I of g){const{key:P,value:$}=I;if(P.status==="aborted"||$.status==="aborted")return INVALID;P.status==="dirty"&&m.dirty(),$.status==="dirty"&&m.dirty(),P.value==="__proto__"||$.value===void 0&&!I.alwaysSet||(w[P.value]=$.value)}return{status:m.value,value:w}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=d=>({status:"dirty",value:d}),OK=d=>({status:"valid",value:d}),isAborted=d=>d.status==="aborted",isDirty=d=>d.status==="dirty",isValid=d=>d.status==="valid",isAsync=d=>typeof Promise<"u"&&d instanceof Promise;function __classPrivateFieldGet(d,m,g,w){if(typeof m=="function"?d!==m||!0:!m.has(d))throw new TypeError("Cannot read private member from an object whose class did not declare it");return m.get(d)}function __classPrivateFieldSet(d,m,g,w,I){if(typeof m=="function"?d!==m||!0:!m.has(d))throw new TypeError("Cannot write private member to an object whose class did not declare it");return m.set(d,g),g}var errorUtil,_ZodEnum_cache,_ZodNativeEnum_cache;typeof SuppressedError=="function"&&SuppressedError,function(d){d.errToObj=m=>typeof m=="string"?{message:m}:m||{},d.toString=m=>typeof m=="string"?m:m==null?void 0:m.message}(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(m,g,w,I){this._cachedPath=[],this.parent=m,this.data=g,this._path=w,this._key=I}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(d,m)=>{if(isValid(m))return{success:!0,data:m.value};if(!d.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const g=new ZodError(d.common.issues);return this._error=g,this._error}}};function processCreateParams(d){if(!d)return{};const{errorMap:m,invalid_type_error:g,required_error:w,description:I}=d;if(m&&(g||w))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return m?{errorMap:m,description:I}:{errorMap:(P,$)=>{var F,D;const{message:U}=d;return P.code==="invalid_enum_value"?{message:U??$.defaultError}:$.data===void 0?{message:(F=U??w)!==null&&F!==void 0?F:$.defaultError}:P.code!=="invalid_type"?{message:$.defaultError}:{message:(D=U??g)!==null&&D!==void 0?D:$.defaultError}},description:I}}class ZodType{constructor(m){this.spa=this.safeParseAsync,this._def=m,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(m){return getParsedType(m.data)}_getOrReturnCtx(m,g){return g||{common:m.parent.common,data:m.data,parsedType:getParsedType(m.data),schemaErrorMap:this._def.errorMap,path:m.path,parent:m.parent}}_processInputParams(m){return{status:new ParseStatus,ctx:{common:m.parent.common,data:m.data,parsedType:getParsedType(m.data),schemaErrorMap:this._def.errorMap,path:m.path,parent:m.parent}}}_parseSync(m){const g=this._parse(m);if(isAsync(g))throw new Error("Synchronous parse encountered promise.");return g}_parseAsync(m){const g=this._parse(m);return Promise.resolve(g)}parse(m,g){const w=this.safeParse(m,g);if(w.success)return w.data;throw w.error}safeParse(m,g){var w;const I={common:{issues:[],async:(w=g==null?void 0:g.async)!==null&&w!==void 0&&w,contextualErrorMap:g==null?void 0:g.errorMap},path:(g==null?void 0:g.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:m,parsedType:getParsedType(m)},P=this._parseSync({data:m,path:I.path,parent:I});return handleResult(I,P)}async parseAsync(m,g){const w=await this.safeParseAsync(m,g);if(w.success)return w.data;throw w.error}async safeParseAsync(m,g){const w={common:{issues:[],contextualErrorMap:g==null?void 0:g.errorMap,async:!0},path:(g==null?void 0:g.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:m,parsedType:getParsedType(m)},I=this._parse({data:m,path:w.path,parent:w}),P=await(isAsync(I)?I:Promise.resolve(I));return handleResult(w,P)}refine(m,g){const w=I=>typeof g=="string"||g===void 0?{message:g}:typeof g=="function"?g(I):g;return this._refinement((I,P)=>{const $=m(I),F=()=>P.addIssue({code:ZodIssueCode.custom,...w(I)});return typeof Promise<"u"&&$ instanceof Promise?$.then(D=>!!D||(F(),!1)):!!$||(F(),!1)})}refinement(m,g){return this._refinement((w,I)=>!!m(w)||(I.addIssue(typeof g=="function"?g(w,I):g),!1))}_refinement(m){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:m}})}superRefine(m){return this._refinement(m)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(m){return ZodUnion.create([this,m],this._def)}and(m){return ZodIntersection.create(this,m,this._def)}transform(m){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:m}})}default(m){const g=typeof m=="function"?m:()=>m;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:g,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(m){const g=typeof m=="function"?m:()=>m;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:g,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(m){return new this.constructor({...this._def,description:m})}pipe(m){return ZodPipeline.create(this,m)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(d){let m="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return d.precision?m=`${m}\\.\\d{${d.precision}}`:d.precision==null&&(m=`${m}(\\.\\d+)?`),m}function timeRegex(d){return new RegExp(`^${timeRegexSource(d)}$`)}function datetimeRegex(d){let m=`${dateRegexSource}T${timeRegexSource(d)}`;const g=[];return g.push(d.local?"Z?":"Z"),d.offset&&g.push("([+-]\\d{2}:?\\d{2})"),m=`${m}(${g.join("|")})`,new RegExp(`^${m}$`)}function isValidIP(d,m){return!(m!=="v4"&&m||!ipv4Regex.test(d))||!(m!=="v6"&&m||!ipv6Regex.test(d))}class ZodString extends ZodType{_parse(m){if(this._def.coerce&&(m.data=String(m.data)),this._getType(m)!==ZodParsedType.string){const I=this._getOrReturnCtx(m);return addIssueToContext(I,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:I.parsedType}),INVALID}const g=new ParseStatus;let w;for(const I of this._def.checks)if(I.kind==="min")m.data.length<I.value&&(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.too_small,minimum:I.value,type:"string",inclusive:!0,exact:!1,message:I.message}),g.dirty());else if(I.kind==="max")m.data.length>I.value&&(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.too_big,maximum:I.value,type:"string",inclusive:!0,exact:!1,message:I.message}),g.dirty());else if(I.kind==="length"){const P=m.data.length>I.value,$=m.data.length<I.value;(P||$)&&(w=this._getOrReturnCtx(m,w),P?addIssueToContext(w,{code:ZodIssueCode.too_big,maximum:I.value,type:"string",inclusive:!0,exact:!0,message:I.message}):$&&addIssueToContext(w,{code:ZodIssueCode.too_small,minimum:I.value,type:"string",inclusive:!0,exact:!0,message:I.message}),g.dirty())}else if(I.kind==="email")emailRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"email",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"emoji",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="uuid")uuidRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"uuid",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="nanoid")nanoidRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="cuid")cuidRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"cuid",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="cuid2")cuid2Regex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="ulid")ulidRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"ulid",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty());else if(I.kind==="url")try{new URL(m.data)}catch{w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"url",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty()}else I.kind==="regex"?(I.regex.lastIndex=0,I.regex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"regex",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty())):I.kind==="trim"?m.data=m.data.trim():I.kind==="includes"?m.data.includes(I.value,I.position)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.invalid_string,validation:{includes:I.value,position:I.position},message:I.message}),g.dirty()):I.kind==="toLowerCase"?m.data=m.data.toLowerCase():I.kind==="toUpperCase"?m.data=m.data.toUpperCase():I.kind==="startsWith"?m.data.startsWith(I.value)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.invalid_string,validation:{startsWith:I.value},message:I.message}),g.dirty()):I.kind==="endsWith"?m.data.endsWith(I.value)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.invalid_string,validation:{endsWith:I.value},message:I.message}),g.dirty()):I.kind==="datetime"?datetimeRegex(I).test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.invalid_string,validation:"datetime",message:I.message}),g.dirty()):I.kind==="date"?dateRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.invalid_string,validation:"date",message:I.message}),g.dirty()):I.kind==="time"?timeRegex(I).test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.invalid_string,validation:"time",message:I.message}),g.dirty()):I.kind==="duration"?durationRegex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"duration",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty()):I.kind==="ip"?isValidIP(m.data,I.version)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"ip",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty()):I.kind==="base64"?base64Regex.test(m.data)||(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{validation:"base64",code:ZodIssueCode.invalid_string,message:I.message}),g.dirty()):util$1.assertNever(I);return{status:g.value,value:m.data}}_regex(m,g,w){return this.refinement(I=>m.test(I),{validation:g,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(w)})}_addCheck(m){return new ZodString({...this._def,checks:[...this._def.checks,m]})}email(m){return this._addCheck({kind:"email",...errorUtil.errToObj(m)})}url(m){return this._addCheck({kind:"url",...errorUtil.errToObj(m)})}emoji(m){return this._addCheck({kind:"emoji",...errorUtil.errToObj(m)})}uuid(m){return this._addCheck({kind:"uuid",...errorUtil.errToObj(m)})}nanoid(m){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(m)})}cuid(m){return this._addCheck({kind:"cuid",...errorUtil.errToObj(m)})}cuid2(m){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(m)})}ulid(m){return this._addCheck({kind:"ulid",...errorUtil.errToObj(m)})}base64(m){return this._addCheck({kind:"base64",...errorUtil.errToObj(m)})}ip(m){return this._addCheck({kind:"ip",...errorUtil.errToObj(m)})}datetime(m){var g,w;return typeof m=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:m}):this._addCheck({kind:"datetime",precision:(m==null?void 0:m.precision)===void 0?null:m==null?void 0:m.precision,offset:(g=m==null?void 0:m.offset)!==null&&g!==void 0&&g,local:(w=m==null?void 0:m.local)!==null&&w!==void 0&&w,...errorUtil.errToObj(m==null?void 0:m.message)})}date(m){return this._addCheck({kind:"date",message:m})}time(m){return typeof m=="string"?this._addCheck({kind:"time",precision:null,message:m}):this._addCheck({kind:"time",precision:(m==null?void 0:m.precision)===void 0?null:m==null?void 0:m.precision,...errorUtil.errToObj(m==null?void 0:m.message)})}duration(m){return this._addCheck({kind:"duration",...errorUtil.errToObj(m)})}regex(m,g){return this._addCheck({kind:"regex",regex:m,...errorUtil.errToObj(g)})}includes(m,g){return this._addCheck({kind:"includes",value:m,position:g==null?void 0:g.position,...errorUtil.errToObj(g==null?void 0:g.message)})}startsWith(m,g){return this._addCheck({kind:"startsWith",value:m,...errorUtil.errToObj(g)})}endsWith(m,g){return this._addCheck({kind:"endsWith",value:m,...errorUtil.errToObj(g)})}min(m,g){return this._addCheck({kind:"min",value:m,...errorUtil.errToObj(g)})}max(m,g){return this._addCheck({kind:"max",value:m,...errorUtil.errToObj(g)})}length(m,g){return this._addCheck({kind:"length",value:m,...errorUtil.errToObj(g)})}nonempty(m){return this.min(1,errorUtil.errToObj(m))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(m=>m.kind==="datetime")}get isDate(){return!!this._def.checks.find(m=>m.kind==="date")}get isTime(){return!!this._def.checks.find(m=>m.kind==="time")}get isDuration(){return!!this._def.checks.find(m=>m.kind==="duration")}get isEmail(){return!!this._def.checks.find(m=>m.kind==="email")}get isURL(){return!!this._def.checks.find(m=>m.kind==="url")}get isEmoji(){return!!this._def.checks.find(m=>m.kind==="emoji")}get isUUID(){return!!this._def.checks.find(m=>m.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(m=>m.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(m=>m.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(m=>m.kind==="cuid2")}get isULID(){return!!this._def.checks.find(m=>m.kind==="ulid")}get isIP(){return!!this._def.checks.find(m=>m.kind==="ip")}get isBase64(){return!!this._def.checks.find(m=>m.kind==="base64")}get minLength(){let m=null;for(const g of this._def.checks)g.kind==="min"&&(m===null||g.value>m)&&(m=g.value);return m}get maxLength(){let m=null;for(const g of this._def.checks)g.kind==="max"&&(m===null||g.value<m)&&(m=g.value);return m}}function floatSafeRemainder(d,m){const g=(d.toString().split(".")[1]||"").length,w=(m.toString().split(".")[1]||"").length,I=g>w?g:w;return parseInt(d.toFixed(I).replace(".",""))%parseInt(m.toFixed(I).replace(".",""))/Math.pow(10,I)}ZodString.create=d=>{var m;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(m=d==null?void 0:d.coerce)!==null&&m!==void 0&&m,...processCreateParams(d)})};class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(m){if(this._def.coerce&&(m.data=Number(m.data)),this._getType(m)!==ZodParsedType.number){const I=this._getOrReturnCtx(m);return addIssueToContext(I,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:I.parsedType}),INVALID}let g;const w=new ParseStatus;for(const I of this._def.checks)I.kind==="int"?util$1.isInteger(m.data)||(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:I.message}),w.dirty()):I.kind==="min"?(I.inclusive?m.data<I.value:m.data<=I.value)&&(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.too_small,minimum:I.value,type:"number",inclusive:I.inclusive,exact:!1,message:I.message}),w.dirty()):I.kind==="max"?(I.inclusive?m.data>I.value:m.data>=I.value)&&(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.too_big,maximum:I.value,type:"number",inclusive:I.inclusive,exact:!1,message:I.message}),w.dirty()):I.kind==="multipleOf"?floatSafeRemainder(m.data,I.value)!==0&&(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.not_multiple_of,multipleOf:I.value,message:I.message}),w.dirty()):I.kind==="finite"?Number.isFinite(m.data)||(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.not_finite,message:I.message}),w.dirty()):util$1.assertNever(I);return{status:w.value,value:m.data}}gte(m,g){return this.setLimit("min",m,!0,errorUtil.toString(g))}gt(m,g){return this.setLimit("min",m,!1,errorUtil.toString(g))}lte(m,g){return this.setLimit("max",m,!0,errorUtil.toString(g))}lt(m,g){return this.setLimit("max",m,!1,errorUtil.toString(g))}setLimit(m,g,w,I){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:m,value:g,inclusive:w,message:errorUtil.toString(I)}]})}_addCheck(m){return new ZodNumber({...this._def,checks:[...this._def.checks,m]})}int(m){return this._addCheck({kind:"int",message:errorUtil.toString(m)})}positive(m){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(m)})}negative(m){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(m)})}nonpositive(m){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(m)})}nonnegative(m){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(m)})}multipleOf(m,g){return this._addCheck({kind:"multipleOf",value:m,message:errorUtil.toString(g)})}finite(m){return this._addCheck({kind:"finite",message:errorUtil.toString(m)})}safe(m){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(m)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(m)})}get minValue(){let m=null;for(const g of this._def.checks)g.kind==="min"&&(m===null||g.value>m)&&(m=g.value);return m}get maxValue(){let m=null;for(const g of this._def.checks)g.kind==="max"&&(m===null||g.value<m)&&(m=g.value);return m}get isInt(){return!!this._def.checks.find(m=>m.kind==="int"||m.kind==="multipleOf"&&util$1.isInteger(m.value))}get isFinite(){let m=null,g=null;for(const w of this._def.checks){if(w.kind==="finite"||w.kind==="int"||w.kind==="multipleOf")return!0;w.kind==="min"?(g===null||w.value>g)&&(g=w.value):w.kind==="max"&&(m===null||w.value<m)&&(m=w.value)}return Number.isFinite(g)&&Number.isFinite(m)}}ZodNumber.create=d=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(d==null?void 0:d.coerce)||!1,...processCreateParams(d)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(m){if(this._def.coerce&&(m.data=BigInt(m.data)),this._getType(m)!==ZodParsedType.bigint){const I=this._getOrReturnCtx(m);return addIssueToContext(I,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:I.parsedType}),INVALID}let g;const w=new ParseStatus;for(const I of this._def.checks)I.kind==="min"?(I.inclusive?m.data<I.value:m.data<=I.value)&&(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.too_small,type:"bigint",minimum:I.value,inclusive:I.inclusive,message:I.message}),w.dirty()):I.kind==="max"?(I.inclusive?m.data>I.value:m.data>=I.value)&&(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.too_big,type:"bigint",maximum:I.value,inclusive:I.inclusive,message:I.message}),w.dirty()):I.kind==="multipleOf"?m.data%I.value!==BigInt(0)&&(g=this._getOrReturnCtx(m,g),addIssueToContext(g,{code:ZodIssueCode.not_multiple_of,multipleOf:I.value,message:I.message}),w.dirty()):util$1.assertNever(I);return{status:w.value,value:m.data}}gte(m,g){return this.setLimit("min",m,!0,errorUtil.toString(g))}gt(m,g){return this.setLimit("min",m,!1,errorUtil.toString(g))}lte(m,g){return this.setLimit("max",m,!0,errorUtil.toString(g))}lt(m,g){return this.setLimit("max",m,!1,errorUtil.toString(g))}setLimit(m,g,w,I){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:m,value:g,inclusive:w,message:errorUtil.toString(I)}]})}_addCheck(m){return new ZodBigInt({...this._def,checks:[...this._def.checks,m]})}positive(m){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(m)})}negative(m){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(m)})}nonpositive(m){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(m)})}nonnegative(m){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(m)})}multipleOf(m,g){return this._addCheck({kind:"multipleOf",value:m,message:errorUtil.toString(g)})}get minValue(){let m=null;for(const g of this._def.checks)g.kind==="min"&&(m===null||g.value>m)&&(m=g.value);return m}get maxValue(){let m=null;for(const g of this._def.checks)g.kind==="max"&&(m===null||g.value<m)&&(m=g.value);return m}}ZodBigInt.create=d=>{var m;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(m=d==null?void 0:d.coerce)!==null&&m!==void 0&&m,...processCreateParams(d)})};class ZodBoolean extends ZodType{_parse(m){if(this._def.coerce&&(m.data=!!m.data),this._getType(m)!==ZodParsedType.boolean){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:g.parsedType}),INVALID}return OK(m.data)}}ZodBoolean.create=d=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(d==null?void 0:d.coerce)||!1,...processCreateParams(d)});class ZodDate extends ZodType{_parse(m){if(this._def.coerce&&(m.data=new Date(m.data)),this._getType(m)!==ZodParsedType.date){const I=this._getOrReturnCtx(m);return addIssueToContext(I,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:I.parsedType}),INVALID}if(isNaN(m.data.getTime()))return addIssueToContext(this._getOrReturnCtx(m),{code:ZodIssueCode.invalid_date}),INVALID;const g=new ParseStatus;let w;for(const I of this._def.checks)I.kind==="min"?m.data.getTime()<I.value&&(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.too_small,message:I.message,inclusive:!0,exact:!1,minimum:I.value,type:"date"}),g.dirty()):I.kind==="max"?m.data.getTime()>I.value&&(w=this._getOrReturnCtx(m,w),addIssueToContext(w,{code:ZodIssueCode.too_big,message:I.message,inclusive:!0,exact:!1,maximum:I.value,type:"date"}),g.dirty()):util$1.assertNever(I);return{status:g.value,value:new Date(m.data.getTime())}}_addCheck(m){return new ZodDate({...this._def,checks:[...this._def.checks,m]})}min(m,g){return this._addCheck({kind:"min",value:m.getTime(),message:errorUtil.toString(g)})}max(m,g){return this._addCheck({kind:"max",value:m.getTime(),message:errorUtil.toString(g)})}get minDate(){let m=null;for(const g of this._def.checks)g.kind==="min"&&(m===null||g.value>m)&&(m=g.value);return m!=null?new Date(m):null}get maxDate(){let m=null;for(const g of this._def.checks)g.kind==="max"&&(m===null||g.value<m)&&(m=g.value);return m!=null?new Date(m):null}}ZodDate.create=d=>new ZodDate({checks:[],coerce:(d==null?void 0:d.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(d)});class ZodSymbol extends ZodType{_parse(m){if(this._getType(m)!==ZodParsedType.symbol){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:g.parsedType}),INVALID}return OK(m.data)}}ZodSymbol.create=d=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(d)});class ZodUndefined extends ZodType{_parse(m){if(this._getType(m)!==ZodParsedType.undefined){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:g.parsedType}),INVALID}return OK(m.data)}}ZodUndefined.create=d=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(d)});class ZodNull extends ZodType{_parse(m){if(this._getType(m)!==ZodParsedType.null){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:g.parsedType}),INVALID}return OK(m.data)}}ZodNull.create=d=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(d)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(m){return OK(m.data)}}ZodAny.create=d=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(d)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(m){return OK(m.data)}}ZodUnknown.create=d=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(d)});class ZodNever extends ZodType{_parse(m){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:g.parsedType}),INVALID}}ZodNever.create=d=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(d)});class ZodVoid extends ZodType{_parse(m){if(this._getType(m)!==ZodParsedType.undefined){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:g.parsedType}),INVALID}return OK(m.data)}}ZodVoid.create=d=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(d)});class ZodArray extends ZodType{_parse(m){const{ctx:g,status:w}=this._processInputParams(m),I=this._def;if(g.parsedType!==ZodParsedType.array)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:g.parsedType}),INVALID;if(I.exactLength!==null){const $=g.data.length>I.exactLength.value,F=g.data.length<I.exactLength.value;($||F)&&(addIssueToContext(g,{code:$?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:F?I.exactLength.value:void 0,maximum:$?I.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:I.exactLength.message}),w.dirty())}if(I.minLength!==null&&g.data.length<I.minLength.value&&(addIssueToContext(g,{code:ZodIssueCode.too_small,minimum:I.minLength.value,type:"array",inclusive:!0,exact:!1,message:I.minLength.message}),w.dirty()),I.maxLength!==null&&g.data.length>I.maxLength.value&&(addIssueToContext(g,{code:ZodIssueCode.too_big,maximum:I.maxLength.value,type:"array",inclusive:!0,exact:!1,message:I.maxLength.message}),w.dirty()),g.common.async)return Promise.all([...g.data].map(($,F)=>I.type._parseAsync(new ParseInputLazyPath(g,$,g.path,F)))).then($=>ParseStatus.mergeArray(w,$));const P=[...g.data].map(($,F)=>I.type._parseSync(new ParseInputLazyPath(g,$,g.path,F)));return ParseStatus.mergeArray(w,P)}get element(){return this._def.type}min(m,g){return new ZodArray({...this._def,minLength:{value:m,message:errorUtil.toString(g)}})}max(m,g){return new ZodArray({...this._def,maxLength:{value:m,message:errorUtil.toString(g)}})}length(m,g){return new ZodArray({...this._def,exactLength:{value:m,message:errorUtil.toString(g)}})}nonempty(m){return this.min(1,m)}}function deepPartialify(d){if(d instanceof ZodObject){const m={};for(const g in d.shape){const w=d.shape[g];m[g]=ZodOptional.create(deepPartialify(w))}return new ZodObject({...d._def,shape:()=>m})}return d instanceof ZodArray?new ZodArray({...d._def,type:deepPartialify(d.element)}):d instanceof ZodOptional?ZodOptional.create(deepPartialify(d.unwrap())):d instanceof ZodNullable?ZodNullable.create(deepPartialify(d.unwrap())):d instanceof ZodTuple?ZodTuple.create(d.items.map(m=>deepPartialify(m))):d}ZodArray.create=(d,m)=>new ZodArray({type:d,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(m)});class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const m=this._def.shape(),g=util$1.objectKeys(m);return this._cached={shape:m,keys:g}}_parse(m){if(this._getType(m)!==ZodParsedType.object){const D=this._getOrReturnCtx(m);return addIssueToContext(D,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:D.parsedType}),INVALID}const{status:g,ctx:w}=this._processInputParams(m),{shape:I,keys:P}=this._getCached(),$=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const D in w.data)P.includes(D)||$.push(D);const F=[];for(const D of P){const U=I[D],j=w.data[D];F.push({key:{status:"valid",value:D},value:U._parse(new ParseInputLazyPath(w,j,w.path,D)),alwaysSet:D in w.data})}if(this._def.catchall instanceof ZodNever){const D=this._def.unknownKeys;if(D==="passthrough")for(const U of $)F.push({key:{status:"valid",value:U},value:{status:"valid",value:w.data[U]}});else if(D==="strict")$.length>0&&(addIssueToContext(w,{code:ZodIssueCode.unrecognized_keys,keys:$}),g.dirty());else if(D!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const D=this._def.catchall;for(const U of $){const j=w.data[U];F.push({key:{status:"valid",value:U},value:D._parse(new ParseInputLazyPath(w,j,w.path,U)),alwaysSet:U in w.data})}}return w.common.async?Promise.resolve().then(async()=>{const D=[];for(const U of F){const j=await U.key,Z=await U.value;D.push({key:j,value:Z,alwaysSet:U.alwaysSet})}return D}).then(D=>ParseStatus.mergeObjectSync(g,D)):ParseStatus.mergeObjectSync(g,F)}get shape(){return this._def.shape()}strict(m){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...m!==void 0?{errorMap:(g,w)=>{var I,P,$,F;const D=($=(P=(I=this._def).errorMap)===null||P===void 0?void 0:P.call(I,g,w).message)!==null&&$!==void 0?$:w.defaultError;return g.code==="unrecognized_keys"?{message:(F=errorUtil.errToObj(m).message)!==null&&F!==void 0?F:D}:{message:D}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(m){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...m})})}merge(m){return new ZodObject({unknownKeys:m._def.unknownKeys,catchall:m._def.catchall,shape:()=>({...this._def.shape(),...m._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(m,g){return this.augment({[m]:g})}catchall(m){return new ZodObject({...this._def,catchall:m})}pick(m){const g={};return util$1.objectKeys(m).forEach(w=>{m[w]&&this.shape[w]&&(g[w]=this.shape[w])}),new ZodObject({...this._def,shape:()=>g})}omit(m){const g={};return util$1.objectKeys(this.shape).forEach(w=>{m[w]||(g[w]=this.shape[w])}),new ZodObject({...this._def,shape:()=>g})}deepPartial(){return deepPartialify(this)}partial(m){const g={};return util$1.objectKeys(this.shape).forEach(w=>{const I=this.shape[w];m&&!m[w]?g[w]=I:g[w]=I.optional()}),new ZodObject({...this._def,shape:()=>g})}required(m){const g={};return util$1.objectKeys(this.shape).forEach(w=>{if(m&&!m[w])g[w]=this.shape[w];else{let I=this.shape[w];for(;I instanceof ZodOptional;)I=I._def.innerType;g[w]=I}}),new ZodObject({...this._def,shape:()=>g})}keyof(){return createZodEnum(util$1.objectKeys(this.shape))}}ZodObject.create=(d,m)=>new ZodObject({shape:()=>d,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(m)}),ZodObject.strictCreate=(d,m)=>new ZodObject({shape:()=>d,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(m)}),ZodObject.lazycreate=(d,m)=>new ZodObject({shape:d,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(m)});class ZodUnion extends ZodType{_parse(m){const{ctx:g}=this._processInputParams(m),w=this._def.options;if(g.common.async)return Promise.all(w.map(async I=>{const P={...g,common:{...g.common,issues:[]},parent:null};return{result:await I._parseAsync({data:g.data,path:g.path,parent:P}),ctx:P}})).then(function(I){for(const $ of I)if($.result.status==="valid")return $.result;for(const $ of I)if($.result.status==="dirty")return g.common.issues.push(...$.ctx.common.issues),$.result;const P=I.map($=>new ZodError($.ctx.common.issues));return addIssueToContext(g,{code:ZodIssueCode.invalid_union,unionErrors:P}),INVALID});{let I;const P=[];for(const F of w){const D={...g,common:{...g.common,issues:[]},parent:null},U=F._parseSync({data:g.data,path:g.path,parent:D});if(U.status==="valid")return U;U.status!=="dirty"||I||(I={result:U,ctx:D}),D.common.issues.length&&P.push(D.common.issues)}if(I)return g.common.issues.push(...I.ctx.common.issues),I.result;const $=P.map(F=>new ZodError(F));return addIssueToContext(g,{code:ZodIssueCode.invalid_union,unionErrors:$}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(d,m)=>new ZodUnion({options:d,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(m)});const getDiscriminator=d=>d instanceof ZodLazy?getDiscriminator(d.schema):d instanceof ZodEffects?getDiscriminator(d.innerType()):d instanceof ZodLiteral?[d.value]:d instanceof ZodEnum?d.options:d instanceof ZodNativeEnum?util$1.objectValues(d.enum):d instanceof ZodDefault?getDiscriminator(d._def.innerType):d instanceof ZodUndefined?[void 0]:d instanceof ZodNull?[null]:d instanceof ZodOptional?[void 0,...getDiscriminator(d.unwrap())]:d instanceof ZodNullable?[null,...getDiscriminator(d.unwrap())]:d instanceof ZodBranded||d instanceof ZodReadonly?getDiscriminator(d.unwrap()):d instanceof ZodCatch?getDiscriminator(d._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(m){const{ctx:g}=this._processInputParams(m);if(g.parsedType!==ZodParsedType.object)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:g.parsedType}),INVALID;const w=this.discriminator,I=g.data[w],P=this.optionsMap.get(I);return P?g.common.async?P._parseAsync({data:g.data,path:g.path,parent:g}):P._parseSync({data:g.data,path:g.path,parent:g}):(addIssueToContext(g,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[w]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(m,g,w){const I=new Map;for(const P of g){const $=getDiscriminator(P.shape[m]);if(!$.length)throw new Error(`A discriminator value for key \`${m}\` could not be extracted from all schema options`);for(const F of $){if(I.has(F))throw new Error(`Discriminator property ${String(m)} has duplicate value ${String(F)}`);I.set(F,P)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:m,options:g,optionsMap:I,...processCreateParams(w)})}}function mergeValues(d,m){const g=getParsedType(d),w=getParsedType(m);if(d===m)return{valid:!0,data:d};if(g===ZodParsedType.object&&w===ZodParsedType.object){const I=util$1.objectKeys(m),P=util$1.objectKeys(d).filter(F=>I.indexOf(F)!==-1),$={...d,...m};for(const F of P){const D=mergeValues(d[F],m[F]);if(!D.valid)return{valid:!1};$[F]=D.data}return{valid:!0,data:$}}if(g===ZodParsedType.array&&w===ZodParsedType.array){if(d.length!==m.length)return{valid:!1};const I=[];for(let P=0;P<d.length;P++){const $=mergeValues(d[P],m[P]);if(!$.valid)return{valid:!1};I.push($.data)}return{valid:!0,data:I}}return g===ZodParsedType.date&&w===ZodParsedType.date&&+d==+m?{valid:!0,data:d}:{valid:!1}}class ZodIntersection extends ZodType{_parse(m){const{status:g,ctx:w}=this._processInputParams(m),I=(P,$)=>{if(isAborted(P)||isAborted($))return INVALID;const F=mergeValues(P.value,$.value);return F.valid?((isDirty(P)||isDirty($))&&g.dirty(),{status:g.value,value:F.data}):(addIssueToContext(w,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return w.common.async?Promise.all([this._def.left._parseAsync({data:w.data,path:w.path,parent:w}),this._def.right._parseAsync({data:w.data,path:w.path,parent:w})]).then(([P,$])=>I(P,$)):I(this._def.left._parseSync({data:w.data,path:w.path,parent:w}),this._def.right._parseSync({data:w.data,path:w.path,parent:w}))}}ZodIntersection.create=(d,m,g)=>new ZodIntersection({left:d,right:m,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(g)});class ZodTuple extends ZodType{_parse(m){const{status:g,ctx:w}=this._processInputParams(m);if(w.parsedType!==ZodParsedType.array)return addIssueToContext(w,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:w.parsedType}),INVALID;if(w.data.length<this._def.items.length)return addIssueToContext(w,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&w.data.length>this._def.items.length&&(addIssueToContext(w,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),g.dirty());const I=[...w.data].map((P,$)=>{const F=this._def.items[$]||this._def.rest;return F?F._parse(new ParseInputLazyPath(w,P,w.path,$)):null}).filter(P=>!!P);return w.common.async?Promise.all(I).then(P=>ParseStatus.mergeArray(g,P)):ParseStatus.mergeArray(g,I)}get items(){return this._def.items}rest(m){return new ZodTuple({...this._def,rest:m})}}ZodTuple.create=(d,m)=>{if(!Array.isArray(d))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:d,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(m)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(m){const{status:g,ctx:w}=this._processInputParams(m);if(w.parsedType!==ZodParsedType.object)return addIssueToContext(w,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:w.parsedType}),INVALID;const I=[],P=this._def.keyType,$=this._def.valueType;for(const F in w.data)I.push({key:P._parse(new ParseInputLazyPath(w,F,w.path,F)),value:$._parse(new ParseInputLazyPath(w,w.data[F],w.path,F)),alwaysSet:F in w.data});return w.common.async?ParseStatus.mergeObjectAsync(g,I):ParseStatus.mergeObjectSync(g,I)}get element(){return this._def.valueType}static create(m,g,w){return new ZodRecord(g instanceof ZodType?{keyType:m,valueType:g,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(w)}:{keyType:ZodString.create(),valueType:m,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(g)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(m){const{status:g,ctx:w}=this._processInputParams(m);if(w.parsedType!==ZodParsedType.map)return addIssueToContext(w,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:w.parsedType}),INVALID;const I=this._def.keyType,P=this._def.valueType,$=[...w.data.entries()].map(([F,D],U)=>({key:I._parse(new ParseInputLazyPath(w,F,w.path,[U,"key"])),value:P._parse(new ParseInputLazyPath(w,D,w.path,[U,"value"]))}));if(w.common.async){const F=new Map;return Promise.resolve().then(async()=>{for(const D of $){const U=await D.key,j=await D.value;if(U.status==="aborted"||j.status==="aborted")return INVALID;U.status!=="dirty"&&j.status!=="dirty"||g.dirty(),F.set(U.value,j.value)}return{status:g.value,value:F}})}{const F=new Map;for(const D of $){const U=D.key,j=D.value;if(U.status==="aborted"||j.status==="aborted")return INVALID;U.status!=="dirty"&&j.status!=="dirty"||g.dirty(),F.set(U.value,j.value)}return{status:g.value,value:F}}}}ZodMap.create=(d,m,g)=>new ZodMap({valueType:m,keyType:d,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(g)});class ZodSet extends ZodType{_parse(m){const{status:g,ctx:w}=this._processInputParams(m);if(w.parsedType!==ZodParsedType.set)return addIssueToContext(w,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:w.parsedType}),INVALID;const I=this._def;I.minSize!==null&&w.data.size<I.minSize.value&&(addIssueToContext(w,{code:ZodIssueCode.too_small,minimum:I.minSize.value,type:"set",inclusive:!0,exact:!1,message:I.minSize.message}),g.dirty()),I.maxSize!==null&&w.data.size>I.maxSize.value&&(addIssueToContext(w,{code:ZodIssueCode.too_big,maximum:I.maxSize.value,type:"set",inclusive:!0,exact:!1,message:I.maxSize.message}),g.dirty());const P=this._def.valueType;function $(D){const U=new Set;for(const j of D){if(j.status==="aborted")return INVALID;j.status==="dirty"&&g.dirty(),U.add(j.value)}return{status:g.value,value:U}}const F=[...w.data.values()].map((D,U)=>P._parse(new ParseInputLazyPath(w,D,w.path,U)));return w.common.async?Promise.all(F).then(D=>$(D)):$(F)}min(m,g){return new ZodSet({...this._def,minSize:{value:m,message:errorUtil.toString(g)}})}max(m,g){return new ZodSet({...this._def,maxSize:{value:m,message:errorUtil.toString(g)}})}size(m,g){return this.min(m,g).max(m,g)}nonempty(m){return this.min(1,m)}}ZodSet.create=(d,m)=>new ZodSet({valueType:d,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(m)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(m){const{ctx:g}=this._processInputParams(m);if(g.parsedType!==ZodParsedType.function)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:g.parsedType}),INVALID;function w(F,D){return makeIssue({data:F,path:g.path,errorMaps:[g.common.contextualErrorMap,g.schemaErrorMap,getErrorMap(),errorMap].filter(U=>!!U),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:D}})}function I(F,D){return makeIssue({data:F,path:g.path,errorMaps:[g.common.contextualErrorMap,g.schemaErrorMap,getErrorMap(),errorMap].filter(U=>!!U),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:D}})}const P={errorMap:g.common.contextualErrorMap},$=g.data;if(this._def.returns instanceof ZodPromise){const F=this;return OK(async function(...D){const U=new ZodError([]),j=await F._def.args.parseAsync(D,P).catch(H=>{throw U.addIssue(w(D,H)),U}),Z=await Reflect.apply($,this,j);return await F._def.returns._def.type.parseAsync(Z,P).catch(H=>{throw U.addIssue(I(Z,H)),U})})}{const F=this;return OK(function(...D){const U=F._def.args.safeParse(D,P);if(!U.success)throw new ZodError([w(D,U.error)]);const j=Reflect.apply($,this,U.data),Z=F._def.returns.safeParse(j,P);if(!Z.success)throw new ZodError([I(j,Z.error)]);return Z.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...m){return new ZodFunction({...this._def,args:ZodTuple.create(m).rest(ZodUnknown.create())})}returns(m){return new ZodFunction({...this._def,returns:m})}implement(m){return this.parse(m)}strictImplement(m){return this.parse(m)}static create(m,g,w){return new ZodFunction({args:m||ZodTuple.create([]).rest(ZodUnknown.create()),returns:g||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(w)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(m){const{ctx:g}=this._processInputParams(m);return this._def.getter()._parse({data:g.data,path:g.path,parent:g})}}ZodLazy.create=(d,m)=>new ZodLazy({getter:d,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(m)});class ZodLiteral extends ZodType{_parse(m){if(m.data!==this._def.value){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{received:g.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:m.data}}get value(){return this._def.value}}function createZodEnum(d,m){return new ZodEnum({values:d,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(m)})}ZodLiteral.create=(d,m)=>new ZodLiteral({value:d,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(m)});class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(m){if(typeof m.data!="string"){const g=this._getOrReturnCtx(m),w=this._def.values;return addIssueToContext(g,{expected:util$1.joinValues(w),received:g.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(m.data)){const g=this._getOrReturnCtx(m),w=this._def.values;return addIssueToContext(g,{received:g.data,code:ZodIssueCode.invalid_enum_value,options:w}),INVALID}return OK(m.data)}get options(){return this._def.values}get enum(){const m={};for(const g of this._def.values)m[g]=g;return m}get Values(){const m={};for(const g of this._def.values)m[g]=g;return m}get Enum(){const m={};for(const g of this._def.values)m[g]=g;return m}extract(m,g=this._def){return ZodEnum.create(m,{...this._def,...g})}exclude(m,g=this._def){return ZodEnum.create(this.options.filter(w=>!m.includes(w)),{...this._def,...g})}}_ZodEnum_cache=new WeakMap,ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(m){const g=util$1.getValidEnumValues(this._def.values),w=this._getOrReturnCtx(m);if(w.parsedType!==ZodParsedType.string&&w.parsedType!==ZodParsedType.number){const I=util$1.objectValues(g);return addIssueToContext(w,{expected:util$1.joinValues(I),received:w.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util$1.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(m.data)){const I=util$1.objectValues(g);return addIssueToContext(w,{received:w.data,code:ZodIssueCode.invalid_enum_value,options:I}),INVALID}return OK(m.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap,ZodNativeEnum.create=(d,m)=>new ZodNativeEnum({values:d,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(m)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(m){const{ctx:g}=this._processInputParams(m);if(g.parsedType!==ZodParsedType.promise&&g.common.async===!1)return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:g.parsedType}),INVALID;const w=g.parsedType===ZodParsedType.promise?g.data:Promise.resolve(g.data);return OK(w.then(I=>this._def.type.parseAsync(I,{path:g.path,errorMap:g.common.contextualErrorMap})))}}ZodPromise.create=(d,m)=>new ZodPromise({type:d,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(m)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(m){const{status:g,ctx:w}=this._processInputParams(m),I=this._def.effect||null,P={addIssue:$=>{addIssueToContext(w,$),$.fatal?g.abort():g.dirty()},get path(){return w.path}};if(P.addIssue=P.addIssue.bind(P),I.type==="preprocess"){const $=I.transform(w.data,P);if(w.common.async)return Promise.resolve($).then(async F=>{if(g.value==="aborted")return INVALID;const D=await this._def.schema._parseAsync({data:F,path:w.path,parent:w});return D.status==="aborted"?INVALID:D.status==="dirty"||g.value==="dirty"?DIRTY(D.value):D});{if(g.value==="aborted")return INVALID;const F=this._def.schema._parseSync({data:$,path:w.path,parent:w});return F.status==="aborted"?INVALID:F.status==="dirty"||g.value==="dirty"?DIRTY(F.value):F}}if(I.type==="refinement"){const $=F=>{const D=I.refinement(F,P);if(w.common.async)return Promise.resolve(D);if(D instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return F};if(w.common.async===!1){const F=this._def.schema._parseSync({data:w.data,path:w.path,parent:w});return F.status==="aborted"?INVALID:(F.status==="dirty"&&g.dirty(),$(F.value),{status:g.value,value:F.value})}return this._def.schema._parseAsync({data:w.data,path:w.path,parent:w}).then(F=>F.status==="aborted"?INVALID:(F.status==="dirty"&&g.dirty(),$(F.value).then(()=>({status:g.value,value:F.value}))))}if(I.type==="transform"){if(w.common.async===!1){const $=this._def.schema._parseSync({data:w.data,path:w.path,parent:w});if(!isValid($))return $;const F=I.transform($.value,P);if(F instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:g.value,value:F}}return this._def.schema._parseAsync({data:w.data,path:w.path,parent:w}).then($=>isValid($)?Promise.resolve(I.transform($.value,P)).then(F=>({status:g.value,value:F})):$)}util$1.assertNever(I)}}ZodEffects.create=(d,m,g)=>new ZodEffects({schema:d,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:m,...processCreateParams(g)}),ZodEffects.createWithPreprocess=(d,m,g)=>new ZodEffects({schema:m,effect:{type:"preprocess",transform:d},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(g)});class ZodOptional extends ZodType{_parse(m){return this._getType(m)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(m)}unwrap(){return this._def.innerType}}ZodOptional.create=(d,m)=>new ZodOptional({innerType:d,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(m)});class ZodNullable extends ZodType{_parse(m){return this._getType(m)===ZodParsedType.null?OK(null):this._def.innerType._parse(m)}unwrap(){return this._def.innerType}}ZodNullable.create=(d,m)=>new ZodNullable({innerType:d,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(m)});class ZodDefault extends ZodType{_parse(m){const{ctx:g}=this._processInputParams(m);let w=g.data;return g.parsedType===ZodParsedType.undefined&&(w=this._def.defaultValue()),this._def.innerType._parse({data:w,path:g.path,parent:g})}removeDefault(){return this._def.innerType}}ZodDefault.create=(d,m)=>new ZodDefault({innerType:d,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof m.default=="function"?m.default:()=>m.default,...processCreateParams(m)});class ZodCatch extends ZodType{_parse(m){const{ctx:g}=this._processInputParams(m),w={...g,common:{...g.common,issues:[]}},I=this._def.innerType._parse({data:w.data,path:w.path,parent:{...w}});return isAsync(I)?I.then(P=>({status:"valid",value:P.status==="valid"?P.value:this._def.catchValue({get error(){return new ZodError(w.common.issues)},input:w.data})})):{status:"valid",value:I.status==="valid"?I.value:this._def.catchValue({get error(){return new ZodError(w.common.issues)},input:w.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(d,m)=>new ZodCatch({innerType:d,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof m.catch=="function"?m.catch:()=>m.catch,...processCreateParams(m)});class ZodNaN extends ZodType{_parse(m){if(this._getType(m)!==ZodParsedType.nan){const g=this._getOrReturnCtx(m);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:g.parsedType}),INVALID}return{status:"valid",value:m.data}}}ZodNaN.create=d=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(d)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(m){const{ctx:g}=this._processInputParams(m),w=g.data;return this._def.type._parse({data:w,path:g.path,parent:g})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(m){const{status:g,ctx:w}=this._processInputParams(m);if(w.common.async)return(async()=>{const I=await this._def.in._parseAsync({data:w.data,path:w.path,parent:w});return I.status==="aborted"?INVALID:I.status==="dirty"?(g.dirty(),DIRTY(I.value)):this._def.out._parseAsync({data:I.value,path:w.path,parent:w})})();{const I=this._def.in._parseSync({data:w.data,path:w.path,parent:w});return I.status==="aborted"?INVALID:I.status==="dirty"?(g.dirty(),{status:"dirty",value:I.value}):this._def.out._parseSync({data:I.value,path:w.path,parent:w})}}static create(m,g){return new ZodPipeline({in:m,out:g,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(m){const g=this._def.innerType._parse(m),w=I=>(isValid(I)&&(I.value=Object.freeze(I.value)),I);return isAsync(g)?g.then(I=>w(I)):w(g)}unwrap(){return this._def.innerType}}function custom(d,m={},g){return d?ZodAny.create().superRefine((w,I)=>{var P,$;if(!d(w)){const F=typeof m=="function"?m(w):typeof m=="string"?{message:m}:m,D=($=(P=F.fatal)!==null&&P!==void 0?P:g)===null||$===void 0||$,U=typeof F=="string"?{message:F}:F;I.addIssue({code:"custom",...U,fatal:D})}}):ZodAny.create()}ZodReadonly.create=(d,m)=>new ZodReadonly({innerType:d,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(m)});const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(d){d.ZodString="ZodString",d.ZodNumber="ZodNumber",d.ZodNaN="ZodNaN",d.ZodBigInt="ZodBigInt",d.ZodBoolean="ZodBoolean",d.ZodDate="ZodDate",d.ZodSymbol="ZodSymbol",d.ZodUndefined="ZodUndefined",d.ZodNull="ZodNull",d.ZodAny="ZodAny",d.ZodUnknown="ZodUnknown",d.ZodNever="ZodNever",d.ZodVoid="ZodVoid",d.ZodArray="ZodArray",d.ZodObject="ZodObject",d.ZodUnion="ZodUnion",d.ZodDiscriminatedUnion="ZodDiscriminatedUnion",d.ZodIntersection="ZodIntersection",d.ZodTuple="ZodTuple",d.ZodRecord="ZodRecord",d.ZodMap="ZodMap",d.ZodSet="ZodSet",d.ZodFunction="ZodFunction",d.ZodLazy="ZodLazy",d.ZodLiteral="ZodLiteral",d.ZodEnum="ZodEnum",d.ZodEffects="ZodEffects",d.ZodNativeEnum="ZodNativeEnum",d.ZodOptional="ZodOptional",d.ZodNullable="ZodNullable",d.ZodDefault="ZodDefault",d.ZodCatch="ZodCatch",d.ZodPromise="ZodPromise",d.ZodBranded="ZodBranded",d.ZodPipeline="ZodPipeline",d.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(d,m={message:`Input not instance of ${d.name}`})=>custom(g=>g instanceof d,m),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:d=>ZodString.create({...d,coerce:!0}),number:d=>ZodNumber.create({...d,coerce:!0}),boolean:d=>ZodBoolean.create({...d,coerce:!0}),bigint:d=>ZodBigInt.create({...d,coerce:!0}),date:d=>ZodDate.create({...d,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util$1},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError}),Edge,Edge2;Edge2=Edge||(Edge={}),Edge2[Edge2.EXTEND=1]="EXTEND",Edge2[Edge2.WRAP=2]="WRAP",Edge2[Edge2.CROP=3]="CROP";const JimpClassSchema=z.object({bitmap:z.object({data:z.union([z.instanceof(Buffer$1),z.instanceof(Uint8Array)]),width:z.number(),height:z.number()})}),BlitOptionsSchemaComplex=z.object({src:JimpClassSchema,x:z.number().optional(),y:z.number().optional(),srcX:z.number().optional(),srcY:z.number().optional(),srcW:z.number().optional(),srcH:z.number().optional()}),BlitOptionsSchema=z.union([JimpClassSchema,BlitOptionsSchemaComplex]),methods$h={blit(d,m){const g=BlitOptionsSchema.parse(m);let{src:w,x:I=0,y:P=0,srcX:$=0,srcY:F=0,srcW:D=w.bitmap.width,srcH:U=w.bitmap.height}="bitmap"in g?{src:g}:g;if(!("bitmap"in w))throw new Error("The source must be a Jimp image");if(typeof I!="number"||typeof P!="number")throw new Error("x and y must be numbers");I=Math.round(I),P=Math.round(P),$=Math.round($),F=Math.round(F),D=Math.round(D),U=Math.round(U);const j=d.bitmap.width,Z=d.bitmap.height;return scan(w,$,F,D,U,function(G,H,W){const q=I+G-$,Q=P+H-F;if(q>=0&&Q>=0&&j-q>0&&Z-Q>0){const et=d.getPixelIndex(q,Q),J={r:w.bitmap.data[W]||0,g:w.bitmap.data[W+1]||0,b:w.bitmap.data[W+2]||0,a:w.bitmap.data[W+3]||0},V={r:d.bitmap.data[et]||0,g:d.bitmap.data[et+1]||0,b:d.bitmap.data[et+2]||0,a:d.bitmap.data[et+3]||0};d.bitmap.data[et]=(J.a*(J.r-V.r)-V.r+255>>8)+V.r,d.bitmap.data[et+1]=(J.a*(J.g-V.g)-V.g+255>>8)+V.g,d.bitmap.data[et+2]=(J.a*(J.b-V.b)-V.b+255>>8)+V.b,d.bitmap.data[et+3]=limit255(V.a+J.a)}}),d}},mulTable=[1,57,41,21,203,34,97,73,227,91,149,62,105,45,39,137,241,107,3,173,39,71,65,238,219,101,187,87,81,151,141,133,249,117,221,209,197,187,177,169,5,153,73,139,133,127,243,233,223,107,103,99,191,23,177,171,165,159,77,149,9,139,135,131,253,245,119,231,224,109,211,103,25,195,189,23,45,175,171,83,81,79,155,151,147,9,141,137,67,131,129,251,123,30,235,115,113,221,217,53,13,51,50,49,193,189,185,91,179,175,43,169,83,163,5,79,155,19,75,147,145,143,35,69,17,67,33,65,255,251,247,243,239,59,29,229,113,111,219,27,213,105,207,51,201,199,49,193,191,47,93,183,181,179,11,87,43,85,167,165,163,161,159,157,155,77,19,75,37,73,145,143,141,35,138,137,135,67,33,131,129,255,63,250,247,61,121,239,237,117,29,229,227,225,111,55,109,216,213,211,209,207,205,203,201,199,197,195,193,48,190,47,93,185,183,181,179,178,176,175,173,171,85,21,167,165,41,163,161,5,79,157,78,154,153,19,75,149,74,147,73,144,143,71,141,140,139,137,17,135,134,133,66,131,65,129,1],shgTable=[0,9,10,10,14,12,14,14,16,15,16,15,16,15,15,17,18,17,12,18,16,17,17,19,19,18,19,18,18,19,19,19,20,19,20,20,20,20,20,20,15,20,19,20,20,20,21,21,21,20,20,20,21,18,21,21,21,21,20,21,17,21,21,21,22,22,21,22,22,21,22,21,19,22,22,19,20,22,22,21,21,21,22,22,22,18,22,22,21,22,22,23,22,20,23,22,22,23,23,21,19,21,21,21,23,23,23,22,23,23,21,23,22,23,18,22,23,20,22,23,23,23,21,22,20,22,21,22,24,24,24,24,24,22,21,24,23,23,24,21,24,23,24,22,24,24,22,24,24,22,23,24,24,24,20,23,22,23,24,24,24,24,24,24,24,23,21,23,22,23,24,24,24,22,24,24,24,23,22,24,24,25,23,25,25,23,24,25,25,24,22,25,25,25,24,23,24,25,25,25,25,25,25,25,25,25,25,25,25,23,25,23,24,25,25,25,25,25,25,25,25,25,24,22,25,25,23,25,25,20,24,25,24,25,25,22,24,25,24,25,24,25,25,24,25,25,25,25,22,25,25,25,24,25,24,25,18],methods$g={blur(d,m){if(typeof m!="number")throw new Error("r must be a number");if(m<1)throw new Error("r must be greater than 0");let g,w,I,P,$,F,D,U,j,Z,G,H,W;const q=d.bitmap.width-1,Q=d.bitmap.height-1,et=m+1,J=mulTable[m],V=shgTable[m],rt=[],X=[],ot=[],it=[],st=[],at=[];let ft=2;for(;ft-- >0;){for(H=0,W=0,F=0;F<d.bitmap.height;F++){for(g=d.bitmap.data[W]*et,w=d.bitmap.data[W+1]*et,I=d.bitmap.data[W+2]*et,P=d.bitmap.data[W+3]*et,D=1;D<=m;D++)U=W+((D>q?q:D)<<2),g+=d.bitmap.data[U++],w+=d.bitmap.data[U++],I+=d.bitmap.data[U++],P+=d.bitmap.data[U];for($=0;$<d.bitmap.width;$++)rt[H]=g,X[H]=w,ot[H]=I,it[H]=P,F===0&&(st[$]=((U=$+et)<q?U:q)<<2,at[$]=(U=$-m)>0?U<<2:0),j=W+st[$],Z=W+at[$],g+=d.bitmap.data[j++]-d.bitmap.data[Z++],w+=d.bitmap.data[j++]-d.bitmap.data[Z++],I+=d.bitmap.data[j++]-d.bitmap.data[Z++],P+=d.bitmap.data[j]-d.bitmap.data[Z++],H++;W+=d.bitmap.width<<2}for($=0;$<d.bitmap.width;$++){for(G=$,g=rt[G]*et,w=X[G]*et,I=ot[G]*et,P=it[G]*et,D=1;D<=m;D++)G+=D>Q?0:d.bitmap.width,g+=rt[G],w+=X[G],I+=ot[G],P+=it[G];for(H=$<<2,F=0;F<d.bitmap.height;F++)d.bitmap.data[H]=limit255(g*J>>>V),d.bitmap.data[H+1]=limit255(w*J>>>V),d.bitmap.data[H+2]=limit255(I*J>>>V),d.bitmap.data[H+3]=limit255(P*J>>>V),$===0&&(st[F]=((U=F+et)<Q?U:Q)*d.bitmap.width,at[F]=(U=F-m)>0?U*d.bitmap.width:0),j=$+st[F],Z=$+at[F],g+=rt[j]-rt[Z],w+=X[j]-X[Z],I+=ot[j]-ot[Z],P+=it[j]-it[Z],H+=d.bitmap.width<<2}}return d},gaussian(d,m){if(typeof m!="number")throw new Error("r must be a number");if(m<1)throw new Error("r must be greater than 0");const g=Math.ceil(2.57*m),w=2*g+1,I=m*m*2,P=I*Math.PI,$=[];for(let F=0;F<w;F++){const D=[];for(let U=0;U<w;U++){const j=(U-g)**2+(F-g)**2;D[U]=Math.exp(-j/I)/P}$.push(D)}for(let F=0;F<d.bitmap.height;F++)for(let D=0;D<d.bitmap.width;D++){let U=0,j=0,Z=0,G=0,H=0;for(let W=0;W<w;W++){for(let Q=0;Q<w;Q++){const et=Math.min(d.bitmap.width-1,Math.max(0,Q+D-g)),J=Math.min(d.bitmap.height-1,Math.max(0,W+F-g)),V=$[W][Q],rt=J*d.bitmap.width+et<<2;U+=d.bitmap.data[rt]*V,j+=d.bitmap.data[rt+1]*V,Z+=d.bitmap.data[rt+2]*V,G+=d.bitmap.data[rt+3]*V,H+=V}const q=F*d.bitmap.width+D<<2;d.bitmap.data[q]=Math.round(U/H),d.bitmap.data[q+1]=Math.round(j/H),d.bitmap.data[q+2]=Math.round(Z/H),d.bitmap.data[q+3]=Math.round(G/H)}}return d}},CircleOptionsSchema=z.object({x:z.number().optional(),y:z.number().optional(),radius:z.number().min(0).optional()}),methods$f={circle(d,m={}){const g=CircleOptionsSchema.parse(m),w=g.radius||(d.bitmap.width>d.bitmap.height?d.bitmap.height:d.bitmap.width)/2,I=typeof g.x=="number"?g.x:d.bitmap.width/2,P=typeof g.y=="number"?g.y:d.bitmap.height/2;return d.scan(($,F,D)=>{const U=Math.sqrt(Math.pow($-I,2)+Math.pow(F-P,2));w-U<=0?d.bitmap.data[D+3]=0:w-U<1&&(d.bitmap.data[D+3]=255*(w-U))}),d}},ConvolutionMatrixSchema=z.array(z.number()).min(1).array(),ConvolutionComplexOptionsSchema=z.object({kernel:ConvolutionMatrixSchema,edgeHandling:z.nativeEnum(Edge).optional()}),ConvolutionOptionsSchema=z.union([ConvolutionMatrixSchema,ConvolutionComplexOptionsSchema]),ConvoluteComplexOptionsSchema=z.object({kernel:ConvolutionMatrixSchema,x:z.number().optional(),y:z.number().optional(),w:z.number().optional(),h:z.number().optional()}),ConvoluteOptionsSchema=z.union([ConvolutionMatrixSchema,ConvoluteComplexOptionsSchema]),PixelateSize=z.number().min(1).max(1/0),PixelateComplexOptionsSchema=z.object({size:PixelateSize,x:z.number().optional(),y:z.number().optional(),w:z.number().optional(),h:z.number().optional()}),PixelateOptionsSchema=z.union([PixelateSize,PixelateComplexOptionsSchema]);function applyKernel(d,m,g,w){const I=[0,0,0,0],P=(m.length-1)/2;for(let $=0;$<m.length;$+=1)for(let F=0;F<m[$].length;F+=1){const D=d.getPixelIndex(g+$-P,w+F-P);I[0]+=d.bitmap.data[D]*m[$][F],I[1]+=d.bitmap.data[D+1]*m[$][F],I[2]+=d.bitmap.data[D+2]*m[$][F],I[3]+=d.bitmap.data[D+3]*m[$][F]}return I}function mix(d,m,g=50){return{r:(m.r-d.r)*(g/100)+d.r,g:(m.g-d.g)*(g/100)+d.g,b:(m.b-d.b)*(g/100)+d.b}}const HueActionSchema=z.object({apply:z.literal("hue"),params:z.tuple([z.number().min(-360).max(360)])}),SpinActionSchema=z.object({apply:z.literal("spin"),params:z.tuple([z.number().min(-360).max(360)])}),LightenActionSchema=z.object({apply:z.literal("lighten"),params:z.tuple([z.number().min(0).max(100)]).optional()}),RGBColorSchema=z.object({r:z.number().min(0).max(255),g:z.number().min(0).max(255),b:z.number().min(0).max(255)}),MixActionSchema=z.object({apply:z.literal("mix"),params:z.union([z.tuple([RGBColorSchema]),z.tuple([RGBColorSchema,z.number().min(0).max(100)])])}),TintActionSchema=z.object({apply:z.literal("tint"),params:z.tuple([z.number().min(0).max(100)]).optional()}),ShadeActionSchema=z.object({apply:z.literal("shade"),params:z.tuple([z.number().min(0).max(100)]).optional()}),XorActionSchema=z.object({apply:z.literal("xor"),params:z.tuple([RGBColorSchema])}),RedActionSchema=z.object({apply:z.literal("red"),params:z.tuple([z.number().min(-255).max(255)])}),GreenActionSchema=z.object({apply:z.literal("green"),params:z.tuple([z.number().min(-255).max(255)])}),BlueActionSchema=z.object({apply:z.literal("blue"),params:z.tuple([z.number().min(-255).max(255)])}),BrightenActionSchema=z.object({apply:z.literal("brighten"),params:z.tuple([z.number().min(0).max(100)]).optional()}),DarkenActionSchema=z.object({apply:z.literal("darken"),params:z.tuple([z.number().min(0).max(100)]).optional()}),DesaturateActionSchema=z.object({apply:z.literal("desaturate"),params:z.tuple([z.number().min(0).max(100)]).optional()}),SaturateActionSchema=z.object({apply:z.literal("saturate"),params:z.tuple([z.number().min(0).max(100)]).optional()}),GrayscaleActionSchema=z.object({apply:z.literal("greyscale"),params:z.tuple([]).optional()}),ColorActionNameSchema=z.union([HueActionSchema,SpinActionSchema,LightenActionSchema,MixActionSchema,TintActionSchema,ShadeActionSchema,XorActionSchema,RedActionSchema,GreenActionSchema,BlueActionSchema,BrightenActionSchema,DarkenActionSchema,DesaturateActionSchema,SaturateActionSchema,GrayscaleActionSchema]);function histogram(d){const m={r:new Array(256).fill(0),g:new Array(256).fill(0),b:new Array(256).fill(0)};return d.scan((g,w,I)=>{m.r[d.bitmap.data[I+0]]++,m.g[d.bitmap.data[I+1]]++,m.b[d.bitmap.data[I+2]]++}),m}const normalizeValue=function(d,m,g){return 255*(d-m)/(g-m)},getBounds=function(d){return[d.findIndex(m=>m>0),255-d.slice().reverse().findIndex(m=>m>0)]},methods$e={normalize(d){const m=histogram(d),g={r:getBounds(m.r),g:getBounds(m.g),b:getBounds(m.b)};return d.scan((w,I,P)=>{const $=d.bitmap.data[P+0],F=d.bitmap.data[P+1],D=d.bitmap.data[P+2];d.bitmap.data[P+0]=normalizeValue($,g.r[0],g.r[1]),d.bitmap.data[P+1]=normalizeValue(F,g.g[0],g.g[1]),d.bitmap.data[P+2]=normalizeValue(D,g.b[0],g.b[1])}),d},invert:d=>(d.scan((m,g,w)=>{d.bitmap.data[w]=255-d.bitmap.data[w],d.bitmap.data[w+1]=255-d.bitmap.data[w+1],d.bitmap.data[w+2]=255-d.bitmap.data[w+2]}),d),brightness(d,m){if(typeof m!="number")throw new Error("val must be numbers");return d.scan((g,w,I)=>{d.bitmap.data[I]=limit255(d.bitmap.data[I]*m),d.bitmap.data[I+1]=limit255(d.bitmap.data[I+1]*m),d.bitmap.data[I+2]=limit255(d.bitmap.data[I+2]*m)}),d},contrast(d,m){if(typeof m!="number")throw new Error("val must be numbers");if(m<-1||m>1)throw new Error("val must be a number between -1 and +1");const g=(m+1)/(1-m);function w(I){return(I=Math.floor(g*(I-127)+127))<0?0:I>255?255:I}return d.scan((I,P,$)=>{d.bitmap.data[$]=w(d.bitmap.data[$]),d.bitmap.data[$+1]=w(d.bitmap.data[$+1]),d.bitmap.data[$+2]=w(d.bitmap.data[$+2])}),d},posterize(d,m){if(typeof m!="number")throw new Error("n must be numbers");return m<2&&(m=2),d.scan((g,w,I)=>{const P=d.bitmap.data[I],$=d.bitmap.data[I+1],F=d.bitmap.data[I+2];d.bitmap.data[I]=Math.floor(P/255*(m-1))/(m-1)*255,d.bitmap.data[I+1]=Math.floor($/255*(m-1))/(m-1)*255,d.bitmap.data[I+2]=Math.floor(F/255*(m-1))/(m-1)*255}),d},greyscale:d=>(d.scan((m,g,w)=>{const I=.2126*d.bitmap.data[w]+.7152*d.bitmap.data[w+1]+.0722*d.bitmap.data[w+2];d.bitmap.data[w]=I,d.bitmap.data[w+1]=I,d.bitmap.data[w+2]=I}),d),opacity(d,m){if(typeof m!="number")throw new Error("f must be a number");if(m<0||m>1)throw new Error("f must be a number from 0 to 1");return d.scan((g,w,I)=>{const P=d.bitmap.data[I+3]*m;d.bitmap.data[I+3]=P}),d},sepia:d=>(d.scan((m,g,w)=>{let I=d.bitmap.data[w],P=d.bitmap.data[w+1],$=d.bitmap.data[w+2];I=.393*I+.769*P+.189*$,P=.349*I+.686*P+.168*$,$=.272*I+.534*P+.131*$,d.bitmap.data[w]=I<255?I:255,d.bitmap.data[w+1]=P<255?P:255,d.bitmap.data[w+2]=$<255?$:255}),d),fade(d,m){if(typeof m!="number")throw new Error("f must be a number");if(m<0||m>1)throw new Error("f must be a number from 0 to 1");return this.opacity(d,1-m)},convolution(d,m){const g=ConvolutionOptionsSchema.parse(m),{kernel:w,edgeHandling:I=Edge.EXTEND}="kernel"in g?g:{kernel:g,edgeHandling:void 0};if(!w[0])throw new Error("kernel must be a matrix");const P=Buffer$1.from(d.bitmap.data),$=w.length,F=w[0].length,D=Math.floor($/2),U=Math.floor(F/2),j=-D,Z=-U;let G,H,W,q,Q,et,J,V,rt,X;return d.scan((ot,it,st)=>{q=0,W=0,H=0;for(let at=j;at<=D;at++)for(let ft=Z;ft<=U;ft++)V=ot+ft,rt=it+at,G=w[at+D][ft+U],X=d.getPixelIndex(V,rt,I),X===-1?(J=0,et=0,Q=0):(Q=d.bitmap.data[X+0],et=d.bitmap.data[X+1],J=d.bitmap.data[X+2]),H+=G*Q,W+=G*et,q+=G*J;H<0&&(H=0),W<0&&(W=0),q<0&&(q=0),H>255&&(H=255),W>255&&(W=255),q>255&&(q=255),P[st+0]=H,P[st+1]=W,P[st+2]=q}),d.bitmap.data=P,d},opaque:d=>(d.scan((m,g,w)=>{d.bitmap.data[w+3]=255}),d),pixelate(d,m){const g=PixelateOptionsSchema.parse(m),{size:w,x:I=0,y:P=0,w:$=d.bitmap.width-I,h:F=d.bitmap.height-P}=typeof g=="number"?{size:g}:g,D=[[1/16,2/16,1/16],[2/16,.25,2/16],[1/16,2/16,1/16]],U=clone(d);return scan(U,I,P,$,F,(j,Z,G)=>{j=w*Math.floor(j/w),Z=w*Math.floor(Z/w);const H=applyKernel(U,D,j,Z);d.bitmap.data[G]=H[0],d.bitmap.data[G+1]=H[1],d.bitmap.data[G+2]=H[2],d.bitmap.data[G+3]=H[3]}),d},convolute(d,m){const g=ConvoluteOptionsSchema.parse(m),{kernel:w,x:I=0,y:P=0,w:$=d.bitmap.width-I,h:F=d.bitmap.height-P}="kernel"in g?g:{kernel:g},D=clone(d);return scan(D,I,P,$,F,(U,j,Z)=>{const G=applyKernel(D,w,U,j);d.bitmap.data[Z]=limit255(G[0]),d.bitmap.data[Z+1]=limit255(G[1]),d.bitmap.data[Z+2]=limit255(G[2]),d.bitmap.data[Z+3]=limit255(G[3])}),d},color(d,m){if(!m||!Array.isArray(m))throw new Error("actions must be an array");return m.forEach(g=>ColorActionNameSchema.parse(g)),m=m.map(g=>(g.apply!=="xor"&&g.apply!=="mix"||(g.params[0]=tinycolor(g.params[0]).toRgb()),g)),d.scan((g,w,I)=>{let P={r:d.bitmap.data[I],g:d.bitmap.data[I+1],b:d.bitmap.data[I+2]};const $=(F,D)=>limit255(P[F]+D);m.forEach(F=>{var D,U;if(F.apply==="mix")P=mix(P,F.params[0],F.params[1]);else if(F.apply==="tint")P=mix(P,{r:255,g:255,b:255},(D=F.params)==null?void 0:D[0]);else if(F.apply==="shade")P=mix(P,{r:0,g:0,b:0},(U=F.params)==null?void 0:U[0]);else if(F.apply==="xor")P={r:P.r^F.params[0].r,g:P.g^F.params[0].g,b:P.b^F.params[0].b};else if(F.apply==="red")P.r=$("r",F.params[0]);else if(F.apply==="green")P.g=$("g",F.params[0]);else if(F.apply==="blue")P.b=$("b",F.params[0]);else{F.apply==="hue"&&(F.apply="spin");const j=tinycolor(P),Z=j[F.apply].bind(j);if(!Z)throw new Error("action "+F.apply+" not supported");P=Z(...F.params||[]).toRgb()}}),d.bitmap.data[I]=P.r,d.bitmap.data[I+1]=P.g,d.bitmap.data[I+2]=P.b}),d}};var lib$1={},ieee754={read:function(d,m,g,w,I){var P,$,F=8*I-w-1,D=(1<<F)-1,U=D>>1,j=-7,Z=g?I-1:0,G=g?-1:1,H=d[m+Z];for(Z+=G,P=H&(1<<-j)-1,H>>=-j,j+=F;j>0;P=256*P+d[m+Z],Z+=G,j-=8);for($=P&(1<<-j)-1,P>>=-j,j+=w;j>0;$=256*$+d[m+Z],Z+=G,j-=8);if(P===0)P=1-U;else{if(P===D)return $?NaN:1/0*(H?-1:1);$+=Math.pow(2,w),P-=U}return(H?-1:1)*$*Math.pow(2,P-w)},write:function(d,m,g,w,I,P){var $,F,D,U=8*P-I-1,j=(1<<U)-1,Z=j>>1,G=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=w?0:P-1,W=w?1:-1,q=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(F=isNaN(m)?1:0,$=j):($=Math.floor(Math.log(m)/Math.LN2),m*(D=Math.pow(2,-$))<1&&($--,D*=2),(m+=$+Z>=1?G/D:G*Math.pow(2,1-Z))*D>=2&&($++,D/=2),$+Z>=j?(F=0,$=j):$+Z>=1?(F=(m*D-1)*Math.pow(2,I),$+=Z):(F=m*Math.pow(2,Z-1)*Math.pow(2,I),$=0));I>=8;d[g+H]=255&F,H+=W,F/=256,I-=8);for($=$<<I|F,U+=I;U>0;d[g+H]=255&$,H+=W,$/=256,U-=8);d[g+H-W]|=128*q}};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.AnsiStringType=d.StringType=d.BufferType=d.Uint8ArrayType=d.IgnoreType=d.Float80_LE=d.Float80_BE=d.Float64_LE=d.Float64_BE=d.Float32_LE=d.Float32_BE=d.Float16_LE=d.Float16_BE=d.INT64_BE=d.UINT64_BE=d.INT64_LE=d.UINT64_LE=d.INT32_LE=d.INT32_BE=d.INT24_BE=d.INT24_LE=d.INT16_LE=d.INT16_BE=d.INT8=d.UINT32_BE=d.UINT32_LE=d.UINT24_BE=d.UINT24_LE=d.UINT16_BE=d.UINT16_LE=d.UINT8=void 0;const m=ieee754;function g(I){return new DataView(I.buffer,I.byteOffset)}d.UINT8={len:1,get:(I,P)=>g(I).getUint8(P),put:(I,P,$)=>(g(I).setUint8(P,$),P+1)},d.UINT16_LE={len:2,get:(I,P)=>g(I).getUint16(P,!0),put:(I,P,$)=>(g(I).setUint16(P,$,!0),P+2)},d.UINT16_BE={len:2,get:(I,P)=>g(I).getUint16(P),put:(I,P,$)=>(g(I).setUint16(P,$),P+2)},d.UINT24_LE={len:3,get(I,P){const $=g(I);return $.getUint8(P)+($.getUint16(P+1,!0)<<8)},put(I,P,$){const F=g(I);return F.setUint8(P,255&$),F.setUint16(P+1,$>>8,!0),P+3}},d.UINT24_BE={len:3,get(I,P){const $=g(I);return($.getUint16(P)<<8)+$.getUint8(P+2)},put(I,P,$){const F=g(I);return F.setUint16(P,$>>8),F.setUint8(P+2,255&$),P+3}},d.UINT32_LE={len:4,get:(I,P)=>g(I).getUint32(P,!0),put:(I,P,$)=>(g(I).setUint32(P,$,!0),P+4)},d.UINT32_BE={len:4,get:(I,P)=>g(I).getUint32(P),put:(I,P,$)=>(g(I).setUint32(P,$),P+4)},d.INT8={len:1,get:(I,P)=>g(I).getInt8(P),put:(I,P,$)=>(g(I).setInt8(P,$),P+1)},d.INT16_BE={len:2,get:(I,P)=>g(I).getInt16(P),put:(I,P,$)=>(g(I).setInt16(P,$),P+2)},d.INT16_LE={len:2,get:(I,P)=>g(I).getInt16(P,!0),put:(I,P,$)=>(g(I).setInt16(P,$,!0),P+2)},d.INT24_LE={len:3,get(I,P){const $=d.UINT24_LE.get(I,P);return $>8388607?$-16777216:$},put(I,P,$){const F=g(I);return F.setUint8(P,255&$),F.setUint16(P+1,$>>8,!0),P+3}},d.INT24_BE={len:3,get(I,P){const $=d.UINT24_BE.get(I,P);return $>8388607?$-16777216:$},put(I,P,$){const F=g(I);return F.setUint16(P,$>>8),F.setUint8(P+2,255&$),P+3}},d.INT32_BE={len:4,get:(I,P)=>g(I).getInt32(P),put:(I,P,$)=>(g(I).setInt32(P,$),P+4)},d.INT32_LE={len:4,get:(I,P)=>g(I).getInt32(P,!0),put:(I,P,$)=>(g(I).setInt32(P,$,!0),P+4)},d.UINT64_LE={len:8,get:(I,P)=>g(I).getBigUint64(P,!0),put:(I,P,$)=>(g(I).setBigUint64(P,$,!0),P+8)},d.INT64_LE={len:8,get:(I,P)=>g(I).getBigInt64(P,!0),put:(I,P,$)=>(g(I).setBigInt64(P,$,!0),P+8)},d.UINT64_BE={len:8,get:(I,P)=>g(I).getBigUint64(P),put:(I,P,$)=>(g(I).setBigUint64(P,$),P+8)},d.INT64_BE={len:8,get:(I,P)=>g(I).getBigInt64(P),put:(I,P,$)=>(g(I).setBigInt64(P,$),P+8)},d.Float16_BE={len:2,get(I,P){return m.read(I,P,!1,10,this.len)},put(I,P,$){return m.write(I,$,P,!1,10,this.len),P+this.len}},d.Float16_LE={len:2,get(I,P){return m.read(I,P,!0,10,this.len)},put(I,P,$){return m.write(I,$,P,!0,10,this.len),P+this.len}},d.Float32_BE={len:4,get:(I,P)=>g(I).getFloat32(P),put:(I,P,$)=>(g(I).setFloat32(P,$),P+4)},d.Float32_LE={len:4,get:(I,P)=>g(I).getFloat32(P,!0),put:(I,P,$)=>(g(I).setFloat32(P,$,!0),P+4)},d.Float64_BE={len:8,get:(I,P)=>g(I).getFloat64(P),put:(I,P,$)=>(g(I).setFloat64(P,$),P+8)},d.Float64_LE={len:8,get:(I,P)=>g(I).getFloat64(P,!0),put:(I,P,$)=>(g(I).setFloat64(P,$,!0),P+8)},d.Float80_BE={len:10,get(I,P){return m.read(I,P,!1,63,this.len)},put(I,P,$){return m.write(I,$,P,!1,63,this.len),P+this.len}},d.Float80_LE={len:10,get(I,P){return m.read(I,P,!0,63,this.len)},put(I,P,$){return m.write(I,$,P,!0,63,this.len),P+this.len}},d.IgnoreType=class{constructor(I){this.len=I}get(I,P){}},d.Uint8ArrayType=class{constructor(I){this.len=I}get(I,P){return I.subarray(P,P+this.len)}},d.BufferType=class{constructor(I){this.len=I}get(I,P){return Buffer$1.from(I.subarray(P,P+this.len))}},d.StringType=class{constructor(I,P){this.len=I,this.encoding=P}get(I,P){return Buffer$1.from(I).toString(this.encoding,P,P+this.len)}};class w{constructor(P){this.len=P}static decode(P,$,F){let D="";for(let U=$;U<F;++U)D+=w.codePointToString(w.singleByteDecoder(P[U]));return D}static inRange(P,$,F){return $<=P&&P<=F}static codePointToString(P){return P<=65535?String.fromCharCode(P):(P-=65536,String.fromCharCode(55296+(P>>10),56320+(1023&P)))}static singleByteDecoder(P){if(w.inRange(P,0,127))return P;const $=w.windows1252[P-128];if($===null)throw Error("invaliding encoding");return $}get(P,$=0){return w.decode(P,$,$+this.len)}}d.AnsiStringType=w,w.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1);var core$1={},ReadStreamTokenizer$1={},AbstractTokenizer$1={},lib={},EndOfFileStream={};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.EndOfStreamError=d.defaultMessages=void 0,d.defaultMessages="End-Of-Stream";class m extends Error{constructor(){super(d.defaultMessages)}}d.EndOfStreamError=m})(EndOfFileStream);var StreamReader={},Deferred$1={};Object.defineProperty(Deferred$1,"__esModule",{value:!0}),Deferred$1.Deferred=void 0;class Deferred{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((m,g)=>{this.reject=g,this.resolve=m})}}Deferred$1.Deferred=Deferred,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.StreamReader=d.EndOfStreamError=void 0;const m=EndOfFileStream,g=Deferred$1;var w=EndOfFileStream;Object.defineProperty(d,"EndOfStreamError",{enumerable:!0,get:function(){return w.EndOfStreamError}}),d.StreamReader=class{constructor(I){if(this.s=I,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!I.read||!I.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new m.EndOfStreamError)),this.s.once("error",P=>this.reject(P)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(I,P,$){const F=await this.read(I,P,$);return this.peekQueue.push(I.subarray(P,P+F)),F}async read(I,P,$){if($===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new m.EndOfStreamError;let F=$,D=0;for(;this.peekQueue.length>0&&F>0;){const U=this.peekQueue.pop();if(!U)throw new Error("peekData should be defined");const j=Math.min(U.length,F);I.set(U.subarray(0,j),P+D),D+=j,F-=j,j<U.length&&this.peekQueue.push(U.subarray(j))}for(;F>0&&!this.endOfStream;){const U=Math.min(F,1048576),j=await this.readFromStream(I,P+D,U);if(D+=j,j<U)break;F-=j}return D}async readFromStream(I,P,$){const F=this.s.read($);if(F)return I.set(F,P),F.length;{const D={buffer:I,offset:P,length:$,deferred:new g.Deferred};return this.deferred=D.deferred,this.s.once("readable",()=>{this.readDeferred(D)}),D.deferred.promise}}readDeferred(I){const P=this.s.read(I.length);P?(I.buffer.set(P,I.offset),I.deferred.resolve(P.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(I)})}reject(I){this.endOfStream=!0,this.deferred&&(this.deferred.reject(I),this.deferred=null)}}}(StreamReader),function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.StreamReader=d.EndOfStreamError=void 0;var m=EndOfFileStream;Object.defineProperty(d,"EndOfStreamError",{enumerable:!0,get:function(){return m.EndOfStreamError}});var g=StreamReader;Object.defineProperty(d,"StreamReader",{enumerable:!0,get:function(){return g.StreamReader}})}(lib),Object.defineProperty(AbstractTokenizer$1,"__esModule",{value:!0}),AbstractTokenizer$1.AbstractTokenizer=void 0;const peek_readable_1$2=lib;class AbstractTokenizer{constructor(m){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=m||{}}async readToken(m,g=this.position){const w=Buffer$1.alloc(m.len);if(await this.readBuffer(w,{position:g})<m.len)throw new peek_readable_1$2.EndOfStreamError;return m.get(w,0)}async peekToken(m,g=this.position){const w=Buffer$1.alloc(m.len);if(await this.peekBuffer(w,{position:g})<m.len)throw new peek_readable_1$2.EndOfStreamError;return m.get(w,0)}async readNumber(m){if(await this.readBuffer(this.numBuffer,{length:m.len})<m.len)throw new peek_readable_1$2.EndOfStreamError;return m.get(this.numBuffer,0)}async peekNumber(m){if(await this.peekBuffer(this.numBuffer,{length:m.len})<m.len)throw new peek_readable_1$2.EndOfStreamError;return m.get(this.numBuffer,0)}async ignore(m){if(this.fileInfo.size!==void 0){const g=this.fileInfo.size-this.position;if(m>g)return this.position+=g,g}return this.position+=m,m}async close(){}normalizeOptions(m,g){if(g&&g.position!==void 0&&g.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return g?{mayBeLess:g.mayBeLess===!0,offset:g.offset?g.offset:0,length:g.length?g.length:m.length-(g.offset?g.offset:0),position:g.position?g.position:this.position}:{mayBeLess:!1,offset:0,length:m.length,position:this.position}}}AbstractTokenizer$1.AbstractTokenizer=AbstractTokenizer,Object.defineProperty(ReadStreamTokenizer$1,"__esModule",{value:!0}),ReadStreamTokenizer$1.ReadStreamTokenizer=void 0;const AbstractTokenizer_1$1=AbstractTokenizer$1,peek_readable_1$1=lib,maxBufferSize=256e3;class ReadStreamTokenizer extends AbstractTokenizer_1$1.AbstractTokenizer{constructor(m,g){super(g),this.streamReader=new peek_readable_1$1.StreamReader(m)}async getFileInfo(){return this.fileInfo}async readBuffer(m,g){const w=this.normalizeOptions(m,g),I=w.position-this.position;if(I>0)return await this.ignore(I),this.readBuffer(m,g);if(I<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(w.length===0)return 0;const P=await this.streamReader.read(m,w.offset,w.length);if(this.position+=P,(!g||!g.mayBeLess)&&P<w.length)throw new peek_readable_1$1.EndOfStreamError;return P}async peekBuffer(m,g){const w=this.normalizeOptions(m,g);let I=0;if(w.position){const P=w.position-this.position;if(P>0){const $=new Uint8Array(w.length+P);return I=await this.peekBuffer($,{mayBeLess:w.mayBeLess}),m.set($.subarray(P),w.offset),I-P}if(P<0)throw new Error("Cannot peek from a negative offset in a stream")}if(w.length>0){try{I=await this.streamReader.peek(m,w.offset,w.length)}catch(P){if(g&&g.mayBeLess&&P instanceof peek_readable_1$1.EndOfStreamError)return 0;throw P}if(!w.mayBeLess&&I<w.length)throw new peek_readable_1$1.EndOfStreamError}return I}async ignore(m){const g=Math.min(maxBufferSize,m),w=new Uint8Array(g);let I=0;for(;I<m;){const P=m-I,$=await this.readBuffer(w,{length:Math.min(g,P)});if($<0)return $;I+=$}return I}}ReadStreamTokenizer$1.ReadStreamTokenizer=ReadStreamTokenizer;var BufferTokenizer$1={};Object.defineProperty(BufferTokenizer$1,"__esModule",{value:!0}),BufferTokenizer$1.BufferTokenizer=void 0;const peek_readable_1=lib,AbstractTokenizer_1=AbstractTokenizer$1;class BufferTokenizer extends AbstractTokenizer_1.AbstractTokenizer{constructor(m,g){super(g),this.uint8Array=m,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:m.length}async readBuffer(m,g){if(g&&g.position){if(g.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=g.position}const w=await this.peekBuffer(m,g);return this.position+=w,w}async peekBuffer(m,g){const w=this.normalizeOptions(m,g),I=Math.min(this.uint8Array.length-w.position,w.length);if(!w.mayBeLess&&I<w.length)throw new peek_readable_1.EndOfStreamError;return m.set(this.uint8Array.subarray(w.position,w.position+I),w.offset),I}async close(){}}BufferTokenizer$1.BufferTokenizer=BufferTokenizer,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.fromBuffer=d.fromStream=d.EndOfStreamError=void 0;const m=ReadStreamTokenizer$1,g=BufferTokenizer$1;var w=lib;Object.defineProperty(d,"EndOfStreamError",{enumerable:!0,get:function(){return w.EndOfStreamError}}),d.fromStream=function(I,P){return P=P||{},new m.ReadStreamTokenizer(I,P)},d.fromBuffer=function(I,P){return new g.BufferTokenizer(I,P)}}(core$1);var util={stringToBytes:d=>[...d].map(m=>m.charCodeAt(0)),tarHeaderChecksumMatches:(d,m=0)=>{const g=parseInt(d.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(g))return!1;let w=256;for(let I=m;I<m+148;I++)w+=d[I];for(let I=m+156;I<m+512;I++)w+=d[I];return g===w},uint32SyncSafeToken:{get:(d,m)=>127&d[m+3]|d[m+2]<<7|d[m+1]<<14|d[m]<<21,len:4}},supported$1={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]};const Token=lib$1,strtok3=core$1,{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=util,supported=supported$1,minimumBytes=4100;async function fromStream(d){const m=await strtok3.fromStream(d);try{return await fromTokenizer(m)}finally{await m.close()}}async function fromBuffer(d){if(!(d instanceof Uint8Array||d instanceof ArrayBuffer||Buffer$1.isBuffer(d)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof d}\``);const m=d instanceof Buffer$1?d:Buffer$1.from(d);if(m&&m.length>1)return fromTokenizer(strtok3.fromBuffer(m))}function _check(d,m,g){g={offset:0,...g};for(const[w,I]of m.entries())if(g.mask){if(I!==(g.mask[w]&d[w+g.offset]))return!1}else if(I!==d[w+g.offset])return!1;return!0}async function fromTokenizer(d){try{return _fromTokenizer(d)}catch(m){if(!(m instanceof strtok3.EndOfStreamError))throw m}}async function _fromTokenizer(d){let m=Buffer$1.alloc(minimumBytes);const g=(I,P)=>_check(m,I,P),w=(I,P)=>g(stringToBytes(I),P);if(d.fileInfo.size||(d.fileInfo.size=Number.MAX_SAFE_INTEGER),await d.peekBuffer(m,{length:12,mayBeLess:!0}),g([66,77]))return{ext:"bmp",mime:"image/bmp"};if(g([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(g([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(g([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(g([37,33]))return await d.peekBuffer(m,{length:24,mayBeLess:!0}),w("PS-Adobe-",{offset:2})&&w(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(g([31,160])||g([31,157]))return{ext:"Z",mime:"application/x-compress"};if(g([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(g([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(g([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(g([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(w("ID3")){await d.ignore(6);const I=await d.readToken(uint32SyncSafeToken);return d.position+I>d.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await d.ignore(I),fromTokenizer(d))}if(w("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((m[0]===67||m[0]===70)&&g([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(g([71,73,70]))return{ext:"gif",mime:"image/gif"};if(w("FLIF"))return{ext:"flif",mime:"image/flif"};if(w("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(w("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(w("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(w("FORM"))return{ext:"aif",mime:"audio/aiff"};if(w("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(g([80,75,3,4])){try{for(;d.position+30<d.fileInfo.size;){await d.readBuffer(m,{length:30});const I={compressedSize:m.readUInt32LE(18),uncompressedSize:m.readUInt32LE(22),filenameLength:m.readUInt16LE(26),extraFieldLength:m.readUInt16LE(28)};if(I.filename=await d.readToken(new Token.StringType(I.filenameLength,"utf-8")),await d.ignore(I.extraFieldLength),I.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(I.filename.endsWith(".rels")||I.filename.endsWith(".xml"))switch(I.filename.split("/")[0]){case"_rels":default:break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}if(I.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(I.filename.startsWith("3D/")&&I.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(I.filename==="mimetype"&&I.compressedSize===I.uncompressedSize)switch(await d.readToken(new Token.StringType(I.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"}}if(I.compressedSize===0){let P=-1;for(;P<0&&d.position<d.fileInfo.size;)await d.peekBuffer(m,{mayBeLess:!0}),P=m.indexOf("504B0304",0,"hex"),await d.ignore(P>=0?P:m.length)}else await d.ignore(I.compressedSize)}}catch(I){if(!(I instanceof strtok3.EndOfStreamError))throw I}return{ext:"zip",mime:"application/zip"}}if(w("OggS")){await d.ignore(28);const I=Buffer$1.alloc(8);return await d.readBuffer(I),_check(I,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(I,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(I,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(I,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(I,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(I,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(g([80,75])&&(m[2]===3||m[2]===5||m[2]===7)&&(m[3]===4||m[3]===6||m[3]===8))return{ext:"zip",mime:"application/zip"};if(w("ftyp",{offset:4})&&96&m[8]){const I=m.toString("binary",8,12).replace("\0"," ").trim();switch(I){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return I.startsWith("3g")?I.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(w("MThd"))return{ext:"mid",mime:"audio/midi"};if(w("wOFF")&&(g([0,1,0,0],{offset:4})||w("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(w("wOF2")&&(g([0,1,0,0],{offset:4})||w("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(g([212,195,178,161])||g([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(w("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(w("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(w("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(g([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(w("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(w("%PDF")){await d.ignore(1350);const I=10485760,P=Buffer$1.alloc(Math.min(I,d.fileInfo.size));return await d.readBuffer(P,{mayBeLess:!0}),P.includes(Buffer$1.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(g([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(g([73,73,42,0]))return w("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:g([28,0,254,0],{offset:8})||g([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:g([8,0,0,0],{offset:4})&&(g([45,0,254,0],{offset:8})||g([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(m=Buffer$1.alloc(24),await d.peekBuffer(m),(g([16,251,134,1],{offset:4})||g([8,0,0,0],{offset:4}))&&g([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(g([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(w("MAC "))return{ext:"ape",mime:"audio/ape"};if(g([26,69,223,163])){async function I(){const D=await d.peekNumber(Token.UINT8);let U=128,j=0;for(;!(D&U)&&U!==0;)++j,U>>=1;const Z=Buffer$1.alloc(j+1);return await d.readBuffer(Z),Z}async function P(){const D=await I(),U=await I();U[0]^=128>>U.length-1;const j=Math.min(6,U.length);return{id:D.readUIntBE(0,D.length),len:U.readUIntBE(U.length-j,j)}}async function $(D,U){for(;U>0;){const j=await P();if(j.id===17026)return d.readToken(new Token.StringType(j.len,"utf-8"));await d.ignore(j.len),--U}}const F=await P();switch(await $(0,F.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(g([82,73,70,70])){if(g([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(g([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(g([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(w("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(g([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(w("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(w("MSCF")||w("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(g([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(g([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(g([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(g([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(w("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(w("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(g([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(w("IMPM"))return{ext:"it",mime:"audio/x-it"};if(w("-lh0-",{offset:2})||w("-lh1-",{offset:2})||w("-lh2-",{offset:2})||w("-lh3-",{offset:2})||w("-lh4-",{offset:2})||w("-lh5-",{offset:2})||w("-lh6-",{offset:2})||w("-lh7-",{offset:2})||w("-lzs-",{offset:2})||w("-lz4-",{offset:2})||w("-lz5-",{offset:2})||w("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(g([0,0,1,186])){if(g([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(g([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(w("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(g([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(w("<?xml "))return{ext:"xml",mime:"application/xml"};if(g([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(g([82,97,114,33,26,7])&&(m[6]===0||m[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(w("solid "))return{ext:"stl",mime:"model/stl"};if(w("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(w("!<arch>"))return await d.ignore(8),await d.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(g([137,80,78,71,13,10,26,10])){async function I(){return{length:await d.readToken(Token.INT32_BE),type:await d.readToken(new Token.StringType(4,"binary"))}}await d.ignore(8);do{const P=await I();if(P.length<0)return;switch(P.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await d.ignore(P.length+4)}}while(d.position+8<d.fileInfo.size);return{ext:"png",mime:"image/png"}}if(g([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(g([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(g([102,114,101,101],{offset:4})||g([109,100,97,116],{offset:4})||g([109,111,111,118],{offset:4})||g([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(g([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(w("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(g([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(g([48,38,178,117,142,102,207,17,166,217])){async function I(){const P=Buffer$1.alloc(16);return await d.readBuffer(P),{id:P,size:Number(await d.readToken(Token.UINT64_LE))}}for(await d.ignore(30);d.position+24<d.fileInfo.size;){const P=await I();let $=P.size-24;if(_check(P.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const F=Buffer$1.alloc(16);if($-=await d.readBuffer(F),_check(F,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(F,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await d.ignore($)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(g([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((g([126,16,4])||g([126,24,4]))&&g([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(g([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(g([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await d.ignore(20),await d.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(g([255,10])||g([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(g([0,0,1,186])||g([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(g([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(g([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(g([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(g([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await d.peekBuffer(m,{length:Math.min(256,d.fileInfo.size),mayBeLess:!0}),w("BEGIN:")){if(w("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(w("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(w("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(w("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(w("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(g([4,0,0,0])&&m.length>=16){const I=m.readUInt32LE(12);if(I>12&&m.length>=I+16)try{const P=m.slice(16,I+16).toString();if(JSON.parse(P).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(g([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(w("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(g([71],{offset:4})&&(g([71],{offset:192})||g([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(g([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(g([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(g([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(g([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(g([76,80],{offset:34})&&(g([0,0,1],{offset:8})||g([1,0,2],{offset:8})||g([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(g([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await d.peekBuffer(m,{length:Math.min(512,d.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(m))return{ext:"tar",mime:"application/x-tar"};if(g([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(w("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(m.length>=2&&g([255,224],{offset:0,mask:[255,224]})){if(g([16],{offset:1,mask:[22]}))return g([8],{offset:1,mask:[8]}),{ext:"aac",mime:"audio/aac"};if(g([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(g([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(g([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const d=new stream.PassThrough;let m;m=stream.pipeline?stream.pipeline(readableStream,d,()=>{}):readableStream.pipe(d);const g=readableStream.read(minimumBytes)||readableStream.read()||Buffer$1.alloc(0);try{const w=await fromBuffer(g);d.fileType=w}catch(w){reject(w)}resolve(m)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get:()=>new Set(supported.extensions)}),Object.defineProperty(fileType,"mimeTypes",{get:()=>new Set(supported.mimeTypes)});var core=fileType,fileType$1=getDefaultExportFromCjs(core);function to(d,m){return d.then(function(g){return[null,g]}).catch(function(g){return[g,void 0]})}const writeFile=async()=>{throw new Error("Not supported")};function Mime$1(){this._types=Object.create(null),this._extensions=Object.create(null);for(let d=0;d<arguments.length;d++)this.define(arguments[d]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}Mime$1.prototype.define=function(d,m){for(let g in d){let w=d[g].map(function(I){return I.toLowerCase()});g=g.toLowerCase();for(let I=0;I<w.length;I++){const P=w[I];if(P[0]!=="*"){if(!m&&P in this._types)throw new Error('Attempt to change mapping for "'+P+'" extension from "'+this._types[P]+'" to "'+g+'". Pass `force=true` to allow this, otherwise remove "'+P+'" from the list of extensions for "'+g+'".');this._types[P]=g}}if(m||!this._extensions[g]){const I=w[0];this._extensions[g]=I[0]!=="*"?I:I.substr(1)}}},Mime$1.prototype.getType=function(d){let m=(d=String(d)).replace(/^.*[/\\]/,"").toLowerCase(),g=m.replace(/^.*\./,"").toLowerCase(),w=m.length<d.length;return(g.length<m.length-1||!w)&&this._types[g]||null},Mime$1.prototype.getExtension=function(d){return(d=/^\s*([^;\s]*)/.test(d)&&RegExp.$1)&&this._extensions[d.toLowerCase()]||null};var Mime_1=Mime$1,standard={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};let Mime=Mime_1;var lite=new Mime(standard),mime=getDefaultExportFromCjs(lite),HorizontalAlign,HorizontalAlign2,VerticalAlign,VerticalAlign2,BlendMode,BlendMode2;function srcOver(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a;return{r:(d.r*d.a+m.r*m.a*(1-d.a))/w,g:(d.g*d.a+m.g*m.a*(1-d.a))/w,b:(d.b*d.a+m.b*m.a*(1-d.a))/w,a:w}}function dstOver(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a;return{r:(m.r*m.a+d.r*d.a*(1-m.a))/w,g:(m.g*m.a+d.g*d.a*(1-m.a))/w,b:(m.b*m.a+d.b*d.a*(1-m.a))/w,a:w}}function multiply(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,$=d.b*d.a,F=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(I*F+I*(1-m.a)+F*(1-d.a))/w,g:(P*D+P*(1-m.a)+D*(1-d.a))/w,b:($*U+$*(1-m.a)+U*(1-d.a))/w,a:w}}function add(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,$=d.b*d.a;return{r:(I+m.r*m.a)/w,g:(P+m.g*m.a)/w,b:($+m.b*m.a)/w,a:w}}function screen(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,$=d.b*d.a,F=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(I*m.a+F*d.a-I*F+I*(1-m.a)+F*(1-d.a))/w,g:(P*m.a+D*d.a-P*D+P*(1-m.a)+D*(1-d.a))/w,b:($*m.a+U*d.a-$*U+$*(1-m.a)+U*(1-d.a))/w,a:w}}function overlay(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,$=d.b*d.a,F=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(2*F<=m.a?2*I*F+I*(1-m.a)+F*(1-d.a):I*(1+m.a)+F*(1+d.a)-2*F*I-m.a*d.a)/w,g:(2*D<=m.a?2*P*D+P*(1-m.a)+D*(1-d.a):P*(1+m.a)+D*(1+d.a)-2*D*P-m.a*d.a)/w,b:(2*U<=m.a?2*$*U+$*(1-m.a)+U*(1-d.a):$*(1+m.a)+U*(1+d.a)-2*U*$-m.a*d.a)/w,a:w}}function darken(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,$=d.b*d.a,F=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(Math.min(I*m.a,F*d.a)+I*(1-m.a)+F*(1-d.a))/w,g:(Math.min(P*m.a,D*d.a)+P*(1-m.a)+D*(1-d.a))/w,b:(Math.min($*m.a,U*d.a)+$*(1-m.a)+U*(1-d.a))/w,a:w}}function lighten(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,$=d.b*d.a,F=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(Math.max(I*m.a,F*d.a)+I*(1-m.a)+F*(1-d.a))/w,g:(Math.max(P*m.a,D*d.a)+P*(1-m.a)+D*(1-d.a))/w,b:(Math.max($*m.a,U*d.a)+$*(1-m.a)+U*(1-d.a))/w,a:w}}function hardLight(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,$=d.b*d.a,F=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(2*I<=d.a?2*I*F+I*(1-m.a)+F*(1-d.a):I*(1+m.a)+F*(1+d.a)-2*F*I-m.a*d.a)/w,g:(2*P<=d.a?2*P*D+P*(1-m.a)+D*(1-d.a):P*(1+m.a)+D*(1+d.a)-2*D*P-m.a*d.a)/w,b:(2*$<=d.a?2*$*U+$*(1-m.a)+U*(1-d.a):$*(1+m.a)+U*(1+d.a)-2*U*$-m.a*d.a)/w,a:w}}function difference(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,$=d.b*d.a,F=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(I+F-2*Math.min(I*m.a,F*d.a))/w,g:(P+D-2*Math.min(P*m.a,D*d.a))/w,b:($+U-2*Math.min($*m.a,U*d.a))/w,a:w}}function exclusion(d,m,g=1){d.a*=g;const w=m.a+d.a-m.a*d.a,I=d.r*d.a,P=d.g*d.a,$=d.b*d.a,F=m.r*m.a,D=m.g*m.a,U=m.b*m.a;return{r:(I*m.a+F*d.a-2*I*F+I*(1-m.a)+F*(1-d.a))/w,g:(P*m.a+D*d.a-2*P*D+P*(1-m.a)+D*(1-d.a))/w,b:($*m.a+U*d.a-2*$*U+$*(1-m.a)+U*(1-d.a))/w,a:w}}HorizontalAlign2=HorizontalAlign||(HorizontalAlign={}),HorizontalAlign2[HorizontalAlign2.LEFT=1]="LEFT",HorizontalAlign2[HorizontalAlign2.CENTER=2]="CENTER",HorizontalAlign2[HorizontalAlign2.RIGHT=4]="RIGHT",VerticalAlign2=VerticalAlign||(VerticalAlign={}),VerticalAlign2[VerticalAlign2.TOP=8]="TOP",VerticalAlign2[VerticalAlign2.MIDDLE=16]="MIDDLE",VerticalAlign2[VerticalAlign2.BOTTOM=32]="BOTTOM",BlendMode2=BlendMode||(BlendMode={}),BlendMode2.SRC_OVER="srcOver",BlendMode2.DST_OVER="dstOver",BlendMode2.MULTIPLY="multiply",BlendMode2.ADD="add",BlendMode2.SCREEN="screen",BlendMode2.OVERLAY="overlay",BlendMode2.DARKEN="darken",BlendMode2.LIGHTEN="lighten",BlendMode2.HARD_LIGHT="hardLight",BlendMode2.DIFFERENCE="difference",BlendMode2.EXCLUSION="exclusion";const names=[srcOver,dstOver,multiply,add,screen,overlay,darken,lighten,hardLight,difference,exclusion];var compositeModes=Object.freeze({__proto__:null,add,darken,difference,dstOver,exclusion,hardLight,lighten,multiply,names,overlay,screen,srcOver});function composite(d,m,g=0,w=0,I={}){if(!(m instanceof d.constructor))throw new Error("The source must be a Jimp image");if(typeof g!="number"||typeof w!="number")throw new Error("x and y must be numbers");const{mode:P=BlendMode.SRC_OVER}=I;let{opacitySource:$=1,opacityDest:F=1}=I;(typeof $!="number"||$<0||$>1)&&($=1),(typeof F!="number"||F<0||F>1)&&(F=1);const D=compositeModes[P];return g=Math.round(g),w=Math.round(w),F!==1&&d.scan((U,j,Z)=>{const G=d.bitmap.data[Z+3]*F;d.bitmap.data[Z+3]=G}),m.scan((U,j,Z)=>{const G=d.getPixelIndex(g+U,w+j,Edge.CROP);if(G===-1)return;const H=D({r:m.bitmap.data[Z+0]/255,g:m.bitmap.data[Z+1]/255,b:m.bitmap.data[Z+2]/255,a:m.bitmap.data[Z+3]/255},{r:d.bitmap.data[G+0]/255,g:d.bitmap.data[G+1]/255,b:d.bitmap.data[G+2]/255,a:d.bitmap.data[G+3]/255},$);d.bitmap.data[G+0]=limit255(255*H.r),d.bitmap.data[G+1]=limit255(255*H.g),d.bitmap.data[G+2]=limit255(255*H.b),d.bitmap.data[G+3]=limit255(255*H.a)}),d}var jpeg$1={parseSections:function(d,m){var g,w;for(d.setBigEndian(!0);d.remainingLength()>0&&w!==218;){if(d.nextUInt8()!==255)throw new Error("Invalid JPEG section offset");g=(w=d.nextUInt8())>=208&&w<=217||w===218?0:d.nextUInt16()-2,m(w,d.branch(0,g)),d.skip(g)}},getSizeFromSOFSection:function(d){return d.skip(1),{height:d.nextUInt16(),width:d.nextUInt16()}},getSectionName:function(d){var m,g;switch(d){case 216:m="SOI";break;case 196:m="DHT";break;case 219:m="DQT";break;case 221:m="DRI";break;case 218:m="SOS";break;case 254:m="COM";break;case 217:m="EOI";break;default:d>=224&&d<=239?(m="APP",g=d-224):d>=192&&d<=207&&d!==196&&d!==200&&d!==204?(m="SOF",g=d-192):d>=208&&d<=215&&(m="RST",g=d-208)}var w={name:m};return typeof g=="number"&&(w.index=g),w}};function readExifValue(d,m){switch(d){case 1:return m.nextUInt8();case 3:case 8:return m.nextUInt16();case 4:case 9:return m.nextUInt32();case 5:return[m.nextUInt32(),m.nextUInt32()];case 6:return m.nextInt8();case 10:return[m.nextInt32(),m.nextInt32()];case 11:return m.nextFloat();case 12:return m.nextDouble();default:throw new Error("Invalid format while decoding: "+d)}}function getBytesPerComponent(d){switch(d){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}}function readExifTag(d,m){var g,w,I=m.nextUInt16(),P=m.nextUInt16(),$=getBytesPerComponent(P),F=m.nextUInt32(),D=$*F;if(D>4&&(m=d.openWithOffset(m.nextUInt32())),P===2){var U=(g=m.nextString(F)).indexOf("\0");U!==-1&&(g=g.substr(0,U))}else if(P===7)g=m.nextBuffer(F);else if(P!==0)for(g=[],w=0;w<F;++w)g.push(readExifValue(P,m));return D<4&&m.skip(4-D),[I,g,P]}function readIFDSection(d,m,g){var w,I,P=m.nextUInt16();for(I=0;I<P;++I)g((w=readExifTag(d,m))[0],w[1],w[2])}function readHeader(d){if(d.nextString(6)!=="Exif\0\0")throw new Error("Invalid EXIF header");var m=d.mark(),g=d.nextUInt16();if(g===18761)d.setBigEndian(!1);else{if(g!==19789)throw new Error("Invalid TIFF header");d.setBigEndian(!0)}if(d.nextUInt16()!==42)throw new Error("Invalid TIFF data");return m}var exif$2={IFD0:1,IFD1:2,GPSIFD:3,SubIFD:4,InteropIFD:5,parseTags:function(d,m){var g,w,I,P;try{g=readHeader(d)}catch{return!1}var $=g.openWithOffset(d.nextUInt32()),F=this.IFD0;readIFDSection(g,$,function(W,q,Q){switch(W){case 34853:I=q[0];break;case 34665:w=q[0];break;default:m(F,W,q,Q)}});var D=$.nextUInt32();if(D!==0){var U=g.openWithOffset(D);readIFDSection(g,U,m.bind(null,this.IFD1))}if(I){var j=g.openWithOffset(I);readIFDSection(g,j,m.bind(null,this.GPSIFD))}if(w){var Z=g.openWithOffset(w),G=this.InteropIFD;readIFDSection(g,Z,function(W,q,Q){W===40965?P=q[0]:m(G,W,q,Q)})}if(P){var H=g.openWithOffset(P);readIFDSection(g,H,m.bind(null,this.InteropIFD))}return!0}};function parseNumber(d){return parseInt(d,10)}var hours=3600,minutes=60;function parseDateTimeParts(d,m){d=d.map(parseNumber),m=m.map(parseNumber);var g=d[0],w=d[1]-1,I=d[2],P=m[0],$=m[1],F=m[2];return Date.UTC(g,w,I,P,$,F,0)/1e3}function parseDateWithTimezoneFormat(d){var m=d.substr(0,10).split("-"),g=d.substr(11,8).split(":"),w=d.substr(19,6).split(":").map(parseNumber),I=w[0]*hours+w[1]*minutes,P=parseDateTimeParts(m,g);if(typeof(P-=I)=="number"&&!isNaN(P))return P}function parseDateWithSpecFormat(d){var m=d.split(" "),g=parseDateTimeParts(m[0].split(":"),m[1].split(":"));if(typeof g=="number"&&!isNaN(g))return g}function parseExifDate(d){var m=d.length===19&&d.charAt(4)===":";return d.length===25&&d.charAt(10)==="T"?parseDateWithTimezoneFormat(d):m?parseDateWithSpecFormat(d):void 0}var date$1={parseDateWithSpecFormat,parseDateWithTimezoneFormat,parseExifDate},exif$1=exif$2,date=date$1,degreeTags=[{section:exif$1.GPSIFD,type:2,name:"GPSLatitude",refType:1,refName:"GPSLatitudeRef",posVal:"N"},{section:exif$1.GPSIFD,type:4,name:"GPSLongitude",refType:3,refName:"GPSLongitudeRef",posVal:"E"}],dateTags=[{section:exif$1.SubIFD,type:306,name:"ModifyDate"},{section:exif$1.SubIFD,type:36867,name:"DateTimeOriginal"},{section:exif$1.SubIFD,type:36868,name:"CreateDate"},{section:exif$1.SubIFD,type:306,name:"ModifyDate"}],simplify$1={castDegreeValues:function(d,m){degreeTags.forEach(function(g){var w=d(g);if(w){var I=d({section:g.section,type:g.refType,name:g.refName})===g.posVal?1:-1,P=(w[0]+w[1]/60+w[2]/3600)*I;m(g,P)}})},castDateValues:function(d,m){dateTags.forEach(function(g){var w=d(g);if(w){var I=date.parseExifDate(w);I!==void 0&&m(g,I)}})},simplifyValue:function(d,m){return Array.isArray(d)&&(d=d.map(function(g){return m===10||m===5?g[0]/g[1]:g})).length===1&&(d=d[0]),d}},exifTags,hasRequiredExifTags;function requireExifTags(){return hasRequiredExifTags?exifTags:(hasRequiredExifTags=1,exifTags={exif:{1:"InteropIndex",2:"InteropVersion",11:"ProcessingSoftware",254:"SubfileType",255:"OldSubfileType",256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Thresholding",264:"CellWidth",265:"CellLength",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",285:"PageName",286:"XPosition",287:"YPosition",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",292:"T4Options",293:"T6Options",296:"ResolutionUnit",297:"PageNumber",300:"ColorResponseUnit",301:"TransferFunction",305:"Software",306:"ModifyDate",315:"Artist",316:"HostComputer",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFD",332:"InkSet",333:"InkNames",334:"NumberofInks",336:"DotRange",337:"TargetPrinter",338:"ExtraSamples",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",435:"T82Options",437:"JPEGTables",512:"JPEGProc",513:"ThumbnailOffset",514:"ThumbnailLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"ApplicationNotes",999:"USPTOMiscellaneous",4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight",18246:"Rating",18247:"XP_DIP_XML",18248:"StitchInfo",18249:"RatingPercent",32781:"ImageID",32931:"WangTag1",32932:"WangAnnotation",32933:"WangTag3",32934:"WangTag4",32995:"Matteing",32996:"DataType",32997:"ImageDepth",32998:"TileDepth",33405:"Model2",33421:"CFARepeatPatternDim",33422:"CFAPattern2",33423:"BatteryLevel",33424:"KodakIFD",33432:"Copyright",33434:"ExposureTime",33437:"FNumber",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"PixelScale",33589:"AdventScale",33590:"AdventRevision",33628:"UIC1Tag",33629:"UIC2Tag",33630:"UIC3Tag",33631:"UIC4Tag",33723:"IPTC-NAA",33918:"IntergraphPacketData",33919:"IntergraphFlagRegisters",33920:"IntergraphMatrix",33921:"INGRReserved",33922:"ModelTiePoint",34016:"Site",34017:"ColorSequence",34018:"IT8Header",34019:"RasterPadding",34020:"BitsPerRunLength",34021:"BitsPerExtendedRunLength",34022:"ColorTable",34023:"ImageColorIndicator",34024:"BackgroundColorIndicator",34025:"ImageColorValue",34026:"BackgroundColorValue",34027:"PixelIntensityRange",34028:"TransparencyIndicator",34029:"ColorCharacterization",34030:"HCUsage",34031:"TrapIndicator",34032:"CMYKEquivalent",34118:"SEMInfo",34152:"AFCP_IPTC",34232:"PixelMagicJBIGOptions",34264:"ModelTransform",34306:"WB_GRGBLevels",34310:"LeafData",34377:"PhotoshopSettings",34665:"ExifOffset",34675:"ICC_Profile",34687:"TIFF_FXExtensions",34688:"MultiProfiles",34689:"SharedData",34690:"T88Options",34732:"ImageLayer",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34850:"ExposureProgram",34852:"SpectralSensitivity",34853:"GPSInfo",34855:"ISO",34856:"Opto-ElectricConvFactor",34857:"Interlace",34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",34908:"FaxRecvParams",34909:"FaxSubAddress",34910:"FaxRecvTime",34954:"LeafSubIFD",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"CreateDate",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureCompensation",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37387:"FlashEnergy",37388:"SpatialFrequencyResponse",37389:"Noise",37390:"FocalPlaneXResolution",37391:"FocalPlaneYResolution",37392:"FocalPlaneResolutionUnit",37393:"ImageNumber",37394:"SecurityClassification",37395:"ImageHistory",37396:"SubjectArea",37397:"ExposureIndex",37398:"TIFF-EPStandardID",37399:"SensingMethod",37434:"CIP3DataFile",37435:"CIP3Sheet",37436:"CIP3Side",37439:"StoNits",37500:"MakerNote",37510:"UserComment",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37679:"MSDocumentText",37680:"MSPropertySetStorage",37681:"MSDocumentTextPosition",37724:"ImageSourceData",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",40960:"FlashpixVersion",40961:"ColorSpace",40962:"ExifImageWidth",40963:"ExifImageHeight",40964:"RelatedSoundFile",40965:"InteropOffset",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41485:"Noise",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41489:"ImageNumber",41490:"SecurityClassification",41491:"ImageHistory",41492:"SubjectLocation",41493:"ExposureIndex",41494:"TIFF-EPStandardID",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFormat",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"OwnerName",42033:"SerialNumber",42034:"LensInfo",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42112:"GDALMetadata",42113:"GDALNoData",42240:"Gamma",44992:"ExpandSoftware",44993:"ExpandLens",44994:"ExpandFilm",44995:"ExpandFilterLens",44996:"ExpandScanner",44997:"ExpandFlashLamp",48129:"PixelFormat",48130:"Transformation",48131:"Uncompressed",48132:"ImageType",48256:"ImageWidth",48257:"ImageHeight",48258:"WidthResolution",48259:"HeightResolution",48320:"ImageOffset",48321:"ImageByteCount",48322:"AlphaOffset",48323:"AlphaByteCount",48324:"ImageDataDiscard",48325:"AlphaDataDiscard",50215:"OceScanjobDesc",50216:"OceApplicationSelector",50217:"OceIDNumber",50218:"OceImageLogic",50255:"Annotations",50341:"PrintIM",50560:"USPTOOriginalContentType",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50739:"ShadowScale",50740:"DNGPrivateData",50741:"MakerNoteSafety",50752:"RawImageSegmentation",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50781:"RawDataUniqueID",50784:"AliasLayerMetadata",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50829:"ActiveArea",50830:"MaskedAreas",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50935:"NoiseReductionApplied",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:"ProfileEmbedPolicy",50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:"PreviewColorSpace",50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50974:"SubTileBlockSize",50975:"RowInterleaveFactor",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51008:"OpcodeList1",51009:"OpcodeList2",51022:"OpcodeList3",51041:"NoiseProfile",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:"ProfileHueSatMapEncoding",51108:"ProfileLookTableEncoding",51109:"BaselineExposureOffset",51110:"DefaultBlackRender",51111:"NewRawImageDigest",51112:"RawToPreviewGain",51125:"DefaultUserCrop",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65024:"KDC_IFD",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"}})}var jpeg=jpeg$1,exif=exif$2,simplify=simplify$1;function ExifResult(d,m,g,w,I,P,$){this.startMarker=d,this.tags=m,this.imageSize=g,this.thumbnailOffset=w,this.thumbnailLength=I,this.thumbnailType=P,this.app1Offset=$}function Parser$1(d){this.stream=d,this.flags={readBinaryTags:!1,resolveTagNames:!0,simplifyValues:!0,imageSize:!0,hidePointers:!0,returnTags:!0}}ExifResult.prototype={hasThumbnail:function(d){return!(!this.thumbnailOffset||!this.thumbnailLength)&&(typeof d!="string"||(d.toLowerCase().trim()==="image/jpeg"?this.thumbnailType===6:d.toLowerCase().trim()==="image/tiff"&&this.thumbnailType===1))},getThumbnailOffset:function(){return this.app1Offset+6+this.thumbnailOffset},getThumbnailLength:function(){return this.thumbnailLength},getThumbnailBuffer:function(){return this._getThumbnailStream().nextBuffer(this.thumbnailLength)},_getThumbnailStream:function(){return this.startMarker.openWithOffset(this.getThumbnailOffset())},getImageSize:function(){return this.imageSize},getThumbnailSize:function(){var d,m=this._getThumbnailStream();return jpeg.parseSections(m,function(g,w){jpeg.getSectionName(g).name==="SOF"&&(d=jpeg.getSizeFromSOFSection(w))}),d}},Parser$1.prototype={enableBinaryFields:function(d){return this.flags.readBinaryTags=!!d,this},enablePointers:function(d){return this.flags.hidePointers=!d,this},enableTagNames:function(d){return this.flags.resolveTagNames=!!d,this},enableImageSize:function(d){return this.flags.imageSize=!!d,this},enableReturnTags:function(d){return this.flags.returnTags=!!d,this},enableSimpleValues:function(d){return this.flags.simplifyValues=!!d,this},parse:function(){var d,m,g,w,I,P,$,F,D,U=this.stream.mark(),j=U.openWithOffset(0),Z=this.flags;return Z.resolveTagNames&&($=requireExifTags()),Z.resolveTagNames?(d={},F=function(G){return d[G.name]},D=function(G,H){d[G.name]=H}):(d=[],F=function(G){var H;for(H=0;H<d.length;++H)if(d[H].type===G.type&&d[H].section===G.section)return d.value},D=function(G,H){var W;for(W=0;W<d.length;++W)if(d[W].type===G.type&&d[W].section===G.section)return void(d.value=H)}),jpeg.parseSections(j,function(G,H){var W=H.offsetFrom(U);G===225?exif.parseTags(H,function(q,Q,et,J){if(Z.readBinaryTags||J!==7){if(Q===513){if(g=et[0],Z.hidePointers)return}else if(Q===514){if(w=et[0],Z.hidePointers)return}else if(Q===259&&(I=et[0],Z.hidePointers))return;if(Z.returnTags)if(Z.simplifyValues&&(et=simplify.simplifyValue(et,J)),Z.resolveTagNames){var V=(q===exif.GPSIFD?$.gps:$.exif)[Q];V||(V=$.exif[Q]),d.hasOwnProperty(V)||(d[V]=et)}else d.push({section:q,type:Q,value:et})}})&&(P=W):Z.imageSize&&jpeg.getSectionName(G).name==="SOF"&&(m=jpeg.getSizeFromSOFSection(H))}),Z.simplifyValues&&(simplify.castDegreeValues(F,D),simplify.castDateValues(F,D)),new ExifResult(U,d,m,g,w,I,P)}};var parser=Parser$1,domBufferstream,hasRequiredDomBufferstream,bufferstream,hasRequiredBufferstream;function requireDomBufferstream(){if(hasRequiredDomBufferstream)return domBufferstream;function d(m,g,w,I,P,$){this.global=P,g=g||0,w=w||m.byteLength-g,this.arrayBuffer=m.slice(g,g+w),this.view=new P.DataView(this.arrayBuffer,0,this.arrayBuffer.byteLength),this.setBigEndian(I),this.offset=0,this.parentOffset=($||0)+g}return hasRequiredDomBufferstream=1,d.prototype={setBigEndian:function(m){this.littleEndian=!m},nextUInt8:function(){var m=this.view.getUint8(this.offset);return this.offset+=1,m},nextInt8:function(){var m=this.view.getInt8(this.offset);return this.offset+=1,m},nextUInt16:function(){var m=this.view.getUint16(this.offset,this.littleEndian);return this.offset+=2,m},nextUInt32:function(){var m=this.view.getUint32(this.offset,this.littleEndian);return this.offset+=4,m},nextInt16:function(){var m=this.view.getInt16(this.offset,this.littleEndian);return this.offset+=2,m},nextInt32:function(){var m=this.view.getInt32(this.offset,this.littleEndian);return this.offset+=4,m},nextFloat:function(){var m=this.view.getFloat32(this.offset,this.littleEndian);return this.offset+=4,m},nextDouble:function(){var m=this.view.getFloat64(this.offset,this.littleEndian);return this.offset+=8,m},nextBuffer:function(m){var g=this.arrayBuffer.slice(this.offset,this.offset+m);return this.offset+=m,g},remainingLength:function(){return this.arrayBuffer.byteLength-this.offset},nextString:function(m){var g=this.arrayBuffer.slice(this.offset,this.offset+m);return g=String.fromCharCode.apply(null,new this.global.Uint8Array(g)),this.offset+=m,g},mark:function(){var m=this;return{openWithOffset:function(g){return g=(g||0)+this.offset,new d(m.arrayBuffer,g,m.arrayBuffer.byteLength-g,!m.littleEndian,m.global,m.parentOffset)},offset:this.offset,getParentOffset:function(){return m.parentOffset}}},offsetFrom:function(m){return this.parentOffset+this.offset-(m.offset+m.getParentOffset())},skip:function(m){this.offset+=m},branch:function(m,g){return g=typeof g=="number"?g:this.arrayBuffer.byteLength-(this.offset+m),new d(this.arrayBuffer,this.offset+m,g,!this.littleEndian,this.global,this.parentOffset)}},domBufferstream=d}function requireBufferstream(){if(hasRequiredBufferstream)return bufferstream;function d(m,g,w,I){this.buffer=m,this.offset=g||0,w=typeof w=="number"?w:m.length,this.endPosition=this.offset+w,this.setBigEndian(I)}return hasRequiredBufferstream=1,d.prototype={setBigEndian:function(m){this.bigEndian=!!m},nextUInt8:function(){var m=this.buffer.readUInt8(this.offset);return this.offset+=1,m},nextInt8:function(){var m=this.buffer.readInt8(this.offset);return this.offset+=1,m},nextUInt16:function(){var m=this.bigEndian?this.buffer.readUInt16BE(this.offset):this.buffer.readUInt16LE(this.offset);return this.offset+=2,m},nextUInt32:function(){var m=this.bigEndian?this.buffer.readUInt32BE(this.offset):this.buffer.readUInt32LE(this.offset);return this.offset+=4,m},nextInt16:function(){var m=this.bigEndian?this.buffer.readInt16BE(this.offset):this.buffer.readInt16LE(this.offset);return this.offset+=2,m},nextInt32:function(){var m=this.bigEndian?this.buffer.readInt32BE(this.offset):this.buffer.readInt32LE(this.offset);return this.offset+=4,m},nextFloat:function(){var m=this.bigEndian?this.buffer.readFloatBE(this.offset):this.buffer.readFloatLE(this.offset);return this.offset+=4,m},nextDouble:function(){var m=this.bigEndian?this.buffer.readDoubleBE(this.offset):this.buffer.readDoubleLE(this.offset);return this.offset+=8,m},nextBuffer:function(m){var g=this.buffer.slice(this.offset,this.offset+m);return this.offset+=m,g},remainingLength:function(){return this.endPosition-this.offset},nextString:function(m){var g=this.buffer.toString("utf8",this.offset,this.offset+m);return this.offset+=m,g},mark:function(){var m=this;return{openWithOffset:function(g){return g=(g||0)+this.offset,new d(m.buffer,g,m.endPosition-g,m.bigEndian)},offset:this.offset}},offsetFrom:function(m){return this.offset-m.offset},skip:function(m){this.offset+=m},branch:function(m,g){return g=typeof g=="number"?g:this.endPosition-(this.offset+m),new d(this.buffer,this.offset+m,g,this.bigEndian)}},bufferstream=d}var Parser=parser;function getGlobal(){return(0,eval)("this")}var exifParser={create:function(d,m){if(d instanceof(m=m||getGlobal()).ArrayBuffer){var g=requireDomBufferstream();return new Parser(new g(d,0,d.byteLength,!0,m))}var w=requireBufferstream();return new Parser(new w(d,0,d.length,!0))}},EXIFParser=getDefaultExportFromCjs(exifParser);function getExifOrientation(d){const m=d._exif;return m&&m.tags&&m.tags.Orientation||1}function getExifOrientationTransformation(d){const m=d.bitmap.width,g=d.bitmap.height;switch(getExifOrientation(d)){case 1:default:return null;case 2:return function(w,I){return[m-w-1,I]};case 3:return function(w,I){return[m-w-1,g-I-1]};case 4:return function(w,I){return[w,g-I-1]};case 5:return function(w,I){return[I,w]};case 6:return function(w,I){return[I,g-w-1]};case 7:return function(w,I){return[m-I-1,g-w-1]};case 8:return function(w,I){return[m-I-1,w]}}}function transformBitmap(d,m,g,w){const I=d.bitmap.data,P=d.bitmap.width,$=Buffer$1.alloc(I.length);for(let F=0;F<m;F++)for(let D=0;D<g;D++){const[U,j]=w(F,D),Z=m*D+F<<2,G=P*j+U<<2,H=I.readUInt32BE(G);$.writeUInt32BE(H,Z)}d.bitmap.data=$,d.bitmap.width=m,d.bitmap.height=g,d._exif.tags.Orientation=1}function exifRotate(d){if(getExifOrientation(d)<2)return;const m=getExifOrientationTransformation(d),g=getExifOrientation(d)>4,w=g?d.bitmap.height:d.bitmap.width,I=g?d.bitmap.width:d.bitmap.height;m&&transformBitmap(d,w,I,m)}async function attemptExifRotate(d,m){try{d._exif=EXIFParser.create(m).parse(),exifRotate(d)}catch{}}var __defProp$2=Object.defineProperty,__defNormalProp$2=(d,m,g)=>m in d?__defProp$2(d,m,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[m]=g,__publicField$2=(d,m,g)=>__defNormalProp$2(d,typeof m!="symbol"?m+"":m,g);const emptyBitmap={data:Buffer$1.alloc(0),width:0,height:0};function bufferFromArrayBuffer(d){const m=Buffer$1.alloc(d.byteLength),g=new Uint8Array(d);for(let w=0;w<m.length;++w)m[w]=g[w];return m}function createJimp({plugins:d,formats:m}={}){const g=d||[],w=(m||[]).map(P=>P()),I=class{constructor(P=emptyBitmap){if(__publicField$2(this,"bitmap",emptyBitmap),__publicField$2(this,"background",0),__publicField$2(this,"formats",[]),__publicField$2(this,"mime"),this.formats=w,"data"in P)this.bitmap=P;else if(this.bitmap={data:Buffer$1.alloc(P.width*P.height*4),width:P.width,height:P.height},P.color){this.background=typeof P.color=="string"?cssColorToHex(P.color):P.color;for(let $=0;$<this.bitmap.data.length;$+=4)this.bitmap.data.writeUInt32BE(this.background,$)}for(const $ of g)for(const F in $)this[F]=(...D)=>{var j;const U=(j=$[F])==null?void 0:j.call($,this,...D);return typeof U=="object"&&"bitmap"in U?(this.bitmap=U.bitmap,this):U}}static async read(P,$){if(Buffer$1.isBuffer(P)||P instanceof ArrayBuffer)return this.fromBuffer(P);const[F,D]=await to(fetch(P));if(F)throw new Error(`Could not load Buffer from URL: ${P}`);if(!D.ok)throw new Error(`HTTP Status ${D.status} for url ${P}`);const[U,j]=await to(D.arrayBuffer());if(U)throw new Error(`Could not load Buffer from ${P}`);const Z=bufferFromArrayBuffer(j);return this.fromBuffer(Z,$)}static fromBitmap(P){let $;if(P.data instanceof Buffer$1&&($=Buffer$1.from(P.data)),(P.data instanceof Uint8Array||P.data instanceof Uint8ClampedArray)&&($=Buffer$1.from(P.data.buffer)),Array.isArray(P.data)&&($=Buffer$1.concat(P.data.map(F=>Buffer$1.from(F.toString(16).padStart(8,"0"),"hex")))),!$)throw new Error("data must be a Buffer");if(typeof P.height!="number"||typeof P.width!="number")throw new Error("bitmap must have width and height");return new I({height:P.height,width:P.width,data:$})}static async fromBuffer(P,$){const F=P instanceof ArrayBuffer?bufferFromArrayBuffer(P):P,D=await fileType$1.fromBuffer(F);if(!D||!D.mime)throw new Error("Could not find MIME for Buffer");const U=w.find(Z=>Z.mime===D.mime);if(!U||!U.decode)throw new Error(`Mime type ${D.mime} does not support decoding`);const j=new I(await U.decode(F,$==null?void 0:$[U.mime]));return j.mime=D.mime,attemptExifRotate(j,F),j}inspect(){return"<Jimp "+(this.bitmap===emptyBitmap?"pending...":this.bitmap.width+"x"+this.bitmap.height)+">"}toString(){return"[object Jimp]"}get width(){return this.bitmap.width}get height(){return this.bitmap.height}async getBuffer(P,$){const F=this.formats.find(U=>U.mime===P);if(!F||!F.encode)throw new Error(`Unsupported MIME type: ${P}`);let D;return F.hasAlpha?D=this:(D=new I({width:this.bitmap.width,height:this.bitmap.height,color:this.background}),composite(D,this)),F.encode(D.bitmap,$)}async getBase64(P,$){return"data:"+P+";base64,"+(await this.getBuffer(P,$)).toString("base64")}async write(P,$){const F=mime.getType(P);await writeFile(P,await this.getBuffer(F,$))}clone(){return new I({...this.bitmap,data:Buffer$1.from(this.bitmap.data)})}getPixelIndex(P,$,F){let D,U;if(F||(F=Edge.EXTEND),typeof P!="number"||typeof $!="number")throw new Error("x and y must be numbers");D=P=Math.round(P),U=$=Math.round($),F===Edge.EXTEND&&(P<0&&(D=0),P>=this.bitmap.width&&(D=this.bitmap.width-1),$<0&&(U=0),$>=this.bitmap.height&&(U=this.bitmap.height-1)),F===Edge.WRAP&&(P<0&&(D=this.bitmap.width+P),P>=this.bitmap.width&&(D=P%this.bitmap.width),$<0&&(U=this.bitmap.height+$),$>=this.bitmap.height&&(U=$%this.bitmap.height));let j=this.bitmap.width*U+D<<2;return(D<0||D>=this.bitmap.width)&&(j=-1),(U<0||U>=this.bitmap.height)&&(j=-1),j}getPixelColor(P,$){if(typeof P!="number"||typeof $!="number")throw new Error("x and y must be numbers");const F=this.getPixelIndex(P,$);return this.bitmap.data.readUInt32BE(F)}setPixelColor(P,$,F){if(typeof P!="number"||typeof $!="number"||typeof F!="number")throw new Error("hex, x and y must be numbers");const D=this.getPixelIndex($,F);return this.bitmap.data.writeUInt32BE(P,D),this}hasAlpha(){const{width:P,height:$,data:F}=this.bitmap,D=P*$<<2;for(let U=3;U<D;U+=4)if(F[U]!==255)return!0;return!1}composite(P,$=0,F=0,D={}){return composite(this,P,$,F,D)}scan(P,$,F,D,U){return scan(this,P,$,F,D,U)}scanIterator(P=0,$=0,F=this.bitmap.width,D=this.bitmap.height){if(typeof P!="number"||typeof $!="number")throw new Error("x and y must be numbers");if(typeof F!="number"||typeof D!="number")throw new Error("w and h must be numbers");return scanIterator(this,P,$,F,D)}};return I}var ResizeStrategy,ResizeStrategy2;function Resize(d,m,g,w,I,P,$){this.widthOriginal=Math.abs(Math.floor(d)||0),this.heightOriginal=Math.abs(Math.floor(m)||0),this.targetWidth=Math.abs(Math.floor(g)||0),this.targetHeight=Math.abs(Math.floor(w)||0),this.colorChannels=I?4:3,this.interpolationPass=!!P,this.resizeCallback=typeof $=="function"?$:function(){},this.targetWidthMultipliedByChannels=this.targetWidth*this.colorChannels,this.originalWidthMultipliedByChannels=this.widthOriginal*this.colorChannels,this.originalHeightMultipliedByChannels=this.heightOriginal*this.colorChannels,this.widthPassResultSize=this.targetWidthMultipliedByChannels*this.heightOriginal,this.finalResultSize=this.targetWidthMultipliedByChannels*this.targetHeight,this.initialize()}ResizeStrategy2=ResizeStrategy||(ResizeStrategy={}),ResizeStrategy2.NEAREST_NEIGHBOR="nearestNeighbor",ResizeStrategy2.BILINEAR="bilinearInterpolation",ResizeStrategy2.BICUBIC="bicubicInterpolation",ResizeStrategy2.HERMITE="hermiteInterpolation",ResizeStrategy2.BEZIER="bezierInterpolation",Resize.prototype.initialize=function(){if(!(this.widthOriginal>0&&this.heightOriginal>0&&this.targetWidth>0&&this.targetHeight>0))throw console.log(this),new Error("Invalid settings specified for the resizer.");this.configurePasses()},Resize.prototype.configurePasses=function(){this.widthOriginal===this.targetWidth?this.resizeWidth=this.bypassResizer:(this.ratioWeightWidthPass=this.widthOriginal/this.targetWidth,this.ratioWeightWidthPass<1&&this.interpolationPass?(this.initializeFirstPassBuffers(!0),this.resizeWidth=this.colorChannels===4?this.resizeWidthInterpolatedRGBA:this.resizeWidthInterpolatedRGB):(this.initializeFirstPassBuffers(!1),this.resizeWidth=this.colorChannels===4?this.resizeWidthRGBA:this.resizeWidthRGB)),this.heightOriginal===this.targetHeight?this.resizeHeight=this.bypassResizer:(this.ratioWeightHeightPass=this.heightOriginal/this.targetHeight,this.ratioWeightHeightPass<1&&this.interpolationPass?(this.initializeSecondPassBuffers(!0),this.resizeHeight=this.resizeHeightInterpolated):(this.initializeSecondPassBuffers(!1),this.resizeHeight=this.colorChannels===4?this.resizeHeightRGBA:this.resizeHeightRGB))},Resize.prototype._resizeWidthInterpolatedRGBChannels=function(d,m){const g=m?4:3,w=this.ratioWeightWidthPass,I=this.widthBuffer;let P,$,F=0,D=0,U=0,j=0,Z=0;for(P=0;F<1/3;P+=g,F+=w)for(D=P,U=0;D<this.widthPassResultSize;U+=this.originalWidthMultipliedByChannels,D+=this.targetWidthMultipliedByChannels)I[D]=d[U],I[D+1]=d[U+1],I[D+2]=d[U+2],m&&(I[D+3]=d[U+3]);for(F-=1/3,$=this.widthOriginal-1;F<$;P+=g,F+=w)for(Z=F%1,j=1-Z,D=P,U=Math.floor(F)*g;D<this.widthPassResultSize;U+=this.originalWidthMultipliedByChannels,D+=this.targetWidthMultipliedByChannels)I[D+0]=d[U+0]*j+d[U+g+0]*Z,I[D+1]=d[U+1]*j+d[U+g+1]*Z,I[D+2]=d[U+2]*j+d[U+g+2]*Z,m&&(I[D+3]=d[U+3]*j+d[U+g+3]*Z);for($=this.originalWidthMultipliedByChannels-g;P<this.targetWidthMultipliedByChannels;P+=g)for(D=P,U=$;D<this.widthPassResultSize;U+=this.originalWidthMultipliedByChannels,D+=this.targetWidthMultipliedByChannels)I[D]=d[U],I[D+1]=d[U+1],I[D+2]=d[U+2],m&&(I[D+3]=d[U+3]);return I},Resize.prototype._resizeWidthRGBChannels=function(d,m){const g=m?4:3,w=this.ratioWeightWidthPass,I=1/w,P=this.originalWidthMultipliedByChannels-g+1,$=this.targetWidthMultipliedByChannels-g+1,F=this.outputWidthWorkBench,D=this.widthBuffer,U=this.outputWidthWorkBenchOpaquePixelsCount;let j=0,Z=0,G=0,H=0,W=0,q=0,Q=0,et=1,J=0,V=0,rt=0,X=0;do{for(W=0;W<this.originalHeightMultipliedByChannels;)F[W++]=0,F[W++]=0,F[W++]=0,m&&(F[W++]=0,U[W/g-1]=0);j=w;do{for(Z=1+G-H,et=Math.min(j,Z),W=0,q=G;W<this.originalHeightMultipliedByChannels;q+=P)J=d[q],V=d[++q],rt=d[++q],X=m?d[++q]:255,F[W++]+=(X?J:0)*et,F[W++]+=(X?V:0)*et,F[W++]+=(X?rt:0)*et,m&&(F[W++]+=X*et,U[W/g-1]+=X?et:0);if(!(j>=Z)){H+=j;break}G+=g,H=G,j-=Z}while(j>0&&G<this.originalWidthMultipliedByChannels);for(W=0,q=Q;W<this.originalHeightMultipliedByChannels;q+=$)j=m?U[W/g]:1,et=m?j?1/j:0:I,D[q]=F[W++]*et,D[++q]=F[W++]*et,D[++q]=F[W++]*et,m&&(D[++q]=F[W++]*I);Q+=g}while(Q<this.targetWidthMultipliedByChannels);return D},Resize.prototype._resizeHeightRGBChannels=function(d,m){const g=this.ratioWeightHeightPass,w=1/g,I=this.outputHeightWorkBench,P=this.heightBuffer,$=this.outputHeightWorkBenchOpaquePixelsCount;let F=0,D=0,U=0,j=0,Z=0,G=0,H=0,W=1,q=0,Q=0,et=0,J=0;do{for(Z=0;Z<this.targetWidthMultipliedByChannels;)I[Z++]=0,I[Z++]=0,I[Z++]=0,m&&(I[Z++]=0,$[Z/4-1]=0);F=g;do{for(D=1+U-j,W=Math.min(F,D),H=U,Z=0;Z<this.targetWidthMultipliedByChannels;)q=d[H++],Q=d[H++],et=d[H++],J=m?d[H++]:255,I[Z++]+=(J?q:0)*W,I[Z++]+=(J?Q:0)*W,I[Z++]+=(J?et:0)*W,m&&(I[Z++]+=J*W,$[Z/4-1]+=J?W:0);if(!(F>=D)){j+=F;break}U=H,j=U,F-=D}while(F>0&&U<this.widthPassResultSize);for(Z=0;Z<this.targetWidthMultipliedByChannels;)F=m?$[Z/4]:1,W=m?F?1/F:0:w,P[G++]=Math.round(I[Z++]*W),P[G++]=Math.round(I[Z++]*W),P[G++]=Math.round(I[Z++]*W),m&&(P[G++]=Math.round(I[Z++]*w))}while(G<this.finalResultSize);return P},Resize.prototype.resizeWidthInterpolatedRGB=function(d){return this._resizeWidthInterpolatedRGBChannels(d,!1)},Resize.prototype.resizeWidthInterpolatedRGBA=function(d){return this._resizeWidthInterpolatedRGBChannels(d,!0)},Resize.prototype.resizeWidthRGB=function(d){return this._resizeWidthRGBChannels(d,!1)},Resize.prototype.resizeWidthRGBA=function(d){return this._resizeWidthRGBChannels(d,!0)},Resize.prototype.resizeHeightInterpolated=function(d){const m=this.ratioWeightHeightPass,g=this.heightBuffer;let w,I=0,P=0,$=0,F=0,D=0,U=0,j=0;for(;I<1/3;I+=m)for($=0;$<this.targetWidthMultipliedByChannels;)g[P++]=Math.round(d[$++]);for(I-=1/3,w=this.heightOriginal-1;I<w;I+=m)for(j=I%1,U=1-j,F=Math.floor(I)*this.targetWidthMultipliedByChannels,D=F+this.targetWidthMultipliedByChannels,$=0;$<this.targetWidthMultipliedByChannels;++$)g[P++]=Math.round(d[F++]*U+d[D++]*j);for(;P<this.finalResultSize;)for($=0,F=w*this.targetWidthMultipliedByChannels;$<this.targetWidthMultipliedByChannels;++$)g[P++]=Math.round(d[F++]);return g},Resize.prototype.resizeHeightRGB=function(d){return this._resizeHeightRGBChannels(d,!1)},Resize.prototype.resizeHeightRGBA=function(d){return this._resizeHeightRGBChannels(d,!0)},Resize.prototype.resize=function(d){this.resizeCallback(this.resizeHeight(this.resizeWidth(d)))},Resize.prototype.bypassResizer=function(d){return d},Resize.prototype.initializeFirstPassBuffers=function(d){this.widthBuffer=this.generateFloatBuffer(this.widthPassResultSize),d||(this.outputWidthWorkBench=this.generateFloatBuffer(this.originalHeightMultipliedByChannels),this.colorChannels>3&&(this.outputWidthWorkBenchOpaquePixelsCount=this.generateFloat64Buffer(this.heightOriginal)))},Resize.prototype.initializeSecondPassBuffers=function(d){this.heightBuffer=this.generateUint8Buffer(this.finalResultSize),d||(this.outputHeightWorkBench=this.generateFloatBuffer(this.targetWidthMultipliedByChannels),this.colorChannels>3&&(this.outputHeightWorkBenchOpaquePixelsCount=this.generateFloat64Buffer(this.targetWidth)))},Resize.prototype.generateFloatBuffer=function(d){try{return new Float32Array(d)}catch(m){return console.error(m),[]}},Resize.prototype.generateFloat64Buffer=function(d){try{return new Float64Array(d)}catch(m){return console.error(m),[]}},Resize.prototype.generateUint8Buffer=function(d){try{return new Uint8Array(d)}catch(m){return console.error(m),[]}};const operations={nearestNeighbor(d,m){const g=d.width,w=d.height,I=m.width,P=m.height,$=d.data,F=m.data;for(let D=0;D<P;D++)for(let U=0;U<I;U++){let j=4*(D*I+U),Z=4*(Math.floor(D*w/P)*g+Math.floor(U*g/I));F[j++]=$[Z++],F[j++]=$[Z++],F[j++]=$[Z++],F[j++]=$[Z++]}},bilinearInterpolation(d,m){const g=d.width,w=d.height,I=m.width,P=m.height,$=d.data,F=m.data,D=function(j,Z,G,H,W){return Z===H?G:Math.round((j-Z)*W+(H-j)*G)},U=function(j,Z,G,H,W,q,Q,et){let J=4*(Q*g+H)+Z,V=4*(Q*g+W)+Z;const rt=D(G,H,$[J],W,$[V]);if(et===Q)F[j+Z]=rt;else{J=4*(et*g+H)+Z,V=4*(et*g+W)+Z;const X=D(G,H,$[J],W,$[V]);F[j+Z]=D(q,Q,rt,et,X)}};for(let j=0;j<P;j++)for(let Z=0;Z<I;Z++){const G=4*(j*I+Z),H=Z*g/I,W=Math.floor(H),q=Math.min(Math.ceil(H),g-1),Q=j*w/P,et=Math.floor(Q),J=Math.min(Math.ceil(Q),w-1);U(G,0,H,W,q,Q,et,J),U(G,1,H,W,q,Q,et,J),U(G,2,H,W,q,Q,et,J),U(G,3,H,W,q,Q,et,J)}},_interpolate2D(d,m,g,w){const I=d.data,P=m.data,$=d.width,F=d.height,D=m.width,U=m.height,j=Math.max(1,Math.floor($/D)),Z=D*j,G=Math.max(1,Math.floor(F/U)),H=U*G,W=Buffer$1.alloc(Z*F*4);for(let et=0;et<F;et++)for(let J=0;J<Z;J++){const V=J*($-1)/Z,rt=Math.floor(V),X=V-rt,ot=4*(et*$+rt),it=4*(et*Z+J);for(let st=0;st<4;st++){const at=ot+st,ft=rt>0?I[at-4]:2*I[at]-I[at+4],K=I[at],lt=I[at+4],vt=rt<$-2?I[at+8]:2*I[at+4]-I[at];W[it+st]=w(ft,K,lt,vt,X)}}const q=Buffer$1.alloc(Z*H*4);for(let et=0;et<H;et++)for(let J=0;J<Z;J++){const V=et*(F-1)/H,rt=Math.floor(V),X=V-rt,ot=4*(rt*Z+J),it=4*(et*Z+J);for(let st=0;st<4;st++){const at=ot+st,ft=rt>0?W[at-4*Z]:2*W[at]-W[at+4*Z],K=W[at],lt=W[at+4*Z],vt=rt<F-2?W[at+8*Z]:2*W[at+4*Z]-W[at];q[it+st]=w(ft,K,lt,vt,X)}}const Q=j*G;if(Q>1)for(let et=0;et<U;et++)for(let J=0;J<D;J++){let V=0,rt=0,X=0,ot=0,it=0;for(let at=0;at<G;at++){const ft=et*G+at;for(let K=0;K<j;K++){const lt=4*(ft*Z+(J*j+K)),vt=q[lt+3];vt&&(V+=q[lt],rt+=q[lt+1],X+=q[lt+2],it++),ot+=vt}}const st=4*(et*D+J);P[st]=it?Math.round(V/it):0,P[st+1]=it?Math.round(rt/it):0,P[st+2]=it?Math.round(X/it):0,P[st+3]=Math.round(ot/Q)}else m.data=q},bicubicInterpolation(d,m,g){return this._interpolate2D(d,m,g,function(w,I,P,$,F){const D=$-P-w+I,U=w-I-D,j=P-w,Z=I;return Math.max(0,Math.min(255,D*(F*F*F)+U*(F*F)+j*F+Z))})},hermiteInterpolation(d,m,g){return this._interpolate2D(d,m,g,function(w,I,P,$,F){const D=I,U=.5*(P-w),j=w-2.5*I+2*P-.5*$,Z=.5*($-w)+1.5*(I-P);return Math.max(0,Math.min(255,Math.round(((Z*F+j)*F+U)*F+D)))})},bezierInterpolation(d,m,g){return this._interpolate2D(d,m,g,function(w,I,P,$,F){const D=1-F,U=I*D*D*D,j=3*(I+(P-w)/4)*D*D*F,Z=3*(P-($-I)/4)*D*F*F,G=P*F*F*F;return Math.max(0,Math.min(255,Math.round(U+j+Z+G)))})}},ResizeOptionsSchema=z.union([z.object({w:z.number().min(0),h:z.number().min(0).optional(),mode:z.nativeEnum(ResizeStrategy).optional()}),z.object({w:z.number().min(0).optional(),h:z.number().min(0),mode:z.nativeEnum(ResizeStrategy).optional()})]),ScaleToFitOptionsSchema=z.object({w:z.number().min(0),h:z.number().min(0),mode:z.nativeEnum(ResizeStrategy).optional()}),ScaleComplexOptionsSchema=z.object({f:z.number().min(0),mode:z.nativeEnum(ResizeStrategy).optional()}),methods$d={resize(d,m){const{mode:g}=ResizeOptionsSchema.parse(m);let w,I;if(typeof m.w=="number")w=m.w,I=m.h??d.bitmap.height*(w/d.bitmap.width);else{if(typeof m.h!="number")throw new Error("w must be a number");I=m.h,w=m.w??d.bitmap.width*(I/d.bitmap.height)}if(w=Math.round(w)||1,I=Math.round(I)||1,g&&typeof operations[g]=="function"){const P={data:Buffer$1.alloc(w*I*4),width:w,height:I};operations[g](d.bitmap,P),d.bitmap=P}else new Resize(d.bitmap.width,d.bitmap.height,w,I,!0,!0,P=>{d.bitmap.data=Buffer$1.from(P),d.bitmap.width=w,d.bitmap.height=I}).resize(d.bitmap.data);return d},scale(d,m){const{f:g,mode:w}=typeof m=="number"?{f:m}:ScaleComplexOptionsSchema.parse(m),I=d.bitmap.width*g,P=d.bitmap.height*g;return this.resize(d,{w:I,h:P,mode:w})},scaleToFit(d,m){const{h:g,w,mode:I}=ScaleToFitOptionsSchema.parse(m),P=w/g>d.bitmap.width/d.bitmap.height?g/d.bitmap.height:w/d.bitmap.width;return this.scale(d,{f:P,mode:I})}},ContainOptionsSchema=z.object({w:z.number(),h:z.number(),align:z.number().optional(),mode:z.nativeEnum(ResizeStrategy).optional()}),methods$c={contain(d,m){const{w:g,h:w,align:I=HorizontalAlign.CENTER|VerticalAlign.MIDDLE,mode:P}=ContainOptionsSchema.parse(m),$=7&I,F=I>>3;if(($===0||$&$-1)&&(F===0||F&F-1))throw new Error("only use one flag per alignment direction");const D=$>>1,U=F>>1,j=g/w>d.bitmap.width/d.bitmap.height?w/d.bitmap.height:g/d.bitmap.width,Z=methods$d.scale(clone(d),{f:j,mode:P});return(d=methods$d.resize(d,{w:g,h:w,mode:P})).scan((G,H,W)=>{d.bitmap.data.writeUInt32BE(d.background,W)}),d=methods$h.blit(d,{src:Z,x:(d.bitmap.width-Z.bitmap.width)/2*D,y:(d.bitmap.height-Z.bitmap.height)/2*U})}},CropOptionsSchema=z.object({x:z.number(),y:z.number(),w:z.number(),h:z.number()}),AutocropComplexOptionsSchema=z.object({tolerance:z.number().min(0).max(1).optional(),cropOnlyFrames:z.boolean().optional(),cropSymmetric:z.boolean().optional(),leaveBorder:z.number().optional(),ignoreSides:z.object({north:z.boolean().optional(),south:z.boolean().optional(),east:z.boolean().optional(),west:z.boolean().optional()}).optional()}),methods$b={crop(d,m){let{x:g,y:w,w:I,h:P}=CropOptionsSchema.parse(m);if(g=Math.round(g),w=Math.round(w),I=Math.round(I),P=Math.round(P),g===0&&I===d.bitmap.width){const $=I*w+g<<2,F=$+(P*I<<2);d.bitmap.data=d.bitmap.data.slice($,F)}else{const $=Buffer$1.allocUnsafe(I*P*4);let F=0;scan(d,g,w,I,P,function(D,U,j){const Z=d.bitmap.data.readUInt32BE(j);$.writeUInt32BE(Z,F),F+=4}),d.bitmap.data=$}return d.bitmap.width=I,d.bitmap.height=P,d},autocrop(d,m={}){const{tolerance:g=2e-4,cropOnlyFrames:w=!0,cropSymmetric:I=!1,leaveBorder:P=0,ignoreSides:$}=typeof m=="number"?{tolerance:m}:AutocropComplexOptionsSchema.parse(m),F=d.bitmap.width,D=d.bitmap.height,U={north:!1,south:!1,east:!1,west:!1,...$};let j=d.getPixelColor(0,0);const Z=intToRGBA$1(j);let G=0,H=0,W=0,q=0;if(j=d.getPixelColor(0,0),!U.north)t:for(let V=0;V<D-1;V++){for(let rt=0;rt<F;rt++)if(colorDiff(Z,intToRGBA$1(d.getPixelColor(rt,V)))>g)break t;G++}if(j=d.getPixelColor(F,0),!U.west)t:for(let V=0;V<F-1;V++){for(let rt=0+G;rt<D;rt++)if(colorDiff(Z,intToRGBA$1(d.getPixelColor(V,rt)))>g)break t;q++}if(j=d.getPixelColor(0,D),!U.south)t:for(let V=D-1;V>=G+1;V--){for(let rt=F-H-1;rt>=0;rt--)if(colorDiff(Z,intToRGBA$1(d.getPixelColor(rt,V)))>g)break t;W++}if(j=d.getPixelColor(F,D),!U.east)t:for(let V=F-1;V>=0+q+1;V--){for(let rt=D-1;rt>=0+G;rt--)if(colorDiff(Z,intToRGBA$1(d.getPixelColor(V,rt)))>g)break t;H++}let Q=!1;if(q-=P,H-=P,G-=P,W-=P,I){const V=Math.min(H,q),rt=Math.min(G,W);q=V,H=V,G=rt,W=rt}q=q>=0?q:0,H=H>=0?H:0,G=G>=0?G:0,W=W>=0?W:0;const et=F-(q+H),J=D-(W+G);return Q=w?H!==0&&G!==0&&q!==0&&W!==0:H!==0||G!==0||q!==0||W!==0,Q&&this.crop(d,{x:q,y:G,w:et,h:J}),d}},CoverOptionsSchema=z.object({w:z.number(),h:z.number(),align:z.number().optional(),mode:z.nativeEnum(ResizeStrategy).optional()}),methods$a={cover(d,m){const{w:g,h:w,align:I=HorizontalAlign.CENTER|VerticalAlign.MIDDLE,mode:P}=CoverOptionsSchema.parse(m),$=7&I,F=I>>3;if(($===0||$&$-1)&&(F===0||F&F-1))throw new Error("only use one flag per alignment direction");const D=$>>1,U=F>>1,j=g/w>d.bitmap.width/d.bitmap.height?g/d.bitmap.width:w/d.bitmap.height;return d=methods$d.scale(d,{f:j,mode:P}),d=methods$b.crop(d,{x:(d.bitmap.width-g)/2*D,y:(d.bitmap.height-w)/2*U,w:g,h:w})}},DisplaceOptionsSchema=z.object({map:JimpClassSchema,offset:z.number()}),methods$9={displace(d,m){const{map:g,offset:w}=DisplaceOptionsSchema.parse(m),I=clone(d);return d.scan((P,$,F)=>{let D=g.bitmap.data[F]/256*w;D=Math.round(D);const U=d.getPixelIndex(P+D,$);d.bitmap.data[U]=I.bitmap.data[F],d.bitmap.data[U+1]=I.bitmap.data[F+1],d.bitmap.data[U+2]=I.bitmap.data[F+2]}),d}},methods$8={dither(d){const m=[1,9,3,11,13,5,15,7,4,12,2,10,16,8,14,6];return d.scan((g,w,I)=>{const P=m[((3&w)<<2)+g%4];d.bitmap.data[I]=Math.min(d.bitmap.data[I]+P,255),d.bitmap.data[I+1]=Math.min(d.bitmap.data[I+1]+P,255),d.bitmap.data[I+2]=Math.min(d.bitmap.data[I+2]+P,255)}),d}},FisheyeOptionsSchema=z.object({radius:z.number().min(0).optional()}),methods$7={fisheye(d,m={}){const{radius:g=2.5}=FisheyeOptionsSchema.parse(m),w=clone(d),{width:I,height:P}=w.bitmap;return w.scan(($,F)=>{const D=$/I,U=F/P,j=Math.sqrt(Math.pow(D-.5,2)+Math.pow(U-.5,2)),Z=2*Math.pow(j,g),G=(D-.5)/j,H=(U-.5)/j,W=Math.round((Z*G+.5)*I),q=Math.round((Z*H+.5)*P),Q=w.getPixelColor(W,q);d.setPixelColor(Q,$,F)}),d.setPixelColor(w.getPixelColor(I/2,P/2),I/2,P/2),d}},FlipOptionsSchema=z.object({horizontal:z.boolean().optional(),vertical:z.boolean().optional()}),methods$6={flip(d,m){const{horizontal:g,vertical:w}=FlipOptionsSchema.parse(m),I=Buffer$1.alloc(d.bitmap.data.length);return d.scan((P,$,F)=>{const D=g?d.bitmap.width-1-P:P,U=w?d.bitmap.height-1-$:$,j=d.bitmap.width*U+D<<2,Z=d.bitmap.data.readUInt32BE(F);I.writeUInt32BE(Z,j)}),d.bitmap.data=Buffer$1.from(I),d}};function Converter$1(d,m){if(!(d&&m&&d.length&&m.length))throw new Error("Bad alphabet");this.srcAlphabet=d,this.dstAlphabet=m}Converter$1.prototype.convert=function(d){var m,g,w,I={},P=this.srcAlphabet.length,$=this.dstAlphabet.length,F=d.length,D=typeof d=="string"?"":[];if(!this.isValid(d))throw new Error('Number "'+d+'" contains of non-alphabetic digits ('+this.srcAlphabet+")");if(this.srcAlphabet===this.dstAlphabet)return d;for(m=0;m<F;m++)I[m]=this.srcAlphabet.indexOf(d[m]);do{for(g=0,w=0,m=0;m<F;m++)(g=g*P+I[m])>=$?(I[w++]=parseInt(g/$,10),g%=$):w>0&&(I[w++]=0);F=w,D=this.dstAlphabet.slice(g,g+1).concat(D)}while(w!==0);return D},Converter$1.prototype.isValid=function(d){for(var m=0;m<d.length;++m)if(this.srcAlphabet.indexOf(d[m])===-1)return!1;return!0};var converter=Converter$1,Converter=converter;function anyBase(d,m){var g=new Converter(d,m);return function(w){return g.convert(w)}}anyBase.BIN="01",anyBase.OCT="01234567",anyBase.DEC="0123456789",anyBase.HEX="0123456789abcdef";var anyBase_1=anyBase,anyBase$1=getDefaultExportFromCjs(anyBase_1),__defProp$1=Object.defineProperty,__defNormalProp$1=(d,m,g)=>m in d?__defProp$1(d,m,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[m]=g,__publicField$1=(d,m,g)=>__defNormalProp$1(d,typeof m!="symbol"?m+"":m,g);class ImagePHash{constructor(m,g){__publicField$1(this,"size"),__publicField$1(this,"smallerSize"),this.size=m||32,this.smallerSize=g||8,initCoefficients(this.size)}distance(m,g){let w=0;for(let I=0;I<m.length;I++)m[I]!==g[I]&&w++;return w/m.length}getHash(m){m=methods$d.resize(clone(m),{w:this.size,h:this.size}),m=methods$e.greyscale(m);const g=[];for(let F=0;F<m.bitmap.width;F++){const D=[];for(let U=0;U<m.bitmap.height;U++)D[U]=intToRGBA(m.getPixelColor(F,U)).b;g[F]=D}const w=applyDCT(g,this.size);let I=0;for(let F=0;F<this.smallerSize;F++)for(let D=0;D<this.smallerSize;D++)I+=w[F][D];const P=I/(this.smallerSize*this.smallerSize);let $="";for(let F=0;F<this.smallerSize;F++)for(let D=0;D<this.smallerSize;D++)$+=w[F][D]>P?"1":"0";return $}}function intToRGBA(d){const m=255&d,g=255&(d>>>=8),w=255&(d>>>=8);return{r:255&(d>>>=8),g:w,b:g,a:m}}const c$1=[];function initCoefficients(d){for(let m=1;m<d;m++)c$1[m]=1;c$1[0]=1/Math.sqrt(2)}function applyDCT(d,m){const g=m,w=[];for(let I=0;I<g;I++){const P=[];for(let $=0;$<g;$++){let F=0;for(let D=0;D<g;D++)for(let U=0;U<g;U++)F+=Math.cos((2*D+1)/(2*g)*I*Math.PI)*Math.cos((2*U+1)/(2*g)*$*Math.PI)*d[D][U];F*=c$1[I]*c$1[$]/4,P[$]=F,w[I]=P}}return w}const alphabet="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",maxHashLength=[NaN,NaN];for(let d=2;d<65;d++){const m=anyBase$1(anyBase$1.BIN,alphabet.slice(0,d))(new Array(65).join("1"));maxHashLength.push(m.length)}const methods$5={pHash:d=>new ImagePHash().getHash(d),hash(d,m=64){if(m<2||m>64)throw new Error("base must be a number between 2 and 64");const g=alphabet.slice(0,m),w=this.pHash(d),I=maxHashLength[m];return anyBase$1(anyBase$1.BIN,g)(w).padStart(I,"0")},distanceFromHash(d,m){const g=new ImagePHash,w=g.getHash(d);return g.distance(w,m)}},MaskOptionsObjectSchema=z.object({src:JimpClassSchema,x:z.number().optional(),y:z.number().optional()}),MaskOptionsSchema=z.union([JimpClassSchema,MaskOptionsObjectSchema]),methods$4={mask(d,m){let g,w,I;MaskOptionsSchema.parse(m),"bitmap"in m?(g=m,w=0,I=0):(g=m.src,w=m.x??0,I=m.y??0),w=Math.round(w),I=Math.round(I);const P=d.bitmap.width,$=d.bitmap.height;return g.scan(function(F,D,U){const j=w+F,Z=I+D;if(j>=0&&Z>=0&&j<P&&Z<$){const G=d.getPixelIndex(j,Z),{data:H}=g.bitmap,W=(H[U+0]+H[U+1]+H[U+2])/3;d.bitmap.data[G+3]*=W/255}}),d}};function measureText(d,m){let g=0;for(let w=0;w<m.length;w++){const I=m[w],P=d.chars[I];if(P){const $=d.kernings[I],F=m[w+1],D=$&&F&&$[F]&&$[F]||0;g+=(P.xadvance||0)+D}}return g}function splitLines(d,m,g){const w=m.replace(/[\r\n]+/g,` 
`).split(" "),I=[];let P=[],$=0;return w.forEach(F=>{if(measureText(d,F+(w.length>1?" ":""))>g){const j=F[Symbol.iterator]();let Z="";for(const G of j){const H=[...P,Z+G].join(" "),W=measureText(d,H);W<g?Z+=G:W>g?(I.push([...P,Z]),P=[],Z=G):(I.push([...P,Z+G]),P=[],Z="")}return}const D=[...P,F].join(" "),U=measureText(d,D);U<=g&&!F.includes(`
`)?(U>$&&($=U),P.push(F)):(I.push(P),P=[F.replace(`
`,"")])}),I.push(P),{lines:I,longestLine:$}}function measureTextHeight(d,m,g){const{lines:w}=splitLines(d,m,g);return w.length*d.common.lineHeight}const PrintOptionsSchema=z.object({x:z.number(),y:z.number(),text:z.union([z.union([z.string(),z.number()]),z.object({text:z.union([z.string(),z.number()]),alignmentX:z.nativeEnum(HorizontalAlign).optional(),alignmentY:z.nativeEnum(VerticalAlign).optional()})]),maxWidth:z.number().optional(),maxHeight:z.number().optional(),cb:z.function(z.tuple([z.object({x:z.number(),y:z.number()})])).optional()});function xOffsetBasedOnAlignment(d,m,g,w){return w===HorizontalAlign.LEFT?0:w===HorizontalAlign.CENTER?(g-measureText(d,m))/2:g-measureText(d,m)}function drawCharacter(d,m,g,w,I){if(I.width>0&&I.height>0){const P=m.pages[I.page];P&&(d=methods$h.blit(d,{src:P,x:g+I.xoffset,y:w+I.yoffset,srcX:I.x,srcY:I.y,srcW:I.width,srcH:I.height}))}return d}function printText(d,m,g,w,I,P){for(let $=0;$<I.length;$++){const F=I[$];let D;D=m.chars[F]?F:/\s/.test(F)?"":"?";const U=m.chars[D]||{xadvance:void 0},j=m.kernings[D];drawCharacter(d,m,g,w,U);const Z=I[$+1];g+=(j&&Z&&j[Z]&&j[Z]||0)+(U.xadvance||P)}}const methods$3={print(d,{font:m,...g}){var W;let w,I,{x:P,y:$,text:F,maxWidth:D=1/0,maxHeight:U=1/0,cb:j=()=>{}}=PrintOptionsSchema.parse(g);typeof F=="object"&&F.text!==null&&F.text!==void 0?(w=F.alignmentX||HorizontalAlign.LEFT,I=F.alignmentY||VerticalAlign.TOP,{text:F}=F):(w=HorizontalAlign.LEFT,I=VerticalAlign.TOP,F=F.toString()),typeof F=="number"&&(F=F.toString()),U!==1/0&&I===VerticalAlign.BOTTOM?$+=U-measureTextHeight(m,F,D):U!==1/0&&I===VerticalAlign.MIDDLE&&($+=U/2-measureTextHeight(m,F,D)/2);const Z=(W=Object.entries(m.chars).find(q=>q[1].xadvance))==null?void 0:W[1].xadvance;if(typeof Z!="number")throw new Error("Could not find default character width");const{lines:G,longestLine:H}=splitLines(m,F,D);return G.forEach(q=>{const Q=q.join(" "),et=xOffsetBasedOnAlignment(m,Q,D,w);printText(d,m,P+et,$,Q,Z),$+=m.common.lineHeight}),j.bind(d)({x:P+H,y:$}),d}},RotateOptionsSchema=z.union([z.number(),z.object({deg:z.number(),mode:z.union([z.boolean(),z.nativeEnum(ResizeStrategy)]).optional()})]);function createIdxTranslationFunction(d){return function(m,g){return g*d+m<<2}}function matrixRotate(d,m){if(Math.abs(m)%90!=0)throw new Error("Unsupported matrix rotation degree");const g=d.bitmap.width,w=d.bitmap.height;let I;switch(m){case 90:case-270:I=90;break;case 180:case-180:I=180;break;case 270:case-90:I=-90;break;default:throw new Error("Unsupported matrix rotation degree")}const P=I===180?g:w,$=I===180?w:g,F=Buffer$1.alloc(d.bitmap.data.length),D=createIdxTranslationFunction(g),U=createIdxTranslationFunction(P);for(let j=0;j<g;j++)for(let Z=0;Z<w;Z++){const G=D(j,Z),H=d.bitmap.data.readUInt32BE(G);let W;switch(I){case 90:W=U(Z,g-j-1);break;case-90:W=U(w-Z-1,j);break;case 180:W=U(g-j-1,w-Z-1);break;default:throw new Error("Unsupported matrix rotation angle")}F.writeUInt32BE(H,W)}d.bitmap.data=F,d.bitmap.width=P,d.bitmap.height=$}function createTranslationFunction(d,m){return function(g,w){return{x:g+d,y:w+m}}}function advancedRotate(d,m,g){const w=m*Math.PI/180,I=Math.cos(w),P=Math.sin(w);let $=d.bitmap.width,F=d.bitmap.height;if(g===!0||typeof g=="string"){$=Math.ceil(Math.abs(d.bitmap.width*I)+Math.abs(d.bitmap.height*P))+1,F=Math.ceil(Math.abs(d.bitmap.width*P)+Math.abs(d.bitmap.height*I))+1,$%2!=0&&$++,F%2!=0&&F++;const H=clone(d);d.scan((q,Q,et)=>{d.bitmap.data.writeUInt32BE(d.background,et)});const W=Math.max($,F,d.bitmap.width,d.bitmap.height);d=composite(d=methods$d.resize(d,{h:W,w:W,mode:g===!0?void 0:g}),H,d.bitmap.width/2-H.bitmap.width/2,d.bitmap.height/2-H.bitmap.height/2)}const D=d.bitmap.width,U=d.bitmap.height,j=Buffer$1.alloc(d.bitmap.data.length),Z=createTranslationFunction(-D/2,-U/2),G=createTranslationFunction(D/2+.5,U/2+.5);for(let H=1;H<=U;H++)for(let W=1;W<=D;W++){const q=Z(W,H),Q=G(I*q.x-P*q.y,I*q.y+P*q.x),et=D*(H-1)+W-1<<2;if(Q.x>=0&&Q.x<D&&Q.y>=0&&Q.y<U){const J=D*(0|Q.y)+Q.x<<2,V=d.bitmap.data.readUInt32BE(J);j.writeUInt32BE(V,et)}else j.writeUInt32BE(d.background,et)}if(d.bitmap.data=j,g===!0||typeof g=="string"){const H=Math.max(D/2-$/2,0),W=Math.max(U/2-F/2,0);d=methods$b.crop(d,{x:H,y:W,w:$,h:F})}}const methods$2={rotate(d,m){const g=RotateOptionsSchema.parse(m),w=typeof g=="number"?{deg:g}:g,{mode:I=!0}=w;let{deg:P}=w;return P%=360,P%360==0||(P%90==0&&(I||d.bitmap.width===d.bitmap.height||P%180==0)?matrixRotate(d,P):advancedRotate(d,P,I)),d}},ThresholdOptionsSchema=z.object({max:z.number().min(0).max(255),replace:z.number().min(0).max(255).optional(),autoGreyscale:z.boolean().optional()}),methods$1={threshold(d,m){let{max:g,replace:w=255,autoGreyscale:I=!0}=ThresholdOptionsSchema.parse(m);return g=limit255(g),w=limit255(w),I&&methods$e.greyscale(d),d.scan((P,$,F)=>{const D=d.bitmap.data[F]<g?d.bitmap.data[F]:w;d.bitmap.data[F]=D,d.bitmap.data[F+1]=D,d.bitmap.data[F+2]=D}),d}};var __defProp=Object.defineProperty,__defNormalProp=(d,m,g)=>m in d?__defProp(d,m,{enumerable:!0,configurable:!0,writable:!0,value:g}):d[m]=g,__export=(d,m)=>{for(var g in m)__defProp(d,g,{get:m[g],enumerable:!0})},__publicField=(d,m,g)=>(__defNormalProp(d,typeof m!="symbol"?m+"":m,g),g),constants_exports={};__export(constants_exports,{bt709:()=>bt709_exports});var bt709_exports={};__export(bt709_exports,{Y:()=>Y,x:()=>x$1,y:()=>y$1});var Y=(d=>(d[d.RED=.2126]="RED",d[d.GREEN=.7152]="GREEN",d[d.BLUE=.0722]="BLUE",d[d.WHITE=1]="WHITE",d))(Y||{}),x$1=(d=>(d[d.RED=.64]="RED",d[d.GREEN=.3]="GREEN",d[d.BLUE=.15]="BLUE",d[d.WHITE=.3127]="WHITE",d))(x$1||{}),y$1=(d=>(d[d.RED=.33]="RED",d[d.GREEN=.6]="GREEN",d[d.BLUE=.06]="BLUE",d[d.WHITE=.329]="WHITE",d))(y$1||{}),conversion_exports={};function correctGamma(d){return d>.04045?((d+.055)/1.055)**2.4:d/12.92}function rgb2xyz(d,m,g){return{x:.4124*(d=correctGamma(d/255))+.3576*(m=correctGamma(m/255))+.1805*(g=correctGamma(g/255)),y:.2126*d+.7152*m+.0722*g,z:.0193*d+.1192*m+.9505*g}}__export(conversion_exports,{lab2rgb:()=>lab2rgb,lab2xyz:()=>lab2xyz,rgb2hsl:()=>rgb2hsl,rgb2lab:()=>rgb2lab,rgb2xyz:()=>rgb2xyz,xyz2lab:()=>xyz2lab,xyz2rgb:()=>xyz2rgb});var arithmetic_exports={};function degrees2radians(d){return d*(Math.PI/180)}function max3(d,m,g){let w=d;return w<m&&(w=m),w<g&&(w=g),w}function min3(d,m,g){let w=d;return w>m&&(w=m),w>g&&(w=g),w}function intInRange(d,m,g){return d>g&&(d=g),d<m&&(d=m),0|d}function inRange0to255Rounded(d){return(d=Math.round(d))>255?d=255:d<0&&(d=0),d}function inRange0to255(d){return d>255?d=255:d<0&&(d=0),d}function stableSort(d,m){const g=typeof d[0];let w;if(g==="number"||g==="string"){const I=Object.create(null);for(let P=0,$=d.length;P<$;P++){const F=d[P];I[F]||I[F]===0||(I[F]=P)}w=d.sort((P,$)=>m(P,$)||I[P]-I[$])}else{const I=d.slice(0);w=d.sort((P,$)=>m(P,$)||I.indexOf(P)-I.indexOf($))}return w}function rgb2hsl(d,m,g){const w=min3(d,m,g),I=max3(d,m,g),P=I-w,$=(w+I)/510;let F=0;$>0&&$<1&&(F=P/($<.5?I+w:510-I-w));let D=0;return P>0&&(D=I===d?(m-g)/P:I===m?2+(g-d)/P:4+(d-m)/P,D*=60,D<0&&(D+=360)),{h:D,s:F,l:$}}__export(arithmetic_exports,{degrees2radians:()=>degrees2radians,inRange0to255:()=>inRange0to255,inRange0to255Rounded:()=>inRange0to255Rounded,intInRange:()=>intInRange,max3:()=>max3,min3:()=>min3,stableSort:()=>stableSort});var refX=.95047,refY=1,refZ=1.08883;function pivot(d){return d>.008856?d**(1/3):7.787*d+16/116}function xyz2lab(d,m,g){if(d=pivot(d/refX),m=pivot(m/refY),g=pivot(g/refZ),116*m-16<0)throw new Error("xxx");return{L:Math.max(0,116*m-16),a:500*(d-m),b:200*(m-g)}}function rgb2lab(d,m,g){const w=rgb2xyz(d,m,g);return xyz2lab(w.x,w.y,w.z)}var refX2=.95047,refY2=1,refZ2=1.08883;function pivot2(d){return d>.206893034?d**3:(d-16/116)/7.787}function lab2xyz(d,m,g){const w=(d+16)/116,I=w-g/200;return{x:refX2*pivot2(m/500+w),y:refY2*pivot2(w),z:refZ2*pivot2(I)}}function correctGamma2(d){return d>.0031308?1.055*d**(1/2.4)-.055:12.92*d}function xyz2rgb(d,m,g){const w=correctGamma2(3.2406*d+-1.5372*m+-.4986*g),I=correctGamma2(-.9689*d+1.8758*m+.0415*g),P=correctGamma2(.0557*d+-.204*m+1.057*g);return{r:inRange0to255Rounded(255*w),g:inRange0to255Rounded(255*I),b:inRange0to255Rounded(255*P)}}function lab2rgb(d,m,g){const w=lab2xyz(d,m,g);return xyz2rgb(w.x,w.y,w.z)}var distance_exports={};__export(distance_exports,{AbstractDistanceCalculator:()=>AbstractDistanceCalculator,AbstractEuclidean:()=>AbstractEuclidean,AbstractManhattan:()=>AbstractManhattan,CIE94GraphicArts:()=>CIE94GraphicArts,CIE94Textiles:()=>CIE94Textiles,CIEDE2000:()=>CIEDE2000,CMetric:()=>CMetric,Euclidean:()=>Euclidean,EuclideanBT709:()=>EuclideanBT709,EuclideanBT709NoAlpha:()=>EuclideanBT709NoAlpha,Manhattan:()=>Manhattan,ManhattanBT709:()=>ManhattanBT709,ManhattanNommyde:()=>ManhattanNommyde,PNGQuant:()=>PNGQuant});var AbstractDistanceCalculator=class{constructor(){__publicField(this,"_maxDistance"),__publicField(this,"_whitePoint"),this._setDefaults(),this.setWhitePoint(255,255,255,255)}setWhitePoint(d,m,g,w){this._whitePoint={r:d>0?255/d:0,g:m>0?255/m:0,b:g>0?255/g:0,a:w>0?255/w:0},this._maxDistance=this.calculateRaw(d,m,g,w,0,0,0,0)}calculateNormalized(d,m){return this.calculateRaw(d.r,d.g,d.b,d.a,m.r,m.g,m.b,m.a)/this._maxDistance}},AbstractCIE94=class extends AbstractDistanceCalculator{calculateRaw(d,m,g,w,I,P,$,F){const D=rgb2lab(inRange0to255(d*this._whitePoint.r),inRange0to255(m*this._whitePoint.g),inRange0to255(g*this._whitePoint.b)),U=rgb2lab(inRange0to255(I*this._whitePoint.r),inRange0to255(P*this._whitePoint.g),inRange0to255($*this._whitePoint.b)),j=D.L-U.L,Z=D.a-U.a,G=D.b-U.b,H=Math.sqrt(D.a*D.a+D.b*D.b),W=H-Math.sqrt(U.a*U.a+U.b*U.b);let q=Z*Z+G*G-W*W;q=q<0?0:Math.sqrt(q);const Q=(F-w)*this._whitePoint.a*this._kA;return Math.sqrt((j/this._Kl)**2+(W/(1+this._K1*H))**2+(q/(1+this._K2*H))**2+Q**2)}},CIE94Textiles=class extends AbstractCIE94{_setDefaults(){this._Kl=2,this._K1=.048,this._K2=.014,this._kA=12.5/255}},CIE94GraphicArts=class extends AbstractCIE94{_setDefaults(){this._Kl=1,this._K1=.045,this._K2=.015,this._kA=25/255}},_CIEDE2000=class extends AbstractDistanceCalculator{_setDefaults(){}static _calculatehp(d,m){const g=Math.atan2(d,m);return g>=0?g:g+_CIEDE2000._deg360InRad}static _calculateRT(d,m){const g=m**7,w=2*Math.sqrt(g/(g+_CIEDE2000._pow25to7)),I=_CIEDE2000._deg30InRad*Math.exp(-(((d-_CIEDE2000._deg275InRad)/_CIEDE2000._deg25InRad)**2));return-Math.sin(2*I)*w}static _calculateT(d){return 1-.17*Math.cos(d-_CIEDE2000._deg30InRad)+.24*Math.cos(2*d)+.32*Math.cos(3*d+_CIEDE2000._deg6InRad)-.2*Math.cos(4*d-_CIEDE2000._deg63InRad)}static _calculate_ahp(d,m,g,w){const I=g+w;return d===0?I:m<=_CIEDE2000._deg180InRad?I/2:I<_CIEDE2000._deg360InRad?(I+_CIEDE2000._deg360InRad)/2:(I-_CIEDE2000._deg360InRad)/2}static _calculate_dHp(d,m,g,w){let I;return I=d===0?0:m<=_CIEDE2000._deg180InRad?g-w:g<=w?g-w+_CIEDE2000._deg360InRad:g-w-_CIEDE2000._deg360InRad,2*Math.sqrt(d)*Math.sin(I/2)}calculateRaw(d,m,g,w,I,P,$,F){const D=rgb2lab(inRange0to255(d*this._whitePoint.r),inRange0to255(m*this._whitePoint.g),inRange0to255(g*this._whitePoint.b)),U=rgb2lab(inRange0to255(I*this._whitePoint.r),inRange0to255(P*this._whitePoint.g),inRange0to255($*this._whitePoint.b)),j=(F-w)*this._whitePoint.a*_CIEDE2000._kA,Z=this.calculateRawInLab(D,U);return Math.sqrt(Z+j*j)}calculateRawInLab(d,m){const g=d.L,w=d.a,I=d.b,P=m.L,$=m.a,F=m.b,D=((Math.sqrt(w*w+I*I)+Math.sqrt($*$+F*F))/2)**7,U=.5*(1-Math.sqrt(D/(D+_CIEDE2000._pow25to7))),j=(1+U)*w,Z=(1+U)*$,G=Math.sqrt(j*j+I*I),H=Math.sqrt(Z*Z+F*F),W=G*H,q=_CIEDE2000._calculatehp(I,j),Q=_CIEDE2000._calculatehp(F,Z),et=Math.abs(q-Q),J=P-g,V=H-G,rt=_CIEDE2000._calculate_dHp(W,et,Q,q),X=_CIEDE2000._calculate_ahp(W,et,q,Q),ot=(G+H)/2,it=((g+P)/2-50)**2,st=V/(1+.045*ot),at=rt/(1+.015*_CIEDE2000._calculateT(X)*ot);return(J/(1+.015*it/Math.sqrt(20+it)))**2+st**2+at**2+_CIEDE2000._calculateRT(X,ot)*st*at}},CIEDE2000=_CIEDE2000;__publicField(CIEDE2000,"_kA",25/255),__publicField(CIEDE2000,"_pow25to7",25**7),__publicField(CIEDE2000,"_deg360InRad",degrees2radians(360)),__publicField(CIEDE2000,"_deg180InRad",degrees2radians(180)),__publicField(CIEDE2000,"_deg30InRad",degrees2radians(30)),__publicField(CIEDE2000,"_deg6InRad",degrees2radians(6)),__publicField(CIEDE2000,"_deg63InRad",degrees2radians(63)),__publicField(CIEDE2000,"_deg275InRad",degrees2radians(275)),__publicField(CIEDE2000,"_deg25InRad",degrees2radians(25));var CMetric=class extends AbstractDistanceCalculator{calculateRaw(d,m,g,w,I,P,$,F){const D=(d+I)/2*this._whitePoint.r,U=(d-I)*this._whitePoint.r,j=(m-P)*this._whitePoint.g,Z=(g-$)*this._whitePoint.b,G=((512+D)*U*U>>8)+4*j*j+((767-D)*Z*Z>>8),H=(F-w)*this._whitePoint.a;return Math.sqrt(G+H*H)}_setDefaults(){}},AbstractEuclidean=class extends AbstractDistanceCalculator{calculateRaw(d,m,g,w,I,P,$,F){const D=I-d,U=P-m,j=$-g,Z=F-w;return Math.sqrt(this._kR*D*D+this._kG*U*U+this._kB*j*j+this._kA*Z*Z)}},Euclidean=class extends AbstractEuclidean{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},EuclideanBT709=class extends AbstractEuclidean{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},EuclideanBT709NoAlpha=class extends AbstractEuclidean{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=0}},AbstractManhattan=class extends AbstractDistanceCalculator{calculateRaw(d,m,g,w,I,P,$,F){let D=I-d,U=P-m,j=$-g,Z=F-w;return D<0&&(D=0-D),U<0&&(U=0-U),j<0&&(j=0-j),Z<0&&(Z=0-Z),this._kR*D+this._kG*U+this._kB*j+this._kA*Z}},Manhattan=class extends AbstractManhattan{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},ManhattanNommyde=class extends AbstractManhattan{_setDefaults(){this._kR=.4984,this._kG=.8625,this._kB=.2979,this._kA=1}},ManhattanBT709=class extends AbstractManhattan{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},PNGQuant=class extends AbstractDistanceCalculator{calculateRaw(d,m,g,w,I,P,$,F){const D=(F-w)*this._whitePoint.a;return this._colordifferenceCh(d*this._whitePoint.r,I*this._whitePoint.r,D)+this._colordifferenceCh(m*this._whitePoint.g,P*this._whitePoint.g,D)+this._colordifferenceCh(g*this._whitePoint.b,$*this._whitePoint.b,D)}_colordifferenceCh(d,m,g){const w=d-m,I=w+g;return w*w+I*I}_setDefaults(){}},palette_exports={};__export(palette_exports,{AbstractPaletteQuantizer:()=>AbstractPaletteQuantizer,ColorHistogram:()=>ColorHistogram,NeuQuant:()=>NeuQuant,NeuQuantFloat:()=>NeuQuantFloat,RGBQuant:()=>RGBQuant,WuColorCube:()=>WuColorCube,WuQuant:()=>WuQuant});var AbstractPaletteQuantizer=class{quantizeSync(){for(const d of this.quantize())if(d.palette)return d.palette;throw new Error("unreachable")}},Point=class{constructor(){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),__publicField(this,"uint32"),__publicField(this,"rgba"),this.uint32=-1>>>0,this.r=this.g=this.b=this.a=0,this.rgba=new Array(4),this.rgba[0]=0,this.rgba[1]=0,this.rgba[2]=0,this.rgba[3]=0}static createByQuadruplet(d){const m=new Point;return m.r=0|d[0],m.g=0|d[1],m.b=0|d[2],m.a=0|d[3],m._loadUINT32(),m._loadQuadruplet(),m}static createByRGBA(d,m,g,w){const I=new Point;return I.r=0|d,I.g=0|m,I.b=0|g,I.a=0|w,I._loadUINT32(),I._loadQuadruplet(),I}static createByUint32(d){const m=new Point;return m.uint32=d>>>0,m._loadRGBA(),m._loadQuadruplet(),m}from(d){this.r=d.r,this.g=d.g,this.b=d.b,this.a=d.a,this.uint32=d.uint32,this.rgba[0]=d.r,this.rgba[1]=d.g,this.rgba[2]=d.b,this.rgba[3]=d.a}getLuminosity(d){let m=this.r,g=this.g,w=this.b;return d&&(m=Math.min(255,255-this.a+this.a*m/255),g=Math.min(255,255-this.a+this.a*g/255),w=Math.min(255,255-this.a+this.a*w/255)),.2126*m+.7152*g+.0722*w}_loadUINT32(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0}_loadRGBA(){this.r=255&this.uint32,this.g=this.uint32>>>8&255,this.b=this.uint32>>>16&255,this.a=this.uint32>>>24&255}_loadQuadruplet(){this.rgba[0]=this.r,this.rgba[1]=this.g,this.rgba[2]=this.b,this.rgba[3]=this.a}},PointContainer=class{constructor(){__publicField(this,"_pointArray"),__publicField(this,"_width"),__publicField(this,"_height"),this._width=0,this._height=0,this._pointArray=[]}getWidth(){return this._width}getHeight(){return this._height}setWidth(d){this._width=d}setHeight(d){this._height=d}getPointArray(){return this._pointArray}clone(){const d=new PointContainer;d._width=this._width,d._height=this._height;for(let m=0,g=this._pointArray.length;m<g;m++)d._pointArray[m]=Point.createByUint32(0|this._pointArray[m].uint32);return d}toUint32Array(){const d=this._pointArray.length,m=new Uint32Array(d);for(let g=0;g<d;g++)m[g]=this._pointArray[g].uint32;return m}toUint8Array(){return new Uint8Array(this.toUint32Array().buffer)}static fromHTMLImageElement(d){const m=d.naturalWidth,g=d.naturalHeight,w=document.createElement("canvas");return w.width=m,w.height=g,w.getContext("2d").drawImage(d,0,0,m,g,0,0,m,g),PointContainer.fromHTMLCanvasElement(w)}static fromHTMLCanvasElement(d){const m=d.width,g=d.height,w=d.getContext("2d").getImageData(0,0,m,g);return PointContainer.fromImageData(w)}static fromImageData(d){const m=d.width,g=d.height;return PointContainer.fromUint8Array(d.data,m,g)}static fromUint8Array(d,m,g){switch(Object.prototype.toString.call(d)){case"[object Uint8ClampedArray]":case"[object Uint8Array]":break;default:d=new Uint8Array(d)}const w=new Uint32Array(d.buffer);return PointContainer.fromUint32Array(w,m,g)}static fromUint32Array(d,m,g){const w=new PointContainer;w._width=m,w._height=g;for(let I=0,P=d.length;I<P;I++)w._pointArray[I]=Point.createByUint32(0|d[I]);return w}static fromBuffer(d,m,g){const w=new Uint32Array(d.buffer,d.byteOffset,d.byteLength/Uint32Array.BYTES_PER_ELEMENT);return PointContainer.fromUint32Array(w,m,g)}},hueGroups=10;function hueGroup(d,m){const g=360/m;for(let w=1,I=g-g/2;w<m;w++,I+=g)if(d>=I&&d<I+g)return w;return 0}var Palette=class{constructor(){__publicField(this,"_pointContainer"),__publicField(this,"_pointArray",[]),__publicField(this,"_i32idx",{}),this._pointContainer=new PointContainer,this._pointContainer.setHeight(1),this._pointArray=this._pointContainer.getPointArray()}add(d){this._pointArray.push(d),this._pointContainer.setWidth(this._pointArray.length)}has(d){for(let m=this._pointArray.length-1;m>=0;m--)if(d.uint32===this._pointArray[m].uint32)return!0;return!1}getNearestColor(d,m){return this._pointArray[0|this._getNearestIndex(d,m)]}getPointContainer(){return this._pointContainer}_nearestPointFromCache(d){return typeof this._i32idx[d]=="number"?this._i32idx[d]:-1}_getNearestIndex(d,m){let g=this._nearestPointFromCache(""+m.uint32);if(g>=0)return g;let w=Number.MAX_VALUE;g=0;for(let I=0,P=this._pointArray.length;I<P;I++){const $=this._pointArray[I],F=d.calculateRaw(m.r,m.g,m.b,m.a,$.r,$.g,$.b,$.a);F<w&&(w=F,g=I)}return this._i32idx[m.uint32]=g,g}sort(){this._i32idx={},this._pointArray.sort((d,m)=>{const g=rgb2hsl(d.r,d.g,d.b),w=rgb2hsl(m.r,m.g,m.b),I=d.r===d.g&&d.g===d.b?0:1+hueGroup(g.h,hueGroups),P=(m.r===m.g&&m.g===m.b?0:1+hueGroup(w.h,hueGroups))-I;if(P)return-P;const $=d.getLuminosity(!0),F=m.getLuminosity(!0);if(F-$!=0)return F-$;const D=(100*w.s|0)-(100*g.s|0);return D?-D:0})}},utils_exports={};__export(utils_exports,{HueStatistics:()=>HueStatistics,Palette:()=>Palette,Point:()=>Point,PointContainer:()=>PointContainer,ProgressTracker:()=>ProgressTracker,arithmetic:()=>arithmetic_exports});var HueGroup=class{constructor(){__publicField(this,"num",0),__publicField(this,"cols",[])}},HueStatistics=class{constructor(d,m){__publicField(this,"_numGroups"),__publicField(this,"_minCols"),__publicField(this,"_stats"),__publicField(this,"_groupsFull"),this._numGroups=d,this._minCols=m,this._stats=[];for(let g=0;g<=d;g++)this._stats[g]=new HueGroup;this._groupsFull=0}check(d){this._groupsFull===this._numGroups+1&&(this.check=()=>{});const m=255&d,g=d>>>8&255,w=d>>>16&255,I=m===g&&g===w?0:1+hueGroup(rgb2hsl(m,g,w).h,this._numGroups),P=this._stats[I],$=this._minCols;P.num++,P.num>$||(P.num===$&&this._groupsFull++,P.num<=$&&this._stats[I].cols.push(d))}injectIntoDictionary(d){for(let m=0;m<=this._numGroups;m++)this._stats[m].num<=this._minCols&&this._stats[m].cols.forEach(g=>{d[g]?d[g]++:d[g]=1})}injectIntoArray(d){for(let m=0;m<=this._numGroups;m++)this._stats[m].num<=this._minCols&&this._stats[m].cols.forEach(g=>{d.indexOf(g)===-1&&d.push(g)})}},_ProgressTracker=class{constructor(d,m){__publicField(this,"progress"),__publicField(this,"_step"),__publicField(this,"_range"),__publicField(this,"_last"),__publicField(this,"_progressRange"),this._range=d,this._progressRange=m,this._step=Math.max(1,this._range/(_ProgressTracker.steps+1)|0),this._last=-this._step,this.progress=0}shouldNotify(d){return d-this._last>=this._step&&(this._last=d,this.progress=Math.min(this._progressRange*this._last/this._range,this._progressRange),!0)}},ProgressTracker=_ProgressTracker;__publicField(ProgressTracker,"steps",100);var networkBiasShift=3,Neuron=class{constructor(d){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),this.r=this.g=this.b=this.a=d}toPoint(){return Point.createByRGBA(this.r>>networkBiasShift,this.g>>networkBiasShift,this.b>>networkBiasShift,this.a>>networkBiasShift)}subtract(d,m,g,w){this.r-=0|d,this.g-=0|m,this.b-=0|g,this.a-=0|w}},_NeuQuant=class extends AbstractPaletteQuantizer{constructor(d,m=256){super(),__publicField(this,"_pointArray"),__publicField(this,"_networkSize"),__publicField(this,"_network"),__publicField(this,"_sampleFactor"),__publicField(this,"_radPower"),__publicField(this,"_freq"),__publicField(this,"_bias"),__publicField(this,"_distance"),this._distance=d,this._pointArray=[],this._sampleFactor=1,this._networkSize=m,this._distance.setWhitePoint(255<<networkBiasShift,255<<networkBiasShift,255<<networkBiasShift,255<<networkBiasShift)}sample(d){this._pointArray=this._pointArray.concat(d.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let d=0;d<this._networkSize;d++)this._network[d]=new Neuron((d<<networkBiasShift+8)/this._networkSize|0),this._freq[d]=_NeuQuant._initialBias/this._networkSize|0,this._bias[d]=0}*_learn(){let d=this._sampleFactor;const m=this._pointArray.length;m<_NeuQuant._minpicturebytes&&(d=1);const g=30+(d-1)/3|0,w=m/d|0;let I,P=w/_NeuQuant._nCycles|0,$=_NeuQuant._initAlpha,F=(this._networkSize>>3)*_NeuQuant._radiusBias,D=F>>_NeuQuant._radiusBiasShift;D<=1&&(D=0);for(let j=0;j<D;j++)this._radPower[j]=$*((D*D-j*j)*_NeuQuant._radBias/(D*D))>>>0;I=m<_NeuQuant._minpicturebytes?1:m%_NeuQuant._prime1!=0?_NeuQuant._prime1:m%_NeuQuant._prime2!=0?_NeuQuant._prime2:m%_NeuQuant._prime3!=0?_NeuQuant._prime3:_NeuQuant._prime4;const U=new ProgressTracker(w,99);for(let j=0,Z=0;j<w;){U.shouldNotify(j)&&(yield{progress:U.progress});const G=this._pointArray[Z],H=G.b<<networkBiasShift,W=G.g<<networkBiasShift,q=G.r<<networkBiasShift,Q=G.a<<networkBiasShift,et=this._contest(H,W,q,Q);if(this._alterSingle($,et,H,W,q,Q),D!==0&&this._alterNeighbour(D,et,H,W,q,Q),Z+=I,Z>=m&&(Z-=m),j++,P===0&&(P=1),j%P==0){$-=$/g|0,F-=F/_NeuQuant._radiusDecrease|0,D=F>>_NeuQuant._radiusBiasShift,D<=1&&(D=0);for(let J=0;J<D;J++)this._radPower[J]=$*((D*D-J*J)*_NeuQuant._radBias/(D*D))>>>0}}}_buildPalette(){const d=new Palette;return this._network.forEach(m=>{d.add(m.toPoint())}),d.sort(),d}_alterNeighbour(d,m,g,w,I,P){let $=m-d;$<-1&&($=-1);let F=m+d;F>this._networkSize&&(F=this._networkSize);let D=m+1,U=m-1,j=1;for(;D<F||U>$;){const Z=this._radPower[j++]/_NeuQuant._alphaRadBias;if(D<F){const G=this._network[D++];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}if(U>$){const G=this._network[U--];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}}}_alterSingle(d,m,g,w,I,P){d/=_NeuQuant._initAlpha;const $=this._network[m];$.subtract(d*($.r-I),d*($.g-w),d*($.b-g),d*($.a-P))}_contest(d,m,g,w){const I=1020<<networkBiasShift;let P=2147483647,$=P,F=-1,D=F;for(let U=0;U<this._networkSize;U++){const j=this._network[U],Z=this._distance.calculateNormalized(j,{r:g,g:m,b:d,a:w})*I|0;Z<P&&(P=Z,F=U);const G=Z-(this._bias[U]>>_NeuQuant._initialBiasShift-networkBiasShift);G<$&&($=G,D=U);const H=this._freq[U]>>_NeuQuant._betaShift;this._freq[U]-=H,this._bias[U]+=H<<_NeuQuant._gammaShift}return this._freq[F]+=_NeuQuant._beta,this._bias[F]-=_NeuQuant._betaGamma,D}},NeuQuant=_NeuQuant;__publicField(NeuQuant,"_prime1",499),__publicField(NeuQuant,"_prime2",491),__publicField(NeuQuant,"_prime3",487),__publicField(NeuQuant,"_prime4",503),__publicField(NeuQuant,"_minpicturebytes",_NeuQuant._prime4),__publicField(NeuQuant,"_nCycles",100),__publicField(NeuQuant,"_initialBiasShift",16),__publicField(NeuQuant,"_initialBias",1<<_NeuQuant._initialBiasShift),__publicField(NeuQuant,"_gammaShift",10),__publicField(NeuQuant,"_betaShift",10),__publicField(NeuQuant,"_beta",_NeuQuant._initialBias>>_NeuQuant._betaShift),__publicField(NeuQuant,"_betaGamma",_NeuQuant._initialBias<<_NeuQuant._gammaShift-_NeuQuant._betaShift),__publicField(NeuQuant,"_radiusBiasShift",6),__publicField(NeuQuant,"_radiusBias",1<<_NeuQuant._radiusBiasShift),__publicField(NeuQuant,"_radiusDecrease",30),__publicField(NeuQuant,"_alphaBiasShift",10),__publicField(NeuQuant,"_initAlpha",1<<_NeuQuant._alphaBiasShift),__publicField(NeuQuant,"_radBiasShift",8),__publicField(NeuQuant,"_radBias",1<<_NeuQuant._radBiasShift),__publicField(NeuQuant,"_alphaRadBiasShift",_NeuQuant._alphaBiasShift+_NeuQuant._radBiasShift),__publicField(NeuQuant,"_alphaRadBias",1<<_NeuQuant._alphaRadBiasShift);var networkBiasShift2=3,NeuronFloat=class{constructor(d){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),this.r=this.g=this.b=this.a=d}toPoint(){return Point.createByRGBA(this.r>>networkBiasShift2,this.g>>networkBiasShift2,this.b>>networkBiasShift2,this.a>>networkBiasShift2)}subtract(d,m,g,w){this.r-=d,this.g-=m,this.b-=g,this.a-=w}},_NeuQuantFloat=class extends AbstractPaletteQuantizer{constructor(d,m=256){super(),__publicField(this,"_pointArray"),__publicField(this,"_networkSize"),__publicField(this,"_network"),__publicField(this,"_sampleFactor"),__publicField(this,"_radPower"),__publicField(this,"_freq"),__publicField(this,"_bias"),__publicField(this,"_distance"),this._distance=d,this._pointArray=[],this._sampleFactor=1,this._networkSize=m,this._distance.setWhitePoint(255<<networkBiasShift2,255<<networkBiasShift2,255<<networkBiasShift2,255<<networkBiasShift2)}sample(d){this._pointArray=this._pointArray.concat(d.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let d=0;d<this._networkSize;d++)this._network[d]=new NeuronFloat((d<<networkBiasShift2+8)/this._networkSize),this._freq[d]=_NeuQuantFloat._initialBias/this._networkSize,this._bias[d]=0}*_learn(){let d=this._sampleFactor;const m=this._pointArray.length;m<_NeuQuantFloat._minpicturebytes&&(d=1);const g=30+(d-1)/3,w=m/d;let I,P=w/_NeuQuantFloat._nCycles|0,$=_NeuQuantFloat._initAlpha,F=(this._networkSize>>3)*_NeuQuantFloat._radiusBias,D=F>>_NeuQuantFloat._radiusBiasShift;D<=1&&(D=0);for(let j=0;j<D;j++)this._radPower[j]=$*((D*D-j*j)*_NeuQuantFloat._radBias/(D*D));I=m<_NeuQuantFloat._minpicturebytes?1:m%_NeuQuantFloat._prime1!=0?_NeuQuantFloat._prime1:m%_NeuQuantFloat._prime2!=0?_NeuQuantFloat._prime2:m%_NeuQuantFloat._prime3!=0?_NeuQuantFloat._prime3:_NeuQuantFloat._prime4;const U=new ProgressTracker(w,99);for(let j=0,Z=0;j<w;){U.shouldNotify(j)&&(yield{progress:U.progress});const G=this._pointArray[Z],H=G.b<<networkBiasShift2,W=G.g<<networkBiasShift2,q=G.r<<networkBiasShift2,Q=G.a<<networkBiasShift2,et=this._contest(H,W,q,Q);if(this._alterSingle($,et,H,W,q,Q),D!==0&&this._alterNeighbour(D,et,H,W,q,Q),Z+=I,Z>=m&&(Z-=m),j++,P===0&&(P=1),j%P==0){$-=$/g,F-=F/_NeuQuantFloat._radiusDecrease,D=F>>_NeuQuantFloat._radiusBiasShift,D<=1&&(D=0);for(let J=0;J<D;J++)this._radPower[J]=$*((D*D-J*J)*_NeuQuantFloat._radBias/(D*D))}}}_buildPalette(){const d=new Palette;return this._network.forEach(m=>{d.add(m.toPoint())}),d.sort(),d}_alterNeighbour(d,m,g,w,I,P){let $=m-d;$<-1&&($=-1);let F=m+d;F>this._networkSize&&(F=this._networkSize);let D=m+1,U=m-1,j=1;for(;D<F||U>$;){const Z=this._radPower[j++]/_NeuQuantFloat._alphaRadBias;if(D<F){const G=this._network[D++];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}if(U>$){const G=this._network[U--];G.subtract(Z*(G.r-I),Z*(G.g-w),Z*(G.b-g),Z*(G.a-P))}}}_alterSingle(d,m,g,w,I,P){d/=_NeuQuantFloat._initAlpha;const $=this._network[m];$.subtract(d*($.r-I),d*($.g-w),d*($.b-g),d*($.a-P))}_contest(d,m,g,w){const I=1020<<networkBiasShift2;let P=2147483647,$=P,F=-1,D=F;for(let U=0;U<this._networkSize;U++){const j=this._network[U],Z=this._distance.calculateNormalized(j,{r:g,g:m,b:d,a:w})*I;Z<P&&(P=Z,F=U);const G=Z-(this._bias[U]>>_NeuQuantFloat._initialBiasShift-networkBiasShift2);G<$&&($=G,D=U);const H=this._freq[U]>>_NeuQuantFloat._betaShift;this._freq[U]-=H,this._bias[U]+=H<<_NeuQuantFloat._gammaShift}return this._freq[F]+=_NeuQuantFloat._beta,this._bias[F]-=_NeuQuantFloat._betaGamma,D}},NeuQuantFloat=_NeuQuantFloat;__publicField(NeuQuantFloat,"_prime1",499),__publicField(NeuQuantFloat,"_prime2",491),__publicField(NeuQuantFloat,"_prime3",487),__publicField(NeuQuantFloat,"_prime4",503),__publicField(NeuQuantFloat,"_minpicturebytes",_NeuQuantFloat._prime4),__publicField(NeuQuantFloat,"_nCycles",100),__publicField(NeuQuantFloat,"_initialBiasShift",16),__publicField(NeuQuantFloat,"_initialBias",1<<_NeuQuantFloat._initialBiasShift),__publicField(NeuQuantFloat,"_gammaShift",10),__publicField(NeuQuantFloat,"_betaShift",10),__publicField(NeuQuantFloat,"_beta",_NeuQuantFloat._initialBias>>_NeuQuantFloat._betaShift),__publicField(NeuQuantFloat,"_betaGamma",_NeuQuantFloat._initialBias<<_NeuQuantFloat._gammaShift-_NeuQuantFloat._betaShift),__publicField(NeuQuantFloat,"_radiusBiasShift",6),__publicField(NeuQuantFloat,"_radiusBias",1<<_NeuQuantFloat._radiusBiasShift),__publicField(NeuQuantFloat,"_radiusDecrease",30),__publicField(NeuQuantFloat,"_alphaBiasShift",10),__publicField(NeuQuantFloat,"_initAlpha",1<<_NeuQuantFloat._alphaBiasShift),__publicField(NeuQuantFloat,"_radBiasShift",8),__publicField(NeuQuantFloat,"_radBias",1<<_NeuQuantFloat._radBiasShift),__publicField(NeuQuantFloat,"_alphaRadBiasShift",_NeuQuantFloat._alphaBiasShift+_NeuQuantFloat._radBiasShift),__publicField(NeuQuantFloat,"_alphaRadBias",1<<_NeuQuantFloat._alphaRadBiasShift);var _ColorHistogram=class{constructor(d,m){__publicField(this,"_method"),__publicField(this,"_hueStats"),__publicField(this,"_histogram"),__publicField(this,"_initColors"),__publicField(this,"_minHueCols"),this._method=d,this._minHueCols=m<<2,this._initColors=m<<2,this._hueStats=new HueStatistics(_ColorHistogram._hueGroups,this._minHueCols),this._histogram=Object.create(null)}sample(d){switch(this._method){case 1:this._colorStats1D(d);break;case 2:this._colorStats2D(d)}}getImportanceSortedColorsIDXI32(){const d=stableSort(Object.keys(this._histogram),(g,w)=>this._histogram[w]-this._histogram[g]);if(d.length===0)return[];let m;switch(this._method){case 1:const g=Math.min(d.length,this._initColors),w=d[g-1],I=this._histogram[w];m=d.slice(0,g);let P=g;const $=d.length;for(;P<$&&this._histogram[d[P]]===I;)m.push(d[P++]);this._hueStats.injectIntoArray(m);break;case 2:m=d;break;default:throw new Error("Incorrect method")}return m.map(g=>+g)}_colorStats1D(d){const m=this._histogram,g=d.getPointArray(),w=g.length;for(let I=0;I<w;I++){const P=g[I].uint32;this._hueStats.check(P),P in m?m[P]++:m[P]=1}}_colorStats2D(d){const m=d.getWidth(),g=d.getHeight(),w=d.getPointArray(),I=_ColorHistogram._boxSize[0],P=_ColorHistogram._boxSize[1],$=I*P,F=this._makeBoxes(m,g,I,P),D=this._histogram;F.forEach(U=>{let j=Math.round(U.w*U.h/$)*_ColorHistogram._boxPixels;j<2&&(j=2);const Z={};this._iterateBox(U,m,G=>{const H=w[G].uint32;this._hueStats.check(H),H in D?D[H]++:H in Z?++Z[H]>=j&&(D[H]=Z[H]):Z[H]=1})}),this._hueStats.injectIntoDictionary(D)}_iterateBox(d,m,g){const w=d,I=w.y*m+w.x,P=(w.y+w.h-1)*m+(w.x+w.w-1),$=m-w.w+1;let F=0,D=I;do g.call(this,D),D+=++F%w.w==0?$:1;while(D<=P)}_makeBoxes(d,m,g,w){const I=d%g,P=m%w,$=d-I,F=m-P,D=[];for(let U=0;U<m;U+=w)for(let j=0;j<d;j+=g)D.push({x:j,y:U,w:j===$?I:g,h:U===F?P:w});return D}},ColorHistogram=_ColorHistogram;__publicField(ColorHistogram,"_boxSize",[64,64]),__publicField(ColorHistogram,"_boxPixels",2),__publicField(ColorHistogram,"_hueGroups",10);var RemovedColor=class{constructor(d,m,g){__publicField(this,"index"),__publicField(this,"color"),__publicField(this,"distance"),this.index=d,this.color=m,this.distance=g}},RGBQuant=class extends AbstractPaletteQuantizer{constructor(d,m=256,g=2){super(),__publicField(this,"_colors"),__publicField(this,"_initialDistance"),__publicField(this,"_distanceIncrement"),__publicField(this,"_histogram"),__publicField(this,"_distance"),this._distance=d,this._colors=m,this._histogram=new ColorHistogram(g,m),this._initialDistance=.01,this._distanceIncrement=.005}sample(d){this._histogram.sample(d)}*quantize(){const d=this._histogram.getImportanceSortedColorsIDXI32();if(d.length===0)throw new Error("No colors in image");yield*this._buildPalette(d)}*_buildPalette(d){const m=new Palette,g=m.getPointContainer().getPointArray(),w=new Array(d.length);for(let j=0;j<d.length;j++)g.push(Point.createByUint32(d[j])),w[j]=1;const I=g.length,P=[];let $=I,F=this._initialDistance;const D=new ProgressTracker($-this._colors,99);for(;$>this._colors;){P.length=0;for(let j=0;j<I;j++){if(D.shouldNotify(I-$)&&(yield{progress:D.progress}),w[j]===0)continue;const Z=g[j];for(let G=j+1;G<I;G++){if(w[G]===0)continue;const H=g[G],W=this._distance.calculateNormalized(Z,H);W<F&&(P.push(new RemovedColor(G,H,W)),w[G]=0,$--)}}F+=$>3*this._colors?this._initialDistance:this._distanceIncrement}if($<this._colors){stableSort(P,(Z,G)=>G.distance-Z.distance);let j=0;for(;$<this._colors&&j<P.length;)w[P[j].index]=1,$++,j++}let U=g.length;for(let j=U-1;j>=0;j--)w[j]===0&&(j!==U-1&&(g[j]=g[U-1]),--U);g.length=U,m.sort(),yield{palette:m,progress:100}}};function createArray1D(d){const m=[];for(let g=0;g<d;g++)m[g]=0;return m}function createArray4D(d,m,g,w){const I=new Array(d);for(let P=0;P<d;P++){I[P]=new Array(m);for(let $=0;$<m;$++){I[P][$]=new Array(g);for(let F=0;F<g;F++){I[P][$][F]=new Array(w);for(let D=0;D<w;D++)I[P][$][F][D]=0}}}return I}function createArray3D(d,m,g){const w=new Array(d);for(let I=0;I<d;I++){w[I]=new Array(m);for(let P=0;P<m;P++){w[I][P]=new Array(g);for(let $=0;$<g;$++)w[I][P][$]=0}}return w}function fillArray3D(d,m,g,w,I){for(let P=0;P<m;P++){d[P]=[];for(let $=0;$<g;$++){d[P][$]=[];for(let F=0;F<w;F++)d[P][$][F]=I}}}function fillArray1D(d,m,g){for(let w=0;w<m;w++)d[w]=g}var WuColorCube=class{constructor(){__publicField(this,"redMinimum"),__publicField(this,"redMaximum"),__publicField(this,"greenMinimum"),__publicField(this,"greenMaximum"),__publicField(this,"blueMinimum"),__publicField(this,"blueMaximum"),__publicField(this,"volume"),__publicField(this,"alphaMinimum"),__publicField(this,"alphaMaximum")}},_WuQuant=class extends AbstractPaletteQuantizer{constructor(d,m=256,g=5){super(),__publicField(this,"_reds"),__publicField(this,"_greens"),__publicField(this,"_blues"),__publicField(this,"_alphas"),__publicField(this,"_sums"),__publicField(this,"_weights"),__publicField(this,"_momentsRed"),__publicField(this,"_momentsGreen"),__publicField(this,"_momentsBlue"),__publicField(this,"_momentsAlpha"),__publicField(this,"_moments"),__publicField(this,"_table"),__publicField(this,"_pixels"),__publicField(this,"_cubes"),__publicField(this,"_colors"),__publicField(this,"_significantBitsPerChannel"),__publicField(this,"_maxSideIndex"),__publicField(this,"_alphaMaxSideIndex"),__publicField(this,"_sideSize"),__publicField(this,"_alphaSideSize"),__publicField(this,"_distance"),this._distance=d,this._setQuality(g),this._initialize(m)}sample(d){const m=d.getPointArray();for(let g=0,w=m.length;g<w;g++)this._addColor(m[g]);this._pixels=this._pixels.concat(m)}*quantize(){yield*this._preparePalette();const d=new Palette;for(let m=0;m<this._colors;m++)if(this._sums[m]>0){const g=this._sums[m],w=this._reds[m]/g,I=this._greens[m]/g,P=this._blues[m]/g,$=this._alphas[m]/g,F=Point.createByRGBA(0|w,0|I,0|P,0|$);d.add(F)}d.sort(),yield{palette:d,progress:100}}*_preparePalette(){yield*this._calculateMoments();let d=0;const m=createArray1D(this._colors);for(let $=1;$<this._colors;++$){this._cut(this._cubes[d],this._cubes[$])?(m[d]=this._cubes[d].volume>1?this._calculateVariance(this._cubes[d]):0,m[$]=this._cubes[$].volume>1?this._calculateVariance(this._cubes[$]):0):(m[d]=0,$--),d=0;let F=m[0];for(let D=1;D<=$;++D)m[D]>F&&(F=m[D],d=D);if(F<=0){this._colors=$+1;break}}const g=[],w=[],I=[],P=[];for(let $=0;$<this._colors;++$){const F=_WuQuant._volume(this._cubes[$],this._weights);F>0?(g[$]=_WuQuant._volume(this._cubes[$],this._momentsRed)/F|0,w[$]=_WuQuant._volume(this._cubes[$],this._momentsGreen)/F|0,I[$]=_WuQuant._volume(this._cubes[$],this._momentsBlue)/F|0,P[$]=_WuQuant._volume(this._cubes[$],this._momentsAlpha)/F|0):(g[$]=0,w[$]=0,I[$]=0,P[$]=0)}this._reds=createArray1D(this._colors+1),this._greens=createArray1D(this._colors+1),this._blues=createArray1D(this._colors+1),this._alphas=createArray1D(this._colors+1),this._sums=createArray1D(this._colors+1);for(let $=0,F=this._pixels.length;$<F;$++){const D=this._pixels[$];let U=-1,j=Number.MAX_VALUE;for(let Z=0;Z<this._colors;Z++){const G=g[Z],H=w[Z],W=I[Z],q=P[Z],Q=this._distance.calculateRaw(G,H,W,q,D.r,D.g,D.b,D.a);Q<j&&(j=Q,U=Z)}this._reds[U]+=D.r,this._greens[U]+=D.g,this._blues[U]+=D.b,this._alphas[U]+=D.a,this._sums[U]++}}_addColor(d){const m=8-this._significantBitsPerChannel,g=1+(d.r>>m),w=1+(d.g>>m),I=1+(d.b>>m),P=1+(d.a>>m);this._weights[P][g][w][I]++,this._momentsRed[P][g][w][I]+=d.r,this._momentsGreen[P][g][w][I]+=d.g,this._momentsBlue[P][g][w][I]+=d.b,this._momentsAlpha[P][g][w][I]+=d.a,this._moments[P][g][w][I]+=this._table[d.r]+this._table[d.g]+this._table[d.b]+this._table[d.a]}*_calculateMoments(){const d=[],m=[],g=[],w=[],I=[],P=[],$=createArray3D(this._sideSize,this._sideSize,this._sideSize),F=createArray3D(this._sideSize,this._sideSize,this._sideSize),D=createArray3D(this._sideSize,this._sideSize,this._sideSize),U=createArray3D(this._sideSize,this._sideSize,this._sideSize),j=createArray3D(this._sideSize,this._sideSize,this._sideSize),Z=createArray3D(this._sideSize,this._sideSize,this._sideSize);let G=0;const H=new ProgressTracker(this._alphaMaxSideIndex*this._maxSideIndex,99);for(let W=1;W<=this._alphaMaxSideIndex;++W){fillArray3D($,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(F,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(D,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(U,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(j,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(Z,this._sideSize,this._sideSize,this._sideSize,0);for(let q=1;q<=this._maxSideIndex;++q,++G){H.shouldNotify(G)&&(yield{progress:H.progress}),fillArray1D(d,this._sideSize,0),fillArray1D(m,this._sideSize,0),fillArray1D(g,this._sideSize,0),fillArray1D(w,this._sideSize,0),fillArray1D(I,this._sideSize,0),fillArray1D(P,this._sideSize,0);for(let Q=1;Q<=this._maxSideIndex;++Q){let et=0,J=0,V=0,rt=0,X=0,ot=0;for(let it=1;it<=this._maxSideIndex;++it)et+=this._weights[W][q][Q][it],J+=this._momentsRed[W][q][Q][it],V+=this._momentsGreen[W][q][Q][it],rt+=this._momentsBlue[W][q][Q][it],X+=this._momentsAlpha[W][q][Q][it],ot+=this._moments[W][q][Q][it],d[it]+=et,m[it]+=J,g[it]+=V,w[it]+=rt,I[it]+=X,P[it]+=ot,$[q][Q][it]=$[q-1][Q][it]+d[it],F[q][Q][it]=F[q-1][Q][it]+m[it],D[q][Q][it]=D[q-1][Q][it]+g[it],U[q][Q][it]=U[q-1][Q][it]+w[it],j[q][Q][it]=j[q-1][Q][it]+I[it],Z[q][Q][it]=Z[q-1][Q][it]+P[it],this._weights[W][q][Q][it]=this._weights[W-1][q][Q][it]+$[q][Q][it],this._momentsRed[W][q][Q][it]=this._momentsRed[W-1][q][Q][it]+F[q][Q][it],this._momentsGreen[W][q][Q][it]=this._momentsGreen[W-1][q][Q][it]+D[q][Q][it],this._momentsBlue[W][q][Q][it]=this._momentsBlue[W-1][q][Q][it]+U[q][Q][it],this._momentsAlpha[W][q][Q][it]=this._momentsAlpha[W-1][q][Q][it]+j[q][Q][it],this._moments[W][q][Q][it]=this._moments[W-1][q][Q][it]+Z[q][Q][it]}}}}static _volumeFloat(d,m){return m[d.alphaMaximum][d.redMaximum][d.greenMaximum][d.blueMaximum]-m[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMaximum]-m[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMaximum]+m[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMaximum]-m[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMaximum]+m[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMaximum]+m[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMaximum]-m[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(m[d.alphaMaximum][d.redMaximum][d.greenMaximum][d.blueMinimum]-m[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMinimum]-m[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMinimum]+m[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]-m[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMinimum]+m[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]+m[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]-m[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum])}static _volume(d,m){return 0|_WuQuant._volumeFloat(d,m)}static _top(d,m,g,w){let I;switch(m){case _WuQuant._alpha:I=w[g][d.redMaximum][d.greenMaximum][d.blueMaximum]-w[g][d.redMaximum][d.greenMinimum][d.blueMaximum]-w[g][d.redMinimum][d.greenMaximum][d.blueMaximum]+w[g][d.redMinimum][d.greenMinimum][d.blueMaximum]-(w[g][d.redMaximum][d.greenMaximum][d.blueMinimum]-w[g][d.redMaximum][d.greenMinimum][d.blueMinimum]-w[g][d.redMinimum][d.greenMaximum][d.blueMinimum]+w[g][d.redMinimum][d.greenMinimum][d.blueMinimum]);break;case _WuQuant._red:I=w[d.alphaMaximum][g][d.greenMaximum][d.blueMaximum]-w[d.alphaMaximum][g][d.greenMinimum][d.blueMaximum]-w[d.alphaMinimum][g][d.greenMaximum][d.blueMaximum]+w[d.alphaMinimum][g][d.greenMinimum][d.blueMaximum]-(w[d.alphaMaximum][g][d.greenMaximum][d.blueMinimum]-w[d.alphaMaximum][g][d.greenMinimum][d.blueMinimum]-w[d.alphaMinimum][g][d.greenMaximum][d.blueMinimum]+w[d.alphaMinimum][g][d.greenMinimum][d.blueMinimum]);break;case _WuQuant._green:I=w[d.alphaMaximum][d.redMaximum][g][d.blueMaximum]-w[d.alphaMaximum][d.redMinimum][g][d.blueMaximum]-w[d.alphaMinimum][d.redMaximum][g][d.blueMaximum]+w[d.alphaMinimum][d.redMinimum][g][d.blueMaximum]-(w[d.alphaMaximum][d.redMaximum][g][d.blueMinimum]-w[d.alphaMaximum][d.redMinimum][g][d.blueMinimum]-w[d.alphaMinimum][d.redMaximum][g][d.blueMinimum]+w[d.alphaMinimum][d.redMinimum][g][d.blueMinimum]);break;case _WuQuant._blue:I=w[d.alphaMaximum][d.redMaximum][d.greenMaximum][g]-w[d.alphaMaximum][d.redMaximum][d.greenMinimum][g]-w[d.alphaMaximum][d.redMinimum][d.greenMaximum][g]+w[d.alphaMaximum][d.redMinimum][d.greenMinimum][g]-(w[d.alphaMinimum][d.redMaximum][d.greenMaximum][g]-w[d.alphaMinimum][d.redMaximum][d.greenMinimum][g]-w[d.alphaMinimum][d.redMinimum][d.greenMaximum][g]+w[d.alphaMinimum][d.redMinimum][d.greenMinimum][g]);break;default:throw new Error("impossible")}return 0|I}static _bottom(d,m,g){switch(m){case _WuQuant._alpha:return-g[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMaximum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMaximum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMaximum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(-g[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMinimum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);case _WuQuant._red:return-g[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMaximum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMaximum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMaximum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(-g[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMinimum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);case _WuQuant._green:return-g[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMaximum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMaximum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMaximum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMaximum]-(-g[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);case _WuQuant._blue:return-g[d.alphaMaximum][d.redMaximum][d.greenMaximum][d.blueMinimum]+g[d.alphaMaximum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMaximum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMaximum][d.redMinimum][d.greenMinimum][d.blueMinimum]-(-g[d.alphaMinimum][d.redMaximum][d.greenMaximum][d.blueMinimum]+g[d.alphaMinimum][d.redMaximum][d.greenMinimum][d.blueMinimum]+g[d.alphaMinimum][d.redMinimum][d.greenMaximum][d.blueMinimum]-g[d.alphaMinimum][d.redMinimum][d.greenMinimum][d.blueMinimum]);default:return 0}}_calculateVariance(d){const m=_WuQuant._volume(d,this._momentsRed),g=_WuQuant._volume(d,this._momentsGreen),w=_WuQuant._volume(d,this._momentsBlue),I=_WuQuant._volume(d,this._momentsAlpha);return _WuQuant._volumeFloat(d,this._moments)-(m*m+g*g+w*w+I*I)/_WuQuant._volume(d,this._weights)}_maximize(d,m,g,w,I,P,$,F,D){const U=0|_WuQuant._bottom(d,m,this._momentsRed),j=0|_WuQuant._bottom(d,m,this._momentsGreen),Z=0|_WuQuant._bottom(d,m,this._momentsBlue),G=0|_WuQuant._bottom(d,m,this._momentsAlpha),H=0|_WuQuant._bottom(d,m,this._weights);let W=0,q=-1;for(let Q=g;Q<w;++Q){let et=U+_WuQuant._top(d,m,Q,this._momentsRed),J=j+_WuQuant._top(d,m,Q,this._momentsGreen),V=Z+_WuQuant._top(d,m,Q,this._momentsBlue),rt=G+_WuQuant._top(d,m,Q,this._momentsAlpha),X=H+_WuQuant._top(d,m,Q,this._weights);if(X!==0){let ot=et*et+J*J+V*V+rt*rt,it=ot/X;et=I-et,J=P-J,V=$-V,rt=F-rt,X=D-X,X!==0&&(ot=et*et+J*J+V*V+rt*rt,it+=ot/X,it>W&&(W=it,q=Q))}}return{max:W,position:q}}_cut(d,m){let g;const w=_WuQuant._volume(d,this._momentsRed),I=_WuQuant._volume(d,this._momentsGreen),P=_WuQuant._volume(d,this._momentsBlue),$=_WuQuant._volume(d,this._momentsAlpha),F=_WuQuant._volume(d,this._weights),D=this._maximize(d,_WuQuant._red,d.redMinimum+1,d.redMaximum,w,I,P,$,F),U=this._maximize(d,_WuQuant._green,d.greenMinimum+1,d.greenMaximum,w,I,P,$,F),j=this._maximize(d,_WuQuant._blue,d.blueMinimum+1,d.blueMaximum,w,I,P,$,F),Z=this._maximize(d,_WuQuant._alpha,d.alphaMinimum+1,d.alphaMaximum,w,I,P,$,F);if(Z.max>=D.max&&Z.max>=U.max&&Z.max>=j.max){if(g=_WuQuant._alpha,Z.position<0)return!1}else g=D.max>=Z.max&&D.max>=U.max&&D.max>=j.max?_WuQuant._red:U.max>=Z.max&&U.max>=D.max&&U.max>=j.max?_WuQuant._green:_WuQuant._blue;switch(m.redMaximum=d.redMaximum,m.greenMaximum=d.greenMaximum,m.blueMaximum=d.blueMaximum,m.alphaMaximum=d.alphaMaximum,g){case _WuQuant._red:m.redMinimum=d.redMaximum=D.position,m.greenMinimum=d.greenMinimum,m.blueMinimum=d.blueMinimum,m.alphaMinimum=d.alphaMinimum;break;case _WuQuant._green:m.greenMinimum=d.greenMaximum=U.position,m.redMinimum=d.redMinimum,m.blueMinimum=d.blueMinimum,m.alphaMinimum=d.alphaMinimum;break;case _WuQuant._blue:m.blueMinimum=d.blueMaximum=j.position,m.redMinimum=d.redMinimum,m.greenMinimum=d.greenMinimum,m.alphaMinimum=d.alphaMinimum;break;case _WuQuant._alpha:m.alphaMinimum=d.alphaMaximum=Z.position,m.blueMinimum=d.blueMinimum,m.redMinimum=d.redMinimum,m.greenMinimum=d.greenMinimum}return d.volume=(d.redMaximum-d.redMinimum)*(d.greenMaximum-d.greenMinimum)*(d.blueMaximum-d.blueMinimum)*(d.alphaMaximum-d.alphaMinimum),m.volume=(m.redMaximum-m.redMinimum)*(m.greenMaximum-m.greenMinimum)*(m.blueMaximum-m.blueMinimum)*(m.alphaMaximum-m.alphaMinimum),!0}_initialize(d){this._colors=d,this._cubes=[];for(let m=0;m<d;m++)this._cubes[m]=new WuColorCube;this._cubes[0].redMinimum=0,this._cubes[0].greenMinimum=0,this._cubes[0].blueMinimum=0,this._cubes[0].alphaMinimum=0,this._cubes[0].redMaximum=this._maxSideIndex,this._cubes[0].greenMaximum=this._maxSideIndex,this._cubes[0].blueMaximum=this._maxSideIndex,this._cubes[0].alphaMaximum=this._alphaMaxSideIndex,this._weights=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsRed=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsGreen=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsBlue=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsAlpha=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._moments=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._table=[];for(let m=0;m<256;++m)this._table[m]=m*m;this._pixels=[]}_setQuality(d=5){this._significantBitsPerChannel=d,this._maxSideIndex=1<<this._significantBitsPerChannel,this._alphaMaxSideIndex=this._maxSideIndex,this._sideSize=this._maxSideIndex+1,this._alphaSideSize=this._alphaMaxSideIndex+1}},WuQuant=_WuQuant;__publicField(WuQuant,"_alpha",3),__publicField(WuQuant,"_red",2),__publicField(WuQuant,"_green",1),__publicField(WuQuant,"_blue",0);var image_exports={};__export(image_exports,{AbstractImageQuantizer:()=>AbstractImageQuantizer,ErrorDiffusionArray:()=>ErrorDiffusionArray,ErrorDiffusionArrayKernel:()=>ErrorDiffusionArrayKernel,ErrorDiffusionRiemersma:()=>ErrorDiffusionRiemersma,NearestColor:()=>NearestColor});var AbstractImageQuantizer=class{quantizeSync(d,m){for(const g of this.quantize(d,m))if(g.pointContainer)return g.pointContainer;throw new Error("unreachable")}},NearestColor=class extends AbstractImageQuantizer{constructor(d){super(),__publicField(this,"_distance"),this._distance=d}*quantize(d,m){const g=d.getPointArray(),w=d.getWidth(),I=d.getHeight(),P=new ProgressTracker(I,99);for(let $=0;$<I;$++){P.shouldNotify($)&&(yield{progress:P.progress});for(let F=0,D=$*w;F<w;F++,D++){const U=g[D];U.from(m.getNearestColor(this._distance,U))}}yield{pointContainer:d,progress:100}}},ErrorDiffusionArrayKernel=(d=>(d[d.FloydSteinberg=0]="FloydSteinberg",d[d.FalseFloydSteinberg=1]="FalseFloydSteinberg",d[d.Stucki=2]="Stucki",d[d.Atkinson=3]="Atkinson",d[d.Jarvis=4]="Jarvis",d[d.Burkes=5]="Burkes",d[d.Sierra=6]="Sierra",d[d.TwoSierra=7]="TwoSierra",d[d.SierraLite=8]="SierraLite",d))(ErrorDiffusionArrayKernel||{}),ErrorDiffusionArray=class extends AbstractImageQuantizer{constructor(d,m,g=!0,w=0,I=!1){super(),__publicField(this,"_minColorDistance"),__publicField(this,"_serpentine"),__publicField(this,"_kernel"),__publicField(this,"_calculateErrorLikeGIMP"),__publicField(this,"_distance"),this._setKernel(m),this._distance=d,this._minColorDistance=w,this._serpentine=g,this._calculateErrorLikeGIMP=I}*quantize(d,m){const g=d.getPointArray(),w=new Point,I=d.getWidth(),P=d.getHeight(),$=[];let F=1,D=1;for(const j of this._kernel){const Z=j[2]+1;D<Z&&(D=Z)}for(let j=0;j<D;j++)this._fillErrorLine($[j]=[],I);const U=new ProgressTracker(P,99);for(let j=0;j<P;j++){U.shouldNotify(j)&&(yield{progress:U.progress}),this._serpentine&&(F*=-1);const Z=j*I,G=F===1?0:I-1,H=F===1?I:-1;this._fillErrorLine($[0],I),$.push($.shift());const W=$[0];for(let q=G,Q=Z+G;q!==H;q+=F,Q+=F){const et=g[Q],J=W[q];w.from(et);const V=Point.createByRGBA(inRange0to255Rounded(et.r+J[0]),inRange0to255Rounded(et.g+J[1]),inRange0to255Rounded(et.b+J[2]),inRange0to255Rounded(et.a+J[3])),rt=m.getNearestColor(this._distance,V);if(et.from(rt),this._minColorDistance&&this._distance.calculateNormalized(w,rt)<this._minColorDistance)continue;let X,ot,it,st;this._calculateErrorLikeGIMP?(X=V.r-rt.r,ot=V.g-rt.g,it=V.b-rt.b,st=V.a-rt.a):(X=w.r-rt.r,ot=w.g-rt.g,it=w.b-rt.b,st=w.a-rt.a);const at=F===1?0:this._kernel.length-1,ft=F===1?this._kernel.length:-1;for(let K=at;K!==ft;K+=F){const lt=this._kernel[K][1]*F,vt=this._kernel[K][2];if(lt+q>=0&&lt+q<I&&vt+j>=0&&vt+j<P){const dt=this._kernel[K][0],ht=$[vt][lt+q];ht[0]+=X*dt,ht[1]+=ot*dt,ht[2]+=it*dt,ht[3]+=st*dt}}}}yield{pointContainer:d,progress:100}}_fillErrorLine(d,m){d.length>m&&(d.length=m);const g=d.length;for(let w=0;w<g;w++){const I=d[w];I[0]=I[1]=I[2]=I[3]=0}for(let w=g;w<m;w++)d[w]=[0,0,0,0]}_setKernel(d){switch(d){case 0:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case 1:this._kernel=[[3/8,1,0],[3/8,0,1],[2/8,1,1]];break;case 2:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case 3:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case 4:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case 5:this._kernel=[[.25,1,0],[4/32,2,0],[2/32,-2,1],[4/32,-1,1],[.25,0,1],[4/32,1,1],[2/32,2,1]];break;case 6:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[4/32,-1,1],[5/32,0,1],[4/32,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case 7:this._kernel=[[.25,1,0],[3/16,2,0],[1/16,-2,1],[2/16,-1,1],[3/16,0,1],[2/16,1,1],[1/16,2,1]];break;case 8:this._kernel=[[.5,1,0],[1/4,-1,1],[1/4,0,1]];break;default:throw new Error(`ErrorDiffusionArray: unknown kernel = ${d}`)}}};function*hilbertCurve(d,m,g){const w=Math.max(d,m),I={width:d,height:m,level:Math.floor(Math.log(w)/Math.log(2)+1),callback:g,tracker:new ProgressTracker(d*m,99),index:0,x:0,y:0};yield*walkHilbert(I,1),visit(I,0)}function*walkHilbert(d,m){if(!(d.level<1)){switch(d.tracker.shouldNotify(d.index)&&(yield{progress:d.tracker.progress}),d.level--,m){case 2:yield*walkHilbert(d,1),visit(d,3),yield*walkHilbert(d,2),visit(d,4),yield*walkHilbert(d,2),visit(d,2),yield*walkHilbert(d,4);break;case 3:yield*walkHilbert(d,4),visit(d,2),yield*walkHilbert(d,3),visit(d,1),yield*walkHilbert(d,3),visit(d,3),yield*walkHilbert(d,1);break;case 1:yield*walkHilbert(d,2),visit(d,4),yield*walkHilbert(d,1),visit(d,3),yield*walkHilbert(d,1),visit(d,1),yield*walkHilbert(d,3);break;case 4:yield*walkHilbert(d,3),visit(d,1),yield*walkHilbert(d,4),visit(d,2),yield*walkHilbert(d,4),visit(d,4),yield*walkHilbert(d,2)}d.level++}}function visit(d,m){switch(d.x>=0&&d.x<d.width&&d.y>=0&&d.y<d.height&&(d.callback(d.x,d.y),d.index++),m){case 2:d.x--;break;case 3:d.x++;break;case 1:d.y--;break;case 4:d.y++}}var ErrorDiffusionRiemersma=class extends AbstractImageQuantizer{constructor(d,m=16,g=1){super(),__publicField(this,"_distance"),__publicField(this,"_weights"),__publicField(this,"_errorQueueSize"),this._distance=d,this._errorQueueSize=m,this._weights=ErrorDiffusionRiemersma._createWeights(g,m)}*quantize(d,m){const g=d.getPointArray(),w=d.getWidth(),I=d.getHeight(),P=[];let $=0;for(let F=0;F<this._errorQueueSize;F++)P[F]={r:0,g:0,b:0,a:0};yield*hilbertCurve(w,I,(F,D)=>{const U=g[F+D*w];let{r:j,g:Z,b:G,a:H}=U;for(let et=0;et<this._errorQueueSize;et++){const J=this._weights[et],V=P[(et+$)%this._errorQueueSize];j+=V.r*J,Z+=V.g*J,G+=V.b*J,H+=V.a*J}const W=Point.createByRGBA(inRange0to255Rounded(j),inRange0to255Rounded(Z),inRange0to255Rounded(G),inRange0to255Rounded(H)),q=m.getNearestColor(this._distance,W);$=($+1)%this._errorQueueSize;const Q=($+this._errorQueueSize-1)%this._errorQueueSize;P[Q].r=U.r-q.r,P[Q].g=U.g-q.g,P[Q].b=U.b-q.b,P[Q].a=U.a-q.a,U.from(q)}),yield{pointContainer:d,progress:100}}static _createWeights(d,m){const g=[],w=Math.exp(Math.log(m)/(m-1));for(let I=0,P=1;I<m;I++)g[I]=(P+.5|0)/m*d,P*=w;return g}},quality_exports={};__export(quality_exports,{ssim:()=>ssim});var K1=.01,K2=.03;function ssim(d,m){if(d.getHeight()!==m.getHeight()||d.getWidth()!==m.getWidth())throw new Error("Images have different sizes!");const g=(255*K1)**2,w=(255*K2)**2;let I=0,P=0;return iterate(d,m,($,F,D,U)=>{let j=0,Z=0,G=0;for(let W=0;W<$.length;W++)Z+=($[W]-D)**2,G+=(F[W]-U)**2,j+=($[W]-D)*(F[W]-U);const H=$.length-1;Z/=H,G/=H,j/=H,P+=(2*D*U+g)*(2*j+w)/((D**2+U**2+g)*(Z+G+w)),I++}),P/I}function iterate(d,m,g){const w=d.getWidth(),I=d.getHeight();for(let P=0;P<I;P+=8)for(let $=0;$<w;$+=8){const F=Math.min(8,w-$),D=Math.min(8,I-P),U=calculateLumaValuesForWindow(d,$,P,F,D),j=calculateLumaValuesForWindow(m,$,P,F,D);g(U,j,calculateAverageLuma(U),calculateAverageLuma(j))}}function calculateLumaValuesForWindow(d,m,g,w,I){const P=d.getPointArray(),$=[];let F=0;for(let D=g;D<g+I;D++){const U=D*d.getWidth();for(let j=m;j<m+w;j++){const Z=P[U+j];$[F]=.2126*Z.r+.7152*Z.g+.0722*Z.b,F++}}return $}function calculateAverageLuma(d){let m=0;for(const g of d)m+=g;return m/d.length}function buildPaletteSync(d,{colorDistanceFormula:m,paletteQuantization:g,colors:w}={}){const I=paletteQuantizationToPaletteQuantizer(colorDistanceFormulaToColorDistance(m),g,w);return d.forEach(P=>I.sample(P)),I.quantizeSync()}function applyPaletteSync(d,m,{colorDistanceFormula:g,imageQuantization:w}={}){return imageQuantizationToImageQuantizer(colorDistanceFormulaToColorDistance(g),w).quantizeSync(d,m)}function colorDistanceFormulaToColorDistance(d="euclidean-bt709"){switch(d){case"cie94-graphic-arts":return new CIE94GraphicArts;case"cie94-textiles":return new CIE94Textiles;case"ciede2000":return new CIEDE2000;case"color-metric":return new CMetric;case"euclidean":return new Euclidean;case"euclidean-bt709":return new EuclideanBT709;case"euclidean-bt709-noalpha":return new EuclideanBT709NoAlpha;case"manhattan":return new Manhattan;case"manhattan-bt709":return new ManhattanBT709;case"manhattan-nommyde":return new ManhattanNommyde;case"pngquant":return new PNGQuant;default:throw new Error(`Unknown colorDistanceFormula ${d}`)}}function imageQuantizationToImageQuantizer(d,m="floyd-steinberg"){switch(m){case"nearest":return new NearestColor(d);case"riemersma":return new ErrorDiffusionRiemersma(d);case"floyd-steinberg":return new ErrorDiffusionArray(d,0);case"false-floyd-steinberg":return new ErrorDiffusionArray(d,1);case"stucki":return new ErrorDiffusionArray(d,2);case"atkinson":return new ErrorDiffusionArray(d,3);case"jarvis":return new ErrorDiffusionArray(d,4);case"burkes":return new ErrorDiffusionArray(d,5);case"sierra":return new ErrorDiffusionArray(d,6);case"two-sierra":return new ErrorDiffusionArray(d,7);case"sierra-lite":return new ErrorDiffusionArray(d,8);default:throw new Error(`Unknown imageQuantization ${m}`)}}function paletteQuantizationToPaletteQuantizer(d,m="wuquant",g=256){switch(m){case"neuquant":return new NeuQuant(d,g);case"rgbquant":return new RGBQuant(d,g);case"wuquant":return new WuQuant(d,g);case"neuquant-float":return new NeuQuantFloat(d,g);default:throw new Error(`Unknown paletteQuantization ${m}`)}}/**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * cie94.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * ciede2000.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * cmetric.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * common.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * constants.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * ditherErrorDiffusionArray.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * euclidean.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * helper.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * hueStatistics.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * iq.ts - Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * lab2rgb.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * lab2xyz.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * manhattanNeuQuant.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * nearestColor.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * palette.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * pngQuant.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * point.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * pointContainer.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgb2hsl.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgb2lab.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgb2xyz.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * ssim.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * wuQuant.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * xyz2lab.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * xyz2rgb.ts - part of Image Quantization Library
 *//**
 * @preserve
 * MIT License
 *
 * Copyright 2015-2018 Igor Bezkrovnyi
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * riemersma.ts - part of Image Quantization Library
 *//**
 * @preserve TypeScript port:
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * colorHistogram.ts - part of Image Quantization Library
 *//**
 * @preserve TypeScript port:
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * neuquant.ts - part of Image Quantization Library
 *//**
 * @preserve TypeScript port:
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgbquant.ts - part of Image Quantization Library
 */typeof setImmediate=="function"?setImmediate:typeof process<"u"&&(process==null||process.nextTick);const QuantizeOptionsSchema=z.object({colors:z.number().optional(),colorDistanceFormula:z.union([z.literal("cie94-textiles"),z.literal("cie94-graphic-arts"),z.literal("ciede2000"),z.literal("color-metric"),z.literal("euclidean"),z.literal("euclidean-bt709-noalpha"),z.literal("euclidean-bt709"),z.literal("manhattan"),z.literal("manhattan-bt709"),z.literal("manhattan-nommyde"),z.literal("pngquant")]).optional(),paletteQuantization:z.union([z.literal("neuquant"),z.literal("neuquant-float"),z.literal("rgbquant"),z.literal("wuquant")]).optional(),imageQuantization:z.union([z.literal("nearest"),z.literal("riemersma"),z.literal("floyd-steinberg"),z.literal("false-floyd-steinberg"),z.literal("stucki"),z.literal("atkinson"),z.literal("jarvis"),z.literal("burkes"),z.literal("sierra"),z.literal("two-sierra"),z.literal("sierra-lite")]).optional()}),methods={quantize(d,m){const{colors:g,colorDistanceFormula:w,paletteQuantization:I,imageQuantization:P}=QuantizeOptionsSchema.parse(m),$=utils_exports.PointContainer.fromUint8Array(d.bitmap.data,d.bitmap.width,d.bitmap.height),F=applyPaletteSync($,buildPaletteSync([$],{colors:g,colorDistanceFormula:w,paletteQuantization:I}),{colorDistanceFormula:w,imageQuantization:P});return d.bitmap.data=Buffer$1.from(F.toUint8Array()),d}};var parseBmfontAscii=function(d){if(!d)throw new Error("no data provided");var m={pages:[],chars:[],kernings:[]},g=(d=d.toString().trim()).split(/\r\n?|\n/g);if(g.length===0)throw new Error("no data in BMFont file");for(var w=0;w<g.length;w++){var I=splitLine(g[w],w);if(I)if(I.key==="page"){if(typeof I.data.id!="number")throw new Error("malformed file at line "+w+" -- needs page id=N");if(typeof I.data.file!="string")throw new Error("malformed file at line "+w+' -- needs page file="path"');m.pages[I.data.id]=I.data.file}else I.key==="chars"||I.key==="kernings"||(I.key==="char"?m.chars.push(I.data):I.key==="kerning"?m.kernings.push(I.data):m[I.key]=I.data)}return m};function splitLine(d,m){if(!(d=d.replace(/\t+/g," ").trim()))return null;var g=d.indexOf(" ");if(g===-1)throw new Error("no named row at line "+m);var w=d.substring(0,g);d=(d=(d=(d=d.substring(g+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map(function(D){return D.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var I=[],P=0;P<d.length;P++){var $=d[P];P===0?I.push({key:$[0],data:""}):P===d.length-1?I[I.length-1].data=parseData($[0]):(I[I.length-1].data=parseData($[0]),I.push({key:$[1],data:""}))}var F={key:w,data:{}};return I.forEach(function(D){F.data[D.key]=D.data}),F}function parseData(d){return d&&d.length!==0?d.indexOf('"')===0||d.indexOf("'")===0?d.substring(1,d.length-1):d.indexOf(",")!==-1?parseIntList$1(d):parseInt(d,10):""}function parseIntList$1(d){return d.split(",").map(function(m){return parseInt(m,10)})}getDefaultExportFromCjs(parseBmfontAscii);var GLYPH_DESIGNER_ERROR="chasrset",parseAttribs=function(d){for(var m in d=Object.assign({},d),GLYPH_DESIGNER_ERROR in d&&(d.charset=d[GLYPH_DESIGNER_ERROR],delete d[GLYPH_DESIGNER_ERROR]),d)m!=="face"&&m!=="charset"&&(d[m]=m==="padding"||m==="spacing"?parseIntList(d[m]):parseInt(d[m],10));return d};function parseIntList(d){return d.split(",").map(function(m){return parseInt(m,10)})}var xmlParseFromString=self.DOMParser!==void 0?function(d){return new self.DOMParser().parseFromString(d,"application/xml")}:self.ActiveXObject!==void 0&&new self.ActiveXObject("Microsoft.XMLDOM")?function(d){var m=new self.ActiveXObject("Microsoft.XMLDOM");return m.async="false",m.loadXML(d),m}:function(d){var m=document.createElement("div");return m.innerHTML=d,m},parseAttributes=parseAttribs,parseFromString=xmlParseFromString,NAME_MAP={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"},browser=function(d){d=d.toString();var m=parseFromString(d),g={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(U){var j=m.getElementsByTagName(U)[0];j&&(g[U]=parseAttributes(getAttribs(j)))});var w=m.getElementsByTagName("pages")[0];if(!w)throw new Error("malformed file -- no <pages> element");for(var I=w.getElementsByTagName("page"),P=0;P<I.length;P++){var $=I[P],F=parseInt($.getAttribute("id"),10),D=$.getAttribute("file");if(isNaN(F))throw new Error('malformed file -- page "id" attribute is NaN');if(!D)throw new Error('malformed file -- needs page "file" attribute');g.pages[parseInt(F,10)]=D}return["chars","kernings"].forEach(function(U){var j=m.getElementsByTagName(U)[0];if(j)for(var Z=U.substring(0,U.length-1),G=j.getElementsByTagName(Z),H=0;H<G.length;H++){var W=G[H];g[U].push(parseAttributes(getAttribs(W)))}}),g};function getAttribs(d){return getAttribList(d).reduce(function(m,g){return m[mapName(g.nodeName)]=g.nodeValue,m},{})}function getAttribList(d){for(var m=[],g=0;g<d.attributes.length;g++)m.push(d.attributes[g]);return m}function mapName(d){return NAME_MAP[d.toLowerCase()]||d}getDefaultExportFromCjs(browser);var HEADER$1=[66,77,70],parseBmfontBinary=function(d){if(d.length<6)throw new Error("invalid buffer length for BMFont");var m=HEADER$1.every(function(P,$){return d.readUInt8($)===P});if(!m)throw new Error("BMFont missing BMF byte header");var g=3;if(d.readUInt8(g++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var w={kernings:[],chars:[]},I=0;I<5;I++)g+=readBlock(w,d,g);return w};function readBlock(d,m,g){if(g>m.length-1)return 0;var w=m.readUInt8(g++),I=m.readInt32LE(g);switch(g+=4,w){case 1:d.info=readInfo(m,g);break;case 2:d.common=readCommon(m,g);break;case 3:d.pages=readPages(m,g,I);break;case 4:d.chars=readChars(m,g,I);break;case 5:d.kernings=readKernings(m,g,I)}return 5+I}function readInfo(d,m){var g={};g.size=d.readInt16LE(m);var w=d.readUInt8(m+2);return g.smooth=w>>7&1,g.unicode=w>>6&1,g.italic=w>>5&1,g.bold=w>>4&1,w>>3&1&&(g.fixedHeight=1),g.charset=d.readUInt8(m+3)||"",g.stretchH=d.readUInt16LE(m+4),g.aa=d.readUInt8(m+6),g.padding=[d.readInt8(m+7),d.readInt8(m+8),d.readInt8(m+9),d.readInt8(m+10)],g.spacing=[d.readInt8(m+11),d.readInt8(m+12)],g.outline=d.readUInt8(m+13),g.face=readStringNT(d,m+14),g}function readCommon(d,m){var g={};return g.lineHeight=d.readUInt16LE(m),g.base=d.readUInt16LE(m+2),g.scaleW=d.readUInt16LE(m+4),g.scaleH=d.readUInt16LE(m+6),g.pages=d.readUInt16LE(m+8),d.readUInt8(m+10),g.packed=0,g.alphaChnl=d.readUInt8(m+11),g.redChnl=d.readUInt8(m+12),g.greenChnl=d.readUInt8(m+13),g.blueChnl=d.readUInt8(m+14),g}function readPages(d,m,g){for(var w=[],I=readNameNT(d,m),P=I.length+1,$=g/P,F=0;F<$;F++)w[F]=d.slice(m,m+I.length).toString("utf8"),m+=P;return w}function readChars(d,m,g){for(var w=[],I=g/20,P=0;P<I;P++){var $={},F=20*P;$.id=d.readUInt32LE(m+0+F),$.x=d.readUInt16LE(m+4+F),$.y=d.readUInt16LE(m+6+F),$.width=d.readUInt16LE(m+8+F),$.height=d.readUInt16LE(m+10+F),$.xoffset=d.readInt16LE(m+12+F),$.yoffset=d.readInt16LE(m+14+F),$.xadvance=d.readInt16LE(m+16+F),$.page=d.readUInt8(m+18+F),$.chnl=d.readUInt8(m+19+F),w[P]=$}return w}function readKernings(d,m,g){for(var w=[],I=g/10,P=0;P<I;P++){var $={},F=10*P;$.first=d.readUInt32LE(m+0+F),$.second=d.readUInt32LE(m+4+F),$.amount=d.readInt16LE(m+8+F),w[P]=$}return w}function readNameNT(d,m){for(var g=m;g<d.length&&d[g]!==0;g++);return d.slice(m,g)}function readStringNT(d,m){return readNameNT(d,m).toString("utf8")}getDefaultExportFromCjs(parseBmfontBinary);function e(d){return d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}const t=d=>{if(!d)return null;const m={};switch(d.type){case"ELEMENT":{let g={};const w=E(d.value.attributes),I=t(d.value.children);if(w&&(g=Object.assign(g,w)),I){const P=r(d.value.children);g=Object.assign(g,P)}m[d.value.type]=g;break}case"ATTRIBUTE":{const g=d.value;m[g.name]=g.value;break}case"CONTENT":return{content:d.value}}return m},r=d=>d&&Array.isArray(d)&&d.length!==0?n(d)?{content:d[0].value}:{children:d.map(t)}:null,n=d=>d&&Array.isArray(d)&&d.length===1&&d[0].type==="CONTENT",E=d=>d&&Array.isArray(d)?d.map(t).reduce((m,g)=>Object.assign(m,g),{}):null;var s={convert:d=>t(d.value.children[0])},a={Token:(d,m)=>({type:d,value:m}),TOKEN_TYPE:{OPEN_BRACKET:"OPEN_BRACKET",ELEMENT_TYPE:"ELEMENT_TYPE",CLOSE_ELEMENT:"CLOSE_ELEMENT",ATTRIB_NAME:"ATTRIB_NAME",ATTRIB_VALUE:"ATTRIB_VALUE",ASSIGN:"ASSIGN",CLOSE_BRACKET:"CLOSE_BRACKET",CONTENT:"CONTENT",EOF:"EOF"}};const{Token:T,TOKEN_TYPE:u}=a,c=T("EOF"),l=d=>d===" "||d===`
`||d==="\r"||d==="	",o=d=>d.replace(/'/g,'"');var N={createLexer:function(d){let m=null,g=(Z=>{let G=0;for(;G<Z.length&&l(Z[G]);)G++;return((H,W)=>{if(H.startsWith("<?xml",W)){const q=H.length;for(;W<q;)if(H[W]!=="?")W++;else{if(H[W+1]===">")return W+2;W++}}return W})(Z,G)})(d),w=[];const I=()=>d[g],P=()=>m!==c&&g<d.length,$=Z=>Z==='"'||Z==="'",F=()=>{for(;P()&&l(d[g]);)g++},D=Z=>{if(P()){if(d[g]==="<"){let G="<";return g++,P()&&d[g]==="/"?(g++,G="</"):P()&&d[g]==="!"&&d[g+1]==="-"&&d[g+2]==="-"&&(g++,g++,g++,G="<!--"),G}if(I()==="/"){let G="/";return g++,P()&&I()===">"&&(g++,G="/>"),G}if(d[g]==="="||d[g]===">"){const G=d[g];return g++,G}}return U(!!Z)},U=Z=>{const G=Z?/[^>=<]/u:/[a-zA-Z0-9_:-]/;let H=g;for(;P()&&d[g].match(G);)g++;return o(d.substring(H,g))},j=()=>{const Z=g;F();const G=g-Z;if(P())if(m&&m.type===u.OPEN_BRACKET){F();const H=D(!1);m=T(u.ELEMENT_TYPE,H),w.push(H)}else if(m&&m.type===u.ASSIGN){P()&&$(I())&&g++;let H=g;for(;P()&&!$(I());)g++;const W=o(d.substring(H,g));g++,m=T(u.ATTRIB_VALUE,W)}else{F();let H=D(!0);switch(H){case"=":m=m.type===u.ATTRIB_NAME?T(u.ASSIGN):T(u.CONTENT,H);break;case"</":{const W=g;for(;d[g]!==">";)g++;m=T(u.CLOSE_ELEMENT,d.substring(W,g)),g++,w.pop();break}case"/>":{const W=w.pop();m=T(u.CLOSE_ELEMENT,W);break}case"<!--":{const W=["!","-","-"];for(;P()&&(W[2]!==">"||W[1]!=="-"||W[0]!=="-");)W.shift(),W.push(d[g]),g++;return j()}case">":m=T(u.CLOSE_BRACKET);break;case"<":m=T(u.OPEN_BRACKET);break;default:if(H&&H.length>0){if(m.type===u.CLOSE_BRACKET){let W="";I()!=="<"&&(W=U(!0)),m=T(u.CONTENT,H+W)}else if(m.type!==u.ATTRIB_NAME&&m.type!==u.CONTENT)m.type===u.CLOSE_ELEMENT?(H=" ".repeat(G)+H,m=T(u.CONTENT,H)):m=T(u.ATTRIB_NAME,H);else{const W=" ".repeat(G)+H;m=T(u.CONTENT,W)}break}{const W='Unknown Syntax : "'+d[g]+'"';throw new Error(W)}}}else m=c;return m};return{peek:I,next:j,hasNext:P}}};const{createLexer:i}=N,{Token:p,TOKEN_TYPE:O}=a,[A,f,C,h]=["ROOT","ELEMENT","ATTRIBUTE","CONTENT"],_=(d,m)=>({type:d,value:m}),L=d=>_(h,d),y=(d,m,g)=>_(f,{type:d,attributes:m,children:g}),v=(d,m)=>_(C,{name:d,value:m}),S=(d,m)=>{const g=[];for(;d.hasNext();){const w=d.next();switch(w.type){case O.OPEN_BRACKET:{const I=d.next(),[P,$]=R(d);let F=[];$.type!==O.CLOSE_ELEMENT&&(F=S(d,I)),F&&F.length>0&&F[0].type===O.CONTENT&&(F=b(F)),g.push(y(I.value,P,F));break}case O.CLOSE_ELEMENT:if(w.value===m.value)return g;break;case O.CONTENT:g.push(L(w.value));break;case O.EOF:return g;default:throw new Error(`Unknown Lexem type: ${w.type} "${w.value}, scoping element: ${m.value}"`)}}return g},R=d=>{const m=[];let g=d.peek();if(!d.hasNext()||g&&g.type===O.CLOSE_BRACKET||g&&g.type===O.CLOSE_ELEMENT)return[m,g];for(g=d.next();d.hasNext()&&g&&g.type!==O.CLOSE_BRACKET&&g.type!==O.CLOSE_ELEMENT;){const w=g;d.next();const I=d.next(),P=v(w.value,I.value);m.push(P),g=d.next()}return[m,g]};function b(d){let m=[],g="";return d.forEach(w=>{w.type===O.CONTENT?g+=w.value:(g.length&&(m.push(L(g)),g=""),m.push(w))}),g.length&&m.push(L(g)),m}var B={transpile:function(d,m){const g=(w=>_(A,{children:S(w,p(A,"ROOT"))}))(i(d));return m?m.convert(g):g},Node:_,ElementNode:y,AttribNode:v};const M=s,{transpile:x}=B;var k=e({convertXML:function(d,m){return x(d,m||M)},createAST:function(d){return x(d)}}),simpleXmlToJson_min=k;getDefaultExportFromCjs(simpleXmlToJson_min);createJimp({formats:[png]});Buffer$1.from([66,77,70,3]);var pixelmatch_1=pixelmatch;const defaultOptions={threshold:.1,includeAA:!1,alpha:.1,aaColor:[255,255,0],diffColor:[255,0,0],diffColorAlt:null,diffMask:!1};function pixelmatch(d,m,g,w,I,P){if(!isPixelData(d)||!isPixelData(m)||g&&!isPixelData(g))throw new Error("Image data: Uint8Array, Uint8ClampedArray or Buffer expected.");if(d.length!==m.length||g&&g.length!==d.length)throw new Error("Image sizes do not match.");if(d.length!==w*I*4)throw new Error("Image data size does not match width/height.");P=Object.assign({},defaultOptions,P);const $=w*I,F=new Uint32Array(d.buffer,d.byteOffset,$),D=new Uint32Array(m.buffer,m.byteOffset,$);let U=!0;for(let G=0;G<$;G++)if(F[G]!==D[G]){U=!1;break}if(U){if(g&&!P.diffMask)for(let G=0;G<$;G++)drawGrayPixel(d,4*G,P.alpha,g);return 0}const j=35215*P.threshold*P.threshold;let Z=0;for(let G=0;G<I;G++)for(let H=0;H<w;H++){const W=4*(G*w+H),q=colorDelta(d,m,W,W);Math.abs(q)>j?P.includeAA||!antialiased(d,H,G,w,I,m)&&!antialiased(m,H,G,w,I,d)?(g&&drawPixel(g,W,...q<0&&P.diffColorAlt||P.diffColor),Z++):g&&!P.diffMask&&drawPixel(g,W,...P.aaColor):g&&(P.diffMask||drawGrayPixel(d,W,P.alpha,g))}return Z}function isPixelData(d){return ArrayBuffer.isView(d)&&d.constructor.BYTES_PER_ELEMENT===1}function antialiased(d,m,g,w,I,P){const $=Math.max(m-1,0),F=Math.max(g-1,0),D=Math.min(m+1,w-1),U=Math.min(g+1,I-1),j=4*(g*w+m);let Z,G,H,W,q=m===$||m===D||g===F||g===U?1:0,Q=0,et=0;for(let J=$;J<=D;J++)for(let V=F;V<=U;V++){if(J===m&&V===g)continue;const rt=colorDelta(d,d,j,4*(V*w+J),!0);if(rt===0){if(q++,q>2)return!1}else rt<Q?(Q=rt,Z=J,G=V):rt>et&&(et=rt,H=J,W=V)}return Q!==0&&et!==0&&(hasManySiblings(d,Z,G,w,I)&&hasManySiblings(P,Z,G,w,I)||hasManySiblings(d,H,W,w,I)&&hasManySiblings(P,H,W,w,I))}function hasManySiblings(d,m,g,w,I){const P=Math.max(m-1,0),$=Math.max(g-1,0),F=Math.min(m+1,w-1),D=Math.min(g+1,I-1),U=4*(g*w+m);let j=m===P||m===F||g===$||g===D?1:0;for(let Z=P;Z<=F;Z++)for(let G=$;G<=D;G++){if(Z===m&&G===g)continue;const H=4*(G*w+Z);if(d[U]===d[H]&&d[U+1]===d[H+1]&&d[U+2]===d[H+2]&&d[U+3]===d[H+3]&&j++,j>2)return!0}return!1}function colorDelta(d,m,g,w,I){let P=d[g+0],$=d[g+1],F=d[g+2],D=d[g+3],U=m[w+0],j=m[w+1],Z=m[w+2],G=m[w+3];if(D===G&&P===U&&$===j&&F===Z)return 0;D<255&&(D/=255,P=blend(P,D),$=blend($,D),F=blend(F,D)),G<255&&(G/=255,U=blend(U,G),j=blend(j,G),Z=blend(Z,G));const H=rgb2y(P,$,F),W=rgb2y(U,j,Z),q=H-W;if(I)return q;const Q=rgb2i(P,$,F)-rgb2i(U,j,Z),et=rgb2q(P,$,F)-rgb2q(U,j,Z),J=.5053*q*q+.299*Q*Q+.1957*et*et;return H>W?-J:J}function rgb2y(d,m,g){return .29889531*d+.58662247*m+.11448223*g}function rgb2i(d,m,g){return .59597799*d-.2741761*m-.32180189*g}function rgb2q(d,m,g){return .21147017*d-.52261711*m+.31114694*g}function blend(d,m){return 255+(d-255)*m}function drawPixel(d,m,g,w,I){d[m+0]=g,d[m+1]=w,d[m+2]=I,d[m+3]=255}function drawGrayPixel(d,m,g,w){const I=blend(rgb2y(d[m+0],d[m+1],d[m+2]),g*d[m+3]/255);drawPixel(w,m,I,I,I)}getDefaultExportFromCjs(pixelmatch_1);const defaultPlugins=[methods$h,methods$g,methods$f,methods$e,methods$c,methods$a,methods$b,methods$9,methods$8,methods$7,methods$6,methods$5,methods$4,methods$3,methods$d,methods$2,methods$1,methods],defaultFormats=[bmp,msBmp,gif,jpeg$2,png,tiff];bmp().mime,gif().mime,jpeg$2().mime,png().mime,tiff().mime;const Jimp=createJimp({formats:defaultFormats,plugins:defaultPlugins});var root_1=template('<div class="margin-bottom svelte-rj148o"><img></div> <div><button type="button" class="btn btn-warning margin-bottom disabled svelte-rj148o">Upload</button> <button type="button" class="btn btn-warning margin-bottom svelte-rj148o">Save BMP</button></div>',1),root$2=template('<div style="card pad-bottom"><div class="card-header align-center svelte-rj148o"> </div> <div class="card-body align-center svelte-rj148o"><!></div></div>');function ImageField(d,m){push(m,!0);let g=state(void 0),w;function I(H){let W=0;for(let q=0;q<8;q++)W=W<<1|H&1,H>>=1;return W}async function P(H){let W=new Jimp({height:32,width:32});W.background=4294967295;for(let q=0;q<32;q++)for(let Q=0;Q<32;Q++){const et=q*32+Q,J=Math.floor(et/8),V=et%8;let rt=0;if(q<30&&Q<30){const ot=H.substr(J*2,2),it=parseInt(ot,16);rt=I(it)>>7-V&1}else rt=1;const X=rt===0?4294967295:255;W.setPixelColor(X,Q,q)}w=await W.clone(),set(g,proxy(await W.rotate(-90).flip({horizontal:!0,vertical:!1}).resize({w:160,h:160,mode:ResizeStrategy.NEAREST_NEIGHBOR}).getBase64("image/bmp")))}async function $(H,W){try{const Q=await(await window.showSaveFilePicker({suggestedName:`${m.name.split(" ").join("-")}.${W}`,types:[{description:`${W.toUpperCase()} Image`,accept:{[`image/${W}`]:[`.${W}`]}}]})).createWritable();await H.rotate(-90).flip({horizontal:!0,vertical:!1}),W!="bmp";const et=await H.getBuffer(`image/${W}`);await Q.write(et),await Q.close()}catch(q){console.error("Error saving the image:",q)}}m.value&&P(m.value);var F=root$2(),D=child(F),U=child(D),j=sibling(D,2),Z=child(j);{var G=H=>{var W=root_1(),q=first_child(W),Q=child(q),et=sibling(q,2),J=sibling(child(et),2);template_effect(()=>set_attribute(Q,"src",get(g))),event("click",J,()=>$(w.clone(),"bmp")),append(H,W)};if_block(Z,H=>{get(g)&&H(G)})}template_effect(()=>set_text(U,m.name)),append(d,F),pop()}var root$1=template('<div class="footer bg-dark top-shadow svelte-g4s7o6"><footer><div><span>Zach Lambert  2025</span></div> <div class="margin-top-bottom svelte-g4s7o6"><a href="https://ko-fi.com/zarch" target="_blank"><img class="kofi svelte-g4s7o6" src="kofi_symbol.png"></a></div></footer></div>');function Footer(d){var m=root$1();append(d,m)}var root_2=template('<div class="card all-sides-shadow svelte-d1lhdz"><div class="card-body"><div class="row"><div class="col"><!></div></div> <div class="row"><div class="col"><!></div></div> <div class="row"><div class="col"><!></div> <div class="col"><!></div></div> <div class="row"><div class="col"><!></div> <div class="col"><!></div></div> <div class="row"><div class="col"><!></div> <div class="col"><!></div></div> <div class="row"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div></div></div></div>'),root=template('<!> <div class="container mt-3"><!> <!></div> <!>',1);function App(d,m){push(m,!1);const g=new LinkAnalyzer;let w=mutable_state(),I=mutable_state(!1),P=mutable_state(),$=mutable_state();async function F(){set(I,!0);try{let X=await g.connect();await delay(2e3),set($,await g.writeSync(X,"v")),set($,get($).trim()),set(w,X)}catch{alert("Port busy or not selected")}set(I,!1)}async function D(){set(I,!0);try{let X=await g.writeSync(get(w),"r");set(P,linkChip.toObject(X))}catch(X){console.error(X)}set(I,!1)}async function U(){set(I,!0);let X=linkChip.toRaw(get(P));const ot=128;for(let it=0;it<1024/ot;it++){let st=it*(ot*2),at=it*(ot*2)+ot*2,ft=`w:${it*ot} ${X.raw.substring(st,at)}`;await g.writeSync(get(w),ft)}set(P,X),set(I,!1)}async function j(){try{const[X]=await window.showOpenFilePicker(),ot=await X.getFile(),it=new FileReader;it.onload=st=>{let at="";const ft=st.target.result,K=new Uint8Array(ft);for(let lt=0;lt<K.length;lt++)at+=int2hex(K[lt]);set(P,linkChip.toObject(at))},it.readAsArrayBuffer(ot)}catch(X){console.error("Error:",X)}}async function Z(){set(P,linkChip.toRaw(get(P)));const X=new Uint8Array(get(P).raw.match(/.{1,2}/g).map(st=>parseInt(st,16))),it=await(await window.showSaveFilePicker({suggestedName:"backup.navi",types:[{description:"Navi Backup",accept:{"application/octet-stream":[".navi"]}}]})).createWritable();await it.write(X),await it.close()}init$1();var G=root(),H=first_child(G),W=derived_safe_equal(()=>!!get(P));Navi(H,{get port(){return get(w)},get hasNavi(){return get(W)},get loading(){return get(I)},loadNavi:D,writeNavi:U,connect:F,openNavi:j,saveNavi:Z});var q=sibling(H,2),Q=child(q);{var et=X=>{VersionUpdate(X,{get version(){return get($)}})};if_block(Q,X=>{get(w)&&X(et)})}var J=sibling(Q,2);{var V=X=>{var ot=root_2(),it=child(ot),st=child(it),at=child(st),ft=child(at);NaviField(ft,{name:"Navi ID",get value(){return get(P).naviId},set value(yt){mutate(P,get(P).naviId=yt)},$$legacy:!0});var K=sibling(st,2),lt=child(K),vt=child(lt);NumberField(vt,{name:"PET ID",get value(){return get(P).petId},set value(yt){mutate(P,get(P).petId=yt)},$$legacy:!0});var dt=sibling(K,2),ht=child(dt),pt=child(ht);NumberField(pt,{name:"Navi Level",get value(){return get(P).level},set value(yt){mutate(P,get(P).level=yt)},$$legacy:!0});var Rt=sibling(ht,2),Tt=child(Rt);NumberField(Tt,{name:"Navi EXP",get value(){return get(P).experiance},set value(yt){mutate(P,get(P).experiance=yt)},$$legacy:!0});var xt=sibling(dt,2),$t=child(xt),Et=child($t);NumberField(Et,{name:"Navi HP",get value(){return get(P).health},set value(yt){mutate(P,get(P).health=yt)},$$legacy:!0});var Pt=sibling($t,2),Ot=child(Pt);NumberField(Ot,{name:"Navi ATTK",get value(){return get(P).attack},set value(yt){mutate(P,get(P).attack=yt)},$$legacy:!0});var Ct=sibling(xt,2),St=child(Ct),It=child(St);NumberField(It,{name:"Navi Wins",get value(){return get(P).wins},set value(yt){mutate(P,get(P).wins=yt)},$$legacy:!0});var Ft=sibling(St,2),Ut=child(Ft);NumberField(Ut,{name:"Navi Losses",get value(){return get(P).losses},set value(yt){mutate(P,get(P).losses=yt)},$$legacy:!0});var jt=sibling(Ct,2),Mt=child(jt),nt=child(Mt);ImageField(nt,{name:"Cross Sprite",get value(){return get(P).crossSprite},set value(yt){mutate(P,get(P).crossSprite=yt)},$$legacy:!0});var At=sibling(Mt,2),mt=child(At);ImageField(mt,{name:"Win Sprite",get value(){return get(P).winSprite},set value(yt){mutate(P,get(P).winSprite=yt)},$$legacy:!0});var gt=sibling(At,2),_t=child(gt);ImageField(_t,{name:"Lose Sprite",get value(){return get(P).loseSprite},set value(yt){mutate(P,get(P).loseSprite=yt)},$$legacy:!0}),append(X,ot)};if_block(J,X=>{get(P)&&X(V)})}var rt=sibling(q,2);Footer(rt),append(d,G),pop()}mount(App,{target:document.getElementById("app")})});export default ze();
